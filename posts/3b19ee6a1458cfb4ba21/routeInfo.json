{"template":"__react_static_root__/src/components/QiitaPost","sharedHashesByProp":{},"data":{"post":{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>以前<a href=\"http://qiita.com/ykhirao/items/0d6b9f4a0cc626884dbb\" id=\"reference-c853bd6c40e8d1bde1a6\">Slack APIのTokenの取得・場所</a>という記事を書かせていただきました。<br>\nしかしながらこちらのトークンは以前は「Test Token」と表記されていたもので、今ではレガシーでかつ非推奨みたいですので、今回この記事を書かせていただきした。</p>\n\n<p>推奨Tokenも5分くらいで作成できますので、こちらを使用することをおすすめします！<br>\n慣れたら作成は1分以内でできるようになります。<br>\nスコープの選定も基本は<code>chat:write:bot</code>とかSend messages系が一番多いと思うのであまり迷わないと思います。</p>\n\n<h2>\n<span id=\"トークンの効力\" class=\"fragment\"></span><a href=\"#%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%81%AE%E5%8A%B9%E5%8A%9B\"><i class=\"fa fa-link\"></i></a>トークンの効力</h2>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">Tokenの種類</th>\n<th style=\"text-align: center\">操作対象</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">レガシー</td>\n<td style=\"text-align: center\">ほとんどの機能が使える1つのTokenを発行</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">今回</td>\n<td style=\"text-align: center\">必要な機能ごとのTokenを発行</td>\n</tr>\n</tbody>\n</table>\n\n<p>英語できる方はドキュメントからどうぞ <a href=\"https://api.slack.com/docs/oauth\" rel=\"nofollow noopener\" target=\"_blank\">Using OAuth 2.0</a></p>\n\n<h1>\n<span id=\"tokenについて\" class=\"fragment\"></span><a href=\"#token%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a>Tokenについて</h1>\n\n<p>Token作成には以下の2種類があるかと思っています。</p>\n\n<h2>\n<span id=\"1-redirectとresponseを利用した方法\" class=\"fragment\"></span><a href=\"#1-redirect%E3%81%A8response%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>1. RedirectとResponseを利用した方法</h2>\n\n<p>パラメーターを付けたGETでアクセスして、返ってきたJSONにアクセスTokenがついてくるパターンの方法です。</p>\n\n<ul>\n<li><a href=\"http://qiita.com/ysomei/items/88e0bebfd2cfb21fade4\" id=\"reference-6ea80ec2ee9758bb5542\">今更ですが、iOS Slack API を叩いてみた。</a></li>\n<li><a href=\"http://www.utali.io/entry/2016/10/03/004421\" rel=\"nofollow noopener\" target=\"_blank\">SlackでOAuthを利用して BOT投稿 するための アクセストークン を取得する方法</a></li>\n</ul>\n\n<p>今回は扱わないので、よくまとまっている上の記事などを参照されると理解しやすくなると思います。</p>\n\n<h2>\n<span id=\"2-guiで作成する方法\" class=\"fragment\"></span><a href=\"#2-gui%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>2. GUIで作成する方法</h2>\n\n<p>今回はこちらを私が書いていきますので、最後までよろしくお願いします。</p>\n\n<h1>\n<span id=\"tokenを作成する\" class=\"fragment\"></span><a href=\"#token%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Tokenを作成する</h1>\n\n<p>アプリを作成してSlackにインストールすれば使えるようになりますので、その手順を書いていきます。</p>\n\n<h2>\n<span id=\"1-アプリ作成\" class=\"fragment\"></span><a href=\"#1-%E3%82%A2%E3%83%97%E3%83%AA%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>1. アプリ作成</h2>\n\n<p>まずはここにアクセスして、　<a href=\"https://api.slack.com/apps\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://api.slack.com/apps</a></p>\n\n<p><strong>クリックする　/　入力する</strong><br>\n1. Create New App<br>\n2. App Name<br>\n3. Development Slack Team<br>\n4. Create App</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/cd90a4e98b4a3dbf4e8f4913cd8a76e281cb3382/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34363934356362642d336631322d393762372d346138332d3665613436356538396636382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F46945cbd-3f12-97b7-4a83-6ea465e89f68.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1e48679c5a1e6f6dacd377f35613f604\" alt=\"スクリーンショット 2017-06-14 11.01.04.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/46945cbd-3f12-97b7-4a83-6ea465e89f68.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F46945cbd-3f12-97b7-4a83-6ea465e89f68.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=764eb463af04e5d5f09e66ae679c85c1 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"2-スコープ設定\" class=\"fragment\"></span><a href=\"#2-%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%97%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>2. スコープ設定</h2>\n\n<p>まずはスコープの設定をしないとアプリをインストールできません。<br>\n今回のサンプルではチャンネルにメッセージを投稿するだけのスコープだけ設定します。<br>\nどのスコープでどういうことができるかは今回取り扱いませんので、<a href=\"https://api.slack.com/docs/oauth-scopes\" rel=\"nofollow noopener\" target=\"_blank\">ドキュメント</a>を参照ください。</p>\n\n<ul>\n<li>permission scopeをクリック</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/636fa99a47fe96c15f35b9d752f415d4b9ce419b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f64353938626131352d623966332d666166322d393935642d3138376565383961623439632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fd598ba15-b9f3-faf2-995d-187ee89ab49c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=455ef4c3f892a450302bb79ee82a4568\" alt=\"スクリーンショット 2017-06-14 16.25.27.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/d598ba15-b9f3-faf2-995d-187ee89ab49c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fd598ba15-b9f3-faf2-995d-187ee89ab49c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=95d02ff2ac6f6a4b92332843ce49a062 1x\" loading=\"lazy\"></a></p>\n\n<ul>\n<li>必要なscopeを選択 </li>\n<li>今回はSend messages as sample.</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/3a0c8665b725f7586863e5b42cc445ff0cab7403/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f37343936346330662d353461342d643662612d326435392d3864373964363131366463632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F74964c0f-54a4-d6ba-2d59-8d79d6116dcc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9f115e8db162adba6b63b3f70fa92c03\" alt=\"スクリーンショット 2017-06-14 16.28.57.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/74964c0f-54a4-d6ba-2d59-8d79d6116dcc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F74964c0f-54a4-d6ba-2d59-8d79d6116dcc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=908109b0d64bc627e1ee11fc13f4a381 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"3-slackにアプリをインストール\" class=\"fragment\"></span><a href=\"#3-slack%E3%81%AB%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"><i class=\"fa fa-link\"></i></a>3. Slackにアプリをインストール</h2>\n\n<p>ちゃんとScopeが設定されていると緑色になっている[Install App To Team]を押します。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/346027620a2538b0a3bff387ff47e35e5fda3d24/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34333962396365362d323663322d633061362d316138322d3932343962666536333739632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F439b9ce6-26c2-c0a6-1a82-9249bfe6379c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0df095e92606775e84dceb17c8f7411f\" alt=\"スクリーンショット 2017-06-14 16.31.12.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/439b9ce6-26c2-c0a6-1a82-9249bfe6379c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F439b9ce6-26c2-c0a6-1a82-9249bfe6379c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=40f8df5cca7e8f256160e0d5c3abde36 1x\" loading=\"lazy\"></a></p>\n\n<p>Team名を確認して間違いがなければ[Authorize]を押します。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f94a007494e39ad7265fd971d466699cc43396ae/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f31663834313432382d633465342d356137392d386235622d3532363461346564303439372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F1f841428-c4e4-5a79-8b5b-5264a4ed0497.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=26a41be1fda0b4b953319c26691abb3c\" alt=\"スクリーンショット 2017-06-14 16.32.04.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/1f841428-c4e4-5a79-8b5b-5264a4ed0497.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F1f841428-c4e4-5a79-8b5b-5264a4ed0497.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d534cce9714301a9096576b9601eb02e 1x\" loading=\"lazy\"></a></p>\n\n<p>リダイレクトされた先にTokenが書かれていますのでこれを普通のTokenとして使ってください。</p>\n\n<h2>\n<span id=\"4-tokenを探す\" class=\"fragment\"></span><a href=\"#4-token%E3%82%92%E6%8E%A2%E3%81%99\"><i class=\"fa fa-link\"></i></a>4. Tokenを探す</h2>\n\n<p>先のTokenを紛失したときの探し方。<br>\n<a href=\"https://api.slack.com/apps\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://api.slack.com/apps</a></p>\n\n<p>アプリを選ぶ。<br>\nsampleをクリック</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/694c25a7ee867332840eded4033449a414ff7a97/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34383237333635302d333236632d373934662d356363372d3531323265373336353333332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F48273650-326c-794f-5cc7-5122e7365333.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=20e2589c5694788f4bd5120fd1d81a9a\" alt=\"スクリーンショット 2017-06-14 16.35.27.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/48273650-326c-794f-5cc7-5122e7365333.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F48273650-326c-794f-5cc7-5122e7365333.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7dfdd38d72f068aad332ef1ecf478be7 1x\" loading=\"lazy\"></a></p>\n\n<p>[OAuth &amp; Permissions]をクリック<br>\n[OAuth Access Token]をコピー</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/9d626266e655b6ce1c516ec6ca4ea5dc7acbce9f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f36376161353038332d636266382d376665382d663431372d6263343865383530616433342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F67aa5083-cbf8-7fe8-f417-bc48e850ad34.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ff4fc136f4c1f130f0c698a56dadb848\" alt=\"スクリーンショット 2017-06-14 16.36.20.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/67aa5083-cbf8-7fe8-f417-bc48e850ad34.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F67aa5083-cbf8-7fe8-f417-bc48e850ad34.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b9960d30ff80fda6f8e01af26bafbba2 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"5-tokenが使えるかの実験\" class=\"fragment\"></span><a href=\"#5-token%E3%81%8C%E4%BD%BF%E3%81%88%E3%82%8B%E3%81%8B%E3%81%AE%E5%AE%9F%E9%A8%93\"><i class=\"fa fa-link\"></i></a>5. Tokenが使えるかの実験</h2>\n\n<p>httpを叩いてみる</p>\n\n<p>sampleのTokenですがこんな感じです。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code>https://slack.com/api/chat.postMessage?token=xoxo-xxx-xx-xx-xxxx<span class=\"err\">&amp;</span>channel=bot-test<span class=\"err\">&amp;</span>text=%22Hello%22\n</code></pre></div></div>\n\n<p>channelとTokenを変えると使えるはずです。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code># 成功\n{\"ok\":true,\"channel\":\"xxxxx\",\"ts\":\"xxxxx\",\"message\":{\"text\":\"\\\"Hello\\\"\",\"username\":\"sample\",\"bot_id\":\"xxxxx\",\"type\":\"message\",\"subtype\":\"bot_message\",\"ts\":\"xxxxx\"}}\n# 失敗\n{\"ok\":false,\"error\":\"token_revoked\"}\n</code></pre></div></div>\n\n<h1>\n<span id=\"残念な点\" class=\"fragment\"></span><a href=\"#%E6%AE%8B%E5%BF%B5%E3%81%AA%E7%82%B9\"><i class=\"fa fa-link\"></i></a>残念な点</h1>\n\n<p>機能ごとにAppsが増えていく（Freeプランだと10個まで）<br>\nなのでレガシートークンの方の「Slack API Tester」だけ使いたくなりますね。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/66482748b9069f4ed2a5960e57dda9e94b97fe0c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f64663663356561362d623063632d643830612d626130612d6330396164316135323630642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fdf6c5ea6-b0cc-d80a-ba0a-c09ad1a5260d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0293842fc27aacee1dd6dc4a27755b93\" alt=\"スクリーンショット 2017-06-14 12.16.58.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/df6c5ea6-b0cc-d80a-ba0a-c09ad1a5260d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fdf6c5ea6-b0cc-d80a-ba0a-c09ad1a5260d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4d08b7d1a670532e4734fff2c0cd4b09 1x\" loading=\"lazy\"></a></p>\n\n<p>管理場所は<a href=\"http://qiita.com/ykhirao/items/d825a1a124ee78b73576\" id=\"reference-5cc6599c7240f5d5e915\">Slackの外部Apps(Integrations)の場所・管理</a>を参考ください。</p>\n\n<p><a href=\"https://your_team_name.slack.com/apps/manage\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://your_team_name.slack.com/apps/manage</a> です。</p>\n\n<h1>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h1>\n\n<p>簡単なのでレガシートークンから置き換えて、新しいほうのトークンを是非使ってください。<br>\n間違いとかあったらコメント欄で優しく指摘くださるか、こっそりプルリクくれると喜びますm(__)m</p>\n\n<p>.</p>\n","body":"# はじめに\n\n以前[Slack APIのTokenの取得・場所](http://qiita.com/ykhirao/items/0d6b9f4a0cc626884dbb)という記事を書かせていただきました。\nしかしながらこちらのトークンは以前は「Test Token」と表記されていたもので、今ではレガシーでかつ非推奨みたいですので、今回この記事を書かせていただきした。\n\n推奨Tokenも5分くらいで作成できますので、こちらを使用することをおすすめします！\n慣れたら作成は1分以内でできるようになります。\nスコープの選定も基本は`chat:write:bot`とかSend messages系が一番多いと思うのであまり迷わないと思います。\n\n## トークンの効力\n\n| Tokenの種類 | 操作対象 |\n|:-:|:-:|\n| レガシー  | ほとんどの機能が使える1つのTokenを発行  |\n| 今回  | 必要な機能ごとのTokenを発行  |\n\n英語できる方はドキュメントからどうぞ [Using OAuth 2.0](https://api.slack.com/docs/oauth)\n\n# Tokenについて\n\nToken作成には以下の2種類があるかと思っています。\n\n## 1. RedirectとResponseを利用した方法\n\nパラメーターを付けたGETでアクセスして、返ってきたJSONにアクセスTokenがついてくるパターンの方法です。\n\n* [今更ですが、iOS Slack API を叩いてみた。](http://qiita.com/ysomei/items/88e0bebfd2cfb21fade4)\n* [SlackでOAuthを利用して BOT投稿 するための アクセストークン を取得する方法](http://www.utali.io/entry/2016/10/03/004421)\n\n今回は扱わないので、よくまとまっている上の記事などを参照されると理解しやすくなると思います。\n\n## 2. GUIで作成する方法\n\n今回はこちらを私が書いていきますので、最後までよろしくお願いします。\n\n# Tokenを作成する\n\nアプリを作成してSlackにインストールすれば使えるようになりますので、その手順を書いていきます。\n\n## 1. アプリ作成\n\nまずはここにアクセスして、　https://api.slack.com/apps\n\n**クリックする　/　入力する**\n1. Create New App\n2. App Name\n3. Development Slack Team\n4. Create App\n\n![スクリーンショット 2017-06-14 11.01.04.png](https://qiita-image-store.s3.amazonaws.com/0/112929/46945cbd-3f12-97b7-4a83-6ea465e89f68.png)\n\n## 2. スコープ設定\n\nまずはスコープの設定をしないとアプリをインストールできません。\n今回のサンプルではチャンネルにメッセージを投稿するだけのスコープだけ設定します。\nどのスコープでどういうことができるかは今回取り扱いませんので、[ドキュメント](https://api.slack.com/docs/oauth-scopes)を参照ください。\n\n* permission scopeをクリック\n\n![スクリーンショット 2017-06-14 16.25.27.png](https://qiita-image-store.s3.amazonaws.com/0/112929/d598ba15-b9f3-faf2-995d-187ee89ab49c.png)\n\n* 必要なscopeを選択 \n* 今回はSend messages as sample.\n\n![スクリーンショット 2017-06-14 16.28.57.png](https://qiita-image-store.s3.amazonaws.com/0/112929/74964c0f-54a4-d6ba-2d59-8d79d6116dcc.png)\n\n## 3. Slackにアプリをインストール\n\nちゃんとScopeが設定されていると緑色になっている[Install App To Team]を押します。\n\n![スクリーンショット 2017-06-14 16.31.12.png](https://qiita-image-store.s3.amazonaws.com/0/112929/439b9ce6-26c2-c0a6-1a82-9249bfe6379c.png)\n\nTeam名を確認して間違いがなければ[Authorize]を押します。\n\n![スクリーンショット 2017-06-14 16.32.04.png](https://qiita-image-store.s3.amazonaws.com/0/112929/1f841428-c4e4-5a79-8b5b-5264a4ed0497.png)\n\nリダイレクトされた先にTokenが書かれていますのでこれを普通のTokenとして使ってください。\n\n## 4. Tokenを探す\n\n先のTokenを紛失したときの探し方。\nhttps://api.slack.com/apps\n\nアプリを選ぶ。\nsampleをクリック\n\n![スクリーンショット 2017-06-14 16.35.27.png](https://qiita-image-store.s3.amazonaws.com/0/112929/48273650-326c-794f-5cc7-5122e7365333.png)\n\n[OAuth & Permissions]をクリック\n[OAuth Access Token]をコピー\n\n![スクリーンショット 2017-06-14 16.36.20.png](https://qiita-image-store.s3.amazonaws.com/0/112929/67aa5083-cbf8-7fe8-f417-bc48e850ad34.png)\n\n## 5. Tokenが使えるかの実験\n\nhttpを叩いてみる\n\nsampleのTokenですがこんな感じです。\n\n```html\nhttps://slack.com/api/chat.postMessage?token=xoxo-xxx-xx-xx-xxxx&channel=bot-test&text=%22Hello%22\n```\nchannelとTokenを変えると使えるはずです。\n\n```\n# 成功\n{\"ok\":true,\"channel\":\"xxxxx\",\"ts\":\"xxxxx\",\"message\":{\"text\":\"\\\"Hello\\\"\",\"username\":\"sample\",\"bot_id\":\"xxxxx\",\"type\":\"message\",\"subtype\":\"bot_message\",\"ts\":\"xxxxx\"}}\n# 失敗\n{\"ok\":false,\"error\":\"token_revoked\"}\n```\n\n\n# 残念な点\n\n機能ごとにAppsが増えていく（Freeプランだと10個まで）\nなのでレガシートークンの方の「Slack API Tester」だけ使いたくなりますね。\n\n![スクリーンショット 2017-06-14 12.16.58.png](https://qiita-image-store.s3.amazonaws.com/0/112929/df6c5ea6-b0cc-d80a-ba0a-c09ad1a5260d.png)\n\n管理場所は[Slackの外部Apps(Integrations)の場所・管理](http://qiita.com/ykhirao/items/d825a1a124ee78b73576)を参考ください。\n\nhttps://your_team_name.slack.com/apps/manage です。\n\n# 最後に\n簡単なのでレガシートークンから置き換えて、新しいほうのトークンを是非使ってください。\n間違いとかあったらコメント欄で優しく指摘くださるか、こっそりプルリクくれると喜びますm(__)m\n\n\n\n\n\n\n\n\n\n\n\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2017-06-14T17:25:03+09:00","group":null,"id":"3b19ee6a1458cfb4ba21","likes_count":473,"private":false,"reactions_count":0,"tags":[{"name":"Slack","versions":[]}],"title":"Slack API 推奨Tokenについて","updated_at":"2019-05-17T11:12:46+09:00","url":"https://qiita.com/ykhirao/items/3b19ee6a1458cfb4ba21","user":{"description":"Web Developer For 6 years.\r\nPHP/Laravel && (React OR Vue.js)\r\nTypeScript/node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":94,"github_login_name":"ykhirao","id":"ykhirao","items_count":58,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"yk_hirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null}},"path":"posts/3b19ee6a1458cfb4ba21"}
