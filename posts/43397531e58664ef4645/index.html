<!DOCTYPE html><html lang="en"><head><meta name="generator" content="React Static"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no"/><link rel="preload" as="script" href="/templates/styles.93ca6998.js"/><link rel="preload" as="script" href="/templates/vendors~main.867a25a5.js"/><link rel="preload" as="script" href="/main.39feca70.js"/><link rel="preload" as="style" href="/styles.642cfcb4.css"/><link rel="stylesheet" href="/styles.642cfcb4.css"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png"/><link rel="manifest" href="/manifest.json"/><meta name="mobile-web-app-capable" content="yes"/><meta name="theme-color" content="#fff"/><meta name="application-name"/><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon-167x167.png"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="1024x1024" href="/apple-touch-icon-1024x1024.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><meta name="apple-mobile-web-app-title"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-640x1136.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-750x1334.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-828x1792.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1125x2436.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2208.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2688.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1536x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2224.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2388.png"/><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-2048x2732.png"/><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1620x2160.png"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1136x640.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1334x750.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1792x828.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2436x1125.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2208x1242.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2688x1242.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2048x1536.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2224x1668.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2388x1668.png"/><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2732x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1620.png"/><link rel="icon" type="image/png" sizes="228x228" href="/coast-228x228.png"/><meta name="msapplication-TileColor" content="#fff"/><meta name="msapplication-TileImage" content="/mstile-144x144.png"/><meta name="msapplication-config" content="/browserconfig.xml"/><link rel="yandex-tableau-widget" href="/yandex-browser-manifest.json"/></head><body><div id="root"><div style="outline:none" tabindex="-1"><nav class="navbar is-dark is-fixed-top" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item" href="/">Home</a><a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"><span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span></a></div><div id="navbarBasicExample" class="navbar-menu "><div class="navbar-start"><a class="navbar-item" href="/posts">Posts</a><a class="navbar-item" href="/events">Events</a><a class="navbar-item" href="/github">GitHub</a></div></div></div></nav><div class="container"><div class="is-primary" style="padding:4.5rem 0.5rem"><div style="outline:none" tabindex="-1"><div><a href="/posts">&lt;<!-- --> Back</a><br/><h3>Vue-test-utilsのpropsDataの基本的な使い方</h3><article class="md-body">
<h1>
<span id="vue-test-utilsのpropsdataの基本的な使い方" class="fragment"></span><a href="#vue-test-utils%E3%81%AEpropsdata%E3%81%AE%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>Vue-test-utilsのpropsDataの基本的な使い方</h1>

<p>最新版は<a href="https://lmiller1990.github.io/vue-testing-handbook/ja/components-with-props.html" rel="nofollow noopener" target="_blank">こちら</a>で、Vue.jsのテストの書き方についてのハンドブックを公開させてもらっています。</p>

<p>この記事を読むと</p>

<ul>
<li>テスト時にコンポーネントをwrapするときの引数の <code>propsData</code> に詳しくなる</li>
<li>テストの実践的なリファクタリングが学べる</li>
</ul>

<p>弊社では、テストのリファクタリングは <code>factory関数</code> というものを作成して行っているので、興味あるかたはぜひ使ってみてください。</p>

<h2>
<span id="propsdataの基本的な使い方" class="fragment"></span><a href="#propsdata%E3%81%AE%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>propsDataの基本的な使い方</h2>

<p><code>propsData</code> は基本的に <code>mount</code> や <code>shallowMount</code> とともに使うことができ、 <code>propsData</code> は親コンポーネントから <code>props</code> として渡されたものとしてテストで使用できます。</p>

<p>第二引数のオブジェクトの中に書くことができますが、基本的な書き方は次の通りです。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><code><span class="kd">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">shallowMount</span><span class="p">(</span><span class="nx">Foo</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">propsData</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<h2>
<span id="コンポーネントの作成とテスト" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>コンポーネントの作成とテスト</h2>

<h3>
<span id="submitbuttonvue" class="fragment"></span><a href="#submitbuttonvue"><i class="fa fa-link"></i></a>SubmitButton.vue</h3>

<p>2つの <code>props</code> を持つ簡単なコンポーネントを作成する。</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><code><span class="nt">&lt;template&gt;</span>
<span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">v-if=</span><span class="s">"isAdmin"</span><span class="nt">&gt;</span>管理者権限を実行する<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">v-else</span><span class="nt">&gt;</span>権限がありません<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;button&gt;</span>
    {{ msg }}
  <span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SubmitButton</span><span class="dl">"</span><span class="p">,</span>

  <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">msg</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
      <span class="na">required</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="na">isAdmin</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
      <span class="na">default</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<h3>
<span id="最初のテスト" class="fragment"></span><a href="#%E6%9C%80%E5%88%9D%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>最初のテスト</h3>

<p>権限がない状態でのメッセージを検証していく。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><code><span class="k">import</span> <span class="p">{</span> <span class="nx">shallowMount</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@vue/test-utils</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">SubmitButton</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@/components/SubmitButton.vue</span><span class="dl">'</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">SubmitButton.vue</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">権限がない状態のメッセージを表示する</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">msg</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">送信する</span><span class="dl">"</span>
    <span class="kd">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">shallowMount</span><span class="p">(</span><span class="nx">SubmitButton</span><span class="p">,{</span>
      <span class="na">propsData</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">msg</span><span class="p">:</span> <span class="nx">msg</span>
      <span class="p">}</span>
    <span class="p">})</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">html</span><span class="p">())</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">span</span><span class="dl">"</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">"</span><span class="s2">権限がありません</span><span class="dl">"</span><span class="p">)</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">"</span><span class="s2">送信する</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">})</span>
</code></pre></div></div>

<p>テスト結果</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><code>PASS  tests/unit/SubmitButton.spec.js
  SubmitButton.vue
    ✓ 権限がない状態のメッセージを表示する (15ms)
</code></pre></div></div>

<p>console.logの出力結果</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><code><span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;span&gt;</span>権限がありません<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;button&gt;</span>
    送信する
  <span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p><code>props</code> で渡された <code>msg</code> がきちんと描画されていることがわかります。</p>

<h3>
<span id="2つ目のテスト" class="fragment"></span><a href="#2%E3%81%A4%E7%9B%AE%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>2つ目のテスト</h3>

<p>権限がある状態 ( <code>isAdmin</code> が true ) でのメッセージを検証していく。</p>

<p>SubmitButton.spec.js</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><code><span class="k">import</span> <span class="p">{</span> <span class="nx">shallowMount</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@vue/test-utils</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">SubmitButton</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@/components/SubmitButton.vue</span><span class="dl">'</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">SubmitButton.vue</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">権限がある状態のメッセージを表示する</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">msg</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">送信する</span><span class="dl">"</span>
    <span class="kd">const</span> <span class="nx">isAdmin</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="kd">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">shallowMount</span><span class="p">(</span><span class="nx">SubmitButton</span><span class="p">,{</span>
      <span class="na">propsData</span><span class="p">:</span> <span class="p">{</span>
        <span class="nx">msg</span><span class="p">,</span>
        <span class="nx">isAdmin</span>
      <span class="p">}</span>
    <span class="p">})</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">span</span><span class="dl">"</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">"</span><span class="s2">管理者権限を実行する</span><span class="dl">"</span><span class="p">)</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">"</span><span class="s2">送信する</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">})</span>
</code></pre></div></div>

<p>テスト結果</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><code>PASS  tests/unit/SubmitButton.spec.js
  SubmitButton.vue
    ✓ 権限がある状態のメッセージを表示する <span class="o">(</span>4ms<span class="o">)</span>
</code></pre></div></div>

<p>console.logの出力結果</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><code><span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;span&gt;</span>管理者権限を実行する<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;button&gt;</span>
    送信する
  <span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p><code>props</code> で渡された <code>isAdmin</code> によって <code>&lt;span&gt;</code> の中がきちんと描画されていることがわかります。</p>

<h2>
<span id="テストのリファクタリング" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>テストのリファクタリング</h2>

<p><code>Don't repeat yourself</code> の原則に従って従ってテストをリファクタリングしていきましょう。テストがPassしているのでリファクタリングも怖くありません。</p>

<h3>
<span id="factory関数" class="fragment"></span><a href="#factory%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a>factory関数</h3>

<p>テストの度に <code>shallowMount</code> を呼び出し同じような <code>propsData</code> を渡しているので、factory関数でリファクタリングしたいと思います。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><code><span class="kd">const</span> <span class="nx">msg</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">送信する</span><span class="dl">"</span>
<span class="kd">const</span> <span class="nx">factory</span> <span class="o">=</span> <span class="p">(</span><span class="nx">propsData</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">shallowMount</span><span class="p">(</span><span class="nx">SubmitButton</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">propsData</span><span class="p">:</span> <span class="p">{</span>
      <span class="nx">msg</span><span class="p">,</span>
      <span class="p">...</span><span class="nx">propsData</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre></div></div>

<p>呼び出すたびに <code>shallowMount</code> で wrap してくれる factory 関数ができました。これを使ってテストをDRYにしていきましょう。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><code>  <span class="nx">describe</span><span class="p">(</span><span class="dl">"</span><span class="s2">管理者あり</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">メッセージを表示する</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">()</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">span</span><span class="dl">"</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">"</span><span class="s2">権限がありません</span><span class="dl">"</span><span class="p">)</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">"</span><span class="s2">送信する</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">})</span>
  <span class="p">})</span>

  <span class="nx">describe</span><span class="p">(</span><span class="dl">"</span><span class="s2">管理者なし</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">メッセージを表示する</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">({</span><span class="na">isAdmin</span><span class="p">:</span> <span class="kc">true</span><span class="p">})</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">span</span><span class="dl">"</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">"</span><span class="s2">管理者権限を実行する</span><span class="dl">"</span><span class="p">)</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">"</span><span class="s2">送信する</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">})</span>
  <span class="p">})</span>
</code></pre></div></div>

<p>さてテストを見ていきたいと思います。まだテストはGreenでPASSしています。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><code>PASS  tests/unit/SubmitButton.spec.js
  SubmitButton.vue
    リファクタリング
      管理者あり
        ✓ メッセージを表示する <span class="o">(</span>5ms<span class="o">)</span>
      管理者なし
        ✓ メッセージを表示する <span class="o">(</span>2ms<span class="o">)</span>
</code></pre></div></div>

<p>テストがあることで、変更やリファクタリングが怖くなくなりました。</p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>
<code>propsData</code> はコンポーネントをマウントするときに引数として渡し、 <code>props</code> として利用できる</li>
<li>factory関数を定義することでテストがDRYにかける</li>
<li>
<code>propsData</code> を使わずに <a href="https://vue-test-utils.vuejs.org/ja/api/wrapper-array/#setprops-props" rel="nofollow noopener" target="_blank"><code>setProps</code></a> を使えばプロパティを強制的に更新することもできる</li>
</ul>
</article></div></div></div></div><footer class="footer"><div class="content has-text-centered"><p>last uploaded at <!-- -->2023/05/24</p><p>© 2021 ykhirao</p></div></footer></div></div><script type="text/javascript">window.__routeInfo = JSON.parse("{\"template\":\"__react_static_root__/src/components/QiitaPost\",\"sharedHashesByProp\":{},\"data\":{\"post\":{\"rendered_body\":\"\\n<h1>\\n<span id=\\\"vue-test-utils\u306Epropsdata\u306E\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9\\\" class=\\\"fragment\\\"></span><a href=\\\"#vue-test-utils%E3%81%AEpropsdata%E3%81%AE%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9\\\"><i class=\\\"fa fa-link\\\"></i></a>Vue-test-utils\u306EpropsData\u306E\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9</h1>\\n\\n<p>\u6700\u65B0\u7248\u306F<a href=\\\"https://lmiller1990.github.io/vue-testing-handbook/ja/components-with-props.html\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">\u3053\u3061\u3089</a>\u3067\u3001Vue.js\u306E\u30C6\u30B9\u30C8\u306E\u66F8\u304D\u65B9\u306B\u3064\u3044\u3066\u306E\u30CF\u30F3\u30C9\u30D6\u30C3\u30AF\u3092\u516C\u958B\u3055\u305B\u3066\u3082\u3089\u3063\u3066\u3044\u307E\u3059\u3002</p>\\n\\n<p>\u3053\u306E\u8A18\u4E8B\u3092\u8AAD\u3080\u3068</p>\\n\\n<ul>\\n<li>\u30C6\u30B9\u30C8\u6642\u306B\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u3092wrap\u3059\u308B\u3068\u304D\u306E\u5F15\u6570\u306E <code>propsData</code> \u306B\u8A73\u3057\u304F\u306A\u308B</li>\\n<li>\u30C6\u30B9\u30C8\u306E\u5B9F\u8DF5\u7684\u306A\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u304C\u5B66\u3079\u308B</li>\\n</ul>\\n\\n<p>\u5F0A\u793E\u3067\u306F\u3001\u30C6\u30B9\u30C8\u306E\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u306F <code>factory\u95A2\u6570</code> \u3068\u3044\u3046\u3082\u306E\u3092\u4F5C\u6210\u3057\u3066\u884C\u3063\u3066\u3044\u308B\u306E\u3067\u3001\u8208\u5473\u3042\u308B\u304B\u305F\u306F\u305C\u3072\u4F7F\u3063\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002</p>\\n\\n<h2>\\n<span id=\\\"propsdata\u306E\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9\\\" class=\\\"fragment\\\"></span><a href=\\\"#propsdata%E3%81%AE%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9\\\"><i class=\\\"fa fa-link\\\"></i></a>propsData\u306E\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9</h2>\\n\\n<p><code>propsData</code> \u306F\u57FA\u672C\u7684\u306B <code>mount</code> \u3084 <code>shallowMount</code> \u3068\u3068\u3082\u306B\u4F7F\u3046\u3053\u3068\u304C\u3067\u304D\u3001 <code>propsData</code> \u306F\u89AA\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u304B\u3089 <code>props</code> \u3068\u3057\u3066\u6E21\u3055\u308C\u305F\u3082\u306E\u3068\u3057\u3066\u30C6\u30B9\u30C8\u3067\u4F7F\u7528\u3067\u304D\u307E\u3059\u3002</p>\\n\\n<p>\u7B2C\u4E8C\u5F15\u6570\u306E\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u306E\u4E2D\u306B\u66F8\u304F\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u304C\u3001\u57FA\u672C\u7684\u306A\u66F8\u304D\u65B9\u306F\u6B21\u306E\u901A\u308A\u3067\u3059\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"js\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">wrapper</span> <span class=\\\"o\\\">=</span> <span class=\\\"nx\\\">shallowMount</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">Foo</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">{</span>\\n  <span class=\\\"na\\\">propsData</span><span class=\\\"p\\\">:</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"na\\\">foo</span><span class=\\\"p\\\">:</span> <span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">bar</span><span class=\\\"dl\\\">'</span>\\n  <span class=\\\"p\\\">}</span>\\n<span class=\\\"p\\\">})</span>\\n</code></pre></div></div>\\n\\n<h2>\\n<span id=\\\"\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u306E\u4F5C\u6210\u3068\u30C6\u30B9\u30C8\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88\\\"><i class=\\\"fa fa-link\\\"></i></a>\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u306E\u4F5C\u6210\u3068\u30C6\u30B9\u30C8</h2>\\n\\n<h3>\\n<span id=\\\"submitbuttonvue\\\" class=\\\"fragment\\\"></span><a href=\\\"#submitbuttonvue\\\"><i class=\\\"fa fa-link\\\"></i></a>SubmitButton.vue</h3>\\n\\n<p>2\u3064\u306E <code>props</code> \u3092\u6301\u3064\u7C21\u5358\u306A\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u3092\u4F5C\u6210\u3059\u308B\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"html\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"nt\\\">&lt;template&gt;</span>\\n<span class=\\\"nt\\\">&lt;div&gt;</span>\\n  <span class=\\\"nt\\\">&lt;span</span> <span class=\\\"na\\\">v-if=</span><span class=\\\"s\\\">\\\"isAdmin\\\"</span><span class=\\\"nt\\\">&gt;</span>\u7BA1\u7406\u8005\u6A29\u9650\u3092\u5B9F\u884C\u3059\u308B<span class=\\\"nt\\\">&lt;/span&gt;</span>\\n  <span class=\\\"nt\\\">&lt;span</span> <span class=\\\"na\\\">v-else</span><span class=\\\"nt\\\">&gt;</span>\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093<span class=\\\"nt\\\">&lt;/span&gt;</span>\\n  <span class=\\\"nt\\\">&lt;button&gt;</span>\\n    {{ msg }}\\n  <span class=\\\"nt\\\">&lt;/button&gt;</span>\\n<span class=\\\"nt\\\">&lt;/div&gt;</span>\\n<span class=\\\"nt\\\">&lt;/template&gt;</span>\\n\\n<span class=\\\"nt\\\">&lt;script&gt;</span>\\n<span class=\\\"k\\\">export</span> <span class=\\\"k\\\">default</span> <span class=\\\"p\\\">{</span>\\n  <span class=\\\"na\\\">name</span><span class=\\\"p\\\">:</span> <span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">SubmitButton</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">,</span>\\n\\n  <span class=\\\"na\\\">props</span><span class=\\\"p\\\">:</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"na\\\">msg</span><span class=\\\"p\\\">:</span> <span class=\\\"p\\\">{</span>\\n      <span class=\\\"na\\\">type</span><span class=\\\"p\\\">:</span> <span class=\\\"nb\\\">String</span><span class=\\\"p\\\">,</span>\\n      <span class=\\\"na\\\">required</span><span class=\\\"p\\\">:</span> <span class=\\\"kc\\\">true</span>\\n    <span class=\\\"p\\\">},</span>\\n    <span class=\\\"na\\\">isAdmin</span><span class=\\\"p\\\">:</span> <span class=\\\"p\\\">{</span>\\n      <span class=\\\"na\\\">type</span><span class=\\\"p\\\">:</span> <span class=\\\"nb\\\">Boolean</span><span class=\\\"p\\\">,</span>\\n      <span class=\\\"na\\\">default</span><span class=\\\"p\\\">:</span> <span class=\\\"kc\\\">false</span>\\n    <span class=\\\"p\\\">}</span>\\n  <span class=\\\"p\\\">}</span>\\n<span class=\\\"p\\\">}</span>\\n<span class=\\\"nt\\\">&lt;/script&gt;</span>\\n</code></pre></div></div>\\n\\n<h3>\\n<span id=\\\"\u6700\u521D\u306E\u30C6\u30B9\u30C8\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E6%9C%80%E5%88%9D%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88\\\"><i class=\\\"fa fa-link\\\"></i></a>\u6700\u521D\u306E\u30C6\u30B9\u30C8</h3>\\n\\n<p>\u6A29\u9650\u304C\u306A\u3044\u72B6\u614B\u3067\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u691C\u8A3C\u3057\u3066\u3044\u304F\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"js\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"k\\\">import</span> <span class=\\\"p\\\">{</span> <span class=\\\"nx\\\">shallowMount</span> <span class=\\\"p\\\">}</span> <span class=\\\"k\\\">from</span> <span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">@vue/test-utils</span><span class=\\\"dl\\\">'</span>\\n<span class=\\\"k\\\">import</span> <span class=\\\"nx\\\">SubmitButton</span> <span class=\\\"k\\\">from</span> <span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">@/components/SubmitButton.vue</span><span class=\\\"dl\\\">'</span>\\n\\n<span class=\\\"nx\\\">describe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">SubmitButton.vue</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">()</span> <span class=\\\"o\\\">=&gt;</span> <span class=\\\"p\\\">{</span>\\n  <span class=\\\"nx\\\">it</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">\u6A29\u9650\u304C\u306A\u3044\u72B6\u614B\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">()</span> <span class=\\\"o\\\">=&gt;</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">msg</span> <span class=\\\"o\\\">=</span> <span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u9001\u4FE1\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span>\\n    <span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">wrapper</span> <span class=\\\"o\\\">=</span> <span class=\\\"nx\\\">shallowMount</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">SubmitButton</span><span class=\\\"p\\\">,{</span>\\n      <span class=\\\"na\\\">propsData</span><span class=\\\"p\\\">:</span> <span class=\\\"p\\\">{</span>\\n        <span class=\\\"na\\\">msg</span><span class=\\\"p\\\">:</span> <span class=\\\"nx\\\">msg</span>\\n      <span class=\\\"p\\\">}</span>\\n    <span class=\\\"p\\\">})</span>\\n\\n    <span class=\\\"nx\\\">console</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">log</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">wrapper</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">html</span><span class=\\\"p\\\">())</span>\\n\\n    <span class=\\\"nx\\\">expect</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">wrapper</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">find</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">span</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">).</span><span class=\\\"nx\\\">text</span><span class=\\\"p\\\">()).</span><span class=\\\"nx\\\">toBe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">)</span>\\n    <span class=\\\"nx\\\">expect</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">wrapper</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">find</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">button</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">).</span><span class=\\\"nx\\\">text</span><span class=\\\"p\\\">()).</span><span class=\\\"nx\\\">toBe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u9001\u4FE1\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">)</span>\\n  <span class=\\\"p\\\">})</span>\\n<span class=\\\"p\\\">})</span>\\n</code></pre></div></div>\\n\\n<p>\u30C6\u30B9\u30C8\u7D50\u679C</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"text\\\"><div class=\\\"highlight\\\"><pre><code>PASS  tests/unit/SubmitButton.spec.js\\n  SubmitButton.vue\\n    \u2713 \u6A29\u9650\u304C\u306A\u3044\u72B6\u614B\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B (15ms)\\n</code></pre></div></div>\\n\\n<p>console.log\u306E\u51FA\u529B\u7D50\u679C</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"html\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"nt\\\">&lt;div&gt;</span>\\n  <span class=\\\"nt\\\">&lt;span&gt;</span>\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093<span class=\\\"nt\\\">&lt;/span&gt;</span>\\n  <span class=\\\"nt\\\">&lt;button&gt;</span>\\n    \u9001\u4FE1\u3059\u308B\\n  <span class=\\\"nt\\\">&lt;/button&gt;</span>\\n<span class=\\\"nt\\\">&lt;/div&gt;</span>\\n</code></pre></div></div>\\n\\n<p><code>props</code> \u3067\u6E21\u3055\u308C\u305F <code>msg</code> \u304C\u304D\u3061\u3093\u3068\u63CF\u753B\u3055\u308C\u3066\u3044\u308B\u3053\u3068\u304C\u308F\u304B\u308A\u307E\u3059\u3002</p>\\n\\n<h3>\\n<span id=\\\"2\u3064\u76EE\u306E\u30C6\u30B9\u30C8\\\" class=\\\"fragment\\\"></span><a href=\\\"#2%E3%81%A4%E7%9B%AE%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88\\\"><i class=\\\"fa fa-link\\\"></i></a>2\u3064\u76EE\u306E\u30C6\u30B9\u30C8</h3>\\n\\n<p>\u6A29\u9650\u304C\u3042\u308B\u72B6\u614B ( <code>isAdmin</code> \u304C true ) \u3067\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u691C\u8A3C\u3057\u3066\u3044\u304F\u3002</p>\\n\\n<p>SubmitButton.spec.js</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"js\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"k\\\">import</span> <span class=\\\"p\\\">{</span> <span class=\\\"nx\\\">shallowMount</span> <span class=\\\"p\\\">}</span> <span class=\\\"k\\\">from</span> <span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">@vue/test-utils</span><span class=\\\"dl\\\">'</span>\\n<span class=\\\"k\\\">import</span> <span class=\\\"nx\\\">SubmitButton</span> <span class=\\\"k\\\">from</span> <span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">@/components/SubmitButton.vue</span><span class=\\\"dl\\\">'</span>\\n\\n<span class=\\\"nx\\\">describe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">SubmitButton.vue</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">()</span> <span class=\\\"o\\\">=&gt;</span> <span class=\\\"p\\\">{</span>\\n  <span class=\\\"nx\\\">it</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">\u6A29\u9650\u304C\u3042\u308B\u72B6\u614B\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">()</span> <span class=\\\"o\\\">=&gt;</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">msg</span> <span class=\\\"o\\\">=</span> <span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u9001\u4FE1\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span>\\n    <span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">isAdmin</span> <span class=\\\"o\\\">=</span> <span class=\\\"kc\\\">true</span>\\n    <span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">wrapper</span> <span class=\\\"o\\\">=</span> <span class=\\\"nx\\\">shallowMount</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">SubmitButton</span><span class=\\\"p\\\">,{</span>\\n      <span class=\\\"na\\\">propsData</span><span class=\\\"p\\\">:</span> <span class=\\\"p\\\">{</span>\\n        <span class=\\\"nx\\\">msg</span><span class=\\\"p\\\">,</span>\\n        <span class=\\\"nx\\\">isAdmin</span>\\n      <span class=\\\"p\\\">}</span>\\n    <span class=\\\"p\\\">})</span>\\n\\n    <span class=\\\"nx\\\">expect</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">wrapper</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">find</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">span</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">).</span><span class=\\\"nx\\\">text</span><span class=\\\"p\\\">()).</span><span class=\\\"nx\\\">toBe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u7BA1\u7406\u8005\u6A29\u9650\u3092\u5B9F\u884C\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">)</span>\\n    <span class=\\\"nx\\\">expect</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">wrapper</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">find</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">button</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">).</span><span class=\\\"nx\\\">text</span><span class=\\\"p\\\">()).</span><span class=\\\"nx\\\">toBe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u9001\u4FE1\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">)</span>\\n  <span class=\\\"p\\\">})</span>\\n<span class=\\\"p\\\">})</span>\\n</code></pre></div></div>\\n\\n<p>\u30C6\u30B9\u30C8\u7D50\u679C</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"shell\\\"><div class=\\\"highlight\\\"><pre><code>PASS  tests/unit/SubmitButton.spec.js\\n  SubmitButton.vue\\n    \u2713 \u6A29\u9650\u304C\u3042\u308B\u72B6\u614B\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B <span class=\\\"o\\\">(</span>4ms<span class=\\\"o\\\">)</span>\\n</code></pre></div></div>\\n\\n<p>console.log\u306E\u51FA\u529B\u7D50\u679C</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"html\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"nt\\\">&lt;div&gt;</span>\\n  <span class=\\\"nt\\\">&lt;span&gt;</span>\u7BA1\u7406\u8005\u6A29\u9650\u3092\u5B9F\u884C\u3059\u308B<span class=\\\"nt\\\">&lt;/span&gt;</span>\\n  <span class=\\\"nt\\\">&lt;button&gt;</span>\\n    \u9001\u4FE1\u3059\u308B\\n  <span class=\\\"nt\\\">&lt;/button&gt;</span>\\n<span class=\\\"nt\\\">&lt;/div&gt;</span>\\n</code></pre></div></div>\\n\\n<p><code>props</code> \u3067\u6E21\u3055\u308C\u305F <code>isAdmin</code> \u306B\u3088\u3063\u3066 <code>&lt;span&gt;</code> \u306E\u4E2D\u304C\u304D\u3061\u3093\u3068\u63CF\u753B\u3055\u308C\u3066\u3044\u308B\u3053\u3068\u304C\u308F\u304B\u308A\u307E\u3059\u3002</p>\\n\\n<h2>\\n<span id=\\\"\u30C6\u30B9\u30C8\u306E\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0\\\"><i class=\\\"fa fa-link\\\"></i></a>\u30C6\u30B9\u30C8\u306E\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0</h2>\\n\\n<p><code>Don't repeat yourself</code> \u306E\u539F\u5247\u306B\u5F93\u3063\u3066\u5F93\u3063\u3066\u30C6\u30B9\u30C8\u3092\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u3057\u3066\u3044\u304D\u307E\u3057\u3087\u3046\u3002\u30C6\u30B9\u30C8\u304CPass\u3057\u3066\u3044\u308B\u306E\u3067\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u3082\u6016\u304F\u3042\u308A\u307E\u305B\u3093\u3002</p>\\n\\n<h3>\\n<span id=\\\"factory\u95A2\u6570\\\" class=\\\"fragment\\\"></span><a href=\\\"#factory%E9%96%A2%E6%95%B0\\\"><i class=\\\"fa fa-link\\\"></i></a>factory\u95A2\u6570</h3>\\n\\n<p>\u30C6\u30B9\u30C8\u306E\u5EA6\u306B <code>shallowMount</code> \u3092\u547C\u3073\u51FA\u3057\u540C\u3058\u3088\u3046\u306A <code>propsData</code> \u3092\u6E21\u3057\u3066\u3044\u308B\u306E\u3067\u3001factory\u95A2\u6570\u3067\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u3057\u305F\u3044\u3068\u601D\u3044\u307E\u3059\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"js\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">msg</span> <span class=\\\"o\\\">=</span> <span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u9001\u4FE1\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span>\\n<span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">factory</span> <span class=\\\"o\\\">=</span> <span class=\\\"p\\\">(</span><span class=\\\"nx\\\">propsData</span><span class=\\\"p\\\">)</span> <span class=\\\"o\\\">=&gt;</span> <span class=\\\"p\\\">{</span>\\n  <span class=\\\"k\\\">return</span> <span class=\\\"nx\\\">shallowMount</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">SubmitButton</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"na\\\">propsData</span><span class=\\\"p\\\">:</span> <span class=\\\"p\\\">{</span>\\n      <span class=\\\"nx\\\">msg</span><span class=\\\"p\\\">,</span>\\n      <span class=\\\"p\\\">...</span><span class=\\\"nx\\\">propsData</span>\\n    <span class=\\\"p\\\">}</span>\\n  <span class=\\\"p\\\">})</span>\\n<span class=\\\"p\\\">}</span>\\n</code></pre></div></div>\\n\\n<p>\u547C\u3073\u51FA\u3059\u305F\u3073\u306B <code>shallowMount</code> \u3067 wrap \u3057\u3066\u304F\u308C\u308B factory \u95A2\u6570\u304C\u3067\u304D\u307E\u3057\u305F\u3002\u3053\u308C\u3092\u4F7F\u3063\u3066\u30C6\u30B9\u30C8\u3092DRY\u306B\u3057\u3066\u3044\u304D\u307E\u3057\u3087\u3046\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"js\\\"><div class=\\\"highlight\\\"><pre><code>  <span class=\\\"nx\\\">describe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u7BA1\u7406\u8005\u3042\u308A</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">()</span><span class=\\\"o\\\">=&gt;</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"nx\\\">it</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">()</span> <span class=\\\"o\\\">=&gt;</span> <span class=\\\"p\\\">{</span>\\n      <span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">wrapper</span> <span class=\\\"o\\\">=</span> <span class=\\\"nx\\\">factory</span><span class=\\\"p\\\">()</span>\\n\\n      <span class=\\\"nx\\\">expect</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">wrapper</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">find</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">span</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">).</span><span class=\\\"nx\\\">text</span><span class=\\\"p\\\">()).</span><span class=\\\"nx\\\">toBe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">)</span>\\n      <span class=\\\"nx\\\">expect</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">wrapper</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">find</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">button</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">).</span><span class=\\\"nx\\\">text</span><span class=\\\"p\\\">()).</span><span class=\\\"nx\\\">toBe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u9001\u4FE1\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">)</span>\\n    <span class=\\\"p\\\">})</span>\\n  <span class=\\\"p\\\">})</span>\\n\\n  <span class=\\\"nx\\\">describe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u7BA1\u7406\u8005\u306A\u3057</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">()</span><span class=\\\"o\\\">=&gt;</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"nx\\\">it</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">()</span> <span class=\\\"o\\\">=&gt;</span> <span class=\\\"p\\\">{</span>\\n      <span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">wrapper</span> <span class=\\\"o\\\">=</span> <span class=\\\"nx\\\">factory</span><span class=\\\"p\\\">({</span><span class=\\\"na\\\">isAdmin</span><span class=\\\"p\\\">:</span> <span class=\\\"kc\\\">true</span><span class=\\\"p\\\">})</span>\\n\\n      <span class=\\\"nx\\\">expect</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">wrapper</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">find</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">span</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">).</span><span class=\\\"nx\\\">text</span><span class=\\\"p\\\">()).</span><span class=\\\"nx\\\">toBe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u7BA1\u7406\u8005\u6A29\u9650\u3092\u5B9F\u884C\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">)</span>\\n      <span class=\\\"nx\\\">expect</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">wrapper</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">find</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">button</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">).</span><span class=\\\"nx\\\">text</span><span class=\\\"p\\\">()).</span><span class=\\\"nx\\\">toBe</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">\u9001\u4FE1\u3059\u308B</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">)</span>\\n    <span class=\\\"p\\\">})</span>\\n  <span class=\\\"p\\\">})</span>\\n</code></pre></div></div>\\n\\n<p>\u3055\u3066\u30C6\u30B9\u30C8\u3092\u898B\u3066\u3044\u304D\u305F\u3044\u3068\u601D\u3044\u307E\u3059\u3002\u307E\u3060\u30C6\u30B9\u30C8\u306FGreen\u3067PASS\u3057\u3066\u3044\u307E\u3059\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"shell\\\"><div class=\\\"highlight\\\"><pre><code>PASS  tests/unit/SubmitButton.spec.js\\n  SubmitButton.vue\\n    \u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\\n      \u7BA1\u7406\u8005\u3042\u308A\\n        \u2713 \u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B <span class=\\\"o\\\">(</span>5ms<span class=\\\"o\\\">)</span>\\n      \u7BA1\u7406\u8005\u306A\u3057\\n        \u2713 \u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B <span class=\\\"o\\\">(</span>2ms<span class=\\\"o\\\">)</span>\\n</code></pre></div></div>\\n\\n<p>\u30C6\u30B9\u30C8\u304C\u3042\u308B\u3053\u3068\u3067\u3001\u5909\u66F4\u3084\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u304C\u6016\u304F\u306A\u304F\u306A\u308A\u307E\u3057\u305F\u3002</p>\\n\\n<h2>\\n<span id=\\\"\u307E\u3068\u3081\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E3%81%BE%E3%81%A8%E3%82%81\\\"><i class=\\\"fa fa-link\\\"></i></a>\u307E\u3068\u3081</h2>\\n\\n<ul>\\n<li>\\n<code>propsData</code> \u306F\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u3092\u30DE\u30A6\u30F3\u30C8\u3059\u308B\u3068\u304D\u306B\u5F15\u6570\u3068\u3057\u3066\u6E21\u3057\u3001 <code>props</code> \u3068\u3057\u3066\u5229\u7528\u3067\u304D\u308B</li>\\n<li>factory\u95A2\u6570\u3092\u5B9A\u7FA9\u3059\u308B\u3053\u3068\u3067\u30C6\u30B9\u30C8\u304CDRY\u306B\u304B\u3051\u308B</li>\\n<li>\\n<code>propsData</code> \u3092\u4F7F\u308F\u305A\u306B <a href=\\\"https://vue-test-utils.vuejs.org/ja/api/wrapper-array/#setprops-props\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\"><code>setProps</code></a> \u3092\u4F7F\u3048\u3070\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u5F37\u5236\u7684\u306B\u66F4\u65B0\u3059\u308B\u3053\u3068\u3082\u3067\u304D\u308B</li>\\n</ul>\\n\",\"body\":\"# Vue-test-utils\u306EpropsData\u306E\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9\\n\\n\u6700\u65B0\u7248\u306F[\u3053\u3061\u3089](https://lmiller1990.github.io/vue-testing-handbook/ja/components-with-props.html)\u3067\u3001Vue.js\u306E\u30C6\u30B9\u30C8\u306E\u66F8\u304D\u65B9\u306B\u3064\u3044\u3066\u306E\u30CF\u30F3\u30C9\u30D6\u30C3\u30AF\u3092\u516C\u958B\u3055\u305B\u3066\u3082\u3089\u3063\u3066\u3044\u307E\u3059\u3002\\n\\n\u3053\u306E\u8A18\u4E8B\u3092\u8AAD\u3080\u3068\\n\\n- \u30C6\u30B9\u30C8\u6642\u306B\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u3092wrap\u3059\u308B\u3068\u304D\u306E\u5F15\u6570\u306E `propsData` \u306B\u8A73\u3057\u304F\u306A\u308B\\n- \u30C6\u30B9\u30C8\u306E\u5B9F\u8DF5\u7684\u306A\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u304C\u5B66\u3079\u308B\\n\\n\u5F0A\u793E\u3067\u306F\u3001\u30C6\u30B9\u30C8\u306E\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u306F `factory\u95A2\u6570` \u3068\u3044\u3046\u3082\u306E\u3092\u4F5C\u6210\u3057\u3066\u884C\u3063\u3066\u3044\u308B\u306E\u3067\u3001\u8208\u5473\u3042\u308B\u304B\u305F\u306F\u305C\u3072\u4F7F\u3063\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002\\n\\n## propsData\u306E\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9\\n\\n`propsData` \u306F\u57FA\u672C\u7684\u306B `mount` \u3084 `shallowMount` \u3068\u3068\u3082\u306B\u4F7F\u3046\u3053\u3068\u304C\u3067\u304D\u3001 `propsData` \u306F\u89AA\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u304B\u3089 `props` \u3068\u3057\u3066\u6E21\u3055\u308C\u305F\u3082\u306E\u3068\u3057\u3066\u30C6\u30B9\u30C8\u3067\u4F7F\u7528\u3067\u304D\u307E\u3059\u3002\\n\\n\u7B2C\u4E8C\u5F15\u6570\u306E\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u306E\u4E2D\u306B\u66F8\u304F\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u304C\u3001\u57FA\u672C\u7684\u306A\u66F8\u304D\u65B9\u306F\u6B21\u306E\u901A\u308A\u3067\u3059\u3002\\n\\n```js\\nconst wrapper = shallowMount(Foo, {\\n  propsData: {\\n    foo: 'bar'\\n  }\\n})\\n```\\n\\n## \u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u306E\u4F5C\u6210\u3068\u30C6\u30B9\u30C8\\n\\n### SubmitButton.vue\\n\\n2\u3064\u306E `props` \u3092\u6301\u3064\u7C21\u5358\u306A\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u3092\u4F5C\u6210\u3059\u308B\u3002\\n\\n```html\\n<template>\\n<div>\\n  <span v-if=\\\"isAdmin\\\">\u7BA1\u7406\u8005\u6A29\u9650\u3092\u5B9F\u884C\u3059\u308B</span>\\n  <span v-else>\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093</span>\\n  <button>\\n    {{ msg }}\\n  </button>\\n</div>\\n</template>\\n\\n<script>\\nexport default {\\n  name: \\\"SubmitButton\\\",\\n\\n  props: {\\n    msg: {\\n      type: String,\\n      required: true\\n    },\\n    isAdmin: {\\n      type: Boolean,\\n      default: false\\n    }\\n  }\\n}\\n<\/script>\\n```\\n\\n### \u6700\u521D\u306E\u30C6\u30B9\u30C8\\n\\n\\b\u6A29\u9650\u304C\u306A\u3044\u72B6\u614B\u3067\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u691C\u8A3C\u3057\u3066\u3044\u304F\u3002\\n\\n```js\\nimport { shallowMount } from '@vue/test-utils'\\nimport SubmitButton from '@/components/SubmitButton.vue'\\n\\ndescribe('SubmitButton.vue', () => {\\n  it('\u6A29\u9650\u304C\u306A\u3044\u72B6\u614B\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B', () => {\\n    const msg = \\\"\u9001\u4FE1\u3059\u308B\\\"\\n    const wrapper = shallowMount(SubmitButton,{\\n      propsData: {\\n        msg: msg\\n      }\\n    })\\n\\n    console.log(wrapper.html())\\n\\n    expect(wrapper.find(\\\"span\\\").text()).toBe(\\\"\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093\\\")\\n    expect(wrapper.find(\\\"button\\\").text()).toBe(\\\"\u9001\u4FE1\u3059\u308B\\\")\\n  })\\n})\\n```\\n\\n\u30C6\u30B9\u30C8\u7D50\u679C\\n\\n```\\nPASS  tests/unit/SubmitButton.spec.js\\n  SubmitButton.vue\\n    \u2713 \u6A29\u9650\u304C\u306A\u3044\u72B6\u614B\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B (15ms)\\n```\\n\\nconsole.log\u306E\u51FA\u529B\u7D50\u679C\\n\\n```html\\n<div>\\n  <span>\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093</span>\\n  <button>\\n    \u9001\u4FE1\u3059\u308B\\n  </button>\\n</div>\\n```\\n\\n`props` \u3067\u6E21\u3055\u308C\u305F `msg` \u304C\u304D\u3061\u3093\u3068\u63CF\u753B\u3055\u308C\u3066\u3044\u308B\u3053\u3068\u304C\u308F\u304B\u308A\u307E\u3059\u3002\\n\\n### 2\u3064\u76EE\u306E\u30C6\u30B9\u30C8\\n\\n\u6A29\u9650\u304C\u3042\u308B\u72B6\u614B ( `isAdmin` \u304C true ) \u3067\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u691C\u8A3C\u3057\u3066\u3044\u304F\u3002\\n\\nSubmitButton.spec.js\\n\\n```js\\nimport { shallowMount } from '@vue/test-utils'\\nimport SubmitButton from '@/components/SubmitButton.vue'\\n\\ndescribe('SubmitButton.vue', () => {\\n  it('\u6A29\u9650\u304C\u3042\u308B\u72B6\u614B\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B', () => {\\n    const msg = \\\"\u9001\u4FE1\u3059\u308B\\\"\\n    const isAdmin = true\\n    const wrapper = shallowMount(SubmitButton,{\\n      propsData: {\\n        msg,\\n        isAdmin\\n      }\\n    })\\n\\n    expect(wrapper.find(\\\"span\\\").text()).toBe(\\\"\u7BA1\u7406\u8005\u6A29\u9650\u3092\u5B9F\u884C\u3059\u308B\\\")\\n    expect(wrapper.find(\\\"button\\\").text()).toBe(\\\"\u9001\u4FE1\u3059\u308B\\\")\\n  })\\n})\\n```\\n\\n\u30C6\u30B9\u30C8\u7D50\u679C\\n\\n```shell\\nPASS  tests/unit/SubmitButton.spec.js\\n  SubmitButton.vue\\n    \u2713 \u6A29\u9650\u304C\u3042\u308B\u72B6\u614B\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B (4ms)\\n```\\n\\nconsole.log\u306E\u51FA\u529B\u7D50\u679C\\n\\n```html\\n<div>\\n  <span>\u7BA1\u7406\u8005\u6A29\u9650\u3092\u5B9F\u884C\u3059\u308B</span>\\n  <button>\\n    \u9001\u4FE1\u3059\u308B\\n  </button>\\n</div>\\n```\\n\\n`props` \u3067\u6E21\u3055\u308C\u305F `isAdmin` \u306B\u3088\u3063\u3066 `<span>` \u306E\u4E2D\u304C\u304D\u3061\u3093\u3068\u63CF\u753B\u3055\u308C\u3066\u3044\u308B\u3053\u3068\u304C\u308F\u304B\u308A\u307E\u3059\u3002\\n\\n## \u30C6\u30B9\u30C8\u306E\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\\n\\n`Don't repeat yourself` \u306E\u539F\u5247\u306B\u5F93\u3063\u3066\u5F93\u3063\u3066\u30C6\u30B9\u30C8\u3092\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u3057\u3066\u3044\u304D\u307E\u3057\u3087\u3046\u3002\u30C6\u30B9\u30C8\u304CPass\u3057\u3066\u3044\u308B\u306E\u3067\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u3082\u6016\u304F\u3042\u308A\u307E\u305B\u3093\u3002\\n\\n### factory\u95A2\u6570\\n\\n\u30C6\u30B9\u30C8\u306E\u5EA6\u306B `shallowMount` \u3092\u547C\u3073\u51FA\u3057\\b\u540C\u3058\u3088\u3046\u306A `propsData` \u3092\u6E21\u3057\u3066\u3044\u308B\u306E\u3067\u3001factory\u95A2\u6570\u3067\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u3057\u305F\u3044\u3068\u601D\u3044\u307E\u3059\u3002\\n\\n```js\\nconst msg = \\\"\u9001\u4FE1\u3059\u308B\\\"\\nconst factory = (propsData) => {\\n  return shallowMount(SubmitButton, {\\n    propsData: {\\n      msg,\\n      ...propsData\\n    }\\n  })\\n}\\n```\\n\\n\u547C\u3073\u51FA\u3059\u305F\u3073\u306B `shallowMount` \u3067 wrap \u3057\u3066\u304F\u308C\u308B factory \u95A2\u6570\u304C\u3067\u304D\u307E\u3057\u305F\u3002\u3053\u308C\u3092\u4F7F\u3063\u3066\u30C6\u30B9\u30C8\u3092DRY\u306B\u3057\u3066\u3044\u304D\u307E\u3057\u3087\u3046\u3002\\n\\n```js\\n  describe(\\\"\u7BA1\u7406\u8005\u3042\u308A\\\", ()=> {\\n    it(\\\"\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B\\\", () => {\\n      const wrapper = factory()\\n\\n      expect(wrapper.find(\\\"span\\\").text()).toBe(\\\"\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093\\\")\\n      expect(wrapper.find(\\\"button\\\").text()).toBe(\\\"\u9001\u4FE1\u3059\u308B\\\")\\n    })\\n  })\\n\\n  describe(\\\"\u7BA1\u7406\u8005\u306A\u3057\\\", ()=> {\\n    it(\\\"\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B\\\", () => {\\n      const wrapper = factory({isAdmin: true})\\n\\n      expect(wrapper.find(\\\"span\\\").text()).toBe(\\\"\u7BA1\u7406\u8005\u6A29\u9650\u3092\u5B9F\u884C\u3059\u308B\\\")\\n      expect(wrapper.find(\\\"button\\\").text()).toBe(\\\"\u9001\u4FE1\u3059\u308B\\\")\\n    })\\n  })\\n```\\n\\n\u3055\u3066\u30C6\u30B9\u30C8\u3092\u898B\u3066\u3044\u304D\u305F\u3044\u3068\u601D\u3044\u307E\u3059\u3002\u307E\u3060\u30C6\u30B9\u30C8\u306FGreen\u3067PASS\u3057\u3066\u3044\u307E\u3059\u3002\\n\\n```shell\\nPASS  tests/unit/SubmitButton.spec.js\\n  SubmitButton.vue\\n    \u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\\n      \u7BA1\u7406\u8005\u3042\u308A\\n        \u2713 \u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B (5ms)\\n      \u7BA1\u7406\u8005\u306A\u3057\\n        \u2713 \u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3059\u308B (2ms)\\n```\\n\\n\u30C6\u30B9\u30C8\u304C\u3042\u308B\u3053\u3068\u3067\u3001\u5909\u66F4\u3084\u30EA\u30D5\u30A1\u30AF\u30BF\u30EA\u30F3\u30B0\u304C\u6016\u304F\u306A\u304F\u306A\u308A\u307E\u3057\u305F\u3002\\n\\n## \u307E\u3068\u3081\\n\\n- `propsData` \u306F\\u001d\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u3092\\b\u30DE\u30A6\u30F3\u30C8\u3059\u308B\u3068\u304D\u306B\u5F15\u6570\u3068\u3057\u3066\u6E21\u3057\u3001 `props` \u3068\u3057\u3066\u5229\u7528\u3067\u304D\u308B\\n- factory\u95A2\u6570\u3092\u5B9A\u7FA9\u3059\u308B\u3053\u3068\u3067\u30C6\u30B9\u30C8\u304CDRY\u306B\u304B\u3051\u308B\\n- `propsData` \u3092\u4F7F\u308F\u305A\u306B [`setProps`](https://vue-test-utils.vuejs.org/ja/api/wrapper-array/#setprops-props) \u3092\u4F7F\u3048\u3070\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u5F37\u5236\u7684\u306B\u66F4\u65B0\u3059\u308B\u3053\u3068\u3082\u3067\u304D\u308B\\n\",\"coediting\":false,\"comments_count\":0,\"created_at\":\"2018-07-19T23:32:25+09:00\",\"group\":null,\"id\":\"43397531e58664ef4645\",\"likes_count\":7,\"private\":false,\"reactions_count\":0,\"stocks_count\":9,\"tags\":[{\"name\":\"JavaScript\",\"versions\":[]},{\"name\":\"TDD\",\"versions\":[]},{\"name\":\"Vue.js\",\"versions\":[]},{\"name\":\"vue-test-utils\",\"versions\":[]}],\"title\":\"Vue-test-utils\u306EpropsData\u306E\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9\",\"updated_at\":\"2018-07-20T14:02:07+09:00\",\"url\":\"https://qiita.com/ykhirao/items/43397531e58664ef4645\",\"user\":{\"description\":\"Web Developer From 2016.\\r\\nPHP/Laravel && React/TypeScript/Node.js\\r\\n\\r\\n\u696D\u52D9\u59D4\u8A17\u306E\u4F9D\u983C\u3068\u304B\u306FWantedly\u3068\u304B\u304B\u3089\u3067\u304A\u9858\u3044\u3057\u307E\u3059\uFF01\",\"facebook_id\":\"\",\"followees_count\":38,\"followers_count\":98,\"github_login_name\":\"ykhirao\",\"id\":\"ykhirao\",\"items_count\":68,\"linkedin_id\":\"\",\"location\":\"Tokyo, Japan\",\"name\":\"yk\",\"organization\":\"\",\"permanent_id\":112929,\"profile_image_url\":\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792\",\"team_only\":false,\"twitter_screen_name\":\"ykhirao\",\"website_url\":\"https://www.wantedly.com/id/ykhirao\"},\"page_views_count\":null,\"team_membership\":null,\"organization_url_name\":null}},\"path\":\"posts/43397531e58664ef4645\",\"sharedData\":{},\"siteData\":{\"updatedAt\":\"2023/05/24\"}}");</script><script defer="" type="text/javascript" src="/templates/styles.93ca6998.js"></script><script defer="" type="text/javascript" src="/templates/vendors~main.867a25a5.js"></script><script defer="" type="text/javascript" src="/main.39feca70.js"></script></body></html>