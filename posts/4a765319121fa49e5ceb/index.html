<!DOCTYPE html><html lang="en"><head><meta name="generator" content="React Static"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no"/><link rel="preload" as="script" href="/templates/styles.6bb57425.js"/><link rel="preload" as="script" href="/templates/vendors~main.991a9778.js"/><link rel="preload" as="script" href="/main.e4c894d8.js"/><link rel="preload" as="style" href="/styles.642cfcb4.css"/><link rel="stylesheet" href="/styles.642cfcb4.css"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png"/><link rel="manifest" href="/manifest.json"/><meta name="mobile-web-app-capable" content="yes"/><meta name="theme-color" content="#fff"/><meta name="application-name"/><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon-167x167.png"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="1024x1024" href="/apple-touch-icon-1024x1024.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><meta name="apple-mobile-web-app-title"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-640x1136.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-750x1334.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-828x1792.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1125x2436.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2208.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2688.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1536x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2224.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2388.png"/><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-2048x2732.png"/><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1620x2160.png"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1136x640.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1334x750.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1792x828.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2436x1125.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2208x1242.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2688x1242.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2048x1536.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2224x1668.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2388x1668.png"/><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2732x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1620.png"/><link rel="icon" type="image/png" sizes="228x228" href="/coast-228x228.png"/><meta name="msapplication-TileColor" content="#fff"/><meta name="msapplication-TileImage" content="/mstile-144x144.png"/><meta name="msapplication-config" content="/browserconfig.xml"/><link rel="yandex-tableau-widget" href="/yandex-browser-manifest.json"/></head><body><div id="root"><div style="outline:none" tabindex="-1"><nav class="navbar is-dark is-fixed-top" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item" href="/">Home</a><a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"><span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span></a></div><div id="navbarBasicExample" class="navbar-menu "><div class="navbar-start"><a class="navbar-item" href="/posts">Posts</a><a class="navbar-item" href="/events">Events</a><a class="navbar-item" href="/github">GitHub</a></div></div></div></nav><div class="container"><div class="is-primary" style="padding:4.5rem 0.5rem"><div style="outline:none" tabindex="-1"><div><a href="/posts">&lt;<!-- --> Back</a><br/><h3>いつも忘れる .filter で undefined を除去する方法 【TypeScript】</h3><article class="md-body"><h2 data-sourcepos="2:1-2:41">
<span id="ユーザー定義のtype-guard-の話" class="fragment"></span><a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E5%AE%9A%E7%BE%A9%E3%81%AEtype-guard-%E3%81%AE%E8%A9%B1"><i class="fa fa-link"></i></a>ユーザー定義のType Guard の話</h2>
<p data-sourcepos="4:1-4:122"><code>['test1', undefined].filter(Boolean)</code> だと <code>(string | undefined)[]</code> という型のままでしんどいときの話。</p>
<div class="code-frame" data-lang="typescript" data-sourcepos="8:1-18:3"><div class="highlight"><pre><code><span class="kd">const</span> <span class="nx">test1</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">test1</span><span class="dl">'</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">].</span><span class="nf">filter</span><span class="p">(</span><span class="nb">Boolean</span><span class="p">)</span>
<span class="c1">// const test1: (string | undefined)[]</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">test1</span><span class="p">);</span>
<span class="c1">// [LOG]: ["test1"] </span>

<span class="kd">const</span> <span class="nx">test2</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">test2</span><span class="dl">'</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">].</span><span class="nf">filter</span><span class="p">((</span><span class="nx">v</span><span class="p">):</span> <span class="nx">v</span> <span class="k">is</span> <span class="kr">string</span> <span class="o">=&gt;</span> <span class="nx">v</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
<span class="c1">// const test2: string[]</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">test2</span><span class="p">);</span>
<span class="c1">// [LOG]: ["test2"] </span>
</code></pre></div></div>
<p data-sourcepos="20:1-21:43">以下でTypeScriptをWeb上で試せます。<br>
<a href="https://www.typescriptlang.org/play?#code/Q" class="autolink" rel="nofollow noopener" target="_blank">https://www.typescriptlang.org/play?#code/Q</a></p>
<h2 data-sourcepos="24:1-24:9">
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h2>
<ul data-sourcepos="26:1-27:200">
<li data-sourcepos="26:1-26:116"><a href="https://typescript-jp.gitbook.io/deep-dive/type-system/typeguard#yznotype-guard" rel="nofollow noopener" target="_blank">ユーザー定義のType Guard</a></li>
<li data-sourcepos="27:1-27:200"><a href="https://zenn.dev/oreo2990/articles/5f75eaa285f2f9#4-%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E5%AE%9A%E7%BE%A9%E5%9E%8B%E3%82%AC%E3%83%BC%E3%83%89" rel="nofollow noopener" target="_blank">【TypeScript】型ガードを改めて整理する</a></li>
</ul>
</article></div></div></div></div><footer class="footer"><div class="content has-text-centered"><p>last uploaded at <!-- -->2023/06/26</p><p>© 2021 ykhirao</p></div></footer></div></div><script type="text/javascript">window.__routeInfo = JSON.parse("{\"template\":\"__react_static_root__/src/components/QiitaPost\",\"sharedHashesByProp\":{},\"data\":{\"post\":{\"rendered_body\":\"<h2 data-sourcepos=\\\"2:1-2:41\\\">\\n<span id=\\\"\u30E6\u30FC\u30B6\u30FC\u5B9A\u7FA9\u306Etype-guard-\u306E\u8A71\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E5%AE%9A%E7%BE%A9%E3%81%AEtype-guard-%E3%81%AE%E8%A9%B1\\\"><i class=\\\"fa fa-link\\\"></i></a>\u30E6\u30FC\u30B6\u30FC\u5B9A\u7FA9\u306EType Guard \u306E\u8A71</h2>\\n<p data-sourcepos=\\\"4:1-4:122\\\"><code>['test1', undefined].filter(Boolean)</code> \u3060\u3068 <code>(string | undefined)[]</code> \u3068\u3044\u3046\u578B\u306E\u307E\u307E\u3067\u3057\u3093\u3069\u3044\u3068\u304D\u306E\u8A71\u3002</p>\\n<div class=\\\"code-frame\\\" data-lang=\\\"typescript\\\" data-sourcepos=\\\"8:1-18:3\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">test1</span> <span class=\\\"o\\\">=</span> <span class=\\\"p\\\">[</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">test1</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span> <span class=\\\"kc\\\">undefined</span><span class=\\\"p\\\">].</span><span class=\\\"nf\\\">filter</span><span class=\\\"p\\\">(</span><span class=\\\"nb\\\">Boolean</span><span class=\\\"p\\\">)</span>\\n<span class=\\\"c1\\\">// const test1: (string | undefined)[]</span>\\n<span class=\\\"nx\\\">console</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">log</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">test1</span><span class=\\\"p\\\">);</span>\\n<span class=\\\"c1\\\">// [LOG]: [\\\"test1\\\"] </span>\\n\\n<span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">test2</span> <span class=\\\"o\\\">=</span> <span class=\\\"p\\\">[</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">test2</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span> <span class=\\\"kc\\\">undefined</span><span class=\\\"p\\\">].</span><span class=\\\"nf\\\">filter</span><span class=\\\"p\\\">((</span><span class=\\\"nx\\\">v</span><span class=\\\"p\\\">):</span> <span class=\\\"nx\\\">v</span> <span class=\\\"k\\\">is</span> <span class=\\\"kr\\\">string</span> <span class=\\\"o\\\">=&gt;</span> <span class=\\\"nx\\\">v</span> <span class=\\\"o\\\">!=</span> <span class=\\\"kc\\\">null</span><span class=\\\"p\\\">)</span>\\n<span class=\\\"c1\\\">// const test2: string[]</span>\\n<span class=\\\"nx\\\">console</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">log</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">test2</span><span class=\\\"p\\\">);</span>\\n<span class=\\\"c1\\\">// [LOG]: [\\\"test2\\\"] </span>\\n</code></pre></div></div>\\n<p data-sourcepos=\\\"20:1-21:43\\\">\u4EE5\u4E0B\u3067TypeScript\u3092Web\u4E0A\u3067\u8A66\u305B\u307E\u3059\u3002<br>\\n<a href=\\\"https://www.typescriptlang.org/play?#code/Q\\\" class=\\\"autolink\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">https://www.typescriptlang.org/play?#code/Q</a></p>\\n<h2 data-sourcepos=\\\"24:1-24:9\\\">\\n<span id=\\\"\u53C2\u8003\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E5%8F%82%E8%80%83\\\"><i class=\\\"fa fa-link\\\"></i></a>\u53C2\u8003</h2>\\n<ul data-sourcepos=\\\"26:1-27:200\\\">\\n<li data-sourcepos=\\\"26:1-26:116\\\"><a href=\\\"https://typescript-jp.gitbook.io/deep-dive/type-system/typeguard#yznotype-guard\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">\u30E6\u30FC\u30B6\u30FC\u5B9A\u7FA9\u306EType Guard</a></li>\\n<li data-sourcepos=\\\"27:1-27:200\\\"><a href=\\\"https://zenn.dev/oreo2990/articles/5f75eaa285f2f9#4-%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E5%AE%9A%E7%BE%A9%E5%9E%8B%E3%82%AC%E3%83%BC%E3%83%89\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">\u3010TypeScript\u3011\u578B\u30AC\u30FC\u30C9\u3092\u6539\u3081\u3066\u6574\u7406\u3059\u308B</a></li>\\n</ul>\\n\",\"body\":\"\\n## \u30E6\u30FC\u30B6\u30FC\u5B9A\u7FA9\u306EType Guard \u306E\u8A71\\n\\n`['test1', undefined].filter(Boolean)` \u3060\u3068 `(string | undefined)[]` \u3068\u3044\u3046\u578B\u306E\u307E\u307E\u3067\u3057\u3093\u3069\u3044\u3068\u304D\u306E\u8A71\u3002\\n\\n\\n\\n```typescript\\nconst test1 = ['test1', undefined].filter(Boolean)\\n// const test1: (string | undefined)[]\\nconsole.log(test1);\\n// [LOG]: [\\\"test1\\\"] \\n\\nconst test2 = ['test2', undefined].filter((v): v is string => v != null)\\n// const test2: string[]\\nconsole.log(test2);\\n// [LOG]: [\\\"test2\\\"] \\n```\\n\\n\u4EE5\u4E0B\u3067TypeScript\u3092Web\u4E0A\u3067\u8A66\u305B\u307E\u3059\u3002\\nhttps://www.typescriptlang.org/play?#code/Q\\n\\n\\n## \u53C2\u8003\\n\\n- [\u30E6\u30FC\u30B6\u30FC\u5B9A\u7FA9\u306EType Guard](https://typescript-jp.gitbook.io/deep-dive/type-system/typeguard#yznotype-guard)\\n- [\u3010TypeScript\u3011\u578B\u30AC\u30FC\u30C9\u3092\u6539\u3081\u3066\u6574\u7406\u3059\u308B](https://zenn.dev/oreo2990/articles/5f75eaa285f2f9#4-%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E5%AE%9A%E7%BE%A9%E5%9E%8B%E3%82%AC%E3%83%BC%E3%83%89)\\n\",\"coediting\":false,\"comments_count\":0,\"created_at\":\"2022-07-13T17:31:55+09:00\",\"group\":null,\"id\":\"4a765319121fa49e5ceb\",\"likes_count\":0,\"private\":false,\"reactions_count\":0,\"stocks_count\":0,\"tags\":[{\"name\":\"JavaScript\",\"versions\":[]},{\"name\":\"TypeScript\",\"versions\":[]}],\"title\":\"\u3044\u3064\u3082\u5FD8\u308C\u308B .filter \u3067 undefined \u3092\u9664\u53BB\u3059\u308B\u65B9\u6CD5 \u3010TypeScript\u3011\",\"updated_at\":\"2022-07-13T17:31:55+09:00\",\"url\":\"https://qiita.com/ykhirao/items/4a765319121fa49e5ceb\",\"user\":{\"description\":\"Web Developer From 2016.\\r\\nPHP/Laravel && React/TypeScript/Node.js\\r\\n\\r\\n\u696D\u52D9\u59D4\u8A17\u306E\u4F9D\u983C\u3068\u304B\u306FWantedly\u3068\u304B\u304B\u3089\u3067\u304A\u9858\u3044\u3057\u307E\u3059\uFF01\",\"facebook_id\":\"\",\"followees_count\":38,\"followers_count\":99,\"github_login_name\":\"ykhirao\",\"id\":\"ykhirao\",\"items_count\":69,\"linkedin_id\":\"\",\"location\":\"Tokyo, Japan\",\"name\":\"yk\",\"organization\":\"\",\"permanent_id\":112929,\"profile_image_url\":\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792\",\"team_only\":false,\"twitter_screen_name\":\"ykhirao\",\"website_url\":\"https://www.wantedly.com/id/ykhirao\"},\"page_views_count\":null,\"team_membership\":null,\"organization_url_name\":null}},\"path\":\"posts/4a765319121fa49e5ceb\",\"sharedData\":{},\"siteData\":{\"updatedAt\":\"2023/06/26\"}}");</script><script defer="" type="text/javascript" src="/templates/styles.6bb57425.js"></script><script defer="" type="text/javascript" src="/templates/vendors~main.991a9778.js"></script><script defer="" type="text/javascript" src="/main.e4c894d8.js"></script></body></html>