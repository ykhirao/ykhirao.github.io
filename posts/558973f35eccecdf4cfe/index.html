<!DOCTYPE html><html lang="en"><head><meta name="generator" content="React Static"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no"/><link rel="preload" as="script" href="/templates/styles.903ffd48.js"/><link rel="preload" as="script" href="/templates/vendors~main.991a9778.js"/><link rel="preload" as="script" href="/main.e4c894d8.js"/><link rel="preload" as="style" href="/styles.642cfcb4.css"/><link rel="stylesheet" href="/styles.642cfcb4.css"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png"/><link rel="manifest" href="/manifest.json"/><meta name="mobile-web-app-capable" content="yes"/><meta name="theme-color" content="#fff"/><meta name="application-name"/><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon-167x167.png"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="1024x1024" href="/apple-touch-icon-1024x1024.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><meta name="apple-mobile-web-app-title"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-640x1136.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-750x1334.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-828x1792.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1125x2436.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2208.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2688.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1536x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2224.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2388.png"/><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-2048x2732.png"/><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1620x2160.png"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1136x640.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1334x750.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1792x828.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2436x1125.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2208x1242.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2688x1242.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2048x1536.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2224x1668.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2388x1668.png"/><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2732x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1620.png"/><link rel="icon" type="image/png" sizes="228x228" href="/coast-228x228.png"/><meta name="msapplication-TileColor" content="#fff"/><meta name="msapplication-TileImage" content="/mstile-144x144.png"/><meta name="msapplication-config" content="/browserconfig.xml"/><link rel="yandex-tableau-widget" href="/yandex-browser-manifest.json"/></head><body><div id="root"><div style="outline:none" tabindex="-1"><nav class="navbar is-dark is-fixed-top" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item" href="/">Home</a><a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"><span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span></a></div><div id="navbarBasicExample" class="navbar-menu "><div class="navbar-start"><a class="navbar-item" href="/posts">Posts</a><a class="navbar-item" href="/events">Events</a><a class="navbar-item" href="/github">GitHub</a></div></div></div></nav><div class="container"><div class="is-primary" style="padding:4.5rem 0.5rem"><div style="outline:none" tabindex="-1"><div><a href="/posts">&lt;<!-- --> Back</a><br/><h3>毎日画像をOCRしてスマホに通知するサービスを作ったので簡単なアーキテクチャを紹介</h3><article class="md-body"><h2 data-sourcepos="2:1-2:10">
<span id="mermaid" class="fragment"></span><a href="#mermaid"><i class="fa fa-link"></i></a>Mermaid</h2>
<iframe id="qiita-embed-content__be54df2c146cc1ff1ba51d86dabde861" src="https://qiita.com/embed-contents/mermaid#qiita-embed-content__be54df2c146cc1ff1ba51d86dabde861" style="width:100%;" frameborder="0" scrolling="no" loading="lazy" data-content='{"data":"sequenceDiagram\n participant RaspberryPi as ラズベリーパイ\n participant NodeJS as Node.js(NodeCron)\n participant PlanetScaleDB as PlanetScaleDB\n participant PlayWriteNodeJS as PlayWrite\n participant TesseractJS as Tesseract.js\n participant QiitaAPI as QiitaAPI\n participant NtfySH as ntfy.sh\n participant Smartphone as スマホ\n\n RaspberryPi -&gt;&gt; NodeJS: Foreverでデーモン化\n NodeJS -&gt;&gt; PlanetScaleDB: 各種データはオンライン保存\n PlanetScaleDB --&gt;&gt; NodeJS: DB確認して処理済みなら再実行\n NodeJS -&gt;&gt; PlayWriteNodeJS: 画像を取得\n PlayWriteNodeJS --&gt;&gt; NodeJS: 画像をダウンロード\n NodeJS -&gt;&gt; TesseractJS: 画像をOCR解析\n TesseractJS --&gt;&gt; NodeJS: 解析結果\n NodeJS -&gt;&gt; QiitaAPI: ブログに投稿\n QiitaAPI --&gt;&gt; NodeJS: URLを取得\n NodeJS -&gt;&gt; NtfySH: スマホにブログURLを通知\n NtfySH -&gt;&gt; Smartphone: 通知","key":"ba128485ebf1eadccf1728d219af0489"}'>
</iframe>

<h2 data-sourcepos="28:1-28:18">
<span id="簡単な解説" class="fragment"></span><a href="#%E7%B0%A1%E5%8D%98%E3%81%AA%E8%A7%A3%E8%AA%AC"><i class="fa fa-link"></i></a>簡単な解説</h2>
<h3 data-sourcepos="30:1-30:40">
<span id="raspberrypi-as-ラズベリーパイ" class="fragment"></span><a href="#raspberrypi-as-%E3%83%A9%E3%82%BA%E3%83%99%E3%83%AA%E3%83%BC%E3%83%91%E3%82%A4"><i class="fa fa-link"></i></a>RaspberryPi as ラズベリーパイ</h3>
<p data-sourcepos="32:1-32:99">定期実行はすべてラズベリーパイを使ってます。メルカリで買ったやつ。</p>
<p data-sourcepos="34:1-34:99">公開サーバーにするための記事も含めて、このあたりで色々書いてます。</p>
<p data-sourcepos="36:1-36:52"><iframe id="qiita-embed-content__eee22f6f5ad4682e75d7fa2796f10358" src="https://qiita.com/embed-contents/link-card#qiita-embed-content__eee22f6f5ad4682e75d7fa2796f10358" data-content="https%3A%2F%2Fqiita.com%2Fykhirao%2Fitems%2Ff26e18364594e7077612" frameborder="0" scrolling="no" loading="lazy" style="width:100%;" height="29">
</iframe>
</p>
<p data-sourcepos="39:1-39:67">以下のように <code>ssh pi</code> でログインして使ってます。</p>
<div class="code-frame" data-lang="terminal" data-sourcepos="41:1-51:3"><div class="highlight"><pre><code><span class="gp">$</span><span class="w"> </span>ssh pi
<span class="go">
</span><span class="gp">$</span><span class="w"> </span>~/.ssh/config
<span class="go">Host pi
  HostName raspberrypi.local
  User __yourname__
  IdentityFile /Users/__yourname__/.ssh/id_rsa_pi
</span><span class="gp">  RemoteCommand cd /home/__yourname__/workspace/piapp;</span><span class="w"> </span><span class="nv">$SHELL</span> <span class="nt">-il</span>
<span class="go">  RequestTTY yes
</span></code></pre></div></div>
<p data-sourcepos="53:1-53:293">VSCodeもRemote SSHのプラグインがあれば <code>&gt; Remote-ssh: Connect to Host</code> でpiを選択するとそのまま開発できます。ローカルよりも動作がもっさりなので私はMacOS側で開発して GitHub経由の <code>git push</code> <code>git pull</code> を使って開発してました。</p>
<h3 data-sourcepos="55:1-55:31">
<span id="nodejs-as-nodejsnodecron" class="fragment"></span><a href="#nodejs-as-nodejsnodecron"><i class="fa fa-link"></i></a>NodeJS as Node.js(NodeCron)</h3>
<p data-sourcepos="57:1-57:9">雰囲気</p>
<div class="code-frame" data-lang="terminal" data-sourcepos="59:1-63:3"><div class="highlight"><pre><code><span class="gp">$</span><span class="w"> </span>brew <span class="nb">install </span>n
<span class="gp">$</span><span class="w"> </span>n auto
<span class="gp">$</span><span class="w"> </span>npm i
</code></pre></div></div>
<h3 data-sourcepos="65:1-65:32">
<span id="planetscale-as-planetscaledb" class="fragment"></span><a href="#planetscale-as-planetscaledb"><i class="fa fa-link"></i></a>PlanetScale as PlanetScaleDB</h3>
<p data-sourcepos="67:1-67:132">言わずとしれたオンラインDBで、2021年11月に総額1億500万ドル（約150億円）を調達しているみたい。</p>
<p data-sourcepos="69:1-69:6">参考</p>
<p data-sourcepos="71:1-71:51"><iframe id="qiita-embed-content__27d52a480add8613c6fdc5e77506286c" src="https://qiita.com/embed-contents/link-card#qiita-embed-content__27d52a480add8613c6fdc5e77506286c" data-content="https%3A%2F%2Fqiita.com%2Ftak001%2Fitems%2Fcfbaa9dcb542929ff235" frameborder="0" scrolling="no" loading="lazy" style="width:100%;" height="29">
</iframe>
</p>
<p data-sourcepos="73:1-73:272">ラズベリーパイを公開サーバーにしていないので、ラズベリーパイにsshしないとデータが見えないよりも、オンラインサービスとして自分だけにでも公開したりするためにオンラインDBを利用してます。</p>
<p data-sourcepos="75:1-75:58">PCからのアクセスは Sequel Aceを使ってます。</p>
<p data-sourcepos="77:1-77:23"><iframe id="qiita-embed-content__32dfdcc7884f7deb38ba49879876e9fe" src="https://qiita.com/embed-contents/link-card#qiita-embed-content__32dfdcc7884f7deb38ba49879876e9fe" data-content="https%3A%2F%2Fsequel-ace.com%2F" frameborder="0" scrolling="no" loading="lazy" style="width:100%;" height="29">
</iframe>
</p>
<p data-sourcepos="79:1-79:102">接続情報を入力したら簡単にアクセスできてクエリも叩けるのでおすすめ。</p>
<p data-sourcepos="81:1-81:163"><a href="https://camo.qiitausercontent.com/6a2bb55cb6f451488e5cfd219985f295232f94c2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f64313937353931652d623862622d613139662d333663342d6665323466356462386437362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fd197591e-b8bb-a19f-36c4-fe24f5db8d76.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6882f71efadf7dbefeba515f5f75f12e" alt="スクリーンショット 2023-12-25 15.08.47.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/d197591e-b8bb-a19f-36c4-fe24f5db8d76.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fd197591e-b8bb-a19f-36c4-fe24f5db8d76.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=86f2dfa1644cd857eda47ddb5cbfd2e0 1x" loading="lazy"></a></p>
<p data-sourcepos="83:1-84:166">PlanetScaleでRead権限のみのユーザーを発行して普段はそれを使えますね。<br>
書き込むときだけWrite権限ユーザー使しましょう。（私は面倒なので基本Write権限ユーザーでクエリ叩いてます。。。。。）</p>
<h3 data-sourcepos="86:1-86:32">
<span id="playwritenodejs-as-playwrite" class="fragment"></span><a href="#playwritenodejs-as-playwrite"><i class="fa fa-link"></i></a>PlayWriteNodeJS as PlayWrite</h3>
<p data-sourcepos="88:1-88:57">ここで雰囲気のコードを公開しています。</p>
<p data-sourcepos="90:1-90:52"><iframe id="qiita-embed-content__96d1de5ac064503680c1bcbe0a5895ea" src="https://qiita.com/embed-contents/link-card#qiita-embed-content__96d1de5ac064503680c1bcbe0a5895ea" data-content="https%3A%2F%2Fqiita.com%2Fykhirao%2Fitems%2F9b564e65d9c0a19bf2e0" frameborder="0" scrolling="no" loading="lazy" style="width:100%;" height="29">
</iframe>
</p>
<p data-sourcepos="92:1-93:93">画像のスクリーンショットも取れるので必要があれば使えます。<br>
もちろん生DOMを解析してそれだけを返せるならそれが一番軽いです。</p>
<p data-sourcepos="95:1-96:126">zipのダウンロードはこれくらいの記述でいけます。<br>
ロケーターが表示されるまで待機するコードとか必要ないのでかなり楽にコードが書けます。</p>
<div class="code-frame" data-lang="ts" data-sourcepos="98:1-106:3"><div class="highlight"><pre><code><span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nf">goto</span><span class="p">(</span><span class="dl">'</span><span class="s1">URL</span><span class="dl">'</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nf">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">input[name=password]</span><span class="dl">'</span><span class="p">).</span><span class="nf">fill</span><span class="p">(</span><span class="dl">'</span><span class="s1">password</span><span class="dl">'</span><span class="p">));</span>
<span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nf">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">input[type=submit]</span><span class="dl">'</span><span class="p">).</span><span class="nf">click</span><span class="p">({</span> <span class="na">timeout</span><span class="p">:</span> <span class="mi">120</span> <span class="o">*</span> <span class="mi">1000</span> <span class="p">})</span>
<span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nf">locator</span><span class="p">(</span><span class="dl">"</span><span class="s2">a[title$='.zip']</span><span class="dl">"</span><span class="p">).</span><span class="nf">click</span><span class="p">({</span> <span class="na">timeout</span><span class="p">:</span> <span class="mi">120</span> <span class="o">*</span> <span class="mi">1000</span> <span class="p">});</span>
<span class="kd">const</span> <span class="nx">download</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">downloadPromise</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">file name: </span><span class="dl">'</span><span class="p">,</span> <span class="nx">download</span><span class="p">.</span><span class="nf">suggestedFilename</span><span class="p">());</span>
<span class="k">await</span> <span class="nx">download</span><span class="p">.</span><span class="nf">saveAs</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">downloadsPath</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">download</span><span class="p">.</span><span class="nf">suggestedFilename</span><span class="p">()}</span><span class="s2">`</span><span class="p">);</span>
</code></pre></div></div>
<p data-sourcepos="108:1-108:164">ラズベリーパイが非力で表示するのに30秒以上かかるケースが多いのでタイムアウトを2分にしてます。 <code>{ timeout: 120 * 1000 }</code></p>
<h3 data-sourcepos="110:1-110:31">
<span id="tesseractjs-as-tesseractjs" class="fragment"></span><a href="#tesseractjs-as-tesseractjs"><i class="fa fa-link"></i></a>TesseractJS as Tesseract.js</h3>
<p data-sourcepos="112:1-112:51">OCRはこのあたりを参考に書きました。</p>
<p data-sourcepos="114:1-114:56"><iframe id="qiita-embed-content__264ac89f498476b95dcb387e83eb0f1c" src="https://qiita.com/embed-contents/link-card#qiita-embed-content__264ac89f498476b95dcb387e83eb0f1c" data-content="https%3A%2F%2Fqiita.com%2Fyamayamasan%2Fitems%2F1dd911b817c8bb51fc43" frameborder="0" scrolling="no" loading="lazy" style="width:100%;" height="29">
</iframe>
</p>
<p data-sourcepos="116:1-116:80">512MBのラズパイでもそれなりに動くので一旦満足してます。</p>
<p data-sourcepos="118:1-118:82">こんな感じで動きます。ファイルへのpathがあれば動きます。</p>
<div class="code-frame" data-lang="ts" data-sourcepos="120:1-128:3"><div class="highlight"><pre><code><span class="kd">const</span> <span class="nx">worker</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">createWorker</span><span class="p">(</span><span class="dl">'</span><span class="s1">jpn</span><span class="dl">'</span><span class="p">);</span>

<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">p</span> <span class="k">of</span> <span class="nx">paths</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Fired OCR: </span><span class="dl">'</span><span class="p">,</span> <span class="nx">p</span><span class="p">);</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="nx">text</span> <span class="p">}</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">worker</span><span class="p">.</span><span class="nf">recognize</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
    <span class="nx">values</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="s2">`### </span><span class="p">${</span><span class="nx">today</span><span class="p">}</span><span class="s2">\n\n</span><span class="p">${</span><span class="nx">text</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<p data-sourcepos="130:1-130:93">ただ結果は空白入りとかで返ってくるのでどうにかして整形したい。</p>
<div class="code-frame" data-lang="text" data-sourcepos="132:1-136:3"><div class="highlight"><pre><code>こんな感じで動きます。ファイルへのpathがあれば動きます。
↓
こ　ん　な感　じで　　動　きます。ファ　イ　ル　　へのp　ath　があ　　れ　ば　動きま　す。
</code></pre></div></div>
<p data-sourcepos="138:1-138:131">たぶんTextLintとかでいけると思ってますが、イマイチ設定がわからないので一旦あきらめてます。</p>
<h3 data-sourcepos="140:1-140:24">
<span id="qiitaapi-as-qiitaapi" class="fragment"></span><a href="#qiitaapi-as-qiitaapi"><i class="fa fa-link"></i></a>QiitaAPI as QiitaAPI</h3>
<p data-sourcepos="142:1-142:111">Privateのブログを作成し、QiitaのAPIを使って取得するたびに追記をしていってます。</p>
<p data-sourcepos="144:1-144:226">次のNtfySHの通知が本文5kbくらいの制限があり attachment.txt みたいな形式で送られてきてしまうので、本文そのままの添付を諦めて一旦QiitaのPrivateブログに追記してます。</p>
<p data-sourcepos="147:1-147:54">こんな感じで取得と編集をしています。</p>
<div class="code-frame" data-lang="js" data-sourcepos="149:1-159:3"><div class="highlight"><pre><code><span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">fetch</span><span class="p">(</span><span class="s2">`https://qiita.com/api/v2/items/</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">PUBLIC_OPTIONS</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">fetch</span><span class="p">(</span><span class="s2">`https://qiita.com/api/v2/items/</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span>
    <span class="p">...</span><span class="nx">AUTH_OPTIONS</span><span class="p">,</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PATCH</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">({</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">bodyString</span><span class="p">,</span>
        <span class="nx">title</span><span class="p">,</span>
    <span class="p">})</span>
<span class="p">});</span>
</code></pre></div></div>
<p data-sourcepos="161:1-161:196">編集時に <code>body</code> だけが必須かと思ってずっと失敗してましたが <code>title</code> も必須でした。ドキュメントのしたの方に書かないでほしかった。。。。<img alt=":bow:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/1f647.png" title=":bow:" width="20" loading="lazy"></p>
<h3 data-sourcepos="163:1-163:21">
<span id="ntfysh-as-ntfysh" class="fragment"></span><a href="#ntfysh-as-ntfysh"><i class="fa fa-link"></i></a>NtfySH as ntfy.sh</h3>
<p data-sourcepos="165:1-165:117">自分用LineDeveloperアカウントや自分用Slackで通知してた方は一度試してみてほしいです。</p>
<p data-sourcepos="167:1-167:89">15.1Kのスターを集めているOSSで、自社でもホスティングできます。</p>
<p data-sourcepos="169:1-169:37"><iframe id="qiita-embed-content__ad680e384baaac9e7d961bb4a7828ab0" src="https://qiita.com/embed-contents/link-card#qiita-embed-content__ad680e384baaac9e7d961bb4a7828ab0" data-content="https%3A%2F%2Fgithub.com%2Fbinwiederhier%2Fntfy" frameborder="0" scrolling="no" loading="lazy" style="width:100%;" height="29">
</iframe>
</p>
<p data-sourcepos="171:1-171:184">投稿回数の制限等はあるものの <a href="https://ntfy.sh/" class="autolink" rel="nofollow noopener" target="_blank">https://ntfy.sh/</a> でも十分通知可能（1日250回ほど通知できる）なので一旦無料プランで試してみてください。</p>
<p data-sourcepos="173:1-173:66">これだけで通知ができるのは簡単すぎませんか？</p>
<div class="code-frame" data-lang="js" data-sourcepos="175:1-180:3"><div class="highlight"><pre><code><span class="nf">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://ntfy.sh/mytopic</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// PUT works too</span>
    <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Backup successful 😀</span><span class="dl">'</span>
<span class="p">})</span>
</code></pre></div></div>
<h3 data-sourcepos="183:1-183:27">
<span id="smartphone-as-スマホ" class="fragment"></span><a href="#smartphone-as-%E3%82%B9%E3%83%9E%E3%83%9B"><i class="fa fa-link"></i></a>Smartphone as スマホ</h3>
<p data-sourcepos="185:1-185:75">NtfySHのアプリが必要ですが簡単に通知が飛んできます。</p>
<p data-sourcepos="187:1-187:134"><a href="https://ntfy.sh/" class="autolink" rel="nofollow noopener" target="_blank">https://ntfy.sh/</a> をChromeで入り、サイトの通知を許可するとアプリなしでもchrome経由の通知が可能のはず</p>
<h2 data-sourcepos="190:1-190:12">
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>
<p data-sourcepos="192:1-193:118">今回自分用のサービスを公開してアーキテクチャ図？を作ってみました。<br>
正直mermaidが使いたかっただけですが、誰かの参考になればと思い供養投稿になります。</p>
<h2 data-sourcepos="196:1-196:27">
<span id="できなかったこと" class="fragment"></span><a href="#%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>できなかったこと</h2>
<p data-sourcepos="198:1-198:458">MacOS上で <code>PlanetScale + Prisma</code> を使い開発していて、いざバッチ処理開始するときにPrismaをラズベリーパイにいれられないことが判明した。以下記事が参考になったが、そもそも私のメルカリで買った安めの非力ラズベリーパイだとビルド時間かかりすぎて終わりそうになかったので一旦あきらめてmysql2でアクセスしてます。SQL直書きしてます。</p>
<p data-sourcepos="200:1-200:45"><iframe id="qiita-embed-content__334fd6543d84236576f725e4b6563254" src="https://qiita.com/embed-contents/link-card#qiita-embed-content__334fd6543d84236576f725e4b6563254" data-content="https%3A%2F%2Fzenn.dev%2Fbowz%2Farticles%2F03c551269218aa" frameborder="0" scrolling="no" loading="lazy" style="width:100%;" height="29">
</iframe>
</p>
<h3 data-sourcepos="202:1-202:10">
<span id="mysql2" class="fragment"></span><a href="#mysql2"><i class="fa fa-link"></i></a>mysql2</h3>
<p data-sourcepos="204:1-205:382">こういうサービスのconnectionを切るのってどうすればいいのかわからない。<br>
繋ぎっぱなしでいいの？切ったら切ったらで繋げないし、コネクトが二個あるときはエラーで落ちるし、ってことで <code>await connection.connect().catch(_ =&gt; console.log('Already connected'));</code> バッチ処理最終にコネクトを切って、毎度コネクトをキャッチして使うことにした。あっているかわからない。</p>
<div class="code-frame" data-lang="ts" data-sourcepos="207:1-221:3"><div class="highlight"><pre><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">runQuery</span> <span class="o">=</span> <span class="k">async</span> <span class="o">&lt;</span><span class="nx">T</span> <span class="o">=</span> <span class="kr">any</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">query</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">options</span><span class="p">:</span> <span class="kr">any</span><span class="p">[]):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">[]</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">connection</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE_URL</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">msg</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">DATABASE_URL is not defined</span><span class="dl">'</span><span class="p">;</span>
      <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">createConnection</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE_URL</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">await</span> <span class="nx">connection</span><span class="p">.</span><span class="nf">connect</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">_</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Already connected</span><span class="dl">'</span><span class="p">));</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">rows</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">connection</span><span class="p">.</span><span class="nf">query</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
  <span class="k">return</span> <span class="nx">rows</span> <span class="k">as</span> <span class="nx">T</span><span class="p">[];</span>
<span class="p">}</span>
</code></pre></div></div>
</article></div></div></div></div><footer class="footer"><div class="content has-text-centered"><p>last uploaded at <!-- -->2024/03/04</p><p>© 2021 ykhirao</p></div></footer></div></div><script type="text/javascript">window.__routeInfo = JSON.parse("{\"template\":\"__react_static_root__/src/components/QiitaPost\",\"sharedHashesByProp\":{},\"data\":{\"post\":{\"rendered_body\":\"<h2 data-sourcepos=\\\"2:1-2:10\\\">\\n<span id=\\\"mermaid\\\" class=\\\"fragment\\\"></span><a href=\\\"#mermaid\\\"><i class=\\\"fa fa-link\\\"></i></a>Mermaid</h2>\\n<iframe id=\\\"qiita-embed-content__be54df2c146cc1ff1ba51d86dabde861\\\" src=\\\"https://qiita.com/embed-contents/mermaid#qiita-embed-content__be54df2c146cc1ff1ba51d86dabde861\\\" style=\\\"width:100%;\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\" loading=\\\"lazy\\\" data-content='{\\\"data\\\":\\\"sequenceDiagram\\\\n participant RaspberryPi as \u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\\\\n participant NodeJS as Node.js(NodeCron)\\\\n participant PlanetScaleDB as PlanetScaleDB\\\\n participant PlayWriteNodeJS as PlayWrite\\\\n participant TesseractJS as Tesseract.js\\\\n participant QiitaAPI as QiitaAPI\\\\n participant NtfySH as ntfy.sh\\\\n participant Smartphone as \u30B9\u30DE\u30DB\\\\n\\\\n RaspberryPi -&gt;&gt; NodeJS: Forever\u3067\u30C7\u30FC\u30E2\u30F3\u5316\\\\n NodeJS -&gt;&gt; PlanetScaleDB: \u5404\u7A2E\u30C7\u30FC\u30BF\u306F\u30AA\u30F3\u30E9\u30A4\u30F3\u4FDD\u5B58\\\\n PlanetScaleDB --&gt;&gt; NodeJS: DB\u78BA\u8A8D\u3057\u3066\u51E6\u7406\u6E08\u307F\u306A\u3089\u518D\u5B9F\u884C\\\\n NodeJS -&gt;&gt; PlayWriteNodeJS: \u753B\u50CF\u3092\u53D6\u5F97\\\\n PlayWriteNodeJS --&gt;&gt; NodeJS: \u753B\u50CF\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\\\\n NodeJS -&gt;&gt; TesseractJS: \u753B\u50CF\u3092OCR\u89E3\u6790\\\\n TesseractJS --&gt;&gt; NodeJS: \u89E3\u6790\u7D50\u679C\\\\n NodeJS -&gt;&gt; QiitaAPI: \u30D6\u30ED\u30B0\u306B\u6295\u7A3F\\\\n QiitaAPI --&gt;&gt; NodeJS: URL\u3092\u53D6\u5F97\\\\n NodeJS -&gt;&gt; NtfySH: \u30B9\u30DE\u30DB\u306B\u30D6\u30ED\u30B0URL\u3092\u901A\u77E5\\\\n NtfySH -&gt;&gt; Smartphone: \u901A\u77E5\\\",\\\"key\\\":\\\"ba128485ebf1eadccf1728d219af0489\\\"}'>\\n</iframe>\\n\\n<h2 data-sourcepos=\\\"28:1-28:18\\\">\\n<span id=\\\"\u7C21\u5358\u306A\u89E3\u8AAC\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E7%B0%A1%E5%8D%98%E3%81%AA%E8%A7%A3%E8%AA%AC\\\"><i class=\\\"fa fa-link\\\"></i></a>\u7C21\u5358\u306A\u89E3\u8AAC</h2>\\n<h3 data-sourcepos=\\\"30:1-30:40\\\">\\n<span id=\\\"raspberrypi-as-\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\\\" class=\\\"fragment\\\"></span><a href=\\\"#raspberrypi-as-%E3%83%A9%E3%82%BA%E3%83%99%E3%83%AA%E3%83%BC%E3%83%91%E3%82%A4\\\"><i class=\\\"fa fa-link\\\"></i></a>RaspberryPi as \u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4</h3>\\n<p data-sourcepos=\\\"32:1-32:99\\\">\u5B9A\u671F\u5B9F\u884C\u306F\u3059\u3079\u3066\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u3092\u4F7F\u3063\u3066\u307E\u3059\u3002\u30E1\u30EB\u30AB\u30EA\u3067\u8CB7\u3063\u305F\u3084\u3064\u3002</p>\\n<p data-sourcepos=\\\"34:1-34:99\\\">\u516C\u958B\u30B5\u30FC\u30D0\u30FC\u306B\u3059\u308B\u305F\u3081\u306E\u8A18\u4E8B\u3082\u542B\u3081\u3066\u3001\u3053\u306E\u3042\u305F\u308A\u3067\u8272\u3005\u66F8\u3044\u3066\u307E\u3059\u3002</p>\\n<p data-sourcepos=\\\"36:1-36:52\\\"><iframe id=\\\"qiita-embed-content__eee22f6f5ad4682e75d7fa2796f10358\\\" src=\\\"https://qiita.com/embed-contents/link-card#qiita-embed-content__eee22f6f5ad4682e75d7fa2796f10358\\\" data-content=\\\"https%3A%2F%2Fqiita.com%2Fykhirao%2Fitems%2Ff26e18364594e7077612\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\" loading=\\\"lazy\\\" style=\\\"width:100%;\\\" height=\\\"29\\\">\\n</iframe>\\n</p>\\n<p data-sourcepos=\\\"39:1-39:67\\\">\u4EE5\u4E0B\u306E\u3088\u3046\u306B <code>ssh pi</code> \u3067\u30ED\u30B0\u30A4\u30F3\u3057\u3066\u4F7F\u3063\u3066\u307E\u3059\u3002</p>\\n<div class=\\\"code-frame\\\" data-lang=\\\"terminal\\\" data-sourcepos=\\\"41:1-51:3\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"gp\\\">$</span><span class=\\\"w\\\"> </span>ssh pi\\n<span class=\\\"go\\\">\\n</span><span class=\\\"gp\\\">$</span><span class=\\\"w\\\"> </span>~/.ssh/config\\n<span class=\\\"go\\\">Host pi\\n  HostName raspberrypi.local\\n  User __yourname__\\n  IdentityFile /Users/__yourname__/.ssh/id_rsa_pi\\n</span><span class=\\\"gp\\\">  RemoteCommand cd /home/__yourname__/workspace/piapp;</span><span class=\\\"w\\\"> </span><span class=\\\"nv\\\">$SHELL</span> <span class=\\\"nt\\\">-il</span>\\n<span class=\\\"go\\\">  RequestTTY yes\\n</span></code></pre></div></div>\\n<p data-sourcepos=\\\"53:1-53:293\\\">VSCode\u3082Remote SSH\u306E\u30D7\u30E9\u30B0\u30A4\u30F3\u304C\u3042\u308C\u3070 <code>&gt; Remote-ssh: Connect to Host</code> \u3067pi\u3092\u9078\u629E\u3059\u308B\u3068\u305D\u306E\u307E\u307E\u958B\u767A\u3067\u304D\u307E\u3059\u3002\u30ED\u30FC\u30AB\u30EB\u3088\u308A\u3082\u52D5\u4F5C\u304C\u3082\u3063\u3055\u308A\u306A\u306E\u3067\u79C1\u306FMacOS\u5074\u3067\u958B\u767A\u3057\u3066 GitHub\u7D4C\u7531\u306E <code>git push</code> <code>git pull</code> \u3092\u4F7F\u3063\u3066\u958B\u767A\u3057\u3066\u307E\u3057\u305F\u3002</p>\\n<h3 data-sourcepos=\\\"55:1-55:31\\\">\\n<span id=\\\"nodejs-as-nodejsnodecron\\\" class=\\\"fragment\\\"></span><a href=\\\"#nodejs-as-nodejsnodecron\\\"><i class=\\\"fa fa-link\\\"></i></a>NodeJS as Node.js(NodeCron)</h3>\\n<p data-sourcepos=\\\"57:1-57:9\\\">\u96F0\u56F2\u6C17</p>\\n<div class=\\\"code-frame\\\" data-lang=\\\"terminal\\\" data-sourcepos=\\\"59:1-63:3\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"gp\\\">$</span><span class=\\\"w\\\"> </span>brew <span class=\\\"nb\\\">install </span>n\\n<span class=\\\"gp\\\">$</span><span class=\\\"w\\\"> </span>n auto\\n<span class=\\\"gp\\\">$</span><span class=\\\"w\\\"> </span>npm i\\n</code></pre></div></div>\\n<h3 data-sourcepos=\\\"65:1-65:32\\\">\\n<span id=\\\"planetscale-as-planetscaledb\\\" class=\\\"fragment\\\"></span><a href=\\\"#planetscale-as-planetscaledb\\\"><i class=\\\"fa fa-link\\\"></i></a>PlanetScale as PlanetScaleDB</h3>\\n<p data-sourcepos=\\\"67:1-67:132\\\">\u8A00\u308F\u305A\u3068\u3057\u308C\u305F\u30AA\u30F3\u30E9\u30A4\u30F3DB\u3067\u30012021\u5E7411\u6708\u306B\u7DCF\u984D1\u5104500\u4E07\u30C9\u30EB\uFF08\u7D04150\u5104\u5186\uFF09\u3092\u8ABF\u9054\u3057\u3066\u3044\u308B\u307F\u305F\u3044\u3002</p>\\n<p data-sourcepos=\\\"69:1-69:6\\\">\u53C2\u8003</p>\\n<p data-sourcepos=\\\"71:1-71:51\\\"><iframe id=\\\"qiita-embed-content__27d52a480add8613c6fdc5e77506286c\\\" src=\\\"https://qiita.com/embed-contents/link-card#qiita-embed-content__27d52a480add8613c6fdc5e77506286c\\\" data-content=\\\"https%3A%2F%2Fqiita.com%2Ftak001%2Fitems%2Fcfbaa9dcb542929ff235\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\" loading=\\\"lazy\\\" style=\\\"width:100%;\\\" height=\\\"29\\\">\\n</iframe>\\n</p>\\n<p data-sourcepos=\\\"73:1-73:272\\\">\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u3092\u516C\u958B\u30B5\u30FC\u30D0\u30FC\u306B\u3057\u3066\u3044\u306A\u3044\u306E\u3067\u3001\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u306Bssh\u3057\u306A\u3044\u3068\u30C7\u30FC\u30BF\u304C\u898B\u3048\u306A\u3044\u3088\u308A\u3082\u3001\u30AA\u30F3\u30E9\u30A4\u30F3\u30B5\u30FC\u30D3\u30B9\u3068\u3057\u3066\u81EA\u5206\u3060\u3051\u306B\u3067\u3082\u516C\u958B\u3057\u305F\u308A\u3059\u308B\u305F\u3081\u306B\u30AA\u30F3\u30E9\u30A4\u30F3DB\u3092\u5229\u7528\u3057\u3066\u307E\u3059\u3002</p>\\n<p data-sourcepos=\\\"75:1-75:58\\\">PC\u304B\u3089\u306E\u30A2\u30AF\u30BB\u30B9\u306F Sequel Ace\u3092\u4F7F\u3063\u3066\u307E\u3059\u3002</p>\\n<p data-sourcepos=\\\"77:1-77:23\\\"><iframe id=\\\"qiita-embed-content__32dfdcc7884f7deb38ba49879876e9fe\\\" src=\\\"https://qiita.com/embed-contents/link-card#qiita-embed-content__32dfdcc7884f7deb38ba49879876e9fe\\\" data-content=\\\"https%3A%2F%2Fsequel-ace.com%2F\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\" loading=\\\"lazy\\\" style=\\\"width:100%;\\\" height=\\\"29\\\">\\n</iframe>\\n</p>\\n<p data-sourcepos=\\\"79:1-79:102\\\">\u63A5\u7D9A\u60C5\u5831\u3092\u5165\u529B\u3057\u305F\u3089\u7C21\u5358\u306B\u30A2\u30AF\u30BB\u30B9\u3067\u304D\u3066\u30AF\u30A8\u30EA\u3082\u53E9\u3051\u308B\u306E\u3067\u304A\u3059\u3059\u3081\u3002</p>\\n<p data-sourcepos=\\\"81:1-81:163\\\"><a href=\\\"https://camo.qiitausercontent.com/6a2bb55cb6f451488e5cfd219985f295232f94c2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f64313937353931652d623862622d613139662d333663342d6665323466356462386437362e706e67\\\" target=\\\"_blank\\\" rel=\\\"nofollow noopener\\\"><img src=\\\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fd197591e-b8bb-a19f-36c4-fe24f5db8d76.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6882f71efadf7dbefeba515f5f75f12e\\\" alt=\\\"\u30B9\u30AF\u30EA\u30FC\u30F3\u30B7\u30E7\u30C3\u30C8 2023-12-25 15.08.47.png\\\" data-canonical-src=\\\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/d197591e-b8bb-a19f-36c4-fe24f5db8d76.png\\\" srcset=\\\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fd197591e-b8bb-a19f-36c4-fe24f5db8d76.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=86f2dfa1644cd857eda47ddb5cbfd2e0 1x\\\" loading=\\\"lazy\\\"></a></p>\\n<p data-sourcepos=\\\"83:1-84:166\\\">PlanetScale\u3067Read\u6A29\u9650\u306E\u307F\u306E\u30E6\u30FC\u30B6\u30FC\u3092\u767A\u884C\u3057\u3066\u666E\u6BB5\u306F\u305D\u308C\u3092\u4F7F\u3048\u307E\u3059\u306D\u3002<br>\\n\u66F8\u304D\u8FBC\u3080\u3068\u304D\u3060\u3051Write\u6A29\u9650\u30E6\u30FC\u30B6\u30FC\u4F7F\u3057\u307E\u3057\u3087\u3046\u3002\uFF08\u79C1\u306F\u9762\u5012\u306A\u306E\u3067\u57FA\u672CWrite\u6A29\u9650\u30E6\u30FC\u30B6\u30FC\u3067\u30AF\u30A8\u30EA\u53E9\u3044\u3066\u307E\u3059\u3002\u3002\u3002\u3002\u3002\uFF09</p>\\n<h3 data-sourcepos=\\\"86:1-86:32\\\">\\n<span id=\\\"playwritenodejs-as-playwrite\\\" class=\\\"fragment\\\"></span><a href=\\\"#playwritenodejs-as-playwrite\\\"><i class=\\\"fa fa-link\\\"></i></a>PlayWriteNodeJS as PlayWrite</h3>\\n<p data-sourcepos=\\\"88:1-88:57\\\">\u3053\u3053\u3067\u96F0\u56F2\u6C17\u306E\u30B3\u30FC\u30C9\u3092\u516C\u958B\u3057\u3066\u3044\u307E\u3059\u3002</p>\\n<p data-sourcepos=\\\"90:1-90:52\\\"><iframe id=\\\"qiita-embed-content__96d1de5ac064503680c1bcbe0a5895ea\\\" src=\\\"https://qiita.com/embed-contents/link-card#qiita-embed-content__96d1de5ac064503680c1bcbe0a5895ea\\\" data-content=\\\"https%3A%2F%2Fqiita.com%2Fykhirao%2Fitems%2F9b564e65d9c0a19bf2e0\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\" loading=\\\"lazy\\\" style=\\\"width:100%;\\\" height=\\\"29\\\">\\n</iframe>\\n</p>\\n<p data-sourcepos=\\\"92:1-93:93\\\">\u753B\u50CF\u306E\u30B9\u30AF\u30EA\u30FC\u30F3\u30B7\u30E7\u30C3\u30C8\u3082\u53D6\u308C\u308B\u306E\u3067\u5FC5\u8981\u304C\u3042\u308C\u3070\u4F7F\u3048\u307E\u3059\u3002<br>\\n\u3082\u3061\u308D\u3093\u751FDOM\u3092\u89E3\u6790\u3057\u3066\u305D\u308C\u3060\u3051\u3092\u8FD4\u305B\u308B\u306A\u3089\u305D\u308C\u304C\u4E00\u756A\u8EFD\u3044\u3067\u3059\u3002</p>\\n<p data-sourcepos=\\\"95:1-96:126\\\">zip\u306E\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u306F\u3053\u308C\u304F\u3089\u3044\u306E\u8A18\u8FF0\u3067\u3044\u3051\u307E\u3059\u3002<br>\\n\u30ED\u30B1\u30FC\u30BF\u30FC\u304C\u8868\u793A\u3055\u308C\u308B\u307E\u3067\u5F85\u6A5F\u3059\u308B\u30B3\u30FC\u30C9\u3068\u304B\u5FC5\u8981\u306A\u3044\u306E\u3067\u304B\u306A\u308A\u697D\u306B\u30B3\u30FC\u30C9\u304C\u66F8\u3051\u307E\u3059\u3002</p>\\n<div class=\\\"code-frame\\\" data-lang=\\\"ts\\\" data-sourcepos=\\\"98:1-106:3\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"k\\\">await</span> <span class=\\\"nx\\\">page</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">goto</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">URL</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">);</span>\\n<span class=\\\"k\\\">await</span> <span class=\\\"nx\\\">page</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">locator</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">input[name=password]</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">).</span><span class=\\\"nf\\\">fill</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">password</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">));</span>\\n<span class=\\\"k\\\">await</span> <span class=\\\"nx\\\">page</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">locator</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">input[type=submit]</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">).</span><span class=\\\"nf\\\">click</span><span class=\\\"p\\\">({</span> <span class=\\\"na\\\">timeout</span><span class=\\\"p\\\">:</span> <span class=\\\"mi\\\">120</span> <span class=\\\"o\\\">*</span> <span class=\\\"mi\\\">1000</span> <span class=\\\"p\\\">})</span>\\n<span class=\\\"k\\\">await</span> <span class=\\\"nx\\\">page</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">locator</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"s2\\\">a[title$='.zip']</span><span class=\\\"dl\\\">\\\"</span><span class=\\\"p\\\">).</span><span class=\\\"nf\\\">click</span><span class=\\\"p\\\">({</span> <span class=\\\"na\\\">timeout</span><span class=\\\"p\\\">:</span> <span class=\\\"mi\\\">120</span> <span class=\\\"o\\\">*</span> <span class=\\\"mi\\\">1000</span> <span class=\\\"p\\\">});</span>\\n<span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">download</span> <span class=\\\"o\\\">=</span> <span class=\\\"k\\\">await</span> <span class=\\\"nx\\\">downloadPromise</span><span class=\\\"p\\\">;</span>\\n<span class=\\\"nx\\\">console</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">log</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">file name: </span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span> <span class=\\\"nx\\\">download</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">suggestedFilename</span><span class=\\\"p\\\">());</span>\\n<span class=\\\"k\\\">await</span> <span class=\\\"nx\\\">download</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">saveAs</span><span class=\\\"p\\\">(</span><span class=\\\"s2\\\">`</span><span class=\\\"p\\\">${</span><span class=\\\"nx\\\">downloadsPath</span><span class=\\\"p\\\">}</span><span class=\\\"s2\\\">/</span><span class=\\\"p\\\">${</span><span class=\\\"nx\\\">download</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">suggestedFilename</span><span class=\\\"p\\\">()}</span><span class=\\\"s2\\\">`</span><span class=\\\"p\\\">);</span>\\n</code></pre></div></div>\\n<p data-sourcepos=\\\"108:1-108:164\\\">\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u304C\u975E\u529B\u3067\u8868\u793A\u3059\u308B\u306E\u306B30\u79D2\u4EE5\u4E0A\u304B\u304B\u308B\u30B1\u30FC\u30B9\u304C\u591A\u3044\u306E\u3067\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\u30922\u5206\u306B\u3057\u3066\u307E\u3059\u3002 <code>{ timeout: 120 * 1000 }</code></p>\\n<h3 data-sourcepos=\\\"110:1-110:31\\\">\\n<span id=\\\"tesseractjs-as-tesseractjs\\\" class=\\\"fragment\\\"></span><a href=\\\"#tesseractjs-as-tesseractjs\\\"><i class=\\\"fa fa-link\\\"></i></a>TesseractJS as Tesseract.js</h3>\\n<p data-sourcepos=\\\"112:1-112:51\\\">OCR\u306F\u3053\u306E\u3042\u305F\u308A\u3092\u53C2\u8003\u306B\u66F8\u304D\u307E\u3057\u305F\u3002</p>\\n<p data-sourcepos=\\\"114:1-114:56\\\"><iframe id=\\\"qiita-embed-content__264ac89f498476b95dcb387e83eb0f1c\\\" src=\\\"https://qiita.com/embed-contents/link-card#qiita-embed-content__264ac89f498476b95dcb387e83eb0f1c\\\" data-content=\\\"https%3A%2F%2Fqiita.com%2Fyamayamasan%2Fitems%2F1dd911b817c8bb51fc43\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\" loading=\\\"lazy\\\" style=\\\"width:100%;\\\" height=\\\"29\\\">\\n</iframe>\\n</p>\\n<p data-sourcepos=\\\"116:1-116:80\\\">512MB\u306E\u30E9\u30BA\u30D1\u30A4\u3067\u3082\u305D\u308C\u306A\u308A\u306B\u52D5\u304F\u306E\u3067\u4E00\u65E6\u6E80\u8DB3\u3057\u3066\u307E\u3059\u3002</p>\\n<p data-sourcepos=\\\"118:1-118:82\\\">\u3053\u3093\u306A\u611F\u3058\u3067\u52D5\u304D\u307E\u3059\u3002\u30D5\u30A1\u30A4\u30EB\u3078\u306Epath\u304C\u3042\u308C\u3070\u52D5\u304D\u307E\u3059\u3002</p>\\n<div class=\\\"code-frame\\\" data-lang=\\\"ts\\\" data-sourcepos=\\\"120:1-128:3\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">worker</span> <span class=\\\"o\\\">=</span> <span class=\\\"k\\\">await</span> <span class=\\\"nf\\\">createWorker</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">jpn</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">);</span>\\n\\n<span class=\\\"k\\\">for </span><span class=\\\"p\\\">(</span><span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">p</span> <span class=\\\"k\\\">of</span> <span class=\\\"nx\\\">paths</span><span class=\\\"p\\\">)</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"nx\\\">console</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">log</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">Fired OCR: </span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span> <span class=\\\"nx\\\">p</span><span class=\\\"p\\\">);</span>\\n    <span class=\\\"kd\\\">const</span> <span class=\\\"p\\\">{</span> <span class=\\\"na\\\">data</span><span class=\\\"p\\\">:</span> <span class=\\\"p\\\">{</span> <span class=\\\"nx\\\">text</span> <span class=\\\"p\\\">}</span> <span class=\\\"p\\\">}</span> <span class=\\\"o\\\">=</span> <span class=\\\"k\\\">await</span> <span class=\\\"nx\\\">worker</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">recognize</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">p</span><span class=\\\"p\\\">);</span>\\n    <span class=\\\"nx\\\">values</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">push</span><span class=\\\"p\\\">(</span><span class=\\\"s2\\\">`### </span><span class=\\\"p\\\">${</span><span class=\\\"nx\\\">today</span><span class=\\\"p\\\">}</span><span class=\\\"s2\\\">\\\\n\\\\n</span><span class=\\\"p\\\">${</span><span class=\\\"nx\\\">text</span><span class=\\\"p\\\">}</span><span class=\\\"s2\\\">`</span><span class=\\\"p\\\">);</span>\\n<span class=\\\"p\\\">}</span>\\n</code></pre></div></div>\\n<p data-sourcepos=\\\"130:1-130:93\\\">\u305F\u3060\u7D50\u679C\u306F\u7A7A\u767D\u5165\u308A\u3068\u304B\u3067\u8FD4\u3063\u3066\u304F\u308B\u306E\u3067\u3069\u3046\u306B\u304B\u3057\u3066\u6574\u5F62\u3057\u305F\u3044\u3002</p>\\n<div class=\\\"code-frame\\\" data-lang=\\\"text\\\" data-sourcepos=\\\"132:1-136:3\\\"><div class=\\\"highlight\\\"><pre><code>\u3053\u3093\u306A\u611F\u3058\u3067\u52D5\u304D\u307E\u3059\u3002\u30D5\u30A1\u30A4\u30EB\u3078\u306Epath\u304C\u3042\u308C\u3070\u52D5\u304D\u307E\u3059\u3002\\n\u2193\\n\u3053\u3000\u3093\u3000\u306A\u611F\u3000\u3058\u3067\u3000\u3000\u52D5\u3000\u304D\u307E\u3059\u3002\u30D5\u30A1\u3000\u30A4\u3000\u30EB\u3000\u3000\u3078\u306Ep\u3000ath\u3000\u304C\u3042\u3000\u3000\u308C\u3000\u3070\u3000\u52D5\u304D\u307E\u3000\u3059\u3002\\n</code></pre></div></div>\\n<p data-sourcepos=\\\"138:1-138:131\\\">\u305F\u3076\u3093TextLint\u3068\u304B\u3067\u3044\u3051\u308B\u3068\u601D\u3063\u3066\u307E\u3059\u304C\u3001\u30A4\u30DE\u30A4\u30C1\u8A2D\u5B9A\u304C\u308F\u304B\u3089\u306A\u3044\u306E\u3067\u4E00\u65E6\u3042\u304D\u3089\u3081\u3066\u307E\u3059\u3002</p>\\n<h3 data-sourcepos=\\\"140:1-140:24\\\">\\n<span id=\\\"qiitaapi-as-qiitaapi\\\" class=\\\"fragment\\\"></span><a href=\\\"#qiitaapi-as-qiitaapi\\\"><i class=\\\"fa fa-link\\\"></i></a>QiitaAPI as QiitaAPI</h3>\\n<p data-sourcepos=\\\"142:1-142:111\\\">Private\u306E\u30D6\u30ED\u30B0\u3092\u4F5C\u6210\u3057\u3001Qiita\u306EAPI\u3092\u4F7F\u3063\u3066\u53D6\u5F97\u3059\u308B\u305F\u3073\u306B\u8FFD\u8A18\u3092\u3057\u3066\u3044\u3063\u3066\u307E\u3059\u3002</p>\\n<p data-sourcepos=\\\"144:1-144:226\\\">\u6B21\u306ENtfySH\u306E\u901A\u77E5\u304C\u672C\u65875kb\u304F\u3089\u3044\u306E\u5236\u9650\u304C\u3042\u308A attachment.txt \u307F\u305F\u3044\u306A\u5F62\u5F0F\u3067\u9001\u3089\u308C\u3066\u304D\u3066\u3057\u307E\u3046\u306E\u3067\u3001\u672C\u6587\u305D\u306E\u307E\u307E\u306E\u6DFB\u4ED8\u3092\u8AE6\u3081\u3066\u4E00\u65E6Qiita\u306EPrivate\u30D6\u30ED\u30B0\u306B\u8FFD\u8A18\u3057\u3066\u307E\u3059\u3002</p>\\n<p data-sourcepos=\\\"147:1-147:54\\\">\u3053\u3093\u306A\u611F\u3058\u3067\u53D6\u5F97\u3068\u7DE8\u96C6\u3092\u3057\u3066\u3044\u307E\u3059\u3002</p>\\n<div class=\\\"code-frame\\\" data-lang=\\\"js\\\" data-sourcepos=\\\"149:1-159:3\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">res</span> <span class=\\\"o\\\">=</span> <span class=\\\"k\\\">await</span> <span class=\\\"nf\\\">fetch</span><span class=\\\"p\\\">(</span><span class=\\\"s2\\\">`https://qiita.com/api/v2/items/</span><span class=\\\"p\\\">${</span><span class=\\\"nx\\\">id</span><span class=\\\"p\\\">}</span><span class=\\\"s2\\\">`</span><span class=\\\"p\\\">,</span> <span class=\\\"nx\\\">PUBLIC_OPTIONS</span><span class=\\\"p\\\">);</span>\\n<span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">res</span> <span class=\\\"o\\\">=</span> <span class=\\\"k\\\">await</span> <span class=\\\"nf\\\">fetch</span><span class=\\\"p\\\">(</span><span class=\\\"s2\\\">`https://qiita.com/api/v2/items/</span><span class=\\\"p\\\">${</span><span class=\\\"nx\\\">id</span><span class=\\\"p\\\">}</span><span class=\\\"s2\\\">`</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"p\\\">...</span><span class=\\\"nx\\\">AUTH_OPTIONS</span><span class=\\\"p\\\">,</span>\\n    <span class=\\\"na\\\">method</span><span class=\\\"p\\\">:</span> <span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">PATCH</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span>\\n    <span class=\\\"na\\\">body</span><span class=\\\"p\\\">:</span> <span class=\\\"nx\\\">JSON</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">stringify</span><span class=\\\"p\\\">({</span>\\n        <span class=\\\"na\\\">body</span><span class=\\\"p\\\">:</span> <span class=\\\"nx\\\">bodyString</span><span class=\\\"p\\\">,</span>\\n        <span class=\\\"nx\\\">title</span><span class=\\\"p\\\">,</span>\\n    <span class=\\\"p\\\">})</span>\\n<span class=\\\"p\\\">});</span>\\n</code></pre></div></div>\\n<p data-sourcepos=\\\"161:1-161:196\\\">\u7DE8\u96C6\u6642\u306B <code>body</code> \u3060\u3051\u304C\u5FC5\u9808\u304B\u3068\u601D\u3063\u3066\u305A\u3063\u3068\u5931\u6557\u3057\u3066\u307E\u3057\u305F\u304C <code>title</code> \u3082\u5FC5\u9808\u3067\u3057\u305F\u3002\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306E\u3057\u305F\u306E\u65B9\u306B\u66F8\u304B\u306A\u3044\u3067\u307B\u3057\u304B\u3063\u305F\u3002\u3002\u3002\u3002<img alt=\\\":bow:\\\" class=\\\"emoji\\\" height=\\\"20\\\" src=\\\"https://cdn.qiita.com/emoji/twemoji/unicode/1f647.png\\\" title=\\\":bow:\\\" width=\\\"20\\\" loading=\\\"lazy\\\"></p>\\n<h3 data-sourcepos=\\\"163:1-163:21\\\">\\n<span id=\\\"ntfysh-as-ntfysh\\\" class=\\\"fragment\\\"></span><a href=\\\"#ntfysh-as-ntfysh\\\"><i class=\\\"fa fa-link\\\"></i></a>NtfySH as ntfy.sh</h3>\\n<p data-sourcepos=\\\"165:1-165:117\\\">\u81EA\u5206\u7528LineDeveloper\u30A2\u30AB\u30A6\u30F3\u30C8\u3084\u81EA\u5206\u7528Slack\u3067\u901A\u77E5\u3057\u3066\u305F\u65B9\u306F\u4E00\u5EA6\u8A66\u3057\u3066\u307F\u3066\u307B\u3057\u3044\u3067\u3059\u3002</p>\\n<p data-sourcepos=\\\"167:1-167:89\\\">15.1K\u306E\u30B9\u30BF\u30FC\u3092\u96C6\u3081\u3066\u3044\u308BOSS\u3067\u3001\u81EA\u793E\u3067\u3082\u30DB\u30B9\u30C6\u30A3\u30F3\u30B0\u3067\u304D\u307E\u3059\u3002</p>\\n<p data-sourcepos=\\\"169:1-169:37\\\"><iframe id=\\\"qiita-embed-content__ad680e384baaac9e7d961bb4a7828ab0\\\" src=\\\"https://qiita.com/embed-contents/link-card#qiita-embed-content__ad680e384baaac9e7d961bb4a7828ab0\\\" data-content=\\\"https%3A%2F%2Fgithub.com%2Fbinwiederhier%2Fntfy\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\" loading=\\\"lazy\\\" style=\\\"width:100%;\\\" height=\\\"29\\\">\\n</iframe>\\n</p>\\n<p data-sourcepos=\\\"171:1-171:184\\\">\u6295\u7A3F\u56DE\u6570\u306E\u5236\u9650\u7B49\u306F\u3042\u308B\u3082\u306E\u306E <a href=\\\"https://ntfy.sh/\\\" class=\\\"autolink\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">https://ntfy.sh/</a> \u3067\u3082\u5341\u5206\u901A\u77E5\u53EF\u80FD\uFF081\u65E5250\u56DE\u307B\u3069\u901A\u77E5\u3067\u304D\u308B\uFF09\u306A\u306E\u3067\u4E00\u65E6\u7121\u6599\u30D7\u30E9\u30F3\u3067\u8A66\u3057\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002</p>\\n<p data-sourcepos=\\\"173:1-173:66\\\">\u3053\u308C\u3060\u3051\u3067\u901A\u77E5\u304C\u3067\u304D\u308B\u306E\u306F\u7C21\u5358\u3059\u304E\u307E\u305B\u3093\u304B\uFF1F</p>\\n<div class=\\\"code-frame\\\" data-lang=\\\"js\\\" data-sourcepos=\\\"175:1-180:3\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"nf\\\">fetch</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">https://ntfy.sh/mytopic</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"na\\\">method</span><span class=\\\"p\\\">:</span> <span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">POST</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">,</span> <span class=\\\"c1\\\">// PUT works too</span>\\n    <span class=\\\"na\\\">body</span><span class=\\\"p\\\">:</span> <span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">Backup successful \uD83D\uDE00</span><span class=\\\"dl\\\">'</span>\\n<span class=\\\"p\\\">})</span>\\n</code></pre></div></div>\\n<h3 data-sourcepos=\\\"183:1-183:27\\\">\\n<span id=\\\"smartphone-as-\u30B9\u30DE\u30DB\\\" class=\\\"fragment\\\"></span><a href=\\\"#smartphone-as-%E3%82%B9%E3%83%9E%E3%83%9B\\\"><i class=\\\"fa fa-link\\\"></i></a>Smartphone as \u30B9\u30DE\u30DB</h3>\\n<p data-sourcepos=\\\"185:1-185:75\\\">NtfySH\u306E\u30A2\u30D7\u30EA\u304C\u5FC5\u8981\u3067\u3059\u304C\u7C21\u5358\u306B\u901A\u77E5\u304C\u98DB\u3093\u3067\u304D\u307E\u3059\u3002</p>\\n<p data-sourcepos=\\\"187:1-187:134\\\"><a href=\\\"https://ntfy.sh/\\\" class=\\\"autolink\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">https://ntfy.sh/</a> \u3092Chrome\u3067\u5165\u308A\u3001\u30B5\u30A4\u30C8\u306E\u901A\u77E5\u3092\u8A31\u53EF\u3059\u308B\u3068\u30A2\u30D7\u30EA\u306A\u3057\u3067\u3082chrome\u7D4C\u7531\u306E\u901A\u77E5\u304C\u53EF\u80FD\u306E\u306F\u305A</p>\\n<h2 data-sourcepos=\\\"190:1-190:12\\\">\\n<span id=\\\"\u6700\u5F8C\u306B\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E6%9C%80%E5%BE%8C%E3%81%AB\\\"><i class=\\\"fa fa-link\\\"></i></a>\u6700\u5F8C\u306B</h2>\\n<p data-sourcepos=\\\"192:1-193:118\\\">\u4ECA\u56DE\u81EA\u5206\u7528\u306E\u30B5\u30FC\u30D3\u30B9\u3092\u516C\u958B\u3057\u3066\u30A2\u30FC\u30AD\u30C6\u30AF\u30C1\u30E3\u56F3\uFF1F\u3092\u4F5C\u3063\u3066\u307F\u307E\u3057\u305F\u3002<br>\\n\u6B63\u76F4mermaid\u304C\u4F7F\u3044\u305F\u304B\u3063\u305F\u3060\u3051\u3067\u3059\u304C\u3001\u8AB0\u304B\u306E\u53C2\u8003\u306B\u306A\u308C\u3070\u3068\u601D\u3044\u4F9B\u990A\u6295\u7A3F\u306B\u306A\u308A\u307E\u3059\u3002</p>\\n<h2 data-sourcepos=\\\"196:1-196:27\\\">\\n<span id=\\\"\u3067\u304D\u306A\u304B\u3063\u305F\u3053\u3068\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\\\"><i class=\\\"fa fa-link\\\"></i></a>\u3067\u304D\u306A\u304B\u3063\u305F\u3053\u3068</h2>\\n<p data-sourcepos=\\\"198:1-198:458\\\">MacOS\u4E0A\u3067 <code>PlanetScale + Prisma</code> \u3092\u4F7F\u3044\u958B\u767A\u3057\u3066\u3044\u3066\u3001\u3044\u3056\u30D0\u30C3\u30C1\u51E6\u7406\u958B\u59CB\u3059\u308B\u3068\u304D\u306BPrisma\u3092\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u306B\u3044\u308C\u3089\u308C\u306A\u3044\u3053\u3068\u304C\u5224\u660E\u3057\u305F\u3002\u4EE5\u4E0B\u8A18\u4E8B\u304C\u53C2\u8003\u306B\u306A\u3063\u305F\u304C\u3001\u305D\u3082\u305D\u3082\u79C1\u306E\u30E1\u30EB\u30AB\u30EA\u3067\u8CB7\u3063\u305F\u5B89\u3081\u306E\u975E\u529B\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u3060\u3068\u30D3\u30EB\u30C9\u6642\u9593\u304B\u304B\u308A\u3059\u304E\u3066\u7D42\u308F\u308A\u305D\u3046\u306B\u306A\u304B\u3063\u305F\u306E\u3067\u4E00\u65E6\u3042\u304D\u3089\u3081\u3066mysql2\u3067\u30A2\u30AF\u30BB\u30B9\u3057\u3066\u307E\u3059\u3002SQL\u76F4\u66F8\u304D\u3057\u3066\u307E\u3059\u3002</p>\\n<p data-sourcepos=\\\"200:1-200:45\\\"><iframe id=\\\"qiita-embed-content__334fd6543d84236576f725e4b6563254\\\" src=\\\"https://qiita.com/embed-contents/link-card#qiita-embed-content__334fd6543d84236576f725e4b6563254\\\" data-content=\\\"https%3A%2F%2Fzenn.dev%2Fbowz%2Farticles%2F03c551269218aa\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\" loading=\\\"lazy\\\" style=\\\"width:100%;\\\" height=\\\"29\\\">\\n</iframe>\\n</p>\\n<h3 data-sourcepos=\\\"202:1-202:10\\\">\\n<span id=\\\"mysql2\\\" class=\\\"fragment\\\"></span><a href=\\\"#mysql2\\\"><i class=\\\"fa fa-link\\\"></i></a>mysql2</h3>\\n<p data-sourcepos=\\\"204:1-205:382\\\">\u3053\u3046\u3044\u3046\u30B5\u30FC\u30D3\u30B9\u306Econnection\u3092\u5207\u308B\u306E\u3063\u3066\u3069\u3046\u3059\u308C\u3070\u3044\u3044\u306E\u304B\u308F\u304B\u3089\u306A\u3044\u3002<br>\\n\u7E4B\u304E\u3063\u3071\u306A\u3057\u3067\u3044\u3044\u306E\uFF1F\u5207\u3063\u305F\u3089\u5207\u3063\u305F\u3089\u3067\u7E4B\u3052\u306A\u3044\u3057\u3001\u30B3\u30CD\u30AF\u30C8\u304C\u4E8C\u500B\u3042\u308B\u3068\u304D\u306F\u30A8\u30E9\u30FC\u3067\u843D\u3061\u308B\u3057\u3001\u3063\u3066\u3053\u3068\u3067 <code>await connection.connect().catch(_ =&gt; console.log('Already connected'));</code> \u30D0\u30C3\u30C1\u51E6\u7406\u6700\u7D42\u306B\u30B3\u30CD\u30AF\u30C8\u3092\u5207\u3063\u3066\u3001\u6BCE\u5EA6\u30B3\u30CD\u30AF\u30C8\u3092\u30AD\u30E3\u30C3\u30C1\u3057\u3066\u4F7F\u3046\u3053\u3068\u306B\u3057\u305F\u3002\u3042\u3063\u3066\u3044\u308B\u304B\u308F\u304B\u3089\u306A\u3044\u3002</p>\\n<div class=\\\"code-frame\\\" data-lang=\\\"ts\\\" data-sourcepos=\\\"207:1-221:3\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"k\\\">export</span> <span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">runQuery</span> <span class=\\\"o\\\">=</span> <span class=\\\"k\\\">async</span> <span class=\\\"o\\\">&lt;</span><span class=\\\"nx\\\">T</span> <span class=\\\"o\\\">=</span> <span class=\\\"kr\\\">any</span><span class=\\\"o\\\">&gt;</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">query</span><span class=\\\"p\\\">:</span> <span class=\\\"kr\\\">string</span><span class=\\\"p\\\">,</span> <span class=\\\"nx\\\">options</span><span class=\\\"p\\\">:</span> <span class=\\\"kr\\\">any</span><span class=\\\"p\\\">[]):</span> <span class=\\\"nb\\\">Promise</span><span class=\\\"o\\\">&lt;</span><span class=\\\"nx\\\">T</span><span class=\\\"p\\\">[]</span><span class=\\\"o\\\">&gt;</span> <span class=\\\"o\\\">=&gt;</span> <span class=\\\"p\\\">{</span>\\n  <span class=\\\"k\\\">if </span><span class=\\\"p\\\">(</span><span class=\\\"o\\\">!</span><span class=\\\"nx\\\">connection</span><span class=\\\"p\\\">)</span> <span class=\\\"p\\\">{</span>\\n    <span class=\\\"k\\\">if </span><span class=\\\"p\\\">(</span><span class=\\\"o\\\">!</span><span class=\\\"nx\\\">process</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">env</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">DATABASE_URL</span><span class=\\\"p\\\">)</span> <span class=\\\"p\\\">{</span>\\n      <span class=\\\"kd\\\">const</span> <span class=\\\"nx\\\">msg</span> <span class=\\\"o\\\">=</span> <span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">DATABASE_URL is not defined</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">;</span>\\n      <span class=\\\"nx\\\">console</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">error</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">msg</span><span class=\\\"p\\\">);</span>\\n      <span class=\\\"k\\\">throw</span> <span class=\\\"k\\\">new</span> <span class=\\\"nc\\\">Error</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">msg</span><span class=\\\"p\\\">);</span>\\n    <span class=\\\"p\\\">}</span>\\n    <span class=\\\"nx\\\">connection</span> <span class=\\\"o\\\">=</span> <span class=\\\"k\\\">await</span> <span class=\\\"nf\\\">createConnection</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">process</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">env</span><span class=\\\"p\\\">.</span><span class=\\\"nx\\\">DATABASE_URL</span><span class=\\\"p\\\">);</span>\\n  <span class=\\\"p\\\">}</span>\\n  <span class=\\\"k\\\">await</span> <span class=\\\"nx\\\">connection</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">connect</span><span class=\\\"p\\\">().</span><span class=\\\"k\\\">catch</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">_</span> <span class=\\\"o\\\">=&gt;</span> <span class=\\\"nx\\\">console</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">log</span><span class=\\\"p\\\">(</span><span class=\\\"dl\\\">'</span><span class=\\\"s1\\\">Already connected</span><span class=\\\"dl\\\">'</span><span class=\\\"p\\\">));</span>\\n  <span class=\\\"kd\\\">const</span> <span class=\\\"p\\\">[</span><span class=\\\"nx\\\">rows</span><span class=\\\"p\\\">]</span> <span class=\\\"o\\\">=</span> <span class=\\\"k\\\">await</span> <span class=\\\"nx\\\">connection</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">query</span><span class=\\\"p\\\">(</span><span class=\\\"nx\\\">query</span><span class=\\\"p\\\">,</span> <span class=\\\"nx\\\">options</span><span class=\\\"p\\\">)</span>\\n  <span class=\\\"k\\\">return</span> <span class=\\\"nx\\\">rows</span> <span class=\\\"k\\\">as</span> <span class=\\\"nx\\\">T</span><span class=\\\"p\\\">[];</span>\\n<span class=\\\"p\\\">}</span>\\n</code></pre></div></div>\\n\",\"body\":\"\\n## Mermaid\\n\\n```mermaid\\nsequenceDiagram\\n    participant RaspberryPi as \u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\\n    participant NodeJS as Node.js(NodeCron)\\n    participant PlanetScaleDB as PlanetScaleDB\\n    participant PlayWriteNodeJS as PlayWrite\\n    participant TesseractJS as Tesseract.js\\n    participant QiitaAPI as QiitaAPI\\n    participant NtfySH as ntfy.sh\\n    participant Smartphone as \u30B9\u30DE\u30DB\\n\\n    RaspberryPi ->> NodeJS: Forever\u3067\u30C7\u30FC\u30E2\u30F3\u5316\\n    NodeJS ->> PlanetScaleDB: \u5404\u7A2E\u30C7\u30FC\u30BF\u306F\u30AA\u30F3\u30E9\u30A4\u30F3\u4FDD\u5B58\\n    PlanetScaleDB -->> NodeJS: DB\u78BA\u8A8D\u3057\u3066\u51E6\u7406\u6E08\u307F\u306A\u3089\u518D\u5B9F\u884C\\n    NodeJS ->> PlayWriteNodeJS: \u753B\u50CF\u3092\u53D6\u5F97\\n    PlayWriteNodeJS -->> NodeJS: \u753B\u50CF\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\\n    NodeJS ->> TesseractJS: \u753B\u50CF\u3092OCR\u89E3\u6790\\n    TesseractJS -->> NodeJS: \u89E3\u6790\u7D50\u679C\\n    NodeJS ->> QiitaAPI: \u30D6\u30ED\u30B0\u306B\u6295\u7A3F\\n    QiitaAPI -->> NodeJS: URL\u3092\u53D6\u5F97\\n    NodeJS ->> NtfySH: \u30B9\u30DE\u30DB\u306B\u30D6\u30ED\u30B0URL\u3092\u901A\u77E5\\n    NtfySH ->> Smartphone: \u901A\u77E5\\n```\\n\\n## \u7C21\u5358\u306A\u89E3\u8AAC\\n\\n### RaspberryPi as \u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\\n\\n\u5B9A\u671F\u5B9F\u884C\u306F\u3059\u3079\u3066\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u3092\u4F7F\u3063\u3066\u307E\u3059\u3002\u30E1\u30EB\u30AB\u30EA\u3067\u8CB7\u3063\u305F\u3084\u3064\u3002\\n\\n\u516C\u958B\u30B5\u30FC\u30D0\u30FC\u306B\u3059\u308B\u305F\u3081\u306E\u8A18\u4E8B\u3082\u542B\u3081\u3066\u3001\u3053\u306E\u3042\u305F\u308A\u3067\u8272\u3005\u66F8\u3044\u3066\u307E\u3059\u3002\\n\\nhttps://qiita.com/ykhirao/items/f26e18364594e7077612\\n\\n\\n\u4EE5\u4E0B\u306E\u3088\u3046\u306B `ssh pi` \u3067\u30ED\u30B0\u30A4\u30F3\u3057\u3066\u4F7F\u3063\u3066\u307E\u3059\u3002\\n\\n```terminal\\n$ ssh pi\\n\\n$ ~/.ssh/config\\nHost pi\\n  HostName raspberrypi.local\\n  User __yourname__\\n  IdentityFile /Users/__yourname__/.ssh/id_rsa_pi\\n  RemoteCommand cd /home/__yourname__/workspace/piapp; $SHELL -il\\n  RequestTTY yes\\n```\\n\\nVSCode\u3082Remote SSH\u306E\u30D7\u30E9\u30B0\u30A4\u30F3\u304C\u3042\u308C\u3070 `> Remote-ssh: Connect to Host` \u3067pi\u3092\u9078\u629E\u3059\u308B\u3068\u305D\u306E\u307E\u307E\u958B\u767A\u3067\u304D\u307E\u3059\u3002\u30ED\u30FC\u30AB\u30EB\u3088\u308A\u3082\u52D5\u4F5C\u304C\u3082\u3063\u3055\u308A\u306A\u306E\u3067\u79C1\u306FMacOS\u5074\u3067\u958B\u767A\u3057\u3066 GitHub\u7D4C\u7531\u306E `git push` `git pull` \u3092\u4F7F\u3063\u3066\u958B\u767A\u3057\u3066\u307E\u3057\u305F\u3002\\n\\n### NodeJS as Node.js(NodeCron)\\n\\n\u96F0\u56F2\u6C17\\n\\n```terminal\\n$ brew install n\\n$ n auto\\n$ npm i\\n```\\n\\n### PlanetScale as PlanetScaleDB\\n\\n\u8A00\u308F\u305A\u3068\u3057\u308C\u305F\u30AA\u30F3\u30E9\u30A4\u30F3DB\u3067\u30012021\u5E7411\u6708\u306B\u7DCF\u984D1\u5104500\u4E07\u30C9\u30EB\uFF08\u7D04150\u5104\u5186\uFF09\u3092\u8ABF\u9054\u3057\u3066\u3044\u308B\u307F\u305F\u3044\u3002\\n\\n\u53C2\u8003\\n\\nhttps://qiita.com/tak001/items/cfbaa9dcb542929ff235\\n\\n\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u3092\u516C\u958B\u30B5\u30FC\u30D0\u30FC\u306B\u3057\u3066\u3044\u306A\u3044\u306E\u3067\u3001\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u306Bssh\u3057\u306A\u3044\u3068\u30C7\u30FC\u30BF\u304C\u898B\u3048\u306A\u3044\u3088\u308A\u3082\u3001\u30AA\u30F3\u30E9\u30A4\u30F3\u30B5\u30FC\u30D3\u30B9\u3068\u3057\u3066\u81EA\u5206\u3060\u3051\u306B\u3067\u3082\u516C\u958B\u3057\u305F\u308A\u3059\u308B\u305F\u3081\u306B\u30AA\u30F3\u30E9\u30A4\u30F3DB\u3092\u5229\u7528\u3057\u3066\u307E\u3059\u3002\\n\\nPC\u304B\u3089\u306E\u30A2\u30AF\u30BB\u30B9\u306F Sequel Ace\u3092\u4F7F\u3063\u3066\u307E\u3059\u3002\\n\\nhttps://sequel-ace.com/\\n\\n\u63A5\u7D9A\u60C5\u5831\u3092\u5165\u529B\u3057\u305F\u3089\u7C21\u5358\u306B\u30A2\u30AF\u30BB\u30B9\u3067\u304D\u3066\u30AF\u30A8\u30EA\u3082\u53E9\u3051\u308B\u306E\u3067\u304A\u3059\u3059\u3081\u3002\\n\\n![\u30B9\u30AF\u30EA\u30FC\u30F3\u30B7\u30E7\u30C3\u30C8 2023-12-25 15.08.47.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/d197591e-b8bb-a19f-36c4-fe24f5db8d76.png)\\n\\nPlanetScale\u3067Read\u6A29\u9650\u306E\u307F\u306E\u30E6\u30FC\u30B6\u30FC\u3092\u767A\u884C\u3057\u3066\u666E\u6BB5\u306F\u305D\u308C\u3092\u4F7F\u3048\u307E\u3059\u306D\u3002\\n\u66F8\u304D\u8FBC\u3080\u3068\u304D\u3060\u3051Write\u6A29\u9650\u30E6\u30FC\u30B6\u30FC\u4F7F\u3057\u307E\u3057\u3087\u3046\u3002\uFF08\u79C1\u306F\u9762\u5012\u306A\u306E\u3067\u57FA\u672CWrite\u6A29\u9650\u30E6\u30FC\u30B6\u30FC\u3067\u30AF\u30A8\u30EA\u53E9\u3044\u3066\u307E\u3059\u3002\u3002\u3002\u3002\u3002\uFF09\\n\\n### PlayWriteNodeJS as PlayWrite\\n\\n\u3053\u3053\u3067\u96F0\u56F2\u6C17\u306E\u30B3\u30FC\u30C9\u3092\u516C\u958B\u3057\u3066\u3044\u307E\u3059\u3002\\n\\nhttps://qiita.com/ykhirao/items/9b564e65d9c0a19bf2e0\\n\\n\u753B\u50CF\u306E\u30B9\u30AF\u30EA\u30FC\u30F3\u30B7\u30E7\u30C3\u30C8\u3082\u53D6\u308C\u308B\u306E\u3067\u5FC5\u8981\u304C\u3042\u308C\u3070\u4F7F\u3048\u307E\u3059\u3002\\n\u3082\u3061\u308D\u3093\u751FDOM\u3092\u89E3\u6790\u3057\u3066\u305D\u308C\u3060\u3051\u3092\u8FD4\u305B\u308B\u306A\u3089\u305D\u308C\u304C\u4E00\u756A\u8EFD\u3044\u3067\u3059\u3002\\n\\nzip\u306E\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u306F\u3053\u308C\u304F\u3089\u3044\u306E\u8A18\u8FF0\u3067\u3044\u3051\u307E\u3059\u3002\\n\u30ED\u30B1\u30FC\u30BF\u30FC\u304C\u8868\u793A\u3055\u308C\u308B\u307E\u3067\u5F85\u6A5F\u3059\u308B\u30B3\u30FC\u30C9\u3068\u304B\u5FC5\u8981\u306A\u3044\u306E\u3067\u304B\u306A\u308A\u697D\u306B\u30B3\u30FC\u30C9\u304C\u66F8\u3051\u307E\u3059\u3002\\n\\n```ts\\nawait page.goto('URL');\\nawait page.locator('input[name=password]').fill('password'));\\nawait page.locator('input[type=submit]').click({ timeout: 120 * 1000 })\\nawait page.locator(\\\"a[title$='.zip']\\\").click({ timeout: 120 * 1000 });\\nconst download = await downloadPromise;\\nconsole.log('file name: ', download.suggestedFilename());\\nawait download.saveAs(`${downloadsPath}/${download.suggestedFilename()}`);\\n```\\n\\n\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u304C\u975E\u529B\u3067\u8868\u793A\u3059\u308B\u306E\u306B30\u79D2\u4EE5\u4E0A\u304B\u304B\u308B\u30B1\u30FC\u30B9\u304C\u591A\u3044\u306E\u3067\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\u30922\u5206\u306B\u3057\u3066\u307E\u3059\u3002 `{ timeout: 120 * 1000 }`\\n\\n### TesseractJS as Tesseract.js\\n\\nOCR\u306F\u3053\u306E\u3042\u305F\u308A\u3092\u53C2\u8003\u306B\u66F8\u304D\u307E\u3057\u305F\u3002\\n\\nhttps://qiita.com/yamayamasan/items/1dd911b817c8bb51fc43\\n\\n512MB\u306E\u30E9\u30BA\u30D1\u30A4\u3067\u3082\u305D\u308C\u306A\u308A\u306B\u52D5\u304F\u306E\u3067\u4E00\u65E6\u6E80\u8DB3\u3057\u3066\u307E\u3059\u3002\\n\\n\u3053\u3093\u306A\u611F\u3058\u3067\u52D5\u304D\u307E\u3059\u3002\u30D5\u30A1\u30A4\u30EB\u3078\u306Epath\u304C\u3042\u308C\u3070\u52D5\u304D\u307E\u3059\u3002\\n\\n```ts\\nconst worker = await createWorker('jpn');\\n\\nfor (const p of paths) {\\n    console.log('Fired OCR: ', p);\\n    const { data: { text } } = await worker.recognize(p);\\n    values.push(`### ${today}\\\\n\\\\n${text}`);\\n}\\n```\\n\\n\u305F\u3060\u7D50\u679C\u306F\u7A7A\u767D\u5165\u308A\u3068\u304B\u3067\u8FD4\u3063\u3066\u304F\u308B\u306E\u3067\u3069\u3046\u306B\u304B\u3057\u3066\u6574\u5F62\u3057\u305F\u3044\u3002\\n\\n```text\\n\u3053\u3093\u306A\u611F\u3058\u3067\u52D5\u304D\u307E\u3059\u3002\u30D5\u30A1\u30A4\u30EB\u3078\u306Epath\u304C\u3042\u308C\u3070\u52D5\u304D\u307E\u3059\u3002\\n\u2193\\n\u3053\u3000\u3093\u3000\u306A\u611F\u3000\u3058\u3067\u3000\u3000\u52D5\u3000\u304D\u307E\u3059\u3002\u30D5\u30A1\u3000\u30A4\u3000\u30EB\u3000\u3000\u3078\u306Ep\u3000ath\u3000\u304C\u3042\u3000\u3000\u308C\u3000\u3070\u3000\u52D5\u304D\u307E\u3000\u3059\u3002\\n```\\n\\n\u305F\u3076\u3093TextLint\u3068\u304B\u3067\u3044\u3051\u308B\u3068\u601D\u3063\u3066\u307E\u3059\u304C\u3001\u30A4\u30DE\u30A4\u30C1\u8A2D\u5B9A\u304C\u308F\u304B\u3089\u306A\u3044\u306E\u3067\u4E00\u65E6\u3042\u304D\u3089\u3081\u3066\u307E\u3059\u3002\\n\\n### QiitaAPI as QiitaAPI\\n\\nPrivate\u306E\u30D6\u30ED\u30B0\u3092\u4F5C\u6210\u3057\u3001Qiita\u306EAPI\u3092\u4F7F\u3063\u3066\u53D6\u5F97\u3059\u308B\u305F\u3073\u306B\u8FFD\u8A18\u3092\u3057\u3066\u3044\u3063\u3066\u307E\u3059\u3002\\n\\n\u6B21\u306ENtfySH\u306E\u901A\u77E5\u304C\u672C\u65875kb\u304F\u3089\u3044\u306E\u5236\u9650\u304C\u3042\u308A attachment.txt \u307F\u305F\u3044\u306A\u5F62\u5F0F\u3067\u9001\u3089\u308C\u3066\u304D\u3066\u3057\u307E\u3046\u306E\u3067\u3001\u672C\u6587\u305D\u306E\u307E\u307E\u306E\u6DFB\u4ED8\u3092\u8AE6\u3081\u3066\u4E00\u65E6Qiita\u306EPrivate\u30D6\u30ED\u30B0\u306B\u8FFD\u8A18\u3057\u3066\u307E\u3059\u3002\\n\\n\\n\u3053\u3093\u306A\u611F\u3058\u3067\u53D6\u5F97\u3068\u7DE8\u96C6\u3092\u3057\u3066\u3044\u307E\u3059\u3002\\n\\n```js\\nconst res = await fetch(`https://qiita.com/api/v2/items/${id}`, PUBLIC_OPTIONS);\\nconst res = await fetch(`https://qiita.com/api/v2/items/${id}`, {\\n    ...AUTH_OPTIONS,\\n    method: 'PATCH',\\n    body: JSON.stringify({\\n        body: bodyString,\\n        title,\\n    })\\n});\\n```\\n\\n\u7DE8\u96C6\u6642\u306B `body` \u3060\u3051\u304C\u5FC5\u9808\u304B\u3068\u601D\u3063\u3066\u305A\u3063\u3068\u5931\u6557\u3057\u3066\u307E\u3057\u305F\u304C `title` \u3082\u5FC5\u9808\u3067\u3057\u305F\u3002\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306E\u3057\u305F\u306E\u65B9\u306B\u66F8\u304B\u306A\u3044\u3067\u307B\u3057\u304B\u3063\u305F\u3002\u3002\u3002\u3002:bow:\\n\\n### NtfySH as ntfy.sh\\n\\n\u81EA\u5206\u7528LineDeveloper\u30A2\u30AB\u30A6\u30F3\u30C8\u3084\u81EA\u5206\u7528Slack\u3067\u901A\u77E5\u3057\u3066\u305F\u65B9\u306F\u4E00\u5EA6\u8A66\u3057\u3066\u307F\u3066\u307B\u3057\u3044\u3067\u3059\u3002\\n\\n15.1K\u306E\u30B9\u30BF\u30FC\u3092\u96C6\u3081\u3066\u3044\u308BOSS\u3067\u3001\u81EA\u793E\u3067\u3082\u30DB\u30B9\u30C6\u30A3\u30F3\u30B0\u3067\u304D\u307E\u3059\u3002\\n\\nhttps://github.com/binwiederhier/ntfy\\n\\n\u6295\u7A3F\u56DE\u6570\u306E\u5236\u9650\u7B49\u306F\u3042\u308B\u3082\u306E\u306E https://ntfy.sh/ \u3067\u3082\u5341\u5206\u901A\u77E5\u53EF\u80FD\uFF081\u65E5250\u56DE\u307B\u3069\u901A\u77E5\u3067\u304D\u308B\uFF09\u306A\u306E\u3067\u4E00\u65E6\u7121\u6599\u30D7\u30E9\u30F3\u3067\u8A66\u3057\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002\\n\\n\u3053\u308C\u3060\u3051\u3067\u901A\u77E5\u304C\u3067\u304D\u308B\u306E\u306F\u7C21\u5358\u3059\u304E\u307E\u305B\u3093\u304B\uFF1F\\n\\n```js\\nfetch('https://ntfy.sh/mytopic', {\\n    method: 'POST', // PUT works too\\n    body: 'Backup successful \uD83D\uDE00'\\n})\\n```\\n\\n\\n### Smartphone as \u30B9\u30DE\u30DB\\n\\nNtfySH\u306E\u30A2\u30D7\u30EA\u304C\u5FC5\u8981\u3067\u3059\u304C\u7C21\u5358\u306B\u901A\u77E5\u304C\u98DB\u3093\u3067\u304D\u307E\u3059\u3002\\n\\nhttps://ntfy.sh/ \u3092Chrome\u3067\u5165\u308A\u3001\u30B5\u30A4\u30C8\u306E\u901A\u77E5\u3092\u8A31\u53EF\u3059\u308B\u3068\u30A2\u30D7\u30EA\u306A\u3057\u3067\u3082chrome\u7D4C\u7531\u306E\u901A\u77E5\u304C\u53EF\u80FD\u306E\u306F\u305A\\n\\n\\n## \u6700\u5F8C\u306B\\n\\n\u4ECA\u56DE\u81EA\u5206\u7528\u306E\u30B5\u30FC\u30D3\u30B9\u3092\u516C\u958B\u3057\u3066\u30A2\u30FC\u30AD\u30C6\u30AF\u30C1\u30E3\u56F3\uFF1F\u3092\u4F5C\u3063\u3066\u307F\u307E\u3057\u305F\u3002\\n\u6B63\u76F4mermaid\u304C\u4F7F\u3044\u305F\u304B\u3063\u305F\u3060\u3051\u3067\u3059\u304C\u3001\u8AB0\u304B\u306E\u53C2\u8003\u306B\u306A\u308C\u3070\u3068\u601D\u3044\u4F9B\u990A\u6295\u7A3F\u306B\u306A\u308A\u307E\u3059\u3002\\n\\n\\n## \u3067\u304D\u306A\u304B\u3063\u305F\u3053\u3068\\n\\nMacOS\u4E0A\u3067 `PlanetScale + Prisma` \u3092\u4F7F\u3044\u958B\u767A\u3057\u3066\u3044\u3066\u3001\u3044\u3056\u30D0\u30C3\u30C1\u51E6\u7406\u958B\u59CB\u3059\u308B\u3068\u304D\u306BPrisma\u3092\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u306B\u3044\u308C\u3089\u308C\u306A\u3044\u3053\u3068\u304C\u5224\u660E\u3057\u305F\u3002\u4EE5\u4E0B\u8A18\u4E8B\u304C\u53C2\u8003\u306B\u306A\u3063\u305F\u304C\u3001\u305D\u3082\u305D\u3082\u79C1\u306E\u30E1\u30EB\u30AB\u30EA\u3067\u8CB7\u3063\u305F\u5B89\u3081\u306E\u975E\u529B\u30E9\u30BA\u30D9\u30EA\u30FC\u30D1\u30A4\u3060\u3068\u30D3\u30EB\u30C9\u6642\u9593\u304B\u304B\u308A\u3059\u304E\u3066\u7D42\u308F\u308A\u305D\u3046\u306B\u306A\u304B\u3063\u305F\u306E\u3067\u4E00\u65E6\u3042\u304D\u3089\u3081\u3066mysql2\u3067\u30A2\u30AF\u30BB\u30B9\u3057\u3066\u307E\u3059\u3002SQL\u76F4\u66F8\u304D\u3057\u3066\u307E\u3059\u3002\\n\\nhttps://zenn.dev/bowz/articles/03c551269218aa\\n\\n### mysql2\\n\\n\u3053\u3046\u3044\u3046\u30B5\u30FC\u30D3\u30B9\u306Econnection\u3092\u5207\u308B\u306E\u3063\u3066\u3069\u3046\u3059\u308C\u3070\u3044\u3044\u306E\u304B\u308F\u304B\u3089\u306A\u3044\u3002\\n\u7E4B\u304E\u3063\u3071\u306A\u3057\u3067\u3044\u3044\u306E\uFF1F\u5207\u3063\u305F\u3089\u5207\u3063\u305F\u3089\u3067\u7E4B\u3052\u306A\u3044\u3057\u3001\u30B3\u30CD\u30AF\u30C8\u304C\u4E8C\u500B\u3042\u308B\u3068\u304D\u306F\u30A8\u30E9\u30FC\u3067\u843D\u3061\u308B\u3057\u3001\u3063\u3066\u3053\u3068\u3067 `await connection.connect().catch(_ => console.log('Already connected'));` \u30D0\u30C3\u30C1\u51E6\u7406\u6700\u7D42\u306B\u30B3\u30CD\u30AF\u30C8\u3092\u5207\u3063\u3066\u3001\u6BCE\u5EA6\u30B3\u30CD\u30AF\u30C8\u3092\u30AD\u30E3\u30C3\u30C1\u3057\u3066\u4F7F\u3046\u3053\u3068\u306B\u3057\u305F\u3002\u3042\u3063\u3066\u3044\u308B\u304B\u308F\u304B\u3089\u306A\u3044\u3002\\n\\n```ts\\nexport const runQuery = async <T = any>(query: string, options: any[]): Promise<T[]> => {\\n  if (!connection) {\\n    if (!process.env.DATABASE_URL) {\\n      const msg = 'DATABASE_URL is not defined';\\n      console.error(msg);\\n      throw new Error(msg);\\n    }\\n    connection = await createConnection(process.env.DATABASE_URL);\\n  }\\n  await connection.connect().catch(_ => console.log('Already connected'));\\n  const [rows] = await connection.query(query, options)\\n  return rows as T[];\\n}\\n```\\n\\n\",\"coediting\":false,\"comments_count\":0,\"created_at\":\"2023-12-25T14:53:51+09:00\",\"group\":null,\"id\":\"558973f35eccecdf4cfe\",\"likes_count\":2,\"private\":false,\"reactions_count\":0,\"stocks_count\":1,\"tags\":[{\"name\":\"JavaScript\",\"versions\":[]},{\"name\":\"TypeScript\",\"versions\":[]},{\"name\":\"OCR\",\"versions\":[]}],\"title\":\"\u6BCE\u65E5\u753B\u50CF\u3092OCR\u3057\u3066\u30B9\u30DE\u30DB\u306B\u901A\u77E5\u3059\u308B\u30B5\u30FC\u30D3\u30B9\u3092\u4F5C\u3063\u305F\u306E\u3067\u7C21\u5358\u306A\u30A2\u30FC\u30AD\u30C6\u30AF\u30C1\u30E3\u3092\u7D39\u4ECB\",\"updated_at\":\"2023-12-25T15:11:38+09:00\",\"url\":\"https://qiita.com/ykhirao/items/558973f35eccecdf4cfe\",\"user\":{\"description\":\"Web Developer From 2016.\\r\\nPHP/Laravel && React/TypeScript/Node.js\\r\\n\\r\\n\u696D\u52D9\u59D4\u8A17\u306E\u4F9D\u983C\u3068\u304B\u306FWantedly\u3068\u304B\u304B\u3089\u3067\u304A\u9858\u3044\u3057\u307E\u3059\uFF01\",\"facebook_id\":\"\",\"followees_count\":39,\"followers_count\":103,\"github_login_name\":\"ykhirao\",\"id\":\"ykhirao\",\"items_count\":83,\"linkedin_id\":\"\",\"location\":\"Tokyo, Japan\",\"name\":\"yk\",\"organization\":\"\",\"permanent_id\":112929,\"profile_image_url\":\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792\",\"team_only\":false,\"twitter_screen_name\":\"ykhirao\",\"website_url\":\"https://www.wantedly.com/id/ykhirao\"},\"page_views_count\":null,\"team_membership\":null,\"organization_url_name\":\"admin-guild\",\"slide\":false}},\"path\":\"posts/558973f35eccecdf4cfe\",\"sharedData\":{},\"siteData\":{\"updatedAt\":\"2024/03/04\"}}");</script><script defer="" type="text/javascript" src="/templates/styles.903ffd48.js"></script><script defer="" type="text/javascript" src="/templates/vendors~main.991a9778.js"></script><script defer="" type="text/javascript" src="/main.e4c894d8.js"></script></body></html>