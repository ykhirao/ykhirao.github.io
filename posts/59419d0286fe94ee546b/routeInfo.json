{"template":"__react_static_root__/src/components/QiitaPost","sharedHashesByProp":{},"data":{"post":{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>昨日[170216]の業務ではまった点をまとめます。試行錯誤しながら長めになるので気長にみてください。クリックした行番号をjQuery取得したいだけのQiitaです！</p>\n\n<h2>\n<span id=\"内容キーワード\" class=\"fragment\"></span><a href=\"#%E5%86%85%E5%AE%B9%E3%82%AD%E3%83%BC%E3%83%AF%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>内容・キーワード</h2>\n\n<ul>\n<li>列番号を取得する</li>\n<li>親要素取得について</li>\n<li>jQuery</li>\n<li>初心者向け、というか私がJS/jQueryの初心者</li>\n</ul>\n\n<h2>\n<span id=\"やりたかったこと\" class=\"fragment\"></span><a href=\"#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\"><i class=\"fa fa-link\"></i></a>やりたかったこと</h2>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">User ID</th>\n<th style=\"text-align: center\">Name</th>\n<th style=\"text-align: center\">Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">2</td>\n<td style=\"text-align: center\">Takahashi <i></i>\n</td>\n<td style=\"text-align: center\">test</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">4</td>\n<td style=\"text-align: center\">Yamada</td>\n<td style=\"text-align: center\">test2</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">5</td>\n<td style=\"text-align: center\">Sato</td>\n<td style=\"text-align: center\">test3</td>\n</tr>\n</tbody>\n</table>\n\n<p>こちらのTableの[Takahashi]をクリックして、jQueryで列番号[0]を取得して</p>\n\n<div class=\"code-frame\" data-lang=\"php\">\n<div class=\"code-lang\"><span class=\"bold\">test.php</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">Array</span>\n<span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"k\">Array</span>\n        <span class=\"p\">(</span>\n            <span class=\"p\">[</span><span class=\"s1\">'趣味'</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"読書\"</span>\n            <span class=\"p\">[</span><span class=\"s2\">\"特技\"</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"ruby\"</span>\n            <span class=\"p\">[</span><span class=\"s2\">\"名前\"</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"Takahashi\"</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"k\">Array</span>\n        <span class=\"p\">(</span>\n            <span class=\"p\">(</span><span class=\"n\">略</span><span class=\"p\">)</span>\n        <span class=\"p\">)</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n</div>\n\n<p>この<code>test.php</code>のArray[0]を取得して、次のテーブルを作りたいと</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\"></th>\n<th style=\"text-align: center\">Takahashi</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">趣味</td>\n<td style=\"text-align: center\">読書</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">特技</td>\n<td style=\"text-align: center\">ruby</td>\n</tr>\n</tbody>\n</table>\n\n<p>そんなことがしたかったです！</p>\n\n<h1>\n<span id=\"解法1-列全体をクリック可能にする\" class=\"fragment\"></span><a href=\"#%E8%A7%A3%E6%B3%951-%E5%88%97%E5%85%A8%E4%BD%93%E3%82%92%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF%E5%8F%AF%E8%83%BD%E3%81%AB%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>解法1 列全体をクリック可能にする</h1>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">User ID</th>\n<th style=\"text-align: center\">Name</th>\n<th style=\"text-align: center\">Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">2 <i></i>\n</td>\n<td style=\"text-align: center\">Takahashi <i></i>\n</td>\n<td style=\"text-align: center\">test <i></i>\n</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">4</td>\n<td style=\"text-align: center\">Yamada</td>\n<td style=\"text-align: center\">test2</td>\n</tr>\n</tbody>\n</table>\n\n<p>列番号0と表示してくれるかな?</p>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">table.html</span></div>\n<div class=\"highlight\"><pre><code>\n/* ただのテーブル */\n<span class=\"nt\">&lt;table&gt;</span>\n  <span class=\"nt\">&lt;thead&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;th&gt;</span>User ID<span class=\"nt\">&lt;/th&gt;&lt;th&gt;</span>Name<span class=\"nt\">&lt;/th&gt;&lt;th&gt;</span>Comment<span class=\"nt\">&lt;/th&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n  <span class=\"nt\">&lt;/thead&gt;</span>\n  <span class=\"nt\">&lt;tbody&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>2<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"names\"</span><span class=\"nt\">&gt;</span>Takahashi<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>test<span class=\"nt\">&lt;/td&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>4<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"names\"</span><span class=\"nt\">&gt;</span>Yamada<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>test2<span class=\"nt\">&lt;/td&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n  <span class=\"nt\">&lt;/tbody&gt;</span>\n<span class=\"nt\">&lt;/table&gt;</span>\n\n/* ここからjQuery */\n\n<span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"http://code.jquery.com/jquery.min.js\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n<span class=\"nt\">&lt;script&gt;</span>\n<span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n\n<span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody tr</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">click</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(){</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody tr</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">index</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">));</span>\n<span class=\"p\">});</span>\n\n<span class=\"p\">})();</span>\n<span class=\"nt\">&lt;/script&gt;</span>\n</code></pre></div>\n</div>\n\n<p>次の部分を簡単に解説すると</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">script.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody tr</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">index</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">);</span>\n</code></pre></div>\n</div>\n\n<p><code>this</code>には今回クリックした列がすべて入っています。console.logするとこんな感じ。<code>&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;&lt;td class=\"names\"&gt;Takahashi&lt;/td&gt;&lt;td&gt;test&lt;/td&gt;&lt;/tr&gt;</code><br>\n<code>$(\"tbody tr\")</code>は　<code>tbody</code>直下の<code>tr</code>です。<br>\n<code>index()</code>が<code>this</code>がいる列のインデックス番号を返してくれます。<br>\nこれで無事取得できました〜〜。<br>\n一番情報ページが多くて簡単でした！</p>\n\n<h1>\n<span id=\"解法2-nameだけクリック可能にする\" class=\"fragment\"></span><a href=\"#%E8%A7%A3%E6%B3%952-name%E3%81%A0%E3%81%91%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF%E5%8F%AF%E8%83%BD%E3%81%AB%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>解法2 Nameだけクリック可能にする</h1>\n\n<p>Nameにはクラスnamesをつけています。</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">User ID</th>\n<th style=\"text-align: center\">Name</th>\n<th style=\"text-align: center\">Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">2</td>\n<td style=\"text-align: center\">Takahashi</td>\n<td style=\"text-align: center\">test</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">4</td>\n<td style=\"text-align: center\">Yamada <i></i>\n</td>\n<td style=\"text-align: center\">test2</td>\n</tr>\n</tbody>\n</table>\n\n<p>ここ押すと列番号1を取得したい。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">script.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody .names</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">click</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(){</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">);</span> <span class=\"c1\">// &lt;td class=\"names\"&gt;Takahashi&lt;/td&gt;</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">tr</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">).</span><span class=\"nx\">parent</span><span class=\"p\">();</span> <span class=\"c1\">// [td]の親の[tr]を取得</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">index</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody tr</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">index</span><span class=\"p\">(</span><span class=\"nx\">tr</span><span class=\"p\">);</span> <span class=\"c1\">// このtrは何番目?</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">index</span><span class=\"p\">);</span>\n<span class=\"p\">});</span>\n</code></pre></div>\n</div>\n\n<p>table構成は変えてないのでjQueryの部分だけです。<br>\n<code>this</code>じゃなくて<code>$(this)</code>ですよ〜。ここめっちゃハマりました。<br>\n<del>詳しい解説は先輩方がコメント欄でしてくれると信じているので</del><br>\nとりあえずconsole.logしてみると</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">script.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">);</span> <span class=\"c1\">// &lt;td class=\"names\"&gt;Takahashi&lt;/td&gt;</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">parent</span><span class=\"p\">());</span> <span class=\"c1\">// エラー</span>\n<span class=\"c1\">// Uncaught TypeError: parent is not a function at HTMLTableCellElement</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">));</span> <span class=\"c1\">// [td.names, context: td.names]</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">).</span><span class=\"nx\">parent</span><span class=\"p\">());</span> <span class=\"c1\">// 0</span>\n\n</code></pre></div>\n</div>\n\n<p>thisのparent()はタイプエラーでて、$(this)でそれっぽいオブジェクトにしてからparent()使えってことでしょうか。</p>\n\n<h1>\n<span id=\"解法3-ソート付いても大丈夫\" class=\"fragment\"></span><a href=\"#%E8%A7%A3%E6%B3%953-%E3%82%BD%E3%83%BC%E3%83%88%E4%BB%98%E3%81%84%E3%81%A6%E3%82%82%E5%A4%A7%E4%B8%88%E5%A4%AB\"><i class=\"fa fa-link\"></i></a>解法3 ソート付いても大丈夫！！！</h1>\n\n<p>痛恨のミスをしていました。<br>\nソートを可能にしていたことをすっかり忘れていました。はい。</p>\n\n<div class=\"code-frame\" data-lang=\"php\">\n<div class=\"code-lang\"><span class=\"bold\">test.php</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">Array</span>\n<span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"k\">Array</span>\n        <span class=\"p\">(</span>\n            <span class=\"p\">[</span><span class=\"s1\">'趣味'</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"読書\"</span>\n            <span class=\"p\">[</span><span class=\"s2\">\"特技\"</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"ruby\"</span>\n            <span class=\"p\">[</span><span class=\"s2\">\"名前\"</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"Takahashi\"</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"k\">Array</span>\n        <span class=\"p\">(</span>\n            <span class=\"p\">(</span><span class=\"n\">略</span><span class=\"p\">)</span>\n        <span class=\"p\">)</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n</div>\n\n<p>ソートした後は、行のindexとarrayのindexが対応してなかったです！！<br>\n別人のデータ取ってきてました。</p>\n\n<div class=\"code-frame\" data-lang=\"php\">\n<div class=\"code-lang\"><span class=\"bold\">test.php</span></div>\n<div class=\"highlight\"><pre><code>/* phpのforeachの途中 */\n<span class=\"cp\">&lt;?php</span> <span class=\"k\">isset</span><span class=\"p\">(</span><span class=\"nv\">$index</span><span class=\"p\">)</span> <span class=\"o\">?</span> <span class=\"nv\">$index</span> <span class=\"o\">+=</span> <span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"nv\">$index</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"cp\">?&gt;</span>\n<span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"names\"</span> <span class=\"na\">id=</span><span class=\"s\">\"</span><span class=\"cp\">&lt;?php</span> <span class=\"k\">echo</span> <span class=\"nv\">$index</span><span class=\"p\">;</span> <span class=\"cp\">?&gt;</span><span class=\"s\">\"</span><span class=\"nt\">&gt;</span>Takahashi<span class=\"nt\">&lt;/td&gt;</span>\n</code></pre></div>\n</div>\n\n<p>こんな感じのphpでid生成して対応しました。<br>\nTableはこんな感じ。</p>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">index.html</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;table&gt;</span>\n  <span class=\"nt\">&lt;thead&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;th&gt;</span>User ID<span class=\"nt\">&lt;/th&gt;&lt;th&gt;</span>Name<span class=\"nt\">&lt;/th&gt;&lt;th&gt;</span>Comment<span class=\"nt\">&lt;/th&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n  <span class=\"nt\">&lt;/thead&gt;</span>\n  <span class=\"nt\">&lt;tbody&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>2<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"names\"</span> <span class=\"na\">id=</span><span class=\"s\">\"0\"</span><span class=\"nt\">&gt;</span>Takahashi<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>test<span class=\"nt\">&lt;/td&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>4<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"names\"</span> <span class=\"na\">id=</span><span class=\"s\">\"1\"</span><span class=\"nt\">&gt;</span>Yamada<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>test2<span class=\"nt\">&lt;/td&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n  <span class=\"nt\">&lt;/tbody&gt;</span>\n<span class=\"nt\">&lt;/table&gt;</span>\n</code></pre></div>\n</div>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">User ID <i></i>\n</th>\n<th style=\"text-align: center\">Name <i></i>\n</th>\n<th style=\"text-align: center\">Comment <i></i>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">2</td>\n<td style=\"text-align: center\">Takahashi <i></i>\n</td>\n<td style=\"text-align: center\">test</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">4</td>\n<td style=\"text-align: center\">Yamada</td>\n<td style=\"text-align: center\">test2</td>\n</tr>\n</tbody>\n</table>\n\n<p>なので今回はクラスnamesをクリックしたら、そのtdのidを列番号の代わりに取得するということにた。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">script.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody .names</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">click</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(){</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">index</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">).</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">id</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">index</span><span class=\"p\">);</span>\n<span class=\"p\">});</span>\n</code></pre></div>\n</div>\n\n<p>こんな感じでIDの値を取得できます！</p>\n\n<h1>\n<span id=\"おわりに\" class=\"fragment\"></span><a href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>おわりに</h1>\n\n<p>jQueryエラーとかなり向き合い、苦戦しました。<br>\nはじめての記事なので何かあったらコメントください！<br>\n長文読んでいただきありがとうございました！</p>\n\n<p>.</p>\n","body":"# はじめに\n昨日[170216]の業務ではまった点をまとめます。試行錯誤しながら長めになるので気長にみてください。クリックした行番号をjQuery取得したいだけのQiitaです！\n\n## 内容・キーワード\n+ 列番号を取得する\n+ 親要素取得について\n+ jQuery\n+ 初心者向け、というか私がJS/jQueryの初心者\n\n## やりたかったこと\n\n| User ID | Name | Comment |\n|:-:|:-:|:-:|\n| 2  |  Takahashi <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>  |  test |\n| 4  | Yamada  |test2   |\n| 5  | Sato  |  test3 |\n\nこちらのTableの[Takahashi]をクリックして、jQueryで列番号[0]を取得して\n\n```test.php\nArray\n(\n    [0] => Array\n        (\n            ['趣味'] => \"読書\"\n            [\"特技\"] => \"ruby\"\n            [\"名前\"] => \"Takahashi\"\n        )\n    [1] => Array\n        (\n            (略)\n        )\n)\n```\nこの`test.php`のArray[0]を取得して、次のテーブルを作りたいと\n\n|  | Takahashi |\n|:-:|:-:|\n| 趣味  | 読書  |\n| 特技  |  ruby |\n\nそんなことがしたかったです！\n\n# 解法1 列全体をクリック可能にする\n\n| User ID | Name | Comment |\n|:-:|:-:|:-:|\n| 2 <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>  |  Takahashi <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>  |  test <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i> |\n| 4   |  Yamada   |  test2  |\n列番号0と表示してくれるかな?\n\n```table.html\n\n/* ただのテーブル */\n<table>\n  <thead>\n    <tr>\n      <th>User ID</th><th>Name</th><th>Comment</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>2</td>\n      <td class=\"names\">Takahashi</td>\n      <td>test</td>\n    </tr>\n    <tr>\n      <td>4</td>\n      <td class=\"names\">Yamada</td>\n      <td>test2</td>\n    </tr>\n  </tbody>\n</table>\n\n/* ここからjQuery */\n\n<script src=\"http://code.jquery.com/jquery.min.js\"></script>\n<script>\n(function() {\n\n$(\"tbody tr\").click(function(){\n  console.log($(\"tbody tr\").index(this));\n});\n\n})();\n</script>\n```\n次の部分を簡単に解説すると\n\n```script.js\n$(\"tbody tr\").index(this);\n```\n`this`には今回クリックした列がすべて入っています。console.logするとこんな感じ。`<tr><td>2</td><td class=\"names\">Takahashi</td><td>test</td></tr>`\n`$(\"tbody tr\")`は　`tbody`直下の`tr`です。\n`index()`が`this`がいる列のインデックス番号を返してくれます。\nこれで無事取得できました〜〜。\n一番情報ページが多くて簡単でした！\n\n# 解法2 Nameだけクリック可能にする\n\nNameにはクラスnamesをつけています。\n\n| User ID | Name | Comment |\n|:-:|:-:|:-:|\n| 2   |  Takahashi   |  test  |\n| 4   |  Yamada <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>  |  test2  |\nここ押すと列番号1を取得したい。\n\n\n```script.js\n$(\"tbody .names\").click(function(){\n  console.log(this); // <td class=\"names\">Takahashi</td>\n  var tr = $(this).parent(); // [td]の親の[tr]を取得\n  var index = $(\"tbody tr\").index(tr); // このtrは何番目?\n  console.log(index);\n});\n```\n\ntable構成は変えてないのでjQueryの部分だけです。\n`this`じゃなくて`$(this)`ですよ〜。ここめっちゃハマりました。\n~~詳しい解説は先輩方がコメント欄でしてくれると信じているので~~\nとりあえずconsole.logしてみると\n\n```script.js\nconsole.log(this); // <td class=\"names\">Takahashi</td>\nconsole.log(this.parent()); // エラー\n// Uncaught TypeError: parent is not a function at HTMLTableCellElement\nconsole.log($(this)); // [td.names, context: td.names]\nconsole.log($(this).parent()); // 0\n\n```\nthisのparent()はタイプエラーでて、$(this)でそれっぽいオブジェクトにしてからparent()使えってことでしょうか。\n\n# 解法3 ソート付いても大丈夫！！！\n\n痛恨のミスをしていました。\nソートを可能にしていたことをすっかり忘れていました。はい。\n\n```test.php\nArray\n(\n    [0] => Array\n        (\n            ['趣味'] => \"読書\"\n            [\"特技\"] => \"ruby\"\n            [\"名前\"] => \"Takahashi\"\n        )\n    [1] => Array\n        (\n            (略)\n        )\n)\n```\nソートした後は、行のindexとarrayのindexが対応してなかったです！！\n別人のデータ取ってきてました。\n\n\n```test.php\n/* phpのforeachの途中 */\n<?php isset($index) ? $index += 1 : $index = 0; ?>\n<td class=\"names\" id=\"<?php echo $index; ?>\">Takahashi</td>\n```\nこんな感じのphpでid生成して対応しました。\nTableはこんな感じ。\n\n```index.html\n<table>\n  <thead>\n    <tr>\n      <th>User ID</th><th>Name</th><th>Comment</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>2</td>\n      <td class=\"names\" id=\"0\">Takahashi</td>\n      <td>test</td>\n    </tr>\n    <tr>\n      <td>4</td>\n      <td class=\"names\" id=\"1\">Yamada</td>\n      <td>test2</td>\n    </tr>\n  </tbody>\n</table>\n```\n\n| User ID <i class=\"fa fa-sort\" aria-hidden=\"true\"></i>| Name <i class=\"fa fa-sort\" aria-hidden=\"true\"></i>| Comment <i class=\"fa fa-sort\" aria-hidden=\"true\"></i>|\n|:-:|:-:|:-:|\n| 2   |  Takahashi <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>  |  test  |\n| 4   |  Yamada   |  test2  |\n\nなので今回はクラスnamesをクリックしたら、そのtdのidを列番号の代わりに取得するということにた。\n\n```script.js\n$(\"tbody .names\").click(function(){\n  var index = $(this).attr(\"id\");\n  console.log(index);\n});\n```\nこんな感じでIDの値を取得できます！\n\n# おわりに\njQueryエラーとかなり向き合い、苦戦しました。\nはじめての記事なので何かあったらコメントください！\n長文読んでいただきありがとうございました！\n\n.\n","coediting":false,"comments_count":0,"created_at":"2017-02-16T02:47:56+09:00","group":null,"id":"59419d0286fe94ee546b","likes_count":6,"private":false,"reactions_count":0,"stocks_count":7,"tags":[{"name":"PHP","versions":[]},{"name":"HTML","versions":[]},{"name":"JavaScript","versions":[]},{"name":"jQuery","versions":[]}],"title":"jQueryでの列番号取得に関して","updated_at":"2018-02-27T11:51:11+09:00","url":"https://qiita.com/ykhirao/items/59419d0286fe94ee546b","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":38,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":71,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false}},"path":"posts/59419d0286fe94ee546b"}
