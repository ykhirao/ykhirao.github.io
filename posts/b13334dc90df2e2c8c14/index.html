<!DOCTYPE html><html lang="en"><head><meta name="generator" content="React Static"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no"/><link rel="preload" as="script" href="/templates/styles.0a231784.js"/><link rel="preload" as="script" href="/templates/vendors~main.867a25a5.js"/><link rel="preload" as="script" href="/main.80784f3b.js"/><link rel="preload" as="style" href="/styles.642cfcb4.css"/><link rel="stylesheet" href="/styles.642cfcb4.css"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png"/><link rel="manifest" href="/manifest.json"/><meta name="mobile-web-app-capable" content="yes"/><meta name="theme-color" content="#fff"/><meta name="application-name"/><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon-167x167.png"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="1024x1024" href="/apple-touch-icon-1024x1024.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><meta name="apple-mobile-web-app-title"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-640x1136.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-750x1334.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-828x1792.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1125x2436.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2208.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2688.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1536x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2224.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2388.png"/><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-2048x2732.png"/><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1620x2160.png"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1136x640.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1334x750.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1792x828.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2436x1125.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2208x1242.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2688x1242.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2048x1536.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2224x1668.png"/><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2388x1668.png"/><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2732x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1620.png"/><link rel="icon" type="image/png" sizes="228x228" href="/coast-228x228.png"/><meta name="msapplication-TileColor" content="#fff"/><meta name="msapplication-TileImage" content="/mstile-144x144.png"/><meta name="msapplication-config" content="/browserconfig.xml"/><link rel="yandex-tableau-widget" href="/yandex-browser-manifest.json"/></head><body><div id="root"><div style="outline:none" tabindex="-1"><nav class="navbar is-dark is-fixed-top" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item" href="/">Home</a><a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"><span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span></a></div><div id="navbarBasicExample" class="navbar-menu "><div class="navbar-start"><a class="navbar-item" href="/posts">Posts</a><a class="navbar-item" href="/events">Events</a><a class="navbar-item" href="/github">GitHub</a></div></div></div></nav><div class="container"><div class="is-primary" style="padding:4.5rem 0.5rem"><div style="outline:none" tabindex="-1"><div><a href="/posts">&lt;<!-- --> Back</a><br/><h3>rspecのdescribeとitを自作する / ついでにGrapeのexposeのソースコードを読む</h3><article class="md-body">
<h1>
<span id="rspecのdescribeとitを自作してみる" class="fragment"></span><a href="#rspec%E3%81%AEdescribe%E3%81%A8it%E3%82%92%E8%87%AA%E4%BD%9C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>rspecのdescribeとitを自作してみる</h1>

<h2>
<span id="読書コード対象者" class="fragment"></span><a href="#%E8%AA%AD%E6%9B%B8%E3%82%B3%E3%83%BC%E3%83%89%E5%AF%BE%E8%B1%A1%E8%80%85"><i class="fa fa-link"></i></a>読書コード対象者</h2>

<p>Rubyのコード少しでも読める方なら最後まで読了できるかと思います。</p>

<ul>
<li>Rubyの引数について詳しくなります。</li>
<li>GrapeというAPIを簡単に作れるOSSのソースコードを少しだけ一緒に読んで行きたいと思うので毎日使っているコードが親近感でます</li>
</ul>

<p>最終的には、下記の文法が何しているかわかります。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="n">describe</span> <span class="s2">"RspecでこちらのコードがRuby内部でどういう文法で動いているか"</span> <span class="k">do</span>

  <span class="nb">puts</span> <span class="s2">"分かるようになります"</span>

<span class="k">end</span>

<span class="k">class</span> <span class="nc">Status</span> <span class="o">&lt;</span> <span class="no">Grape</span><span class="o">::</span><span class="no">Entity</span>
    <span class="c1"># またGrapeのこのあたりのコードにも詳しくなります</span>
    <span class="n">expose</span> <span class="ss">:style</span>
    <span class="n">expose</span> <span class="ss">:html</span><span class="p">,</span> <span class="ss">documentation: </span><span class="p">{</span> <span class="ss">type: </span><span class="no">String</span><span class="p">,</span> <span class="ss">desc: </span><span class="s1">'html'</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
        <span class="n">f</span><span class="p">.</span><span class="nf">body</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>またこの <code>do end</code> や <code>{ }</code> みたいな<code>ブロック</code>と呼ばれるものへの理解が少し広がるかと思います。</p>

<h2>
<span id="背景" class="fragment"></span><a href="#%E8%83%8C%E6%99%AF"><i class="fa fa-link"></i></a>背景</h2>

<p>こんにちは僕です。この話は、Vue.jsからAPIを叩こう思い、Rails側にGrapeによるAPIを作っていたことから始まります。そのときに <code>Grapeエラーでるよ〜〜あああああ〜〜</code> って思いソースコードまで追ってみたのでその時の話を順番にしていきます。（ ドキュメント見てから実装開始しろってツッコミはなしで ）</p>

<h2>
<span id="grapeのコードを追ってみる" class="fragment"></span><a href="#grape%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%BF%BD%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>Grapeのコードを追ってみる</h2>

<h3>
<span id="entityのサンプル" class="fragment"></span><a href="#entity%E3%81%AE%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>Entityのサンプル</h3>

<p><a href="https://github.com/ruby-grape/grape-entity" rel="nofollow noopener" target="_blank">Grape::EntityのGitHub</a></p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="k">class</span> <span class="nc">Status</span> <span class="o">&lt;</span> <span class="no">Grape</span><span class="o">::</span><span class="no">Entity</span>
    <span class="n">expose</span> <span class="ss">:style</span>
    <span class="n">expose</span> <span class="ss">:html</span><span class="p">,</span> <span class="ss">documentation: </span><span class="p">{</span> <span class="ss">type: </span><span class="no">String</span><span class="p">,</span> <span class="ss">desc: </span><span class="s1">'html'</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
        <span class="n">f</span><span class="p">.</span><span class="nf">body</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>と書いておくと</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="n">present</span> <span class="n">s</span><span class="p">,</span> <span class="ss">with: </span><span class="no">Status</span>
</code></pre></div></div>

<p>みたいな感じでJSONの返却をぬるっとやってくれるのがGrapeです。</p>

<p>今回はこの <code>expose</code> の引数に何を渡せばいいのか全くわからなかったので、そのあたりのコードを追っていきます。</p>

<h3>
<span id="rubyの引数の振り返り" class="fragment"></span><a href="#ruby%E3%81%AE%E5%BC%95%E6%95%B0%E3%81%AE%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A"><i class="fa fa-link"></i></a>Rubyの引数の振り返り</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code>
<span class="k">def</span> <span class="nf">x1</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">text</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">x2</span> <span class="n">text</span>
    <span class="nb">puts</span> <span class="n">text</span>
<span class="k">end</span>

<span class="n">x1</span><span class="p">(</span><span class="s2">"it calls x1"</span><span class="p">)</span> <span class="c1"># it calls x1</span>
<span class="n">x2</span> <span class="s2">"it calls x2"</span>  <span class="c1"># it calls x2</span>

</code></pre></div></div>

<p>おもむろにTerminalでirbと打つとRubyが対話モードで使えるので（MacUser）上のコードは適当に自分で流し込んで試してください。！！</p>

<div class="code-frame" data-lang="shell-session"><div class="highlight"><pre><code><span class="gp">$</span><span class="w"> </span>irb
<span class="gp">$</span><span class="w"> </span>irb<span class="o">(</span>main<span class="o">)</span>:001:0&gt;
</code></pre></div></div>

<p><a href="https://camo.qiitausercontent.com/876982e5f3a76c4196709e9487b7c1552dde0648/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f33386235386439382d356331382d376566322d343264642d3438373132353662626135382e706e67" target="_blank" rel="nofollow noopener"><img width="634" alt="スクリーンショット 2018-06-21 0.43.36.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F38b58d98-5c18-7ef2-42dd-4871256bba58.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fe89cf9c4ddd34c666f0ceb15b200683" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/112929/38b58d98-5c18-7ef2-42dd-4871256bba58.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F38b58d98-5c18-7ef2-42dd-4871256bba58.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f5f30adb661e7be21b2d69f902b2f8d9 1x" loading="lazy"></a></p>

<p>こんな感じでRubyは <code>()</code> が省略できたりします。</p>

<p>参考: <a href="http://i.loveruby.net/ja/ruby/codingstyle.html" rel="nofollow noopener" target="_blank">Ruby のコーディングスタイル</a></p>

<h3>
<span id="grapeの-expose-の使い方をもう一度見る" class="fragment"></span><a href="#grape%E3%81%AE-expose-%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9%E3%82%92%E3%82%82%E3%81%86%E4%B8%80%E5%BA%A6%E8%A6%8B%E3%82%8B"><i class="fa fa-link"></i></a>Grapeの <code>expose</code> の使い方をもう一度見る</h3>

<p>前回はRubyの()の省略について学んだので次のコードも理解できるはずです。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="n">expose</span> <span class="ss">:user_name</span>
</code></pre></div></div>

<p>つまり <code>expose</code> はメソッドで、引数に <code>:user_name</code> というシンボルを渡している、という風に見えて来ましたね。（間違ってたら偉い人が教えてくれるのでコメント欄参照！！）</p>

<p>ここまでで、ちょっとRubyに詳しくなった気がします。</p>

<p>なので次は <code>expose</code> というメソッドを見に行きます。</p>

<h3>
<span id="grapeの-expose-のソースコードを見る" class="fragment"></span><a href="#grape%E3%81%AE-expose-%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%A6%8B%E3%82%8B"><i class="fa fa-link"></i></a>Grapeの <code>expose</code> のソースコードを見る</h3>

<p>ソースコードはこちら <a href="https://github.com/ruby-grape/grape-entity/blob/master/lib/grape_entity/entity.rb" rel="nofollow noopener" target="_blank">lib/grape_entity/entity.rb</a></p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">expose</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">merge_options</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="nf">last</span><span class="p">.</span><span class="nf">is_a?</span><span class="p">(</span><span class="no">Hash</span><span class="p">)</span> <span class="p">?</span> <span class="n">args</span><span class="p">.</span><span class="nf">pop</span> <span class="p">:</span> <span class="p">{})</span>

    <span class="k">if</span> <span class="n">args</span><span class="p">.</span><span class="nf">size</span> <span class="o">&gt;</span> <span class="mi">1</span>
        <span class="k">raise</span> <span class="no">ArgumentError</span><span class="p">,</span> <span class="s1">'You may not use the :as option on multi-attribute exposures.'</span> <span class="k">if</span> <span class="n">options</span><span class="p">[</span><span class="ss">:as</span><span class="p">]</span>
        <span class="k">raise</span> <span class="no">ArgumentError</span><span class="p">,</span> <span class="s1">'You may not use the :expose_nil on multi-attribute exposures.'</span> <span class="k">if</span> <span class="n">options</span><span class="p">.</span><span class="nf">key?</span><span class="p">(</span><span class="ss">:expose_nil</span><span class="p">)</span>
        <span class="k">raise</span> <span class="no">ArgumentError</span><span class="p">,</span> <span class="s1">'You may not use block-setting on multi-attribute exposures.'</span> <span class="k">if</span> <span class="nb">block_given?</span>
    <span class="k">end</span>

    <span class="k">raise</span> <span class="no">ArgumentError</span><span class="p">,</span> <span class="s1">'You may not use block-setting when also using format_with'</span> <span class="k">if</span> <span class="nb">block_given?</span> <span class="o">&amp;&amp;</span> <span class="n">options</span><span class="p">[</span><span class="ss">:format_with</span><span class="p">].</span><span class="nf">respond_to?</span><span class="p">(</span><span class="ss">:call</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">block_given?</span>
        <span class="k">if</span> <span class="n">block</span><span class="p">.</span><span class="nf">parameters</span><span class="p">.</span><span class="nf">any?</span>
            <span class="n">options</span><span class="p">[</span><span class="ss">:proc</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span>
        <span class="k">else</span>
            <span class="n">options</span><span class="p">[</span><span class="ss">:nesting</span><span class="p">]</span> <span class="o">=</span> <span class="kp">true</span>
        <span class="k">end</span>
    <span class="k">end</span>

    <span class="vi">@documentation</span> <span class="o">=</span> <span class="kp">nil</span>
    <span class="vi">@nesting_stack</span> <span class="o">||=</span> <span class="p">[]</span>
    <span class="n">args</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">attribute</span><span class="o">|</span> <span class="n">build_exposure_for_attribute</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="vi">@nesting_stack</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">block</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>

<p>20行くらいなのでみんなすぐ理解できますよね（ちなみに私理解できなかったのでこの記事書きながら理解しています）</p>

<h3>
<span id="grapeの-expose-のソースコードを適当に理解する" class="fragment"></span><a href="#grape%E3%81%AE-expose-%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E9%81%A9%E5%BD%93%E3%81%AB%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Grapeの <code>expose</code> のソースコードを適当に理解する</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">expose</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="n">options</span> <span class="o">=</span> <span class="s2">"引数の *args からオプションをいい感じに整形する"</span>

    <span class="k">if</span> <span class="n">args</span><span class="p">.</span><span class="nf">size</span> <span class="o">&gt;</span> <span class="mi">1</span>
        <span class="s2">"問題あったらエラーだす"</span>
    <span class="k">end</span>

    <span class="k">raise</span> <span class="no">ArgumentError</span><span class="p">,</span> <span class="s1">'問題ないよね…？'</span>

    <span class="k">if</span> <span class="nb">block_given?</span>
        <span class="s2">"引数として &amp;block が渡されてるとごにょごにょ"</span>
    <span class="k">end</span>

    <span class="vi">@documentation</span> <span class="o">=</span> <span class="kp">nil</span>
    <span class="vi">@nesting_stack</span> <span class="o">||=</span> <span class="p">[]</span>
    <span class="n">args</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">attribute</span><span class="o">|</span> <span class="s2">"いい感じにゴニョゴニョしてデータ作り出す"</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>

<p>正直なんかよくわからないけど <code>def self.expose(*args, &amp;block)</code> これの <code>*args</code> は <code>引数はたくさん渡せるよ！</code>で、 最後の <code>&amp;block</code> は <code>引数の最後にブロック渡せるぜ！！！！</code> って意味だと思ったらいいと思います。（強引） </p>

<p>※ブロックとは <code>do end</code> とか <code>{}</code> のことで、ブロックが引数として渡されたのを判定するのは Rubyの <code>block_given?</code> というメソッドが使えます。</p>

<h3>
<span id="grapeの-expose-の使い方をもう一度見る3度目" class="fragment"></span><a href="#grape%E3%81%AE-expose-%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9%E3%82%92%E3%82%82%E3%81%86%E4%B8%80%E5%BA%A6%E8%A6%8B%E3%82%8B3%E5%BA%A6%E7%9B%AE"><i class="fa fa-link"></i></a>Grapeの <code>expose</code> の使い方をもう一度見る（3度目）</h3>

<p>なので、こちらももう読めるようになったはずです。。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="n">expose</span> <span class="ss">:html</span><span class="p">,</span> <span class="ss">documentation: </span><span class="p">{</span> <span class="ss">type: </span><span class="no">String</span><span class="p">,</span> <span class="ss">desc: </span><span class="s1">'html'</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
    <span class="n">f</span><span class="p">.</span><span class="nf">body</span>
<span class="k">end</span>
</code></pre></div></div>

<p>exposeというメソッドの引数は</p>

<ol>
<li><code>:html</code></li>
<li><code>documentation: { type: String, desc: 'html' })</code></li>
<li><code>do |f| f.body; end</code></li>
</ol>

<p>の３つで、最後の3つ目はブロック要素として認識されています。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">expose</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">merge_options</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="nf">last</span><span class="p">.</span><span class="nf">is_a?</span><span class="p">(</span><span class="no">Hash</span><span class="p">)</span> <span class="p">?</span> <span class="n">args</span><span class="p">.</span><span class="nf">pop</span> <span class="p">:</span> <span class="p">{})</span>
<span class="k">end</span>
</code></pre></div></div>

<p>そして、もう一度exposeメソッドを見ると、1と2は(*args)に入って、3のブロックは(&amp;block)に入っていくことがわかります。</p>

<p><code>args.last.is_a?(Hash)</code> は <code>*args の最後がハッシュなら</code> という意味ですが、おそらくですが、この <code>*args</code> の最後には <code>documentation</code> のドキュメントをいれないとエラー起きるような気がします（今回はそこは追わない）</p>

<h3>
<span id="ブロックが渡されたか判断する-block" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%8C%E6%B8%A1%E3%81%95%E3%82%8C%E3%81%9F%E3%81%8B%E5%88%A4%E6%96%AD%E3%81%99%E3%82%8B-block"><i class="fa fa-link"></i></a>ブロックが渡されたか判断する (&amp;block)</h3>

<p>Rubyのメソッドに<code>block_given?</code>で渡されたかチェックできます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">expose</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">block_given?</span>
        <span class="s2">"引数として &amp;block が渡されてるとごにょごにょ"</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>なのでexposeには２つの書き方があります。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="k">class</span> <span class="nc">Status</span> <span class="o">&lt;</span> <span class="no">Grape</span><span class="o">::</span><span class="no">Entity</span>
    <span class="n">expose</span> <span class="ss">:style</span>
    <span class="n">expose</span> <span class="ss">:html</span><span class="p">,</span> <span class="ss">documentation: </span><span class="p">{</span> <span class="ss">type: </span><span class="no">String</span><span class="p">,</span> <span class="ss">desc: </span><span class="s1">'html'</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
        <span class="n">f</span><span class="p">.</span><span class="nf">body</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p><code>do; end;</code>をつける書き方、何もつけない書き方、どちらも文法的に正しくなるように <code>expose</code> は設計されています。</p>

<p>普段なんとなく使っているコードをしっかり追ってみましたが、個人的にはRubyをちゃんと知らなくなんとなく使っているのはエンジニアとして成長するためにもだめだなあと思いました。</p>

<p><a href="https://docs.ruby-lang.org/ja/latest/method/Kernel/m/block_given=3f.html" rel="nofollow noopener" target="_blank">block_given? のドキュメント</a></p>

<h2>
<span id="rspecのコードは追わないが作ってみる" class="fragment"></span><a href="#rspec%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AF%E8%BF%BD%E3%82%8F%E3%81%AA%E3%81%84%E3%81%8C%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>Rspecのコードは追わないが作ってみる</h2>

<h3>
<span id="rspec序文" class="fragment"></span><a href="#rspec%E5%BA%8F%E6%96%87"><i class="fa fa-link"></i></a>Rspec序文</h3>

<p>ここまでで <code>expose</code> のコードを読んでrubyの使い方への理解が深まったと思います。</p>

<p>次は本題ですが Rspecの <code>describe</code> を自分で書いてみようと思います。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="n">describe</span> <span class="s2">"xxxをテストする"</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="s2">"これで合ってるかな…"</span>
<span class="k">end</span>
</code></pre></div></div>

<p>ここまで読んだ読者はもうわかると思いますが、<code>describe</code> というメソッドは引数は <code>（text, block）</code> テキストとブロックだと判断がつきます。</p>

<h3>
<span id="rspec作成編" class="fragment"></span><a href="#rspec%E4%BD%9C%E6%88%90%E7%B7%A8"><i class="fa fa-link"></i></a>Rspec作成編</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="c1"># encoding: utf-8</span>

<span class="k">def</span> <span class="nf">describe</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">block_given?</span>
        <span class="n">block</span><span class="p">.</span><span class="nf">call</span>
    <span class="k">else</span>
        <span class="nb">puts</span> <span class="n">msg</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s2">"~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>

<span class="n">describe</span> <span class="s2">"こちらテストですよ！！！！！！"</span>


<span class="nb">puts</span> <span class="s2">"~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>

<span class="n">describe</span> <span class="s2">"こちらテストです"</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="s2">"ブロック渡したらどうなるかテスト"</span>
<span class="k">end</span>

<span class="c1"># 返ってくる値</span>
<span class="c1">#</span>
<span class="c1"># ~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="c1"># こちらテストですよ！！！！！！</span>
<span class="c1"># ~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="c1"># ブロック渡したらどうなるかテスト</span>

</code></pre></div></div>

<p>今回作成した <code>describe</code> はブロックを渡したかどうかで処理を分岐させてみました。</p>

<ol>
<li>
<p>ブロックを渡した場合</p>

<ul>
<li> <code>block_given?</code> が <code>true</code> になる</li>
<li>
<code>block.call</code>を実行させる</li>
</ul>
</li>
<li>
<p>ブロックを渡さない場合</p>

<ul>
<li> ただ第一引数で渡したmsgをputsするだけになります。</li>
</ul>
</li>
</ol>

<p><a href="https://paiza.io/projects/e/KB5pPxfpANaqrggZbqLTLQ" rel="nofollow noopener" target="_blank">Paiza.ioでの動作サンプル</a></p>

<p>ここまで自分で作れるようになったら、Rubyの引数マスターだと思います</p>

<h3>
<span id="blockcall" class="fragment"></span><a href="#blockcall"><i class="fa fa-link"></i></a>block.call</h3>

<p>渡したブロックを実行させられます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><code><span class="n">block</span><span class="p">.</span><span class="nf">call</span>
</code></pre></div></div>

<h3>
<span id="rspecのソースコードについて" class="fragment"></span><a href="#rspec%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>Rspecのソースコードについて</h3>

<p>たぶんレポジトリは<a href="https://github.com/rspec/rspec-rails/" rel="nofollow noopener" target="_blank">こちら</a>ですが <code>describe</code> とかどこで実装されているか正直読んでないです。分かる方は記事を書いてくれると楽しんで読みたいと思うのでコメント欄でお願いします〜〜</p>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>自分が普段使っているソースコードを、気になったところだけでもいいので読んで見る。これだけでもOSS使ってるっぽいし（形から入る人）、ドキュメントにしっかりかかれていないこともなんとなく分かるのがすごくいいですね。（今回は <code>expose</code> の最後の引数はdocumentじゃね？って考えれたこととか）</p>

<p>Ruby詳しいですとは口がさけても言えないので詳しい方PRとかコメント欄でご指導いただけると幸いです。最後まで読んでいただきありがとうございました〜！！</p>
</article></div></div></div></div><footer class="footer"><div class="content has-text-centered"><p>This web site was created by ykhirao using react-static. <a href="https://github.com/ykhirao/ykhirao.github.io" target="_blank" rel="noopener noreferrer">Here</a> <!-- -->is the link to the GitHub repository</p><p>&amp; last uploaded at <!-- -->2022/10/24</p><p>© 2021 ykhirao</p></div></footer></div></div><script type="text/javascript">window.__routeInfo = JSON.parse("{\"template\":\"__react_static_root__/src/components/QiitaPost\",\"sharedHashesByProp\":{},\"data\":{\"post\":{\"rendered_body\":\"\\n<h1>\\n<span id=\\\"rspec\u306Edescribe\u3068it\u3092\u81EA\u4F5C\u3057\u3066\u307F\u308B\\\" class=\\\"fragment\\\"></span><a href=\\\"#rspec%E3%81%AEdescribe%E3%81%A8it%E3%82%92%E8%87%AA%E4%BD%9C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\\\"><i class=\\\"fa fa-link\\\"></i></a>rspec\u306Edescribe\u3068it\u3092\u81EA\u4F5C\u3057\u3066\u307F\u308B</h1>\\n\\n<h2>\\n<span id=\\\"\u8AAD\u66F8\u30B3\u30FC\u30C9\u5BFE\u8C61\u8005\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E8%AA%AD%E6%9B%B8%E3%82%B3%E3%83%BC%E3%83%89%E5%AF%BE%E8%B1%A1%E8%80%85\\\"><i class=\\\"fa fa-link\\\"></i></a>\u8AAD\u66F8\u30B3\u30FC\u30C9\u5BFE\u8C61\u8005</h2>\\n\\n<p>Ruby\u306E\u30B3\u30FC\u30C9\u5C11\u3057\u3067\u3082\u8AAD\u3081\u308B\u65B9\u306A\u3089\u6700\u5F8C\u307E\u3067\u8AAD\u4E86\u3067\u304D\u308B\u304B\u3068\u601D\u3044\u307E\u3059\u3002</p>\\n\\n<ul>\\n<li>Ruby\u306E\u5F15\u6570\u306B\u3064\u3044\u3066\u8A73\u3057\u304F\u306A\u308A\u307E\u3059\u3002</li>\\n<li>Grape\u3068\u3044\u3046API\u3092\u7C21\u5358\u306B\u4F5C\u308C\u308BOSS\u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u5C11\u3057\u3060\u3051\u4E00\u7DD2\u306B\u8AAD\u3093\u3067\u884C\u304D\u305F\u3044\u3068\u601D\u3046\u306E\u3067\u6BCE\u65E5\u4F7F\u3063\u3066\u3044\u308B\u30B3\u30FC\u30C9\u304C\u89AA\u8FD1\u611F\u3067\u307E\u3059</li>\\n</ul>\\n\\n<p>\u6700\u7D42\u7684\u306B\u306F\u3001\u4E0B\u8A18\u306E\u6587\u6CD5\u304C\u4F55\u3057\u3066\u3044\u308B\u304B\u308F\u304B\u308A\u307E\u3059\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"n\\\">describe</span> <span class=\\\"s2\\\">\\\"Rspec\u3067\u3053\u3061\u3089\u306E\u30B3\u30FC\u30C9\u304CRuby\u5185\u90E8\u3067\u3069\u3046\u3044\u3046\u6587\u6CD5\u3067\u52D5\u3044\u3066\u3044\u308B\u304B\\\"</span> <span class=\\\"k\\\">do</span>\\n\\n  <span class=\\\"nb\\\">puts</span> <span class=\\\"s2\\\">\\\"\u5206\u304B\u308B\u3088\u3046\u306B\u306A\u308A\u307E\u3059\\\"</span>\\n\\n<span class=\\\"k\\\">end</span>\\n\\n<span class=\\\"k\\\">class</span> <span class=\\\"nc\\\">Status</span> <span class=\\\"o\\\">&lt;</span> <span class=\\\"no\\\">Grape</span><span class=\\\"o\\\">::</span><span class=\\\"no\\\">Entity</span>\\n    <span class=\\\"c1\\\"># \u307E\u305FGrape\u306E\u3053\u306E\u3042\u305F\u308A\u306E\u30B3\u30FC\u30C9\u306B\u3082\u8A73\u3057\u304F\u306A\u308A\u307E\u3059</span>\\n    <span class=\\\"n\\\">expose</span> <span class=\\\"ss\\\">:style</span>\\n    <span class=\\\"n\\\">expose</span> <span class=\\\"ss\\\">:html</span><span class=\\\"p\\\">,</span> <span class=\\\"ss\\\">documentation: </span><span class=\\\"p\\\">{</span> <span class=\\\"ss\\\">type: </span><span class=\\\"no\\\">String</span><span class=\\\"p\\\">,</span> <span class=\\\"ss\\\">desc: </span><span class=\\\"s1\\\">'html'</span> <span class=\\\"p\\\">}</span> <span class=\\\"k\\\">do</span> <span class=\\\"o\\\">|</span><span class=\\\"n\\\">f</span><span class=\\\"o\\\">|</span>\\n        <span class=\\\"n\\\">f</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">body</span>\\n    <span class=\\\"k\\\">end</span>\\n<span class=\\\"k\\\">end</span>\\n</code></pre></div></div>\\n\\n<p>\u307E\u305F\u3053\u306E <code>do end</code> \u3084 <code>{ }</code> \u307F\u305F\u3044\u306A<code>\u30D6\u30ED\u30C3\u30AF</code>\u3068\u547C\u3070\u308C\u308B\u3082\u306E\u3078\u306E\u7406\u89E3\u304C\u5C11\u3057\u5E83\u304C\u308B\u304B\u3068\u601D\u3044\u307E\u3059\u3002</p>\\n\\n<h2>\\n<span id=\\\"\u80CC\u666F\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E8%83%8C%E6%99%AF\\\"><i class=\\\"fa fa-link\\\"></i></a>\u80CC\u666F</h2>\\n\\n<p>\u3053\u3093\u306B\u3061\u306F\u50D5\u3067\u3059\u3002\u3053\u306E\u8A71\u306F\u3001Vue.js\u304B\u3089API\u3092\u53E9\u3053\u3046\u601D\u3044\u3001Rails\u5074\u306BGrape\u306B\u3088\u308BAPI\u3092\u4F5C\u3063\u3066\u3044\u305F\u3053\u3068\u304B\u3089\u59CB\u307E\u308A\u307E\u3059\u3002\u305D\u306E\u3068\u304D\u306B <code>Grape\u30A8\u30E9\u30FC\u3067\u308B\u3088\u301C\u301C\u3042\u3042\u3042\u3042\u3042\u301C\u301C</code> \u3063\u3066\u601D\u3044\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u307E\u3067\u8FFD\u3063\u3066\u307F\u305F\u306E\u3067\u305D\u306E\u6642\u306E\u8A71\u3092\u9806\u756A\u306B\u3057\u3066\u3044\u304D\u307E\u3059\u3002\uFF08 \u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u898B\u3066\u304B\u3089\u5B9F\u88C5\u958B\u59CB\u3057\u308D\u3063\u3066\u30C4\u30C3\u30B3\u30DF\u306F\u306A\u3057\u3067 \uFF09</p>\\n\\n<h2>\\n<span id=\\\"grape\u306E\u30B3\u30FC\u30C9\u3092\u8FFD\u3063\u3066\u307F\u308B\\\" class=\\\"fragment\\\"></span><a href=\\\"#grape%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%BF%BD%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\\\"><i class=\\\"fa fa-link\\\"></i></a>Grape\u306E\u30B3\u30FC\u30C9\u3092\u8FFD\u3063\u3066\u307F\u308B</h2>\\n\\n<h3>\\n<span id=\\\"entity\u306E\u30B5\u30F3\u30D7\u30EB\\\" class=\\\"fragment\\\"></span><a href=\\\"#entity%E3%81%AE%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB\\\"><i class=\\\"fa fa-link\\\"></i></a>Entity\u306E\u30B5\u30F3\u30D7\u30EB</h3>\\n\\n<p><a href=\\\"https://github.com/ruby-grape/grape-entity\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">Grape::Entity\u306EGitHub</a></p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"k\\\">class</span> <span class=\\\"nc\\\">Status</span> <span class=\\\"o\\\">&lt;</span> <span class=\\\"no\\\">Grape</span><span class=\\\"o\\\">::</span><span class=\\\"no\\\">Entity</span>\\n    <span class=\\\"n\\\">expose</span> <span class=\\\"ss\\\">:style</span>\\n    <span class=\\\"n\\\">expose</span> <span class=\\\"ss\\\">:html</span><span class=\\\"p\\\">,</span> <span class=\\\"ss\\\">documentation: </span><span class=\\\"p\\\">{</span> <span class=\\\"ss\\\">type: </span><span class=\\\"no\\\">String</span><span class=\\\"p\\\">,</span> <span class=\\\"ss\\\">desc: </span><span class=\\\"s1\\\">'html'</span> <span class=\\\"p\\\">}</span> <span class=\\\"k\\\">do</span> <span class=\\\"o\\\">|</span><span class=\\\"n\\\">f</span><span class=\\\"o\\\">|</span>\\n        <span class=\\\"n\\\">f</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">body</span>\\n    <span class=\\\"k\\\">end</span>\\n<span class=\\\"k\\\">end</span>\\n</code></pre></div></div>\\n\\n<p>\u3068\u66F8\u3044\u3066\u304A\u304F\u3068</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"n\\\">present</span> <span class=\\\"n\\\">s</span><span class=\\\"p\\\">,</span> <span class=\\\"ss\\\">with: </span><span class=\\\"no\\\">Status</span>\\n</code></pre></div></div>\\n\\n<p>\u307F\u305F\u3044\u306A\u611F\u3058\u3067JSON\u306E\u8FD4\u5374\u3092\u306C\u308B\u3063\u3068\u3084\u3063\u3066\u304F\u308C\u308B\u306E\u304CGrape\u3067\u3059\u3002</p>\\n\\n<p>\u4ECA\u56DE\u306F\u3053\u306E <code>expose</code> \u306E\u5F15\u6570\u306B\u4F55\u3092\u6E21\u305B\u3070\u3044\u3044\u306E\u304B\u5168\u304F\u308F\u304B\u3089\u306A\u304B\u3063\u305F\u306E\u3067\u3001\u305D\u306E\u3042\u305F\u308A\u306E\u30B3\u30FC\u30C9\u3092\u8FFD\u3063\u3066\u3044\u304D\u307E\u3059\u3002</p>\\n\\n<h3>\\n<span id=\\\"ruby\u306E\u5F15\u6570\u306E\u632F\u308A\u8FD4\u308A\\\" class=\\\"fragment\\\"></span><a href=\\\"#ruby%E3%81%AE%E5%BC%95%E6%95%B0%E3%81%AE%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A\\\"><i class=\\\"fa fa-link\\\"></i></a>Ruby\u306E\u5F15\u6570\u306E\u632F\u308A\u8FD4\u308A</h3>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code>\\n<span class=\\\"k\\\">def</span> <span class=\\\"nf\\\">x1</span><span class=\\\"p\\\">(</span><span class=\\\"n\\\">text</span><span class=\\\"p\\\">)</span>\\n    <span class=\\\"nb\\\">puts</span> <span class=\\\"n\\\">text</span>\\n<span class=\\\"k\\\">end</span>\\n\\n<span class=\\\"k\\\">def</span> <span class=\\\"nf\\\">x2</span> <span class=\\\"n\\\">text</span>\\n    <span class=\\\"nb\\\">puts</span> <span class=\\\"n\\\">text</span>\\n<span class=\\\"k\\\">end</span>\\n\\n<span class=\\\"n\\\">x1</span><span class=\\\"p\\\">(</span><span class=\\\"s2\\\">\\\"it calls x1\\\"</span><span class=\\\"p\\\">)</span> <span class=\\\"c1\\\"># it calls x1</span>\\n<span class=\\\"n\\\">x2</span> <span class=\\\"s2\\\">\\\"it calls x2\\\"</span>  <span class=\\\"c1\\\"># it calls x2</span>\\n\\n</code></pre></div></div>\\n\\n<p>\u304A\u3082\u3080\u308D\u306BTerminal\u3067irb\u3068\u6253\u3064\u3068Ruby\u304C\u5BFE\u8A71\u30E2\u30FC\u30C9\u3067\u4F7F\u3048\u308B\u306E\u3067\uFF08MacUser\uFF09\u4E0A\u306E\u30B3\u30FC\u30C9\u306F\u9069\u5F53\u306B\u81EA\u5206\u3067\u6D41\u3057\u8FBC\u3093\u3067\u8A66\u3057\u3066\u304F\u3060\u3055\u3044\u3002\uFF01\uFF01</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"shell-session\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"gp\\\">$</span><span class=\\\"w\\\"> </span>irb\\n<span class=\\\"gp\\\">$</span><span class=\\\"w\\\"> </span>irb<span class=\\\"o\\\">(</span>main<span class=\\\"o\\\">)</span>:001:0&gt;\\n</code></pre></div></div>\\n\\n<p><a href=\\\"https://camo.qiitausercontent.com/876982e5f3a76c4196709e9487b7c1552dde0648/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f33386235386439382d356331382d376566322d343264642d3438373132353662626135382e706e67\\\" target=\\\"_blank\\\" rel=\\\"nofollow noopener\\\"><img width=\\\"634\\\" alt=\\\"\u30B9\u30AF\u30EA\u30FC\u30F3\u30B7\u30E7\u30C3\u30C8 2018-06-21 0.43.36.png\\\" src=\\\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F38b58d98-5c18-7ef2-42dd-4871256bba58.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fe89cf9c4ddd34c666f0ceb15b200683\\\" data-canonical-src=\\\"https://qiita-image-store.s3.amazonaws.com/0/112929/38b58d98-5c18-7ef2-42dd-4871256bba58.png\\\" srcset=\\\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F38b58d98-5c18-7ef2-42dd-4871256bba58.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f5f30adb661e7be21b2d69f902b2f8d9 1x\\\" loading=\\\"lazy\\\"></a></p>\\n\\n<p>\u3053\u3093\u306A\u611F\u3058\u3067Ruby\u306F <code>()</code> \u304C\u7701\u7565\u3067\u304D\u305F\u308A\u3057\u307E\u3059\u3002</p>\\n\\n<p>\u53C2\u8003: <a href=\\\"http://i.loveruby.net/ja/ruby/codingstyle.html\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">Ruby \u306E\u30B3\u30FC\u30C7\u30A3\u30F3\u30B0\u30B9\u30BF\u30A4\u30EB</a></p>\\n\\n<h3>\\n<span id=\\\"grape\u306E-expose-\u306E\u4F7F\u3044\u65B9\u3092\u3082\u3046\u4E00\u5EA6\u898B\u308B\\\" class=\\\"fragment\\\"></span><a href=\\\"#grape%E3%81%AE-expose-%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9%E3%82%92%E3%82%82%E3%81%86%E4%B8%80%E5%BA%A6%E8%A6%8B%E3%82%8B\\\"><i class=\\\"fa fa-link\\\"></i></a>Grape\u306E <code>expose</code> \u306E\u4F7F\u3044\u65B9\u3092\u3082\u3046\u4E00\u5EA6\u898B\u308B</h3>\\n\\n<p>\u524D\u56DE\u306FRuby\u306E()\u306E\u7701\u7565\u306B\u3064\u3044\u3066\u5B66\u3093\u3060\u306E\u3067\u6B21\u306E\u30B3\u30FC\u30C9\u3082\u7406\u89E3\u3067\u304D\u308B\u306F\u305A\u3067\u3059\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"n\\\">expose</span> <span class=\\\"ss\\\">:user_name</span>\\n</code></pre></div></div>\\n\\n<p>\u3064\u307E\u308A <code>expose</code> \u306F\u30E1\u30BD\u30C3\u30C9\u3067\u3001\u5F15\u6570\u306B <code>:user_name</code> \u3068\u3044\u3046\u30B7\u30F3\u30DC\u30EB\u3092\u6E21\u3057\u3066\u3044\u308B\u3001\u3068\u3044\u3046\u98A8\u306B\u898B\u3048\u3066\u6765\u307E\u3057\u305F\u306D\u3002\uFF08\u9593\u9055\u3063\u3066\u305F\u3089\u5049\u3044\u4EBA\u304C\u6559\u3048\u3066\u304F\u308C\u308B\u306E\u3067\u30B3\u30E1\u30F3\u30C8\u6B04\u53C2\u7167\uFF01\uFF01\uFF09</p>\\n\\n<p>\u3053\u3053\u307E\u3067\u3067\u3001\u3061\u3087\u3063\u3068Ruby\u306B\u8A73\u3057\u304F\u306A\u3063\u305F\u6C17\u304C\u3057\u307E\u3059\u3002</p>\\n\\n<p>\u306A\u306E\u3067\u6B21\u306F <code>expose</code> \u3068\u3044\u3046\u30E1\u30BD\u30C3\u30C9\u3092\u898B\u306B\u884C\u304D\u307E\u3059\u3002</p>\\n\\n<h3>\\n<span id=\\\"grape\u306E-expose-\u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u898B\u308B\\\" class=\\\"fragment\\\"></span><a href=\\\"#grape%E3%81%AE-expose-%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%A6%8B%E3%82%8B\\\"><i class=\\\"fa fa-link\\\"></i></a>Grape\u306E <code>expose</code> \u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u898B\u308B</h3>\\n\\n<p>\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u306F\u3053\u3061\u3089 <a href=\\\"https://github.com/ruby-grape/grape-entity/blob/master/lib/grape_entity/entity.rb\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">lib/grape_entity/entity.rb</a></p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"k\\\">def</span> <span class=\\\"nc\\\">self</span><span class=\\\"o\\\">.</span><span class=\\\"nf\\\">expose</span><span class=\\\"p\\\">(</span><span class=\\\"o\\\">*</span><span class=\\\"n\\\">args</span><span class=\\\"p\\\">,</span> <span class=\\\"o\\\">&amp;</span><span class=\\\"n\\\">block</span><span class=\\\"p\\\">)</span>\\n    <span class=\\\"n\\\">options</span> <span class=\\\"o\\\">=</span> <span class=\\\"n\\\">merge_options</span><span class=\\\"p\\\">(</span><span class=\\\"n\\\">args</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">last</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">is_a?</span><span class=\\\"p\\\">(</span><span class=\\\"no\\\">Hash</span><span class=\\\"p\\\">)</span> <span class=\\\"p\\\">?</span> <span class=\\\"n\\\">args</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">pop</span> <span class=\\\"p\\\">:</span> <span class=\\\"p\\\">{})</span>\\n\\n    <span class=\\\"k\\\">if</span> <span class=\\\"n\\\">args</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">size</span> <span class=\\\"o\\\">&gt;</span> <span class=\\\"mi\\\">1</span>\\n        <span class=\\\"k\\\">raise</span> <span class=\\\"no\\\">ArgumentError</span><span class=\\\"p\\\">,</span> <span class=\\\"s1\\\">'You may not use the :as option on multi-attribute exposures.'</span> <span class=\\\"k\\\">if</span> <span class=\\\"n\\\">options</span><span class=\\\"p\\\">[</span><span class=\\\"ss\\\">:as</span><span class=\\\"p\\\">]</span>\\n        <span class=\\\"k\\\">raise</span> <span class=\\\"no\\\">ArgumentError</span><span class=\\\"p\\\">,</span> <span class=\\\"s1\\\">'You may not use the :expose_nil on multi-attribute exposures.'</span> <span class=\\\"k\\\">if</span> <span class=\\\"n\\\">options</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">key?</span><span class=\\\"p\\\">(</span><span class=\\\"ss\\\">:expose_nil</span><span class=\\\"p\\\">)</span>\\n        <span class=\\\"k\\\">raise</span> <span class=\\\"no\\\">ArgumentError</span><span class=\\\"p\\\">,</span> <span class=\\\"s1\\\">'You may not use block-setting on multi-attribute exposures.'</span> <span class=\\\"k\\\">if</span> <span class=\\\"nb\\\">block_given?</span>\\n    <span class=\\\"k\\\">end</span>\\n\\n    <span class=\\\"k\\\">raise</span> <span class=\\\"no\\\">ArgumentError</span><span class=\\\"p\\\">,</span> <span class=\\\"s1\\\">'You may not use block-setting when also using format_with'</span> <span class=\\\"k\\\">if</span> <span class=\\\"nb\\\">block_given?</span> <span class=\\\"o\\\">&amp;&amp;</span> <span class=\\\"n\\\">options</span><span class=\\\"p\\\">[</span><span class=\\\"ss\\\">:format_with</span><span class=\\\"p\\\">].</span><span class=\\\"nf\\\">respond_to?</span><span class=\\\"p\\\">(</span><span class=\\\"ss\\\">:call</span><span class=\\\"p\\\">)</span>\\n\\n    <span class=\\\"k\\\">if</span> <span class=\\\"nb\\\">block_given?</span>\\n        <span class=\\\"k\\\">if</span> <span class=\\\"n\\\">block</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">parameters</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">any?</span>\\n            <span class=\\\"n\\\">options</span><span class=\\\"p\\\">[</span><span class=\\\"ss\\\">:proc</span><span class=\\\"p\\\">]</span> <span class=\\\"o\\\">=</span> <span class=\\\"n\\\">block</span>\\n        <span class=\\\"k\\\">else</span>\\n            <span class=\\\"n\\\">options</span><span class=\\\"p\\\">[</span><span class=\\\"ss\\\">:nesting</span><span class=\\\"p\\\">]</span> <span class=\\\"o\\\">=</span> <span class=\\\"kp\\\">true</span>\\n        <span class=\\\"k\\\">end</span>\\n    <span class=\\\"k\\\">end</span>\\n\\n    <span class=\\\"vi\\\">@documentation</span> <span class=\\\"o\\\">=</span> <span class=\\\"kp\\\">nil</span>\\n    <span class=\\\"vi\\\">@nesting_stack</span> <span class=\\\"o\\\">||=</span> <span class=\\\"p\\\">[]</span>\\n    <span class=\\\"n\\\">args</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">each</span> <span class=\\\"p\\\">{</span> <span class=\\\"o\\\">|</span><span class=\\\"n\\\">attribute</span><span class=\\\"o\\\">|</span> <span class=\\\"n\\\">build_exposure_for_attribute</span><span class=\\\"p\\\">(</span><span class=\\\"n\\\">attribute</span><span class=\\\"p\\\">,</span> <span class=\\\"vi\\\">@nesting_stack</span><span class=\\\"p\\\">,</span> <span class=\\\"n\\\">options</span><span class=\\\"p\\\">,</span> <span class=\\\"n\\\">block</span><span class=\\\"p\\\">)</span> <span class=\\\"p\\\">}</span>\\n<span class=\\\"k\\\">end</span>\\n</code></pre></div></div>\\n\\n<p>20\u884C\u304F\u3089\u3044\u306A\u306E\u3067\u307F\u3093\u306A\u3059\u3050\u7406\u89E3\u3067\u304D\u307E\u3059\u3088\u306D\uFF08\u3061\u306A\u307F\u306B\u79C1\u7406\u89E3\u3067\u304D\u306A\u304B\u3063\u305F\u306E\u3067\u3053\u306E\u8A18\u4E8B\u66F8\u304D\u306A\u304C\u3089\u7406\u89E3\u3057\u3066\u3044\u307E\u3059\uFF09</p>\\n\\n<h3>\\n<span id=\\\"grape\u306E-expose-\u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u9069\u5F53\u306B\u7406\u89E3\u3059\u308B\\\" class=\\\"fragment\\\"></span><a href=\\\"#grape%E3%81%AE-expose-%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E9%81%A9%E5%BD%93%E3%81%AB%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B\\\"><i class=\\\"fa fa-link\\\"></i></a>Grape\u306E <code>expose</code> \u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u9069\u5F53\u306B\u7406\u89E3\u3059\u308B</h3>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"k\\\">def</span> <span class=\\\"nc\\\">self</span><span class=\\\"o\\\">.</span><span class=\\\"nf\\\">expose</span><span class=\\\"p\\\">(</span><span class=\\\"o\\\">*</span><span class=\\\"n\\\">args</span><span class=\\\"p\\\">,</span> <span class=\\\"o\\\">&amp;</span><span class=\\\"n\\\">block</span><span class=\\\"p\\\">)</span>\\n    <span class=\\\"n\\\">options</span> <span class=\\\"o\\\">=</span> <span class=\\\"s2\\\">\\\"\u5F15\u6570\u306E *args \u304B\u3089\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u3044\u3044\u611F\u3058\u306B\u6574\u5F62\u3059\u308B\\\"</span>\\n\\n    <span class=\\\"k\\\">if</span> <span class=\\\"n\\\">args</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">size</span> <span class=\\\"o\\\">&gt;</span> <span class=\\\"mi\\\">1</span>\\n        <span class=\\\"s2\\\">\\\"\u554F\u984C\u3042\u3063\u305F\u3089\u30A8\u30E9\u30FC\u3060\u3059\\\"</span>\\n    <span class=\\\"k\\\">end</span>\\n\\n    <span class=\\\"k\\\">raise</span> <span class=\\\"no\\\">ArgumentError</span><span class=\\\"p\\\">,</span> <span class=\\\"s1\\\">'\u554F\u984C\u306A\u3044\u3088\u306D\u2026\uFF1F'</span>\\n\\n    <span class=\\\"k\\\">if</span> <span class=\\\"nb\\\">block_given?</span>\\n        <span class=\\\"s2\\\">\\\"\u5F15\u6570\u3068\u3057\u3066 &amp;block \u304C\u6E21\u3055\u308C\u3066\u308B\u3068\u3054\u306B\u3087\u3054\u306B\u3087\\\"</span>\\n    <span class=\\\"k\\\">end</span>\\n\\n    <span class=\\\"vi\\\">@documentation</span> <span class=\\\"o\\\">=</span> <span class=\\\"kp\\\">nil</span>\\n    <span class=\\\"vi\\\">@nesting_stack</span> <span class=\\\"o\\\">||=</span> <span class=\\\"p\\\">[]</span>\\n    <span class=\\\"n\\\">args</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">each</span> <span class=\\\"p\\\">{</span> <span class=\\\"o\\\">|</span><span class=\\\"n\\\">attribute</span><span class=\\\"o\\\">|</span> <span class=\\\"s2\\\">\\\"\u3044\u3044\u611F\u3058\u306B\u30B4\u30CB\u30E7\u30B4\u30CB\u30E7\u3057\u3066\u30C7\u30FC\u30BF\u4F5C\u308A\u51FA\u3059\\\"</span> <span class=\\\"p\\\">}</span>\\n<span class=\\\"k\\\">end</span>\\n</code></pre></div></div>\\n\\n<p>\u6B63\u76F4\u306A\u3093\u304B\u3088\u304F\u308F\u304B\u3089\u306A\u3044\u3051\u3069 <code>def self.expose(*args, &amp;block)</code> \u3053\u308C\u306E <code>*args</code> \u306F <code>\u5F15\u6570\u306F\u305F\u304F\u3055\u3093\u6E21\u305B\u308B\u3088\uFF01</code>\u3067\u3001 \u6700\u5F8C\u306E <code>&amp;block</code> \u306F <code>\u5F15\u6570\u306E\u6700\u5F8C\u306B\u30D6\u30ED\u30C3\u30AF\u6E21\u305B\u308B\u305C\uFF01\uFF01\uFF01\uFF01</code> \u3063\u3066\u610F\u5473\u3060\u3068\u601D\u3063\u305F\u3089\u3044\u3044\u3068\u601D\u3044\u307E\u3059\u3002\uFF08\u5F37\u5F15\uFF09 </p>\\n\\n<p>\u203B\u30D6\u30ED\u30C3\u30AF\u3068\u306F <code>do end</code> \u3068\u304B <code>{}</code> \u306E\u3053\u3068\u3067\u3001\u30D6\u30ED\u30C3\u30AF\u304C\u5F15\u6570\u3068\u3057\u3066\u6E21\u3055\u308C\u305F\u306E\u3092\u5224\u5B9A\u3059\u308B\u306E\u306F Ruby\u306E <code>block_given?</code> \u3068\u3044\u3046\u30E1\u30BD\u30C3\u30C9\u304C\u4F7F\u3048\u307E\u3059\u3002</p>\\n\\n<h3>\\n<span id=\\\"grape\u306E-expose-\u306E\u4F7F\u3044\u65B9\u3092\u3082\u3046\u4E00\u5EA6\u898B\u308B3\u5EA6\u76EE\\\" class=\\\"fragment\\\"></span><a href=\\\"#grape%E3%81%AE-expose-%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9%E3%82%92%E3%82%82%E3%81%86%E4%B8%80%E5%BA%A6%E8%A6%8B%E3%82%8B3%E5%BA%A6%E7%9B%AE\\\"><i class=\\\"fa fa-link\\\"></i></a>Grape\u306E <code>expose</code> \u306E\u4F7F\u3044\u65B9\u3092\u3082\u3046\u4E00\u5EA6\u898B\u308B\uFF083\u5EA6\u76EE\uFF09</h3>\\n\\n<p>\u306A\u306E\u3067\u3001\u3053\u3061\u3089\u3082\u3082\u3046\u8AAD\u3081\u308B\u3088\u3046\u306B\u306A\u3063\u305F\u306F\u305A\u3067\u3059\u3002\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"n\\\">expose</span> <span class=\\\"ss\\\">:html</span><span class=\\\"p\\\">,</span> <span class=\\\"ss\\\">documentation: </span><span class=\\\"p\\\">{</span> <span class=\\\"ss\\\">type: </span><span class=\\\"no\\\">String</span><span class=\\\"p\\\">,</span> <span class=\\\"ss\\\">desc: </span><span class=\\\"s1\\\">'html'</span> <span class=\\\"p\\\">}</span> <span class=\\\"k\\\">do</span> <span class=\\\"o\\\">|</span><span class=\\\"n\\\">f</span><span class=\\\"o\\\">|</span>\\n    <span class=\\\"n\\\">f</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">body</span>\\n<span class=\\\"k\\\">end</span>\\n</code></pre></div></div>\\n\\n<p>expose\u3068\u3044\u3046\u30E1\u30BD\u30C3\u30C9\u306E\u5F15\u6570\u306F</p>\\n\\n<ol>\\n<li><code>:html</code></li>\\n<li><code>documentation: { type: String, desc: 'html' })</code></li>\\n<li><code>do |f| f.body; end</code></li>\\n</ol>\\n\\n<p>\u306E\uFF13\u3064\u3067\u3001\u6700\u5F8C\u306E3\u3064\u76EE\u306F\u30D6\u30ED\u30C3\u30AF\u8981\u7D20\u3068\u3057\u3066\u8A8D\u8B58\u3055\u308C\u3066\u3044\u307E\u3059\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"k\\\">def</span> <span class=\\\"nc\\\">self</span><span class=\\\"o\\\">.</span><span class=\\\"nf\\\">expose</span><span class=\\\"p\\\">(</span><span class=\\\"o\\\">*</span><span class=\\\"n\\\">args</span><span class=\\\"p\\\">,</span> <span class=\\\"o\\\">&amp;</span><span class=\\\"n\\\">block</span><span class=\\\"p\\\">)</span>\\n    <span class=\\\"n\\\">options</span> <span class=\\\"o\\\">=</span> <span class=\\\"n\\\">merge_options</span><span class=\\\"p\\\">(</span><span class=\\\"n\\\">args</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">last</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">is_a?</span><span class=\\\"p\\\">(</span><span class=\\\"no\\\">Hash</span><span class=\\\"p\\\">)</span> <span class=\\\"p\\\">?</span> <span class=\\\"n\\\">args</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">pop</span> <span class=\\\"p\\\">:</span> <span class=\\\"p\\\">{})</span>\\n<span class=\\\"k\\\">end</span>\\n</code></pre></div></div>\\n\\n<p>\u305D\u3057\u3066\u3001\u3082\u3046\u4E00\u5EA6expose\u30E1\u30BD\u30C3\u30C9\u3092\u898B\u308B\u3068\u30011\u30682\u306F(*args)\u306B\u5165\u3063\u3066\u30013\u306E\u30D6\u30ED\u30C3\u30AF\u306F(&amp;block)\u306B\u5165\u3063\u3066\u3044\u304F\u3053\u3068\u304C\u308F\u304B\u308A\u307E\u3059\u3002</p>\\n\\n<p><code>args.last.is_a?(Hash)</code> \u306F <code>*args \u306E\u6700\u5F8C\u304C\u30CF\u30C3\u30B7\u30E5\u306A\u3089</code> \u3068\u3044\u3046\u610F\u5473\u3067\u3059\u304C\u3001\u304A\u305D\u3089\u304F\u3067\u3059\u304C\u3001\u3053\u306E <code>*args</code> \u306E\u6700\u5F8C\u306B\u306F <code>documentation</code> \u306E\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u3044\u308C\u306A\u3044\u3068\u30A8\u30E9\u30FC\u8D77\u304D\u308B\u3088\u3046\u306A\u6C17\u304C\u3057\u307E\u3059\uFF08\u4ECA\u56DE\u306F\u305D\u3053\u306F\u8FFD\u308F\u306A\u3044\uFF09</p>\\n\\n<h3>\\n<span id=\\\"\u30D6\u30ED\u30C3\u30AF\u304C\u6E21\u3055\u308C\u305F\u304B\u5224\u65AD\u3059\u308B-block\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%8C%E6%B8%A1%E3%81%95%E3%82%8C%E3%81%9F%E3%81%8B%E5%88%A4%E6%96%AD%E3%81%99%E3%82%8B-block\\\"><i class=\\\"fa fa-link\\\"></i></a>\u30D6\u30ED\u30C3\u30AF\u304C\u6E21\u3055\u308C\u305F\u304B\u5224\u65AD\u3059\u308B (&amp;block)</h3>\\n\\n<p>Ruby\u306E\u30E1\u30BD\u30C3\u30C9\u306B<code>block_given?</code>\u3067\u6E21\u3055\u308C\u305F\u304B\u30C1\u30A7\u30C3\u30AF\u3067\u304D\u307E\u3059\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"k\\\">def</span> <span class=\\\"nc\\\">self</span><span class=\\\"o\\\">.</span><span class=\\\"nf\\\">expose</span><span class=\\\"p\\\">(</span><span class=\\\"o\\\">*</span><span class=\\\"n\\\">args</span><span class=\\\"p\\\">,</span> <span class=\\\"o\\\">&amp;</span><span class=\\\"n\\\">block</span><span class=\\\"p\\\">)</span>\\n    <span class=\\\"k\\\">if</span> <span class=\\\"nb\\\">block_given?</span>\\n        <span class=\\\"s2\\\">\\\"\u5F15\u6570\u3068\u3057\u3066 &amp;block \u304C\u6E21\u3055\u308C\u3066\u308B\u3068\u3054\u306B\u3087\u3054\u306B\u3087\\\"</span>\\n    <span class=\\\"k\\\">end</span>\\n<span class=\\\"k\\\">end</span>\\n</code></pre></div></div>\\n\\n<p>\u306A\u306E\u3067expose\u306B\u306F\uFF12\u3064\u306E\u66F8\u304D\u65B9\u304C\u3042\u308A\u307E\u3059\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"k\\\">class</span> <span class=\\\"nc\\\">Status</span> <span class=\\\"o\\\">&lt;</span> <span class=\\\"no\\\">Grape</span><span class=\\\"o\\\">::</span><span class=\\\"no\\\">Entity</span>\\n    <span class=\\\"n\\\">expose</span> <span class=\\\"ss\\\">:style</span>\\n    <span class=\\\"n\\\">expose</span> <span class=\\\"ss\\\">:html</span><span class=\\\"p\\\">,</span> <span class=\\\"ss\\\">documentation: </span><span class=\\\"p\\\">{</span> <span class=\\\"ss\\\">type: </span><span class=\\\"no\\\">String</span><span class=\\\"p\\\">,</span> <span class=\\\"ss\\\">desc: </span><span class=\\\"s1\\\">'html'</span> <span class=\\\"p\\\">}</span> <span class=\\\"k\\\">do</span> <span class=\\\"o\\\">|</span><span class=\\\"n\\\">f</span><span class=\\\"o\\\">|</span>\\n        <span class=\\\"n\\\">f</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">body</span>\\n    <span class=\\\"k\\\">end</span>\\n<span class=\\\"k\\\">end</span>\\n</code></pre></div></div>\\n\\n<p><code>do; end;</code>\u3092\u3064\u3051\u308B\u66F8\u304D\u65B9\u3001\u4F55\u3082\u3064\u3051\u306A\u3044\u66F8\u304D\u65B9\u3001\u3069\u3061\u3089\u3082\u6587\u6CD5\u7684\u306B\u6B63\u3057\u304F\u306A\u308B\u3088\u3046\u306B <code>expose</code> \u306F\u8A2D\u8A08\u3055\u308C\u3066\u3044\u307E\u3059\u3002</p>\\n\\n<p>\u666E\u6BB5\u306A\u3093\u3068\u306A\u304F\u4F7F\u3063\u3066\u3044\u308B\u30B3\u30FC\u30C9\u3092\u3057\u3063\u304B\u308A\u8FFD\u3063\u3066\u307F\u307E\u3057\u305F\u304C\u3001\u500B\u4EBA\u7684\u306B\u306FRuby\u3092\u3061\u3083\u3093\u3068\u77E5\u3089\u306A\u304F\u306A\u3093\u3068\u306A\u304F\u4F7F\u3063\u3066\u3044\u308B\u306E\u306F\u30A8\u30F3\u30B8\u30CB\u30A2\u3068\u3057\u3066\u6210\u9577\u3059\u308B\u305F\u3081\u306B\u3082\u3060\u3081\u3060\u306A\u3042\u3068\u601D\u3044\u307E\u3057\u305F\u3002</p>\\n\\n<p><a href=\\\"https://docs.ruby-lang.org/ja/latest/method/Kernel/m/block_given=3f.html\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">block_given? \u306E\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8</a></p>\\n\\n<h2>\\n<span id=\\\"rspec\u306E\u30B3\u30FC\u30C9\u306F\u8FFD\u308F\u306A\u3044\u304C\u4F5C\u3063\u3066\u307F\u308B\\\" class=\\\"fragment\\\"></span><a href=\\\"#rspec%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AF%E8%BF%BD%E3%82%8F%E3%81%AA%E3%81%84%E3%81%8C%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\\\"><i class=\\\"fa fa-link\\\"></i></a>Rspec\u306E\u30B3\u30FC\u30C9\u306F\u8FFD\u308F\u306A\u3044\u304C\u4F5C\u3063\u3066\u307F\u308B</h2>\\n\\n<h3>\\n<span id=\\\"rspec\u5E8F\u6587\\\" class=\\\"fragment\\\"></span><a href=\\\"#rspec%E5%BA%8F%E6%96%87\\\"><i class=\\\"fa fa-link\\\"></i></a>Rspec\u5E8F\u6587</h3>\\n\\n<p>\u3053\u3053\u307E\u3067\u3067 <code>expose</code> \u306E\u30B3\u30FC\u30C9\u3092\u8AAD\u3093\u3067ruby\u306E\u4F7F\u3044\u65B9\u3078\u306E\u7406\u89E3\u304C\u6DF1\u307E\u3063\u305F\u3068\u601D\u3044\u307E\u3059\u3002</p>\\n\\n<p>\u6B21\u306F\u672C\u984C\u3067\u3059\u304C Rspec\u306E <code>describe</code> \u3092\u81EA\u5206\u3067\u66F8\u3044\u3066\u307F\u3088\u3046\u3068\u601D\u3044\u307E\u3059\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"n\\\">describe</span> <span class=\\\"s2\\\">\\\"xxx\u3092\u30C6\u30B9\u30C8\u3059\u308B\\\"</span> <span class=\\\"k\\\">do</span>\\n  <span class=\\\"nb\\\">puts</span> <span class=\\\"s2\\\">\\\"\u3053\u308C\u3067\u5408\u3063\u3066\u308B\u304B\u306A\u2026\\\"</span>\\n<span class=\\\"k\\\">end</span>\\n</code></pre></div></div>\\n\\n<p>\u3053\u3053\u307E\u3067\u8AAD\u3093\u3060\u8AAD\u8005\u306F\u3082\u3046\u308F\u304B\u308B\u3068\u601D\u3044\u307E\u3059\u304C\u3001<code>describe</code> \u3068\u3044\u3046\u30E1\u30BD\u30C3\u30C9\u306F\u5F15\u6570\u306F <code>\uFF08text, block\uFF09</code> \u30C6\u30AD\u30B9\u30C8\u3068\u30D6\u30ED\u30C3\u30AF\u3060\u3068\u5224\u65AD\u304C\u3064\u304D\u307E\u3059\u3002</p>\\n\\n<h3>\\n<span id=\\\"rspec\u4F5C\u6210\u7DE8\\\" class=\\\"fragment\\\"></span><a href=\\\"#rspec%E4%BD%9C%E6%88%90%E7%B7%A8\\\"><i class=\\\"fa fa-link\\\"></i></a>Rspec\u4F5C\u6210\u7DE8</h3>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"c1\\\"># encoding: utf-8</span>\\n\\n<span class=\\\"k\\\">def</span> <span class=\\\"nf\\\">describe</span><span class=\\\"p\\\">(</span><span class=\\\"n\\\">msg</span><span class=\\\"p\\\">,</span> <span class=\\\"o\\\">&amp;</span><span class=\\\"n\\\">block</span><span class=\\\"p\\\">)</span>\\n    <span class=\\\"k\\\">if</span> <span class=\\\"nb\\\">block_given?</span>\\n        <span class=\\\"n\\\">block</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">call</span>\\n    <span class=\\\"k\\\">else</span>\\n        <span class=\\\"nb\\\">puts</span> <span class=\\\"n\\\">msg</span>\\n    <span class=\\\"k\\\">end</span>\\n<span class=\\\"k\\\">end</span>\\n\\n<span class=\\\"nb\\\">puts</span> <span class=\\\"s2\\\">\\\"~~~~~~~~~~~~~~~~~~~~~~~~~~\\\"</span>\\n\\n<span class=\\\"n\\\">describe</span> <span class=\\\"s2\\\">\\\"\u3053\u3061\u3089\u30C6\u30B9\u30C8\u3067\u3059\u3088\uFF01\uFF01\uFF01\uFF01\uFF01\uFF01\\\"</span>\\n\\n\\n<span class=\\\"nb\\\">puts</span> <span class=\\\"s2\\\">\\\"~~~~~~~~~~~~~~~~~~~~~~~~~~\\\"</span>\\n\\n<span class=\\\"n\\\">describe</span> <span class=\\\"s2\\\">\\\"\u3053\u3061\u3089\u30C6\u30B9\u30C8\u3067\u3059\\\"</span> <span class=\\\"k\\\">do</span>\\n  <span class=\\\"nb\\\">puts</span> <span class=\\\"s2\\\">\\\"\u30D6\u30ED\u30C3\u30AF\u6E21\u3057\u305F\u3089\u3069\u3046\u306A\u308B\u304B\u30C6\u30B9\u30C8\\\"</span>\\n<span class=\\\"k\\\">end</span>\\n\\n<span class=\\\"c1\\\"># \u8FD4\u3063\u3066\u304F\u308B\u5024</span>\\n<span class=\\\"c1\\\">#</span>\\n<span class=\\\"c1\\\"># ~~~~~~~~~~~~~~~~~~~~~~~~~~</span>\\n<span class=\\\"c1\\\"># \u3053\u3061\u3089\u30C6\u30B9\u30C8\u3067\u3059\u3088\uFF01\uFF01\uFF01\uFF01\uFF01\uFF01</span>\\n<span class=\\\"c1\\\"># ~~~~~~~~~~~~~~~~~~~~~~~~~~</span>\\n<span class=\\\"c1\\\"># \u30D6\u30ED\u30C3\u30AF\u6E21\u3057\u305F\u3089\u3069\u3046\u306A\u308B\u304B\u30C6\u30B9\u30C8</span>\\n\\n</code></pre></div></div>\\n\\n<p>\u4ECA\u56DE\u4F5C\u6210\u3057\u305F <code>describe</code> \u306F\u30D6\u30ED\u30C3\u30AF\u3092\u6E21\u3057\u305F\u304B\u3069\u3046\u304B\u3067\u51E6\u7406\u3092\u5206\u5C90\u3055\u305B\u3066\u307F\u307E\u3057\u305F\u3002</p>\\n\\n<ol>\\n<li>\\n<p>\u30D6\u30ED\u30C3\u30AF\u3092\u6E21\u3057\u305F\u5834\u5408</p>\\n\\n<ul>\\n<li> <code>block_given?</code> \u304C <code>true</code> \u306B\u306A\u308B</li>\\n<li>\\n<code>block.call</code>\u3092\u5B9F\u884C\u3055\u305B\u308B</li>\\n</ul>\\n</li>\\n<li>\\n<p>\u30D6\u30ED\u30C3\u30AF\u3092\u6E21\u3055\u306A\u3044\u5834\u5408</p>\\n\\n<ul>\\n<li> \u305F\u3060\u7B2C\u4E00\u5F15\u6570\u3067\u6E21\u3057\u305Fmsg\u3092puts\u3059\u308B\u3060\u3051\u306B\u306A\u308A\u307E\u3059\u3002</li>\\n</ul>\\n</li>\\n</ol>\\n\\n<p><a href=\\\"https://paiza.io/projects/e/KB5pPxfpANaqrggZbqLTLQ\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">Paiza.io\u3067\u306E\u52D5\u4F5C\u30B5\u30F3\u30D7\u30EB</a></p>\\n\\n<p>\u3053\u3053\u307E\u3067\u81EA\u5206\u3067\u4F5C\u308C\u308B\u3088\u3046\u306B\u306A\u3063\u305F\u3089\u3001Ruby\u306E\u5F15\u6570\u30DE\u30B9\u30BF\u30FC\u3060\u3068\u601D\u3044\u307E\u3059</p>\\n\\n<h3>\\n<span id=\\\"blockcall\\\" class=\\\"fragment\\\"></span><a href=\\\"#blockcall\\\"><i class=\\\"fa fa-link\\\"></i></a>block.call</h3>\\n\\n<p>\u6E21\u3057\u305F\u30D6\u30ED\u30C3\u30AF\u3092\u5B9F\u884C\u3055\u305B\u3089\u308C\u307E\u3059\u3002</p>\\n\\n<div class=\\\"code-frame\\\" data-lang=\\\"ruby\\\"><div class=\\\"highlight\\\"><pre><code><span class=\\\"n\\\">block</span><span class=\\\"p\\\">.</span><span class=\\\"nf\\\">call</span>\\n</code></pre></div></div>\\n\\n<h3>\\n<span id=\\\"rspec\u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u306B\u3064\u3044\u3066\\\" class=\\\"fragment\\\"></span><a href=\\\"#rspec%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\\\"><i class=\\\"fa fa-link\\\"></i></a>Rspec\u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u306B\u3064\u3044\u3066</h3>\\n\\n<p>\u305F\u3076\u3093\u30EC\u30DD\u30B8\u30C8\u30EA\u306F<a href=\\\"https://github.com/rspec/rspec-rails/\\\" rel=\\\"nofollow noopener\\\" target=\\\"_blank\\\">\u3053\u3061\u3089</a>\u3067\u3059\u304C <code>describe</code> \u3068\u304B\u3069\u3053\u3067\u5B9F\u88C5\u3055\u308C\u3066\u3044\u308B\u304B\u6B63\u76F4\u8AAD\u3093\u3067\u306A\u3044\u3067\u3059\u3002\u5206\u304B\u308B\u65B9\u306F\u8A18\u4E8B\u3092\u66F8\u3044\u3066\u304F\u308C\u308B\u3068\u697D\u3057\u3093\u3067\u8AAD\u307F\u305F\u3044\u3068\u601D\u3046\u306E\u3067\u30B3\u30E1\u30F3\u30C8\u6B04\u3067\u304A\u9858\u3044\u3057\u307E\u3059\u301C\u301C</p>\\n\\n<h2>\\n<span id=\\\"\u6700\u5F8C\u306B\\\" class=\\\"fragment\\\"></span><a href=\\\"#%E6%9C%80%E5%BE%8C%E3%81%AB\\\"><i class=\\\"fa fa-link\\\"></i></a>\u6700\u5F8C\u306B</h2>\\n\\n<p>\u81EA\u5206\u304C\u666E\u6BB5\u4F7F\u3063\u3066\u3044\u308B\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u3001\u6C17\u306B\u306A\u3063\u305F\u3068\u3053\u308D\u3060\u3051\u3067\u3082\u3044\u3044\u306E\u3067\u8AAD\u3093\u3067\u898B\u308B\u3002\u3053\u308C\u3060\u3051\u3067\u3082OSS\u4F7F\u3063\u3066\u308B\u3063\u307D\u3044\u3057\uFF08\u5F62\u304B\u3089\u5165\u308B\u4EBA\uFF09\u3001\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306B\u3057\u3063\u304B\u308A\u304B\u304B\u308C\u3066\u3044\u306A\u3044\u3053\u3068\u3082\u306A\u3093\u3068\u306A\u304F\u5206\u304B\u308B\u306E\u304C\u3059\u3054\u304F\u3044\u3044\u3067\u3059\u306D\u3002\uFF08\u4ECA\u56DE\u306F <code>expose</code> \u306E\u6700\u5F8C\u306E\u5F15\u6570\u306Fdocument\u3058\u3083\u306D\uFF1F\u3063\u3066\u8003\u3048\u308C\u305F\u3053\u3068\u3068\u304B\uFF09</p>\\n\\n<p>Ruby\u8A73\u3057\u3044\u3067\u3059\u3068\u306F\u53E3\u304C\u3055\u3051\u3066\u3082\u8A00\u3048\u306A\u3044\u306E\u3067\u8A73\u3057\u3044\u65B9PR\u3068\u304B\u30B3\u30E1\u30F3\u30C8\u6B04\u3067\u3054\u6307\u5C0E\u3044\u305F\u3060\u3051\u308B\u3068\u5E78\u3044\u3067\u3059\u3002\u6700\u5F8C\u307E\u3067\u8AAD\u3093\u3067\u3044\u305F\u3060\u304D\u3042\u308A\u304C\u3068\u3046\u3054\u3056\u3044\u307E\u3057\u305F\u301C\uFF01\uFF01</p>\\n\",\"body\":\"# rspec\u306Edescribe\u3068it\u3092\u81EA\u4F5C\u3057\u3066\u307F\u308B\\n\\n## \u8AAD\u66F8\u30B3\u30FC\u30C9\u5BFE\u8C61\u8005\\n\\nRuby\u306E\u30B3\u30FC\u30C9\u5C11\u3057\u3067\u3082\u8AAD\u3081\u308B\u65B9\u306A\u3089\u6700\u5F8C\u307E\u3067\u8AAD\u4E86\u3067\u304D\u308B\u304B\u3068\u601D\u3044\u307E\u3059\u3002\\n\\n- Ruby\u306E\u5F15\u6570\u306B\u3064\u3044\u3066\u8A73\u3057\u304F\u306A\u308A\u307E\u3059\u3002\\n- Grape\u3068\u3044\u3046API\u3092\u7C21\u5358\u306B\u4F5C\u308C\u308BOSS\u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u5C11\u3057\u3060\u3051\u4E00\u7DD2\u306B\u8AAD\u3093\u3067\u884C\u304D\u305F\u3044\u3068\u601D\u3046\u306E\u3067\u6BCE\u65E5\u4F7F\u3063\u3066\u3044\u308B\u30B3\u30FC\u30C9\u304C\u89AA\u8FD1\u611F\u3067\u307E\u3059\\n\\n\u6700\u7D42\u7684\u306B\u306F\u3001\u4E0B\u8A18\u306E\u6587\u6CD5\u304C\u4F55\u3057\u3066\u3044\u308B\u304B\u308F\u304B\u308A\u307E\u3059\u3002\\n\\n```ruby\\ndescribe \\\"Rspec\u3067\u3053\u3061\u3089\u306E\u30B3\u30FC\u30C9\u304CRuby\u5185\u90E8\u3067\u3069\u3046\u3044\u3046\u6587\u6CD5\u3067\u52D5\u3044\u3066\u3044\u308B\u304B\\\" do\\n\\n  puts \\\"\u5206\u304B\u308B\u3088\u3046\u306B\u306A\u308A\u307E\u3059\\\"\\n\\nend\\n\\nclass Status < Grape::Entity\\n    # \u307E\u305FGrape\u306E\u3053\u306E\u3042\u305F\u308A\u306E\u30B3\u30FC\u30C9\u306B\u3082\u8A73\u3057\u304F\u306A\u308A\u307E\u3059\\n    expose :style\\n    expose :html, documentation: { type: String, desc: 'html' } do |f|\\n        f.body\\n    end\\nend\\n```\\n\\n\u307E\u305F\u3053\u306E `do end` \u3084 `{ }` \u307F\u305F\u3044\u306A`\u30D6\u30ED\u30C3\u30AF`\u3068\u547C\u3070\u308C\u308B\u3082\u306E\u3078\u306E\u7406\u89E3\u304C\u5C11\u3057\u5E83\u304C\u308B\u304B\u3068\u601D\u3044\u307E\u3059\u3002\\n\\n## \u80CC\u666F\\n\\n\u3053\u3093\u306B\u3061\u306F\u50D5\u3067\u3059\u3002\u3053\u306E\u8A71\u306F\u3001Vue.js\u304B\u3089API\u3092\u53E9\u3053\u3046\u601D\u3044\u3001Rails\u5074\u306BGrape\u306B\u3088\u308BAPI\u3092\u4F5C\u3063\u3066\u3044\u305F\u3053\u3068\u304B\u3089\u59CB\u307E\u308A\u307E\u3059\u3002\u305D\u306E\u3068\u304D\u306B `Grape\u30A8\u30E9\u30FC\u3067\u308B\u3088\u301C\u301C\u3042\u3042\u3042\u3042\u3042\u301C\u301C` \u3063\u3066\u601D\u3044\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u307E\u3067\u8FFD\u3063\u3066\u307F\u305F\u306E\u3067\u305D\u306E\u6642\u306E\u8A71\u3092\u9806\u756A\u306B\u3057\u3066\u3044\u304D\u307E\u3059\u3002\uFF08 \u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u898B\u3066\u304B\u3089\u5B9F\u88C5\u958B\u59CB\u3057\u308D\u3063\u3066\u30C4\u30C3\u30B3\u30DF\u306F\u306A\u3057\u3067 \uFF09\\n\\n## Grape\u306E\u30B3\u30FC\u30C9\u3092\u8FFD\u3063\u3066\u307F\u308B\\n\\n### Entity\u306E\u30B5\u30F3\u30D7\u30EB\\n\\n[Grape::Entity\u306EGitHub](https://github.com/ruby-grape/grape-entity)\\n\\n```ruby\\nclass Status < Grape::Entity\\n    expose :style\\n    expose :html, documentation: { type: String, desc: 'html' } do |f|\\n        f.body\\n    end\\nend\\n```\\n\\n\u3068\u66F8\u3044\u3066\u304A\u304F\u3068\\n\\n```ruby\\npresent s, with: Status\\n```\\n\\n\u307F\u305F\u3044\u306A\u611F\u3058\u3067JSON\u306E\u8FD4\u5374\u3092\u306C\u308B\u3063\u3068\u3084\u3063\u3066\u304F\u308C\u308B\u306E\u304CGrape\u3067\u3059\u3002\\n\\n\u4ECA\u56DE\u306F\u3053\u306E `expose` \u306E\u5F15\u6570\u306B\u4F55\u3092\u6E21\u305B\u3070\u3044\u3044\u306E\u304B\u5168\u304F\u308F\u304B\u3089\u306A\u304B\u3063\u305F\u306E\u3067\u3001\u305D\u306E\u3042\u305F\u308A\u306E\u30B3\u30FC\u30C9\u3092\u8FFD\u3063\u3066\u3044\u304D\u307E\u3059\u3002\\n\\n### Ruby\u306E\u5F15\u6570\u306E\u632F\u308A\u8FD4\u308A\\n\\n```ruby\\n\\ndef x1(text)\\n    puts text\\nend\\n\\ndef x2 text\\n    puts text\\nend\\n\\nx1(\\\"it calls x1\\\") # it calls x1\\nx2 \\\"it calls x2\\\"  # it calls x2\\n\\n```\\n\\n\u304A\u3082\u3080\u308D\u306BTerminal\u3067irb\u3068\u6253\u3064\u3068Ruby\u304C\u5BFE\u8A71\u30E2\u30FC\u30C9\u3067\u4F7F\u3048\u308B\u306E\u3067\uFF08MacUser\uFF09\u4E0A\u306E\u30B3\u30FC\u30C9\u306F\u9069\u5F53\u306B\u81EA\u5206\u3067\u6D41\u3057\u8FBC\u3093\u3067\u8A66\u3057\u3066\u304F\u3060\u3055\u3044\u3002\uFF01\uFF01\\n\\n```shell-session\\n$ irb\\n$ irb(main):001:0>\\n```\\n\\n<img width=\\\"634\\\" alt=\\\"\u30B9\u30AF\u30EA\u30FC\u30F3\u30B7\u30E7\u30C3\u30C8 2018-06-21 0.43.36.png\\\" src=\\\"https://qiita-image-store.s3.amazonaws.com/0/112929/38b58d98-5c18-7ef2-42dd-4871256bba58.png\\\">\\n\\n\u3053\u3093\u306A\u611F\u3058\u3067Ruby\u306F `()` \u304C\u7701\u7565\u3067\u304D\u305F\u308A\u3057\u307E\u3059\u3002\\n\\n\u53C2\u8003: [Ruby \u306E\u30B3\u30FC\u30C7\u30A3\u30F3\u30B0\u30B9\u30BF\u30A4\u30EB](http://i.loveruby.net/ja/ruby/codingstyle.html)\\n\\n### Grape\u306E `expose` \u306E\u4F7F\u3044\u65B9\u3092\u3082\u3046\u4E00\u5EA6\u898B\u308B\\n\\n\u524D\u56DE\u306FRuby\u306E()\u306E\u7701\u7565\u306B\u3064\u3044\u3066\u5B66\u3093\u3060\u306E\u3067\u6B21\u306E\u30B3\u30FC\u30C9\u3082\u7406\u89E3\u3067\u304D\u308B\u306F\u305A\u3067\u3059\u3002\\n\\n```ruby\\nexpose :user_name\\n```\\n\\n\u3064\u307E\u308A `expose` \u306F\u30E1\u30BD\u30C3\u30C9\u3067\u3001\u5F15\u6570\u306B `:user_name` \u3068\u3044\u3046\u30B7\u30F3\u30DC\u30EB\u3092\u6E21\u3057\u3066\u3044\u308B\u3001\u3068\u3044\u3046\u98A8\u306B\u898B\u3048\u3066\u6765\u307E\u3057\u305F\u306D\u3002\uFF08\u9593\u9055\u3063\u3066\u305F\u3089\u5049\u3044\u4EBA\u304C\u6559\u3048\u3066\u304F\u308C\u308B\u306E\u3067\u30B3\u30E1\u30F3\u30C8\u6B04\u53C2\u7167\uFF01\uFF01\uFF09\\n\\n\u3053\u3053\u307E\u3067\u3067\u3001\u3061\u3087\u3063\u3068Ruby\u306B\u8A73\u3057\u304F\u306A\u3063\u305F\u6C17\u304C\u3057\u307E\u3059\u3002\\n\\n\u306A\u306E\u3067\u6B21\u306F `expose` \u3068\u3044\u3046\u30E1\u30BD\u30C3\u30C9\u3092\u898B\u306B\u884C\u304D\u307E\u3059\u3002\\n\\n### Grape\u306E `expose` \u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u898B\u308B\\n\\n\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u306F\u3053\u3061\u3089 [lib/grape_entity/entity.rb](https://github.com/ruby-grape/grape-entity/blob/master/lib/grape_entity/entity.rb)\\n\\n```ruby\\ndef self.expose(*args, &block)\\n    options = merge_options(args.last.is_a?(Hash) ? args.pop : {})\\n\\n    if args.size > 1\\n        raise ArgumentError, 'You may not use the :as option on multi-attribute exposures.' if options[:as]\\n        raise ArgumentError, 'You may not use the :expose_nil on multi-attribute exposures.' if options.key?(:expose_nil)\\n        raise ArgumentError, 'You may not use block-setting on multi-attribute exposures.' if block_given?\\n    end\\n\\n    raise ArgumentError, 'You may not use block-setting when also using format_with' if block_given? && options[:format_with].respond_to?(:call)\\n\\n    if block_given?\\n        if block.parameters.any?\\n            options[:proc] = block\\n        else\\n            options[:nesting] = true\\n        end\\n    end\\n\\n    @documentation = nil\\n    @nesting_stack ||= []\\n    args.each { |attribute| build_exposure_for_attribute(attribute, @nesting_stack, options, block) }\\nend\\n```\\n\\n20\u884C\u304F\u3089\u3044\u306A\u306E\u3067\u307F\u3093\u306A\u3059\u3050\u7406\u89E3\u3067\u304D\u307E\u3059\u3088\u306D\uFF08\u3061\u306A\u307F\u306B\u79C1\u7406\u89E3\u3067\u304D\u306A\u304B\u3063\u305F\u306E\u3067\u3053\u306E\u8A18\u4E8B\u66F8\u304D\u306A\u304C\u3089\u7406\u89E3\u3057\u3066\u3044\u307E\u3059\uFF09\\n\\n### Grape\u306E `expose` \u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u9069\u5F53\u306B\u7406\u89E3\u3059\u308B\\n\\n```ruby\\ndef self.expose(*args, &block)\\n    options = \\\"\u5F15\u6570\u306E *args \u304B\u3089\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u3044\u3044\u611F\u3058\u306B\u6574\u5F62\u3059\u308B\\\"\\n\\n    if args.size > 1\\n        \\\"\u554F\u984C\u3042\u3063\u305F\u3089\u30A8\u30E9\u30FC\u3060\u3059\\\"\\n    end\\n\\n    raise ArgumentError, '\u554F\u984C\u306A\u3044\u3088\u306D\u2026\uFF1F'\\n\\n    if block_given?\\n        \\\"\u5F15\u6570\u3068\u3057\u3066 &block \u304C\u6E21\u3055\u308C\u3066\u308B\u3068\u3054\u306B\u3087\u3054\u306B\u3087\\\"\\n    end\\n\\n    @documentation = nil\\n    @nesting_stack ||= []\\n    args.each { |attribute| \\\"\u3044\u3044\u611F\u3058\u306B\u30B4\u30CB\u30E7\u30B4\u30CB\u30E7\u3057\u3066\u30C7\u30FC\u30BF\u4F5C\u308A\u51FA\u3059\\\" }\\nend\\n```\\n\\n\u6B63\u76F4\u306A\u3093\u304B\u3088\u304F\u308F\u304B\u3089\u306A\u3044\u3051\u3069 `def self.expose(*args, &block)` \u3053\u308C\u306E `*args` \u306F `\u5F15\u6570\u306F\u305F\u304F\u3055\u3093\u6E21\u305B\u308B\u3088\uFF01`\u3067\u3001 \u6700\u5F8C\u306E `&block` \u306F `\u5F15\u6570\u306E\u6700\u5F8C\u306B\u30D6\u30ED\u30C3\u30AF\u6E21\u305B\u308B\u305C\uFF01\uFF01\uFF01\uFF01` \u3063\u3066\u610F\u5473\u3060\u3068\u601D\u3063\u305F\u3089\u3044\u3044\u3068\u601D\u3044\u307E\u3059\u3002\uFF08\u5F37\u5F15\uFF09 \\n\\n\u203B\u30D6\u30ED\u30C3\u30AF\u3068\u306F `do end` \u3068\u304B `{}` \u306E\u3053\u3068\u3067\u3001\u30D6\u30ED\u30C3\u30AF\u304C\u5F15\u6570\u3068\u3057\u3066\u6E21\u3055\u308C\u305F\u306E\u3092\u5224\u5B9A\u3059\u308B\u306E\u306F Ruby\u306E `block_given?` \u3068\u3044\u3046\u30E1\u30BD\u30C3\u30C9\u304C\u4F7F\u3048\u307E\u3059\u3002\\n\\n### Grape\u306E `expose` \u306E\u4F7F\u3044\u65B9\u3092\u3082\u3046\u4E00\u5EA6\u898B\u308B\uFF083\u5EA6\u76EE\uFF09\\n\\n\u306A\u306E\u3067\u3001\u3053\u3061\u3089\u3082\u3082\u3046\u8AAD\u3081\u308B\u3088\u3046\u306B\u306A\u3063\u305F\u306F\u305A\u3067\u3059\u3002\u3002\\n\\n```ruby\\nexpose :html, documentation: { type: String, desc: 'html' } do |f|\\n    f.body\\nend\\n```\\n\\nexpose\u3068\u3044\u3046\u30E1\u30BD\u30C3\u30C9\u306E\u5F15\u6570\u306F\\n\\n1. `:html`\\n2. `documentation: { type: String, desc: 'html' })`\\n3. `do |f| f.body; end`\\n\\n\u306E\uFF13\u3064\u3067\u3001\u6700\u5F8C\u306E3\u3064\u76EE\u306F\u30D6\u30ED\u30C3\u30AF\u8981\u7D20\u3068\u3057\u3066\u8A8D\u8B58\u3055\u308C\u3066\u3044\u307E\u3059\u3002\\n\\n\\n```ruby\\ndef self.expose(*args, &block)\\n    options = merge_options(args.last.is_a?(Hash) ? args.pop : {})\\nend\\n```\\n\\n\u305D\u3057\u3066\u3001\u3082\u3046\u4E00\u5EA6expose\u30E1\u30BD\u30C3\u30C9\u3092\u898B\u308B\u3068\u30011\u30682\u306F(*args)\u306B\u5165\u3063\u3066\u30013\u306E\u30D6\u30ED\u30C3\u30AF\u306F(&block)\u306B\u5165\u3063\u3066\u3044\u304F\u3053\u3068\u304C\u308F\u304B\u308A\u307E\u3059\u3002\\n\\n`args.last.is_a?(Hash)` \u306F `*args \u306E\u6700\u5F8C\u304C\u30CF\u30C3\u30B7\u30E5\u306A\u3089` \u3068\u3044\u3046\u610F\u5473\u3067\u3059\u304C\u3001\u304A\u305D\u3089\u304F\u3067\u3059\u304C\u3001\u3053\u306E `*args` \u306E\u6700\u5F8C\u306B\u306F `documentation` \u306E\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u3044\u308C\u306A\u3044\u3068\u30A8\u30E9\u30FC\u8D77\u304D\u308B\u3088\u3046\u306A\u6C17\u304C\u3057\u307E\u3059\uFF08\u4ECA\u56DE\u306F\u305D\u3053\u306F\u8FFD\u308F\u306A\u3044\uFF09\\n\\n### \u30D6\u30ED\u30C3\u30AF\u304C\u6E21\u3055\u308C\u305F\u304B\u5224\u65AD\u3059\u308B (&block)\\n\\nRuby\u306E\u30E1\u30BD\u30C3\u30C9\u306B`block_given?`\u3067\u6E21\u3055\u308C\u305F\u304B\u30C1\u30A7\u30C3\u30AF\u3067\u304D\u307E\u3059\u3002\\n\\n```ruby\\ndef self.expose(*args, &block)\\n    if block_given?\\n        \\\"\u5F15\u6570\u3068\u3057\u3066 &block \u304C\u6E21\u3055\u308C\u3066\u308B\u3068\u3054\u306B\u3087\u3054\u306B\u3087\\\"\\n    end\\nend\\n```\\n\\n\u306A\u306E\u3067expose\u306B\u306F\uFF12\u3064\u306E\u66F8\u304D\u65B9\u304C\u3042\u308A\u307E\u3059\u3002\\n\\n```ruby\\nclass Status < Grape::Entity\\n    expose :style\\n    expose :html, documentation: { type: String, desc: 'html' } do |f|\\n        f.body\\n    end\\nend\\n```\\n\\n`do; end;`\u3092\u3064\u3051\u308B\u66F8\u304D\u65B9\u3001\u4F55\u3082\u3064\u3051\u306A\u3044\u66F8\u304D\u65B9\u3001\u3069\u3061\u3089\u3082\u6587\u6CD5\u7684\u306B\u6B63\u3057\u304F\u306A\u308B\u3088\u3046\u306B `expose` \u306F\u8A2D\u8A08\u3055\u308C\u3066\u3044\u307E\u3059\u3002\\n\\n\u666E\u6BB5\u306A\u3093\u3068\u306A\u304F\u4F7F\u3063\u3066\u3044\u308B\u30B3\u30FC\u30C9\u3092\u3057\u3063\u304B\u308A\u8FFD\u3063\u3066\u307F\u307E\u3057\u305F\u304C\u3001\u500B\u4EBA\u7684\u306B\u306FRuby\u3092\u3061\u3083\u3093\u3068\u77E5\u3089\u306A\u304F\u306A\u3093\u3068\u306A\u304F\u4F7F\u3063\u3066\u3044\u308B\u306E\u306F\u30A8\u30F3\u30B8\u30CB\u30A2\u3068\u3057\u3066\u6210\u9577\u3059\u308B\u305F\u3081\u306B\u3082\u3060\u3081\u3060\u306A\u3042\u3068\u601D\u3044\u307E\u3057\u305F\u3002\\n\\n[block_given? \u306E\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8](https://docs.ruby-lang.org/ja/latest/method/Kernel/m/block_given=3f.html)\\n\\n\\n## Rspec\u306E\u30B3\u30FC\u30C9\u306F\u8FFD\u308F\u306A\u3044\u304C\u4F5C\u3063\u3066\u307F\u308B\\n\\n### Rspec\u5E8F\u6587\\n\\n\u3053\u3053\u307E\u3067\u3067 `expose` \u306E\u30B3\u30FC\u30C9\u3092\u8AAD\u3093\u3067ruby\u306E\u4F7F\u3044\u65B9\u3078\u306E\u7406\u89E3\u304C\u6DF1\u307E\u3063\u305F\u3068\u601D\u3044\u307E\u3059\u3002\\n\\n\u6B21\u306F\u672C\u984C\u3067\u3059\u304C Rspec\u306E `describe` \u3092\u81EA\u5206\u3067\u66F8\u3044\u3066\u307F\u3088\u3046\u3068\u601D\u3044\u307E\u3059\u3002\\n\\n```ruby\\ndescribe \\\"xxx\u3092\u30C6\u30B9\u30C8\u3059\u308B\\\" do\\n  puts \\\"\u3053\u308C\u3067\u5408\u3063\u3066\u308B\u304B\u306A\u2026\\\"\\nend\\n```\\n\\n\u3053\u3053\u307E\u3067\u8AAD\u3093\u3060\u8AAD\u8005\u306F\u3082\u3046\u308F\u304B\u308B\u3068\u601D\u3044\u307E\u3059\u304C\u3001`describe` \u3068\u3044\u3046\u30E1\u30BD\u30C3\u30C9\u306F\u5F15\u6570\u306F `\uFF08text, block\uFF09` \u30C6\u30AD\u30B9\u30C8\u3068\u30D6\u30ED\u30C3\u30AF\u3060\u3068\u5224\u65AD\u304C\u3064\u304D\u307E\u3059\u3002\\n\\n### Rspec\u4F5C\u6210\u7DE8\\n\\n```ruby\\n# encoding: utf-8\\n\\ndef describe(msg, &block)\\n    if block_given?\\n        block.call\\n    else\\n        puts msg\\n    end\\nend\\n\\nputs \\\"~~~~~~~~~~~~~~~~~~~~~~~~~~\\\"\\n\\ndescribe \\\"\u3053\u3061\u3089\u30C6\u30B9\u30C8\u3067\u3059\u3088\uFF01\uFF01\uFF01\uFF01\uFF01\uFF01\\\"\\n\\n\\nputs \\\"~~~~~~~~~~~~~~~~~~~~~~~~~~\\\"\\n\\ndescribe \\\"\u3053\u3061\u3089\u30C6\u30B9\u30C8\u3067\u3059\\\" do\\n  puts \\\"\u30D6\u30ED\u30C3\u30AF\u6E21\u3057\u305F\u3089\u3069\u3046\u306A\u308B\u304B\u30C6\u30B9\u30C8\\\"\\nend\\n\\n# \u8FD4\u3063\u3066\u304F\u308B\u5024\\n#\\n# ~~~~~~~~~~~~~~~~~~~~~~~~~~\\n# \u3053\u3061\u3089\u30C6\u30B9\u30C8\u3067\u3059\u3088\uFF01\uFF01\uFF01\uFF01\uFF01\uFF01\\n# ~~~~~~~~~~~~~~~~~~~~~~~~~~\\n# \u30D6\u30ED\u30C3\u30AF\u6E21\u3057\u305F\u3089\u3069\u3046\u306A\u308B\u304B\u30C6\u30B9\u30C8\\n\\n```\\n\\n\u4ECA\u56DE\u4F5C\u6210\u3057\u305F `describe` \u306F\u30D6\u30ED\u30C3\u30AF\u3092\u6E21\u3057\u305F\u304B\u3069\u3046\u304B\u3067\u51E6\u7406\u3092\u5206\u5C90\u3055\u305B\u3066\u307F\u307E\u3057\u305F\u3002\\n\\n1. \u30D6\u30ED\u30C3\u30AF\u3092\u6E21\u3057\u305F\u5834\u5408\\n    -  `block_given?` \u304C `true` \u306B\u306A\u308B\\n    - `block.call`\u3092\u5B9F\u884C\u3055\u305B\u308B\\n\\n2.  \u30D6\u30ED\u30C3\u30AF\u3092\u6E21\u3055\u306A\u3044\u5834\u5408\\n    -  \u305F\u3060\u7B2C\u4E00\u5F15\u6570\u3067\u6E21\u3057\u305Fmsg\u3092puts\u3059\u308B\u3060\u3051\u306B\u306A\u308A\u307E\u3059\u3002\\n\\n[Paiza.io\u3067\u306E\u52D5\u4F5C\u30B5\u30F3\u30D7\u30EB](https://paiza.io/projects/e/KB5pPxfpANaqrggZbqLTLQ)\\n\\n\u3053\u3053\u307E\u3067\u81EA\u5206\u3067\u4F5C\u308C\u308B\u3088\u3046\u306B\u306A\u3063\u305F\u3089\u3001Ruby\u306E\u5F15\u6570\u30DE\u30B9\u30BF\u30FC\u3060\u3068\u601D\u3044\u307E\u3059\\n\\n### block.call\\n\\n\u6E21\u3057\u305F\u30D6\u30ED\u30C3\u30AF\u3092\u5B9F\u884C\u3055\u305B\u3089\u308C\u307E\u3059\u3002\\n\\n```ruby\\nblock.call\\n```\\n\\n### Rspec\u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u306B\u3064\u3044\u3066\\n\\n\u305F\u3076\u3093\u30EC\u30DD\u30B8\u30C8\u30EA\u306F[\u3053\u3061\u3089](https://github.com/rspec/rspec-rails/)\u3067\u3059\u304C `describe` \u3068\u304B\u3069\u3053\u3067\u5B9F\u88C5\u3055\u308C\u3066\u3044\u308B\u304B\u6B63\u76F4\u8AAD\u3093\u3067\u306A\u3044\u3067\u3059\u3002\u5206\u304B\u308B\u65B9\u306F\u8A18\u4E8B\u3092\u66F8\u3044\u3066\u304F\u308C\u308B\u3068\u697D\u3057\u3093\u3067\u8AAD\u307F\u305F\u3044\u3068\u601D\u3046\u306E\u3067\u30B3\u30E1\u30F3\u30C8\u6B04\u3067\u304A\u9858\u3044\u3057\u307E\u3059\u301C\u301C\\n\\n## \u6700\u5F8C\u306B\\n\\n\u81EA\u5206\u304C\u666E\u6BB5\u4F7F\u3063\u3066\u3044\u308B\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u3001\u6C17\u306B\u306A\u3063\u305F\u3068\u3053\u308D\u3060\u3051\u3067\u3082\u3044\u3044\u306E\u3067\u8AAD\u3093\u3067\u898B\u308B\u3002\u3053\u308C\u3060\u3051\u3067\u3082OSS\u4F7F\u3063\u3066\u308B\u3063\u307D\u3044\u3057\uFF08\u5F62\u304B\u3089\u5165\u308B\u4EBA\uFF09\u3001\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306B\u3057\u3063\u304B\u308A\u304B\u304B\u308C\u3066\u3044\u306A\u3044\u3053\u3068\u3082\u306A\u3093\u3068\u306A\u304F\u5206\u304B\u308B\u306E\u304C\u3059\u3054\u304F\u3044\u3044\u3067\u3059\u306D\u3002\uFF08\u4ECA\u56DE\u306F `expose` \u306E\u6700\u5F8C\u306E\u5F15\u6570\u306Fdocument\u3058\u3083\u306D\uFF1F\u3063\u3066\u8003\u3048\u308C\u305F\u3053\u3068\u3068\u304B\uFF09\\n\\nRuby\u8A73\u3057\u3044\u3067\u3059\u3068\u306F\u53E3\u304C\u3055\u3051\u3066\u3082\u8A00\u3048\u306A\u3044\u306E\u3067\u8A73\u3057\u3044\u65B9PR\u3068\u304B\u30B3\u30E1\u30F3\u30C8\u6B04\u3067\u3054\u6307\u5C0E\u3044\u305F\u3060\u3051\u308B\u3068\u5E78\u3044\u3067\u3059\u3002\u6700\u5F8C\u307E\u3067\u8AAD\u3093\u3067\u3044\u305F\u3060\u304D\u3042\u308A\u304C\u3068\u3046\u3054\u3056\u3044\u307E\u3057\u305F\u301C\uFF01\uFF01\\n\",\"coediting\":false,\"comments_count\":2,\"created_at\":\"2018-06-21T09:57:25+09:00\",\"group\":null,\"id\":\"b13334dc90df2e2c8c14\",\"likes_count\":4,\"private\":false,\"reactions_count\":0,\"stocks_count\":1,\"tags\":[{\"name\":\"Ruby\",\"versions\":[]},{\"name\":\"Rails\",\"versions\":[]}],\"title\":\"rspec\u306Edescribe\u3068it\u3092\u81EA\u4F5C\u3059\u308B / \u3064\u3044\u3067\u306BGrape\u306Eexpose\u306E\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u8AAD\u3080\",\"updated_at\":\"2019-03-23T13:35:08+09:00\",\"url\":\"https://qiita.com/ykhirao/items/b13334dc90df2e2c8c14\",\"user\":{\"description\":\"Web Developer For 6 years.\\r\\nPHP/Laravel && (React OR Vue.js)\\r\\nTypeScript/node.js\\r\\n\\r\\n\u696D\u52D9\u59D4\u8A17\u306E\u4F9D\u983C\u3068\u304B\u306FWantedly\u3068\u304B\u304B\u3089\u3067\u304A\u9858\u3044\u3057\u307E\u3059\uFF01\",\"facebook_id\":\"\",\"followees_count\":38,\"followers_count\":95,\"github_login_name\":\"ykhirao\",\"id\":\"ykhirao\",\"items_count\":60,\"linkedin_id\":\"\",\"location\":\"Tokyo, Japan\",\"name\":\"yk\",\"organization\":\"\",\"permanent_id\":112929,\"profile_image_url\":\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792\",\"team_only\":false,\"twitter_screen_name\":\"ykhirao\",\"website_url\":\"https://www.wantedly.com/id/ykhirao\"},\"page_views_count\":null,\"team_membership\":null}},\"path\":\"posts/b13334dc90df2e2c8c14\",\"sharedData\":{},\"siteData\":{\"updatedAt\":\"2022/10/24\"}}");</script><script defer="" type="text/javascript" src="/templates/styles.0a231784.js"></script><script defer="" type="text/javascript" src="/templates/vendors~main.867a25a5.js"></script><script defer="" type="text/javascript" src="/main.80784f3b.js"></script></body></html>