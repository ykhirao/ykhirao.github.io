{"template":"__react_static_root__/src/components/QiitaPost","sharedHashesByProp":{},"data":{"post":{"rendered_body":"\n<h1>\n<span id=\"mysqlで複数のorder-by指定\" class=\"fragment\"></span><a href=\"#mysql%E3%81%A7%E8%A4%87%E6%95%B0%E3%81%AEorder-by%E6%8C%87%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>mysqlで複数のorder by指定</h1>\n\n<p>構文 is</p>\n\n<div class=\"code-frame\" data-lang=\"sql\"><div class=\"highlight\"><pre><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">tables</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">name1</span><span class=\"p\">,</span> <span class=\"n\">name2</span>\n<span class=\"p\">;</span>\n</code></pre></div></div>\n\n<p>知っている人からすると当たり前で何を今更って感じかもしれないのですが、<br>\nname2でソートしてから、name1でソートされるみたいでした。</p>\n\n<h2>\n<span id=\"動作確認のログ\" class=\"fragment\"></span><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%AE%E3%83%AD%E3%82%B0\"><i class=\"fa fa-link\"></i></a>動作確認のログ</h2>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>vagrant@homestead:~<span class=\"nv\">$ </span>mysql <span class=\"nt\">-V</span>\nmysql  Ver 14.14 Distrib 5.7.31, <span class=\"k\">for </span>Linux <span class=\"o\">(</span>x86_64<span class=\"o\">)</span> using  EditLine wrapper\n\nmysql&gt; create database sample<span class=\"p\">;</span>\nQuery OK, 1 row affected <span class=\"o\">(</span>0.00 sec<span class=\"o\">)</span>\n\nmysql&gt; use sample<span class=\"p\">;</span>\nDatabase changed\n\nmysql&gt; create table <span class=\"nb\">users</span> <span class=\"o\">(</span><span class=\"nb\">id </span>int, name1 varchar<span class=\"o\">(</span>10<span class=\"o\">)</span>, name2 varchar<span class=\"o\">(</span>10<span class=\"o\">))</span><span class=\"p\">;</span>\nQuery OK, 0 rows affected <span class=\"o\">(</span>0.04 sec<span class=\"o\">)</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"sql\"><div class=\"highlight\"><pre><code><span class=\"k\">insert</span> <span class=\"k\">into</span> <span class=\"n\">users</span> <span class=\"k\">values</span> \n<span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">'A'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">)</span>\n<span class=\"p\">,(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">'B'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">)</span>\n<span class=\"p\">,(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">'B'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">)</span>\n<span class=\"p\">,(</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">'C'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">)</span>\n<span class=\"p\">,(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"s1\">'C'</span><span class=\"p\">,</span> <span class=\"s1\">'2'</span><span class=\"p\">)</span>\n<span class=\"p\">,(</span><span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"s1\">'D'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">)</span>\n<span class=\"p\">;</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"sql\"><div class=\"highlight\"><pre><code><span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">select</span> <span class=\"o\">*</span>\n    <span class=\"o\">-&gt;</span> <span class=\"k\">from</span> <span class=\"n\">users</span>\n    <span class=\"o\">-&gt;</span> <span class=\"k\">order</span> <span class=\"k\">by</span> <span class=\"n\">id</span><span class=\"p\">;</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span> <span class=\"n\">id</span>   <span class=\"o\">|</span> <span class=\"n\">name1</span> <span class=\"o\">|</span> <span class=\"n\">name2</span> <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span>    <span class=\"mi\">1</span> <span class=\"o\">|</span> <span class=\"n\">A</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">2</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">3</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">4</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">5</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">2</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">6</span> <span class=\"o\">|</span> <span class=\"n\">D</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"mi\">6</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">00</span> <span class=\"n\">sec</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"sql\"><div class=\"highlight\"><pre><code><span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">select</span> <span class=\"o\">*</span> <span class=\"k\">from</span> <span class=\"n\">users</span> <span class=\"k\">order</span> <span class=\"k\">by</span> <span class=\"n\">name1</span><span class=\"p\">,</span> <span class=\"n\">name2</span><span class=\"p\">;</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span> <span class=\"n\">id</span>   <span class=\"o\">|</span> <span class=\"n\">name1</span> <span class=\"o\">|</span> <span class=\"n\">name2</span> <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span>    <span class=\"mi\">1</span> <span class=\"o\">|</span> <span class=\"n\">A</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">2</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">3</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">4</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">5</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">2</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">6</span> <span class=\"o\">|</span> <span class=\"n\">D</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"mi\">6</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">00</span> <span class=\"n\">sec</span><span class=\"p\">)</span>\n\n<span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">select</span> <span class=\"o\">*</span> <span class=\"k\">from</span> <span class=\"n\">users</span> <span class=\"k\">order</span> <span class=\"k\">by</span> <span class=\"n\">name2</span><span class=\"p\">,</span> <span class=\"n\">name1</span><span class=\"p\">;</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span> <span class=\"n\">id</span>   <span class=\"o\">|</span> <span class=\"n\">name1</span> <span class=\"o\">|</span> <span class=\"n\">name2</span> <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span>    <span class=\"mi\">1</span> <span class=\"o\">|</span> <span class=\"n\">A</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">2</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">3</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">4</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">6</span> <span class=\"o\">|</span> <span class=\"n\">D</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">5</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">2</span>     <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"mi\">6</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">00</span> <span class=\"n\">sec</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<h2>\n<span id=\"その他\" class=\"fragment\"></span><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\"><i class=\"fa fa-link\"></i></a>その他</h2>\n\n<p>昇順、降順をいじる場合</p>\n\n<p>name1順にならべたいけど、name2は降順でいてほしい。</p>\n\n<div class=\"code-frame\" data-lang=\"sql\"><div class=\"highlight\"><pre><code><span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">users</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">name1</span> <span class=\"k\">ASC</span><span class=\"p\">,</span> <span class=\"n\">name2</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span> <span class=\"n\">id</span>   <span class=\"o\">|</span> <span class=\"n\">name1</span> <span class=\"o\">|</span> <span class=\"n\">name2</span> <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span>    <span class=\"mi\">1</span> <span class=\"o\">|</span> <span class=\"n\">A</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">2</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">3</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">5</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">2</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">4</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">6</span> <span class=\"o\">|</span> <span class=\"n\">D</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"mi\">6</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">00</span> <span class=\"n\">sec</span><span class=\"p\">)</span>\n</code></pre></div></div>\n","body":"# mysqlで複数のorder by指定\n\n構文 is\n\n```sql\nSELECT *\nFROM tables\nORDER BY name1, name2\n;\n```\n\n知っている人からすると当たり前で何を今更って感じかもしれないのですが、\nname2でソートしてから、name1でソートされるみたいでした。\n\n## 動作確認のログ\n\n```bash\nvagrant@homestead:~$ mysql -V\nmysql  Ver 14.14 Distrib 5.7.31, for Linux (x86_64) using  EditLine wrapper\n\nmysql> create database sample;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> use sample;\nDatabase changed\n\nmysql> create table users (id int, name1 varchar(10), name2 varchar(10));\nQuery OK, 0 rows affected (0.04 sec)\n```\n\n```sql\ninsert into users values \n(1, 'A', '1')\n,(2, 'B', '1')\n,(3, 'B', '1')\n,(4, 'C', '1')\n,(5, 'C', '2')\n,(6, 'D', '1')\n;\n```\n\n```sql\nmysql> select *\n    -> from users\n    -> order by id;\n+------+-------+-------+\n| id   | name1 | name2 |\n+------+-------+-------+\n|    1 | A     | 1     |\n|    2 | B     | 1     |\n|    3 | B     | 1     |\n|    4 | C     | 1     |\n|    5 | C     | 2     |\n|    6 | D     | 1     |\n+------+-------+-------+\n6 rows in set (0.00 sec)\n```\n\n```sql\nmysql> select * from users order by name1, name2;\n+------+-------+-------+\n| id   | name1 | name2 |\n+------+-------+-------+\n|    1 | A     | 1     |\n|    2 | B     | 1     |\n|    3 | B     | 1     |\n|    4 | C     | 1     |\n|    5 | C     | 2     |\n|    6 | D     | 1     |\n+------+-------+-------+\n6 rows in set (0.00 sec)\n\nmysql> select * from users order by name2, name1;\n+------+-------+-------+\n| id   | name1 | name2 |\n+------+-------+-------+\n|    1 | A     | 1     |\n|    2 | B     | 1     |\n|    3 | B     | 1     |\n|    4 | C     | 1     |\n|    6 | D     | 1     |\n|    5 | C     | 2     |\n+------+-------+-------+\n6 rows in set (0.00 sec)\n```\n\n## その他\n\n昇順、降順をいじる場合\n\nname1順にならべたいけど、name2は降順でいてほしい。\n\n```sql\nmysql> SELECT * FROM users ORDER BY name1 ASC, name2 DESC;\n+------+-------+-------+\n| id   | name1 | name2 |\n+------+-------+-------+\n|    1 | A     | 1     |\n|    2 | B     | 1     |\n|    3 | B     | 1     |\n|    5 | C     | 2     |\n|    4 | C     | 1     |\n|    6 | D     | 1     |\n+------+-------+-------+\n6 rows in set (0.00 sec)\n```\n","coediting":false,"comments_count":1,"created_at":"2020-11-04T02:14:54+09:00","group":null,"id":"c45a2e3deda617824253","likes_count":6,"private":false,"reactions_count":0,"stocks_count":3,"tags":[{"name":"MySQL","versions":[]},{"name":"SQL","versions":[]}],"title":"mysqlで複数のorder by設定したときに少しハマった件","updated_at":"2020-11-04T02:14:54+09:00","url":"https://qiita.com/ykhirao/items/c45a2e3deda617824253","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":102,"github_login_name":"ykhirao","id":"ykhirao","items_count":83,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false}},"path":"posts/c45a2e3deda617824253"}
