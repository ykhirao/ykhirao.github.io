{"template":"__react_static_root__/src/components/QiitaPost","sharedHashesByProp":{},"data":{"post":{"rendered_body":"<h1 data-sourcepos=\"2:1-2:8\">\n<span id=\"結果\" class=\"fragment\"></span><a href=\"#%E7%B5%90%E6%9E%9C\"><i class=\"fa fa-link\"></i></a>結果</h1>\n<p data-sourcepos=\"4:1-4:24\">SelectionAPIを使った</p>\n<p data-sourcepos=\"6:1-6:55\"><iframe id=\"qiita-embed-content__f42aa32504c5ea27129b7c70e817be13\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__f42aa32504c5ea27129b7c70e817be13\" data-content=\"https%3A%2F%2Fdeveloper.mozilla.org%2Fja%2Fdocs%2FWeb%2FAPI%2FSelection\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"8:1-8:134\"><a href=\"https://camo.qiitausercontent.com/c03535952cd145101380aeb089aa826b32bb763f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f38303461393933332d646533322d323666632d373430342d3831343734373138356432632e676966\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F804a9933-de32-26fc-7404-814747185d2c.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d8d9bf0c9a1f5755fb977203989bbfac\" alt=\"ezgif-4-d89ef571cc.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/804a9933-de32-26fc-7404-814747185d2c.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F804a9933-de32-26fc-7404-814747185d2c.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1b5cbc88c056fbc9f31afab9e34d46ef 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"11:1-12:84\">めっちゃいろんなことを検索したけどreact関係なくSelectionAPIでやるのが便利だと思った次第。<br>\n普通にuseRefのドキュメントとか見てたけどこれでいいのでは。</p>\n<div class=\"code-frame\" data-lang=\"js\" data-sourcepos=\"15:1-17:3\"><div class=\"highlight\"><pre><code><span class=\"nb\">window</span><span class=\"p\">.</span><span class=\"nf\">getSelection</span><span class=\"p\">().</span><span class=\"nf\">collapseToStart</span><span class=\"p\">()</span>\n</code></pre></div></div>\n<h2 data-sourcepos=\"20:1-20:45\">\n<span id=\"コードとコードサンドボックス\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%A8%E3%82%B3%E3%83%BC%E3%83%89%E3%82%B5%E3%83%B3%E3%83%89%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9\"><i class=\"fa fa-link\"></i></a>コードとコードサンドボックス</h2>\n<p data-sourcepos=\"22:1-22:82\"><iframe id=\"qiita-embed-content__96545f3872668a88e646e3b07276ba55\" src=\"https://qiita.com/embed-contents/code-sandbox#qiita-embed-content__96545f3872668a88e646e3b07276ba55\" data-content=\"https%3A%2F%2Fcodesandbox.io%2Fembed%2Fcn9r7g%3Fview%3DEditor%2B%252B%2BPreview%26module%3D%252Fsrc%252FApp.js\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;height:500px;\">\n</iframe>\n</p>\n<div class=\"code-frame\" data-lang=\"jsx\" data-sourcepos=\"25:1-65:3\"><div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">useRef</span><span class=\"p\">,</span> <span class=\"nx\">useEffect</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">react</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"dl\">\"</span><span class=\"s2\">./styles.css</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"kd\">function</span> <span class=\"nf\">App</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">ref</span> <span class=\"o\">=</span> <span class=\"nf\">useRef</span><span class=\"p\">(</span><span class=\"kc\">null</span><span class=\"p\">);</span>\n\n  <span class=\"nf\">useEffect</span><span class=\"p\">(()</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">ref</span><span class=\"p\">?.</span><span class=\"nx\">current</span><span class=\"p\">?.</span><span class=\"nf\">focus</span><span class=\"p\">(),</span> <span class=\"p\">[</span><span class=\"nx\">ref</span><span class=\"p\">?.</span><span class=\"nx\">current</span><span class=\"p\">]);</span>\n\n  <span class=\"k\">return </span><span class=\"p\">(</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">div</span> <span class=\"na\">className</span><span class=\"p\">=</span><span class=\"s\">\"App\"</span><span class=\"p\">&gt;</span>\n      <span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>タブ押したときのフォーカス位置<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\n      <span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">ref</span><span class=\"p\">=</span><span class=\"si\">{</span><span class=\"nx\">ref</span><span class=\"si\">}</span> <span class=\"na\">defaultValue</span><span class=\"p\">=</span><span class=\"s\">\"初期選択\"</span> <span class=\"p\">/&gt;</span>\n      <span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n      <span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">defaultValue</span><span class=\"p\">=</span><span class=\"s\">\"何もなしは全選択\"</span> <span class=\"p\">/&gt;</span>\n      <span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n      <span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">input</span>\n          <span class=\"na\">onFocus</span><span class=\"p\">=</span><span class=\"si\">{</span><span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"nb\">window</span><span class=\"p\">?.</span><span class=\"nf\">getSelection</span><span class=\"p\">().</span><span class=\"nf\">collapseToStart</span><span class=\"p\">()</span><span class=\"si\">}</span>\n          <span class=\"na\">defaultValue</span><span class=\"p\">=</span><span class=\"s\">\"先頭カーソル\"</span>\n        <span class=\"p\">/&gt;</span>\n      <span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n      <span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">input</span>\n          <span class=\"na\">onFocus</span><span class=\"p\">=</span><span class=\"si\">{</span><span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"nb\">window</span><span class=\"p\">?.</span><span class=\"nf\">getSelection</span><span class=\"p\">().</span><span class=\"nf\">collapseToEnd</span><span class=\"p\">()</span><span class=\"si\">}</span>\n          <span class=\"na\">defaultValue</span><span class=\"p\">=</span><span class=\"s\">\"末端カーソル\"</span>\n        <span class=\"p\">/&gt;</span>\n      <span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n      <span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">input</span>\n          <span class=\"na\">onFocus</span><span class=\"p\">=</span><span class=\"si\">{</span><span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"nb\">window</span><span class=\"p\">?.</span><span class=\"nf\">getSelection</span><span class=\"p\">().</span><span class=\"nf\">deleteFromDocument</span><span class=\"p\">()</span><span class=\"si\">}</span>\n          <span class=\"na\">defaultValue</span><span class=\"p\">=</span><span class=\"s\">\"選択を削除\"</span>\n        <span class=\"p\">/&gt;</span>\n      <span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n","body":"\n# 結果\n\nSelectionAPIを使った\n\nhttps://developer.mozilla.org/ja/docs/Web/API/Selection\n\n![ezgif-4-d89ef571cc.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/804a9933-de32-26fc-7404-814747185d2c.gif)\n\n\nめっちゃいろんなことを検索したけどreact関係なくSelectionAPIでやるのが便利だと思った次第。\n普通にuseRefのドキュメントとか見てたけどこれでいいのでは。\n\n\n```js\nwindow.getSelection().collapseToStart()\n```\n\n\n## コードとコードサンドボックス\n\nhttps://codesandbox.io/embed/cn9r7g?view=Editor+%2B+Preview&module=%2Fsrc%2FApp.js\n\n\n```jsx\nimport { useRef, useEffect } from \"react\";\nimport \"./styles.css\";\n\nexport default function App() {\n  const ref = useRef(null);\n\n  useEffect(() => ref?.current?.focus(), [ref?.current]);\n\n  return (\n    <div className=\"App\">\n      <h1>タブ押したときのフォーカス位置</h1>\n      <div>\n        <input ref={ref} defaultValue=\"初期選択\" />\n      </div>\n      <div>\n        <input defaultValue=\"何もなしは全選択\" />\n      </div>\n      <div>\n        <input\n          onFocus={() => window?.getSelection().collapseToStart()}\n          defaultValue=\"先頭カーソル\"\n        />\n      </div>\n      <div>\n        <input\n          onFocus={() => window?.getSelection().collapseToEnd()}\n          defaultValue=\"末端カーソル\"\n        />\n      </div>\n      <div>\n        <input\n          onFocus={() => window?.getSelection().deleteFromDocument()}\n          defaultValue=\"選択を削除\"\n        />\n      </div>\n    </div>\n  );\n}\n\n```\n","coediting":false,"comments_count":0,"created_at":"2023-12-26T18:47:45+09:00","group":null,"id":"d0d5883dce92307703c8","likes_count":0,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"JavaScript","versions":[]},{"name":"React","versions":[]}],"title":"【React】Input属性でタブを押したときの初期フォーカス位置を調整する","updated_at":"2023-12-29T00:00:59+09:00","url":"https://qiita.com/ykhirao/items/d0d5883dce92307703c8","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":103,"github_login_name":"ykhirao","id":"ykhirao","items_count":83,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false}},"path":"posts/d0d5883dce92307703c8"}
