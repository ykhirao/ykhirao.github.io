{"template":"__react_static_root__/src/components/QiitaPost","sharedHashesByProp":{},"data":{"post":{"rendered_body":"<h1 data-sourcepos=\"1:1-1:37\">\n<span id=\"jsxをreactなしで使ってみた\" class=\"fragment\"></span><a href=\"#jsx%E3%82%92react%E3%81%AA%E3%81%97%E3%81%A7%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F\"><i class=\"fa fa-link\"></i></a>JSXをReactなしで使ってみた</h1>\n<p data-sourcepos=\"3:1-3:51\">いろいろ実験したレポジトリはこちら</p>\n<p data-sourcepos=\"5:1-5:62\"><iframe id=\"qiita-embed-content__cbd7fe722d1252584102718ab273e751\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__cbd7fe722d1252584102718ab273e751\" data-content=\"https%3A%2F%2Fgithub.com%2Fykhirao%2Fqiita%2Ftree%2Fmaster%2Fjsx-without-react\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<h2 data-sourcepos=\"8:1-8:27\">\n<span id=\"シンプルなページ\" class=\"fragment\"></span><a href=\"#%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%E3%81%AA%E3%83%9A%E3%83%BC%E3%82%B8\"><i class=\"fa fa-link\"></i></a>シンプルなページ</h2>\n<p data-sourcepos=\"10:1-10:33\">できたバンドルはこちら</p>\n<p data-sourcepos=\"12:1-12:60\"><iframe id=\"qiita-embed-content__21cf562e994d0112e7750bd364bb4e81\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__21cf562e994d0112e7750bd364bb4e81\" data-content=\"https%3A%2F%2Fykhirao.github.io%2Fqiita%2Fjsx-without-react%2Fjsx%2Fbuild%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"14:1-14:163\"><a href=\"https://camo.qiitausercontent.com/0ab2b75e636bb4241805d90c601154ffc11cdf5e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f34376535323836652d356532652d313833642d373730322d3331366366393631326534642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F47e5286e-5e2e-183d-7702-316cf9612e4d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=102402eab76f732abfde5b66cd92dba6\" alt=\"スクリーンショット 2023-12-11 15.26.56.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/47e5286e-5e2e-183d-7702-316cf9612e4d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F47e5286e-5e2e-183d-7702-316cf9612e4d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c2c5db78faebd3324214239f4a01abb1 1x\" loading=\"lazy\"></a></p>\n<div class=\"code-frame\" data-lang=\"html\" data-sourcepos=\"16:1-30:3\"><div class=\"highlight\"><pre><code><span class=\"cp\">&lt;!doctype html&gt;</span>\n<span class=\"nt\">&lt;html&gt;</span>\n    <span class=\"nt\">&lt;head&gt;</span>\n        <span class=\"nt\">&lt;meta</span> <span class=\"na\">charset=</span><span class=\"s\">\"utf-8\"</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;title&gt;</span>My App<span class=\"nt\">&lt;/title&gt;</span>\n        <span class=\"nt\">&lt;script </span><span class=\"na\">defer=</span><span class=\"s\">\"defer\"</span> <span class=\"na\">src=</span><span class=\"s\">\"bundle.js\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n    <span class=\"nt\">&lt;/head&gt;</span>\n    <span class=\"nt\">&lt;body&gt;</span>\n        <span class=\"nt\">&lt;h1&gt;</span>Hello World<span class=\"nt\">&lt;/h1&gt;</span>\n        <span class=\"nt\">&lt;div</span> <span class=\"na\">id=</span><span class=\"s\">\"root\"</span><span class=\"nt\">&gt;&lt;/div&gt;</span>\n    <span class=\"nt\">&lt;/body&gt;</span>\n<span class=\"nt\">&lt;/html&gt;</span>\n\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"32:1-65:3\">\n<div class=\"code-lang\"><span class=\"bold\">bundle.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"p\">(()</span><span class=\"o\">=&gt;</span><span class=\"p\">{</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">use strict</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">e</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nx\">t</span><span class=\"p\">,</span><span class=\"nx\">n</span><span class=\"p\">)</span><span class=\"o\">=&gt;</span><span class=\"p\">{</span>\n        <span class=\"nb\">Array</span><span class=\"p\">.</span><span class=\"nf\">isArray</span><span class=\"p\">(</span><span class=\"nx\">n</span><span class=\"p\">)</span> <span class=\"p\">?</span> <span class=\"nx\">n</span><span class=\"p\">.</span><span class=\"nf\">forEach</span><span class=\"p\">((</span><span class=\"nx\">n</span><span class=\"o\">=&gt;</span><span class=\"nf\">e</span><span class=\"p\">(</span><span class=\"nx\">t</span><span class=\"p\">,</span> <span class=\"nx\">n</span><span class=\"p\">)))</span> <span class=\"p\">:</span> <span class=\"p\">((</span><span class=\"nx\">e</span><span class=\"p\">,</span><span class=\"nx\">t</span><span class=\"p\">)</span><span class=\"o\">=&gt;</span><span class=\"p\">{</span>\n            <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nf\">appendChild</span><span class=\"p\">(</span><span class=\"nx\">t</span><span class=\"p\">?.</span><span class=\"nx\">nodeType</span> <span class=\"p\">?</span> <span class=\"nx\">t</span> <span class=\"p\">:</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nf\">createTextNode</span><span class=\"p\">(</span><span class=\"nx\">t</span><span class=\"p\">))</span>\n        <span class=\"p\">}</span>\n        <span class=\"p\">)(</span><span class=\"nx\">t</span><span class=\"p\">,</span> <span class=\"nx\">n</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n      <span class=\"p\">,</span> <span class=\"nx\">t</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nx\">t</span><span class=\"p\">,</span><span class=\"nx\">n</span><span class=\"p\">)</span><span class=\"o\">=&gt;</span><span class=\"p\">{</span>\n        <span class=\"kd\">const</span> <span class=\"p\">{</span><span class=\"na\">children</span><span class=\"p\">:</span> <span class=\"nx\">r</span><span class=\"p\">}</span> <span class=\"o\">=</span> <span class=\"nx\">n</span><span class=\"p\">;</span>\n        <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">function</span><span class=\"dl\">\"</span> <span class=\"o\">==</span> <span class=\"k\">typeof</span> <span class=\"nx\">t</span><span class=\"p\">)</span>\n            <span class=\"k\">return</span> <span class=\"nf\">t</span><span class=\"p\">(</span><span class=\"nx\">n</span><span class=\"p\">,</span> <span class=\"nx\">r</span><span class=\"p\">);</span>\n        <span class=\"kd\">const</span> <span class=\"nx\">o</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nf\">createElement</span><span class=\"p\">(</span><span class=\"nx\">t</span><span class=\"p\">);</span>\n        <span class=\"k\">return</span> <span class=\"nb\">Object</span><span class=\"p\">.</span><span class=\"nf\">entries</span><span class=\"p\">(</span><span class=\"nx\">n</span> <span class=\"o\">||</span> <span class=\"p\">{}).</span><span class=\"nf\">forEach</span><span class=\"p\">((([</span><span class=\"nx\">e</span><span class=\"p\">,</span><span class=\"nx\">t</span><span class=\"p\">])</span><span class=\"o\">=&gt;</span><span class=\"p\">{</span>\n            <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nf\">startsWith</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">on</span><span class=\"dl\">\"</span><span class=\"p\">)</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nf\">toLowerCase</span><span class=\"p\">()</span><span class=\"k\">in</span> <span class=\"nb\">window</span> <span class=\"p\">?</span> <span class=\"nx\">o</span><span class=\"p\">.</span><span class=\"nf\">addEventListener</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nf\">toLowerCase</span><span class=\"p\">().</span><span class=\"nf\">substr</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"nx\">t</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"nx\">o</span><span class=\"p\">.</span><span class=\"nf\">setAttribute</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">,</span> <span class=\"nx\">t</span><span class=\"p\">)</span>\n        <span class=\"p\">}</span>\n        <span class=\"p\">)),</span>\n        <span class=\"nf\">e</span><span class=\"p\">(</span><span class=\"nx\">o</span><span class=\"p\">,</span> <span class=\"nx\">r</span><span class=\"p\">),</span>\n        <span class=\"nx\">o</span>\n    <span class=\"p\">}</span>\n      <span class=\"p\">,</span> <span class=\"nx\">n</span> <span class=\"o\">=</span> <span class=\"p\">({</span><span class=\"na\">children</span><span class=\"p\">:</span> <span class=\"nx\">e</span><span class=\"p\">,</span> <span class=\"na\">onClick</span><span class=\"p\">:</span> <span class=\"nx\">n</span><span class=\"p\">})</span><span class=\"o\">=&gt;</span><span class=\"nf\">t</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">button</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n        <span class=\"na\">onClick</span><span class=\"p\">:</span> <span class=\"nx\">n</span><span class=\"p\">,</span>\n        <span class=\"na\">children</span><span class=\"p\">:</span> <span class=\"nx\">e</span>\n    <span class=\"p\">});</span>\n    <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nf\">getElementById</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">root</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nf\">appendChild</span><span class=\"p\">(</span><span class=\"nf\">t</span><span class=\"p\">((()</span><span class=\"o\">=&gt;</span><span class=\"nf\">t</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">div</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n        <span class=\"na\">children</span><span class=\"p\">:</span> <span class=\"nf\">t</span><span class=\"p\">(</span><span class=\"nx\">n</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n            <span class=\"na\">onClick</span><span class=\"p\">:</span> <span class=\"p\">()</span><span class=\"o\">=&gt;</span><span class=\"nf\">alert</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">),</span>\n            <span class=\"na\">children</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">Click 1</span><span class=\"dl\">\"</span>\n        <span class=\"p\">})</span>\n    <span class=\"p\">})),</span> <span class=\"p\">{}))</span>\n<span class=\"p\">}</span>\n<span class=\"p\">)();</span>\n</code></pre></div>\n</div>\n<p data-sourcepos=\"67:1-67:87\">２つのファイルあわせて801バイトで収まりました！軽いですね。</p>\n<p data-sourcepos=\"69:1-69:163\"><a href=\"https://camo.qiitausercontent.com/171216ab88804b36043d23e71bad8d4833ce32c8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f64633434303836322d646534392d336234372d303363382d3566323764373433666163342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fdc440862-de49-3b47-03c8-5f27d743fac4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0c887cfeaed2351cf9d6e9e94c931d4b\" alt=\"スクリーンショット 2023-12-11 15.28.36.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/dc440862-de49-3b47-03c8-5f27d743fac4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fdc440862-de49-3b47-03c8-5f27d743fac4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9bb5d950f30215388237d27bae7b4cdd 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"72:1-72:49\">GoogleのPageSpeed Insights だと100点です！</p>\n<p data-sourcepos=\"74:1-74:128\"><iframe id=\"qiita-embed-content__407d87c47e28082acfdc577cc2b31495\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__407d87c47e28082acfdc577cc2b31495\" data-content=\"https%3A%2F%2Fpagespeed.web.dev%2Fanalysis%2Fhttps-ykhirao-github-io-qiita-jsx-without-react-jsx-build%2F6h7bufbagp%3Fhl%3Dja%26form_factor%3Dmobile\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"76:1-76:163\"><a href=\"https://camo.qiitausercontent.com/4f7226cb3876130e55f6f23cb55722940f754bf4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39393936393763392d616134322d306334342d643366322d3761636661663839373564362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F999697c9-aa42-0c44-d3f2-7acfaf8975d6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=feedc0f2a9f2c0e07f90747dcb73e9a1\" alt=\"スクリーンショット 2023-12-11 15.30.28.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/999697c9-aa42-0c44-d3f2-7acfaf8975d6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F999697c9-aa42-0c44-d3f2-7acfaf8975d6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e80794eeaa88fd9d0ad2dc42c10491fb 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"81:1-81:63\">jsxのランタイムは参考URLからお借りしました。</p>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"83:1-113:3\">\n<div class=\"code-lang\"><span class=\"bold\">jsx-runtime.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">add</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nx\">parent</span><span class=\"p\">,</span> <span class=\"nx\">child</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">parent</span><span class=\"p\">.</span><span class=\"nf\">appendChild</span><span class=\"p\">(</span><span class=\"nx\">child</span><span class=\"p\">?.</span><span class=\"nx\">nodeType</span> <span class=\"p\">?</span> <span class=\"nx\">child</span> <span class=\"p\">:</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nf\">createTextNode</span><span class=\"p\">(</span><span class=\"nx\">child</span><span class=\"p\">));</span>\n<span class=\"p\">};</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">appendChild</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nx\">parent</span><span class=\"p\">,</span> <span class=\"nx\">child</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"nb\">Array</span><span class=\"p\">.</span><span class=\"nf\">isArray</span><span class=\"p\">(</span><span class=\"nx\">child</span><span class=\"p\">))</span> <span class=\"p\">{</span>\n    <span class=\"nx\">child</span><span class=\"p\">.</span><span class=\"nf\">forEach</span><span class=\"p\">((</span><span class=\"nx\">nestedChild</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"nf\">appendChild</span><span class=\"p\">(</span><span class=\"nx\">parent</span><span class=\"p\">,</span> <span class=\"nx\">nestedChild</span><span class=\"p\">));</span>\n  <span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"p\">{</span>\n    <span class=\"nf\">add</span><span class=\"p\">(</span><span class=\"nx\">parent</span><span class=\"p\">,</span> <span class=\"nx\">child</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">};</span>\n\n<span class=\"k\">export</span> <span class=\"kd\">const</span> <span class=\"nx\">jsx</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nx\">tag</span><span class=\"p\">,</span> <span class=\"nx\">props</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"p\">{</span> <span class=\"nx\">children</span> <span class=\"p\">}</span> <span class=\"o\">=</span> <span class=\"nx\">props</span><span class=\"p\">;</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"k\">typeof</span> <span class=\"nx\">tag</span> <span class=\"o\">===</span> <span class=\"dl\">\"</span><span class=\"s2\">function</span><span class=\"dl\">\"</span><span class=\"p\">)</span> <span class=\"k\">return</span> <span class=\"nf\">tag</span><span class=\"p\">(</span><span class=\"nx\">props</span><span class=\"p\">,</span> <span class=\"nx\">children</span><span class=\"p\">);</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">element</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nf\">createElement</span><span class=\"p\">(</span><span class=\"nx\">tag</span><span class=\"p\">);</span>\n  <span class=\"nb\">Object</span><span class=\"p\">.</span><span class=\"nf\">entries</span><span class=\"p\">(</span><span class=\"nx\">props</span> <span class=\"o\">||</span> <span class=\"p\">{}).</span><span class=\"nf\">forEach</span><span class=\"p\">(([</span><span class=\"nx\">name</span><span class=\"p\">,</span> <span class=\"nx\">value</span><span class=\"p\">])</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"nx\">name</span><span class=\"p\">.</span><span class=\"nf\">startsWith</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">on</span><span class=\"dl\">\"</span><span class=\"p\">)</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">name</span><span class=\"p\">.</span><span class=\"nf\">toLowerCase</span><span class=\"p\">()</span> <span class=\"k\">in</span> <span class=\"nb\">window</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"nx\">element</span><span class=\"p\">.</span><span class=\"nf\">addEventListener</span><span class=\"p\">(</span><span class=\"nx\">name</span><span class=\"p\">.</span><span class=\"nf\">toLowerCase</span><span class=\"p\">().</span><span class=\"nf\">substr</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"nx\">value</span><span class=\"p\">);</span>\n    <span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"p\">{</span>\n      <span class=\"nx\">element</span><span class=\"p\">.</span><span class=\"nf\">setAttribute</span><span class=\"p\">(</span><span class=\"nx\">name</span><span class=\"p\">,</span> <span class=\"nx\">value</span><span class=\"p\">);</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">});</span>\n  <span class=\"nf\">appendChild</span><span class=\"p\">(</span><span class=\"nx\">element</span><span class=\"p\">,</span> <span class=\"nx\">children</span><span class=\"p\">);</span>\n  <span class=\"k\">return</span> <span class=\"nx\">element</span><span class=\"p\">;</span>\n<span class=\"p\">};</span>\n\n<span class=\"k\">export</span> <span class=\"kd\">const</span> <span class=\"nx\">jsxs</span> <span class=\"o\">=</span> <span class=\"nx\">jsx</span><span class=\"p\">;</span>\n\n</code></pre></div>\n</div>\n<h2 data-sourcepos=\"116:1-116:33\">\n<span id=\"ちょっと複雑なページ\" class=\"fragment\"></span><a href=\"#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E8%A4%87%E9%9B%91%E3%81%AA%E3%83%9A%E3%83%BC%E3%82%B8\"><i class=\"fa fa-link\"></i></a>ちょっと複雑なページ</h2>\n<p data-sourcepos=\"118:1-118:68\"><iframe id=\"qiita-embed-content__9bdf83720b2c21fea18d8e8d50947a2c\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__9bdf83720b2c21fea18d8e8d50947a2c\" data-content=\"https%3A%2F%2Fykhirao.github.io%2Fqiita%2Fjsx-without-react%2Fjsx-template%2Fbuild\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"120:1-120:58\">200件のTODOリストを表示するだけのページ。</p>\n<p data-sourcepos=\"122:1-122:163\"><a href=\"https://camo.qiitausercontent.com/7dcb34f0be75e916782530430361ecf25ceb7110/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36363864636634622d353064652d643239642d343661322d6430356263326538663965662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F668dcf4b-50de-d29d-46a2-d05bc2e8f9ef.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7222e6dbea764773b7af3c43edc209ca\" alt=\"スクリーンショット 2023-12-11 15.32.42.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/668dcf4b-50de-d29d-46a2-d05bc2e8f9ef.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F668dcf4b-50de-d29d-46a2-d05bc2e8f9ef.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bf291bdec6574d0696fff3419b659667 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"125:1-125:33\">pagespeedも問題なさそう。</p>\n<p data-sourcepos=\"127:1-127:137\"><iframe id=\"qiita-embed-content__41c83b0cb18646c8d2fad96d67dded6a\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__41c83b0cb18646c8d2fad96d67dded6a\" data-content=\"https%3A%2F%2Fpagespeed.web.dev%2Fanalysis%2Fhttps-ykhirao-github-io-qiita-jsx-without-react-jsx-template-build%2F3sbmdfnx9j%3Fhl%3Dja%26form_factor%3Dmobile\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<div class=\"code-frame\" data-lang=\"jsx\" data-sourcepos=\"130:1-159:3\"><div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">Button</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">./Button</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">todos</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">./data</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">App</span> <span class=\"o\">=</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"c1\">// 代入だと動かない。fetchしたものを代入するにはdocumentAPI使うしかない？</span>\n  <span class=\"c1\">// let todo = [];</span>\n  <span class=\"c1\">// fetch(\"https://jsonplaceholder.typicode.com/todos\")</span>\n  <span class=\"c1\">//   .then(response =&gt; response.json())</span>\n  <span class=\"c1\">//   .then(json =&gt; {</span>\n  <span class=\"c1\">//     console.log(json);</span>\n  <span class=\"c1\">//     todo = json;</span>\n  <span class=\"c1\">//   })</span>\n  <span class=\"k\">return </span><span class=\"p\">(</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n      <span class=\"p\">&lt;</span><span class=\"nc\">Button</span> <span class=\"na\">onClick</span><span class=\"p\">=</span><span class=\"si\">{</span><span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"nf\">alert</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"si\">}</span><span class=\"p\">&gt;</span>Click 1<span class=\"p\">&lt;/</span><span class=\"nc\">Button</span><span class=\"p\">&gt;</span>\n      <span class=\"si\">{</span><span class=\"nx\">todos</span><span class=\"p\">.</span><span class=\"nx\">length</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span> <span class=\"o\">&amp;&amp;</span> <span class=\"p\">&lt;</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n        <span class=\"si\">{</span><span class=\"nx\">todos</span><span class=\"p\">.</span><span class=\"nf\">map</span><span class=\"p\">((</span><span class=\"nx\">item</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n          <span class=\"k\">return</span> <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span><span class=\"si\">{</span><span class=\"nx\">item</span><span class=\"p\">.</span><span class=\"nx\">id</span><span class=\"si\">}</span><span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span><span class=\"si\">{</span><span class=\"nx\">item</span><span class=\"p\">.</span><span class=\"nx\">title</span><span class=\"si\">}</span><span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;;</span>\n        <span class=\"p\">})</span><span class=\"si\">}</span>\n      <span class=\"p\">&lt;/</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span><span class=\"si\">}</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">rootElement</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nf\">getElementById</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">root</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n<span class=\"nx\">rootElement</span><span class=\"p\">.</span><span class=\"nf\">appendChild</span><span class=\"p\">(&lt;</span><span class=\"nc\">App</span> <span class=\"p\">/&gt;);</span>\n\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"nx\">App</span><span class=\"p\">;</span>\n</code></pre></div></div>\n<p data-sourcepos=\"161:1-161:67\">ただ fetch とかして見て動かす方法がない・・・？</p>\n<p data-sourcepos=\"163:1-164:61\">既存データだけをいれる静的なページなら問題ないかも。<br>\nuseState()とか代入する手段がわからなかった。</p>\n<h3 data-sourcepos=\"166:1-166:9\">\n<span id=\"react\" class=\"fragment\"></span><a href=\"#react\"><i class=\"fa fa-link\"></i></a>React</h3>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"169:1-171:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>npx create-react-app react-app\n</code></pre></div></div>\n<p data-sourcepos=\"173:1-173:56\">Reactの一番シンプルな構成で作ったページ</p>\n<p data-sourcepos=\"175:1-175:62\"><iframe id=\"qiita-embed-content__eeef83d681ff81c1630758be92651de1\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__eeef83d681ff81c1630758be92651de1\" data-content=\"https%3A%2F%2Fykhirao.github.io%2Fqiita%2Fjsx-without-react%2Freact%2Fbuild%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"177:1-177:91\">buildフォルダのサイズは518kbでしたがパフォーマンスは満点でした。</p>\n<p data-sourcepos=\"179:1-179:130\"><iframe id=\"qiita-embed-content__59648c76b6b6c30f69217b74df603445\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__59648c76b6b6c30f69217b74df603445\" data-content=\"https%3A%2F%2Fpagespeed.web.dev%2Fanalysis%2Fhttps-ykhirao-github-io-qiita-jsx-without-react-react-build%2Fnctu9unbxg%3Fhl%3Dja%26form_factor%3Dmobile\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"181:1-181:141\">ここからいろいろ追加したときにパフォーマンスが悪化するんですね。。。すべては人の手によるもの。</p>\n<h2 data-sourcepos=\"183:1-183:9\">\n<span id=\"結論\" class=\"fragment\"></span><a href=\"#%E7%B5%90%E8%AB%96\"><i class=\"fa fa-link\"></i></a>結論</h2>\n<p data-sourcepos=\"185:1-186:238\">518キロバイトが801バイトになるのでためしてみてもよいかも・・・？<br>\nsetStateとかが使えなくなるので本当に静的なページなら問題ないと思うが、reactとreact-staticとかで吐き出すとかでも軽いと思うし、なんならpreactとか使ってもよいかもしれない。</p>\n<h2 data-sourcepos=\"190:1-190:15\">\n<span id=\"参考資料\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99\"><i class=\"fa fa-link\"></i></a>参考資料</h2>\n<div class=\"code-frame\" data-lang=\"jsx\" data-sourcepos=\"192:1-194:3\"><div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">Page</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">@nakedjsx/core/page</span><span class=\"dl\">'</span>\n</code></pre></div></div>\n<p data-sourcepos=\"196:1-196:235\">上記でSimpleにかけそうと思ったが結局トランスパイルやバンドル周り云々をしないとQiita用にソースコードのアップロード(GitHub Pages)できなさそうだったので参考だけに使った</p>\n<p data-sourcepos=\"198:1-198:53\"><iframe id=\"qiita-embed-content__99d520e9500705e4785462024fc15552\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__99d520e9500705e4785462024fc15552\" data-content=\"https%3A%2F%2Fchriscoyier.net%2F2023%2F08%2F07%2Fjsx-without-react%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"200:1-200:55\">babel/webpack周りはこの資料を参考にした。</p>\n<p data-sourcepos=\"202:1-202:74\"><iframe id=\"qiita-embed-content__b6ce99543bd8cd0482245a7dc39c3553\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__b6ce99543bd8cd0482245a7dc39c3553\" data-content=\"https%3A%2F%2Fdev.to%2Fdevsmitra%2Fhow-to-create-the-app-using-jsx-without-react-k08\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"204:1-204:86\">react/jsx-runtimeの周りの理解は旧公式ドキュメントを参考にした。</p>\n<p data-sourcepos=\"206:1-206:84\"><iframe id=\"qiita-embed-content__101bf612fafe70195ea524bd680e2640\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__101bf612fafe70195ea524bd680e2640\" data-content=\"https%3A%2F%2Fja.legacy.reactjs.org%2Fblog%2F2020%2F09%2F22%2Fintroducing-the-new-jsx-transform.html\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"208:1-208:51\">素のReactにWebpack導入するやり方の参考</p>\n<p data-sourcepos=\"210:1-210:52\"><iframe id=\"qiita-embed-content__b2e43874dab9299eaeba82fcfb4416e4\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__b2e43874dab9299eaeba82fcfb4416e4\" data-content=\"https%3A%2F%2Fzenn.dev%2Fspacemarket%2Farticles%2F23e5401a074ccc\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n","body":"# JSXをReactなしで使ってみた\n\nいろいろ実験したレポジトリはこちら\n\nhttps://github.com/ykhirao/qiita/tree/master/jsx-without-react\n\n\n## シンプルなページ\n\nできたバンドルはこちら\n\nhttps://ykhirao.github.io/qiita/jsx-without-react/jsx/build/\n\n![スクリーンショット 2023-12-11 15.26.56.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/47e5286e-5e2e-183d-7702-316cf9612e4d.png)\n\n```html\n<!doctype html>\n<html>\n    <head>\n        <meta charset=\"utf-8\"/>\n        <title>My App</title>\n        <script defer=\"defer\" src=\"bundle.js\"></script>\n    </head>\n    <body>\n        <h1>Hello World</h1>\n        <div id=\"root\"></div>\n    </body>\n</html>\n\n```\n\n```bundle.js\n(()=>{\n    \"use strict\";\n    const e = (t,n)=>{\n        Array.isArray(n) ? n.forEach((n=>e(t, n))) : ((e,t)=>{\n            e.appendChild(t?.nodeType ? t : document.createTextNode(t))\n        }\n        )(t, n)\n    }\n      , t = (t,n)=>{\n        const {children: r} = n;\n        if (\"function\" == typeof t)\n            return t(n, r);\n        const o = document.createElement(t);\n        return Object.entries(n || {}).forEach((([e,t])=>{\n            e.startsWith(\"on\") && e.toLowerCase()in window ? o.addEventListener(e.toLowerCase().substr(2), t) : o.setAttribute(e, t)\n        }\n        )),\n        e(o, r),\n        o\n    }\n      , n = ({children: e, onClick: n})=>t(\"button\", {\n        onClick: n,\n        children: e\n    });\n    document.getElementById(\"root\").appendChild(t((()=>t(\"div\", {\n        children: t(n, {\n            onClick: ()=>alert(1),\n            children: \"Click 1\"\n        })\n    })), {}))\n}\n)();\n```\n\n２つのファイルあわせて801バイトで収まりました！軽いですね。\n\n![スクリーンショット 2023-12-11 15.28.36.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/dc440862-de49-3b47-03c8-5f27d743fac4.png)\n\n\nGoogleのPageSpeed Insights だと100点です！\n\nhttps://pagespeed.web.dev/analysis/https-ykhirao-github-io-qiita-jsx-without-react-jsx-build/6h7bufbagp?hl=ja&form_factor=mobile\n\n![スクリーンショット 2023-12-11 15.30.28.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/999697c9-aa42-0c44-d3f2-7acfaf8975d6.png)\n\n\n\n\njsxのランタイムは参考URLからお借りしました。\n\n```jsx-runtime.js\nconst add = (parent, child) => {\n  parent.appendChild(child?.nodeType ? child : document.createTextNode(child));\n};\n\nconst appendChild = (parent, child) => {\n  if (Array.isArray(child)) {\n    child.forEach((nestedChild) => appendChild(parent, nestedChild));\n  } else {\n    add(parent, child);\n  }\n};\n\nexport const jsx = (tag, props) => {\n  const { children } = props;\n  if (typeof tag === \"function\") return tag(props, children);\n  const element = document.createElement(tag);\n  Object.entries(props || {}).forEach(([name, value]) => {\n    if (name.startsWith(\"on\") && name.toLowerCase() in window) {\n      element.addEventListener(name.toLowerCase().substr(2), value);\n    } else {\n      element.setAttribute(name, value);\n    }\n  });\n  appendChild(element, children);\n  return element;\n};\n\nexport const jsxs = jsx;\n\n```\n\n\n## ちょっと複雑なページ\n\nhttps://ykhirao.github.io/qiita/jsx-without-react/jsx-template/build\n\n200件のTODOリストを表示するだけのページ。\n\n![スクリーンショット 2023-12-11 15.32.42.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/668dcf4b-50de-d29d-46a2-d05bc2e8f9ef.png)\n\n\npagespeedも問題なさそう。\n\nhttps://pagespeed.web.dev/analysis/https-ykhirao-github-io-qiita-jsx-without-react-jsx-template-build/3sbmdfnx9j?hl=ja&form_factor=mobile\n\n\n```jsx\nimport { Button } from \"./Button\";\nimport { todos } from \"./data\";\n\nconst App = () => {\n  // 代入だと動かない。fetchしたものを代入するにはdocumentAPI使うしかない？\n  // let todo = [];\n  // fetch(\"https://jsonplaceholder.typicode.com/todos\")\n  //   .then(response => response.json())\n  //   .then(json => {\n  //     console.log(json);\n  //     todo = json;\n  //   })\n  return (\n    <div>\n      <Button onClick={() => alert(1)}>Click 1</Button>\n      {todos.length > 0 && <table>\n        {todos.map((item) => {\n          return <tr><td>{item.id}</td><td>{item.title}</td></tr>;\n        })}\n      </table>}\n    </div>\n  )\n}\n\nconst rootElement = document.getElementById(\"root\");\nrootElement.appendChild(<App />);\n\nexport default App;\n```\n\nただ fetch とかして見て動かす方法がない・・・？\n\n既存データだけをいれる静的なページなら問題ないかも。\nuseState()とか代入する手段がわからなかった。\n\n### React\n\n\n```terminal\n$ npx create-react-app react-app\n```\n\nReactの一番シンプルな構成で作ったページ\n\nhttps://ykhirao.github.io/qiita/jsx-without-react/react/build/\n\nbuildフォルダのサイズは518kbでしたがパフォーマンスは満点でした。\n\nhttps://pagespeed.web.dev/analysis/https-ykhirao-github-io-qiita-jsx-without-react-react-build/nctu9unbxg?hl=ja&form_factor=mobile\n\nここからいろいろ追加したときにパフォーマンスが悪化するんですね。。。すべては人の手によるもの。\n\n## 結論\n\n518キロバイトが801バイトになるのでためしてみてもよいかも・・・？\nsetStateとかが使えなくなるので本当に静的なページなら問題ないと思うが、reactとreact-staticとかで吐き出すとかでも軽いと思うし、なんならpreactとか使ってもよいかもしれない。\n\n\n\n## 参考資料\n\n```jsx\nimport { Page } from '@nakedjsx/core/page'\n```\n\n上記でSimpleにかけそうと思ったが結局トランスパイルやバンドル周り云々をしないとQiita用にソースコードのアップロード(GitHub Pages)できなさそうだったので参考だけに使った\n\nhttps://chriscoyier.net/2023/08/07/jsx-without-react/\n\nbabel/webpack周りはこの資料を参考にした。\n\nhttps://dev.to/devsmitra/how-to-create-the-app-using-jsx-without-react-k08\n\nreact/jsx-runtimeの周りの理解は旧公式ドキュメントを参考にした。\n\nhttps://ja.legacy.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html\n\n素のReactにWebpack導入するやり方の参考\n\nhttps://zenn.dev/spacemarket/articles/23e5401a074ccc\n\n","coediting":false,"comments_count":0,"created_at":"2023-12-11T15:56:31+09:00","group":null,"id":"ea37e73dec3e51d0c907","likes_count":1,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"JavaScript","versions":[]},{"name":"JSX","versions":[]},{"name":"webpack","versions":[]},{"name":"React","versions":[]}],"title":"ReactなしでJSXを使う / JSX without React","updated_at":"2023-12-11T15:58:16+09:00","url":"https://qiita.com/ykhirao/items/ea37e73dec3e51d0c907","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":103,"github_login_name":"ykhirao","id":"ykhirao","items_count":83,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false}},"path":"posts/ea37e73dec3e51d0c907"}
