{"template":"__react_static_root__/src/pages/posts.tsx","sharedHashesByProp":{},"data":{"posts":[{"rendered_body":"<h1 data-sourcepos=\"1:1-1:14\">\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n<p data-sourcepos=\"3:1-4:101\">最近短縮URLの事故とかよく見るので、エンジニアとしてなんだかなあと思っていて、Firebaseで短縮URLサービス作ったので、クローンして使ってほしいです。<br>\nよいと思ったらいいね、保存、同僚とかに拡散していただけると。。。<img alt=\":bow:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f647.png\" title=\":bow:\" width=\"20\" loading=\"lazy\"></p>\n<h2 data-sourcepos=\"6:1-6:54\">\n<span id=\"2023年11月現在短縮urlを取り巻く現状\" class=\"fragment\"></span><a href=\"#2023%E5%B9%B411%E6%9C%88%E7%8F%BE%E5%9C%A8%E7%9F%AD%E7%B8%AEurl%E3%82%92%E5%8F%96%E3%82%8A%E5%B7%BB%E3%81%8F%E7%8F%BE%E7%8A%B6\"><i class=\"fa fa-link\"></i></a>2023年11月現在、短縮URLを取り巻く現状</h2>\n<h3 data-sourcepos=\"8:1-8:79\">\n<span id=\"フィッシング詐欺に利用されたとして世間を騒がせた\" class=\"fragment\"></span><a href=\"#%E3%83%95%E3%82%A3%E3%83%83%E3%82%B7%E3%83%B3%E3%82%B0%E8%A9%90%E6%AC%BA%E3%81%AB%E5%88%A9%E7%94%A8%E3%81%95%E3%82%8C%E3%81%9F%E3%81%A8%E3%81%97%E3%81%A6%E4%B8%96%E9%96%93%E3%82%92%E9%A8%92%E3%81%8C%E3%81%9B%E3%81%9F\"><i class=\"fa fa-link\"></i></a>フィッシング詐欺に利用された？として世間を騒がせた</h3>\n<p data-sourcepos=\"10:1-10:189\">現状フリーの短縮URLサイト使って多くの被害事例が出ている状況で、多くの人に見てほしいので拡散されやすそうなタイトルになってます。</p>\n<ul data-sourcepos=\"12:1-14:0\">\n<li data-sourcepos=\"12:1-12:221\"><a href=\"https://www.itmedia.co.jp/news/articles/2311/15/news194.html\" rel=\"nofollow noopener\" target=\"_blank\">原因は「短縮URL」か？　QRコードから不正サイトへ誘導される事例が相次ぐ　オートバックスセブン、学習院大学も</a></li>\n<li data-sourcepos=\"13:1-14:0\"><a href=\"https://www.soumu.go.jp/main_sosiki/cybersecurity/kokumin/enduser/enduser_security02_05.html\" rel=\"nofollow noopener\" target=\"_blank\">SNS利用上の注意点｜国民のためのサイバーセキュリティサイト</a></li>\n</ul>\n<p data-sourcepos=\"15:1-15:306\">今回の先日起きたフィッシング詐欺の問題は短縮URLそのものではなく、短縮URLを運営しているサイトさんが「サーバー費用捻出などのため」などに利用していたGoogle広告にフィッシング詐欺広告が紛れていた、という認識です。</p>\n<p data-sourcepos=\"17:1-17:105\">なので今回の件、Google広告が悪いという認識。認識ずれていたらすみません。</p>\n<p data-sourcepos=\"19:1-19:393\">私も法人契約で月額数千円の委託料で短縮URLサイト作ってくれと言われたらホスティング作れますが、一般ユーザーが作う急にアクセス過多になったりするサービスを運営するのはちょっと気が引けます。それを加味しても国産の短縮URLサイト運営している人たちはすごいな、、と思います。</p>\n<h3 data-sourcepos=\"21:1-21:52\">\n<span id=\"短縮urlサイトはどんどん移り変わる\" class=\"fragment\"></span><a href=\"#%E7%9F%AD%E7%B8%AEurl%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AF%E3%81%A9%E3%82%93%E3%81%A9%E3%82%93%E7%A7%BB%E3%82%8A%E5%A4%89%E3%82%8F%E3%82%8B\"><i class=\"fa fa-link\"></i></a>短縮URLサイトはどんどん移り変わる</h3>\n<h4 data-sourcepos=\"23:1-23:48\">\n<span id=\"2019年にサービスが終了したgoogl\" class=\"fragment\"></span><a href=\"#2019%E5%B9%B4%E3%81%AB%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%8C%E7%B5%82%E4%BA%86%E3%81%97%E3%81%9Fgoogl\"><i class=\"fa fa-link\"></i></a>2019年にサービスが終了したgoo.gl</h4>\n<ul data-sourcepos=\"25:1-26:0\">\n<li data-sourcepos=\"25:1-26:0\"><a href=\"https://webtan.impress.co.jp/u/2018/04/05/28895\" rel=\"nofollow noopener\" target=\"_blank\">GoogleのURL短縮サービスが終了（2019年3月末終了済）。代わりとなるサービスはどれ？</a></li>\n</ul>\n<h4 data-sourcepos=\"27:1-27:82\">\n<span id=\"firebase-dynamic-links-は2025-年-8-月-25-日を持って使えなくなる\" class=\"fragment\"></span><a href=\"#firebase-dynamic-links-%E3%81%AF2025-%E5%B9%B4-8-%E6%9C%88-25-%E6%97%A5%E3%82%92%E6%8C%81%E3%81%A3%E3%81%A6%E4%BD%BF%E3%81%88%E3%81%AA%E3%81%8F%E3%81%AA%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Firebase Dynamic Links は2025 年 8 月 25 日を持って使えなくなる</h4>\n<ul data-sourcepos=\"28:1-29:0\">\n<li data-sourcepos=\"28:1-29:0\"><a href=\"https://firebase.google.com/support/dynamic-links-faq?hl=ja\" rel=\"nofollow noopener\" target=\"_blank\">Dynamic Links の非推奨に関するよくある質問  |  Firebase</a></li>\n</ul>\n<h3 data-sourcepos=\"30:1-30:37\">\n<span id=\"その他有名な短縮サイト\" class=\"fragment\"></span><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96%E6%9C%89%E5%90%8D%E3%81%AA%E7%9F%AD%E7%B8%AE%E3%82%B5%E3%82%A4%E3%83%88\"><i class=\"fa fa-link\"></i></a>その他有名な短縮サイト</h3>\n<ul data-sourcepos=\"32:1-34:0\">\n<li data-sourcepos=\"32:1-34:0\">\n<a href=\"https://bitly.com/\" rel=\"nofollow noopener\" target=\"_blank\">Bitly</a>\n<ul data-sourcepos=\"33:5-34:0\">\n<li data-sourcepos=\"33:5-34:0\">英語でいいなら一番古くて安心感ある</li>\n</ul>\n</li>\n</ul>\n<h3 data-sourcepos=\"35:1-35:37\">\n<span id=\"今回の記事の動機まとめ\" class=\"fragment\"></span><a href=\"#%E4%BB%8A%E5%9B%9E%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%AE%E5%8B%95%E6%A9%9F%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>今回の記事の動機まとめ</h3>\n<p data-sourcepos=\"37:1-37:252\">なので直接は関係ないですが、法人で営業しているなら短縮URLのサーバー代金は自社でもちましょう（自社でソースコードのホスティング等しましょうよ！）というのが今回の記事です。</p>\n<p data-sourcepos=\"39:1-39:398\">今回の技術は、一日5万クリックとかだと無料で使えるはず（ツイッターに使っても万バズにも耐えられる！）で、超えても100,000クリックあたり$0.06（9円くらい）とかの料金体系になると思います。なので検討の余地はあるかと思います。（Firestoreの料金のみの計算、functions側の計算は別途必要）</p>\n<p data-sourcepos=\"41:1-41:459\">以下ソースコードもMITライセンスで<a href=\"https://github.com/ykhirao/short-url\" rel=\"nofollow noopener\" target=\"_blank\">GitHub上で公開</a>していきますし、Firestore等使うので料金体系の簡単な説明もします、DNS設定できたら自社ドメインでも運用できます。この記事を見た非エンジニアの方は、自社の社内SEの方やエンジニアの方に一度記事を投げてみてください。検討はしてくれるかもしれません。</p>\n<p data-sourcepos=\"44:1-44:208\">MITライセンスで、作成者はコードの責任は取れません。自社内でよく検討のうえ利用してください。<a href=\"https://github.com/ykhirao/short-url/blob/main/LICENSE\" rel=\"nofollow noopener\" target=\"_blank\">ライセンス</a></p>\n<h3 data-sourcepos=\"46:1-46:13\">\n<span id=\"お願い\" class=\"fragment\"></span><a href=\"#%E3%81%8A%E9%A1%98%E3%81%84\"><i class=\"fa fa-link\"></i></a>お願い</h3>\n<p data-sourcepos=\"49:1-49:227\">現状の短縮URL界隈にどうにかならないかなあと思っているエンジニアの方は、ぜひレビューお願いしたいです。遠慮なくGitHubでPR等だしてください。イシューください。</p>\n<p data-sourcepos=\"51:1-51:42\"><iframe id=\"qiita-embed-content__f3342a2f694a9654b2f16fa71f5d4bcc\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__f3342a2f694a9654b2f16fa71f5d4bcc\" data-content=\"https%3A%2F%2Fgithub.com%2Fykhirao%2Fshort-url%2Fpulls\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"53:1-53:48\">もしくはTwitterのDMに連絡ください。</p>\n<p data-sourcepos=\"55:1-55:27\"><iframe id=\"qiita-embed-content__6d681c024646e9aa4b03bc5a4be60c61\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__6d681c024646e9aa4b03bc5a4be60c61\" data-content=\"https%3A%2F%2Ftwitter.com%2Fykhirao\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"57:1-57:33\">よろしくお願いします。</p>\n<p data-sourcepos=\"59:1-60:122\">スクショしてもfirestoreのUI変更されたら追従できないので結構端折っている箇所あったりします。<br>\nわかりにくいところは気軽にQiitaへの編集リクエストなど出していただけると助かります。</p>\n<p data-sourcepos=\"62:1-62:218\">セキュリティ上気をつける点とかあればQiita上でコメントくだれると、後日見た人が参考になると思うので、ぜひ優しい口調でコメントいただけると助かります。</p>\n<h1 data-sourcepos=\"64:1-64:76\">\n<span id=\"短縮urlをfirebaseでホスティングできる用にコード書いた\" class=\"fragment\"></span><a href=\"#%E7%9F%AD%E7%B8%AEurl%E3%82%92firebase%E3%81%A7%E3%83%9B%E3%82%B9%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A7%E3%81%8D%E3%82%8B%E7%94%A8%E3%81%AB%E3%82%B3%E3%83%BC%E3%83%89%E6%9B%B8%E3%81%84%E3%81%9F\"><i class=\"fa fa-link\"></i></a>短縮URLをfirebaseでホスティングできる用にコード書いた</h1>\n<h2 data-sourcepos=\"66:1-66:17\">\n<span id=\"firebase周り\" class=\"fragment\"></span><a href=\"#firebase%E5%91%A8%E3%82%8A\"><i class=\"fa fa-link\"></i></a>Firebase周り</h2>\n<p data-sourcepos=\"68:1-68:44\">GoogleのアカウントもっていたらOK</p>\n<h3 data-sourcepos=\"70:1-70:16\">\n<span id=\"cliの設定\" class=\"fragment\"></span><a href=\"#cli%E3%81%AE%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>CLIの設定</h3>\n<p data-sourcepos=\"72:1-72:56\"><iframe id=\"qiita-embed-content__7301cc8260f0057bd1f722cc10dc77cd\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__7301cc8260f0057bd1f722cc10dc77cd\" data-content=\"https%3A%2F%2Ffirebase.google.com%2Fdocs%2Fcli%3Fhl%3Dja%23mac-linux-npm\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"74:1-81:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>npm <span class=\"nb\">install</span> <span class=\"nt\">-g</span> firebase-tools\n<span class=\"gp\">$</span><span class=\"w\"> </span>firebase login\n<span class=\"go\">\ni  Firebase optionally collects CLI and Emulator Suite usage and error reporting information to help improve our products. Data is collected in accordance with Google's privacy policy (https://policies.google.com/privacy) and is not used to identify you.\n\n? Allow Firebase to collect CLI and Emulator Suite usage and error reporting information? (Y/n) \n</span></code></pre></div></div>\n<p data-sourcepos=\"83:1-85:47\">上記メッセージはエラーレポートの話なので Y でも n　でもどちらでもいいのでエンター。<br>\nChromeが開きGoogleのサインイン画面になります。使うアカウントでログインしましょう。<br>\nFirebaseCLIに許可を与えてください。</p>\n<h3 data-sourcepos=\"87:1-87:31\">\n<span id=\"プロジェクトの作成\" class=\"fragment\"></span><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>プロジェクトの作成</h3>\n<p data-sourcepos=\"89:1-89:36\"><iframe id=\"qiita-embed-content__e1e43d2eb0dcb3106cbc3a5a535e9e18\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__e1e43d2eb0dcb3106cbc3a5a535e9e18\" data-content=\"https%3A%2F%2Fconsole.firebase.google.com%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"91:1-91:48\">ここからプロジェクトを作ります。</p>\n<h4 data-sourcepos=\"93:1-93:32\">\n<span id=\"プロジェクトを追加\" class=\"fragment\"></span><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E8%BF%BD%E5%8A%A0\"><i class=\"fa fa-link\"></i></a>プロジェクトを追加</h4>\n<h4 data-sourcepos=\"94:1-94:59\">\n<span id=\"まずプロジェクトに名前を付けましょう\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%9A%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E5%90%8D%E5%89%8D%E3%82%92%E4%BB%98%E3%81%91%E3%81%BE%E3%81%97%E3%82%87%E3%81%86\"><i class=\"fa fa-link\"></i></a>まずプロジェクトに名前を付けましょう</h4>\n<ul data-sourcepos=\"96:1-97:0\">\n<li data-sourcepos=\"96:1-97:0\">こちらは短縮URLのIDになるので自社名などをつけましょう</li>\n</ul>\n<p data-sourcepos=\"98:1-98:163\"><a href=\"https://camo.qiitausercontent.com/83406e640c3ea044fefc256db6bdb44767f17a18/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f33616133663361342d313663342d313564652d373462342d3566323137623339393663392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F3aa3f3a4-16c4-15de-74b4-5f217b3996c9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2219585ee452fe1f244c38030e73bf6a\" alt=\"スクリーンショット 2023-11-20 13.02.29.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/3aa3f3a4-16c4-15de-74b4-5f217b3996c9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F3aa3f3a4-16c4-15de-74b4-5f217b3996c9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f9dfbc84e81a4d131b7f9a62ce29f0cb 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"100:1-101:206\">今回は qiita-link をIDとして設定しました。<br>\nこれは後ほど <a href=\"https://qiita-link.web.app/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://qiita-link.web.app/</a> でサイトを作成できます。もちろん自社ドメインとしてDNS設定いじるならここにはこだわる必要ないかもしれません。</p>\n<h4 data-sourcepos=\"103:1-103:35\">\n<span id=\"アナリティクスの設定\" class=\"fragment\"></span><a href=\"#%E3%82%A2%E3%83%8A%E3%83%AA%E3%83%86%E3%82%A3%E3%82%AF%E3%82%B9%E3%81%AE%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>アナリティクスの設定</h4>\n<p data-sourcepos=\"104:1-104:51\">どちらでもよし。後から設定できる。</p>\n<h4 data-sourcepos=\"106:1-106:32\">\n<span id=\"プロジェクト作成後\" class=\"fragment\"></span><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90%E5%BE%8C\"><i class=\"fa fa-link\"></i></a>プロジェクト作成後</h4>\n<p data-sourcepos=\"108:1-108:99\">リダイレクトされて以下のようなページでいろいろ設定できると思います</p>\n<p data-sourcepos=\"110:1-110:63\"><iframe id=\"qiita-embed-content__f4b0b8b1a70932069a96a1f282c0e6d6\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__f4b0b8b1a70932069a96a1f282c0e6d6\" data-content=\"https%3A%2F%2Fconsole.firebase.google.com%2Fproject%2Fqiita-link%2Foverview\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"112:1-112:163\"><a href=\"https://camo.qiitausercontent.com/7287c7e9915ca2f72bfd38d4fdfe70ec84c6d323/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f31323533613334382d656661382d643365332d383239382d3931376365393737653165392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F1253a348-efa8-d3e3-8298-917ce977e1e9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cc4e6eec901eb602c93817542731ad38\" alt=\"スクリーンショット 2023-11-20 13.06.10.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/1253a348-efa8-d3e3-8298-917ce977e1e9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F1253a348-efa8-d3e3-8298-917ce977e1e9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c600f2cc10286214e9430c3894a06cc9 1x\" loading=\"lazy\"></a></p>\n<h4 data-sourcepos=\"114:1-114:23\">\n<span id=\"firestoreの作成\" class=\"fragment\"></span><a href=\"#firestore%E3%81%AE%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>Firestoreの作成</h4>\n<p data-sourcepos=\"116:1-116:90\">「構築」→「Cloud Firestore」→「データベースを作成」しましょう。</p>\n<p data-sourcepos=\"118:1-119:182\">ロケーションは <code>nam5</code> 一択です。<br>\nhostingをrewriteしてfunctionsに飛ばすやりかたはfunctionsがus-central1 のみ対応しているので、firestore側もus-central1に対応するnam5を設定します。</p>\n<p data-sourcepos=\"121:1-121:104\">rewriteせずにfucionsだけで使う場合はURL長くなるので短縮・・とは？となります</p>\n<p data-sourcepos=\"123:1-123:63\"><a href=\"https://s-xxxxxxxxxxx-uc.a.run.app\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://s-xxxxxxxxxxx-uc.a.run.app</a> → https://<em>yourid</em>.web.app</p>\n<p data-sourcepos=\"125:1-125:163\"><a href=\"https://camo.qiitausercontent.com/5aa024708b8f0941f54ebd3ae503cad8c3b60976/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62343439376666372d656537392d343739352d666132612d6162343463323437663161312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb4497ff7-ee79-4795-fa2a-ab44c247f1a1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=df3725e2bfa4a64f9b9bdf2f376dd889\" alt=\"スクリーンショット 2023-11-20 13.22.30.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b4497ff7-ee79-4795-fa2a-ab44c247f1a1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb4497ff7-ee79-4795-fa2a-ab44c247f1a1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f910f40137e05912cce43aa0333813a8 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"128:1-128:118\">次へ行き、 <code>本番環境モードで開始する</code> を選択してデータベースを作成してください。</p>\n<p data-sourcepos=\"130:1-130:139\">基本は全員に書き込み、読み込み権限を与えずフロント側からのclient sdkからの取得をすべて塞ぎます。</p>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"132:1-134:3\"><div class=\"highlight\"><pre><code><span class=\"err\">allow</span><span class=\"w\"> </span><span class=\"err\">read,</span><span class=\"w\"> </span><span class=\"err\">write:</span><span class=\"w\"> </span><span class=\"err\">if</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"err\">;</span><span class=\"w\">\n</span></code></pre></div></div>\n<p data-sourcepos=\"136:1-136:81\">リンクの作成等は、後ほどBearer認証でAPI受け口を作ります。</p>\n<p data-sourcepos=\"138:1-138:78\">作成したら次はローカルからコードをいじっていきます。</p>\n<h4 data-sourcepos=\"140:1-140:26\">\n<span id=\"課金体系を変更\" class=\"fragment\"></span><a href=\"#%E8%AA%B2%E9%87%91%E4%BD%93%E7%B3%BB%E3%82%92%E5%A4%89%E6%9B%B4\"><i class=\"fa fa-link\"></i></a>課金体系を変更</h4>\n<p data-sourcepos=\"142:1-143:70\">functionsを使うにはblazeにする必要があります。<br>\nこれを設定しないと firebase deployのときに落ちます。</p>\n<p data-sourcepos=\"145:1-145:163\"><a href=\"https://camo.qiitausercontent.com/3603aaf98bb780b50903707c3d2d626066b83188/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61643632396361372d336462342d616438652d636436632d3231366662656465303031312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fad629ca7-3db4-ad8e-cd6c-216fbede0011.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=29b1a721eb65bd521b7670d5ac2bee1f\" alt=\"スクリーンショット 2023-11-20 13.41.30.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/ad629ca7-3db4-ad8e-cd6c-216fbede0011.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fad629ca7-3db4-ad8e-cd6c-216fbede0011.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4146479c90003bbd94f1b5449050058e 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"147:1-147:68\">課金体系はFirebase公式を参考に、現状はスクショ。</p>\n<p data-sourcepos=\"149:1-149:35\"><iframe id=\"qiita-embed-content__132004f47118d13994009684c2ed63b9\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__132004f47118d13994009684c2ed63b9\" data-content=\"https%3A%2F%2Ffirebase.google.com%2Fpricing\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"151:1-151:163\"><a href=\"https://camo.qiitausercontent.com/d559770215f2c30c4c7df78a68c4cba422eb04d4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f38636665373537382d616634622d656330312d626436652d3934306461633531643934662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F8cfe7578-af4b-ec01-bd6e-940dac51d94f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=403af0d5e9aa1d8376f034cb5b22c73c\" alt=\"スクリーンショット 2023-11-20 13.44.21.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/8cfe7578-af4b-ec01-bd6e-940dac51d94f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F8cfe7578-af4b-ec01-bd6e-940dac51d94f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7c5478ac6ce21e2c584b79cf3551bcbc 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"153:1-153:54\">今回はFirestoreとCloud Functionsを使います。</p>\n<p data-sourcepos=\"155:1-155:180\">Cloud Firestoreは「ドキュメントの読み取り」が一番使う予定ですが「読み取り 5 万件/日までは無料。その後は Google Cloud の料金」です。</p>\n<p data-sourcepos=\"157:1-160:199\">Cloud Functionsは「呼び出し」のあたりでしょうか。呼び出しだけなら月に200万件まで無料です。<br>\n「GB-秒数」「CPU-秒数」でいくらかは課金される可能性はあります。<br>\nFunctionsのメモリ割り当てが128MBで、Functions側の処理が重くて8秒かかったとき 0.128GB * 8 = 約1GB秒と計算されます。<br>\nこれが40万回分無料なので、128MBのfunctionsだと320万秒に実行が無料です。みたいな考え方です、詳細は公式ドキュメントみて計算してみてください。</p>\n<p data-sourcepos=\"162:1-162:413\">ちなみに私がメモリ1GBのバッチサーバーを4台並列で1日18時間くらい走らせてたとき今年4月の料金です。重いメモリを使い、時間のかかる処理をすると課金されますが、低メモリで軽い処理をするくらいならGPU時間とかは影響してこない気はしますが、自社で料金プラン等は検討してから導入してください。</p>\n<p data-sourcepos=\"164:1-164:163\"><a href=\"https://camo.qiitausercontent.com/b320a46a4180108fb4a8ea496fcd40c2ed0044d0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f34356232656362342d303039382d633634652d393961302d6666333433343632343130622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F45b2ecb4-0098-c64e-99a0-ff343462410b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=067e7c195be46ddc8335974657c1171e\" alt=\"スクリーンショット 2023-11-20 13.50.02.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/45b2ecb4-0098-c64e-99a0-ff343462410b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F45b2ecb4-0098-c64e-99a0-ff343462410b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=945522962966c61c60dc0ebc4b1fa215 1x\" loading=\"lazy\"></a></p>\n<h2 data-sourcepos=\"169:1-169:41\">\n<span id=\"npm-nodejs環境のインストール\" class=\"fragment\"></span><a href=\"#npm-nodejs%E7%92%B0%E5%A2%83%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"><i class=\"fa fa-link\"></i></a>npm, nodejs環境のインストール</h2>\n<p data-sourcepos=\"171:1-172:94\">他記事に任せます。<br>\n<a href=\"https://nodejs.org/en\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://nodejs.org/en</a> からLTSバージョンのダウンロードでよい気がします。</p>\n<h2 data-sourcepos=\"174:1-174:42\">\n<span id=\"ソースコードのダウンロード\" class=\"fragment\"></span><a href=\"#%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>ソースコードのダウンロード</h2>\n<p data-sourcepos=\"176:1-176:156\"><a href=\"https://github.com/ykhirao/short-url\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/ykhirao/short-url</a> からソースコードをダウンロードしてくる。画面から <code>Code → Download Zip</code> か <code>git clone</code> で。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"178:1-180:3\"><div class=\"highlight\"><pre><code><span class=\"go\">git clone https://github.com/ykhirao/short-url.git\n</span></code></pre></div></div>\n<p data-sourcepos=\"182:1-183:36\">ダウンロードしたレポジトリにterminalから入って、firebaseと接続します。<br>\n選択は以下のような感じ。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"185:1-192:3\"><div class=\"highlight\"><pre><code><span class=\"go\">yk@yk-2 qiita-sample % firebase use --add\n? Which project do you want to add? qiita-link\n? What alias do you want to use for this project? (e.g. staging) staging\n\nCreated alias shortlink for qiita-link.\nNow using alias shortlink (qiita-link)\n</span></code></pre></div></div>\n<p data-sourcepos=\"194:1-194:45\">functionsに行ってデプロイします。</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"196:1-214:3\"><div class=\"highlight\"><pre><code>$ cd functions\n$ npm ci\n\n# たちあがるか検証\n$ firebase serve    \n（中略）\n(http://localhost:5001/qiita-link/us-central1/s).\n\n# ↑立ち上がりが確認できたら、CMD + C か CMD + D でタスクキルする\n\n# 初回はhostingもあるのでこちらでデプロイします\n$ firebase deploy\n\n# 次回からは以下でfunctionsだけデプロイでOK\n$ npm run deploy\n（中略）\nHosting URL: https://qiita-link.web.app\n</code></pre></div></div>\n<p data-sourcepos=\"216:1-216:94\">これでもう使えるようになりました！！ <img alt=\":tada:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f389.png\" title=\":tada:\" width=\"20\" loading=\"lazy\">  <img alt=\":tada:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f389.png\" title=\":tada:\" width=\"20\" loading=\"lazy\">  <img alt=\":tada:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f389.png\" title=\":tada:\" width=\"20\" loading=\"lazy\">  <img alt=\":tada:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f389.png\" title=\":tada:\" width=\"20\" loading=\"lazy\">  <img alt=\":tada:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f389.png\" title=\":tada:\" width=\"20\" loading=\"lazy\"></p>\n<p data-sourcepos=\"219:1-219:96\"><code>Hosting URL: https://qiita-link.web.app</code> となっていたURLにアクセスしましょう。</p>\n<p data-sourcepos=\"221:1-221:27\"><iframe id=\"qiita-embed-content__2b65cca6bc253f4d28d9056419eecf5c\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__2b65cca6bc253f4d28d9056419eecf5c\" data-content=\"https%3A%2F%2Fqiita-link.web.app%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"223:1-223:163\"><a href=\"https://camo.qiitausercontent.com/51921cc2ee07f6cd2587bac5174231ad37707b52/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62303564386134322d376630342d363835382d303133332d3864653766373061386663632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb05d8a42-7f04-6858-0133-8de7f70a8fcc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=eed1ffd89d0c297643cfa188e467e33c\" alt=\"スクリーンショット 2023-11-20 13.58.18.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b05d8a42-7f04-6858-0133-8de7f70a8fcc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb05d8a42-7f04-6858-0133-8de7f70a8fcc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d93f2c48519dbc0db3271d9bd41359e2 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"225:1-226:178\">こんな感じになっていたらOK。<br>\nこのページは public/index.html を編集したら自社サイトへのリンクを持ってきたりいろいろできるので必要なかたはいじってください。</p>\n<p data-sourcepos=\"228:1-228:76\">あとはfirebaseのコンソールから以下のように設定したらOK</p>\n<p data-sourcepos=\"230:1-230:82\"><iframe id=\"qiita-embed-content__a0e289a756135184fc0135dd634362aa\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__a0e289a756135184fc0135dd634362aa\" data-content=\"https%3A%2F%2Fconsole.firebase.google.com%2Fproject%2Fqiita-link%2Ffirestore%2Fdata%2F%7E2Flinks%7E2F1\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"232:1-232:163\"><a href=\"https://camo.qiitausercontent.com/ea4017d32bcaef9ed8d012e9fadc6aefef472617/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32626561323861392d643665332d666666642d356566662d3266373862326236656138372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2bea28a9-d6e3-fffd-5eff-2f78b2b6ea87.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=aa1e960d4316406496487426c10bcbef\" alt=\"スクリーンショット 2023-11-20 13.59.40.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2bea28a9-d6e3-fffd-5eff-2f78b2b6ea87.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2bea28a9-d6e3-fffd-5eff-2f78b2b6ea87.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5c8a604eb5e94d12639dccb5785b021c 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"234:1-234:205\">この設定の場合は <code>https://qiita-link.web.app/s/1</code> が <code>https://www.google.com/</code> にリダイレクトされたら完成です。qiita-linkは最初に設定した自社のIDなどが入ります。</p>\n<h1 data-sourcepos=\"236:1-236:23\">\n<span id=\"以下開発者向け\" class=\"fragment\"></span><a href=\"#%E4%BB%A5%E4%B8%8B%E9%96%8B%E7%99%BA%E8%80%85%E5%90%91%E3%81%91\"><i class=\"fa fa-link\"></i></a>以下開発者向け</h1>\n<p data-sourcepos=\"238:1-239:83\">VSCodeのRestClient拡張機能向けツールは設定済みです。<br>\nrequest.http を.gitignoreしているのでコピーして使ってください。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"241:1-243:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">cp </span>request.http.sample request.http\n</code></pre></div></div>\n<p data-sourcepos=\"245:1-245:30\">以下が参考になります</p>\n<p data-sourcepos=\"247:1-247:54\"><iframe id=\"qiita-embed-content__48b124ad7242f19538ff7ad3e6cb5f6d\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__48b124ad7242f19538ff7ad3e6cb5f6d\" data-content=\"https%3A%2F%2Fqiita.com%2Ftoshi0607%2Fitems%2Fc4440d3fbfa72eac840c\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<h2 data-sourcepos=\"249:1-249:32\">\n<span id=\"adminトークン作成\" class=\"fragment\"></span><a href=\"#admin%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>Admin（トークン作成）</h2>\n<p data-sourcepos=\"251:1-251:95\"><a href=\"https://qiita-link.web.app/s/init\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://qiita-link.web.app/s/init</a> にアクセスするもしくはhttpファイルから叩く</p>\n<div class=\"code-frame\" data-lang=\"http\" data-sourcepos=\"253:1-262:3\">\n<div class=\"code-lang\"><span class=\"bold\">request.http</span></div>\n<div class=\"highlight\"><pre><code><span class=\"err\">@local_token = \n@production_token = \n@project_id = qiita-link\n@local_url = http://http://127.0.0.1:5002\n@production_url = https://{{project_id}}.web.app\n\n### INIT\nGET {{production_url}}/s/init\n</span></code></pre></div>\n</div>\n<p data-sourcepos=\"264:1-264:163\"><a href=\"https://camo.qiitausercontent.com/709a9fea1a4c038ef393de40e0918a2ae590407d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f31343437656563392d313136352d643630342d613132312d3234333030373531393363372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F1447eec9-1165-d604-a121-2430075193c7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=29fe3a0781c98a059e093003c562c268\" alt=\"スクリーンショット 2023-11-20 14.05.07.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/1447eec9-1165-d604-a121-2430075193c7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F1447eec9-1165-d604-a121-2430075193c7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=08f18b35d8c6761dc65fb2beb547d335 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"266:1-266:117\">そしたらFirebase上に96桁のTokenが生成されているのでそれをコピーして使ってください。</p>\n<p data-sourcepos=\"268:1-268:163\"><a href=\"https://camo.qiitausercontent.com/c9edae2318563861747153e77c8373a70f143cf6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32636132366232332d343530312d613761332d366239332d3730663833396631386134312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2ca26b23-4501-a7a3-6b93-70f839f18a41.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f85a1226d73194328bb9a1c448849d77\" alt=\"スクリーンショット 2023-11-20 14.06.16.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2ca26b23-4501-a7a3-6b93-70f839f18a41.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2ca26b23-4501-a7a3-6b93-70f839f18a41.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d97ecade21524940c08152b810e719ea 1x\" loading=\"lazy\"></a></p>\n<div class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"271:1-289:3\"><div class=\"highlight\"><pre><code><span class=\"vi\">@production_token</span> <span class=\"o\">=</span> <span class=\"err\">ここに今作ったトークンをコピペ</span>\n<span class=\"vi\">@project_id</span> <span class=\"o\">=</span> <span class=\"n\">qiita</span><span class=\"o\">-</span><span class=\"n\">link</span>\n<span class=\"vi\">@production_url</span> <span class=\"o\">=</span> <span class=\"n\">https</span><span class=\"ss\">:/</span><span class=\"o\">/</span><span class=\"p\">{{</span><span class=\"n\">project_id</span><span class=\"p\">}}.</span><span class=\"nf\">web</span><span class=\"p\">.</span><span class=\"nf\">app</span>\n\n<span class=\"c1\">### コンテンツ作成</span>\n<span class=\"c1\"># POST {{production_url}}/s</span>\n<span class=\"no\">POST</span> <span class=\"p\">{{</span><span class=\"n\">production_function_url</span><span class=\"p\">}}</span><span class=\"o\">/</span><span class=\"n\">s</span>\n<span class=\"no\">Content</span><span class=\"o\">-</span><span class=\"no\">Type</span><span class=\"p\">:</span> <span class=\"n\">application</span><span class=\"o\">/</span><span class=\"n\">json</span>\n<span class=\"no\">Authorization</span><span class=\"p\">:</span> <span class=\"no\">Bearer</span> <span class=\"p\">{{</span><span class=\"n\">production_token</span><span class=\"p\">}}</span>\n\n<span class=\"p\">{</span>\n    <span class=\"s2\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"3\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://www.google.com/\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"ogps\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"&lt;meta property='og:title' content='我々のWebサイトです' /&gt;\"</span><span class=\"p\">,</span>\n    <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p data-sourcepos=\"291:1-291:76\">そしたら次はここのコンテンツ作成の部分でpostします。</p>\n<p data-sourcepos=\"295:1-295:155\">Qiitaのこの記事へのリンクにワンちゃんのOGP付きのリンクを貼りたいときは以下のようなポストをすると使えます。</p>\n<div class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"297:1-316:3\"><div class=\"highlight\"><pre><code><span class=\"c1\">### コンテンツ作成</span>\n<span class=\"no\">POST</span> <span class=\"p\">{{</span><span class=\"n\">production_url</span><span class=\"p\">}}</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"o\">/</span><span class=\"n\">links</span>\n<span class=\"no\">Content</span><span class=\"o\">-</span><span class=\"no\">Type</span><span class=\"p\">:</span> <span class=\"n\">application</span><span class=\"o\">/</span><span class=\"n\">json</span>\n<span class=\"no\">Authorization</span><span class=\"p\">:</span> <span class=\"no\">Bearer</span> <span class=\"p\">{{</span><span class=\"n\">production_token</span><span class=\"p\">}}</span>\n\n<span class=\"p\">{</span>\n    <span class=\"s2\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"6\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://qiita.com/ykhirao/items/b4a15ffbe12a4251ae91\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"ogps\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"&lt;meta property='og:url' content='https://qiita.com/ykhirao/items/b4a15ffbe12a4251ae91' /&gt;\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"&lt;meta property='og:type' content='website' /&gt;\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"&lt;meta property='og:title' content='自社Qiitaへのリンク' /&gt;\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"&lt;meta property='og:description' content='Firebaseで使える短縮URLサイト作ったので使ってほしいという記事です。' /&gt;\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"&lt;meta property='og:site_name' content='Qiita | ブログ' /&gt;\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"&lt;meta name='twitter:card' content='summary_large_image' /&gt;\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"&lt;meta property='og:image' content='https://imgur.com/6xGMXaM.jpg' /&gt;\"</span>\n    <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p data-sourcepos=\"318:1-318:163\"><a href=\"https://camo.qiitausercontent.com/92fd9fdde9cef71c2d157b9194c969ffcdb652df/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61646163303131372d653066622d303633662d333331642d6535663431363735666362392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fadac0117-e0fb-063f-331d-e5f41675fcb9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=013cc1f77e4d84fecc519e53b0e7375a\" alt=\"スクリーンショット 2023-11-20 21.18.53.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/adac0117-e0fb-063f-331d-e5f41675fcb9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fadac0117-e0fb-063f-331d-e5f41675fcb9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=10be7ec0cd3c235b62a52500b4154442 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"321:1-322:194\">ツイッターに投稿するとこんな感じで表示されます。いい感じですね。<br>\nリダイレクト先はQiitaのOGPが設定されているはずですが、リダイレクト元に設定できるようにしているのでいい感じに上書きできると思います。</p>\n<p data-sourcepos=\"324:1-324:32\"><code>https://qiita-link.web.app/s/6</code></p>\n<p data-sourcepos=\"327:1-327:30\"><iframe id=\"qiita-embed-content__a29b8ca280a5057ca0884069325d7d69\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__a29b8ca280a5057ca0884069325d7d69\" data-content=\"https%3A%2F%2Fqiita-link.web.app%2Fs%2F6\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"329:1-329:52\"><iframe id=\"qiita-embed-content__1ec75219f8b8542179ff1613d09f9ec5\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__1ec75219f8b8542179ff1613d09f9ec5\" data-content=\"https%3A%2F%2Fqiita.com%2Fykhirao%2Fitems%2Fb4a15ffbe12a4251ae91\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"331:1-331:45\">以下QiitaとTwitterでのOGPの見え方。</p>\n<p data-sourcepos=\"333:1-333:163\"><a href=\"https://camo.qiitausercontent.com/4c0cd4b2e794e3b7e3fea60b4c89dc7e5e27939b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f35386530663431632d616261632d363432352d353265372d3662326436656530623435372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F58e0f41c-abac-6425-52e7-6b2d6ee0b457.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bd361a1562cc9e2d556b920b672c015e\" alt=\"スクリーンショット 2023-11-20 21.25.25.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/58e0f41c-abac-6425-52e7-6b2d6ee0b457.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F58e0f41c-abac-6425-52e7-6b2d6ee0b457.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e0186ab271038fc547913c523675222a 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"335:1-335:163\"><a href=\"https://camo.qiitausercontent.com/2e38e368894ebdf88ff80a66b914a5a51187db3f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f35316537636533612d316666652d303331612d323664302d6466343033363466653031362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F51e7ce3a-1ffe-031a-26d0-df40364fe016.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ee1a77ada178ced2e3ac8f9aa976b799\" alt=\"スクリーンショット 2023-11-20 21.19.38.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/51e7ce3a-1ffe-031a-26d0-df40364fe016.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F51e7ce3a-1ffe-031a-26d0-df40364fe016.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a405a70d3954c09e862b4963a8eaf568 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"337:1-337:374\">ちなみにFirebaseはGoogle運営（グーグル合同会社の日本法人）なので、短縮リンク使って詐欺とかやって警察沙汰になったらもちろん情報開示されるので、短縮リンク使っていろいろやるのはやめたほうがいいと思います。qiita-link.web.appもすぐに利用停止にさせられると思います。</p>\n<p data-sourcepos=\"339:1-339:220\">Qiitaの下書き中のURLが <a href=\"https://qiita.com/drafts/b4a15ffbe12a4251ae91/edit\" class=\"autolink\">https://qiita.com/drafts/b4a15ffbe12a4251ae91/edit</a> なので 公開URLは <a href=\"https://qiita.com/ykhirao/items/b4a15ffbe12a4251ae91\" class=\"autolink\">https://qiita.com/ykhirao/items/b4a15ffbe12a4251ae91</a> として決め打ちしたがあっているかな <img alt=\":thinking:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f914.png\" title=\":thinking:\" width=\"20\" loading=\"lazy\"></p>\n<h1 data-sourcepos=\"342:1-342:32\">\n<span id=\"ローカル開発について\" class=\"fragment\"></span><a href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E9%96%8B%E7%99%BA%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a>ローカル開発について</h1>\n<p data-sourcepos=\"344:1-344:119\">PRとか投げてくださる人はある程度 README.md に書いていますが、以下2つターミナルで実行</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"346:1-349:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>firebase emulators:start\n<span class=\"nv\">$ </span><span class=\"nb\">cd </span>functions <span class=\"o\">&amp;&amp;</span> npm run build:watch\n</code></pre></div></div>\n<p data-sourcepos=\"351:1-351:89\"><a href=\"http://127.0.0.1:4000/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://127.0.0.1:4000/</a> でエミュレーターが立ち上がるので操作します。</p>\n<p data-sourcepos=\"353:1-353:163\"><a href=\"https://camo.qiitausercontent.com/a6f67286337bed049ae3cedab2316a39e07cbfb4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36643533313334642d306162342d363637382d393432342d3333343136646232333239332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6d53134d-0ab4-6678-9424-33416db23293.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=67f988b75fc0a5701de548eb2b2baa22\" alt=\"スクリーンショット 2023-11-20 21.30.07.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6d53134d-0ab4-6678-9424-33416db23293.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6d53134d-0ab4-6678-9424-33416db23293.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ebe95ccd99feb4c597c87b3ff012ee61 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"355:1-355:45\">開発のログとかもここに出ます。</p>\n<p data-sourcepos=\"357:1-357:132\">Firestoreのデータもここに格納され、エミュレーター立ち上げるたびにデータの初期化は必要です。</p>\n<details><summary>index.tsのソースコード全文</summary>\n<div class=\"code-frame\" data-lang=\"ts\" data-sourcepos=\"361:1-498:3\"><div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">onRequest</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">firebase-functions/v2/https</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"o\">*</span> <span class=\"k\">as</span> <span class=\"nx\">logger</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">firebase-functions/logger</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"o\">*</span> <span class=\"k\">as</span> <span class=\"nx\">express</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">express</span><span class=\"dl\">'</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"o\">*</span> <span class=\"k\">as</span> <span class=\"nx\">admin</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">firebase-admin</span><span class=\"dl\">'</span><span class=\"p\">;</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">app</span> <span class=\"o\">=</span> <span class=\"nf\">express</span><span class=\"p\">();</span>\n<span class=\"nx\">app</span><span class=\"p\">.</span><span class=\"nf\">use</span><span class=\"p\">(</span><span class=\"nx\">express</span><span class=\"p\">.</span><span class=\"nf\">json</span><span class=\"p\">());</span>\n<span class=\"nx\">app</span><span class=\"p\">.</span><span class=\"nf\">use</span><span class=\"p\">(</span><span class=\"nx\">express</span><span class=\"p\">.</span><span class=\"nf\">urlencoded</span><span class=\"p\">({</span> <span class=\"na\">extended</span><span class=\"p\">:</span> <span class=\"kc\">true</span> <span class=\"p\">}));</span>\n<span class=\"nx\">admin</span><span class=\"p\">.</span><span class=\"nf\">initializeApp</span><span class=\"p\">();</span>\n<span class=\"kd\">const</span> <span class=\"nx\">db</span> <span class=\"o\">=</span> <span class=\"nx\">admin</span><span class=\"p\">.</span><span class=\"nf\">firestore</span><span class=\"p\">();</span>\n<span class=\"kd\">const</span> <span class=\"nx\">LINKS_COL</span> <span class=\"o\">=</span> <span class=\"nx\">db</span><span class=\"p\">.</span><span class=\"nf\">collection</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">links</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n<span class=\"kd\">const</span> <span class=\"nx\">USERS_COL</span> <span class=\"o\">=</span> <span class=\"nx\">db</span><span class=\"p\">.</span><span class=\"nf\">collection</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">users</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n\n<span class=\"kd\">const</span> <span class=\"p\">{</span>\n  <span class=\"nx\">NODE_ENV</span><span class=\"p\">,</span>\n  <span class=\"nx\">FUNCTIONS_EMULATOR</span><span class=\"p\">,</span>\n  <span class=\"nx\">FIREBASE_DEBUG_MODE</span><span class=\"p\">,</span>\n  <span class=\"nx\">GCLOUD_PROJECT</span><span class=\"p\">,</span>\n<span class=\"p\">}</span> <span class=\"o\">=</span> <span class=\"nx\">process</span><span class=\"p\">.</span><span class=\"nx\">env</span><span class=\"p\">;</span>\n<span class=\"kd\">const</span> <span class=\"nx\">isDevelopment</span> <span class=\"o\">=</span> <span class=\"nx\">NODE_ENV</span> <span class=\"o\">===</span> <span class=\"dl\">'</span><span class=\"s1\">development</span><span class=\"dl\">'</span> <span class=\"o\">||</span> <span class=\"nx\">FUNCTIONS_EMULATOR</span> <span class=\"o\">===</span> <span class=\"dl\">'</span><span class=\"s1\">true</span><span class=\"dl\">'</span> <span class=\"o\">||</span> <span class=\"nx\">FIREBASE_DEBUG_MODE</span> <span class=\"o\">===</span> <span class=\"dl\">'</span><span class=\"s1\">true</span><span class=\"dl\">'</span><span class=\"p\">;</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">NOT_EXISTS_URL</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">https://google.com</span><span class=\"dl\">'</span><span class=\"p\">;</span> <span class=\"c1\">// リンク切れなど自社のHPなどに飛ばす場合はここを変更</span>\n<span class=\"kd\">const</span> <span class=\"nx\">CACHE_CONTROL_TIME</span> <span class=\"o\">=</span> <span class=\"nx\">isDevelopment</span> <span class=\"p\">?</span> <span class=\"mi\">0</span> <span class=\"p\">:</span> <span class=\"mi\">300</span><span class=\"p\">;</span> <span class=\"c1\">// 本番は5分間キャッシュさせる</span>\n<span class=\"kd\">const</span> <span class=\"nx\">REDIRECT_TIME</span> <span class=\"o\">=</span> <span class=\"nx\">isDevelopment</span> <span class=\"p\">?</span> <span class=\"mi\">3</span> <span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"c1\">// 本番はリダイレクトまで0秒</span>\n<span class=\"kd\">const</span> <span class=\"nx\">BASE_URL</span> <span class=\"o\">=</span> <span class=\"nx\">isDevelopment</span> <span class=\"p\">?</span> <span class=\"s2\">`http://localhost:5002`</span> <span class=\"p\">:</span> <span class=\"s2\">`https://</span><span class=\"p\">${</span><span class=\"nx\">GCLOUD_PROJECT</span><span class=\"p\">}</span><span class=\"s2\">.web.app`</span><span class=\"p\">;</span>\n\n<span class=\"kd\">type</span> <span class=\"nx\">LinkDocType</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"nx\">url</span><span class=\"p\">?:</span> <span class=\"kr\">string</span><span class=\"p\">;</span>\n  <span class=\"nl\">ogps</span><span class=\"p\">?:</span> <span class=\"kr\">string</span><span class=\"p\">[];</span>\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/** Adminユーザーの初期化 */</span>\n<span class=\"kd\">const</span> <span class=\"nx\">initAdminFunc</span> <span class=\"o\">=</span> <span class=\"k\">async </span><span class=\"p\">(</span><span class=\"nx\">_req</span><span class=\"p\">:</span> <span class=\"nx\">express</span><span class=\"p\">.</span><span class=\"nx\">Request</span><span class=\"p\">,</span> <span class=\"nx\">res</span><span class=\"p\">:</span> <span class=\"nx\">express</span><span class=\"p\">.</span><span class=\"nx\">Response</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">adminDoc</span> <span class=\"o\">=</span> <span class=\"nx\">USERS_COL</span><span class=\"p\">.</span><span class=\"nf\">doc</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">admin</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">user</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"nx\">adminDoc</span><span class=\"p\">.</span><span class=\"nf\">get</span><span class=\"p\">();</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"nx\">user</span><span class=\"p\">.</span><span class=\"nx\">exists</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">Already initialized</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"p\">{</span>\n    <span class=\"c1\">// Tokenの強さはお好みで変更お願いします。</span>\n    <span class=\"c1\">// Link作成時にヘッダーの `Authorization: Bearer &lt;token&gt;` で認証する</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">token</span> <span class=\"o\">=</span> <span class=\"nf\">require</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">crypto</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nf\">randomBytes</span><span class=\"p\">(</span><span class=\"mi\">48</span><span class=\"p\">).</span><span class=\"nf\">toString</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">hex</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n    <span class=\"k\">await</span> <span class=\"nx\">adminDoc</span><span class=\"p\">.</span><span class=\"nf\">set</span><span class=\"p\">({</span> <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">admin</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"nx\">token</span> <span class=\"p\">});</span>\n    <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">Initialized!</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/** リダイレクト処理 */</span>\n<span class=\"kd\">const</span> <span class=\"nx\">redirectFunc</span> <span class=\"o\">=</span> <span class=\"k\">async </span><span class=\"p\">(</span><span class=\"nx\">req</span><span class=\"p\">:</span> <span class=\"nx\">express</span><span class=\"p\">.</span><span class=\"nx\">Request</span><span class=\"p\">,</span> <span class=\"nx\">res</span><span class=\"p\">:</span> <span class=\"nx\">express</span><span class=\"p\">.</span><span class=\"nx\">Response</span><span class=\"p\">):</span> <span class=\"nb\">Promise</span><span class=\"o\">&lt;</span><span class=\"kr\">any</span><span class=\"o\">&gt;</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">id</span> <span class=\"o\">=</span> <span class=\"nx\">req</span><span class=\"p\">.</span><span class=\"nx\">params</span><span class=\"p\">.</span><span class=\"nx\">id</span> <span class=\"o\">||</span> <span class=\"dl\">'</span><span class=\"s1\">0</span><span class=\"dl\">'</span><span class=\"p\">;</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">record</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"nx\">LINKS_COL</span><span class=\"p\">.</span><span class=\"nf\">doc</span><span class=\"p\">(</span><span class=\"nx\">id</span><span class=\"p\">).</span><span class=\"nf\">get</span><span class=\"p\">();</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">data</span> <span class=\"o\">=</span> <span class=\"p\">{</span> <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"nx\">record</span><span class=\"p\">.</span><span class=\"nx\">id</span><span class=\"p\">,</span> <span class=\"p\">...</span><span class=\"nx\">record</span><span class=\"p\">.</span><span class=\"nf\">data</span><span class=\"p\">()</span> <span class=\"p\">}</span> <span class=\"k\">as</span> <span class=\"nx\">LinkDocType</span><span class=\"p\">;</span>\n\n  <span class=\"kd\">const</span> <span class=\"nx\">url</span> <span class=\"o\">=</span> <span class=\"nx\">data</span><span class=\"p\">?.</span><span class=\"nx\">url</span> <span class=\"o\">||</span> <span class=\"nx\">NOT_EXISTS_URL</span><span class=\"p\">;</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">url</span><span class=\"p\">)</span> <span class=\"k\">return</span> <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">status</span><span class=\"p\">(</span><span class=\"mi\">404</span><span class=\"p\">).</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">Not Found</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">const</span> <span class=\"nx\">ogps</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">?.</span><span class=\"nx\">ogps</span> <span class=\"o\">||</span> <span class=\"p\">[]).</span><span class=\"nf\">map</span><span class=\"p\">(</span><span class=\"nx\">ogp</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">ogp</span><span class=\"p\">).</span><span class=\"nf\">join</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"se\">\\n</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n\n  <span class=\"c1\">// レスポンスは5分間キャッシュさせる</span>\n  <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">set</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">Cache-Control</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"s2\">`public, max-age=</span><span class=\"p\">${</span><span class=\"nx\">CACHE_CONTROL_TIME</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">)</span>\n  <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"s2\">`\n  &lt;!DOCTYPE html&gt;\n  &lt;html lang=\"ja\"&gt;\n  &lt;head prefix=\"og: https://ogp.me/ns#\"&gt;\n    &lt;title&gt;Redirect...&lt;/title&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta http-equiv=\"refresh\" content=\"</span><span class=\"p\">${</span><span class=\"nx\">REDIRECT_TIME</span><span class=\"p\">}</span><span class=\"s2\">;URL='</span><span class=\"p\">${</span><span class=\"nx\">url</span><span class=\"p\">}</span><span class=\"s2\">'\" /&gt;\n    &lt;meta name=\"robots\" content=\"noindex\" /&gt;\n    </span><span class=\"p\">${</span><span class=\"nx\">ogps</span><span class=\"p\">}</span><span class=\"s2\">\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;!--\n      &lt;noscript&gt;\n        Redirect: &lt;a href=\"</span><span class=\"p\">${</span><span class=\"nx\">url</span><span class=\"p\">}</span><span class=\"s2\">\"&gt; </span><span class=\"p\">${</span><span class=\"nx\">url</span><span class=\"p\">}</span><span class=\"s2\"> &lt;/a&gt;\n      &lt;/noscript&gt;\n      &lt;script&gt;\n        window.location = \"</span><span class=\"p\">${</span><span class=\"nx\">url</span><span class=\"p\">}</span><span class=\"s2\">\";\n      &lt;/script&gt;\n    --&gt;\n  &lt;/body&gt;\n  &lt;/html&gt;\n  `</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/** Link作成API */</span>\n<span class=\"kd\">const</span> <span class=\"nx\">createFunc</span> <span class=\"o\">=</span> <span class=\"k\">async </span><span class=\"p\">(</span><span class=\"nx\">req</span><span class=\"p\">:</span> <span class=\"nx\">express</span><span class=\"p\">.</span><span class=\"nx\">Request</span><span class=\"p\">,</span> <span class=\"nx\">res</span><span class=\"p\">:</span> <span class=\"nx\">express</span><span class=\"p\">.</span><span class=\"nx\">Response</span><span class=\"p\">):</span> <span class=\"nb\">Promise</span><span class=\"o\">&lt;</span><span class=\"kr\">any</span><span class=\"o\">&gt;</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">logger</span><span class=\"p\">.</span><span class=\"nf\">info</span><span class=\"p\">(</span><span class=\"nx\">req</span><span class=\"p\">.</span><span class=\"nx\">body</span><span class=\"p\">,</span> <span class=\"p\">{</span> <span class=\"na\">structuredData</span><span class=\"p\">:</span> <span class=\"kc\">true</span> <span class=\"p\">});</span>\n\n  <span class=\"c1\">// Adminが作成されてなければエラー</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">admin</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"nx\">USERS_COL</span><span class=\"p\">.</span><span class=\"nf\">doc</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">admin</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nf\">get</span><span class=\"p\">();</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">admin</span><span class=\"p\">.</span><span class=\"nx\">exists</span><span class=\"p\">)</span> <span class=\"k\">return</span> <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">status</span><span class=\"p\">(</span><span class=\"mi\">404</span><span class=\"p\">).</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">Not Found: Admin user is not initialized</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n\n  <span class=\"c1\">// Bearer Tokenがなければ認証エラー</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">token</span> <span class=\"o\">=</span> <span class=\"nx\">req</span><span class=\"p\">.</span><span class=\"nx\">headers</span><span class=\"p\">.</span><span class=\"nx\">authorization</span><span class=\"p\">?.</span><span class=\"nf\">replace</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">Bearer </span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"dl\">''</span><span class=\"p\">);</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"nx\">token</span> <span class=\"o\">==</span> <span class=\"kc\">null</span><span class=\"p\">)</span> <span class=\"k\">return</span> <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">status</span><span class=\"p\">(</span><span class=\"mi\">401</span><span class=\"p\">).</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">Unauthorized: token is required</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n\n  <span class=\"c1\">// Bodyのパース等</span>\n  <span class=\"kd\">const</span> <span class=\"p\">{</span> <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"nx\">reqId</span><span class=\"p\">,</span> <span class=\"nx\">url</span><span class=\"p\">,</span> <span class=\"nx\">ogps</span> <span class=\"o\">=</span> <span class=\"p\">[]</span> <span class=\"p\">}</span> <span class=\"o\">=</span> <span class=\"nx\">req</span><span class=\"p\">.</span><span class=\"nx\">body</span><span class=\"p\">;</span>\n\n  <span class=\"c1\">// URLの存在チェック</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"nx\">url</span> <span class=\"o\">==</span> <span class=\"kc\">null</span><span class=\"p\">)</span> <span class=\"k\">return</span> <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">status</span><span class=\"p\">(</span><span class=\"mi\">400</span><span class=\"p\">).</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">Bad Request: url is required</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">const</span> <span class=\"nx\">id</span> <span class=\"o\">=</span> <span class=\"nx\">reqId</span> <span class=\"o\">||</span> <span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nf\">random</span><span class=\"p\">().</span><span class=\"nf\">toString</span><span class=\"p\">(</span><span class=\"mi\">32</span><span class=\"p\">).</span><span class=\"nf\">substring</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">);</span>\n\n  <span class=\"c1\">// AdminのTokenとBearer Tokenが同じでなければエラー</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">adminToken</span> <span class=\"o\">=</span> <span class=\"nx\">admin</span><span class=\"p\">.</span><span class=\"nf\">data</span><span class=\"p\">()?.</span><span class=\"nx\">token</span><span class=\"p\">;</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"nx\">token</span> <span class=\"o\">!==</span> <span class=\"nx\">adminToken</span><span class=\"p\">)</span> <span class=\"k\">return</span> <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">status</span><span class=\"p\">(</span><span class=\"mi\">401</span><span class=\"p\">).</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"s2\">`Unauthorized: token is not valid`</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">const</span> <span class=\"nx\">ref</span> <span class=\"o\">=</span> <span class=\"nx\">LINKS_COL</span><span class=\"p\">.</span><span class=\"nf\">doc</span><span class=\"p\">(</span><span class=\"nx\">id</span><span class=\"p\">);</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">record</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"nx\">ref</span><span class=\"p\">.</span><span class=\"nf\">get</span><span class=\"p\">();</span>\n\n  <span class=\"c1\">// 該当IDのレコードがすでに存在していればエラー</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"nx\">record</span><span class=\"p\">.</span><span class=\"nx\">exists</span><span class=\"p\">)</span> <span class=\"k\">return</span> <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">status</span><span class=\"p\">(</span><span class=\"mi\">403</span><span class=\"p\">).</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"s2\">`Already exists: </span><span class=\"p\">${</span><span class=\"nx\">id</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">);</span>\n\n  <span class=\"k\">await</span> <span class=\"nx\">ref</span><span class=\"p\">.</span><span class=\"nf\">set</span><span class=\"p\">({</span>\n    <span class=\"nx\">id</span><span class=\"p\">,</span>\n    <span class=\"nx\">url</span><span class=\"p\">,</span>\n    <span class=\"nx\">ogps</span><span class=\"p\">,</span>\n  <span class=\"p\">});</span>\n\n  <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">status</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">).</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"s2\">`OK, created </span><span class=\"p\">${</span><span class=\"nx\">id</span><span class=\"p\">}</span><span class=\"s2\">: </span><span class=\"p\">${</span><span class=\"nx\">BASE_URL</span><span class=\"p\">}</span><span class=\"s2\">/s/</span><span class=\"p\">${</span><span class=\"nx\">id</span><span class=\"p\">}</span><span class=\"s2\"> `</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// Hoting用のルーティング</span>\n<span class=\"c1\">// http://127.0.0.1:5002/s</span>\n<span class=\"nx\">app</span><span class=\"p\">.</span><span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">/s</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"nx\">_req</span><span class=\"p\">,</span> <span class=\"nx\">res</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">send</span><span class=\"p\">(</span><span class=\"mi\">404</span><span class=\"p\">));</span>\n<span class=\"nx\">app</span><span class=\"p\">.</span><span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">/s/users/init</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"nx\">initAdminFunc</span><span class=\"p\">);</span>\n<span class=\"nx\">app</span><span class=\"p\">.</span><span class=\"nf\">post</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">/s/users/init</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"nx\">initAdminFunc</span><span class=\"p\">);</span>\n<span class=\"nx\">app</span><span class=\"p\">.</span><span class=\"nf\">post</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">/s/links</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"nx\">createFunc</span><span class=\"p\">);</span>\n<span class=\"nx\">app</span><span class=\"p\">.</span><span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">/s/:id</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"nx\">redirectFunc</span><span class=\"p\">);</span>\n\n<span class=\"c1\">// Functions側のルーティング, /s をrootとする</span>\n<span class=\"c1\">// http://127.0.0.1:5001/{_YOUR PROJECT_ID_}/us-central1/s → app.get('/', ()=&gt;{})</span>\n<span class=\"c1\">// app.get('/', (_req, res) =&gt; res.send(404));</span>\n\n<span class=\"k\">export</span> <span class=\"kd\">const</span> <span class=\"nx\">s</span> <span class=\"o\">=</span> <span class=\"nf\">onRequest</span><span class=\"p\">(</span><span class=\"nx\">app</span><span class=\"p\">);</span>\n\n</code></pre></div></div>\n</details>\n<p data-sourcepos=\"502:1-503:51\">Qiita用に1ファイルに書いてますが、普通にfunctionごとに別のファイルにしてよいと思います。<br>\n開発進んだら私もわけると思います。</p>\n<p data-sourcepos=\"505:1-505:74\"><code>NOT_EXISTS_URL</code> は自社ように置き換えて使ってください。</p>\n<p data-sourcepos=\"508:1-508:160\">130行くらいなのでさくっと読んでくれたらわかると思いますが、以下3つの関数くらいしかないので読めると思います。</p>\n<div class=\"code-frame\" data-lang=\"ts\" data-sourcepos=\"510:1-514:3\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">initAdminFunc</span> <span class=\"o\">=</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span><span class=\"dl\">'</span><span class=\"s1\">略</span><span class=\"dl\">'</span><span class=\"p\">}</span>\n<span class=\"kd\">const</span> <span class=\"nx\">redirectFunc</span> <span class=\"o\">=</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span><span class=\"dl\">'</span><span class=\"s1\">略</span><span class=\"dl\">'</span><span class=\"p\">}</span>\n<span class=\"kd\">const</span> <span class=\"nx\">createFunc</span> <span class=\"o\">=</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span><span class=\"dl\">'</span><span class=\"s1\">略</span><span class=\"dl\">'</span><span class=\"p\">}</span>\n</code></pre></div></div>\n<p data-sourcepos=\"517:1-517:131\">firebase.jsonはrewriteのところが重要かと思いますが、ほとんどのケースでこのまま使えるはずです。</p>\n<p data-sourcepos=\"519:1-520:113\">index.htmlを書き換えて使ったりいろいろできるとは思います。<br>\nここにReactのアプリをいれて、ログインして編集できるアドミン画面を作る〜〜等。</p>\n<p data-sourcepos=\"522:1-522:145\">firestore.rules は、Firestoreのclient sdkからの書き込みを　<code>if false</code> にしているので色々設定しなおしてください。</p>\n<p data-sourcepos=\"524:1-525:110\">.firebaserc　は人によって変わるので.gitignoreでコミットしないようにしてます。<br>\nCIでマージされたときにデプロイしたい、とかある人はコミット外してください。</p>\n","body":"# はじめに\n\n最近短縮URLの事故とかよく見るので、エンジニアとしてなんだかなあと思っていて、Firebaseで短縮URLサービス作ったので、クローンして使ってほしいです。\nよいと思ったらいいね、保存、同僚とかに拡散していただけると。。。:bow:\n\n## 2023年11月現在、短縮URLを取り巻く現状\n\n### フィッシング詐欺に利用された？として世間を騒がせた\n\n現状フリーの短縮URLサイト使って多くの被害事例が出ている状況で、多くの人に見てほしいので拡散されやすそうなタイトルになってます。\n\n* [原因は「短縮URL」か？　QRコードから不正サイトへ誘導される事例が相次ぐ　オートバックスセブン、学習院大学も](https://www.itmedia.co.jp/news/articles/2311/15/news194.html)\n* [SNS利用上の注意点｜国民のためのサイバーセキュリティサイト](https://www.soumu.go.jp/main_sosiki/cybersecurity/kokumin/enduser/enduser_security02_05.html)\n\n今回の先日起きたフィッシング詐欺の問題は短縮URLそのものではなく、短縮URLを運営しているサイトさんが「サーバー費用捻出などのため」などに利用していたGoogle広告にフィッシング詐欺広告が紛れていた、という認識です。\n\nなので今回の件、Google広告が悪いという認識。認識ずれていたらすみません。\n\n私も法人契約で月額数千円の委託料で短縮URLサイト作ってくれと言われたらホスティング作れますが、一般ユーザーが作う急にアクセス過多になったりするサービスを運営するのはちょっと気が引けます。それを加味しても国産の短縮URLサイト運営している人たちはすごいな、、と思います。\n\n### 短縮URLサイトはどんどん移り変わる\n\n#### 2019年にサービスが終了したgoo.gl\n\n- [GoogleのURL短縮サービスが終了（2019年3月末終了済）。代わりとなるサービスはどれ？](https://webtan.impress.co.jp/u/2018/04/05/28895)\n\n#### Firebase Dynamic Links は2025 年 8 月 25 日を持って使えなくなる\n- [Dynamic Links の非推奨に関するよくある質問  |  Firebase](https://firebase.google.com/support/dynamic-links-faq?hl=ja)\n\n### その他有名な短縮サイト\n\n* [Bitly](https://bitly.com/)\n    * 英語でいいなら一番古くて安心感ある\n\n### 今回の記事の動機まとめ\n\nなので直接は関係ないですが、法人で営業しているなら短縮URLのサーバー代金は自社でもちましょう（自社でソースコードのホスティング等しましょうよ！）というのが今回の記事です。\n\n今回の技術は、一日5万クリックとかだと無料で使えるはず（ツイッターに使っても万バズにも耐えられる！）で、超えても100,000クリックあたり$0.06（9円くらい）とかの料金体系になると思います。なので検討の余地はあるかと思います。（Firestoreの料金のみの計算、functions側の計算は別途必要）\n\n以下ソースコードもMITライセンスで[GitHub上で公開](https://github.com/ykhirao/short-url)していきますし、Firestore等使うので料金体系の簡単な説明もします、DNS設定できたら自社ドメインでも運用できます。この記事を見た非エンジニアの方は、自社の社内SEの方やエンジニアの方に一度記事を投げてみてください。検討はしてくれるかもしれません。\n\n\nMITライセンスで、作成者はコードの責任は取れません。自社内でよく検討のうえ利用してください。[ライセンス](https://github.com/ykhirao/short-url/blob/main/LICENSE)\n\n### お願い\n\n\n現状の短縮URL界隈にどうにかならないかなあと思っているエンジニアの方は、ぜひレビューお願いしたいです。遠慮なくGitHubでPR等だしてください。イシューください。\n\nhttps://github.com/ykhirao/short-url/pulls\n\nもしくはTwitterのDMに連絡ください。\n\nhttps://twitter.com/ykhirao\n\nよろしくお願いします。\n\nスクショしてもfirestoreのUI変更されたら追従できないので結構端折っている箇所あったりします。\nわかりにくいところは気軽にQiitaへの編集リクエストなど出していただけると助かります。\n\nセキュリティ上気をつける点とかあればQiita上でコメントくだれると、後日見た人が参考になると思うので、ぜひ優しい口調でコメントいただけると助かります。\n\n# 短縮URLをfirebaseでホスティングできる用にコード書いた\n\n## Firebase周り\n\nGoogleのアカウントもっていたらOK\n\n### CLIの設定\n\nhttps://firebase.google.com/docs/cli?hl=ja#mac-linux-npm\n\n```terminal\n$ npm install -g firebase-tools\n$ firebase login\n\ni  Firebase optionally collects CLI and Emulator Suite usage and error reporting information to help improve our products. Data is collected in accordance with Google's privacy policy (https://policies.google.com/privacy) and is not used to identify you.\n\n? Allow Firebase to collect CLI and Emulator Suite usage and error reporting information? (Y/n) \n```\n\n上記メッセージはエラーレポートの話なので Y でも n　でもどちらでもいいのでエンター。\nChromeが開きGoogleのサインイン画面になります。使うアカウントでログインしましょう。\nFirebaseCLIに許可を与えてください。\n\n### プロジェクトの作成\n\nhttps://console.firebase.google.com/\n\nここからプロジェクトを作ります。\n\n#### プロジェクトを追加\n#### まずプロジェクトに名前を付けましょう \n\n* こちらは短縮URLのIDになるので自社名などをつけましょう\n\n![スクリーンショット 2023-11-20 13.02.29.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/3aa3f3a4-16c4-15de-74b4-5f217b3996c9.png)\n\n今回は qiita-link をIDとして設定しました。\nこれは後ほど https://qiita-link.web.app/ でサイトを作成できます。もちろん自社ドメインとしてDNS設定いじるならここにはこだわる必要ないかもしれません。\n\n#### アナリティクスの設定\nどちらでもよし。後から設定できる。\n\n#### プロジェクト作成後\n\nリダイレクトされて以下のようなページでいろいろ設定できると思います\n\nhttps://console.firebase.google.com/project/qiita-link/overview\n\n![スクリーンショット 2023-11-20 13.06.10.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/1253a348-efa8-d3e3-8298-917ce977e1e9.png)\n\n#### Firestoreの作成\n\n「構築」→「Cloud Firestore」→「データベースを作成」しましょう。\n\nロケーションは `nam5` 一択です。\nhostingをrewriteしてfunctionsに飛ばすやりかたはfunctionsがus-central1 のみ対応しているので、firestore側もus-central1に対応するnam5を設定します。\n\nrewriteせずにfucionsだけで使う場合はURL長くなるので短縮・・とは？となります\n\nhttps://s-xxxxxxxxxxx-uc.a.run.app → https://_yourid_.web.app\n\n![スクリーンショット 2023-11-20 13.22.30.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b4497ff7-ee79-4795-fa2a-ab44c247f1a1.png)\n\n\n次へ行き、 `本番環境モードで開始する` を選択してデータベースを作成してください。\n\n基本は全員に書き込み、読み込み権限を与えずフロント側からのclient sdkからの取得をすべて塞ぎます。\n\n```json\nallow read, write: if false;\n```\n\nリンクの作成等は、後ほどBearer認証でAPI受け口を作ります。\n\n作成したら次はローカルからコードをいじっていきます。\n\n#### 課金体系を変更\n\nfunctionsを使うにはblazeにする必要があります。\nこれを設定しないと firebase deployのときに落ちます。\n\n![スクリーンショット 2023-11-20 13.41.30.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/ad629ca7-3db4-ad8e-cd6c-216fbede0011.png)\n\n課金体系はFirebase公式を参考に、現状はスクショ。\n\nhttps://firebase.google.com/pricing\n\n![スクリーンショット 2023-11-20 13.44.21.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/8cfe7578-af4b-ec01-bd6e-940dac51d94f.png)\n\n今回はFirestoreとCloud Functionsを使います。\n\nCloud Firestoreは「ドキュメントの読み取り」が一番使う予定ですが「読み取り 5 万件/日までは無料。その後は Google Cloud の料金」です。\n\nCloud Functionsは「呼び出し」のあたりでしょうか。呼び出しだけなら月に200万件まで無料です。\n「GB-秒数」「CPU-秒数」でいくらかは課金される可能性はあります。\nFunctionsのメモリ割り当てが128MBで、Functions側の処理が重くて8秒かかったとき 0.128GB * 8 = 約1GB秒と計算されます。\nこれが40万回分無料なので、128MBのfunctionsだと320万秒に実行が無料です。みたいな考え方です、詳細は公式ドキュメントみて計算してみてください。\n\nちなみに私がメモリ1GBのバッチサーバーを4台並列で1日18時間くらい走らせてたとき今年4月の料金です。重いメモリを使い、時間のかかる処理をすると課金されますが、低メモリで軽い処理をするくらいならGPU時間とかは影響してこない気はしますが、自社で料金プラン等は検討してから導入してください。\n\n![スクリーンショット 2023-11-20 13.50.02.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/45b2ecb4-0098-c64e-99a0-ff343462410b.png)\n\n\n\n\n## npm, nodejs環境のインストール\n\n他記事に任せます。\nhttps://nodejs.org/en からLTSバージョンのダウンロードでよい気がします。\n\n## ソースコードのダウンロード\n\nhttps://github.com/ykhirao/short-url からソースコードをダウンロードしてくる。画面から `Code → Download Zip` か `git clone` で。\n\n```terminal\ngit clone https://github.com/ykhirao/short-url.git\n```\n\nダウンロードしたレポジトリにterminalから入って、firebaseと接続します。\n選択は以下のような感じ。\n\n```terminal\nyk@yk-2 qiita-sample % firebase use --add\n? Which project do you want to add? qiita-link\n? What alias do you want to use for this project? (e.g. staging) staging\n\nCreated alias shortlink for qiita-link.\nNow using alias shortlink (qiita-link)\n```\n\nfunctionsに行ってデプロイします。\n\n```\n$ cd functions\n$ npm ci\n\n# たちあがるか検証\n$ firebase serve    \n（中略）\n(http://localhost:5001/qiita-link/us-central1/s).\n\n# ↑立ち上がりが確認できたら、CMD + C か CMD + D でタスクキルする\n\n# 初回はhostingもあるのでこちらでデプロイします\n$ firebase deploy\n\n# 次回からは以下でfunctionsだけデプロイでOK\n$ npm run deploy\n（中略）\nHosting URL: https://qiita-link.web.app\n```\n\nこれでもう使えるようになりました！！ :tada:  :tada:  :tada:  :tada:  :tada: \n\n\n`Hosting URL: https://qiita-link.web.app` となっていたURLにアクセスしましょう。\n\nhttps://qiita-link.web.app/\n\n![スクリーンショット 2023-11-20 13.58.18.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b05d8a42-7f04-6858-0133-8de7f70a8fcc.png)\n\nこんな感じになっていたらOK。\nこのページは public/index.html を編集したら自社サイトへのリンクを持ってきたりいろいろできるので必要なかたはいじってください。\n\nあとはfirebaseのコンソールから以下のように設定したらOK\n\nhttps://console.firebase.google.com/project/qiita-link/firestore/data/~2Flinks~2F1\n\n![スクリーンショット 2023-11-20 13.59.40.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2bea28a9-d6e3-fffd-5eff-2f78b2b6ea87.png)\n\nこの設定の場合は `https://qiita-link.web.app/s/1` が `https://www.google.com/` にリダイレクトされたら完成です。qiita-linkは最初に設定した自社のIDなどが入ります。\n\n# 以下開発者向け\n\nVSCodeのRestClient拡張機能向けツールは設定済みです。\nrequest.http を.gitignoreしているのでコピーして使ってください。\n\n```terminal\n$ cp request.http.sample request.http\n```\n\n以下が参考になります\n\nhttps://qiita.com/toshi0607/items/c4440d3fbfa72eac840c\n\n## Admin（トークン作成）\n\nhttps://qiita-link.web.app/s/init にアクセスするもしくはhttpファイルから叩く\n\n```request.http\n@local_token = \n@production_token = \n@project_id = qiita-link\n@local_url = http://http://127.0.0.1:5002\n@production_url = https://{{project_id}}.web.app\n\n### INIT\nGET {{production_url}}/s/init\n```\n\n![スクリーンショット 2023-11-20 14.05.07.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/1447eec9-1165-d604-a121-2430075193c7.png)\n\nそしたらFirebase上に96桁のTokenが生成されているのでそれをコピーして使ってください。\n\n![スクリーンショット 2023-11-20 14.06.16.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2ca26b23-4501-a7a3-6b93-70f839f18a41.png)\n\n\n```ruby\n@production_token = ここに今作ったトークンをコピペ\n@project_id = qiita-link\n@production_url = https://{{project_id}}.web.app\n\n### コンテンツ作成\n# POST {{production_url}}/s\nPOST {{production_function_url}}/s\nContent-Type: application/json\nAuthorization: Bearer {{production_token}}\n\n{\n    \"id\": \"3\",\n    \"url\": \"https://www.google.com/\",\n    \"ogps\": [\n        \"<meta property='og:title' content='我々のWebサイトです' />\",\n    ]\n}\n```\n\nそしたら次はここのコンテンツ作成の部分でpostします。\n\n\n\nQiitaのこの記事へのリンクにワンちゃんのOGP付きのリンクを貼りたいときは以下のようなポストをすると使えます。\n\n```ruby\n### コンテンツ作成\nPOST {{production_url}}/s/links\nContent-Type: application/json\nAuthorization: Bearer {{production_token}}\n\n{\n    \"id\": \"6\",\n    \"url\": \"https://qiita.com/ykhirao/items/b4a15ffbe12a4251ae91\",\n    \"ogps\": [\n        \"<meta property='og:url' content='https://qiita.com/ykhirao/items/b4a15ffbe12a4251ae91' />\",\n        \"<meta property='og:type' content='website' />\",\n        \"<meta property='og:title' content='自社Qiitaへのリンク' />\",\n        \"<meta property='og:description' content='Firebaseで使える短縮URLサイト作ったので使ってほしいという記事です。' />\",\n        \"<meta property='og:site_name' content='Qiita | ブログ' />\",\n        \"<meta name='twitter:card' content='summary_large_image' />\",\n        \"<meta property='og:image' content='https://imgur.com/6xGMXaM.jpg' />\"\n    ]\n}\n```\n\n![スクリーンショット 2023-11-20 21.18.53.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/adac0117-e0fb-063f-331d-e5f41675fcb9.png)\n\n\nツイッターに投稿するとこんな感じで表示されます。いい感じですね。\nリダイレクト先はQiitaのOGPが設定されているはずですが、リダイレクト元に設定できるようにしているのでいい感じに上書きできると思います。\n\n`https://qiita-link.web.app/s/6`\n\n\nhttps://qiita-link.web.app/s/6\n\nhttps://qiita.com/ykhirao/items/b4a15ffbe12a4251ae91\n\n以下QiitaとTwitterでのOGPの見え方。\n\n![スクリーンショット 2023-11-20 21.25.25.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/58e0f41c-abac-6425-52e7-6b2d6ee0b457.png)\n\n![スクリーンショット 2023-11-20 21.19.38.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/51e7ce3a-1ffe-031a-26d0-df40364fe016.png)\n\nちなみにFirebaseはGoogle運営（グーグル合同会社の日本法人）なので、短縮リンク使って詐欺とかやって警察沙汰になったらもちろん情報開示されるので、短縮リンク使っていろいろやるのはやめたほうがいいと思います。qiita-link.web.appもすぐに利用停止にさせられると思います。\n\nQiitaの下書き中のURLが https://qiita.com/drafts/b4a15ffbe12a4251ae91/edit なので 公開URLは https://qiita.com/ykhirao/items/b4a15ffbe12a4251ae91 として決め打ちしたがあっているかな :thinking: \n\n\n# ローカル開発について\n\nPRとか投げてくださる人はある程度 README.md に書いていますが、以下2つターミナルで実行\n\n```bash\n$ firebase emulators:start\n$ cd functions && npm run build:watch\n```\n\nhttp://127.0.0.1:4000/ でエミュレーターが立ち上がるので操作します。\n\n![スクリーンショット 2023-11-20 21.30.07.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6d53134d-0ab4-6678-9424-33416db23293.png)\n\n開発のログとかもここに出ます。\n\nFirestoreのデータもここに格納され、エミュレーター立ち上げるたびにデータの初期化は必要です。\n\n<details><summary>index.tsのソースコード全文</summary>\n\n```ts\nimport { onRequest } from \"firebase-functions/v2/https\";\nimport * as logger from \"firebase-functions/logger\";\nimport * as express from 'express';\nimport * as admin from 'firebase-admin';\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\nadmin.initializeApp();\nconst db = admin.firestore();\nconst LINKS_COL = db.collection('links');\nconst USERS_COL = db.collection('users');\n\nconst {\n  NODE_ENV,\n  FUNCTIONS_EMULATOR,\n  FIREBASE_DEBUG_MODE,\n  GCLOUD_PROJECT,\n} = process.env;\nconst isDevelopment = NODE_ENV === 'development' || FUNCTIONS_EMULATOR === 'true' || FIREBASE_DEBUG_MODE === 'true';\n\nconst NOT_EXISTS_URL = 'https://google.com'; // リンク切れなど自社のHPなどに飛ばす場合はここを変更\nconst CACHE_CONTROL_TIME = isDevelopment ? 0 : 300; // 本番は5分間キャッシュさせる\nconst REDIRECT_TIME = isDevelopment ? 3 : 0; // 本番はリダイレクトまで0秒\nconst BASE_URL = isDevelopment ? `http://localhost:5002` : `https://${GCLOUD_PROJECT}.web.app`;\n\ntype LinkDocType = {\n  url?: string;\n  ogps?: string[];\n}\n\n/** Adminユーザーの初期化 */\nconst initAdminFunc = async (_req: express.Request, res: express.Response) => {\n  const adminDoc = USERS_COL.doc('admin');\n  const user = await adminDoc.get();\n  if (user.exists) {\n    res.send('Already initialized');\n  } else {\n    // Tokenの強さはお好みで変更お願いします。\n    // Link作成時にヘッダーの `Authorization: Bearer <token>` で認証する\n    const token = require('crypto').randomBytes(48).toString('hex');\n    await adminDoc.set({ name: 'admin', token });\n    res.send('Initialized!');\n  }\n}\n\n/** リダイレクト処理 */\nconst redirectFunc = async (req: express.Request, res: express.Response): Promise<any> => {\n  const id = req.params.id || '0';\n  const record = await LINKS_COL.doc(id).get();\n  const data = { id: record.id, ...record.data() } as LinkDocType;\n\n  const url = data?.url || NOT_EXISTS_URL;\n  if (!url) return res.status(404).send('Not Found');\n\n  const ogps = (data?.ogps || []).map(ogp => ogp).join('\\n');\n\n  // レスポンスは5分間キャッシュさせる\n  res.set(\"Cache-Control\", `public, max-age=${CACHE_CONTROL_TIME}`)\n  res.send(`\n  <!DOCTYPE html>\n  <html lang=\"ja\">\n  <head prefix=\"og: https://ogp.me/ns#\">\n    <title>Redirect...</title>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"refresh\" content=\"${REDIRECT_TIME};URL='${url}'\" />\n    <meta name=\"robots\" content=\"noindex\" />\n    ${ogps}\n  </head>\n  <body>\n    <!--\n      <noscript>\n        Redirect: <a href=\"${url}\"> ${url} </a>\n      </noscript>\n      <script>\n        window.location = \"${url}\";\n      </script>\n    -->\n  </body>\n  </html>\n  `);\n}\n\n/** Link作成API */\nconst createFunc = async (req: express.Request, res: express.Response): Promise<any> => {\n  logger.info(req.body, { structuredData: true });\n\n  // Adminが作成されてなければエラー\n  const admin = await USERS_COL.doc('admin').get();\n  if (!admin.exists) return res.status(404).send('Not Found: Admin user is not initialized');\n\n  // Bearer Tokenがなければ認証エラー\n  const token = req.headers.authorization?.replace('Bearer ', '');\n  if (token == null) return res.status(401).send('Unauthorized: token is required');\n\n  // Bodyのパース等\n  const { id: reqId, url, ogps = [] } = req.body;\n\n  // URLの存在チェック\n  if (url == null) return res.status(400).send('Bad Request: url is required');\n\n  const id = reqId || Math.random().toString(32).substring(2);\n\n  // AdminのTokenとBearer Tokenが同じでなければエラー\n  const adminToken = admin.data()?.token;\n  if (token !== adminToken) return res.status(401).send(`Unauthorized: token is not valid`);\n\n  const ref = LINKS_COL.doc(id);\n  const record = await ref.get();\n\n  // 該当IDのレコードがすでに存在していればエラー\n  if (record.exists) return res.status(403).send(`Already exists: ${id}`);\n\n  await ref.set({\n    id,\n    url,\n    ogps,\n  });\n\n  res.status(200).send(`OK, created ${id}: ${BASE_URL}/s/${id} `);\n}\n\n// Hoting用のルーティング\n// http://127.0.0.1:5002/s\napp.get('/s', (_req, res) => res.send(404));\napp.get('/s/users/init', initAdminFunc);\napp.post('/s/users/init', initAdminFunc);\napp.post('/s/links', createFunc);\napp.get('/s/:id', redirectFunc);\n\n// Functions側のルーティング, /s をrootとする\n// http://127.0.0.1:5001/{_YOUR PROJECT_ID_}/us-central1/s → app.get('/', ()=>{})\n// app.get('/', (_req, res) => res.send(404));\n\nexport const s = onRequest(app);\n\n```\n\n</details>\n\nQiita用に1ファイルに書いてますが、普通にfunctionごとに別のファイルにしてよいと思います。\n開発進んだら私もわけると思います。\n\n`NOT_EXISTS_URL` は自社ように置き換えて使ってください。\n\n\n130行くらいなのでさくっと読んでくれたらわかると思いますが、以下3つの関数くらいしかないので読めると思います。\n\n```ts\nconst initAdminFunc = () => {'略'}\nconst redirectFunc = () => {'略'}\nconst createFunc = () => {'略'}\n```\n\n\nfirebase.jsonはrewriteのところが重要かと思いますが、ほとんどのケースでこのまま使えるはずです。\n\nindex.htmlを書き換えて使ったりいろいろできるとは思います。\nここにReactのアプリをいれて、ログインして編集できるアドミン画面を作る〜〜等。\n\nfirestore.rules は、Firestoreのclient sdkからの書き込みを　`if false` にしているので色々設定しなおしてください。\n\n.firebaserc　は人によって変わるので.gitignoreでコミットしないようにしてます。\nCIでマージされたときにデプロイしたい、とかある人はコミット外してください。\n\n\n\n\n\n\n","coediting":false,"comments_count":1,"created_at":"2023-11-20T21:39:26+09:00","group":null,"id":"b4a15ffbe12a4251ae91","likes_count":4,"private":false,"reactions_count":0,"stocks_count":4,"tags":[{"name":"JavaScript","versions":[]},{"name":"TypeScript","versions":[]},{"name":"Firebase","versions":[]},{"name":"Firestore","versions":[]},{"name":"googlecloud","versions":[]}],"title":"【コピーで使える】短縮URLサイト作ったので使ってくれ【自社ホスティング】","updated_at":"2023-11-20T21:39:26+09:00","url":"https://qiita.com/ykhirao/items/b4a15ffbe12a4251ae91","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h2 data-sourcepos=\"1:1-1:15\">\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h2>\n<p data-sourcepos=\"3:1-3:87\">いい感じのスクリプト書いたので忘れないように投稿しておく。</p>\n<h2 data-sourcepos=\"6:1-6:15\">\n<span id=\"イメージ\" class=\"fragment\"></span><a href=\"#%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"><i class=\"fa fa-link\"></i></a>イメージ</h2>\n<p data-sourcepos=\"9:1-9:163\"><a href=\"https://camo.qiitausercontent.com/64333c947b9020ac3c431003c3f7ccac34577cca/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f34663432386234632d383966652d623962392d643961332d3237616435346433353664642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F4f428b4c-89fe-b9b9-d9a3-27ad54d356dd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=57e1e3b1e757125060a855b270a32de4\" alt=\"スクリーンショット 2023-11-16 22.21.15.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/4f428b4c-89fe-b9b9-d9a3-27ad54d356dd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F4f428b4c-89fe-b9b9-d9a3-27ad54d356dd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=888899c160b1f66ab5d1b65620570c52 1x\" loading=\"lazy\"></a></p>\n<h2 data-sourcepos=\"12:1-12:12\">\n<span id=\"コード\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>コード</h2>\n<p data-sourcepos=\"14:1-14:43\">fetchするURLは <code>https://httpbin.org/get</code></p>\n<p data-sourcepos=\"16:1-16:33\">gasのコードはこんな感じ</p>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"18:1-33:3\"><div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nf\">fetchApi</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">ss</span> <span class=\"o\">=</span> <span class=\"nx\">SpreadsheetApp</span><span class=\"p\">.</span><span class=\"nf\">getActiveSpreadsheet</span><span class=\"p\">();</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">sheet</span> <span class=\"o\">=</span> <span class=\"nx\">ss</span><span class=\"p\">.</span><span class=\"nf\">getActiveSheet</span><span class=\"p\">();</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">cell</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nf\">getCurrentCell</span><span class=\"p\">();</span>\n  <span class=\"kd\">const</span> <span class=\"p\">[</span><span class=\"nx\">col</span><span class=\"p\">,</span> <span class=\"nx\">row</span><span class=\"p\">,</span> <span class=\"nx\">url</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"nx\">cell</span><span class=\"p\">.</span><span class=\"nf\">getColumn</span><span class=\"p\">(),</span> <span class=\"nx\">cell</span><span class=\"p\">.</span><span class=\"nf\">getRow</span><span class=\"p\">(),</span> <span class=\"nx\">cell</span><span class=\"p\">.</span><span class=\"nf\">getValue</span><span class=\"p\">()];</span>\n\n  <span class=\"kd\">const</span> <span class=\"nx\">res</span> <span class=\"o\">=</span> <span class=\"nx\">UrlFetchApp</span><span class=\"p\">.</span><span class=\"nf\">fetch</span><span class=\"p\">(</span><span class=\"nx\">url</span><span class=\"p\">);</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">result</span> <span class=\"o\">=</span> <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">getContentText</span><span class=\"p\">();</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">code</span> <span class=\"o\">=</span> <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">getResponseCode</span><span class=\"p\">();</span>\n\n  <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nf\">getRange</span><span class=\"p\">(</span><span class=\"nx\">row</span><span class=\"p\">,</span> <span class=\"nx\">col</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">).</span><span class=\"nf\">setValue</span><span class=\"p\">(</span><span class=\"s2\">`CODE: </span><span class=\"p\">${</span><span class=\"nx\">code</span><span class=\"p\">}</span><span class=\"s2\">, RESULT: </span><span class=\"p\">${</span><span class=\"nx\">result</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n\n</code></pre></div></div>\n<ul data-sourcepos=\"35:1-39:0\">\n<li data-sourcepos=\"35:1-35:41\">今いるセルのURLを取ってくる</li>\n<li data-sourcepos=\"36:1-36:13\">Fetchする</li>\n<li data-sourcepos=\"37:1-39:0\">右隣に結果を書き込む</li>\n</ul>\n<h2 data-sourcepos=\"40:1-40:9\">\n<span id=\"設定\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>設定</h2>\n<h3 data-sourcepos=\"42:1-42:15\">\n<span id=\"apps-script\" class=\"fragment\"></span><a href=\"#apps-script\"><i class=\"fa fa-link\"></i></a>Apps Script</h3>\n<p data-sourcepos=\"44:1-44:163\"><a href=\"https://camo.qiitausercontent.com/471d27c1949eb430e43057e07ae6da9672974df6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36303664623961652d623166352d313036612d643965392d6366613033666564373362652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F606db9ae-b1f5-106a-d9e9-cfa03fed73be.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=17e94317e6c123f2034da58cfe32f9c8\" alt=\"スクリーンショット 2023-11-16 22.22.25.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/606db9ae-b1f5-106a-d9e9-cfa03fed73be.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F606db9ae-b1f5-106a-d9e9-cfa03fed73be.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=97467b78a771d64210d455aa18e78959 1x\" loading=\"lazy\"></a></p>\n<h3 data-sourcepos=\"46:1-46:16\">\n<span id=\"図形描画\" class=\"fragment\"></span><a href=\"#%E5%9B%B3%E5%BD%A2%E6%8F%8F%E7%94%BB\"><i class=\"fa fa-link\"></i></a>図形描画</h3>\n<p data-sourcepos=\"47:1-47:163\"><a href=\"https://camo.qiitausercontent.com/55e2d54fb427e30ab5336258e33728d4fa7c5a76/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f37613165393034642d316431342d633433362d373232322d6432363533343261613664612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F7a1e904d-1d14-c436-7222-d265342aa6da.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f784e8b2dfbcceac54ff48d74f7987d4\" alt=\"スクリーンショット 2023-11-16 22.22.47.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/7a1e904d-1d14-c436-7222-d265342aa6da.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F7a1e904d-1d14-c436-7222-d265342aa6da.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=06ab025f24e9f6747d7da21319743b05 1x\" loading=\"lazy\"></a></p>\n<h3 data-sourcepos=\"49:1-49:37\">\n<span id=\"図形へのスクリプト割当\" class=\"fragment\"></span><a href=\"#%E5%9B%B3%E5%BD%A2%E3%81%B8%E3%81%AE%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E5%89%B2%E5%BD%93\"><i class=\"fa fa-link\"></i></a>図形へのスクリプト割当</h3>\n<p data-sourcepos=\"51:1-51:20\">fetchApi　を設定</p>\n<p data-sourcepos=\"53:1-53:163\"><a href=\"https://camo.qiitausercontent.com/c054f2ef785a830a99ff7178709589ae29042411/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61343032393531662d613534612d396630382d663033372d3530383333663435636631312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fa402951f-a54a-9f08-f037-50833f45cf11.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=304f787f27b3192ad4bc4cb6601619f1\" alt=\"スクリーンショット 2023-11-16 22.23.08.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a402951f-a54a-9f08-f037-50833f45cf11.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fa402951f-a54a-9f08-f037-50833f45cf11.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6817ccd6f3749527de6bc87799d8dbe0 1x\" loading=\"lazy\"></a></p>\n<h3 data-sourcepos=\"56:1-56:28\">\n<span id=\"認証関連もろもろ\" class=\"fragment\"></span><a href=\"#%E8%AA%8D%E8%A8%BC%E9%96%A2%E9%80%A3%E3%82%82%E3%82%8D%E3%82%82%E3%82%8D\"><i class=\"fa fa-link\"></i></a>認証関連もろもろ</h3>\n<p data-sourcepos=\"58:1-59:108\">自分が作ったスクリプトなのにかなり権限しつこく聞かれる。<br>\n基本的に他人が作ったスクリプトに権限渡さない。Googleの認証とかこのあと入る</p>\n<p data-sourcepos=\"61:1-61:163\"><a href=\"https://camo.qiitausercontent.com/2105d697790b0833ca6cb8889ba13f2badb2897e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61643764336334622d393863372d663031652d666530652d3136386531323930333261372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fad7d3c4b-98c7-f01e-fe0e-168e129032a7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=12716aa21f869162719267947bd51065\" alt=\"スクリーンショット 2023-11-16 22.07.56.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/ad7d3c4b-98c7-f01e-fe0e-168e129032a7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fad7d3c4b-98c7-f01e-fe0e-168e129032a7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=08fdaf7289391eaa0ad5f521d5204e29 1x\" loading=\"lazy\"></a></p>\n<h2 data-sourcepos=\"64:1-64:15\">\n<span id=\"終わりに\" class=\"fragment\"></span><a href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>終わりに</h2>\n<p data-sourcepos=\"66:1-66:348\">今回は具体的にはJamstackでお世話になりやすい <a href=\"https://microcms.io/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://microcms.io/</a> さんのブログ取得APIを使って、microcms側でブログを書いて、定期的にスプレッドシートにコンテンツを出力、それをコピペしてhtmlに埋め込む、みたいなことやってて必要になったので作りました。</p>\n<p data-sourcepos=\"68:1-68:129\">その場合、以下のような書き方に一部変更されますが、概ね簡単な作業でできたので満足です。</p>\n<div class=\"code-frame\" data-lang=\"js\" data-sourcepos=\"70:1-79:3\"><div class=\"highlight\"><pre><code>  <span class=\"kd\">const</span> <span class=\"nx\">options</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"dl\">'</span><span class=\"s1\">method</span><span class=\"dl\">'</span> <span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">get</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n    <span class=\"dl\">'</span><span class=\"s1\">headers</span><span class=\"dl\">'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"dl\">\"</span><span class=\"s2\">X-MICROCMS-API-KEY</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">あなたのAPIキー</span><span class=\"dl\">\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">};</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">res</span> <span class=\"o\">=</span> <span class=\"nx\">UrlFetchApp</span><span class=\"p\">.</span><span class=\"nf\">fetch</span><span class=\"p\">(</span><span class=\"nx\">url</span><span class=\"p\">,</span> <span class=\"nx\">options</span><span class=\"p\">);</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">content</span> <span class=\"o\">=</span> <span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">getContentText</span><span class=\"p\">()).</span><span class=\"nx\">content</span>\n</code></pre></div></div>\n","body":"## はじめに\n\nいい感じのスクリプト書いたので忘れないように投稿しておく。\n\n\n## イメージ\n\n\n![スクリーンショット 2023-11-16 22.21.15.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/4f428b4c-89fe-b9b9-d9a3-27ad54d356dd.png)\n\n\n## コード\n\nfetchするURLは `https://httpbin.org/get`\n\ngasのコードはこんな感じ\n\n```javascript\nfunction fetchApi() {\n  const ss = SpreadsheetApp.getActiveSpreadsheet();\n  const sheet = ss.getActiveSheet();\n  const cell = sheet.getCurrentCell();\n  const [col, row, url] = [cell.getColumn(), cell.getRow(), cell.getValue()];\n\n  const res = UrlFetchApp.fetch(url);\n  const result = res.getContentText();\n  const code = res.getResponseCode();\n\n  sheet.getRange(row, col + 1, 1, 1).setValue(`CODE: ${code}, RESULT: ${result}`);\n}\n\n\n```\n\n* 今いるセルのURLを取ってくる\n* Fetchする\n* 右隣に結果を書き込む\n\n\n## 設定\n\n### Apps Script\n\n![スクリーンショット 2023-11-16 22.22.25.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/606db9ae-b1f5-106a-d9e9-cfa03fed73be.png)\n\n### 図形描画\n![スクリーンショット 2023-11-16 22.22.47.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/7a1e904d-1d14-c436-7222-d265342aa6da.png)\n\n### 図形へのスクリプト割当\n\nfetchApi　を設定\n\n![スクリーンショット 2023-11-16 22.23.08.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a402951f-a54a-9f08-f037-50833f45cf11.png)\n\n\n### 認証関連もろもろ\n\n自分が作ったスクリプトなのにかなり権限しつこく聞かれる。\n基本的に他人が作ったスクリプトに権限渡さない。Googleの認証とかこのあと入る\n\n![スクリーンショット 2023-11-16 22.07.56.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/ad7d3c4b-98c7-f01e-fe0e-168e129032a7.png)\n\n\n## 終わりに\n\n今回は具体的にはJamstackでお世話になりやすい https://microcms.io/ さんのブログ取得APIを使って、microcms側でブログを書いて、定期的にスプレッドシートにコンテンツを出力、それをコピペしてhtmlに埋め込む、みたいなことやってて必要になったので作りました。\n\nその場合、以下のような書き方に一部変更されますが、概ね簡単な作業でできたので満足です。\n\n```js\n  const options = {\n    'method' : 'get',\n    'headers': {\n      \"X-MICROCMS-API-KEY\": \"あなたのAPIキー\"\n    }\n  };\n  const res = UrlFetchApp.fetch(url, options);\n  const content = JSON.parse(res.getContentText()).content\n```\n","coediting":false,"comments_count":0,"created_at":"2023-11-16T22:29:56+09:00","group":null,"id":"0afad0fe0a31e3a15ad8","likes_count":1,"private":false,"reactions_count":0,"stocks_count":1,"tags":[{"name":"JavaScript","versions":[]},{"name":"API","versions":[]},{"name":"GoogleAppsScript","versions":[]},{"name":"GAS","versions":[]}],"title":"現在いるセルのURLを叩いてレスポンスを右側に格納する[GAS/Google Apps Script]書いた","updated_at":"2023-11-16T22:29:56+09:00","url":"https://qiita.com/ykhirao/items/0afad0fe0a31e3a15ad8","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p data-sourcepos=\"2:1-3:108\">MacのChromeでタブを閉じるときによく <code>⌘+W</code> で閉じている人は、<br>\n間違えて <code>⌘+Q</code> を押して、Chromeのアプリ自体を消してしまうことありませんか？</p>\n<p data-sourcepos=\"5:1-6:27\">特にミーティング中とかでやってしまうと、後で戻ってきたときに落ちた理由聞かれたりするので面倒ですよね。<br>\nそんな人用の機能。</p>\n<p data-sourcepos=\"8:1-8:108\">その他にもショートカットをいろいろ設定できるのでいじりたいひとはどうぞ。</p>\n<h2 data-sourcepos=\"11:1-11:15\">\n<span id=\"chromeのみ\" class=\"fragment\"></span><a href=\"#chrome%E3%81%AE%E3%81%BF\"><i class=\"fa fa-link\"></i></a>Chromeのみ</h2>\n<p data-sourcepos=\"13:1-14:42\">Chrome自体に設定があります。一回確認挟んでくれるのでありがたいです。<br>\n連続で押すと閉じられますが。</p>\n<p data-sourcepos=\"16:1-16:163\"><a href=\"https://camo.qiitausercontent.com/723420c66e3d9e9be3a89b16af07e53a03062a94/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39663038666563332d636561622d333832372d386662392d3864383630343437393966342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9f08fec3-ceab-3827-8fb9-8d86044799f4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=19910df31663ebf965c2225dbe62d54e\" alt=\"スクリーンショット 2023-10-27 16.49.22.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9f08fec3-ceab-3827-8fb9-8d86044799f4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9f08fec3-ceab-3827-8fb9-8d86044799f4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=094f6ad1e19ccd715e7d020612178b25 1x\" loading=\"lazy\"></a></p>\n<h2 data-sourcepos=\"19:1-19:43\">\n<span id=\"macos-ventura-1341-c22f770820d\" class=\"fragment\"></span><a href=\"#macos-ventura-1341-c22f770820d\"><i class=\"fa fa-link\"></i></a>macOS Ventura 13.4.1 (c)（22F770820d）</h2>\n<ul data-sourcepos=\"21:1-25:0\">\n<li data-sourcepos=\"21:1-21:8\">設定</li>\n<li data-sourcepos=\"22:1-22:17\">キーボード</li>\n<li data-sourcepos=\"23:1-23:38\">キーボードショートカット</li>\n<li data-sourcepos=\"24:1-25:0\">アプリケーション</li>\n</ul>\n<table data-sourcepos=\"26:1-27:7\">\n<thead>\n<tr data-sourcepos=\"26:1-26:327\">\n<th style=\"text-align: center\" data-sourcepos=\"26:1-26:163\"><a href=\"https://camo.qiitausercontent.com/467718da1e75a920d5179b1ffe6d304cf7de3776/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39396632356237322d376132352d333837342d633939342d6132646138386663643339642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F99f25b72-7a25-3874-c994-a2da88fcd39d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e7729e353bea53598916e8f4737cc224\" alt=\"スクリーンショット 2023-10-27 16.54.18.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/99f25b72-7a25-3874-c994-a2da88fcd39d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F99f25b72-7a25-3874-c994-a2da88fcd39d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fa83e477eef8eba93781154beec71bea 1x\" loading=\"lazy\"></a></th>\n<th style=\"text-align: center\" data-sourcepos=\"26:165-26:327\"><a href=\"https://camo.qiitausercontent.com/3e02b4ba85f3aa9f0b6f89040ff50e41440fc4e9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f35613232343536302d633132342d336538302d613737342d6536646432396331336539382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F5a224560-c124-3e80-a774-e6dd29c13e98.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=491ad820f7330b46525524c01c88f1db\" alt=\"スクリーンショット 2023-10-27 16.54.11.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/5a224560-c124-3e80-a774-e6dd29c13e98.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F5a224560-c124-3e80-a774-e6dd29c13e98.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=90fda258bae24752eaca6e282469bc99 1x\" loading=\"lazy\"></a></th>\n</tr>\n</thead>\n</table>\n<h3 data-sourcepos=\"30:1-30:27\">\n<span id=\"discord-での設定例\" class=\"fragment\"></span><a href=\"#discord-%E3%81%A7%E3%81%AE%E8%A8%AD%E5%AE%9A%E4%BE%8B\"><i class=\"fa fa-link\"></i></a>Discord での設定例</h3>\n<table data-sourcepos=\"32:1-34:495\">\n<thead>\n<tr data-sourcepos=\"32:1-32:29\">\n<th style=\"text-align: center\" data-sourcepos=\"32:1-32:9\">Old Menu</th>\n<th style=\"text-align: center\" data-sourcepos=\"32:11-32:19\">Setting</th>\n<th style=\"text-align: center\" data-sourcepos=\"32:21-32:29\">New Menu</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"34:1-34:495\">\n<td style=\"text-align: center\" data-sourcepos=\"34:1-34:164\"><a href=\"https://camo.qiitausercontent.com/62d4416c6f8eac9a79eba257c3e622e3862645d7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f64623833636535352d373038392d353566372d376238642d3338313362323939316336612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fdb83ce55-7089-55f7-7b8d-3813b2991c6a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=54b905bdbc86ef23ccbac9ff1ac1bde1\" alt=\"スクリーンショット 2023-10-27 17.04.31.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/db83ce55-7089-55f7-7b8d-3813b2991c6a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fdb83ce55-7089-55f7-7b8d-3813b2991c6a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=435157222619aa1304031fdf7d01452c 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: center\" data-sourcepos=\"34:166-34:330\"><a href=\"https://camo.qiitausercontent.com/a1cdfcd9d43cea36fb007dccf6ad8626fb519568/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f38343531333635352d363838342d333163662d613066632d3634633165333265373631622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F84513655-6884-31cf-a0fc-64c1e32e761b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cbf9438fb5aeca3c5880405f165e64fa\" alt=\"スクリーンショット 2023-10-27 17.08.16.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/84513655-6884-31cf-a0fc-64c1e32e761b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F84513655-6884-31cf-a0fc-64c1e32e761b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=36d81d8d23b936cfe126c5d420f74df7 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: center\" data-sourcepos=\"34:332-34:495\"><a href=\"https://camo.qiitausercontent.com/bf28d0ce575b9a7643afb16f1da8847622393f04/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f30643239333364322d363862632d613430622d343537352d3466323666376166613065632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F0d2933d2-68bc-a40b-4575-4f26f7afa0ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=583a2ff5778984093007b02aa7f06edc\" alt=\"スクリーンショット 2023-10-27 17.06.32.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/0d2933d2-68bc-a40b-4575-4f26f7afa0ec.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F0d2933d2-68bc-a40b-4575-4f26f7afa0ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=533567ff953c8f674112e9e7508208f6 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n<p data-sourcepos=\"36:1-37:55\">Macのメニューを開き Discordの終了が <code>Quit ⌘Q</code> となっていることを確認してください。この場合 <code>Quit</code> という文字が重要になります。<br>\n先程の画面の+ボタンから設定画面を開き</p>\n<blockquote data-sourcepos=\"40:1-42:58\">\n<p data-sourcepos=\"40:3-42:58\">アプリケーション: Discord.app<br>\nメニュータイトル: Quit<br>\nキーボードショートカット: <code>CMD + SHIFT + Q</code></p>\n</blockquote>\n<p data-sourcepos=\"44:1-45:231\">これで終了するキーボードショートカットを SHIFT も同時に押さないと全体終了ができなくなります。<br>\n<code>CMD + SHIFT + Q</code> はMacのログアウトとして、アプリ側ではなくシステム側で使われているショートカットなので、これを設定しているとChromeが閉じられることはないはずです。</p>\n<p data-sourcepos=\"47:1-47:163\"><a href=\"https://camo.qiitausercontent.com/aa0f375596f4b37a6eb15f868ab956cae15a02cb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f30313263623631352d633731652d353831392d613761632d6166663766353565316636642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F012cb615-c71e-5819-a7ac-aff7f55e1f6d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8f714223156885dec0e55ac4857eb8f8\" alt=\"スクリーンショット 2023-10-27 17.21.53.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/012cb615-c71e-5819-a7ac-aff7f55e1f6d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F012cb615-c71e-5819-a7ac-aff7f55e1f6d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d3fa19beef71f8f820c426443a093cde 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"49:1-49:74\">新しいメニューを開いて <code>⇧⌘Q</code> みたいになってたらOK.</p>\n<h2 data-sourcepos=\"51:1-51:9\">\n<span id=\"vscode\" class=\"fragment\"></span><a href=\"#vscode\"><i class=\"fa fa-link\"></i></a>VSCode</h2>\n<p data-sourcepos=\"53:1-53:99\">VSCodeはこちらでショートカット封じているはずなのに閉じてしまいます。</p>\n<p data-sourcepos=\"55:1-55:128\"><code>CMD+SHIFT+P</code> で <code>ショートカット</code>　とか打つとでてくるキーボードショートカットで編集します。</p>\n<p data-sourcepos=\"57:1-57:163\"><a href=\"https://camo.qiitausercontent.com/d3f335d876e649740e67a098c13c829ac6720dc9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f31613537653033322d336461662d626462652d653330302d6361346435313961363663662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F1a57e032-3daf-bdbe-e300-ca4d519a66cf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b28185d9b2e9604a2e569c6d26a6fa0e\" alt=\"スクリーンショット 2023-10-27 17.23.00.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/1a57e032-3daf-bdbe-e300-ca4d519a66cf.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F1a57e032-3daf-bdbe-e300-ca4d519a66cf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=05a0580dfe5ca7d21a7356ea2bd23a4a 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"59:1-59:74\"><code>\"cmd+q\"</code> で検索かけるか <code>workbench.action.quit</code> で検索する。</p>\n<p data-sourcepos=\"61:1-61:163\"><a href=\"https://camo.qiitausercontent.com/479ba3cb1948ca2022647fd9f671b897f5967a87/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f63393264613332382d333831312d366361392d663864302d6331373033396561656635612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc92da328-3811-6ca9-f8d0-c17039eaef5a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=89893c18d7cc722a5acf534bdc55502a\" alt=\"スクリーンショット 2023-10-27 17.27.55.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c92da328-3811-6ca9-f8d0-c17039eaef5a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc92da328-3811-6ca9-f8d0-c17039eaef5a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c7cd2c310087c71bcdc17b8355c239c2 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"63:1-63:110\">自分は <code>CMD+Q</code> + <code>CMD+Q</code> の2連続同じコマンドを打たないと閉じないようにしました。</p>\n<p data-sourcepos=\"65:1-65:48\">VSCode側で設定しないと駄目でした。</p>\n<h2 data-sourcepos=\"67:1-67:20\">\n<span id=\"macos-sonoma-140\" class=\"fragment\"></span><a href=\"#macos-sonoma-140\"><i class=\"fa fa-link\"></i></a>macOS Sonoma 14.0</h2>\n<p data-sourcepos=\"69:1-69:108\">まだアップグレードしてないので不明ですが同じようなメニューかと思います。</p>\n","body":"\nMacのChromeでタブを閉じるときによく `⌘+W` で閉じている人は、\n間違えて `⌘+Q` を押して、Chromeのアプリ自体を消してしまうことありませんか？\n\n特にミーティング中とかでやってしまうと、後で戻ってきたときに落ちた理由聞かれたりするので面倒ですよね。\nそんな人用の機能。\n\nその他にもショートカットをいろいろ設定できるのでいじりたいひとはどうぞ。\n\n\n## Chromeのみ\n\nChrome自体に設定があります。一回確認挟んでくれるのでありがたいです。\n連続で押すと閉じられますが。\n\n![スクリーンショット 2023-10-27 16.49.22.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9f08fec3-ceab-3827-8fb9-8d86044799f4.png)\n\n\n## macOS Ventura 13.4.1 (c)（22F770820d）\n\n* 設定\n* キーボード\n* キーボードショートカット\n* アプリケーション\n\n![スクリーンショット 2023-10-27 16.54.18.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/99f25b72-7a25-3874-c994-a2da88fcd39d.png)|![スクリーンショット 2023-10-27 16.54.11.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/5a224560-c124-3e80-a774-e6dd29c13e98.png)\n:-:|:-:\n\n\n### Discord での設定例\n\nOld Menu | Setting | New Menu\n:-:|:-:|:-:\n![スクリーンショット 2023-10-27 17.04.31.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/db83ce55-7089-55f7-7b8d-3813b2991c6a.png) | ![スクリーンショット 2023-10-27 17.08.16.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/84513655-6884-31cf-a0fc-64c1e32e761b.png) | ![スクリーンショット 2023-10-27 17.06.32.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/0d2933d2-68bc-a40b-4575-4f26f7afa0ec.png)\n\nMacのメニューを開き Discordの終了が `Quit ⌘Q` となっていることを確認してください。この場合 `Quit` という文字が重要になります。\n先程の画面の+ボタンから設定画面を開き\n\n\n> アプリケーション: Discord.app\n> メニュータイトル: Quit\n> キーボードショートカット: `CMD + SHIFT + Q` \n\nこれで終了するキーボードショートカットを SHIFT も同時に押さないと全体終了ができなくなります。\n`CMD + SHIFT + Q` はMacのログアウトとして、アプリ側ではなくシステム側で使われているショートカットなので、これを設定しているとChromeが閉じられることはないはずです。\n\n![スクリーンショット 2023-10-27 17.21.53.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/012cb615-c71e-5819-a7ac-aff7f55e1f6d.png)\n\n新しいメニューを開いて `⇧⌘Q` みたいになってたらOK.\n\n## VSCode\n\nVSCodeはこちらでショートカット封じているはずなのに閉じてしまいます。\n\n`CMD+SHIFT+P` で `ショートカット`　とか打つとでてくるキーボードショートカットで編集します。\n\n![スクリーンショット 2023-10-27 17.23.00.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/1a57e032-3daf-bdbe-e300-ca4d519a66cf.png)\n\n`\"cmd+q\"` で検索かけるか `workbench.action.quit` で検索する。\n\n![スクリーンショット 2023-10-27 17.27.55.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c92da328-3811-6ca9-f8d0-c17039eaef5a.png)\n\n自分は `CMD+Q` + `CMD+Q` の2連続同じコマンドを打たないと閉じないようにしました。\n\nVSCode側で設定しないと駄目でした。\n\n## macOS Sonoma 14.0\n\nまだアップグレードしてないので不明ですが同じようなメニューかと思います。\n\n","coediting":false,"comments_count":0,"created_at":"2023-10-31T09:37:24+09:00","group":null,"id":"cdf7fe14fc04f78bf2f4","likes_count":0,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"Mac","versions":[]},{"name":"Chrome","versions":[]}],"title":"【Mac】Chromeの `cmd+Q` は無効にしよう","updated_at":"2023-10-31T09:37:24+09:00","url":"https://qiita.com/ykhirao/items/cdf7fe14fc04f78bf2f4","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"2:1-2:33\">\n<span id=\"ローカル環境で-circleci\" class=\"fragment\"></span><a href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E7%92%B0%E5%A2%83%E3%81%A7-circleci\"><i class=\"fa fa-link\"></i></a>ローカル環境で .circleci</h1>\n<p data-sourcepos=\"4:1-5:63\">このホームページみたらインストールできる<br>\n<a href=\"https://circleci.com/docs/ja/how-to-use-the-circleci-local-cli/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://circleci.com/docs/ja/how-to-use-the-circleci-local-cli/</a></p>\n<h2 data-sourcepos=\"7:1-7:12\">\n<span id=\"ビルド\" class=\"fragment\"></span><a href=\"#%E3%83%93%E3%83%AB%E3%83%89\"><i class=\"fa fa-link\"></i></a>ビルド</h2>\n<h2 data-sourcepos=\"8:1-8:30\">\n<span id=\"コンフィグチェック\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%B3%E3%83%95%E3%82%A3%E3%82%B0%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF\"><i class=\"fa fa-link\"></i></a>コンフィグチェック</h2>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"10:1-13:3\"><div class=\"highlight\"><pre><code>$ circleci config validate\nConfig file at .circleci/config.yml is valid.\n</code></pre></div></div>\n<p data-sourcepos=\"15:1-15:73\">pushしてこんなメッセージを何度も見た方は朗報です。</p>\n<p data-sourcepos=\"17:1-17:163\"><a href=\"https://camo.qiitausercontent.com/2117dfc0025e25b02e90783ea3c630588c375b5c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61616334376436392d303362392d656665632d386533312d6662393634616662393765362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Faac47d69-03b9-efec-8e31-fb964afb97e6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5ef325155d7a8444ef779b118a290d72\" alt=\"スクリーンショット 2023-10-13 12.55.55.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/aac47d69-03b9-efec-8e31-fb964afb97e6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Faac47d69-03b9-efec-8e31-fb964afb97e6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8e34ddc1bfef1abf2b27e207ba637719 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"19:1-19:39\">ローカルでエラーが出ます。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"21:1-25:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>circleci config validate\n<span class=\"go\">Error: config compilation contains errors: config compilation contains errors:\n        - ERROR IN CONFIG FILE:\n</span></code></pre></div></div>\n<h1 data-sourcepos=\"28:1-28:17\">\n<span id=\"当該の問題\" class=\"fragment\"></span><a href=\"#%E5%BD%93%E8%A9%B2%E3%81%AE%E5%95%8F%E9%A1%8C\"><i class=\"fa fa-link\"></i></a>当該の問題</h1>\n<p data-sourcepos=\"30:1-31:58\">イシュー見る感じだと、ubuntuでもmacでも起こるっぽい？<br>\n<a href=\"https://github.com/CircleCI-Public/circleci-cli/issues/716\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/CircleCI-Public/circleci-cli/issues/716</a></p>\n<h2 data-sourcepos=\"33:1-33:24\">\n<span id=\"tmp読み込めない\" class=\"fragment\"></span><a href=\"#tmp%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%81%E3%81%AA%E3%81%84\"><i class=\"fa fa-link\"></i></a>tmp読み込めない</h2>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"35:1-42:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>circleci <span class=\"nb\">local </span>execute <span class=\"o\">{</span>jobの名前<span class=\"o\">}</span>\n<span class=\"go\">(中略)\ndocker: Error response from daemon: Mounts denied: \nThe path /tmp/3945127950_circleci_config.yml is not shared from the host and is not known to Docker.\n</span><span class=\"gp\">You can configure shared paths from Docker -&gt;</span><span class=\"w\"> </span>Preferences... -&gt; Resources -&gt; File Sharing.\n<span class=\"go\">See https://docs.docker.com/desktop/mac for more info.\n</span></code></pre></div></div>\n<p data-sourcepos=\"44:1-44:141\">エラーメッセージ通りに、Dockerデスクトップの設定 Preferences -&gt; Resources -&gt; File Sharing で <code>/tmp/</code> を追加する。</p>\n<p data-sourcepos=\"46:1-46:91\"><code>/tmp/{数値}_circleci_config.yml</code> 数値は毎回変更されるので /tmp/ で設定。</p>\n<h2 data-sourcepos=\"49:1-49:63\">\n<span id=\"ymlファイルがディレクトリとして認識される\" class=\"fragment\"></span><a href=\"#yml%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8C%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%81%A8%E3%81%97%E3%81%A6%E8%AA%8D%E8%AD%98%E3%81%95%E3%82%8C%E3%82%8B\"><i class=\"fa fa-link\"></i></a>ymlファイルがディレクトリとして認識される</h2>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"51:1-55:3\"><div class=\"highlight\"><pre><code>$ circleci local execute {jobの名前}\n(中略)\nError: failed to start event processor: failed to compute task config: failed to read config file: read /tmp/local_build_config.yml: is a directory\n</code></pre></div></div>\n<h2 data-sourcepos=\"57:1-57:21\">\n<span id=\"原因と解決策\" class=\"fragment\"></span><a href=\"#%E5%8E%9F%E5%9B%A0%E3%81%A8%E8%A7%A3%E6%B1%BA%E7%AD%96\"><i class=\"fa fa-link\"></i></a>原因と解決策</h2>\n<p data-sourcepos=\"59:1-59:280\">イシューの最後にもかかれていますが /tmp というパスの競合でゴニョゴニョしてるみたいでした。<a href=\"https://github.com/CircleCI-Public/circleci-cli/pull/967\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/CircleCI-Public/circleci-cli/pull/967</a> のPRを待つか、このPRをローカルビルドすれば動くかなと思います。</p>\n<blockquote data-sourcepos=\"61:1-67:84\">\n<p data-sourcepos=\"61:3-61:76\">Thanks everyone for reporting this issue and contributing in the comments!</p>\n<p data-sourcepos=\"63:3-63:242\">The underlying problem comes from Lima not accepting /tmp as a mount for its VMs, as it considers it a \"system path\" similar to /etc or /usr.. Any container distribution using Lima will face this issue, including colima and Rancher Desktop.</p>\n<p data-sourcepos=\"65:3-67:84\">We're currently at work on this, and we seem to have found a solution in #967.<br>\nWe're still working on adding some tests and checks to make sure this is reliable and future-proof, and we'll release it as soon as we can.<br>\n<a href=\"https://github.com/CircleCI-Public/circleci-cli/issues/716#issuecomment-1680680789\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/CircleCI-Public/circleci-cli/issues/716#issuecomment-1680680789</a></p>\n</blockquote>\n<p data-sourcepos=\"70:1-70:171\">自分は一旦ローカルのconfigがバリデーションエラーでないかチェックするだけで充分だと思ったのでそれだけを使う予定です。</p>\n","body":"\n# ローカル環境で .circleci\n\nこのホームページみたらインストールできる\nhttps://circleci.com/docs/ja/how-to-use-the-circleci-local-cli/\n\n## ビルド\n## コンフィグチェック\n\n```\n$ circleci config validate\nConfig file at .circleci/config.yml is valid.\n```\n\npushしてこんなメッセージを何度も見た方は朗報です。\n\n![スクリーンショット 2023-10-13 12.55.55.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/aac47d69-03b9-efec-8e31-fb964afb97e6.png)\n\nローカルでエラーが出ます。\n\n```terminal\n$ circleci config validate\nError: config compilation contains errors: config compilation contains errors:\n        - ERROR IN CONFIG FILE:\n```\n\n\n# 当該の問題\n\nイシュー見る感じだと、ubuntuでもmacでも起こるっぽい？\nhttps://github.com/CircleCI-Public/circleci-cli/issues/716\n\n## tmp読み込めない\n\n```terminal\n$ circleci local execute {jobの名前}\n(中略)\ndocker: Error response from daemon: Mounts denied: \nThe path /tmp/3945127950_circleci_config.yml is not shared from the host and is not known to Docker.\nYou can configure shared paths from Docker -> Preferences... -> Resources -> File Sharing.\nSee https://docs.docker.com/desktop/mac for more info.\n```\n\nエラーメッセージ通りに、Dockerデスクトップの設定 Preferences -> Resources -> File Sharing で `/tmp/` を追加する。\n\n`/tmp/{数値}_circleci_config.yml` 数値は毎回変更されるので /tmp/ で設定。\n\n\n## ymlファイルがディレクトリとして認識される\n\n```\n$ circleci local execute {jobの名前}\n(中略)\nError: failed to start event processor: failed to compute task config: failed to read config file: read /tmp/local_build_config.yml: is a directory\n```\n\n## 原因と解決策\n\nイシューの最後にもかかれていますが /tmp というパスの競合でゴニョゴニョしてるみたいでした。https://github.com/CircleCI-Public/circleci-cli/pull/967 のPRを待つか、このPRをローカルビルドすれば動くかなと思います。\n\n> Thanks everyone for reporting this issue and contributing in the comments!\n> \n> The underlying problem comes from Lima not accepting /tmp as a mount for its VMs, as it considers it a \"system path\" similar to /etc or /usr.. Any container distribution using Lima will face this issue, including colima and Rancher Desktop.\n>\n> We're currently at work on this, and we seem to have found a solution in #967.\nWe're still working on adding some tests and checks to make sure this is reliable and future-proof, and we'll release it as soon as we can.\n> https://github.com/CircleCI-Public/circleci-cli/issues/716#issuecomment-1680680789\n\n\n自分は一旦ローカルのconfigがバリデーションエラーでないかチェックするだけで充分だと思ったのでそれだけを使う予定です。\n","coediting":false,"comments_count":0,"created_at":"2023-10-17T18:30:58+09:00","group":null,"id":"3635fb6fbe8bcf2306b6","likes_count":1,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"Mac","versions":[]},{"name":"Ubuntu","versions":[]},{"name":"CircleCI","versions":[]}],"title":"M1MacでCircleCIのローカルビルド失敗する","updated_at":"2023-10-17T18:30:58+09:00","url":"https://qiita.com/ykhirao/items/3635fb6fbe8bcf2306b6","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:58\">\n<span id=\"openapi-swaggerで配列レスポンスを記述する\" class=\"fragment\"></span><a href=\"#openapi-swagger%E3%81%A7%E9%85%8D%E5%88%97%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%82%92%E8%A8%98%E8%BF%B0%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>OpenAPI (Swagger)で配列レスポンスを記述する</h1>\n<p data-sourcepos=\"3:1-3:42\">配列の書き方難しいですよね。</p>\n<h2 data-sourcepos=\"5:1-5:9\">\n<span id=\"結論\" class=\"fragment\"></span><a href=\"#%E7%B5%90%E8%AB%96\"><i class=\"fa fa-link\"></i></a>結論</h2>\n<div data-sourcepos=\"7:1-9:3\" class=\"note info\">\n<span class=\"fa fa-fw fa-check-circle\"></span><div>\n<p data-sourcepos=\"8:1-8:42\">items というキーワードが重要！</p>\n</div>\n</div>\n<div class=\"code-frame\" data-lang=\"yaml\" data-sourcepos=\"12:1-18:3\"><div class=\"highlight\"><pre><code><span class=\"na\">keywords</span><span class=\"pi\">:</span>\n  <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">array</span>\n  <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">最大10件のキーワードを指定できます</span>\n  <span class=\"na\">items</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">string</span>\n</code></pre></div></div>\n<p data-sourcepos=\"20:1-20:54\">詳細はこのレポジトリに記載してます。</p>\n<p data-sourcepos=\"22:1-22:52\"><iframe id=\"qiita-embed-content__13c33bcb4168fe5ffd7113fe74b1d14a\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__13c33bcb4168fe5ffd7113fe74b1d14a\" data-content=\"https%3A%2F%2Fgithub.com%2Fykhirao%2Fqiita%2Ftree%2Fmaster%2Fopenapi\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<h2 data-sourcepos=\"24:1-24:15\">\n<span id=\"環境設定\" class=\"fragment\"></span><a href=\"#%E7%92%B0%E5%A2%83%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>環境設定</h2>\n<p data-sourcepos=\"27:1-27:76\">自分がOpenApiを記述するときの環境はnpmだけでやります。</p>\n<p data-sourcepos=\"30:1-30:36\">フォルダ構成はこんな感じ</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"32:1-38:3\"><div class=\"highlight\"><pre><code><span class=\"go\">yk@yk openapi % tree\n</span><span class=\"c\">.\n</span><span class=\"go\">├── README.md\n├── openapi.yaml\n└── redoc-static.html\n</span></code></pre></div></div>\n<p data-sourcepos=\"40:1-40:92\">すぐに確認できるようにredocでドキュメント生成して確認してます。</p>\n<h2 data-sourcepos=\"44:1-44:18\">\n<span id=\"作業の流れ\" class=\"fragment\"></span><a href=\"#%E4%BD%9C%E6%A5%AD%E3%81%AE%E6%B5%81%E3%82%8C\"><i class=\"fa fa-link\"></i></a>作業の流れ</h2>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"49:1-58:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">#</span><span class=\"w\"> </span>openapi.yamlに記述する\n<span class=\"gp\">$</span><span class=\"w\"> </span>vim openapi.yaml\n<span class=\"go\">\n</span><span class=\"gp\">#</span><span class=\"w\"> </span>redocを生成しredoc-static.html を開く\n<span class=\"gp\">$</span><span class=\"w\"> </span>npx @redocly/cli build-docs openapi.yaml\n<span class=\"go\">\n</span><span class=\"gp\">#</span><span class=\"w\"> </span><span class=\"k\">for </span>mac. 生成と開くのを同時にするコマンド\n<span class=\"gp\">$</span><span class=\"w\"> </span>npx @redocly/cli build-docs openapi.yaml <span class=\"o\">&amp;&amp;</span> open redoc-static.html\n</code></pre></div></div>\n<h2 data-sourcepos=\"61:1-61:45\">\n<span id=\"オブジェクトな配列を返すとき\" class=\"fragment\"></span><a href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AA%E9%85%8D%E5%88%97%E3%82%92%E8%BF%94%E3%81%99%E3%81%A8%E3%81%8D\"><i class=\"fa fa-link\"></i></a>オブジェクトな配列を返すとき</h2>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"63:1-73:3\"><div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"ok\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"products\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n    </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"title\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"MacBook\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://example.com\"</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">]</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n<p data-sourcepos=\"75:1-75:62\">重要な部分だけ、productsという配列を返すとき</p>\n<div class=\"code-frame\" data-lang=\"yaml\" data-sourcepos=\"77:1-92:3\"><div class=\"highlight\"><pre><code><span class=\"na\">products</span><span class=\"pi\">:</span>\n  <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">array</span>\n  <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">最大10件返します</span>\n  <span class=\"na\">items</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">object</span>\n    <span class=\"na\">properties</span><span class=\"pi\">:</span>\n      <span class=\"na\">title</span><span class=\"pi\">:</span>\n        <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">string</span>\n        <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">商品名</span>\n        <span class=\"na\">example</span><span class=\"pi\">:</span> <span class=\"s\">MacBook</span>\n      <span class=\"na\">url</span><span class=\"pi\">:</span>\n        <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">string</span>\n        <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">商品のURL</span>\n        <span class=\"na\">example</span><span class=\"pi\">:</span> <span class=\"s\">https://example.com</span>\n</code></pre></div></div>\n<p data-sourcepos=\"94:1-94:26\">redocだとこんな感じ</p>\n<p data-sourcepos=\"96:1-96:162\"><a href=\"https://camo.qiitausercontent.com/5c5dff2949e75263ced24c185c4809534eb99d07/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f34373133373530312d376637612d353632622d373536322d3461386264356139393565622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F47137501-7f7a-562b-7562-4a8bd5a995eb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2a2adc6b789aa85204e73285b5f09967\" alt=\"スクリーンショット 2023-05-30 1.03.18.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/47137501-7f7a-562b-7562-4a8bd5a995eb.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F47137501-7f7a-562b-7562-4a8bd5a995eb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d118848f1a381035f0079167903911ac 1x\" loading=\"lazy\"></a></p>\n<details>\n<summary>全文</summary>\n<div class=\"code-frame\" data-lang=\"yaml\" data-sourcepos=\"103:1-147:3\"><div class=\"highlight\"><pre><code><span class=\"na\">paths</span><span class=\"pi\">:</span>\n  <span class=\"s1\">'</span><span class=\"s\">/'</span><span class=\"err\">:</span>\n    <span class=\"na\">get</span><span class=\"pi\">:</span>\n      <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">キーワード指定1つ</span>\n      <span class=\"na\">operationId</span><span class=\"pi\">:</span> <span class=\"s\">Get by 1 KeyWord</span>\n      <span class=\"na\">requestBody</span><span class=\"pi\">:</span>\n        <span class=\"na\">content</span><span class=\"pi\">:</span>\n          <span class=\"na\">application/json</span><span class=\"pi\">:</span>\n            <span class=\"na\">schema</span><span class=\"pi\">:</span>\n              <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">object</span>\n              <span class=\"na\">required</span><span class=\"pi\">:</span>\n                <span class=\"pi\">-</span> <span class=\"s\">keyword</span>\n              <span class=\"na\">properties</span><span class=\"pi\">:</span>\n                <span class=\"na\">keyword</span><span class=\"pi\">:</span>\n                  <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">string</span>\n                  <span class=\"na\">example</span><span class=\"pi\">:</span> <span class=\"s1\">'</span><span class=\"s\">パソコン'</span>\n                  <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">適当なキーワードを入力してください</span>\n      <span class=\"na\">responses</span><span class=\"pi\">:</span>\n        <span class=\"s1\">'</span><span class=\"s\">200'</span><span class=\"err\">:</span>\n          <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">Success</span>\n          <span class=\"na\">content</span><span class=\"pi\">:</span>\n            <span class=\"na\">application/json</span><span class=\"pi\">:</span>\n              <span class=\"na\">schema</span><span class=\"pi\">:</span>\n                <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">object</span>\n                <span class=\"na\">properties</span><span class=\"pi\">:</span>\n                  <span class=\"na\">ok</span><span class=\"pi\">:</span>\n                    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">boolean</span>\n                    <span class=\"na\">example</span><span class=\"pi\">:</span> <span class=\"kc\">true</span>\n                    <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">ここは常にTrueを返します</span>\n                  <span class=\"na\">products</span><span class=\"pi\">:</span>\n                    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">array</span>\n                    <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">最大10件返します</span>\n                    <span class=\"na\">items</span><span class=\"pi\">:</span>\n                      <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">object</span>\n                      <span class=\"na\">properties</span><span class=\"pi\">:</span>\n                        <span class=\"na\">title</span><span class=\"pi\">:</span>\n                          <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">string</span>\n                          <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">商品名</span>\n                          <span class=\"na\">example</span><span class=\"pi\">:</span> <span class=\"s\">MacBook</span>\n                        <span class=\"na\">url</span><span class=\"pi\">:</span>\n                          <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">string</span>\n                          <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">商品のURL</span>\n                          <span class=\"na\">example</span><span class=\"pi\">:</span> <span class=\"s\">https://example.com</span>\n</code></pre></div></div>\n</details>\n<h2 data-sourcepos=\"152:1-152:46\">\n<span id=\"ストリングな配列をpostするとき\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%83%88%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%AA%E9%85%8D%E5%88%97%E3%82%92post%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D\"><i class=\"fa fa-link\"></i></a>ストリングな配列をpostするとき</h2>\n<p data-sourcepos=\"154:1-154:43\">以下のようなbodyを送信する場合</p>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"156:1-164:3\"><div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"keywords\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n    </span><span class=\"s2\">\"パソコン\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"s2\">\"マウス\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"s2\">\"キーボード\"</span><span class=\"w\">\n  </span><span class=\"p\">]</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n<p data-sourcepos=\"166:1-166:98\">keywordsは <code>type: array</code> をうけてexampleを指定するとredocでいい感じになります</p>\n<div class=\"code-frame\" data-lang=\"yaml\" data-sourcepos=\"168:1-186:3\"><div class=\"highlight\"><pre><code><span class=\"na\">requestBody</span><span class=\"pi\">:</span>\n  <span class=\"na\">content</span><span class=\"pi\">:</span>\n    <span class=\"na\">application/json</span><span class=\"pi\">:</span>\n      <span class=\"na\">schema</span><span class=\"pi\">:</span>\n        <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">object</span>\n        <span class=\"na\">required</span><span class=\"pi\">:</span>\n          <span class=\"pi\">-</span> <span class=\"s\">keywords</span>\n        <span class=\"na\">properties</span><span class=\"pi\">:</span>\n          <span class=\"na\">keywords</span><span class=\"pi\">:</span>\n            <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">array</span>\n            <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">最大10件のキーワードを指定できます</span>\n            <span class=\"na\">items</span><span class=\"pi\">:</span>\n              <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">string</span>\n            <span class=\"na\">example</span><span class=\"pi\">:</span>\n              <span class=\"pi\">-</span> <span class=\"s\">パソコン</span>\n              <span class=\"pi\">-</span> <span class=\"s\">マウス</span>\n              <span class=\"pi\">-</span> <span class=\"s\">キーボード</span>\n</code></pre></div></div>\n<p data-sourcepos=\"189:1-189:162\"><a href=\"https://camo.qiitausercontent.com/cdedcb002a456596d5f19a4ab98042df39eedf4b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f38323037303534332d636237622d303363342d313638362d3237316530393135303865372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F82070543-cb7b-03c4-1686-271e091508e7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c8305e6a00018dac151e98cc0f450fa5\" alt=\"スクリーンショット 2023-05-30 1.10.26.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/82070543-cb7b-03c4-1686-271e091508e7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F82070543-cb7b-03c4-1686-271e091508e7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a1c632ea9c0c5912508bc002ed4b33d5 1x\" loading=\"lazy\"></a></p>\n<details>\n<summary>全文</summary>\n<div class=\"code-frame\" data-lang=\"yaml\" data-sourcepos=\"196:1-244:3\"><div class=\"highlight\"><pre><code><span class=\"na\">paths</span><span class=\"pi\">:</span>\n  <span class=\"s1\">'</span><span class=\"s\">/items'</span><span class=\"err\">:</span>\n    <span class=\"na\">get</span><span class=\"pi\">:</span>\n      <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">キーワード指定複数</span>\n      <span class=\"na\">operationId</span><span class=\"pi\">:</span> <span class=\"s\">Get</span>\n      <span class=\"na\">requestBody</span><span class=\"pi\">:</span>\n        <span class=\"na\">content</span><span class=\"pi\">:</span>\n          <span class=\"na\">application/json</span><span class=\"pi\">:</span>\n            <span class=\"na\">schema</span><span class=\"pi\">:</span>\n              <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">object</span>\n              <span class=\"na\">required</span><span class=\"pi\">:</span>\n                <span class=\"pi\">-</span> <span class=\"s\">keywords</span>\n              <span class=\"na\">properties</span><span class=\"pi\">:</span>\n                <span class=\"na\">keywords</span><span class=\"pi\">:</span>\n                  <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">array</span>\n                  <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">最大10件のキーワードを指定できます</span>\n                  <span class=\"na\">example</span><span class=\"pi\">:</span>\n                    <span class=\"pi\">-</span> <span class=\"s\">パソコン</span>\n                    <span class=\"pi\">-</span> <span class=\"s\">マウス</span>\n                    <span class=\"pi\">-</span> <span class=\"s\">キーボード</span>\n      <span class=\"na\">responses</span><span class=\"pi\">:</span>\n        <span class=\"s1\">'</span><span class=\"s\">200'</span><span class=\"err\">:</span>\n          <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">Success</span>\n          <span class=\"na\">content</span><span class=\"pi\">:</span>\n            <span class=\"na\">application/json</span><span class=\"pi\">:</span>\n              <span class=\"na\">schema</span><span class=\"pi\">:</span>\n                <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">object</span>\n                <span class=\"na\">properties</span><span class=\"pi\">:</span>\n                  <span class=\"na\">ok</span><span class=\"pi\">:</span>\n                    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">boolean</span>\n                    <span class=\"na\">example</span><span class=\"pi\">:</span> <span class=\"kc\">true</span>\n                    <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">ここは常にTrueを返します</span>\n                  <span class=\"na\">products</span><span class=\"pi\">:</span>\n                    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">array</span>\n                    <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">最大10件返します</span>\n                    <span class=\"na\">items</span><span class=\"pi\">:</span>\n                      <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">object</span>\n                      <span class=\"na\">properties</span><span class=\"pi\">:</span>\n                        <span class=\"na\">title</span><span class=\"pi\">:</span>\n                          <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">string</span>\n                          <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">商品名</span>\n                          <span class=\"na\">example</span><span class=\"pi\">:</span> <span class=\"s\">MacBook</span>\n                        <span class=\"na\">url</span><span class=\"pi\">:</span>\n                          <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">string</span>\n                          <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">商品のURL</span>\n                          <span class=\"na\">example</span><span class=\"pi\">:</span> <span class=\"s\">https://example.com</span>\n\n</code></pre></div></div>\n</details>\n","body":"# OpenAPI (Swagger)で配列レスポンスを記述する\n\n配列の書き方難しいですよね。\n\n## 結論\n\n:::note info\nitems というキーワードが重要！\n:::\n\n\n```yaml\nkeywords:\n  type: array\n  description: 最大10件のキーワードを指定できます\n  items:\n    type: string\n```\n\n詳細はこのレポジトリに記載してます。\n\nhttps://github.com/ykhirao/qiita/tree/master/openapi\n\n## 環境設定\n\n\n自分がOpenApiを記述するときの環境はnpmだけでやります。\n\n\nフォルダ構成はこんな感じ\n\n```terminal\nyk@yk openapi % tree\n.\n├── README.md\n├── openapi.yaml\n└── redoc-static.html\n```\n\nすぐに確認できるようにredocでドキュメント生成して確認してます。\n\n\n\n## 作業の流れ\n\n\n\n\n```terminal\n# openapi.yamlに記述する\n$ vim openapi.yaml\n\n# redocを生成しredoc-static.html を開く\n$ npx @redocly/cli build-docs openapi.yaml\n\n# for mac. 生成と開くのを同時にするコマンド\n$ npx @redocly/cli build-docs openapi.yaml && open redoc-static.html\n```\n\n\n## オブジェクトな配列を返すとき\n\n```json\n{\n  \"ok\": true,\n  \"products\": [\n    {\n      \"title\": \"MacBook\",\n      \"url\": \"https://example.com\"\n    }\n  ]\n}\n```\n\n重要な部分だけ、productsという配列を返すとき\n\n```yaml\nproducts:\n  type: array\n  description: 最大10件返します\n  items:\n    type: object\n    properties:\n      title:\n        type: string\n        description: 商品名\n        example: MacBook\n      url:\n        type: string\n        description: 商品のURL\n        example: https://example.com\n```\n\nredocだとこんな感じ\n\n![スクリーンショット 2023-05-30 1.03.18.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/47137501-7f7a-562b-7562-4a8bd5a995eb.png)\n\n\n\n<details>\n<summary>全文</summary>\n\n```yaml\npaths:\n  '/':\n    get:\n      description: キーワード指定1つ\n      operationId: Get by 1 KeyWord\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: object\n              required:\n                - keyword\n              properties:\n                keyword:\n                  type: string\n                  example: 'パソコン'\n                  description: 適当なキーワードを入力してください\n      responses:\n        '200':\n          description: Success\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  ok:\n                    type: boolean\n                    example: true\n                    description: ここは常にTrueを返します\n                  products:\n                    type: array\n                    description: 最大10件返します\n                    items:\n                      type: object\n                      properties:\n                        title:\n                          type: string\n                          description: 商品名\n                          example: MacBook\n                        url:\n                          type: string\n                          description: 商品のURL\n                          example: https://example.com\n```\n\n</details>\n\n\n## ストリングな配列をpostするとき\n\n以下のようなbodyを送信する場合\n\n```json\n{\n  \"keywords\": [\n    \"パソコン\",\n    \"マウス\",\n    \"キーボード\"\n  ]\n}\n```\n\nkeywordsは `type: array` をうけてexampleを指定するとredocでいい感じになります\n\n```yaml\nrequestBody:\n  content:\n    application/json:\n      schema:\n        type: object\n        required:\n          - keywords\n        properties:\n          keywords:\n            type: array\n            description: 最大10件のキーワードを指定できます\n            items:\n              type: string\n            example:\n              - パソコン\n              - マウス\n              - キーボード\n```\n\n\n![スクリーンショット 2023-05-30 1.10.26.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/82070543-cb7b-03c4-1686-271e091508e7.png)\n\n\n\n<details>\n<summary>全文</summary>\n\n```yaml\npaths:\n  '/items':\n    get:\n      description: キーワード指定複数\n      operationId: Get\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: object\n              required:\n                - keywords\n              properties:\n                keywords:\n                  type: array\n                  description: 最大10件のキーワードを指定できます\n                  example:\n                    - パソコン\n                    - マウス\n                    - キーボード\n      responses:\n        '200':\n          description: Success\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  ok:\n                    type: boolean\n                    example: true\n                    description: ここは常にTrueを返します\n                  products:\n                    type: array\n                    description: 最大10件返します\n                    items:\n                      type: object\n                      properties:\n                        title:\n                          type: string\n                          description: 商品名\n                          example: MacBook\n                        url:\n                          type: string\n                          description: 商品のURL\n                          example: https://example.com\n\n```\n</details>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","coediting":false,"comments_count":0,"created_at":"2023-05-30T01:16:17+09:00","group":null,"id":"f6d2cd85aadfe3eb5189","likes_count":0,"private":false,"reactions_count":0,"stocks_count":1,"tags":[{"name":"JavaScript","versions":[]},{"name":"swagger","versions":[]},{"name":"OpenAPI","versions":[]}],"title":"OpenAPI (Swagger)で配列レスポンスを記述する","updated_at":"2023-05-30T01:16:17+09:00","url":"https://qiita.com/ykhirao/items/f6d2cd85aadfe3eb5189","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p data-sourcepos=\"2:1-2:45\">以下のような構成を取ればいい。</p>\n<iframe id=\"qiita-embed-content__bdfc33a0b9010aa9f7d3972b6cc9dc83\" src=\"https://qiita.com/embed-contents/mermaid#qiita-embed-content__bdfc33a0b9010aa9f7d3972b6cc9dc83\" style=\"width:100%;\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-content='{\"data\":\"flowchart LR\\nA[Gmail] -- 取得 --&gt; B[Google Apps Script]\\nB -- API --&gt; C\",\"key\":\"ab82bed4f054297ba71e803fa9d9d937\"}'>\n</iframe>\n\n<h2 data-sourcepos=\"11:1-11:24\">\n<span id=\"gmail-apiの面倒さ\" class=\"fragment\"></span><a href=\"#gmail-api%E3%81%AE%E9%9D%A2%E5%80%92%E3%81%95\"><i class=\"fa fa-link\"></i></a>Gmail APIの面倒さ</h2>\n<p data-sourcepos=\"13:1-13:86\">Cloud Functionsを使ったとしても、Gmail内容はAPIとして取得できない</p>\n<p data-sourcepos=\"15:1-15:20\">CloudFunctionsから</p>\n<ul data-sourcepos=\"17:1-20:0\">\n<li data-sourcepos=\"17:1-17:46\">「API とサービス」 「認証情報」</li>\n<li data-sourcepos=\"18:1-18:71\">「認証情報を作成」「OAuth クライアント ID」の取得</li>\n<li data-sourcepos=\"19:1-20:0\">...ClientサイドでAuthのコード書き、トークンの取得してGmailのAPIを叩く</li>\n</ul>\n<p data-sourcepos=\"21:1-21:9\">面倒。</p>\n<h2 data-sourcepos=\"23:1-23:66\">\n<span id=\"gasをwebアプリケーションとして公開してapi公開\" class=\"fragment\"></span><a href=\"#gas%E3%82%92web%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A8%E3%81%97%E3%81%A6%E5%85%AC%E9%96%8B%E3%81%97%E3%81%A6api%E5%85%AC%E9%96%8B\"><i class=\"fa fa-link\"></i></a>GasをWebアプリケーションとして公開してAPI公開</h2>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"26:1-87:3\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">FAIL</span> <span class=\"o\">=</span> <span class=\"p\">{</span> <span class=\"na\">ok</span><span class=\"p\">:</span> <span class=\"kc\">false</span><span class=\"p\">,</span> <span class=\"na\">code</span><span class=\"p\">:</span> <span class=\"kc\">null</span> <span class=\"p\">};</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">output</span> <span class=\"o\">=</span> <span class=\"nx\">ContentService</span><span class=\"p\">.</span><span class=\"nf\">createTextOutput</span><span class=\"p\">();</span>\n<span class=\"nx\">output</span><span class=\"p\">.</span><span class=\"nf\">setMimeType</span><span class=\"p\">(</span><span class=\"nx\">ContentService</span><span class=\"p\">.</span><span class=\"nx\">MimeType</span><span class=\"p\">.</span><span class=\"nx\">JSON</span><span class=\"p\">);</span>\n<span class=\"nx\">output</span><span class=\"p\">.</span><span class=\"nf\">setContent</span><span class=\"p\">(</span><span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nf\">stringify</span><span class=\"p\">(</span><span class=\"nx\">FAIL</span><span class=\"p\">));</span>\n\n<span class=\"cm\">/**\n * 認証ラベルがついたGmailを取得します\n * queryの例: https://blog.synnex.co.jp/google/gmail-gas/\n */</span>\n<span class=\"kd\">function</span> <span class=\"nf\">getGmail</span><span class=\"p\">(</span><span class=\"nx\">id</span><span class=\"p\">,</span> <span class=\"nx\">date</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">2023-04-17T11:00:00.000Z</span><span class=\"dl\">'</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"c1\">// 認証ラベルの付いた、アカウントIDが本文にはいっているメールを1件取得する</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">newestThread</span> <span class=\"o\">=</span> <span class=\"nx\">GmailApp</span><span class=\"p\">.</span><span class=\"nf\">search</span><span class=\"p\">(</span><span class=\"s2\">`</span><span class=\"p\">${</span><span class=\"nx\">id</span><span class=\"p\">}</span><span class=\"s2\"> label:タイトルXXX`</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">];</span>\n\n  <span class=\"c1\">// スレッドが存在しない</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">newestThread</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">Logger</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">スレッドが存在しません</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n    <span class=\"k\">return</span> <span class=\"nx\">output</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"kd\">let</span> <span class=\"nx\">messages</span> <span class=\"o\">=</span> <span class=\"nx\">newestThread</span><span class=\"p\">.</span><span class=\"nf\">getMessages</span><span class=\"p\">();</span>\n  <span class=\"nx\">Logger</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"s2\">`messages length: </span><span class=\"p\">${</span><span class=\"nx\">messages</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">);</span>\n  <span class=\"nx\">messages</span> <span class=\"o\">=</span> <span class=\"nx\">messages</span><span class=\"p\">.</span><span class=\"nf\">filter</span><span class=\"p\">((</span><span class=\"nx\">message</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">message</span><span class=\"p\">.</span><span class=\"nf\">getPlainBody</span><span class=\"p\">().</span><span class=\"nf\">includes</span><span class=\"p\">(</span><span class=\"nx\">id</span><span class=\"p\">))</span>\n  <span class=\"c1\">// date(Instagramクリック日時)) &lt; メール（message）受信日時</span>\n  <span class=\"nx\">messages</span> <span class=\"o\">=</span> <span class=\"nx\">messages</span><span class=\"p\">.</span><span class=\"nf\">filter</span><span class=\"p\">((</span><span class=\"nx\">message</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">(</span><span class=\"k\">new</span> <span class=\"nc\">Date</span><span class=\"p\">(</span><span class=\"nx\">date</span><span class=\"p\">)).</span><span class=\"nf\">getTime</span><span class=\"p\">()</span> <span class=\"o\">&lt;</span> <span class=\"nx\">message</span><span class=\"p\">.</span><span class=\"nf\">getDate</span><span class=\"p\">().</span><span class=\"nf\">getTime</span><span class=\"p\">());</span>\n  <span class=\"nx\">Logger</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"s2\">`messages length: </span><span class=\"p\">${</span><span class=\"nx\">messages</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">const</span> <span class=\"nx\">message</span> <span class=\"o\">=</span> <span class=\"nx\">messages</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">];</span>\n\n  <span class=\"c1\">// 指定時間より前のメールは無視する</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">message</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">Logger</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">期間内のメールが存在しません</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n    <span class=\"k\">return</span> <span class=\"nx\">output</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"kd\">const</span> <span class=\"nx\">code</span> <span class=\"o\">=</span> <span class=\"nf\">getCode</span><span class=\"p\">(</span><span class=\"nx\">message</span><span class=\"p\">.</span><span class=\"nf\">getPlainBody</span><span class=\"p\">());</span>\n  <span class=\"nx\">Logger</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"nx\">code</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">output</span><span class=\"p\">.</span><span class=\"nf\">setContent</span><span class=\"p\">(</span><span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nf\">stringify</span><span class=\"p\">({</span> <span class=\"na\">ok</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span> <span class=\"nx\">code</span> <span class=\"p\">}))</span>\n  <span class=\"k\">return</span> <span class=\"nx\">output</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/**\n * param:  {\n *   \"id\": \"\",\n *   \"data\": \"2023-04-17T16:18:00.173Z\",\n *   \"pass\": \"ベアラートークンみたいなの\"\n * }\n */</span>\n<span class=\"kd\">function</span> <span class=\"nf\">doGet</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"nx\">Logger</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">);</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">params</span> <span class=\"o\">=</span> <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">parameter</span><span class=\"p\">;</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"nx\">params</span><span class=\"p\">?.</span><span class=\"nx\">pass</span> <span class=\"o\">!==</span> <span class=\"dl\">'</span><span class=\"s1\">ベアラートークンみたいなの</span><span class=\"dl\">'</span> <span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">Logger</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">passが間違いです。</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n    <span class=\"nx\">output</span><span class=\"p\">.</span><span class=\"nf\">setContent</span><span class=\"p\">(</span><span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nf\">stringify</span><span class=\"p\">(</span><span class=\"nx\">FAIL</span><span class=\"p\">));</span>\n    <span class=\"k\">return</span> <span class=\"nx\">output</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"k\">return</span> <span class=\"nf\">getGmail</span><span class=\"p\">(</span><span class=\"nx\">params</span><span class=\"p\">?.</span><span class=\"nx\">id</span><span class=\"p\">,</span> <span class=\"nx\">params</span><span class=\"p\">?.</span><span class=\"nx\">date</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p data-sourcepos=\"89:1-89:15\">Clientサイド</p>\n<div class=\"code-frame\" data-lang=\"js\" data-sourcepos=\"91:1-103:3\"><div class=\"highlight\"><pre><code><span class=\"err\">　　</span><span class=\"kd\">const</span> <span class=\"nx\">deployId</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">GAS画面からデプロイしたときのID_デプロイするたびに変わる</span><span class=\"dl\">'</span><span class=\"p\">;</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">res</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"nx\">axios</span><span class=\"p\">.</span><span class=\"kd\">get</span><span class=\"o\">&lt;</span><span class=\"p\">{</span> <span class=\"na\">ok</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span> <span class=\"na\">code</span><span class=\"p\">:</span> <span class=\"nx\">string</span> <span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n    <span class=\"s2\">`https://script.google.com/macros/s/</span><span class=\"p\">${</span><span class=\"nx\">deployId</span><span class=\"p\">}</span><span class=\"s2\">/exec`</span><span class=\"p\">,</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">params</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">pass</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">ベアラートークンみたいなの</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n        <span class=\"nx\">date</span><span class=\"p\">,</span>\n        <span class=\"nx\">id</span><span class=\"p\">,</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">);</span>\n</code></pre></div></div>\n<p data-sourcepos=\"105:1-105:238\">ベアラートークンみたいなのは任意の文字列128文字とか適当にジェネレートしたものを使って、絶対に推測できないものにしてください。UUIDに合わせると英数字の３２桁です。</p>\n<p data-sourcepos=\"107:1-107:164\">UUIDが16進数で32桁ですが、特定させるにはどれくらいの時間がかかるかを示した計算を参考にするのがいいかと思います。</p>\n<p data-sourcepos=\"109:1-109:54\"><iframe id=\"qiita-embed-content__c93389a25d1f021fae5a1de310b3ff24\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__c93389a25d1f021fae5a1de310b3ff24\" data-content=\"https%3A%2F%2Fzenn.dev%2Fkiyocy24%2Farticles%2Fuuid-duplicate-time\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"111:1-111:36\">デプロイ方法はこんな感じ</p>\n<p data-sourcepos=\"113:1-113:69\">上部のデプロイボタンからウェブアプリとして公開</p>\n<p data-sourcepos=\"115:1-115:163\"><a href=\"https://camo.qiitausercontent.com/e84bf0cff05cb785a7e7ac24fbffd2709b37cfdc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f37653834656137392d363632372d323064352d353431622d3566353439363834636463342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F7e84ea79-6627-20d5-541b-5f549684cdc4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=359f49a8e47382453802bf68aa0d96b7\" alt=\"スクリーンショット 2023-05-24 13.58.21.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/7e84ea79-6627-20d5-541b-5f549684cdc4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F7e84ea79-6627-20d5-541b-5f549684cdc4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1396d90090e650a88db1100c8ccde5f8 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"117:1-117:38\">もろもろ認証でOKを押したら</p>\n<p data-sourcepos=\"119:1-119:163\"><a href=\"https://camo.qiitausercontent.com/742d04934aeef44e5d120917e1560c0bc2073417/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f66366631303238352d643935392d383664662d393434622d3661343661663334663262632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ff6f10285-d959-86df-944b-6a46af34f2bc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3a4abec707b662b549a03b3b063e482f\" alt=\"スクリーンショット 2023-05-24 13.58.52.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/f6f10285-d959-86df-944b-6a46af34f2bc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ff6f10285-d959-86df-944b-6a46af34f2bc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1c683859d5460f775bfcfae1fdff2d45 1x\" loading=\"lazy\"></a></p>\n<h2 data-sourcepos=\"124:1-124:9\">\n<span id=\"注意\" class=\"fragment\"></span><a href=\"#%E6%B3%A8%E6%84%8F\"><i class=\"fa fa-link\"></i></a>注意</h2>\n<p data-sourcepos=\"126:1-127:247\">APIとして公開すると、パスワードが漏れると、自分のGmailが全世界に公開される可能性があることを考慮のうえ使ってください。<br>\nその意味では、普通のGoogleのID/Passが漏れた場合と同じですが、その場合はGoogle側で不審なログインはブロックしてくれたりしますが、このAPIの場合は不審なログインは弾かれません。</p>\n<p data-sourcepos=\"129:1-129:212\">毎回変わるデプロイIDもかなりの桁数なので、基本的にこれだけでもかなり有効なURLを見つけるのは大変なはずですがちゃんと理解した上で使ってください。</p>\n<p data-sourcepos=\"131:1-131:146\">↓以下のdeployIdは32桁超えているので、UUIDよりも特定は難しいはず。 <code>https://script.google.com/macros/s/${deployId}/exec</code></p>\n","body":"\n以下のような構成を取ればいい。\n\n```mermaid\nflowchart LR\nA[Gmail] -- 取得 --> B[Google Apps Script]\nB -- API --> C\n```\n\n\n## Gmail APIの面倒さ\n\nCloud Functionsを使ったとしても、Gmail内容はAPIとして取得できない\n\nCloudFunctionsから\n\n* 「API とサービス」 「認証情報」\n* 「認証情報を作成」「OAuth クライアント ID」の取得\n* ...ClientサイドでAuthのコード書き、トークンの取得してGmailのAPIを叩く\n\n面倒。\n\n## GasをWebアプリケーションとして公開してAPI公開\n\n\n```javascript\nconst FAIL = { ok: false, code: null };\n\nconst output = ContentService.createTextOutput();\noutput.setMimeType(ContentService.MimeType.JSON);\noutput.setContent(JSON.stringify(FAIL));\n\n/**\n * 認証ラベルがついたGmailを取得します\n * queryの例: https://blog.synnex.co.jp/google/gmail-gas/\n */\nfunction getGmail(id, date = '2023-04-17T11:00:00.000Z') {\n  // 認証ラベルの付いた、アカウントIDが本文にはいっているメールを1件取得する\n  const newestThread = GmailApp.search(`${id} label:タイトルXXX`, 0, 1)[0];\n\n  // スレッドが存在しない\n  if (!newestThread) {\n    Logger.log(\"スレッドが存在しません\");\n    return output;\n  }\n\n  let messages = newestThread.getMessages();\n  Logger.log(`messages length: ${messages.length}`);\n  messages = messages.filter((message) => message.getPlainBody().includes(id))\n  // date(Instagramクリック日時)) < メール（message）受信日時\n  messages = messages.filter((message) => (new Date(date)).getTime() < message.getDate().getTime());\n  Logger.log(`messages length: ${messages.length}`);\n\n  const message = messages[0];\n\n  // 指定時間より前のメールは無視する\n  if (!message) {\n    Logger.log(\"期間内のメールが存在しません\");\n    return output;\n  }\n\n  const code = getCode(message.getPlainBody());\n  Logger.log(code)\n\n  output.setContent(JSON.stringify({ ok: true, code }))\n  return output;\n}\n\n/**\n * param:  {\n *   \"id\": \"\",\n *   \"data\": \"2023-04-17T16:18:00.173Z\",\n *   \"pass\": \"ベアラートークンみたいなの\"\n * }\n */\nfunction doGet(e) {\n  Logger.log(e);\n  const params = e.parameter;\n  if (params?.pass !== 'ベアラートークンみたいなの' ) {\n    Logger.log(\"passが間違いです。\");\n    output.setContent(JSON.stringify(FAIL));\n    return output;\n  }\n\n  return getGmail(params?.id, params?.date);\n}\n```\n\nClientサイド\n\n```js\n　　const deployId = 'GAS画面からデプロイしたときのID_デプロイするたびに変わる';\n  const res = await axios.get<{ ok: true, code: string }>(\n    `https://script.google.com/macros/s/${deployId}/exec`,\n    {\n      params: {\n        pass: 'ベアラートークンみたいなの',\n        date,\n        id,\n      },\n    }\n  );\n```\n\nベアラートークンみたいなのは任意の文字列128文字とか適当にジェネレートしたものを使って、絶対に推測できないものにしてください。UUIDに合わせると英数字の３２桁です。\n\nUUIDが16進数で32桁ですが、特定させるにはどれくらいの時間がかかるかを示した計算を参考にするのがいいかと思います。\n\nhttps://zenn.dev/kiyocy24/articles/uuid-duplicate-time\n\nデプロイ方法はこんな感じ\n\n上部のデプロイボタンからウェブアプリとして公開\n\n![スクリーンショット 2023-05-24 13.58.21.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/7e84ea79-6627-20d5-541b-5f549684cdc4.png)\n\nもろもろ認証でOKを押したら\n\n![スクリーンショット 2023-05-24 13.58.52.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/f6f10285-d959-86df-944b-6a46af34f2bc.png)\n\n\n\n\n## 注意\n\nAPIとして公開すると、パスワードが漏れると、自分のGmailが全世界に公開される可能性があることを考慮のうえ使ってください。\nその意味では、普通のGoogleのID/Passが漏れた場合と同じですが、その場合はGoogle側で不審なログインはブロックしてくれたりしますが、このAPIの場合は不審なログインは弾かれません。\n\n毎回変わるデプロイIDもかなりの桁数なので、基本的にこれだけでもかなり有効なURLを見つけるのは大変なはずですがちゃんと理解した上で使ってください。\n\n↓以下のdeployIdは32桁超えているので、UUIDよりも特定は難しいはず。 `https://script.google.com/macros/s/${deployId}/exec`\n\n\n\n\n\n\n","coediting":false,"comments_count":0,"created_at":"2023-05-24T14:03:41+09:00","group":null,"id":"e8ce93223175a043a69a","likes_count":0,"private":false,"reactions_count":0,"stocks_count":1,"tags":[{"name":"JavaScript","versions":[]},{"name":"GoogleAppsScript","versions":[]},{"name":"GAS","versions":[]},{"name":"Gmail","versions":[]},{"name":"TypeScript","versions":[]}],"title":"【GAS】Gmail APIを使わずにGmailをAPI経由で取得する","updated_at":"2023-05-24T14:07:22+09:00","url":"https://qiita.com/ykhirao/items/e8ce93223175a043a69a","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h2 data-sourcepos=\"2:1-2:15\">\n<span id=\"拡張機能\" class=\"fragment\"></span><a href=\"#%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD\"><i class=\"fa fa-link\"></i></a>拡張機能</h2>\n<ul data-sourcepos=\"4:1-6:0\">\n<li data-sourcepos=\"4:1-4:116\"><a href=\"https://marketplace.visualstudio.com/items?itemName=ykhirao.vscode-search-files&amp;ssr=false#overview\" rel=\"nofollow noopener\" target=\"_blank\">拡張機能</a></li>\n<li data-sourcepos=\"5:1-6:0\"><a href=\"https://github.com/ykhirao/vscode-search-files\" rel=\"nofollow noopener\" target=\"_blank\">GitHub</a></li>\n</ul>\n<h2 data-sourcepos=\"7:1-7:36\">\n<span id=\"対象読者と解決すること\" class=\"fragment\"></span><a href=\"#%E5%AF%BE%E8%B1%A1%E8%AA%AD%E8%80%85%E3%81%A8%E8%A7%A3%E6%B1%BA%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8\"><i class=\"fa fa-link\"></i></a>対象読者と解決すること</h2>\n<p data-sourcepos=\"9:1-9:66\">（既存機能ですでに存在したらごめんなさい！）</p>\n<ul data-sourcepos=\"11:1-13:0\">\n<li data-sourcepos=\"11:1-11:58\">CMD + P でファイル名検索をよく使う方向け</li>\n<li data-sourcepos=\"12:1-13:0\">Ruby/Solargraphでメソッドリンクとかよく使っている方向け</li>\n</ul>\n<p data-sourcepos=\"14:1-14:129\">以下のようなモジュールがあったときに <code>Users</code> をクリックすると、検索結果は２つでてきます。</p>\n<div class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"16:1-19:3\"><div class=\"highlight\"><pre><code><span class=\"no\">API</span><span class=\"o\">::</span><span class=\"no\">V1</span><span class=\"o\">::</span><span class=\"no\">Users</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">.</span><span class=\"nf\">get_all</span>\n<span class=\"no\">API</span><span class=\"o\">::</span><span class=\"no\">V2</span><span class=\"o\">::</span><span class=\"no\">Users</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">.</span><span class=\"nf\">get_all</span>\n</code></pre></div></div>\n<p data-sourcepos=\"21:1-21:123\">コードベースが大きくなればなるほど、クラス・モジュール名の単一の被りが発生します。</p>\n<p data-sourcepos=\"23:1-23:163\"><a href=\"https://camo.qiitausercontent.com/661c6f260a2cf284eb1278192c6b41fe19c05f7f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f35383531616138652d306539352d653063302d626165352d6532316338663361343535372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F5851aa8e-0e95-e0c0-bae5-e21c8f3a4557.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=35f8c3f9d1306b5650feab2021e9abf7\" alt=\"スクリーンショット 2023-05-15 17.31.25.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/5851aa8e-0e95-e0c0-bae5-e21c8f3a4557.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F5851aa8e-0e95-e0c0-bae5-e21c8f3a4557.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1af2c30b2fb71148168ec6028384752b 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"25:1-25:307\">モジュール名を含んだ検索がしたいが、 <code>::</code> みたいな余計な文字列が入るとVSCodeは検索してくれません。なのでその文字列を除去するTypeScriptのスクリプトを埋め込んだVSCode拡張があると便利なのではないかと思って作ってます。</p>\n<p data-sourcepos=\"27:1-27:154\"><code>API::V1::Users</code> → <code>APIV1Users</code> に変換してファイル名検索をしてくれるのですが、実際には以下のような動きをします。</p>\n<p data-sourcepos=\"29:1-29:134\"><a href=\"https://camo.qiitausercontent.com/ea866e2d9c75cbbf38a07da14568e089c849e16c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39326335646333652d323466302d303061312d376661312d6439646133336465636161322e676966\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F92c5dc3e-24f0-00a1-7fa1-d9da33decaa2.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e6d541edb0c516c5afd6c93b136b70e2\" alt=\"ezgif-1-398dfba47d.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/92c5dc3e-24f0-00a1-7fa1-d9da33decaa2.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F92c5dc3e-24f0-00a1-7fa1-d9da33decaa2.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=742c11cc0bd10b90853db83b40c5bef1 1x\" loading=\"lazy\"></a></p>\n<ul data-sourcepos=\"31:1-36:0\">\n<li data-sourcepos=\"31:1-31:29\">検索したい範囲入力</li>\n<li data-sourcepos=\"32:1-32:20\"><code>CMD + SHIFT + P</code></li>\n<li data-sourcepos=\"33:1-33:21\">\n<code>rubyModule</code> 入力</li>\n<li data-sourcepos=\"34:1-36:0\"><code>Enter</code></li>\n</ul>\n<h2 data-sourcepos=\"37:1-37:15\">\n<span id=\"他の機能\" class=\"fragment\"></span><a href=\"#%E4%BB%96%E3%81%AE%E6%A9%9F%E8%83%BD\"><i class=\"fa fa-link\"></i></a>他の機能</h2>\n<ul data-sourcepos=\"39:1-43:0\">\n<li data-sourcepos=\"39:1-39:32\">文字数カウントの機能</li>\n<li data-sourcepos=\"40:1-40:56\">英単語を複数形・単数形に変換して検索</li>\n<li data-sourcepos=\"41:1-43:0\">英単語の複数形・単数形の共通部分を抽出して検索\n<ul data-sourcepos=\"42:5-43:0\">\n<li data-sourcepos=\"42:5-43:0\">\n<code>Agency</code> OR <code>Agencies</code> → <code>Agenc</code> で検索</li>\n</ul>\n</li>\n</ul>\n<p data-sourcepos=\"44:1-44:30\">など組み込んでます。</p>\n<h2 data-sourcepos=\"46:1-46:12\">\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h2>\n<p data-sourcepos=\"48:1-48:112\">VSCodeの拡張機能はTypeScriptで簡単なスクリプト作る感覚で作成することができます。</p>\n<p data-sourcepos=\"50:1-50:51\">以下のコードだけでひな形が作成でき</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"52:1-55:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>npm <span class=\"nb\">install</span> <span class=\"nt\">-g</span> generator-code\n<span class=\"gp\">$</span><span class=\"w\"> </span>npx yo code\n</code></pre></div></div>\n<p data-sourcepos=\"57:1-57:143\">F5キーでデバック用の新しいVSCodeのウインドウを立ち上げれるので、VSCode上でそのままデバックできます。</p>\n<p data-sourcepos=\"59:1-59:138\">かなり簡単な作業なのでぜひみなさんも新しい拡張機能作ってみると楽しいと思います。ぜひにでも。</p>\n<h2 data-sourcepos=\"62:1-62:9\">\n<span id=\"追加\" class=\"fragment\"></span><a href=\"#%E8%BF%BD%E5%8A%A0\"><i class=\"fa fa-link\"></i></a>追加</h2>\n<p data-sourcepos=\"64:1-64:21\"><code>CMD + SHIFT + P</code> で</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"66:1-68:3\"><div class=\"highlight\"><pre><code>&gt; Preferences: Open Keyboard Shortcuts (JSON)\n</code></pre></div></div>\n<p data-sourcepos=\"70:1-70:100\">を入力、独自ショートカットキーを設定すると、 もっと快適になります。</p>\n<p data-sourcepos=\"72:1-72:77\">自分は <code>CMD + e</code> ですぐに検索してくれるようにしてます。</p>\n<p data-sourcepos=\"74:1-74:87\">こんな感じで複数行でもcmd e ですぐにファイル名検索できます。</p>\n<p data-sourcepos=\"76:1-76:134\"><a href=\"https://camo.qiitausercontent.com/75bfef8d53a67dfa20a3e3c352993f2071e2d9b9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36363337623737382d306233342d376431312d346165342d3365303637303631386530652e676966\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6637b778-0b34-7d11-4ae4-3e0670618e0e.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1fe9c55b9964db911878e008393df1f4\" alt=\"ezgif-5-471927eb7e.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6637b778-0b34-7d11-4ae4-3e0670618e0e.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6637b778-0b34-7d11-4ae4-3e0670618e0e.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c74d62894ee4d0f4fe095d3ffdf13a66 1x\" loading=\"lazy\"></a></p>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"79:1-94:3\">\n<div class=\"code-lang\"><span class=\"bold\">~/Library/Application Support/Code/User/keybindings.json</span></div>\n<div class=\"highlight\"><pre><code><span class=\"p\">[</span><span class=\"w\">\n    </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"nl\">\"key\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"cmd+e\"</span><span class=\"p\">,</span><span class=\"w\">\n        </span><span class=\"nl\">\"command\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"vscode-search-files.rubyModule\"</span><span class=\"w\">\n    </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"nl\">\"key\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"cmd+r cmd+r\"</span><span class=\"p\">,</span><span class=\"w\">\n        </span><span class=\"nl\">\"command\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"actions.findWithSelection\"</span><span class=\"w\">\n    </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"nl\">\"key\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"cmd+e\"</span><span class=\"p\">,</span><span class=\"w\">\n        </span><span class=\"nl\">\"command\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"-actions.findWithSelection\"</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">]</span><span class=\"w\">\n</span></code></pre></div>\n</div>\n<p data-sourcepos=\"96:1-96:101\">もしくはキーボードショートカットから CMD+E にSearch Ruby Module を設定する。</p>\n<p data-sourcepos=\"98:1-98:163\"><a href=\"https://camo.qiitausercontent.com/0f935a4b9641730b6ac29e10e0e7383595a0b1b6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f63373030396363372d643633342d353632632d623735322d3934366461303366363061392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc7009cc7-d634-562c-b752-946da03f60a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=86c1051d0014ebdaa4bada70174adaf8\" alt=\"スクリーンショット 2023-11-10 10.55.10.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c7009cc7-d634-562c-b752-946da03f60a9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc7009cc7-d634-562c-b752-946da03f60a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=106e28337351a258737831c3dc556b6a 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"100:1-100:163\"><a href=\"https://camo.qiitausercontent.com/46c76e6347702341f55a20709192cd1c1a43365f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f38346131633366342d306637362d666437622d613734632d6366393236623736353736332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F84a1c3f4-0f76-fd7b-a74c-cf926b765763.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4ba62d5f51006290d32481a9bf766589\" alt=\"スクリーンショット 2023-11-10 10.54.55.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/84a1c3f4-0f76-fd7b-a74c-cf926b765763.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F84a1c3f4-0f76-fd7b-a74c-cf926b765763.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e195309001a00e26a9534c6cef10ef14 1x\" loading=\"lazy\"></a></p>\n<hr data-sourcepos=\"104:1-105:0\">\n<p data-sourcepos=\"106:1-106:39\">以下英語ですが、解説です。</p>\n<hr data-sourcepos=\"108:1-109:0\">\n<h1 data-sourcepos=\"110:1-110:21\">\n<span id=\"vscode-search-files\" class=\"fragment\"></span><a href=\"#vscode-search-files\"><i class=\"fa fa-link\"></i></a>vscode-search-files</h1>\n<p data-sourcepos=\"112:1-112:51\">Use VSCode's quickOpen to access files immediately.</p>\n<h2 data-sourcepos=\"114:1-114:13\">\n<span id=\"ruby-usage\" class=\"fragment\"></span><a href=\"#ruby-usage\"><i class=\"fa fa-link\"></i></a>Ruby usage</h2>\n<h3 data-sourcepos=\"116:1-116:22\">\n<span id=\"apiv1usersnew\" class=\"fragment\"></span><a href=\"#apiv1usersnew\"><i class=\"fa fa-link\"></i></a>API::V1::Users.new</h3>\n<p data-sourcepos=\"118:1-118:28\"><code>API::V1::Users.new.get_all</code></p>\n<blockquote data-sourcepos=\"120:1-120:39\">\n<p data-sourcepos=\"120:3-120:39\">Click <code>Users</code> vs using this extension</p>\n</blockquote>\n<p data-sourcepos=\"122:1-122:122\"><a href=\"https://camo.qiitausercontent.com/94ece3f9cab3dbef59ef7442c160befd5671a4ef/68747470733a2f2f6769746875622e636f6d2f796b686972616f2f7673636f64652d7365617263682d66696c65732f6173736574732f31353030383337372f30366462363263612d653066352d346336352d386261342d396532323030323830336264\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgithub.com%2Fykhirao%2Fvscode-search-files%2Fassets%2F15008377%2F06db62ca-e0f5-4c65-8ba4-9e22002803bd?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3bb7ffb569263cb35ef2bb5001cfd968\" alt=\"ezgif-4-8d21eda43c\" data-canonical-src=\"https://github.com/ykhirao/vscode-search-files/assets/15008377/06db62ca-e0f5-4c65-8ba4-9e22002803bd\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgithub.com%2Fykhirao%2Fvscode-search-files%2Fassets%2F15008377%2F06db62ca-e0f5-4c65-8ba4-9e22002803bd?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c03a5323995d5d9cd84a53ccbc00f37e 1x\" loading=\"lazy\"></a></p>\n<blockquote data-sourcepos=\"124:1-124:16\">\n<p data-sourcepos=\"124:3-124:16\">Search modules</p>\n</blockquote>\n<p data-sourcepos=\"126:1-126:122\"><a href=\"https://camo.qiitausercontent.com/51fbcd30c966e20af1927341b8e61d2a3518de48/68747470733a2f2f6769746875622e636f6d2f796b686972616f2f7673636f64652d7365617263682d66696c65732f6173736574732f31353030383337372f37353034613464632d323634632d346230352d383338322d653266623565353866366338\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgithub.com%2Fykhirao%2Fvscode-search-files%2Fassets%2F15008377%2F7504a4dc-264c-4b05-8382-e2fb5e58f6c8?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0df1dcc93805feb42c1f8ee3c5a2d217\" alt=\"ezgif-4-8d6993d0c7\" data-canonical-src=\"https://github.com/ykhirao/vscode-search-files/assets/15008377/7504a4dc-264c-4b05-8382-e2fb5e58f6c8\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgithub.com%2Fykhirao%2Fvscode-search-files%2Fassets%2F15008377%2F7504a4dc-264c-4b05-8382-e2fb5e58f6c8?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=129fafb5dd32977ff3180d89dcca73b7 1x\" loading=\"lazy\"></a></p>\n<h3 data-sourcepos=\"128:1-128:15\">\n<span id=\"sample-code\" class=\"fragment\"></span><a href=\"#sample-code\"><i class=\"fa fa-link\"></i></a>SAMPLE Code</h3>\n<p data-sourcepos=\"130:1-130:36\"><a href=\"/see\" class=\"user-mention js-hovercard\" title=\"see\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"see\">@see</a> <a href=\"./samples/Ruby/\">Samples/Ruby</a></p>\n<blockquote data-sourcepos=\"132:1-132:20\">\n<p data-sourcepos=\"132:3-132:20\">Search Ruby Module</p>\n</blockquote>\n<div class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"134:1-183:3\"><div class=\"highlight\"><pre><code><span class=\"c1\"># samples/ruby/API/V1/Users.rb</span>\n<span class=\"k\">module</span> <span class=\"nn\">API</span>\n  <span class=\"k\">module</span> <span class=\"nn\">V1</span>\n    <span class=\"k\">class</span> <span class=\"nc\">Users</span>\n      <span class=\"k\">def</span> <span class=\"nf\">get_all</span>\n        <span class=\"c1\"># ...</span>\n      <span class=\"k\">end</span>\n    <span class=\"k\">end</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># samples/ruby/API/V2/Users.rb</span>\n<span class=\"k\">module</span> <span class=\"nn\">API</span>\n  <span class=\"k\">module</span> <span class=\"nn\">V2</span>\n    <span class=\"k\">class</span> <span class=\"nc\">Users</span>\n      <span class=\"k\">def</span> <span class=\"nf\">get_all</span>\n        <span class=\"c1\"># ...</span>\n      <span class=\"k\">end</span>\n    <span class=\"k\">end</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># samples/ruby/API/V1/Customers.rb</span>\n<span class=\"k\">module</span> <span class=\"nn\">API</span>\n  <span class=\"k\">module</span> <span class=\"nn\">V1</span>\n    <span class=\"k\">class</span> <span class=\"nc\">Customers</span>\n      <span class=\"k\">def</span> <span class=\"nf\">get_all</span>\n        <span class=\"c1\"># ...</span>\n      <span class=\"k\">end</span>\n    <span class=\"k\">end</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># samples/ruby/API/V2/Customers.rb</span>\n<span class=\"k\">module</span> <span class=\"nn\">API</span>\n  <span class=\"k\">module</span> <span class=\"nn\">V2</span>\n    <span class=\"k\">class</span> <span class=\"nc\">Customers</span>\n      <span class=\"k\">def</span> <span class=\"nf\">get_all</span>\n        <span class=\"c1\"># ...</span>\n      <span class=\"k\">end</span>\n    <span class=\"k\">end</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"no\">API</span><span class=\"o\">::</span><span class=\"no\">V1</span><span class=\"o\">::</span><span class=\"no\">Users</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">.</span><span class=\"nf\">get_all</span>\n<span class=\"no\">API</span><span class=\"o\">::</span><span class=\"no\">V2</span><span class=\"o\">::</span><span class=\"no\">Users</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">.</span><span class=\"nf\">get_all</span>\n<span class=\"no\">API</span><span class=\"o\">::</span><span class=\"no\">V1</span><span class=\"o\">::</span><span class=\"no\">Customers</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">.</span><span class=\"nf\">get_all</span>\n<span class=\"no\">API</span><span class=\"o\">::</span><span class=\"no\">V2</span><span class=\"o\">::</span><span class=\"no\">Customers</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">.</span><span class=\"nf\">get_all</span>\n</code></pre></div></div>\n<h2 data-sourcepos=\"185:1-185:15\">\n<span id=\"common-usage\" class=\"fragment\"></span><a href=\"#common-usage\"><i class=\"fa fa-link\"></i></a>Common Usage</h2>\n<blockquote data-sourcepos=\"187:1-187:24\">\n<p data-sourcepos=\"187:3-187:24\">Change case and search</p>\n</blockquote>\n<a href=\"https://camo.qiitausercontent.com/6edd1b79176a4ce3464ef781f6a15078ac6fe92f/68747470733a2f2f6769746875622e636f6d2f796b686972616f2f7673636f64652d7365617263682d66696c65732f6173736574732f31353030383337372f30313337383338612d306138642d346264332d616338612d643161363337356162623939\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"800\" alt=\"\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgithub.com%2Fykhirao%2Fvscode-search-files%2Fassets%2F15008377%2F0137838a-0a8d-4bd3-ac8a-d1a6375abb99?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e24ec85c6f9e2728c26653f1dfe4e705\" data-canonical-src=\"https://github.com/ykhirao/vscode-search-files/assets/15008377/0137838a-0a8d-4bd3-ac8a-d1a6375abb99\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgithub.com%2Fykhirao%2Fvscode-search-files%2Fassets%2F15008377%2F0137838a-0a8d-4bd3-ac8a-d1a6375abb99?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e8cd4ffca709e30c49a7b2f12ae91d61 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"191:1-191:122\"><a href=\"https://camo.qiitausercontent.com/50ba978977b12c62b540e9547aac085a4e373198/68747470733a2f2f6769746875622e636f6d2f796b686972616f2f7673636f64652d7365617263682d66696c65732f6173736574732f31353030383337372f39616531383839312d636266662d346166332d623661392d613439383939653964366432\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgithub.com%2Fykhirao%2Fvscode-search-files%2Fassets%2F15008377%2F9ae18891-cbff-4af3-b6a9-a49899e9d6d2?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=827d1740278fe93f5e549e4974441ace\" alt=\"ezgif-4-e5bdb8af22\" data-canonical-src=\"https://github.com/ykhirao/vscode-search-files/assets/15008377/9ae18891-cbff-4af3-b6a9-a49899e9d6d2\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgithub.com%2Fykhirao%2Fvscode-search-files%2Fassets%2F15008377%2F9ae18891-cbff-4af3-b6a9-a49899e9d6d2?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2eadebdac599f61615c020c34760bb45 1x\" loading=\"lazy\"></a></p>\n<h3 data-sourcepos=\"193:1-193:16\">\n<span id=\"singularform\" class=\"fragment\"></span><a href=\"#singularform\"><i class=\"fa fa-link\"></i></a>singularForm</h3>\n<p data-sourcepos=\"195:1-195:39\">Split words and make all words singular</p>\n<p data-sourcepos=\"197:1-197:31\"><code>UsersDetails</code> → <code>UserDetail</code></p>\n<h3 data-sourcepos=\"199:1-199:14\">\n<span id=\"pluralform\" class=\"fragment\"></span><a href=\"#pluralform\"><i class=\"fa fa-link\"></i></a>pluralForm</h3>\n<p data-sourcepos=\"201:1-201:37\">Split words and make all words plural</p>\n<p data-sourcepos=\"203:1-203:31\"><code>UserDetail</code> → <code>UsersDetails</code></p>\n<h3 data-sourcepos=\"205:1-205:24\">\n<span id=\"commonpluralsingular\" class=\"fragment\"></span><a href=\"#commonpluralsingular\"><i class=\"fa fa-link\"></i></a>commonPluralSingular</h3>\n<p data-sourcepos=\"207:1-208:97\">Searches for common word parts in singular and plural forms.<br>\nIt is used when it is not clear whether the file name was created in the singular or plural form.</p>\n<p data-sourcepos=\"210:1-213:29\"><code>AgencyDetail</code> → <code>AgencDetail</code><br>\n<code>AgenciesDetails</code> → <code>AgencDetail</code><br>\n<code>UsersDetails</code> → <code>UserDetail</code><br>\n<code>UserDetail</code> → <code>UserDetail</code></p>\n<h3 data-sourcepos=\"215:1-215:17\">\n<span id=\"and-each-case\" class=\"fragment\"></span><a href=\"#and-each-case\"><i class=\"fa fa-link\"></i></a>and each case</h3>\n<p data-sourcepos=\"217:1-217:34\">The following cases are supported.</p>\n<ul data-sourcepos=\"219:1-230:0\">\n<li data-sourcepos=\"219:1-219:11\">camelCase</li>\n<li data-sourcepos=\"220:1-220:13\">capitalCase</li>\n<li data-sourcepos=\"221:1-221:14\">constantCase</li>\n<li data-sourcepos=\"222:1-222:9\">dotCase</li>\n<li data-sourcepos=\"223:1-223:12\">headerCase</li>\n<li data-sourcepos=\"224:1-224:8\">noCase</li>\n<li data-sourcepos=\"225:1-225:11\">paramCase</li>\n<li data-sourcepos=\"226:1-226:12\">pascalCase</li>\n<li data-sourcepos=\"227:1-227:10\">pathCase</li>\n<li data-sourcepos=\"228:1-228:14\">sentenceCase</li>\n<li data-sourcepos=\"229:1-230:0\">snakeCase</li>\n</ul>\n<h2 data-sourcepos=\"231:1-231:8\">\n<span id=\"count\" class=\"fragment\"></span><a href=\"#count\"><i class=\"fa fa-link\"></i></a>Count</h2>\n<blockquote data-sourcepos=\"233:1-233:29\">\n<p data-sourcepos=\"233:3-233:29\">SearchFiles: Get Word Count</p>\n</blockquote>\n<p data-sourcepos=\"235:1-236:127\">A count of the number of characters in multibyte characters (Japanese like \"日本語\", pictographs🇯🇵, etc.).<br>\nSince JavaScript's standard length cannot count them, they are measured by Intl.Segmenter. This is a completely extra function.</p>\n","body":"\n## 拡張機能\n\n* [拡張機能](https://marketplace.visualstudio.com/items?itemName=ykhirao.vscode-search-files&ssr=false#overview)\n* [GitHub](https://github.com/ykhirao/vscode-search-files)\n\n## 対象読者と解決すること\n\n（既存機能ですでに存在したらごめんなさい！）\n\n* CMD + P でファイル名検索をよく使う方向け\n* Ruby/Solargraphでメソッドリンクとかよく使っている方向け\n\n以下のようなモジュールがあったときに `Users` をクリックすると、検索結果は２つでてきます。\n\n```ruby\nAPI::V1::Users.new.get_all\nAPI::V2::Users.new.get_all\n```\n\nコードベースが大きくなればなるほど、クラス・モジュール名の単一の被りが発生します。\n\n![スクリーンショット 2023-05-15 17.31.25.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/5851aa8e-0e95-e0c0-bae5-e21c8f3a4557.png)\n\nモジュール名を含んだ検索がしたいが、 `::` みたいな余計な文字列が入るとVSCodeは検索してくれません。なのでその文字列を除去するTypeScriptのスクリプトを埋め込んだVSCode拡張があると便利なのではないかと思って作ってます。\n\n`API::V1::Users` → `APIV1Users` に変換してファイル名検索をしてくれるのですが、実際には以下のような動きをします。\n\n![ezgif-1-398dfba47d.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/92c5dc3e-24f0-00a1-7fa1-d9da33decaa2.gif)\n\n* 検索したい範囲入力\n* `CMD + SHIFT + P` \n* `rubyModule` 入力\n* `Enter`\n\n\n## 他の機能\n\n* 文字数カウントの機能\n* 英単語を複数形・単数形に変換して検索\n* 英単語の複数形・単数形の共通部分を抽出して検索\n    * `Agency` OR `Agencies` → `Agenc` で検索\n\nなど組み込んでます。\n\n## 最後に\n\nVSCodeの拡張機能はTypeScriptで簡単なスクリプト作る感覚で作成することができます。\n\n以下のコードだけでひな形が作成でき\n\n```terminal\n$ npm install -g generator-code\n$ npx yo code\n```\n\nF5キーでデバック用の新しいVSCodeのウインドウを立ち上げれるので、VSCode上でそのままデバックできます。\n\nかなり簡単な作業なのでぜひみなさんも新しい拡張機能作ってみると楽しいと思います。ぜひにでも。\n\n\n## 追加\n\n`CMD + SHIFT + P` で\n\n```\n> Preferences: Open Keyboard Shortcuts (JSON)\n```\n\nを入力、独自ショートカットキーを設定すると、 もっと快適になります。\n\n自分は `CMD + e` ですぐに検索してくれるようにしてます。\n\nこんな感じで複数行でもcmd e ですぐにファイル名検索できます。\n\n![ezgif-5-471927eb7e.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6637b778-0b34-7d11-4ae4-3e0670618e0e.gif)\n\n\n```~/Library/Application Support/Code/User/keybindings.json\n[\n    {\n        \"key\": \"cmd+e\",\n        \"command\": \"vscode-search-files.rubyModule\"\n    },\n    {\n        \"key\": \"cmd+r cmd+r\",\n        \"command\": \"actions.findWithSelection\"\n    },\n    {\n        \"key\": \"cmd+e\",\n        \"command\": \"-actions.findWithSelection\"\n    }\n]\n```\n\nもしくはキーボードショートカットから CMD+E にSearch Ruby Module を設定する。\n\n![スクリーンショット 2023-11-10 10.55.10.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c7009cc7-d634-562c-b752-946da03f60a9.png)\n\n![スクリーンショット 2023-11-10 10.54.55.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/84a1c3f4-0f76-fd7b-a74c-cf926b765763.png)\n\n\n\n-------\n\n以下英語ですが、解説です。\n\n-------\n\n# vscode-search-files\n\nUse VSCode's quickOpen to access files immediately.\n\n## Ruby usage\n\n### API::V1::Users.new\n\n`API::V1::Users.new.get_all`\n\n> Click `Users` vs using this extension\n\n![ezgif-4-8d21eda43c](https://github.com/ykhirao/vscode-search-files/assets/15008377/06db62ca-e0f5-4c65-8ba4-9e22002803bd)\n\n> Search modules\n\n![ezgif-4-8d6993d0c7](https://github.com/ykhirao/vscode-search-files/assets/15008377/7504a4dc-264c-4b05-8382-e2fb5e58f6c8)\n\n### SAMPLE Code\n\n@see [Samples/Ruby](./samples/Ruby/)\n\n> Search Ruby Module\n\n```ruby\n# samples/ruby/API/V1/Users.rb\nmodule API\n  module V1\n    class Users\n      def get_all\n        # ...\n      end\n    end\n  end\nend\n\n# samples/ruby/API/V2/Users.rb\nmodule API\n  module V2\n    class Users\n      def get_all\n        # ...\n      end\n    end\n  end\nend\n\n# samples/ruby/API/V1/Customers.rb\nmodule API\n  module V1\n    class Customers\n      def get_all\n        # ...\n      end\n    end\n  end\nend\n\n# samples/ruby/API/V2/Customers.rb\nmodule API\n  module V2\n    class Customers\n      def get_all\n        # ...\n      end\n    end\n  end\nend\n\nAPI::V1::Users.new.get_all\nAPI::V2::Users.new.get_all\nAPI::V1::Customers.new.get_all\nAPI::V2::Customers.new.get_all\n```\n\n## Common Usage\n\n> Change case and search\n\n<img width=\"800\" alt=\"\" src=\"https://github.com/ykhirao/vscode-search-files/assets/15008377/0137838a-0a8d-4bd3-ac8a-d1a6375abb99\">\n\n![ezgif-4-e5bdb8af22](https://github.com/ykhirao/vscode-search-files/assets/15008377/9ae18891-cbff-4af3-b6a9-a49899e9d6d2)\n\n### singularForm\n\nSplit words and make all words singular\n\n`UsersDetails` → `UserDetail`\n\n### pluralForm\n\nSplit words and make all words plural\n\n`UserDetail` → `UsersDetails`\n\n### commonPluralSingular\n\nSearches for common word parts in singular and plural forms.\nIt is used when it is not clear whether the file name was created in the singular or plural form.\n\n`AgencyDetail` → `AgencDetail`\n`AgenciesDetails` → `AgencDetail`\n`UsersDetails` → `UserDetail`\n`UserDetail` → `UserDetail`\n\n### and each case\n\nThe following cases are supported.\n\n* camelCase\n* capitalCase\n* constantCase\n* dotCase\n* headerCase\n* noCase\n* paramCase\n* pascalCase\n* pathCase\n* sentenceCase\n* snakeCase\n\n## Count\n\n> SearchFiles: Get Word Count\n\nA count of the number of characters in multibyte characters (Japanese like \"日本語\", pictographs🇯🇵, etc.).\nSince JavaScript's standard length cannot count them, they are measured by Intl.Segmenter. This is a completely extra function.\n\n\n\n\n\n\n","coediting":false,"comments_count":0,"created_at":"2023-05-15T17:39:50+09:00","group":null,"id":"9ca15b1e1948e78aa662","likes_count":1,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"Ruby","versions":[]},{"name":"JavaScript","versions":[]},{"name":"Rails","versions":[]},{"name":"TypeScript","versions":[]},{"name":"VSCode","versions":[]}],"title":"【VSCode拡張】Rubyのクラスジャンプをいい感じにしたい【作ってみた】","updated_at":"2023-11-10T10:56:52+09:00","url":"https://qiita.com/ykhirao/items/9ca15b1e1948e78aa662","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p data-sourcepos=\"1:1-1:174\">なんか数年前から下書きでマークダウンのマニアックな書き方を集めていたけど、供養したいので投稿させていただきます。。。</p>\n<h1 data-sourcepos=\"3:1-3:107\">\n<span id=\"mdこの書き方知ってるちょっとマニアックなマークダウンの書き方-10選\" class=\"fragment\"></span><a href=\"#md%E3%81%93%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9%E7%9F%A5%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%83%9E%E3%83%8B%E3%82%A2%E3%83%83%E3%82%AF%E3%81%AA%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9-10%E9%81%B8\"><i class=\"fa fa-link\"></i></a>【.md】この書き方知ってる？ちょっとマニアックなマークダウンの書き方 10選</h1>\n<h2 data-sourcepos=\"6:1-6:41\">\n<span id=\"1-列の中にコードスニペット\" class=\"fragment\"></span><a href=\"#1-%E5%88%97%E3%81%AE%E4%B8%AD%E3%81%AB%E3%82%B3%E3%83%BC%E3%83%89%E3%82%B9%E3%83%8B%E3%83%9A%E3%83%83%E3%83%88\"><i class=\"fa fa-link\"></i></a>1 列の中にコードスニペット</h2>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"8:1-15:3\"><div class=\"highlight\"><pre><code>1. 事前設定\n    - DBを元に戻す\n        ```\n        update ratio_tax set end_date='2019-09-30 23:59:59' where id=1;\n        update ratio_tax set start_date='2019-10-01 00:00:00' where id=2;\n        ```\n</code></pre></div></div>\n<h2 data-sourcepos=\"17:1-17:18\">\n<span id=\"2-表で改行\" class=\"fragment\"></span><a href=\"#2-%E8%A1%A8%E3%81%A7%E6%94%B9%E8%A1%8C\"><i class=\"fa fa-link\"></i></a>2. 表で改行</h2>\n<p data-sourcepos=\"19:1-19:16\"><code>&lt;br&gt;</code> いれる</p>\n<h2 data-sourcepos=\"21:1-21:27\">\n<span id=\"3-表の書き方最小\" class=\"fragment\"></span><a href=\"#3-%E8%A1%A8%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9%E6%9C%80%E5%B0%8F\"><i class=\"fa fa-link\"></i></a>3. 表の書き方最小</h2>\n<table data-sourcepos=\"23:1-24:5\">\n<thead>\n<tr data-sourcepos=\"23:1-23:3\">\n<th style=\"text-align: center\" data-sourcepos=\"23:2-23:2\">x</th>\n</tr>\n</thead>\n</table>\n<div class=\"code-frame\" data-lang=\"md\" data-sourcepos=\"26:1-29:3\"><div class=\"highlight\"><pre><code>|x|\n|:-:|\n</code></pre></div></div>\n<table data-sourcepos=\"31:1-32:3\">\n<thead>\n<tr data-sourcepos=\"31:1-31:1\">\n<th style=\"text-align: center\" data-sourcepos=\"31:1-31:1\">x</th>\n</tr>\n</thead>\n</table>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"34:1-37:3\"><div class=\"highlight\"><pre><code>x\n:-:\n</code></pre></div></div>\n<h2 data-sourcepos=\"40:1-40:42\">\n<span id=\"4-h1って使わなくてもかける\" class=\"fragment\"></span><a href=\"#4-h1%E3%81%A3%E3%81%A6%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%8F%E3%81%A6%E3%82%82%E3%81%8B%E3%81%91%E3%82%8B\"><i class=\"fa fa-link\"></i></a>4. h1って#使わなくてもかける</h2>\n<div class=\"code-frame\" data-lang=\"md\" data-sourcepos=\"42:1-45:3\"><div class=\"highlight\"><pre><code><span class=\"gu\">Alt-H1\n======\n</span></code></pre></div></div>\n<h2 data-sourcepos=\"47:1-47:27\">\n<span id=\"サンプル貼り付け\" class=\"fragment\"></span><a href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E8%B2%BC%E3%82%8A%E4%BB%98%E3%81%91\"><i class=\"fa fa-link\"></i></a>サンプル貼り付け</h2>\n<p data-sourcepos=\"49:1-49:57\">Emphasis, aka italics, with <em>asterisks</em> or <em>underscores</em>.</p>\n<p data-sourcepos=\"51:1-51:65\">Strong emphasis, aka bold, with <strong>asterisks</strong> or <strong>underscores</strong>.</p>\n<p data-sourcepos=\"53:1-53:55\">Combined emphasis with <strong>asterisks and <em>underscores</em></strong>.</p>\n<p data-sourcepos=\"55:1-55:48\">Strikethrough uses two tildes. <del>Scratch this.</del></p>\n<h2 data-sourcepos=\"57:1-57:9\">\n<span id=\"参考\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83\"><i class=\"fa fa-link\"></i></a>参考</h2>\n<p data-sourcepos=\"59:1-59:127\"><a href=\"https://qiita.com/zakuroishikuro/items/f33929eab9d55c5bd073\" id=\"reference-97e170582a2661d9a6d1\">Qiitaのテーブルの書き方についてまとめた - Qiita</a></p>\n<p data-sourcepos=\"61:1-61:133\"><a href=\"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#tables\" rel=\"nofollow noopener\" target=\"_blank\">Markdown Cheatsheet · adam-p/markdown-here Wiki · GitHub</a></p>\n<p data-sourcepos=\"64:1-66:12\">参考になる。<br>\nAtx形式<br>\nSetext形式</p>\n<p data-sourcepos=\"68:1-68:47\"><iframe id=\"qiita-embed-content__6c9a162615df7264ed7ff1adfd217a1b\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__6c9a162615df7264ed7ff1adfd217a1b\" data-content=\"https%3A%2F%2Fgithub.com%2Fsugarnaoming%2Fmarkdown_manual\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n","body":"なんか数年前から下書きでマークダウンのマニアックな書き方を集めていたけど、供養したいので投稿させていただきます。。。\n\n# 【.md】この書き方知ってる？ちょっとマニアックなマークダウンの書き方 10選\n\n\n## 1 列の中にコードスニペット\n\n```\n1. 事前設定\n    - DBを元に戻す\n        ```\n        update ratio_tax set end_date='2019-09-30 23:59:59' where id=1;\n        update ratio_tax set start_date='2019-10-01 00:00:00' where id=2;\n        ```\n```\n\n## 2. 表で改行\n\n`<br>` いれる\n\n## 3. 表の書き方最小\n\n|x|\n|:-:|\n\n```md\n|x|\n|:-:|\n```\n\nx\n:-:\n\n```\nx\n:-:\n```\n\n\n## 4. h1って#使わなくてもかける\n\n```md\nAlt-H1\n======\n```\n\n## サンプル貼り付け\n\nEmphasis, aka italics, with *asterisks* or _underscores_.\n\nStrong emphasis, aka bold, with **asterisks** or __underscores__.\n\nCombined emphasis with **asterisks and _underscores_**.\n\nStrikethrough uses two tildes. ~~Scratch this.~~\n\n## 参考\n\n[Qiitaのテーブルの書き方についてまとめた - Qiita](https://qiita.com/zakuroishikuro/items/f33929eab9d55c5bd073)\n\n[Markdown Cheatsheet · adam-p/markdown-here Wiki · GitHub](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#tables)\n\n\n参考になる。\nAtx形式\nSetext形式\n\nhttps://github.com/sugarnaoming/markdown_manual\n","coediting":false,"comments_count":0,"created_at":"2023-05-10T18:55:24+09:00","group":null,"id":"8e98aa5ee3de0da55ad5","likes_count":0,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"Markdown","versions":[]}],"title":"【.md】この書き方知ってる？ちょっとマニアックなマークダウンの書き方 4選","updated_at":"2023-05-10T18:55:24+09:00","url":"https://qiita.com/ykhirao/items/8e98aa5ee3de0da55ad5","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:41\">\n<span id=\"マークダウンの改行について\" class=\"fragment\"></span><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%81%AE%E6%94%B9%E8%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a>マークダウンの改行について</h1>\n<p data-sourcepos=\"3:1-3:163\"><a href=\"https://camo.qiitausercontent.com/b5be499403f54eb855477d2ef2afe1950cd17862/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f37666339303062622d656637642d346130662d313537352d6434336537346664376538642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F7fc900bb-ef7d-4a0f-1575-d43e74fd7e8d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=268d61c687dd38e5a32dfad96909904d\" alt=\"スクリーンショット 2023-05-09 12.15.07.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/7fc900bb-ef7d-4a0f-1575-d43e74fd7e8d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F7fc900bb-ef7d-4a0f-1575-d43e74fd7e8d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b1daaefd33634cc6581d90a2b307b67c 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"5:1-5:82\"><a href=\"https://github.com/ykhirao/qiita/tree/master/md_sample\" rel=\"nofollow noopener\" target=\"_blank\">試したレポジトリ</a></p>\n<h2 data-sourcepos=\"7:1-7:18\">\n<span id=\"何もしない\" class=\"fragment\"></span><a href=\"#%E4%BD%95%E3%82%82%E3%81%97%E3%81%AA%E3%81%84\"><i class=\"fa fa-link\"></i></a>何もしない</h2>\n<div class=\"code-frame\" data-lang=\"mkd\" data-sourcepos=\"9:1-13:3\"><div class=\"highlight\"><pre><code>test1\ntest2\ntest3\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"html\" data-sourcepos=\"15:1-17:3\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;p</span> <span class=\"na\">dir=</span><span class=\"s\">\"auto\"</span><span class=\"nt\">&gt;</span>test1 test2 test3<span class=\"nt\">&lt;/p&gt;</span>\n</code></pre></div></div>\n<h2 data-sourcepos=\"19:1-19:54\">\n<span id=\"文末に半角空白スペースを-2-つつける\" class=\"fragment\"></span><a href=\"#%E6%96%87%E6%9C%AB%E3%81%AB%E5%8D%8A%E8%A7%92%E7%A9%BA%E7%99%BD%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E3%82%92-2-%E3%81%A4%E3%81%A4%E3%81%91%E3%82%8B\"><i class=\"fa fa-link\"></i></a>文末に半角空白スペースを 2 つつける</h2>\n<div class=\"code-frame\" data-lang=\"mkd\" data-sourcepos=\"21:1-25:3\"><div class=\"highlight\"><pre><code>test1  \ntest2  \ntest3  \n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"html\" data-sourcepos=\"27:1-33:3\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;p</span> <span class=\"na\">dir=</span><span class=\"s\">\"auto\"</span><span class=\"nt\">&gt;</span>\n  test1<span class=\"nt\">&lt;br</span> <span class=\"nt\">/&gt;</span>\n  test2<span class=\"nt\">&lt;br</span> <span class=\"nt\">/&gt;</span>\n  test3\n<span class=\"nt\">&lt;/p&gt;</span>\n</code></pre></div></div>\n<h2 data-sourcepos=\"35:1-35:32\">\n<span id=\"1-行空白の行を入れる\" class=\"fragment\"></span><a href=\"#1-%E8%A1%8C%E7%A9%BA%E7%99%BD%E3%81%AE%E8%A1%8C%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8B\"><i class=\"fa fa-link\"></i></a>1 行空白の行を入れる</h2>\n<div class=\"code-frame\" data-lang=\"mkd\" data-sourcepos=\"37:1-43:3\"><div class=\"highlight\"><pre><code>test1\n\ntest2\n\ntest3\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"html\" data-sourcepos=\"45:1-49:3\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;p</span> <span class=\"na\">dir=</span><span class=\"s\">\"auto\"</span><span class=\"nt\">&gt;</span>test1<span class=\"nt\">&lt;/p&gt;</span>\n<span class=\"nt\">&lt;p</span> <span class=\"na\">dir=</span><span class=\"s\">\"auto\"</span><span class=\"nt\">&gt;</span>test2<span class=\"nt\">&lt;/p&gt;</span>\n<span class=\"nt\">&lt;p</span> <span class=\"na\">dir=</span><span class=\"s\">\"auto\"</span><span class=\"nt\">&gt;</span>test3<span class=\"nt\">&lt;/p&gt;</span>\n</code></pre></div></div>\n<h2 data-sourcepos=\"51:1-51:25\">\n<span id=\"br-タグを使う\" class=\"fragment\"></span><a href=\"#br-%E3%82%BF%E3%82%B0%E3%82%92%E4%BD%BF%E3%81%86\"><i class=\"fa fa-link\"></i></a><code>&lt;br&gt;</code> タグを使う</h2>\n<div class=\"code-frame\" data-lang=\"mkd\" data-sourcepos=\"53:1-57:3\"><div class=\"highlight\"><pre><code>test1<span class=\"nt\">&lt;br&gt;</span>\ntest2<span class=\"nt\">&lt;br&gt;</span>\ntest3<span class=\"nt\">&lt;br&gt;</span>\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"html\" data-sourcepos=\"59:1-65:3\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;p</span> <span class=\"na\">dir=</span><span class=\"s\">\"auto\"</span><span class=\"nt\">&gt;</span>\n  test1<span class=\"nt\">&lt;br</span> <span class=\"nt\">/&gt;</span>\n  test2<span class=\"nt\">&lt;br</span> <span class=\"nt\">/&gt;</span>\n  test3<span class=\"nt\">&lt;br</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/p&gt;</span>\n</code></pre></div></div>\n<h2 data-sourcepos=\"67:1-67:25\">\n<span id=\"vscode-の設定メモ\" class=\"fragment\"></span><a href=\"#vscode-%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%A1%E3%83%A2\"><i class=\"fa fa-link\"></i></a>VSCode の設定メモ</h2>\n<p data-sourcepos=\"69:1-69:67\">formatやtrim設定で自動で文末スペースが消えるので</p>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"71:1-79:3\"><div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"[markdown]\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"editor.formatOnSave\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"files.trimTrailingWhitespace\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"p\">},</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n\n</span></code></pre></div></div>\n","body":"# マークダウンの改行について\n\n![スクリーンショット 2023-05-09 12.15.07.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/7fc900bb-ef7d-4a0f-1575-d43e74fd7e8d.png)\n\n[試したレポジトリ](https://github.com/ykhirao/qiita/tree/master/md_sample)\n\n## 何もしない\n\n```mkd\ntest1\ntest2\ntest3\n```\n\n```html\n<p dir=\"auto\">test1 test2 test3</p>\n```\n\n## 文末に半角空白スペースを 2 つつける\n\n```mkd\ntest1  \ntest2  \ntest3  \n```\n\n```html\n<p dir=\"auto\">\n  test1<br />\n  test2<br />\n  test3\n</p>\n```\n\n## 1 行空白の行を入れる\n\n```mkd\ntest1\n\ntest2\n\ntest3\n```\n\n```html\n<p dir=\"auto\">test1</p>\n<p dir=\"auto\">test2</p>\n<p dir=\"auto\">test3</p>\n```\n\n## `<br>` タグを使う\n\n```mkd\ntest1<br>\ntest2<br>\ntest3<br>\n```\n\n```html\n<p dir=\"auto\">\n  test1<br />\n  test2<br />\n  test3<br />\n</p>\n```\n\n## VSCode の設定メモ\n\nformatやtrim設定で自動で文末スペースが消えるので\n\n```json\n{\n  \"[markdown]\": {\n    \"editor.formatOnSave\": false,\n    \"files.trimTrailingWhitespace\": false,\n  },\n}\n\n```\n","coediting":false,"comments_count":0,"created_at":"2023-05-09T12:18:09+09:00","group":null,"id":"2a22f806c48712202f3a","likes_count":0,"private":false,"reactions_count":0,"stocks_count":1,"tags":[{"name":"HTML","versions":[]},{"name":"CSS","versions":[]},{"name":"GitHub","versions":[]}],"title":"GitHub Markdownの改行と生成HTMLについて","updated_at":"2023-05-09T12:18:09+09:00","url":"https://qiita.com/ykhirao/items/2a22f806c48712202f3a","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:79\">\n<span id=\"gwなのでラズパイ買ってきてwebサーバーとして公開した件\" class=\"fragment\"></span><a href=\"#gw%E3%81%AA%E3%81%AE%E3%81%A7%E3%83%A9%E3%82%BA%E3%83%91%E3%82%A4%E8%B2%B7%E3%81%A3%E3%81%A6%E3%81%8D%E3%81%A6web%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%A8%E3%81%97%E3%81%A6%E5%85%AC%E9%96%8B%E3%81%97%E3%81%9F%E4%BB%B6\"><i class=\"fa fa-link\"></i></a>GWなのでラズパイ買ってきてWebサーバーとして公開した件</h1>\n<p data-sourcepos=\"3:1-5:81\">インストーラーのアップデートなどで過去の記事の内容が古くなっていたので一応最新っぽいものを乗せます。<br>\n全世界公開しているので自分でセキュリティの知識を得てから使ってください。責任は持てません。<br>\nやばそうなところあったら編集リクエストくださると・・・</p>\n<h2 data-sourcepos=\"7:1-7:27\">\n<span id=\"ラズパイ購入する\" class=\"fragment\"></span><a href=\"#%E3%83%A9%E3%82%BA%E3%83%91%E3%82%A4%E8%B3%BC%E5%85%A5%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>ラズパイ購入する</h2>\n<ul data-sourcepos=\"9:1-11:0\">\n<li data-sourcepos=\"9:1-9:35\">メルカリで購入しました</li>\n<li data-sourcepos=\"10:1-11:0\"><a href=\"https://jp.mercari.com/search?keyword=%E3%83%A9%E3%82%BA%E3%83%91%E3%82%A4\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://jp.mercari.com/search?keyword=ラズパイ</a></li>\n</ul>\n<h2 data-sourcepos=\"12:1-12:42\">\n<span id=\"ラズパイをインストールする\" class=\"fragment\"></span><a href=\"#%E3%83%A9%E3%82%BA%E3%83%91%E3%82%A4%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>ラズパイをインストールする</h2>\n<p data-sourcepos=\"14:1-14:107\">2023年にはRaspberry Pi Imagerというインストーラーを使うやり方が主流みたいです。</p>\n<ul data-sourcepos=\"16:1-18:0\">\n<li data-sourcepos=\"16:1-16:91\">\n<a href=\"https://www.raspberrypi.com/software/\" rel=\"nofollow noopener\" target=\"_blank\">公式</a>からダウンロードしましょう。</li>\n<li data-sourcepos=\"17:1-18:0\">ここが参考になりました <a href=\"https://nw-electric.way-nifty.com/blog/2022/05/post-2cdd01.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://nw-electric.way-nifty.com/blog/2022/05/post-2cdd01.html</a>\n</li>\n</ul>\n<p data-sourcepos=\"19:1-19:157\">初期ユーザー <code>user＝pi、password＝raspberry</code> は2022年からデフォルトで存在しないので、設定から作りましょう。以下参考</p>\n<details>\n<summary>ラズパイへのアクセスはSSH/CUIのみの方向け</summary>\n<p data-sourcepos=\"24:1-24:163\"><a href=\"https://camo.qiitausercontent.com/b804d5f0b1282445468a9a211930ad2e5ee04c92/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32613562363864322d393562622d373330612d313130382d3333656464363164393939302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2a5b68d2-95bb-730a-1108-33edd61d9990.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=028178245d8410debfecb34a301c8374\" alt=\"スクリーンショット 2023-05-07 23.14.09.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2a5b68d2-95bb-730a-1108-33edd61d9990.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2a5b68d2-95bb-730a-1108-33edd61d9990.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2aae32760878fc7e6dc23ef27be60e23 1x\" loading=\"lazy\"></a></p>\n<ul data-sourcepos=\"27:1-29:0\">\n<li data-sourcepos=\"27:1-27:54\">OSはPI OS Lite （ダウンロード早いです）</li>\n<li data-sourcepos=\"28:1-29:0\">画面右下の設定マークからSSH設定を作れます</li>\n</ul>\n<p data-sourcepos=\"30:1-30:103\">一応以下設定乗せます。mac側から <code>ssh pi</code> でログインできるようにしてます。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"32:1-42:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>vim ~/.ssh/config\n<span class=\"go\">\nHost pi\n</span><span class=\"gp\">  HostName raspberrypi.local #</span><span class=\"w\"> </span>http://192.168.0.23/, <span class=\"sb\">`</span><span class=\"nv\">$ </span>ip addr<span class=\"sb\">`</span>\n<span class=\"go\">  User ykhirao\n  IdentityFile /Users/ykhirao/.ssh/id_rsa_pi\n\n</span><span class=\"gp\">$</span><span class=\"w\"> </span>ssh pi\n<span class=\"gp\">$</span><span class=\"w\"> </span>ykhirao@raspberrypi:~ <span class=\"err\">$</span>\n</code></pre></div></div>\n</details>\n<h2 data-sourcepos=\"47:1-47:30\">\n<span id=\"サーバーを用意する\" class=\"fragment\"></span><a href=\"#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>サーバーを用意する</h2>\n<p data-sourcepos=\"49:1-50:126\">nginx でも Apacheでも適当なミドルウエアとphpでもnodejsでも何でもいいのでアプリケーションサーバー選ぶ。<br>\n何いっているのという方は<a href=\"https://www.rworks.jp/system/system-column/sys-entry/14865/\" rel=\"nofollow noopener\" target=\"_blank\">適当な記事</a>を読む。</p>\n<p data-sourcepos=\"52:1-52:286\">今回は <code>nginx x nodejs</code> にしますが、ApacheのC10K問題とかまでアクセスされる予定ないので（ラズパイのメモリ性能とかが先に限界迎えるはず・・・）自分の好きな環境とか身近な記事を参考にするとよいと思います。</p>\n<p data-sourcepos=\"55:1-55:105\">上記記事と同様に設定すると、以下のコマンドを入力してサーバーを立ち上げ</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"57:1-59:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>node index.js\n</code></pre></div></div>\n<p data-sourcepos=\"61:1-61:320\">同じネットワーク内から <code>http://raspberrypi.local/</code>　か <a href=\"http://192.168.0.23/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://192.168.0.23/</a> (人によってIP違う可能性あり) にアクセスしたとき <code>nginx</code> のミドルウエアが動き <code>nodejsサーバー</code> にアクセスします。うまく設定できてたら <code>Hello World</code> が表示させましょう。</p>\n<details>\n<summary>コマンドまとめと参考記事</summary>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"67:1-94:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">#</span><span class=\"w\"> </span>パッケージを最新版へ\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>apt-get update\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>apt-get upgrade\n<span class=\"go\">\n</span><span class=\"gp\">#</span><span class=\"w\"> </span>ミドルウエア\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>apt <span class=\"nb\">install </span>nginx <span class=\"nt\">-y</span>\n<span class=\"go\">\n</span><span class=\"gp\">#</span><span class=\"w\"> </span>nodejsのインストール（nが使いたいのでもろもろやってます）\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>apt <span class=\"nb\">install </span>nodejs npm\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>npm <span class=\"nb\">install </span>n <span class=\"nt\">-g</span>\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>n lts\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>apt purge nodejs npm\n<span class=\"go\">\n</span><span class=\"gp\">#</span><span class=\"w\"> </span>アプリケーションサーバーの作成\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo mkdir</span> <span class=\"nt\">-p</span> ~/workspace/piapp\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>vi ~/workspace/piapp/index.js\n<span class=\"gp\">#</span><span class=\"w\"> </span>下記ファイルを参考に修正する\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>vi /etc/nginx/sites-enabled\n<span class=\"gp\">#</span><span class=\"w\"> </span>下記ファイルを参考に修正する\n<span class=\"go\">\n</span><span class=\"gp\">#</span><span class=\"w\"> </span>アプリケーションサーバーの立ち上げ\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>npm <span class=\"nb\">install </span>nodemon <span class=\"nt\">-g</span>\n<span class=\"gp\">$</span><span class=\"w\"> </span>nodemon ~/workspace/piapp/index.js\n<span class=\"go\">\n</span><span class=\"gp\">#</span><span class=\"w\"> </span>nodejsプロセスが死んでも自動で再起動させるため nodemon を利用してます。\n<span class=\"gp\">#</span><span class=\"w\"> </span>必要なければ node ~/workspace/piapp/index.js でよいです。\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"96:1-104:3\">\n<div class=\"code-lang\"><span class=\"bold\">~/workspace/piapp/index.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">http</span> <span class=\"o\">=</span> <span class=\"nf\">require</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">http</span><span class=\"dl\">\"</span><span class=\"p\">);</span> \n<span class=\"kd\">const</span> <span class=\"nx\">server</span> <span class=\"o\">=</span> <span class=\"nx\">http</span><span class=\"p\">.</span><span class=\"nf\">createServer</span><span class=\"p\">(</span><span class=\"nf\">function </span><span class=\"p\">(</span><span class=\"nx\">req</span><span class=\"p\">,</span> <span class=\"nx\">res</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nx\">statusCode</span> <span class=\"o\">=</span> <span class=\"mi\">200</span><span class=\"p\">;</span>\n    <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">setHeader</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">Content-Type</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"dl\">\"</span><span class=\"s2\">text/plain</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n    <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nf\">end</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">Hello World</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n<span class=\"p\">});</span>\n<span class=\"nx\">server</span><span class=\"p\">.</span><span class=\"nf\">listen</span><span class=\"p\">(</span><span class=\"mi\">3000</span><span class=\"p\">);</span>\n</code></pre></div>\n</div>\n<div class=\"code-frame\" data-lang=\"/etc/nginx/sites-enabled\" data-sourcepos=\"106:1-111:3\"><div class=\"highlight\"><pre><code>\tlocation / {\n\t\ttry_files $uri $uri/ =404;\n\t\tproxy_pass http://localhost:3000;\n\t}\n</code></pre></div></div>\n<p data-sourcepos=\"114:1-114:12\">参考記事</p>\n<ul data-sourcepos=\"116:1-118:0\">\n<li data-sourcepos=\"116:1-116:153\">\n<a href=\"https://hondakenya.work/ubuntu-nginx-node-js/\" rel=\"nofollow noopener\" target=\"_blank\">UbuntuサーバーにnginxとNode.jsを入れてWebサーバーを建てる</a>を参考にしました。</li>\n<li data-sourcepos=\"117:1-118:0\"><a href=\"https://qiita.com/cointoss1973/items/c000c4f84ae4b0c166b5\" id=\"reference-5740ff1358697fac06b5\">Ubuntu で Node の最新版/推奨版を使う (n コマンド編)</a></li>\n</ul>\n</details>\n<h2 data-sourcepos=\"121:1-121:78\">\n<span id=\"自宅のルーターにポート転送設定して全世界公開します\" class=\"fragment\"></span><a href=\"#%E8%87%AA%E5%AE%85%E3%81%AE%E3%83%AB%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%AB%E3%83%9D%E3%83%BC%E3%83%88%E8%BB%A2%E9%80%81%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6%E5%85%A8%E4%B8%96%E7%95%8C%E5%85%AC%E9%96%8B%E3%81%97%E3%81%BE%E3%81%99\"><i class=\"fa fa-link\"></i></a>自宅のルーターにポート転送設定して全世界公開します</h2>\n<p data-sourcepos=\"123:1-123:296\"><a href=\"http://raspberrypi.local/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://raspberrypi.local/</a> は同じネットワーク内のPC・スマホ等からしかアクセスできませんが、noipで作った <a href=\"http://example.hopto.org/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://example.hopto.org/</a> みたいなアドレスにアクセスすると <code>Hello World</code> と表示できたらOKです。 全世界に公開できました。</p>\n<p data-sourcepos=\"125:1-125:21\">参考にした記事</p>\n<ul data-sourcepos=\"126:1-127:0\">\n<li data-sourcepos=\"126:1-127:0\"><a href=\"https://ichiken-usa.blogspot.com/2022/01/raspi-web-server.html\" rel=\"nofollow noopener\" target=\"_blank\">安全にラズパイWebサーバーを世界に公開するための手順</a></li>\n</ul>\n<p data-sourcepos=\"128:1-128:78\">ポートフォワーディングを使って安全に公開しましょう。</p>\n<h3 data-sourcepos=\"130:1-130:37\">\n<span id=\"ファイヤーウォール設定\" class=\"fragment\"></span><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%A4%E3%83%BC%E3%82%A6%E3%82%A9%E3%83%BC%E3%83%AB%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>ファイヤーウォール設定</h3>\n<details>\n<summary> Ubuntuのデフォルトのufwで設定 </summary>\n<p data-sourcepos=\"135:1-135:39\">ラズパイに上で以下コマンド</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"137:1-148:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>apt <span class=\"nb\">install </span>ufw\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>ufw allow http\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>ufw allow https\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>ufw allow ssh\n<span class=\"gp\">#</span><span class=\"w\"> </span>sshでアクセスするので必要。失敗したらsshできず終わる。\n<span class=\"go\">\n</span><span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>ufw <span class=\"nb\">enable</span>\n<span class=\"go\">\n</span><span class=\"gp\">#</span><span class=\"w\"> </span>ラズパイの再起動\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>reboot\n</code></pre></div></div>\n</details>\n<h3 data-sourcepos=\"153:1-153:14\">\n<span id=\"ddns作成\" class=\"fragment\"></span><a href=\"#ddns%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>DDNS作成</h3>\n<p data-sourcepos=\"155:1-155:110\">自宅のIPアドレスは定期的に変更されます。以下のようなサイトで確認できます。</p>\n<ul data-sourcepos=\"157:1-159:0\">\n<li data-sourcepos=\"157:1-157:112\"><a href=\"https://www.cman.jp/network/support/go_access.cgi\" rel=\"nofollow noopener\" target=\"_blank\">アクセス情報【使用中のIPアドレス確認】</a></li>\n<li data-sourcepos=\"158:1-159:0\"><a href=\"https://tarufu.info/jcom-global-ip/\" rel=\"nofollow noopener\" target=\"_blank\">JCOMでグローバルIPアドレスを変更しようとした話</a></li>\n</ul>\n<p data-sourcepos=\"160:1-160:218\">自宅のIPがころころ変わったら、ラズパイにアクセスできないのでもろもろいろいろやってくれるサイトにアカウント作るって話です。詳しくは調べてください。</p>\n<details>\n<summary>NOIPというサイトを使います</summary>\n<p data-sourcepos=\"165:1-165:185\">noipのパスワードは後でJCOMルーター上の設定で必要となるので、共通で使っているもの以外がいいと思います。chromeに覚えさせましょう。</p>\n<p data-sourcepos=\"167:1-167:12\">参考記事</p>\n<ul data-sourcepos=\"168:1-169:0\">\n<li data-sourcepos=\"168:1-169:0\"><a href=\"https://www.try-e.co.jp/manual/getnoip.pdf\" rel=\"nofollow noopener\" target=\"_blank\">No-ip のアカウント及びDDNSサーバーアドレスの取得方法</a></li>\n</ul>\n</details>\n<h3 data-sourcepos=\"172:1-172:29\">\n<span id=\"ルーターのddns設定\" class=\"fragment\"></span><a href=\"#%E3%83%AB%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%AEddns%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>ルーターのDDNS設定</h3>\n<details>\n<summary> 筆者はJCOMなのでその設定 </summary>\n<p data-sourcepos=\"177:1-177:73\"><a href=\"http://192.168.0.1/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://192.168.0.1/</a> か <a href=\"http://192.168.100.1/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://192.168.100.1/</a> でアクセスできる。</p>\n<p data-sourcepos=\"179:1-179:55\">初期ID/PASSは以下ですが変更しましょう。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"181:1-184:3\"><div class=\"highlight\"><pre><code><span class=\"go\">ID: admin\nPassword: password\n</span></code></pre></div></div>\n<p data-sourcepos=\"186:1-186:103\">設定項目は以下スクショを参考に、先程作ったnoipの情報を使ってください。</p>\n<p data-sourcepos=\"188:1-188:162\"><a href=\"https://camo.qiitausercontent.com/6021a8b01a2c828e979f3d1bb628edc12384d28d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36363063393866622d356433382d616238372d656664322d3065383435643931633238342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F660c98fb-5d38-ab87-efd2-0e845d91c284.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=268ddf14c92b47c73c75e99304df11c1\" alt=\"スクリーンショット 2023-05-08 0.03.54.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/660c98fb-5d38-ab87-efd2-0e845d91c284.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F660c98fb-5d38-ab87-efd2-0e845d91c284.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=709288f2b7a6b52a00ac7a71b3c9db03 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"191:1-191:21\">参考にした記事</p>\n<ul data-sourcepos=\"192:1-193:0\">\n<li data-sourcepos=\"192:1-193:0\"><a href=\"https://homemadegarbage.com/humax-port\" rel=\"nofollow noopener\" target=\"_blank\">HUMAX HG100R-02JG の ポート開放設定</a></li>\n</ul>\n</details>\n<h3 data-sourcepos=\"196:1-196:43\">\n<span id=\"ポートフォワーディング設定\" class=\"fragment\"></span><a href=\"#%E3%83%9D%E3%83%BC%E3%83%88%E3%83%95%E3%82%A9%E3%83%AF%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>ポートフォワーディング設定</h3>\n<p data-sourcepos=\"198:1-198:39\">ここまでできたらグローバル</p>\n<details>\n<summary> 筆者はJCOMなのでその設定 </summary>\n<p data-sourcepos=\"203:1-203:162\"><a href=\"https://camo.qiitausercontent.com/8f78b64e722269090bc87f39034d36412f853087/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61303433343138652d326530302d356533662d663838382d3833666538356262643161392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fa043418e-2e00-5e3f-f888-83fe85bbd1a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b33c037070284010ef24dbe94538d57b\" alt=\"スクリーンショット 2023-05-08 0.12.38.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a043418e-2e00-5e3f-f888-83fe85bbd1a9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fa043418e-2e00-5e3f-f888-83fe85bbd1a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5f4325c09dc0e858ddf0be6f3d5c0cca 1x\" loading=\"lazy\"></a></p>\n</details>\n<h2 data-sourcepos=\"208:1-208:15\">\n<span id=\"httpsssl化\" class=\"fragment\"></span><a href=\"#httpsssl%E5%8C%96\"><i class=\"fa fa-link\"></i></a>https/ssl化</h2>\n<p data-sourcepos=\"210:1-210:232\">最近のcertbotは <a href=\"https://certbot.eff.org/instructions?ws=nginx&amp;os=ubuntubionic\" rel=\"nofollow noopener\" target=\"_blank\">公式サイト</a> で自分のOS等を設定してそのコマンド通りにやるみたいです。過去記事は基本真似しないように。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"212:1-219:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>apt <span class=\"nt\">-y</span> <span class=\"nb\">install </span>snapd\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>snap <span class=\"nb\">install </span>core<span class=\"p\">;</span> <span class=\"nb\">sudo </span>snap refresh core\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>apt-get remove certbot\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>snap <span class=\"nb\">install</span> <span class=\"nt\">--classic</span> certbot\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo ln</span> <span class=\"nt\">-s</span> /snap/bin/certbot /usr/bin/certbot\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>certbot <span class=\"nt\">--nginx</span>\n</code></pre></div></div>\n<p data-sourcepos=\"221:1-221:216\">自動処理のためcronの編集。毎月1日、朝4時に更新。 <code>--force-renewal</code> で残り30日を待たずに毎月更新、nginxの再起動付き。 作りたてなので本当に動くかわからない。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"223:1-226:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>crontab <span class=\"nt\">-u</span> root <span class=\"nt\">-e</span>\n<span class=\"go\">00 04 01 * * sudo certbot renew --force-renewal &amp;&amp; sudo systemctl restart nginx\n</span></code></pre></div></div>\n<p data-sourcepos=\"228:1-228:106\">１時間に5回失敗するとしばらく使えないのでドライランで実行結果だけ見る。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"230:1-232:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">sudo </span>certbot renew <span class=\"nt\">--dry-run</span>\n</code></pre></div></div>\n<p data-sourcepos=\"234:1-234:131\">nginxのサーバー設定に追記する。pemの位置は <code>sudo certbot --nginx</code> で設定したものを書いてください。</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"237:1-243:3\"><div class=\"highlight\"><pre><code>        server {\n          listen 443 ssl;\n          ssl_certificate     /etc/letsencrypt/live/example.hopto.org/fullchain.pem;\n          ssl_certificate_key /etc/letsencrypt/live/example.hopto.org/privkey.pem;\n        }\n</code></pre></div></div>\n<p data-sourcepos=\"246:1-246:29\">ラズパイ上のalias設定</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"248:1-253:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">ykhirao@raspberrypi:~ $</span><span class=\"w\"> </span><span class=\"nb\">cat</span> ~/.bashrc\n<span class=\"go\">alias fix_nginx=\"sudo vim /etc/nginx/sites-available/default\"\nalias start=\"sudo systemctl start nginx &amp;&amp; nodemon ~/workspace/piapp/index.js\"\nalias stop=\"sudo systemctl stop nginx\"\n</span></code></pre></div></div>\n<p data-sourcepos=\"255:1-255:107\">httpsでアクセスして、こんな感じに <code>保護されていない通信</code> とでなくなったらOK</p>\n<p data-sourcepos=\"257:1-257:162\"><a href=\"https://camo.qiitausercontent.com/111e8f91a00e8480ede842cdb454448def8e85ff/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f65316436646239662d633933322d353665312d653339612d6238663963633066313137342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fe1d6db9f-c932-56e1-e39a-b8f9cc0f1174.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0543c3476ec3b409f719bbe654b33b7b\" alt=\"スクリーンショット 2023-05-08 0.59.18.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/e1d6db9f-c932-56e1-e39a-b8f9cc0f1174.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fe1d6db9f-c932-56e1-e39a-b8f9cc0f1174.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f3e20391092ad82cfd610b0c5e2d5c95 1x\" loading=\"lazy\"></a></p>\n<details>\n<summary> ここまでのnginx設定 </summary>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"264:1-292:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">ykhirao@raspberrypi:~ $</span><span class=\"w\"> </span><span class=\"nb\">cat</span> /etc/nginx/sites-available/default\n<span class=\"go\">\nserver {\n</span><span class=\"gp\">\tlisten 80 default_server;</span><span class=\"w\">\n</span><span class=\"gp\">\tlisten [::]:80 default_server;</span><span class=\"w\">\n</span><span class=\"go\">\n</span><span class=\"gp\">\tssl_certificate     /etc/letsencrypt/live/example.hopto.org/fullchain.pem;</span><span class=\"w\">\n</span><span class=\"gp\">\tssl_certificate_key /etc/letsencrypt/live/example.hopto.org/privkey.pem;</span><span class=\"w\">\n</span><span class=\"gp\">\tlisten 443 ssl;</span><span class=\"w\">\n</span><span class=\"go\">\n</span><span class=\"gp\">\troot /var/www/html;</span><span class=\"w\">\n</span><span class=\"go\">\n</span><span class=\"gp\">\tindex index.html index.htm index.nginx-debian.html index.js;</span><span class=\"w\">\n</span><span class=\"go\">\n</span><span class=\"gp\">\tserver_name example.hopto.org;</span><span class=\"w\">\n</span><span class=\"go\">\n\tlocation ~ /.well-known {\n</span><span class=\"gp\">\t\tallow all;</span><span class=\"w\">\n</span><span class=\"go\">\t}\n\n\tlocation / {\n</span><span class=\"gp\">\t\t#</span><span class=\"w\"> </span>First attempt to serve request as file, <span class=\"k\">then</span>\n<span class=\"gp\">\t\t#</span><span class=\"w\"> </span>as directory, <span class=\"k\">then </span>fall back to displaying a 404.\n<span class=\"gp\">\t\ttry_files $</span>uri <span class=\"nv\">$uri</span>/ <span class=\"o\">=</span>404<span class=\"p\">;</span>\n<span class=\"gp\">\t\tproxy_pass http://localhost:3000;</span><span class=\"w\"> </span><span class=\"c\"># ★追加</span>\n<span class=\"go\">\t}\n}\n</span></code></pre></div></div>\n</details>\n<h2 data-sourcepos=\"295:1-295:67\">\n<span id=\"forever使ってnodejsをバックグラウンドで実行する\" class=\"fragment\"></span><a href=\"#forever%E4%BD%BF%E3%81%A3%E3%81%A6nodejs%E3%82%92%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>forever使ってnodejsをバックグラウンドで実行する</h2>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"297:1-300:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>npm <span class=\"nb\">install</span> <span class=\"nt\">-g</span> forever\n<span class=\"gp\">$</span><span class=\"w\"> </span>forever index.js\n</code></pre></div></div>\n<h2 data-sourcepos=\"302:1-302:36\">\n<span id=\"vscodeでremote開発をしよう\" class=\"fragment\"></span><a href=\"#vscode%E3%81%A7remote%E9%96%8B%E7%99%BA%E3%82%92%E3%81%97%E3%82%88%E3%81%86\"><i class=\"fa fa-link\"></i></a>VSCodeでRemote開発をしよう</h2>\n<p data-sourcepos=\"304:1-304:125\"><a href=\"https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack\" rel=\"nofollow noopener\" target=\"_blank\">Remote DevelopmentPreview</a></p>\n<details>\n<summary>設定のスクリーンショット</summary>\n<ul data-sourcepos=\"310:1-312:0\">\n<li data-sourcepos=\"310:1-310:84\">\n<code>CMD + SHIFT + P</code> もしくは <code>CMD + P</code> でメニューを出して <code>&gt;</code> を入力</li>\n<li data-sourcepos=\"311:1-312:0\">\n<code>SSH</code> と打つと出てくる　<code>Remote SSH: connect to host</code> を選択</li>\n</ul>\n<p data-sourcepos=\"313:1-313:163\"><a href=\"https://camo.qiitausercontent.com/de7f095288a79d8fe8a458768209331887f8edf5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61386433626334332d666334362d613563382d353766382d3432653863336233343464342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fa8d3bc43-fc46-a5c8-57f8-42e8c3b344d4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=aab844e2c3ee10b2dbd6e98360c2a2aa\" alt=\"スクリーンショット 2023-05-08 14.38.16.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a8d3bc43-fc46-a5c8-57f8-42e8c3b344d4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fa8d3bc43-fc46-a5c8-57f8-42e8c3b344d4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5c54230c3c0134e581f59fc432139bfb 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"315:1-315:90\">ssh configを設定してたら出てくるのでpiを選択する。一応再掲する。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"317:1-324:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>vim ~/.ssh/config\n<span class=\"go\">\nHost pi\n</span><span class=\"gp\">  HostName raspberrypi.local #</span><span class=\"w\"> </span>http://192.168.0.23/, <span class=\"sb\">`</span><span class=\"nv\">$ </span>ip addr<span class=\"sb\">`</span>\n<span class=\"go\">  User ykhirao\n  IdentityFile /Users/ykhirao/.ssh/id_rsa_pi\n</span></code></pre></div></div>\n<p data-sourcepos=\"326:1-326:163\"><a href=\"https://camo.qiitausercontent.com/04bf7ed5a58b5bbfe182eacf58980a996d060b03/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61343964326331622d373364302d663464302d346562342d3332323764363365636631362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fa49d2c1b-73d0-f4d0-4eb4-3227d63ecf16.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d0e17794817b66035b2b996b5f22997e\" alt=\"スクリーンショット 2023-05-08 14.38.21.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a49d2c1b-73d0-f4d0-4eb4-3227d63ecf16.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fa49d2c1b-73d0-f4d0-4eb4-3227d63ecf16.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8efa547db68f7b9a14c6d72a57b177b5 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"328:1-328:57\">VSCodeでRemote開発できるようになりました。</p>\n<p data-sourcepos=\"330:1-330:163\"><a href=\"https://camo.qiitausercontent.com/4f3843e94efa970d19270d6ddb08d4b27bbb7ac6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39636135353861332d656136362d613933332d623133352d3433353431653962393637392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9ca558a3-ea66-a933-b135-43541e9b9679.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0e0e1ff8bb448de16141bc42f281f3ae\" alt=\"スクリーンショット 2023-05-08 14.38.35.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9ca558a3-ea66-a933-b135-43541e9b9679.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9ca558a3-ea66-a933-b135-43541e9b9679.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e7a51c347ebbfb0bb542a6e7bde6157c 1x\" loading=\"lazy\"></a></p>\n</details>\n","body":"# GWなのでラズパイ買ってきてWebサーバーとして公開した件\n\nインストーラーのアップデートなどで過去の記事の内容が古くなっていたので一応最新っぽいものを乗せます。\n全世界公開しているので自分でセキュリティの知識を得てから使ってください。責任は持てません。\nやばそうなところあったら編集リクエストくださると・・・\n\n## ラズパイ購入する\n\n* メルカリで購入しました\n* https://jp.mercari.com/search?keyword=ラズパイ\n\n## ラズパイをインストールする\n\n2023年にはRaspberry Pi Imagerというインストーラーを使うやり方が主流みたいです。\n\n* [公式](https://www.raspberrypi.com/software/)からダウンロードしましょう。\n* ここが参考になりました https://nw-electric.way-nifty.com/blog/2022/05/post-2cdd01.html\n\n初期ユーザー `user＝pi、password＝raspberry` は2022年からデフォルトで存在しないので、設定から作りましょう。以下参考\n\n<details>\n<summary>ラズパイへのアクセスはSSH/CUIのみの方向け</summary>\n\n![スクリーンショット 2023-05-07 23.14.09.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2a5b68d2-95bb-730a-1108-33edd61d9990.png)\n\n\n* OSはPI OS Lite （ダウンロード早いです）\n* 画面右下の設定マークからSSH設定を作れます\n\n一応以下設定乗せます。mac側から `ssh pi` でログインできるようにしてます。\n\n```terminal\n$ vim ~/.ssh/config\n\nHost pi\n  HostName raspberrypi.local # http://192.168.0.23/, `$ ip addr`\n  User ykhirao\n  IdentityFile /Users/ykhirao/.ssh/id_rsa_pi\n\n$ ssh pi\n$ ykhirao@raspberrypi:~ $\n```\n\n</details>\n\n\n## サーバーを用意する\n\nnginx でも Apacheでも適当なミドルウエアとphpでもnodejsでも何でもいいのでアプリケーションサーバー選ぶ。\n何いっているのという方は[適当な記事](https://www.rworks.jp/system/system-column/sys-entry/14865/)を読む。\n\n今回は `nginx x nodejs` にしますが、ApacheのC10K問題とかまでアクセスされる予定ないので（ラズパイのメモリ性能とかが先に限界迎えるはず・・・）自分の好きな環境とか身近な記事を参考にするとよいと思います。\n\n\n上記記事と同様に設定すると、以下のコマンドを入力してサーバーを立ち上げ\n\n```terminal\n$ node index.js\n```\n\n同じネットワーク内から `http://raspberrypi.local/`　か http://192.168.0.23/ (人によってIP違う可能性あり) にアクセスしたとき `nginx` のミドルウエアが動き `nodejsサーバー` にアクセスします。うまく設定できてたら `Hello World` が表示させましょう。\n\n\n<details>\n<summary>コマンドまとめと参考記事</summary>\n\n```terminal\n# パッケージを最新版へ\n$ sudo apt-get update\n$ sudo apt-get upgrade\n\n# ミドルウエア\n$ sudo apt install nginx -y\n\n# nodejsのインストール（nが使いたいのでもろもろやってます）\n$ sudo apt install nodejs npm\n$ sudo npm install n -g\n$ sudo n lts\n$ sudo apt purge nodejs npm\n\n# アプリケーションサーバーの作成\n$ sudo mkdir -p ~/workspace/piapp\n$ sudo vi ~/workspace/piapp/index.js\n# 下記ファイルを参考に修正する\n$ sudo vi /etc/nginx/sites-enabled\n# 下記ファイルを参考に修正する\n\n# アプリケーションサーバーの立ち上げ\n$ sudo npm install nodemon -g\n$ nodemon ~/workspace/piapp/index.js\n\n# nodejsプロセスが死んでも自動で再起動させるため nodemon を利用してます。\n# 必要なければ node ~/workspace/piapp/index.js でよいです。\n```\n\n```~/workspace/piapp/index.js\nconst http = require(\"http\"); \nconst server = http.createServer(function (req, res) {\n    res.statusCode = 200;\n    res.setHeader(\"Content-Type\", \"text/plain\");\n    res.end(\"Hello World\");\n});\nserver.listen(3000);\n```\n\n```/etc/nginx/sites-enabled\n\tlocation / {\n\t\ttry_files $uri $uri/ =404;\n\t\tproxy_pass http://localhost:3000;\n\t}\n```\n\n\n参考記事\n\n* [UbuntuサーバーにnginxとNode.jsを入れてWebサーバーを建てる](https://hondakenya.work/ubuntu-nginx-node-js/)を参考にしました。\n* [Ubuntu で Node の最新版/推奨版を使う (n コマンド編)](https://qiita.com/cointoss1973/items/c000c4f84ae4b0c166b5)\n\n</details>\n\n## 自宅のルーターにポート転送設定して全世界公開します\n\nhttp://raspberrypi.local/ は同じネットワーク内のPC・スマホ等からしかアクセスできませんが、noipで作った http://example.hopto.org/ みたいなアドレスにアクセスすると `Hello World` と表示できたらOKです。 全世界に公開できました。\n\n参考にした記事\n* [安全にラズパイWebサーバーを世界に公開するための手順](https://ichiken-usa.blogspot.com/2022/01/raspi-web-server.html)\n\nポートフォワーディングを使って安全に公開しましょう。\n\n### ファイヤーウォール設定\n\n<details>\n<summary> Ubuntuのデフォルトのufwで設定 </summary>\n\nラズパイに上で以下コマンド\n\n```terminal\n$ sudo apt install ufw\n$ sudo ufw allow http\n$ sudo ufw allow https\n$ sudo ufw allow ssh\n# sshでアクセスするので必要。失敗したらsshできず終わる。\n\n$ sudo ufw enable\n\n# ラズパイの再起動\n$ sudo reboot\n```\n\n</details>\n\n\n### DDNS作成\n\n自宅のIPアドレスは定期的に変更されます。以下のようなサイトで確認できます。\n\n* [アクセス情報【使用中のIPアドレス確認】](https://www.cman.jp/network/support/go_access.cgi )\n* [JCOMでグローバルIPアドレスを変更しようとした話](https://tarufu.info/jcom-global-ip/)\n\n自宅のIPがころころ変わったら、ラズパイにアクセスできないのでもろもろいろいろやってくれるサイトにアカウント作るって話です。詳しくは調べてください。\n\n<details>\n<summary>NOIPというサイトを使います</summary>\n\nnoipのパスワードは後でJCOMルーター上の設定で必要となるので、共通で使っているもの以外がいいと思います。chromeに覚えさせましょう。\n\n参考記事\n* [No-ip のアカウント及びDDNSサーバーアドレスの取得方法](https://www.try-e.co.jp/manual/getnoip.pdf)\n\n</details>\n\n### ルーターのDDNS設定\n\n<details>\n<summary> 筆者はJCOMなのでその設定 </summary>\n\nhttp://192.168.0.1/ か http://192.168.100.1/ でアクセスできる。\n\n初期ID/PASSは以下ですが変更しましょう。\n\n```terminal\nID: admin\nPassword: password\n```\n\n設定項目は以下スクショを参考に、先程作ったnoipの情報を使ってください。\n\n![スクリーンショット 2023-05-08 0.03.54.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/660c98fb-5d38-ab87-efd2-0e845d91c284.png)\n\n\n参考にした記事\n* [HUMAX HG100R-02JG の ポート開放設定](https://homemadegarbage.com/humax-port)\n\n</details>\n\n### ポートフォワーディング設定\n\nここまでできたらグローバル\n\n<details>\n<summary> 筆者はJCOMなのでその設定 </summary>\n\n![スクリーンショット 2023-05-08 0.12.38.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a043418e-2e00-5e3f-f888-83fe85bbd1a9.png)\n\n\n</details>\n\n## https/ssl化\n\n最近のcertbotは [公式サイト](https://certbot.eff.org/instructions?ws=nginx&os=ubuntubionic) で自分のOS等を設定してそのコマンド通りにやるみたいです。過去記事は基本真似しないように。\n\n```terminal\n$ sudo apt -y install snapd\n$ sudo snap install core; sudo snap refresh core\n$ sudo apt-get remove certbot\n$ sudo snap install --classic certbot\n$ sudo ln -s /snap/bin/certbot /usr/bin/certbot\n$ sudo certbot --nginx\n```\n\n自動処理のためcronの編集。毎月1日、朝4時に更新。 `--force-renewal` で残り30日を待たずに毎月更新、nginxの再起動付き。 作りたてなので本当に動くかわからない。\n\n```terminal\n$ sudo crontab -u root -e\n00 04 01 * * sudo certbot renew --force-renewal && sudo systemctl restart nginx\n```\n\n１時間に5回失敗するとしばらく使えないのでドライランで実行結果だけ見る。\n\n```terminal\n$ sudo certbot renew --dry-run\n```\n\nnginxのサーバー設定に追記する。pemの位置は `sudo certbot --nginx` で設定したものを書いてください。\n\n\n```\n        server {\n          listen 443 ssl;\n          ssl_certificate     /etc/letsencrypt/live/example.hopto.org/fullchain.pem;\n          ssl_certificate_key /etc/letsencrypt/live/example.hopto.org/privkey.pem;\n        }\n```\n\n\nラズパイ上のalias設定\n\n```terminal\nykhirao@raspberrypi:~ $ cat ~/.bashrc\nalias fix_nginx=\"sudo vim /etc/nginx/sites-available/default\"\nalias start=\"sudo systemctl start nginx && nodemon ~/workspace/piapp/index.js\"\nalias stop=\"sudo systemctl stop nginx\"\n```\n\nhttpsでアクセスして、こんな感じに `保護されていない通信` とでなくなったらOK\n\n![スクリーンショット 2023-05-08 0.59.18.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/e1d6db9f-c932-56e1-e39a-b8f9cc0f1174.png)\n\n\n\n<details>\n<summary> ここまでのnginx設定 </summary>\n\n```terminal\nykhirao@raspberrypi:~ $ cat /etc/nginx/sites-available/default\n\nserver {\n\tlisten 80 default_server;\n\tlisten [::]:80 default_server;\n\n\tssl_certificate     /etc/letsencrypt/live/example.hopto.org/fullchain.pem;\n\tssl_certificate_key /etc/letsencrypt/live/example.hopto.org/privkey.pem;\n\tlisten 443 ssl;\n\n\troot /var/www/html;\n\n\tindex index.html index.htm index.nginx-debian.html index.js;\n\n\tserver_name example.hopto.org;\n\n\tlocation ~ /.well-known {\n\t\tallow all;\n\t}\n\n\tlocation / {\n\t\t# First attempt to serve request as file, then\n\t\t# as directory, then fall back to displaying a 404.\n\t\ttry_files $uri $uri/ =404;\n\t\tproxy_pass http://localhost:3000; # ★追加\n\t}\n}\n```\n</details>\n\n## forever使ってnodejsをバックグラウンドで実行する\n\n```terminal\n$ npm install -g forever\n$ forever index.js\n```\n\n## VSCodeでRemote開発をしよう\n\n[Remote DevelopmentPreview](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack)\n\n\n<details>\n<summary>設定のスクリーンショット</summary>\n\n* `CMD + SHIFT + P` もしくは `CMD + P` でメニューを出して `>` を入力\n* `SSH` と打つと出てくる　`Remote SSH: connect to host` を選択\n\n![スクリーンショット 2023-05-08 14.38.16.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a8d3bc43-fc46-a5c8-57f8-42e8c3b344d4.png)\n\nssh configを設定してたら出てくるのでpiを選択する。一応再掲する。\n\n```terminal\n$ vim ~/.ssh/config\n\nHost pi\n  HostName raspberrypi.local # http://192.168.0.23/, `$ ip addr`\n  User ykhirao\n  IdentityFile /Users/ykhirao/.ssh/id_rsa_pi\n```\n\n![スクリーンショット 2023-05-08 14.38.21.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a49d2c1b-73d0-f4d0-4eb4-3227d63ecf16.png)\n\nVSCodeでRemote開発できるようになりました。\n\n![スクリーンショット 2023-05-08 14.38.35.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9ca558a3-ea66-a933-b135-43541e9b9679.png)\n\n\n</details>\n","coediting":false,"comments_count":0,"created_at":"2023-05-08T01:10:08+09:00","group":null,"id":"f26e18364594e7077612","likes_count":0,"private":false,"reactions_count":0,"stocks_count":5,"tags":[{"name":"JavaScript","versions":[]},{"name":"Node.js","versions":[]},{"name":"nginx","versions":[]},{"name":"Security","versions":[]},{"name":"ラズパイ","versions":[]}],"title":"2023年GWなのでラズパイ買ってきてWebサーバーとして公開した件","updated_at":"2023-05-08T14:43:29+09:00","url":"https://qiita.com/ykhirao/items/f26e18364594e7077612","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p data-sourcepos=\"2:1-2:123\">言語ファイルなどが当てはまると思うが以下のような条件にあてはまるものを対応させたい</p>\n<ul data-sourcepos=\"4:1-7:0\">\n<li data-sourcepos=\"4:1-4:32\">よくコンフリクトする</li>\n<li data-sourcepos=\"5:1-5:14\">追記のみ</li>\n<li data-sourcepos=\"6:1-7:0\">どちらも適用させる</li>\n</ul>\n<h2 data-sourcepos=\"8:1-8:30\">\n<span id=\"特定のファイルのみ\" class=\"fragment\"></span><a href=\"#%E7%89%B9%E5%AE%9A%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%81%BF\"><i class=\"fa fa-link\"></i></a>特定のファイルのみ</h2>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"10:1-14:3\"><div class=\"highlight\"><pre><code>$ vim .gitattributes\n\n*.json merge=union\n</code></pre></div></div>\n<h2 data-sourcepos=\"16:1-16:27\">\n<span id=\"すべてのファイル\" class=\"fragment\"></span><a href=\"#%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB\"><i class=\"fa fa-link\"></i></a>すべてのファイル</h2>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"19:1-22:3\"><div class=\"highlight\"><pre><code>$ vim .gitattributes\nmerge=verify\n</code></pre></div></div>\n<h2 data-sourcepos=\"24:1-24:45\">\n<span id=\"以下コマンドうったときの参考\" class=\"fragment\"></span><a href=\"#%E4%BB%A5%E4%B8%8B%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%86%E3%81%A3%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E5%8F%82%E8%80%83\"><i class=\"fa fa-link\"></i></a>以下コマンドうったときの参考</h2>\n<p data-sourcepos=\"27:1-27:38\"><iframe id=\"qiita-embed-content__2327c2fdd06bd4a9098b5be3e2f31670\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__2327c2fdd06bd4a9098b5be3e2f31670\" data-content=\"https%3A%2F%2Fgit-scm.com%2Fdocs%2Fgitattributes\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"29:1-29:109\"><iframe id=\"qiita-embed-content__4bea3297f091d08900e94d9a40854046\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__4bea3297f091d08900e94d9a40854046\" data-content=\"https%3A%2F%2Fstackoverflow.com%2Fquestions%2F5074452%2Fgit-how-to-force-merge-conflict-and-manual-merge-on-selected-file\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"31:1-45:3\"><div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"ja\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"nl\">\"message\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"welcome\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ようこそ！\"</span><span class=\"p\">,</span><span class=\"w\">\n</span><span class=\"err\">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span><span class=\"w\"> </span><span class=\"err\">HEAD</span><span class=\"w\">\n            </span><span class=\"nl\">\"thank\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ありがとう！\"</span><span class=\"w\">\n</span><span class=\"err\">=======</span><span class=\"w\">\n            </span><span class=\"nl\">\"byebye\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"さようなら！\"</span><span class=\"w\">\n</span><span class=\"err\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"err\">feature/add-byebye</span><span class=\"w\">\n        </span><span class=\"p\">}</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n\n</span></code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"48:1-61:3\"><div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"ja\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"nl\">\"message\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"welcome\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ようこそ！\"</span><span class=\"p\">,</span><span class=\"w\">\n</span><span class=\"err\">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span><span class=\"w\"> </span><span class=\"err\">HEAD</span><span class=\"w\">\n            </span><span class=\"nl\">\"thank\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ありがとう！\"</span><span class=\"w\">\n</span><span class=\"err\">=======</span><span class=\"w\">\n            </span><span class=\"nl\">\"byebye\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"さようなら！\"</span><span class=\"w\">\n</span><span class=\"err\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"err\">feature/add-byebye</span><span class=\"w\">\n        </span><span class=\"p\">}</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"64:1-74:3\"><div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"ja\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"nl\">\"message\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"welcome\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ようこそ！\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"thank\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ありがとう！\"</span><span class=\"w\">\n            </span><span class=\"nl\">\"byebye\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"さようなら！\"</span><span class=\"w\">\n        </span><span class=\"p\">}</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n","body":"\n言語ファイルなどが当てはまると思うが以下のような条件にあてはまるものを対応させたい\n\n* よくコンフリクトする\n* 追記のみ\n* どちらも適用させる\n\n## 特定のファイルのみ\n\n```\n$ vim .gitattributes\n\n*.json merge=union\n```\n\n## すべてのファイル\n\n\n```\n$ vim .gitattributes\nmerge=verify\n```\n\n## 以下コマンドうったときの参考\n\n\nhttps://git-scm.com/docs/gitattributes\n\nhttps://stackoverflow.com/questions/5074452/git-how-to-force-merge-conflict-and-manual-merge-on-selected-file\n\n```json\n{\n    \"ja\": {\n        \"message\": {\n            \"welcome\": \"ようこそ！\",\n<<<<<<< HEAD\n            \"thank\": \"ありがとう！\"\n=======\n            \"byebye\": \"さようなら！\"\n>>>>>>> feature/add-byebye\n        }\n    }\n}\n\n```\n\n\n```json\n{\n    \"ja\": {\n        \"message\": {\n            \"welcome\": \"ようこそ！\",\n<<<<<<< HEAD\n            \"thank\": \"ありがとう！\"\n=======\n            \"byebye\": \"さようなら！\"\n>>>>>>> feature/add-byebye\n        }\n    }\n}\n```\n\n\n```json\n{\n    \"ja\": {\n        \"message\": {\n            \"welcome\": \"ようこそ！\",\n            \"thank\": \"ありがとう！\"\n            \"byebye\": \"さようなら！\"\n        }\n    }\n}\n```\n\n\n\n\n\n\n","coediting":false,"comments_count":0,"created_at":"2023-05-08T01:07:30+09:00","group":null,"id":"3f96d77ff3f273111c55","likes_count":0,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"JavaScript","versions":[]},{"name":"Git","versions":[]},{"name":"JSON","versions":[]}],"title":"gitで特定ファイルだけコンフリクト無効で強制マージ","updated_at":"2023-05-08T01:11:17+09:00","url":"https://qiita.com/ykhirao/items/3f96d77ff3f273111c55","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"2:1-2:41\">\n<span id=\"自作効果音アプリ作ってみた\" class=\"fragment\"></span><a href=\"#%E8%87%AA%E4%BD%9C%E5%8A%B9%E6%9E%9C%E9%9F%B3%E3%82%A2%E3%83%97%E3%83%AA%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F\"><i class=\"fa fa-link\"></i></a>自作効果音アプリ作ってみた</h1>\n<p data-sourcepos=\"4:1-5:165\">先日配信をすることになっていろいろ音をいじることになってWebアプリ作って配信しました。<br>\n音源Aを流しながら、音源Bのポン出ししたり（このときAは再生したまま）などの要件があったので自分で作った次第です。</p>\n<h2 data-sourcepos=\"7:1-7:9\">\n<span id=\"流れ\" class=\"fragment\"></span><a href=\"#%E6%B5%81%E3%82%8C\"><i class=\"fa fa-link\"></i></a>流れ</h2>\n<ul data-sourcepos=\"9:1-11:0\">\n<li data-sourcepos=\"9:1-9:12\">html書く</li>\n<li data-sourcepos=\"10:1-11:0\">netlifyにフォルダごとデプロイ</li>\n</ul>\n<p data-sourcepos=\"12:1-12:118\">Netlifyじゃなくてもいいので「html ホスティング 無料」とかでぐぐるとよいと思います。</p>\n<h2 data-sourcepos=\"14:1-14:13\">\n<span id=\"html部分\" class=\"fragment\"></span><a href=\"#html%E9%83%A8%E5%88%86\"><i class=\"fa fa-link\"></i></a>html部分</h2>\n<p data-sourcepos=\"16:1-16:18\">フォルダ構成</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"18:1-24:3\"><div class=\"highlight\"><pre><code>yk@yk music % tree\n<span class=\"nb\">.</span>\n├── assets\n│   └── 和太鼓でドン.mp3\n├── index.html\n</code></pre></div></div>\n<p data-sourcepos=\"26:1-26:10\">html部分</p>\n<div class=\"code-frame\" data-lang=\"html\" data-sourcepos=\"29:1-50:3\"><div class=\"highlight\"><pre><code><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"nt\">&lt;html</span> <span class=\"na\">lang=</span><span class=\"s\">\"ja\"</span><span class=\"nt\">&gt;</span>\n\n<span class=\"nt\">&lt;head&gt;</span>\n    <span class=\"nt\">&lt;meta</span> <span class=\"na\">charset=</span><span class=\"s\">\"UTF-8\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;meta</span> <span class=\"na\">http-equiv=</span><span class=\"s\">\"X-UA-Compatible\"</span> <span class=\"na\">content=</span><span class=\"s\">\"IE=edge\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;meta</span> <span class=\"na\">name=</span><span class=\"s\">\"viewport\"</span> <span class=\"na\">content=</span><span class=\"s\">\"width=device-width, initial-scale=1.0\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;title&gt;</span>ポン出しアプリ<span class=\"nt\">&lt;/title&gt;</span>\n<span class=\"nt\">&lt;/head&gt;</span>\n\n<span class=\"nt\">&lt;body&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">id=</span><span class=\"s\">\"app\"</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;p&gt;</span>\n            和太鼓でドン\n        <span class=\"nt\">&lt;/p&gt;</span>\n        <span class=\"nt\">&lt;audio</span> <span class=\"na\">src=</span><span class=\"s\">\"./assets/和太鼓でドン.mp3\"</span> <span class=\"na\">controls</span><span class=\"nt\">&gt;&lt;/audio&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/body&gt;</span>\n\n<span class=\"nt\">&lt;/html&gt;</span>\n</code></pre></div></div>\n<p data-sourcepos=\"52:1-52:18\">以上で完成。</p>\n<p data-sourcepos=\"54:1-54:255\">今回例で<a href=\"https://soundeffect-lab.info/\" rel=\"nofollow noopener\" target=\"_blank\">効果音ラボさん</a>の和太鼓でどんを使おうとしたのですが、再配布禁止だったので誰でもアクセスできる状態のWebアプリでの作成だと使えないみたいでした。</p>\n<blockquote data-sourcepos=\"56:1-58:90\">\n<p data-sourcepos=\"56:3-58:90\">利用規約<br>\n再配布に該当するケース<br>\n例1）効果音を自由に鳴らせるアプリを作る（効果音集的なもの）</p>\n</blockquote>\n<p data-sourcepos=\"60:1-61:41\">というかそもそも編集自由なポン出しアプリを作られていることに気づきました。<br>\n<a href=\"https://soundeffect-lab.info/pon/app.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://soundeffect-lab.info/pon/app.html</a></p>\n<p data-sourcepos=\"63:1-63:286\">Netlifyのproプラン以上だとベーシック認証付けられるので、ID・PASS認証により自分しか絶対にアクセスできない私的利用状態でのWebアプリだと問題ないかもしれませんが、そもそも再配布可能な音源使いましょう。</p>\n<p data-sourcepos=\"66:1-66:163\"><a href=\"https://camo.qiitausercontent.com/0d8e59a99c3af88076f1f2ce8eb08f3ac44af5e3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32636465623134352d643661392d303064622d326562612d3065326562623138336564362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2cdeb145-d6a9-00db-2eba-0e2ebb183ed6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3dc9992a87a7a6934803c99229c91576\" alt=\"スクリーンショット 2023-02-24 12.50.36.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2cdeb145-d6a9-00db-2eba-0e2ebb183ed6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2cdeb145-d6a9-00db-2eba-0e2ebb183ed6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=43c8e3347df04760de2fffca15ccde3b 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"68:1-68:163\"><a href=\"https://camo.qiitausercontent.com/65e2353200af6dde15da186af6da877cf5b4a3cd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f38353161663363302d373234372d346262622d613937372d3363666565636233633530392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F851af3c0-7247-4bbb-a977-3cfeecb3c509.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=03b73bee1743b2f67f33e7682b669d6d\" alt=\"スクリーンショット 2023-02-24 12.50.44.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/851af3c0-7247-4bbb-a977-3cfeecb3c509.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F851af3c0-7247-4bbb-a977-3cfeecb3c509.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7591ad951e7ec9d603a6f42d85294b68 1x\" loading=\"lazy\"></a></p>\n","body":"\n# 自作効果音アプリ作ってみた\n\n先日配信をすることになっていろいろ音をいじることになってWebアプリ作って配信しました。\n音源Aを流しながら、音源Bのポン出ししたり（このときAは再生したまま）などの要件があったので自分で作った次第です。\n\n## 流れ\n\n* html書く\n* netlifyにフォルダごとデプロイ\n\nNetlifyじゃなくてもいいので「html ホスティング 無料」とかでぐぐるとよいと思います。\n\n## html部分\n\nフォルダ構成\n\n```bash\nyk@yk music % tree\n.\n├── assets\n│   └── 和太鼓でドン.mp3\n├── index.html\n```\n\nhtml部分\n\n\n```html\n<!DOCTYPE html>\n<html lang=\"ja\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>ポン出しアプリ</title>\n</head>\n\n<body>\n    <div id=\"app\">\n        <p>\n            和太鼓でドン\n        </p>\n        <audio src=\"./assets/和太鼓でドン.mp3\" controls></audio>\n    </div>\n</body>\n\n</html>\n```\n\n以上で完成。\n\n今回例で[効果音ラボさん](https://soundeffect-lab.info/)の和太鼓でどんを使おうとしたのですが、再配布禁止だったので誰でもアクセスできる状態のWebアプリでの作成だと使えないみたいでした。\n\n> 利用規約\n> 再配布に該当するケース\n> 例1）効果音を自由に鳴らせるアプリを作る（効果音集的なもの）\n\nというかそもそも編集自由なポン出しアプリを作られていることに気づきました。\nhttps://soundeffect-lab.info/pon/app.html\n\nNetlifyのproプラン以上だとベーシック認証付けられるので、ID・PASS認証により自分しか絶対にアクセスできない私的利用状態でのWebアプリだと問題ないかもしれませんが、そもそも再配布可能な音源使いましょう。\n\n\n![スクリーンショット 2023-02-24 12.50.36.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2cdeb145-d6a9-00db-2eba-0e2ebb183ed6.png)\n\n![スクリーンショット 2023-02-24 12.50.44.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/851af3c0-7247-4bbb-a977-3cfeecb3c509.png)\n\n\n\n\n\n","coediting":false,"comments_count":0,"created_at":"2023-02-24T15:38:07+09:00","group":null,"id":"f163ce91d91409ff81c6","likes_count":0,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"HTML","versions":[]},{"name":"JavaScript","versions":[]},{"name":"music","versions":[]},{"name":"効果音","versions":[]}],"title":"自作ポン出しWebアプリを5分で作る","updated_at":"2023-02-24T15:38:07+09:00","url":"https://qiita.com/ykhirao/items/f163ce91d91409ff81c6","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h2 data-sourcepos=\"1:1-1:12\">\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n<ul data-sourcepos=\"3:1-13:0\">\n<li data-sourcepos=\"3:1-4:40\">\n<code>import _ from \"lodash\"</code>\n<ul data-sourcepos=\"4:3-4:40\">\n<li data-sourcepos=\"4:3-4:40\">圧倒的にやめたほうがよい</li>\n</ul>\n</li>\n<li data-sourcepos=\"5:1-7:139\">\n<code>import { get } from \"lodash\"</code>\n<ul data-sourcepos=\"6:3-7:139\">\n<li data-sourcepos=\"6:3-6:49\">ファイルサイズ削減にはならない</li>\n<li data-sourcepos=\"7:3-7:139\">が、削除しようという意思があるので、そう自分のプロダクトに書いてあったら自分を褒めましょう</li>\n</ul>\n</li>\n<li data-sourcepos=\"8:1-13:0\">\n<code>import get from \"lodash/get</code>\n<ul data-sourcepos=\"9:3-13:0\">\n<li data-sourcepos=\"9:3-9:34\">この書き方が一番よい</li>\n<li data-sourcepos=\"10:3-10:89\">関数数個の import だと、lodash 全体の 20%くらいに収まる気がする</li>\n<li data-sourcepos=\"11:3-11:92\">すべての関数をインポートすると逆に重くなる（1.5 倍くらい？）</li>\n<li data-sourcepos=\"12:3-13:0\">100 くらいのインポートの wrapper ファイル作るくらいならよさそう</li>\n</ul>\n</li>\n</ul>\n<h2 data-sourcepos=\"14:1-14:15\">\n<span id=\"解析結果\" class=\"fragment\"></span><a href=\"#%E8%A7%A3%E6%9E%90%E7%B5%90%E6%9E%9C\"><i class=\"fa fa-link\"></i></a>解析結果</h2>\n<p data-sourcepos=\"16:1-16:135\"><a href=\"https://camo.qiitausercontent.com/c4b235d45a42bc5b12780041d2da4564db41a68a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32346535326235632d633761362d626631332d643033332d3630333033656166363565632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F24e52b5c-c7a6-bf13-d033-60303eaf65ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cf25acb85fdf6b1de1be42a16a5fbc62\" alt=\"127.0.0.1_8888_ (4).png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/24e52b5c-c7a6-bf13-d033-60303eaf65ec.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F24e52b5c-c7a6-bf13-d033-60303eaf65ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9ae8adea64e188c30bb4bcffbb651bdf 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"18:1-18:64\">Gzipするなら144関数インポートしてもよさそう。</p>\n<table data-sourcepos=\"20:1-26:33\">\n<thead>\n<tr data-sourcepos=\"20:1-20:52\">\n<th style=\"text-align: center\" data-sourcepos=\"20:1-20:3\">--</th>\n<th style=\"text-align: center\" data-sourcepos=\"20:5-20:18\">StatSize(KB)</th>\n<th style=\"text-align: center\" data-sourcepos=\"20:20-20:35\">ParsedSize(KB)</th>\n<th style=\"text-align: center\" data-sourcepos=\"20:37-20:52\">GzippedSize(KB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"22:1-22:30\">\n<td style=\"text-align: center\" data-sourcepos=\"22:1-22:14\">from \"lodash\"</td>\n<td style=\"text-align: center\" data-sourcepos=\"22:16-22:20\">531</td>\n<td style=\"text-align: center\" data-sourcepos=\"22:22-22:26\">554</td>\n<td style=\"text-align: center\" data-sourcepos=\"22:28-22:30\">96</td>\n</tr>\n<tr data-sourcepos=\"23:1-23:29\">\n<td style=\"text-align: center\" data-sourcepos=\"23:1-23:14\">import 3 func</td>\n<td style=\"text-align: center\" data-sourcepos=\"23:16-23:19\">70</td>\n<td style=\"text-align: center\" data-sourcepos=\"23:21-23:25\">126</td>\n<td style=\"text-align: center\" data-sourcepos=\"23:27-23:29\">18</td>\n</tr>\n<tr data-sourcepos=\"24:1-24:31\">\n<td style=\"text-align: center\" data-sourcepos=\"24:1-24:15\">import 22 func</td>\n<td style=\"text-align: center\" data-sourcepos=\"24:17-24:21\">193</td>\n<td style=\"text-align: center\" data-sourcepos=\"24:23-24:27\">315</td>\n<td style=\"text-align: center\" data-sourcepos=\"24:29-24:31\">49</td>\n</tr>\n<tr data-sourcepos=\"25:1-25:32\">\n<td style=\"text-align: center\" data-sourcepos=\"25:1-25:16\">import 144 func</td>\n<td style=\"text-align: center\" data-sourcepos=\"25:18-25:22\">387</td>\n<td style=\"text-align: center\" data-sourcepos=\"25:24-25:28\">640</td>\n<td style=\"text-align: center\" data-sourcepos=\"25:30-25:32\">95</td>\n</tr>\n<tr data-sourcepos=\"26:1-26:33\">\n<td style=\"text-align: center\" data-sourcepos=\"26:1-26:16\">import 304 func</td>\n<td style=\"text-align: center\" data-sourcepos=\"26:18-26:22\">546</td>\n<td style=\"text-align: center\" data-sourcepos=\"26:24-26:28\">928</td>\n<td style=\"text-align: center\" data-sourcepos=\"26:30-26:33\">132</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"28:1-28:18\">\n<span id=\"コード提案\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E6%8F%90%E6%A1%88\"><i class=\"fa fa-link\"></i></a>コード提案</h2>\n<p data-sourcepos=\"30:1-31:157\">今回の結果を受けて自分がコードをこう変えようと思ったという結果を乗せておきます。<br>\nlodashを減らす方向で、直接importせずにまとめたwrapperクラスを作って一つずつ減らしていく方向にしようかなと思い。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"33:1-36:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">#</span><span class=\"w\"> </span>_.get みたいな使い方しているところをgrepして必要な関数を特定する\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">grep</span>  <span class=\"s2\">\"</span><span class=\"se\">\\_\\.</span><span class=\"s2\">\"</span> <span class=\"nt\">-r</span> ./src/\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"js\" data-sourcepos=\"38:1-48:3\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">arr</span> <span class=\"o\">=</span> <span class=\"s2\">`_.pick\n_.isNil\n_.get\n_.pick\n_.pick\n`</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"se\">\\n</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// 一意にする</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"nb\">Array</span><span class=\"p\">.</span><span class=\"k\">from</span><span class=\"p\">(</span><span class=\"k\">new</span> <span class=\"nc\">Set</span><span class=\"p\">(</span><span class=\"nx\">a</span><span class=\"p\">)).</span><span class=\"nf\">join</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"se\">\\n</span><span class=\"dl\">\"</span><span class=\"p\">))</span>\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"js\" data-sourcepos=\"50:1-67:3\"><div class=\"highlight\"><pre><code><span class=\"c1\">// こんな感じの一覧ができる</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">pick</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">isNil</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"kd\">get</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">isPlainObject</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">keys</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">snakeCase</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"kd\">set</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">isArray</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">camelCase</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">isEmpty</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">cloneDeep</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">assign</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">values</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">isInteger</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nx\">fill</span>\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"70:1-104:3\">\n<div class=\"code-lang\"><span class=\"bold\">lodashWrapper.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"nx\">pick</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/pick</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isNil</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isNil</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"kd\">get</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/get</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isPlainObject</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isPlainObject</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">keys</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/keys</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">snakeCase</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/snakeCase</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"kd\">set</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/set</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isArray</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isArray</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">camelCase</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/camelCase</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isEmpty</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isEmpty</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">cloneDeep</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/cloneDeep</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">assign</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/assign</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">values</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/values</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isInteger</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isInteger</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">fill</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/fill</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"nx\">pick</span><span class=\"p\">,</span>\n  <span class=\"nx\">isNil</span><span class=\"p\">,</span>\n  <span class=\"kd\">get</span><span class=\"p\">,</span>\n  <span class=\"nx\">isPlainObject</span><span class=\"p\">,</span>\n  <span class=\"nx\">keys</span><span class=\"p\">,</span>\n  <span class=\"nx\">snakeCase</span><span class=\"p\">,</span>\n  <span class=\"kd\">set</span><span class=\"p\">,</span>\n  <span class=\"nx\">isArray</span><span class=\"p\">,</span>\n  <span class=\"nx\">camelCase</span><span class=\"p\">,</span>\n  <span class=\"nx\">isEmpty</span><span class=\"p\">,</span>\n  <span class=\"nx\">cloneDeep</span><span class=\"p\">,</span>\n  <span class=\"nx\">assign</span><span class=\"p\">,</span>\n  <span class=\"nx\">values</span><span class=\"p\">,</span>\n  <span class=\"nx\">isInteger</span><span class=\"p\">,</span>\n  <span class=\"nx\">fill</span><span class=\"p\">,</span>\n<span class=\"p\">};</span>\n</code></pre></div>\n</div>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"106:1-109:3\">\n<div class=\"code-lang\"><span class=\"bold\">imported.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"nx\">_</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodashWrapper</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"nx\">_</span><span class=\"p\">.</span><span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"dl\">''</span><span class=\"p\">,</span> <span class=\"dl\">''</span><span class=\"p\">);</span>\n</code></pre></div>\n</div>\n<p data-sourcepos=\"111:1-111:184\">wrapperクラスに一括置換しやすいようにconfigファイル修正したりして <code>../</code> 記法をなくして import from 'lodashWrapper' みたいにしてもよさそう。</p>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"113:1-121:3\">\n<div class=\"code-lang\"><span class=\"bold\">webpack.config.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">module</span><span class=\"p\">.</span><span class=\"nx\">exports</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">alias</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"dl\">'</span><span class=\"s1\">lodashWrapper</span><span class=\"dl\">'</span><span class=\"p\">:</span> <span class=\"nx\">path</span><span class=\"p\">.</span><span class=\"nf\">resolve</span><span class=\"p\">(</span><span class=\"nx\">__dirname</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">./src/lodashWrapper</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n</div>\n<h2 data-sourcepos=\"125:1-125:18\">\n<span id=\"解析コード\" class=\"fragment\"></span><a href=\"#%E8%A7%A3%E6%9E%90%E3%82%B3%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>解析コード</h2>\n<p data-sourcepos=\"127:1-127:96\">自分で触ってみたい人は参考にでも、以下のコードで動くと思います。</p>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"129:1-133:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>npm i\n<span class=\"gp\">$</span><span class=\"w\"> </span>npm run build\n<span class=\"gp\">$</span><span class=\"w\"> </span>npm run analyze\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"135:1-156:3\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>brew <span class=\"nb\">install </span>tree\n<span class=\"gp\">$</span><span class=\"w\"> </span>tree <span class=\"nt\">-L</span> 2 <span class=\"nt\">-I</span> node_modules/\n<span class=\"c\">.\n</span><span class=\"go\">├── dist\n│   ├── import30.bundle.js\n│   ├── importAll.bundle.js\n│   ├── importHalf.bundle.js\n│   ├── index1.bundle.js\n│   ├── index2.bundle.js\n│   └── index3.bundle.js\n├── package-lock.json\n├── package.json\n├── src\n│   ├── import30.js\n│   ├── importAll.js\n│   ├── importHalf.js\n│   ├── index1.js\n│   ├── index2.js\n│   └── index3.js\n└── webpack.config.js\n</span></code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"158:1-180:3\">\n<div class=\"code-lang\"><span class=\"bold\">package.json</span></div>\n<div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"sample\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"version\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"1.0.0\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"main\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"index.js\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"scripts\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"build\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"webpack\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"analyze\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"webpack --analyze\"</span><span class=\"w\">\n  </span><span class=\"p\">},</span><span class=\"w\">\n  </span><span class=\"nl\">\"keywords\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[],</span><span class=\"w\">\n  </span><span class=\"nl\">\"author\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"license\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"MIT\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"devDependencies\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"webpack\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"^5.75.0\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"webpack-bundle-analyzer\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"^4.7.0\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"webpack-cli\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"^5.0.1\"</span><span class=\"w\">\n  </span><span class=\"p\">},</span><span class=\"w\">\n  </span><span class=\"nl\">\"dependencies\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"lodash\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"^4.17.21\"</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div>\n</div>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"182:1-198:3\">\n<div class=\"code-lang\"><span class=\"bold\">webpack.config.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">module</span><span class=\"p\">.</span><span class=\"nx\">exports</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"na\">mode</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">development</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"c1\">// production</span>\n  <span class=\"na\">entry</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">index1</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">./src/index1.js</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"na\">index2</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">./src/index2.js</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"na\">index3</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">./src/index3.js</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"na\">import30</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">./src/import30.js</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"na\">importAll</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">./src/importAll.js</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"na\">importHalf</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">./src/importHalf.js</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"p\">},</span>\n  <span class=\"na\">output</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">path</span><span class=\"p\">:</span> <span class=\"nx\">__dirname</span> <span class=\"o\">+</span> <span class=\"dl\">\"</span><span class=\"s2\">/dist</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"na\">filename</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">[name].bundle.js</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"p\">},</span>\n<span class=\"p\">};</span>\n</code></pre></div>\n</div>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"200:1-204:3\">\n<div class=\"code-lang\"><span class=\"bold\">src/index1.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"nx\">_</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"nx\">_</span><span class=\"p\">;</span>\n</code></pre></div>\n</div>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"206:1-214:3\">\n<div class=\"code-lang\"><span class=\"bold\">src/index2.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">join</span><span class=\"p\">,</span> <span class=\"nx\">compact</span><span class=\"p\">,</span> <span class=\"nx\">cloneDeep</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"nx\">join</span><span class=\"p\">,</span>\n  <span class=\"nx\">compact</span><span class=\"p\">,</span>\n  <span class=\"nx\">cloneDeep</span><span class=\"p\">,</span>\n<span class=\"p\">};</span>\n</code></pre></div>\n</div>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"216:1-226:3\">\n<div class=\"code-lang\"><span class=\"bold\">src/index3.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"nx\">join</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/join</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">compact</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/compact</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">cloneDeep</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/cloneDeep</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"nx\">join</span><span class=\"p\">,</span>\n  <span class=\"nx\">compact</span><span class=\"p\">,</span>\n  <span class=\"nx\">cloneDeep</span><span class=\"p\">,</span>\n<span class=\"p\">};</span>\n</code></pre></div>\n</div>\n<details>\n<summary>importAll</summary>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"232:1-545:3\">\n<div class=\"code-lang\"><span class=\"bold\">src/importAll.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"c1\">// const _ = require(\"lodash\");</span>\n<span class=\"c1\">// Object.keys(_).map((key) =&gt; {</span>\n<span class=\"c1\">//   console.log(`import ${key} from \"lodash/${key}\"`);</span>\n<span class=\"c1\">// });</span>\n<span class=\"c1\">// Module not found: Error: Can't resolve 'lodash/noConflict' in '/Users/yk/workspace/sample/src'</span>\n<span class=\"c1\">// Module not found: Error: Can't resolve 'lodash/runInContext' in '/Users/yk/workspace/sample/src'</span>\n<span class=\"c1\">// Module not found: Error: Can't resolve 'lodash/VERSION' in '/Users/yk/workspace/sample/src'</span>\n\n<span class=\"k\">import</span> <span class=\"nx\">templateSettings</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/templateSettings</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">after</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/after</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">ary</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/ary</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">assign</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/assign</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">assignIn</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/assignIn</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">assignInWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/assignInWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">assignWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/assignWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">at</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/at</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">before</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/before</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">bind</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/bind</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">bindAll</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/bindAll</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">bindKey</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/bindKey</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">castArray</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/castArray</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">chain</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/chain</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">chunk</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/chunk</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">compact</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/compact</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">concat</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/concat</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">cond</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/cond</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">conforms</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/conforms</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">constant</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/constant</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">countBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/countBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">create</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/create</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">curry</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/curry</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">curryRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/curryRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">debounce</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/debounce</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">defaults</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/defaults</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">defaultsDeep</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/defaultsDeep</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">defer</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/defer</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">delay</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/delay</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">difference</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/difference</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">differenceBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/differenceBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">differenceWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/differenceWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">drop</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/drop</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">dropRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/dropRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">dropRightWhile</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/dropRightWhile</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">dropWhile</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/dropWhile</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">fill</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/fill</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">filter</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/filter</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">flatMap</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/flatMap</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">flatMapDeep</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/flatMapDeep</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">flatMapDepth</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/flatMapDepth</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">flatten</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/flatten</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">flattenDeep</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/flattenDeep</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">flattenDepth</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/flattenDepth</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">flip</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/flip</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">flow</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/flow</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">flowRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/flowRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">fromPairs</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/fromPairs</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">functions</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/functions</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">functionsIn</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/functionsIn</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">groupBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/groupBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">initial</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/initial</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">intersection</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/intersection</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">intersectionBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/intersectionBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">intersectionWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/intersectionWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">invert</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/invert</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">invertBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/invertBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">invokeMap</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/invokeMap</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">iteratee</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/iteratee</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">keyBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/keyBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">keys</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/keys</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">keysIn</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/keysIn</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">map</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/map</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">mapKeys</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/mapKeys</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">mapValues</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/mapValues</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">matches</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/matches</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">matchesProperty</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/matchesProperty</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">memoize</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/memoize</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">merge</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/merge</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">mergeWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/mergeWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">method</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/method</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">methodOf</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/methodOf</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">mixin</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/mixin</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">negate</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/negate</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">nthArg</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/nthArg</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">omit</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/omit</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">omitBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/omitBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">once</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/once</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">orderBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/orderBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">over</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/over</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">overArgs</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/overArgs</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">overEvery</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/overEvery</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">overSome</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/overSome</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">partial</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/partial</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">partialRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/partialRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">partition</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/partition</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">pick</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/pick</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">pickBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/pickBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">property</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/property</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">propertyOf</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/propertyOf</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">pull</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/pull</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">pullAll</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/pullAll</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">pullAllBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/pullAllBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">pullAllWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/pullAllWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">pullAt</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/pullAt</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">range</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/range</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">rangeRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/rangeRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">rearg</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/rearg</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">reject</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/reject</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">remove</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/remove</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">rest</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/rest</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">reverse</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/reverse</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sampleSize</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sampleSize</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"kd\">set</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/set</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">setWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/setWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">shuffle</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/shuffle</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">slice</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/slice</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sortBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sortBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sortedUniq</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sortedUniq</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sortedUniqBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sortedUniqBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">split</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/split</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">spread</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/spread</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">tail</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/tail</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">take</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/take</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">takeRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/takeRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">takeRightWhile</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/takeRightWhile</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">takeWhile</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/takeWhile</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">tap</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/tap</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">throttle</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/throttle</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">thru</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/thru</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toArray</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toArray</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toPairs</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toPairs</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toPairsIn</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toPairsIn</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toPath</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toPath</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toPlainObject</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toPlainObject</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">transform</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/transform</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">unary</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/unary</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">union</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/union</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">unionBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/unionBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">unionWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/unionWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">uniq</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/uniq</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">uniqBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/uniqBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">uniqWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/uniqWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">unset</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/unset</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">unzip</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/unzip</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">unzipWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/unzipWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">update</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/update</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">updateWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/updateWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">values</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/values</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">valuesIn</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/valuesIn</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">without</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/without</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">words</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/words</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">wrap</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/wrap</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">xor</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/xor</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">xorBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/xorBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">xorWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/xorWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">zip</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/zip</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">zipObject</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/zipObject</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">zipObjectDeep</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/zipObjectDeep</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">zipWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/zipWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">entries</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/entries</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">entriesIn</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/entriesIn</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">extend</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/extend</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">extendWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/extendWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">add</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/add</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">attempt</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/attempt</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">camelCase</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/camelCase</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">capitalize</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/capitalize</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">ceil</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/ceil</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">clamp</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/clamp</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">clone</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/clone</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">cloneDeep</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/cloneDeep</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">cloneDeepWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/cloneDeepWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">cloneWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/cloneWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">conformsTo</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/conformsTo</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">deburr</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/deburr</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">defaultTo</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/defaultTo</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">divide</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/divide</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">endsWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/endsWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">eq</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/eq</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">escape</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/escape</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">escapeRegExp</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/escapeRegExp</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">every</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/every</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">find</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/find</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">findIndex</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/findIndex</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">findKey</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/findKey</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">findLast</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/findLast</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">findLastIndex</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/findLastIndex</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">findLastKey</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/findLastKey</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">floor</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/floor</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">forEach</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/forEach</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">forEachRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/forEachRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">forIn</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/forIn</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">forInRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/forInRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">forOwn</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/forOwn</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">forOwnRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/forOwnRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"kd\">get</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/get</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">gt</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/gt</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">gte</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/gte</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">has</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/has</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">hasIn</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/hasIn</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">head</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/head</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">identity</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/identity</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">includes</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/includes</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">indexOf</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/indexOf</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">inRange</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/inRange</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">invoke</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/invoke</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isArguments</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isArguments</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isArray</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isArray</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isArrayBuffer</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isArrayBuffer</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isArrayLike</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isArrayLike</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isArrayLikeObject</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isArrayLikeObject</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isBoolean</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isBoolean</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isBuffer</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isBuffer</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isDate</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isDate</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isElement</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isElement</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isEmpty</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isEmpty</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isEqual</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isEqual</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isEqualWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isEqualWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isError</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isError</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nb\">isFinite</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isFinite</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isFunction</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isFunction</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isInteger</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isInteger</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isLength</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isLength</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isMap</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isMap</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isMatch</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isMatch</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isMatchWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isMatchWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nb\">isNaN</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isNaN</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isNative</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isNative</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isNil</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isNil</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isNull</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isNull</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isNumber</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isNumber</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isObject</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isObject</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isObjectLike</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isObjectLike</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isPlainObject</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isPlainObject</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isRegExp</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isRegExp</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isSafeInteger</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isSafeInteger</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isSet</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isSet</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isString</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isString</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isSymbol</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isSymbol</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isTypedArray</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isTypedArray</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isUndefined</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isUndefined</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isWeakMap</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isWeakMap</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">isWeakSet</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/isWeakSet</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">join</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/join</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">kebabCase</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/kebabCase</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">last</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/last</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">lastIndexOf</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/lastIndexOf</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">lowerCase</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/lowerCase</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">lowerFirst</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/lowerFirst</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">lt</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/lt</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">lte</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/lte</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">max</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/max</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">maxBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/maxBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">mean</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/mean</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">meanBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/meanBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">min</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/min</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">minBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/minBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">stubArray</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/stubArray</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">stubFalse</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/stubFalse</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">stubObject</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/stubObject</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">stubString</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/stubString</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">stubTrue</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/stubTrue</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">multiply</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/multiply</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">nth</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/nth</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">noop</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/noop</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">now</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/now</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">pad</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/pad</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">padEnd</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/padEnd</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">padStart</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/padStart</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nb\">parseInt</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/parseInt</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">random</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/random</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">reduce</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/reduce</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">reduceRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/reduceRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">repeat</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/repeat</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">replace</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/replace</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">result</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/result</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">round</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/round</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sample</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sample</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">size</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/size</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">snakeCase</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/snakeCase</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">some</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/some</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sortedIndex</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sortedIndex</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sortedIndexBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sortedIndexBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sortedIndexOf</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sortedIndexOf</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sortedLastIndex</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sortedLastIndex</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sortedLastIndexBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sortedLastIndexBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sortedLastIndexOf</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sortedLastIndexOf</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">startCase</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/startCase</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">startsWith</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/startsWith</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">subtract</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/subtract</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sum</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sum</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">sumBy</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/sumBy</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">template</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/template</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">times</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/times</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toFinite</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toFinite</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toInteger</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toInteger</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toLength</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toLength</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toLower</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toLower</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toNumber</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toNumber</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toSafeInteger</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toSafeInteger</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toString</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toString</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">toUpper</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/toUpper</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">trim</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/trim</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">trimEnd</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/trimEnd</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">trimStart</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/trimStart</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">truncate</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/truncate</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">unescape</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/unescape</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">uniqueId</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/uniqueId</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">upperCase</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/upperCase</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">upperFirst</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/upperFirst</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">each</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/each</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">eachRight</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/eachRight</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"nx\">first</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">lodash/first</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n</code></pre></div>\n</div>\n</details>\n<h2 data-sourcepos=\"549:1-549:9\">\n<span id=\"参考\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83\"><i class=\"fa fa-link\"></i></a>参考</h2>\n<p data-sourcepos=\"551:1-551:114\">何番煎じとかいうツッコミなしでお願いします。以下サイトの追加検証になります。</p>\n<ul data-sourcepos=\"553:1-553:103\">\n<li data-sourcepos=\"553:1-553:103\"><a href=\"https://blog.ryou103.com/post/lodash-reduce-bundle/\" rel=\"nofollow noopener\" target=\"_blank\">Lodash のファイルサイズを削減する</a></li>\n</ul>\n","body":"## まとめ\n\n* `import _ from \"lodash\"`\n  * 圧倒的にやめたほうがよい\n* `import { get } from \"lodash\"`\n  * ファイルサイズ削減にはならない\n  * が、削除しようという意思があるので、そう自分のプロダクトに書いてあったら自分を褒めましょう\n* `import get from \"lodash/get`\n  * この書き方が一番よい\n  * 関数数個の import だと、lodash 全体の 20%くらいに収まる気がする\n  * すべての関数をインポートすると逆に重くなる（1.5 倍くらい？）\n  * 100 くらいのインポートの wrapper ファイル作るくらいならよさそう\n\n## 解析結果\n\n![127.0.0.1_8888_ (4).png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/24e52b5c-c7a6-bf13-d033-60303eaf65ec.png)\n\nGzipするなら144関数インポートしてもよさそう。\n\n-- | StatSize(KB) | ParsedSize(KB) | GzippedSize(KB)\n:---: | :---: | :---: | :---:\nfrom \"lodash\" | 531 | 554 | 96\nimport 3 func | 70 | 126 | 18\nimport 22 func | 193 | 315 | 49\nimport 144 func | 387 | 640 | 95\nimport 304 func | 546 | 928 | 132\n\n## コード提案\n\n今回の結果を受けて自分がコードをこう変えようと思ったという結果を乗せておきます。\nlodashを減らす方向で、直接importせずにまとめたwrapperクラスを作って一つずつ減らしていく方向にしようかなと思い。\n\n```terminal\n# _.get みたいな使い方しているところをgrepして必要な関数を特定する\n$ grep  \"\\_\\.\" -r ./src/\n```\n\n```js\nconst arr = `_.pick\n_.isNil\n_.get\n_.pick\n_.pick\n`.split(\"\\n\")\n\n// 一意にする\nconsole.log(Array.from(new Set(a)).join(\"\\n\"))\n```\n\n```js\n// こんな感じの一覧ができる\n_.pick\n_.isNil\n_.get\n_.isPlainObject\n_.keys\n_.snakeCase\n_.set\n_.isArray\n_.camelCase\n_.isEmpty\n_.cloneDeep\n_.assign\n_.values\n_.isInteger\n_.fill\n```\n\n\n```lodashWrapper.js\nimport pick from \"lodash/pick\";\nimport isNil from \"lodash/isNil\";\nimport get from \"lodash/get\";\nimport isPlainObject from \"lodash/isPlainObject\";\nimport keys from \"lodash/keys\";\nimport snakeCase from \"lodash/snakeCase\";\nimport set from \"lodash/set\";\nimport isArray from \"lodash/isArray\";\nimport camelCase from \"lodash/camelCase\";\nimport isEmpty from \"lodash/isEmpty\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport assign from \"lodash/assign\";\nimport values from \"lodash/values\";\nimport isInteger from \"lodash/isInteger\";\nimport fill from \"lodash/fill\";\n\nexport default {\n  pick,\n  isNil,\n  get,\n  isPlainObject,\n  keys,\n  snakeCase,\n  set,\n  isArray,\n  camelCase,\n  isEmpty,\n  cloneDeep,\n  assign,\n  values,\n  isInteger,\n  fill,\n};\n```\n\n```imported.js\nimport _ from \"lodashWrapper\";\n_.get('', '');\n```\n\nwrapperクラスに一括置換しやすいようにconfigファイル修正したりして `../` 記法をなくして import from 'lodashWrapper' みたいにしてもよさそう。\n\n```webpack.config.js\nmodule.exports = {\n  resolve: {\n    alias: {\n      'lodashWrapper': path.resolve(__dirname, './src/lodashWrapper')\n    },\n  }\n}\n```\n\n\n\n## 解析コード\n\n自分で触ってみたい人は参考にでも、以下のコードで動くと思います。\n\n```terminal\n$ npm i\n$ npm run build\n$ npm run analyze\n```\n\n```terminal\n$ brew install tree\n$ tree -L 2 -I node_modules/\n.\n├── dist\n│   ├── import30.bundle.js\n│   ├── importAll.bundle.js\n│   ├── importHalf.bundle.js\n│   ├── index1.bundle.js\n│   ├── index2.bundle.js\n│   └── index3.bundle.js\n├── package-lock.json\n├── package.json\n├── src\n│   ├── import30.js\n│   ├── importAll.js\n│   ├── importHalf.js\n│   ├── index1.js\n│   ├── index2.js\n│   └── index3.js\n└── webpack.config.js\n```\n\n```package.json\n{\n  \"name\": \"sample\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"build\": \"webpack\",\n    \"analyze\": \"webpack --analyze\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"MIT\",\n  \"devDependencies\": {\n    \"webpack\": \"^5.75.0\",\n    \"webpack-bundle-analyzer\": \"^4.7.0\",\n    \"webpack-cli\": \"^5.0.1\"\n  },\n  \"dependencies\": {\n    \"lodash\": \"^4.17.21\"\n  }\n}\n```\n\n```webpack.config.js\nmodule.exports = {\n  mode: \"development\", // production\n  entry: {\n    index1: \"./src/index1.js\",\n    index2: \"./src/index2.js\",\n    index3: \"./src/index3.js\",\n    import30: \"./src/import30.js\",\n    importAll: \"./src/importAll.js\",\n    importHalf: \"./src/importHalf.js\",\n  },\n  output: {\n    path: __dirname + \"/dist\",\n    filename: \"[name].bundle.js\",\n  },\n};\n```\n\n```src/index1.js\nimport _ from \"lodash\";\n\nexport default _;\n```\n\n```src/index2.js\nimport { join, compact, cloneDeep } from \"lodash\";\n\nexport default {\n  join,\n  compact,\n  cloneDeep,\n};\n```\n\n```src/index3.js\nimport join from \"lodash/join\";\nimport compact from \"lodash/compact\";\nimport cloneDeep from \"lodash/cloneDeep\";\n\nexport default {\n  join,\n  compact,\n  cloneDeep,\n};\n```\n\n\n<details>\n<summary>importAll</summary>\n\n```src/importAll.js\n// const _ = require(\"lodash\");\n// Object.keys(_).map((key) => {\n//   console.log(`import ${key} from \"lodash/${key}\"`);\n// });\n// Module not found: Error: Can't resolve 'lodash/noConflict' in '/Users/yk/workspace/sample/src'\n// Module not found: Error: Can't resolve 'lodash/runInContext' in '/Users/yk/workspace/sample/src'\n// Module not found: Error: Can't resolve 'lodash/VERSION' in '/Users/yk/workspace/sample/src'\n\nimport templateSettings from \"lodash/templateSettings\";\nimport after from \"lodash/after\";\nimport ary from \"lodash/ary\";\nimport assign from \"lodash/assign\";\nimport assignIn from \"lodash/assignIn\";\nimport assignInWith from \"lodash/assignInWith\";\nimport assignWith from \"lodash/assignWith\";\nimport at from \"lodash/at\";\nimport before from \"lodash/before\";\nimport bind from \"lodash/bind\";\nimport bindAll from \"lodash/bindAll\";\nimport bindKey from \"lodash/bindKey\";\nimport castArray from \"lodash/castArray\";\nimport chain from \"lodash/chain\";\nimport chunk from \"lodash/chunk\";\nimport compact from \"lodash/compact\";\nimport concat from \"lodash/concat\";\nimport cond from \"lodash/cond\";\nimport conforms from \"lodash/conforms\";\nimport constant from \"lodash/constant\";\nimport countBy from \"lodash/countBy\";\nimport create from \"lodash/create\";\nimport curry from \"lodash/curry\";\nimport curryRight from \"lodash/curryRight\";\nimport debounce from \"lodash/debounce\";\nimport defaults from \"lodash/defaults\";\nimport defaultsDeep from \"lodash/defaultsDeep\";\nimport defer from \"lodash/defer\";\nimport delay from \"lodash/delay\";\nimport difference from \"lodash/difference\";\nimport differenceBy from \"lodash/differenceBy\";\nimport differenceWith from \"lodash/differenceWith\";\nimport drop from \"lodash/drop\";\nimport dropRight from \"lodash/dropRight\";\nimport dropRightWhile from \"lodash/dropRightWhile\";\nimport dropWhile from \"lodash/dropWhile\";\nimport fill from \"lodash/fill\";\nimport filter from \"lodash/filter\";\nimport flatMap from \"lodash/flatMap\";\nimport flatMapDeep from \"lodash/flatMapDeep\";\nimport flatMapDepth from \"lodash/flatMapDepth\";\nimport flatten from \"lodash/flatten\";\nimport flattenDeep from \"lodash/flattenDeep\";\nimport flattenDepth from \"lodash/flattenDepth\";\nimport flip from \"lodash/flip\";\nimport flow from \"lodash/flow\";\nimport flowRight from \"lodash/flowRight\";\nimport fromPairs from \"lodash/fromPairs\";\nimport functions from \"lodash/functions\";\nimport functionsIn from \"lodash/functionsIn\";\nimport groupBy from \"lodash/groupBy\";\nimport initial from \"lodash/initial\";\nimport intersection from \"lodash/intersection\";\nimport intersectionBy from \"lodash/intersectionBy\";\nimport intersectionWith from \"lodash/intersectionWith\";\nimport invert from \"lodash/invert\";\nimport invertBy from \"lodash/invertBy\";\nimport invokeMap from \"lodash/invokeMap\";\nimport iteratee from \"lodash/iteratee\";\nimport keyBy from \"lodash/keyBy\";\nimport keys from \"lodash/keys\";\nimport keysIn from \"lodash/keysIn\";\nimport map from \"lodash/map\";\nimport mapKeys from \"lodash/mapKeys\";\nimport mapValues from \"lodash/mapValues\";\nimport matches from \"lodash/matches\";\nimport matchesProperty from \"lodash/matchesProperty\";\nimport memoize from \"lodash/memoize\";\nimport merge from \"lodash/merge\";\nimport mergeWith from \"lodash/mergeWith\";\nimport method from \"lodash/method\";\nimport methodOf from \"lodash/methodOf\";\nimport mixin from \"lodash/mixin\";\nimport negate from \"lodash/negate\";\nimport nthArg from \"lodash/nthArg\";\nimport omit from \"lodash/omit\";\nimport omitBy from \"lodash/omitBy\";\nimport once from \"lodash/once\";\nimport orderBy from \"lodash/orderBy\";\nimport over from \"lodash/over\";\nimport overArgs from \"lodash/overArgs\";\nimport overEvery from \"lodash/overEvery\";\nimport overSome from \"lodash/overSome\";\nimport partial from \"lodash/partial\";\nimport partialRight from \"lodash/partialRight\";\nimport partition from \"lodash/partition\";\nimport pick from \"lodash/pick\";\nimport pickBy from \"lodash/pickBy\";\nimport property from \"lodash/property\";\nimport propertyOf from \"lodash/propertyOf\";\nimport pull from \"lodash/pull\";\nimport pullAll from \"lodash/pullAll\";\nimport pullAllBy from \"lodash/pullAllBy\";\nimport pullAllWith from \"lodash/pullAllWith\";\nimport pullAt from \"lodash/pullAt\";\nimport range from \"lodash/range\";\nimport rangeRight from \"lodash/rangeRight\";\nimport rearg from \"lodash/rearg\";\nimport reject from \"lodash/reject\";\nimport remove from \"lodash/remove\";\nimport rest from \"lodash/rest\";\nimport reverse from \"lodash/reverse\";\nimport sampleSize from \"lodash/sampleSize\";\nimport set from \"lodash/set\";\nimport setWith from \"lodash/setWith\";\nimport shuffle from \"lodash/shuffle\";\nimport slice from \"lodash/slice\";\nimport sortBy from \"lodash/sortBy\";\nimport sortedUniq from \"lodash/sortedUniq\";\nimport sortedUniqBy from \"lodash/sortedUniqBy\";\nimport split from \"lodash/split\";\nimport spread from \"lodash/spread\";\nimport tail from \"lodash/tail\";\nimport take from \"lodash/take\";\nimport takeRight from \"lodash/takeRight\";\nimport takeRightWhile from \"lodash/takeRightWhile\";\nimport takeWhile from \"lodash/takeWhile\";\nimport tap from \"lodash/tap\";\nimport throttle from \"lodash/throttle\";\nimport thru from \"lodash/thru\";\nimport toArray from \"lodash/toArray\";\nimport toPairs from \"lodash/toPairs\";\nimport toPairsIn from \"lodash/toPairsIn\";\nimport toPath from \"lodash/toPath\";\nimport toPlainObject from \"lodash/toPlainObject\";\nimport transform from \"lodash/transform\";\nimport unary from \"lodash/unary\";\nimport union from \"lodash/union\";\nimport unionBy from \"lodash/unionBy\";\nimport unionWith from \"lodash/unionWith\";\nimport uniq from \"lodash/uniq\";\nimport uniqBy from \"lodash/uniqBy\";\nimport uniqWith from \"lodash/uniqWith\";\nimport unset from \"lodash/unset\";\nimport unzip from \"lodash/unzip\";\nimport unzipWith from \"lodash/unzipWith\";\nimport update from \"lodash/update\";\nimport updateWith from \"lodash/updateWith\";\nimport values from \"lodash/values\";\nimport valuesIn from \"lodash/valuesIn\";\nimport without from \"lodash/without\";\nimport words from \"lodash/words\";\nimport wrap from \"lodash/wrap\";\nimport xor from \"lodash/xor\";\nimport xorBy from \"lodash/xorBy\";\nimport xorWith from \"lodash/xorWith\";\nimport zip from \"lodash/zip\";\nimport zipObject from \"lodash/zipObject\";\nimport zipObjectDeep from \"lodash/zipObjectDeep\";\nimport zipWith from \"lodash/zipWith\";\nimport entries from \"lodash/entries\";\nimport entriesIn from \"lodash/entriesIn\";\nimport extend from \"lodash/extend\";\nimport extendWith from \"lodash/extendWith\";\nimport add from \"lodash/add\";\nimport attempt from \"lodash/attempt\";\nimport camelCase from \"lodash/camelCase\";\nimport capitalize from \"lodash/capitalize\";\nimport ceil from \"lodash/ceil\";\nimport clamp from \"lodash/clamp\";\nimport clone from \"lodash/clone\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport cloneDeepWith from \"lodash/cloneDeepWith\";\nimport cloneWith from \"lodash/cloneWith\";\nimport conformsTo from \"lodash/conformsTo\";\nimport deburr from \"lodash/deburr\";\nimport defaultTo from \"lodash/defaultTo\";\nimport divide from \"lodash/divide\";\nimport endsWith from \"lodash/endsWith\";\nimport eq from \"lodash/eq\";\nimport escape from \"lodash/escape\";\nimport escapeRegExp from \"lodash/escapeRegExp\";\nimport every from \"lodash/every\";\nimport find from \"lodash/find\";\nimport findIndex from \"lodash/findIndex\";\nimport findKey from \"lodash/findKey\";\nimport findLast from \"lodash/findLast\";\nimport findLastIndex from \"lodash/findLastIndex\";\nimport findLastKey from \"lodash/findLastKey\";\nimport floor from \"lodash/floor\";\nimport forEach from \"lodash/forEach\";\nimport forEachRight from \"lodash/forEachRight\";\nimport forIn from \"lodash/forIn\";\nimport forInRight from \"lodash/forInRight\";\nimport forOwn from \"lodash/forOwn\";\nimport forOwnRight from \"lodash/forOwnRight\";\nimport get from \"lodash/get\";\nimport gt from \"lodash/gt\";\nimport gte from \"lodash/gte\";\nimport has from \"lodash/has\";\nimport hasIn from \"lodash/hasIn\";\nimport head from \"lodash/head\";\nimport identity from \"lodash/identity\";\nimport includes from \"lodash/includes\";\nimport indexOf from \"lodash/indexOf\";\nimport inRange from \"lodash/inRange\";\nimport invoke from \"lodash/invoke\";\nimport isArguments from \"lodash/isArguments\";\nimport isArray from \"lodash/isArray\";\nimport isArrayBuffer from \"lodash/isArrayBuffer\";\nimport isArrayLike from \"lodash/isArrayLike\";\nimport isArrayLikeObject from \"lodash/isArrayLikeObject\";\nimport isBoolean from \"lodash/isBoolean\";\nimport isBuffer from \"lodash/isBuffer\";\nimport isDate from \"lodash/isDate\";\nimport isElement from \"lodash/isElement\";\nimport isEmpty from \"lodash/isEmpty\";\nimport isEqual from \"lodash/isEqual\";\nimport isEqualWith from \"lodash/isEqualWith\";\nimport isError from \"lodash/isError\";\nimport isFinite from \"lodash/isFinite\";\nimport isFunction from \"lodash/isFunction\";\nimport isInteger from \"lodash/isInteger\";\nimport isLength from \"lodash/isLength\";\nimport isMap from \"lodash/isMap\";\nimport isMatch from \"lodash/isMatch\";\nimport isMatchWith from \"lodash/isMatchWith\";\nimport isNaN from \"lodash/isNaN\";\nimport isNative from \"lodash/isNative\";\nimport isNil from \"lodash/isNil\";\nimport isNull from \"lodash/isNull\";\nimport isNumber from \"lodash/isNumber\";\nimport isObject from \"lodash/isObject\";\nimport isObjectLike from \"lodash/isObjectLike\";\nimport isPlainObject from \"lodash/isPlainObject\";\nimport isRegExp from \"lodash/isRegExp\";\nimport isSafeInteger from \"lodash/isSafeInteger\";\nimport isSet from \"lodash/isSet\";\nimport isString from \"lodash/isString\";\nimport isSymbol from \"lodash/isSymbol\";\nimport isTypedArray from \"lodash/isTypedArray\";\nimport isUndefined from \"lodash/isUndefined\";\nimport isWeakMap from \"lodash/isWeakMap\";\nimport isWeakSet from \"lodash/isWeakSet\";\nimport join from \"lodash/join\";\nimport kebabCase from \"lodash/kebabCase\";\nimport last from \"lodash/last\";\nimport lastIndexOf from \"lodash/lastIndexOf\";\nimport lowerCase from \"lodash/lowerCase\";\nimport lowerFirst from \"lodash/lowerFirst\";\nimport lt from \"lodash/lt\";\nimport lte from \"lodash/lte\";\nimport max from \"lodash/max\";\nimport maxBy from \"lodash/maxBy\";\nimport mean from \"lodash/mean\";\nimport meanBy from \"lodash/meanBy\";\nimport min from \"lodash/min\";\nimport minBy from \"lodash/minBy\";\nimport stubArray from \"lodash/stubArray\";\nimport stubFalse from \"lodash/stubFalse\";\nimport stubObject from \"lodash/stubObject\";\nimport stubString from \"lodash/stubString\";\nimport stubTrue from \"lodash/stubTrue\";\nimport multiply from \"lodash/multiply\";\nimport nth from \"lodash/nth\";\nimport noop from \"lodash/noop\";\nimport now from \"lodash/now\";\nimport pad from \"lodash/pad\";\nimport padEnd from \"lodash/padEnd\";\nimport padStart from \"lodash/padStart\";\nimport parseInt from \"lodash/parseInt\";\nimport random from \"lodash/random\";\nimport reduce from \"lodash/reduce\";\nimport reduceRight from \"lodash/reduceRight\";\nimport repeat from \"lodash/repeat\";\nimport replace from \"lodash/replace\";\nimport result from \"lodash/result\";\nimport round from \"lodash/round\";\nimport sample from \"lodash/sample\";\nimport size from \"lodash/size\";\nimport snakeCase from \"lodash/snakeCase\";\nimport some from \"lodash/some\";\nimport sortedIndex from \"lodash/sortedIndex\";\nimport sortedIndexBy from \"lodash/sortedIndexBy\";\nimport sortedIndexOf from \"lodash/sortedIndexOf\";\nimport sortedLastIndex from \"lodash/sortedLastIndex\";\nimport sortedLastIndexBy from \"lodash/sortedLastIndexBy\";\nimport sortedLastIndexOf from \"lodash/sortedLastIndexOf\";\nimport startCase from \"lodash/startCase\";\nimport startsWith from \"lodash/startsWith\";\nimport subtract from \"lodash/subtract\";\nimport sum from \"lodash/sum\";\nimport sumBy from \"lodash/sumBy\";\nimport template from \"lodash/template\";\nimport times from \"lodash/times\";\nimport toFinite from \"lodash/toFinite\";\nimport toInteger from \"lodash/toInteger\";\nimport toLength from \"lodash/toLength\";\nimport toLower from \"lodash/toLower\";\nimport toNumber from \"lodash/toNumber\";\nimport toSafeInteger from \"lodash/toSafeInteger\";\nimport toString from \"lodash/toString\";\nimport toUpper from \"lodash/toUpper\";\nimport trim from \"lodash/trim\";\nimport trimEnd from \"lodash/trimEnd\";\nimport trimStart from \"lodash/trimStart\";\nimport truncate from \"lodash/truncate\";\nimport unescape from \"lodash/unescape\";\nimport uniqueId from \"lodash/uniqueId\";\nimport upperCase from \"lodash/upperCase\";\nimport upperFirst from \"lodash/upperFirst\";\nimport each from \"lodash/each\";\nimport eachRight from \"lodash/eachRight\";\nimport first from \"lodash/first\";\n```\n\n</details>\n\n## 参考\n\n何番煎じとかいうツッコミなしでお願いします。以下サイトの追加検証になります。\n\n* [Lodash のファイルサイズを削減する](https://blog.ryou103.com/post/lodash-reduce-bundle/)\n","coediting":false,"comments_count":0,"created_at":"2023-01-19T22:11:27+09:00","group":null,"id":"c3f35373267798447dba","likes_count":3,"private":false,"reactions_count":0,"stocks_count":1,"tags":[{"name":"JavaScript","versions":[]},{"name":"webpack","versions":[]},{"name":"lodash","versions":[]}],"title":"Lodashインポート時のファイルサイズを削減する","updated_at":"2023-01-19T22:11:27+09:00","url":"https://qiita.com/ykhirao/items/c3f35373267798447dba","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p data-sourcepos=\"1:1-1:72\">今日特定のサイズの画像を作りたくなったので調べた</p>\n<h2 data-sourcepos=\"3:1-3:12\">\n<span id=\"やり方\" class=\"fragment\"></span><a href=\"#%E3%82%84%E3%82%8A%E6%96%B9\"><i class=\"fa fa-link\"></i></a>やり方</h2>\n<ul data-sourcepos=\"5:1-10:0\">\n<li data-sourcepos=\"5:1-5:50\">適当な画像をダウンロードしてくる</li>\n<li data-sourcepos=\"6:1-6:80\">Macのファンダー上でダブルクリックしてプレビューを開く</li>\n<li data-sourcepos=\"7:1-7:85\">CMD + A で選択して CMD + X で切り抜き、サイズ０のpng画像に変換</li>\n<li data-sourcepos=\"8:1-8:95\">上のメニューの「ツール」・「サイズを調整」で好きなサイズにする</li>\n<li data-sourcepos=\"9:1-10:0\">上のメニューの「ファイル」・「書き出す」でjpg指定をする</li>\n</ul>\n<p data-sourcepos=\"11:1-12:49\">あら不思議！真っ白な画像が完成しました！<br>\n<code>200x200</code> の画像とか簡単に作れます！</p>\n<h2 data-sourcepos=\"15:1-15:15\">\n<span id=\"スクショ\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%82%AF%E3%82%B7%E3%83%A7\"><i class=\"fa fa-link\"></i></a>スクショ</h2>\n<p data-sourcepos=\"18:1-21:141\"><a href=\"https://camo.qiitausercontent.com/c80761e3a1407160cbc5f088cf9dc022360fe285/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f66663032636436392d303734642d383464652d653136382d3133396161386436373262312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fff02cd69-074d-84de-e168-139aa8d672b1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=01eee857cbb88e33ef719192c32d02bc\" alt=\"スクリーンショット 2022-08-04 19.49.00.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/ff02cd69-074d-84de-e168-139aa8d672b1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fff02cd69-074d-84de-e168-139aa8d672b1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4fc380c1546ea9a7d33b1e29a6479bce 1x\" loading=\"lazy\"></a><br>\n<a href=\"https://camo.qiitausercontent.com/8a2ec82a491308aecebb13838c65ed1732a21280/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f35353339316664352d316465312d666633342d393439362d3064336336353033346631392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F55391fd5-1de1-ff34-9496-0d3c65034f19.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=316593f2115b1061d35c9853774b9574\" alt=\"スクリーンショット 2022-08-04 19.54.16.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/55391fd5-1de1-ff34-9496-0d3c65034f19.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F55391fd5-1de1-ff34-9496-0d3c65034f19.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b797b56c828579806f985ad2accb4dcd 1x\" loading=\"lazy\"></a><br>\n<a href=\"https://camo.qiitausercontent.com/691892f78c6e150507e0cd3a6ea143a55ef3a99c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62393861656239322d666563392d366462392d383564662d3861393833663236613038362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb98aeb92-fec9-6db9-85df-8a983f26a086.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8b536ef1d97c2d7bc7db6fb8f2b047a1\" alt=\"スクリーンショット 2022-08-04 19.51.19.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b98aeb92-fec9-6db9-85df-8a983f26a086.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb98aeb92-fec9-6db9-85df-8a983f26a086.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b6065f54bf271ac3aab0f1ce82a9981b 1x\" loading=\"lazy\"></a><br>\n<a href=\"https://camo.qiitausercontent.com/517b4e4d361395ea42548de941b7920312196d97/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32393065363538612d323433652d663531362d363834362d6635306431646238656531382e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F290e658a-243e-f516-6846-f50d1db8ee18.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=149f4867a73a9d57aac7c741bc1f6117\" alt=\"ダウンロード.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/290e658a-243e-f516-6846-f50d1db8ee18.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F290e658a-243e-f516-6846-f50d1db8ee18.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0bdb4002f6234fb1635eae0a2647740f 1x\" loading=\"lazy\"></a></p>\n<h2 data-sourcepos=\"23:1-23:12\">\n<span id=\"番外編\" class=\"fragment\"></span><a href=\"#%E7%95%AA%E5%A4%96%E7%B7%A8\"><i class=\"fa fa-link\"></i></a>番外編</h2>\n<p data-sourcepos=\"25:1-25:90\">こんな感じでツールを使って枠いれたり文字入れたりも簡単です！</p>\n<p data-sourcepos=\"27:1-27:163\"><a href=\"https://camo.qiitausercontent.com/a70c30dc0c9e81b5a9ea3f16e5ae3d16f5d422f3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f31633063643638312d396435312d613366372d616566322d3831623361633438343461372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F1c0cd681-9d51-a3f7-aef2-81b3ac4844a7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e18c3f22fc9a0ffa822fbb8c2e12852e\" alt=\"スクリーンショット 2022-08-04 19.55.47.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/1c0cd681-9d51-a3f7-aef2-81b3ac4844a7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F1c0cd681-9d51-a3f7-aef2-81b3ac4844a7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a130920a29d4ec06dbe068717740d12a 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"29:1-29:141\"><a href=\"https://camo.qiitausercontent.com/06a37b20ba9ecee07b2ff6ed5ef92c1a2a6a34a6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32323739353238612d643661622d663130612d386462392d3130326234663064383363362e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2279528a-d6ab-f10a-8db9-102b4f0d83c6.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f8caca7850a7fc452362364b509b4385\" alt=\"ダウンロード.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2279528a-d6ab-f10a-8db9-102b4f0d83c6.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2279528a-d6ab-f10a-8db9-102b4f0d83c6.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=dce3dafe3d892d4ed0bd2fd1d05064b0 1x\" loading=\"lazy\"></a></p>\n","body":"今日特定のサイズの画像を作りたくなったので調べた\n\n## やり方\n\n* 適当な画像をダウンロードしてくる\n* Macのファンダー上でダブルクリックしてプレビューを開く\n* CMD + A で選択して CMD + X で切り抜き、サイズ０のpng画像に変換\n* 上のメニューの「ツール」・「サイズを調整」で好きなサイズにする\n* 上のメニューの「ファイル」・「書き出す」でjpg指定をする\n\nあら不思議！真っ白な画像が完成しました！\n`200x200` の画像とか簡単に作れます！\n\n\n## スクショ\n\n\n![スクリーンショット 2022-08-04 19.49.00.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/ff02cd69-074d-84de-e168-139aa8d672b1.png)\n![スクリーンショット 2022-08-04 19.54.16.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/55391fd5-1de1-ff34-9496-0d3c65034f19.png)\n![スクリーンショット 2022-08-04 19.51.19.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b98aeb92-fec9-6db9-85df-8a983f26a086.png)\n![ダウンロード.jpg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/290e658a-243e-f516-6846-f50d1db8ee18.jpeg)\n\n## 番外編\n\nこんな感じでツールを使って枠いれたり文字入れたりも簡単です！\n\n![スクリーンショット 2022-08-04 19.55.47.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/1c0cd681-9d51-a3f7-aef2-81b3ac4844a7.png)\n\n![ダウンロード.jpg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2279528a-d6ab-f10a-8db9-102b4f0d83c6.jpeg)\n","coediting":false,"comments_count":0,"created_at":"2022-08-04T19:57:34+09:00","group":null,"id":"789b38acde9fa92aae1a","likes_count":0,"private":false,"reactions_count":0,"stocks_count":2,"tags":[{"name":"Mac","versions":[]},{"name":"テスト","versions":[]},{"name":"テスト自動化","versions":[]}],"title":"【Mac】500x750みたいな任意のサイズの画像を簡単につくる方法","updated_at":"2022-08-04T19:58:36+09:00","url":"https://qiita.com/ykhirao/items/789b38acde9fa92aae1a","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h2 data-sourcepos=\"2:1-2:41\">\n<span id=\"ユーザー定義のtype-guard-の話\" class=\"fragment\"></span><a href=\"#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E5%AE%9A%E7%BE%A9%E3%81%AEtype-guard-%E3%81%AE%E8%A9%B1\"><i class=\"fa fa-link\"></i></a>ユーザー定義のType Guard の話</h2>\n<p data-sourcepos=\"4:1-4:122\"><code>['test1', undefined].filter(Boolean)</code> だと <code>(string | undefined)[]</code> という型のままでしんどいときの話。</p>\n<div class=\"code-frame\" data-lang=\"typescript\" data-sourcepos=\"8:1-18:3\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">test1</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"dl\">'</span><span class=\"s1\">test1</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"kc\">undefined</span><span class=\"p\">].</span><span class=\"nf\">filter</span><span class=\"p\">(</span><span class=\"nb\">Boolean</span><span class=\"p\">)</span>\n<span class=\"c1\">// const test1: (string | undefined)[]</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"nx\">test1</span><span class=\"p\">);</span>\n<span class=\"c1\">// [LOG]: [\"test1\"] </span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">test2</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"dl\">'</span><span class=\"s1\">test2</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"kc\">undefined</span><span class=\"p\">].</span><span class=\"nf\">filter</span><span class=\"p\">((</span><span class=\"nx\">v</span><span class=\"p\">):</span> <span class=\"nx\">v</span> <span class=\"k\">is</span> <span class=\"kr\">string</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">v</span> <span class=\"o\">!=</span> <span class=\"kc\">null</span><span class=\"p\">)</span>\n<span class=\"c1\">// const test2: string[]</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"nx\">test2</span><span class=\"p\">);</span>\n<span class=\"c1\">// [LOG]: [\"test2\"] </span>\n</code></pre></div></div>\n<p data-sourcepos=\"20:1-21:43\">以下でTypeScriptをWeb上で試せます。<br>\n<a href=\"https://www.typescriptlang.org/play?#code/Q\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.typescriptlang.org/play?#code/Q</a></p>\n<h2 data-sourcepos=\"24:1-24:9\">\n<span id=\"参考\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83\"><i class=\"fa fa-link\"></i></a>参考</h2>\n<ul data-sourcepos=\"26:1-27:200\">\n<li data-sourcepos=\"26:1-26:116\"><a href=\"https://typescript-jp.gitbook.io/deep-dive/type-system/typeguard#yznotype-guard\" rel=\"nofollow noopener\" target=\"_blank\">ユーザー定義のType Guard</a></li>\n<li data-sourcepos=\"27:1-27:200\"><a href=\"https://zenn.dev/oreo2990/articles/5f75eaa285f2f9#4-%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E5%AE%9A%E7%BE%A9%E5%9E%8B%E3%82%AC%E3%83%BC%E3%83%89\" rel=\"nofollow noopener\" target=\"_blank\">【TypeScript】型ガードを改めて整理する</a></li>\n</ul>\n","body":"\n## ユーザー定義のType Guard の話\n\n`['test1', undefined].filter(Boolean)` だと `(string | undefined)[]` という型のままでしんどいときの話。\n\n\n\n```typescript\nconst test1 = ['test1', undefined].filter(Boolean)\n// const test1: (string | undefined)[]\nconsole.log(test1);\n// [LOG]: [\"test1\"] \n\nconst test2 = ['test2', undefined].filter((v): v is string => v != null)\n// const test2: string[]\nconsole.log(test2);\n// [LOG]: [\"test2\"] \n```\n\n以下でTypeScriptをWeb上で試せます。\nhttps://www.typescriptlang.org/play?#code/Q\n\n\n## 参考\n\n- [ユーザー定義のType Guard](https://typescript-jp.gitbook.io/deep-dive/type-system/typeguard#yznotype-guard)\n- [【TypeScript】型ガードを改めて整理する](https://zenn.dev/oreo2990/articles/5f75eaa285f2f9#4-%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E5%AE%9A%E7%BE%A9%E5%9E%8B%E3%82%AC%E3%83%BC%E3%83%89)\n","coediting":false,"comments_count":0,"created_at":"2022-07-13T17:31:55+09:00","group":null,"id":"4a765319121fa49e5ceb","likes_count":1,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"JavaScript","versions":[]},{"name":"TypeScript","versions":[]}],"title":"いつも忘れる .filter で undefined を除去する方法 【TypeScript】","updated_at":"2022-07-13T17:31:55+09:00","url":"https://qiita.com/ykhirao/items/4a765319121fa49e5ceb","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p>こちらの記事はアドベントカレンダー<a href=\"https://qiita.com/advent-calendar/2021/dx-improvement\">開発者体験:DXをめちゃくちゃ改善した話 Advent Calendar 2021</a>　の16日目の記事です。</p>\n\n<blockquote>\n<p>個人的にスクラムマスターの資格勉強したときが他人（開発者）との関わり方が明確に変わったのでおすすめしたい。</p>\n</blockquote>\n\n<p>というタイトルにさせてもらったのですが、この一言でいうとその通りで、他に言うことないです。</p>\n\n<p><code>開発者体験</code> という意味だとゴールを持つことがとても重要で、そこに向かって開発者として何故何をどうやって開発するのか、そういうのをとても意識できるようになった体験でした。2021年の年末にぜひ挑戦してほしいなと思っております。</p>\n\n<p>来年度もみなさんが、最高の開発者体験でありますように。</p>\n\n<ul>\n<li>※※※こちらポエム &amp;&amp; 主観 &amp;&amp; 駄文（推敲せずに30分くらいで書いている） です※※※</li>\n<li>題名とおりです。勉強したら他の開発者との関わり方とか変わって、仕事しやすくなりました</li>\n<li>\n<a href=\"https://www.scrum.org/professional-scrum-master-i-certification\" rel=\"nofollow noopener\" target=\"_blank\">PSM</a>のプロフェッショナルスクラムマスターを勉強するのをおすすめします</li>\n</ul>\n\n<h1>\n<span id=\"スクラムマスターの資格取得について\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E3%81%AE%E8%B3%87%E6%A0%BC%E5%8F%96%E5%BE%97%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a>スクラムマスターの資格取得について</h1>\n\n<h2>\n<span id=\"外部リンク\" class=\"fragment\"></span><a href=\"#%E5%A4%96%E9%83%A8%E3%83%AA%E3%83%B3%E3%82%AF\"><i class=\"fa fa-link\"></i></a>外部リンク</h2>\n\n<p>色々参考情報を調べましたが、個人的に参考にした外部リンクこちら2つです</p>\n\n<ul>\n<li><a href=\"https://shiftasia.com/ja/column/%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E8%B3%87%E6%A0%BCpsm%E3%81%AB%E5%90%88%E6%A0%BC%E3%81%97%E3%81%9F%E7%A7%81%E3%81%AE%E5%8B%89%E5%BC%B7%E6%B3%95/\" rel=\"nofollow noopener\" target=\"_blank\">スクラムマスター資格psmに合格した私の勉強法</a></li>\n<li><a href=\"https://proengineer.internous.co.jp/content/columnfeature/17096\" rel=\"nofollow noopener\" target=\"_blank\">スクラムマスターにおすすめの資格は3つだけ【コスパ良し】</a></li>\n</ul>\n\n<h2>\n<span id=\"私が今回勉強した資格\" class=\"fragment\"></span><a href=\"#%E7%A7%81%E3%81%8C%E4%BB%8A%E5%9B%9E%E5%8B%89%E5%BC%B7%E3%81%97%E3%81%9F%E8%B3%87%E6%A0%BC\"><i class=\"fa fa-link\"></i></a>私が今回勉強した資格</h2>\n\n<p>スクラムマスターの資格はたくさんありますが、今回はPSMの資格をおすすめします。</p>\n\n<ul>\n<li>認定スクラムマスター（Certified ScrumMaster®：CSM®）</li>\n<li>PSM（Professional Scrum Master™）</li>\n<li>LSM（Licensed Scrum Master）</li>\n</ul>\n\n<p>他とくらべると</p>\n\n<ul>\n<li>安い！$150!\n\n<ul>\n<li>（1/10以下）</li>\n<li>認定スクラムマスターは資格に30万円とかかかるので会社の補助とかないと難しいと思います</li>\n</ul>\n</li>\n<li>合格最低点数が高いので真剣に勉強が必要、理論がしっかり身につく</li>\n</ul>\n\n<h2>\n<span id=\"勉強方法\" class=\"fragment\"></span><a href=\"#%E5%8B%89%E5%BC%B7%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>勉強方法</h2>\n\n<ul>\n<li>0. スクラムの入門書籍を読む\n\n<ul>\n<li>スクラムっぽいもの、アジャイルを経験したことない人は読み物からがおすすめ</li>\n<li>\n<a href=\"https://www.amazon.co.jp/dp/4798129712\" rel=\"nofollow noopener\" target=\"_blank\">SCRUM BOOT CAMP THE BOOK</a>を読む</li>\n</ul>\n</li>\n<li>1. スクラムガイドを読む\n\n<ul>\n<li>PDF版が読みにくかったので以下、Web版をQiitaに公開してます\n\n<ul>\n<li><a href=\"https://qiita.com/ykhirao/items/ed320eaecb876bfd189e\" id=\"reference-2a39cccb81a54c1327a0\">【Web版】スクラムガイド™ 2020</a></li>\n<li><a href=\"https://qiita.com/ykhirao/items/421dd8681671ada1f55a\" id=\"reference-80780f05940d0a4b7617\">【Web版】スクラムガイド™ 2017</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>2. Scrum.orgの公式問題30問解く\n\n<ul>\n<li><a href=\"https://www.classmarker.com/online-test/start/?quiz=3qg5fac7589c0416\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.classmarker.com/online-test/start/?quiz=3qg5fac7589c0416</a></li>\n<li>正直わからないものばかりだと思います</li>\n<li>このorgのテストを受けるのとGoogle翻訳アドオンの使用は許可されているので試しにうけてみる</li>\n</ul>\n</li>\n<li>3. Udemyで問題集を解く\n\n<ul>\n<li>UdemyのProfessional Scrum Master certification Practice Tests PSM1 <a href=\"https://www.udemy.com/course/professional-scrum-master-certification-practice-tests-psm1/\" rel=\"nofollow noopener\" target=\"_blank\">リンク</a> をやると一気に理解度が深まる</li>\n<li>定価2400円くらいで割引使うととても安い</li>\n<li>こういう場合はスクラムはこう使うんだ〜とかの理解が深まった</li>\n<li>Google翻訳使いながら、説いていくとよいが、スクラムガイドの原文・英文を読まないと翻訳の問題とかで変な日本語になります\n\n<ul>\n<li>アーティファクトとか</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>4. Scrum.orgのテストを受ける\n\n<ul>\n<li>150$</li>\n<li>受けなくても</li>\n</ul>\n</li>\n</ul>\n\n<h2>\n<span id=\"効果\" class=\"fragment\"></span><a href=\"#%E5%8A%B9%E6%9E%9C\"><i class=\"fa fa-link\"></i></a>効果</h2>\n\n<p>ポエムで主観で定量的ではないですが以下のような効果あったなと振り返ってます</p>\n\n<ul>\n<li>仕事するときに誰の責務かはっきりすることで勉強になった</li>\n<li>外注のコントロールにスクラムの概念（漸進的なインクリメンタルな開発・報告をお願いするとか）をちゃんと導入してうまくいくようになった</li>\n<li>周りの開発者とのかかわりがかわった</li>\n<li>しっかり学んだことで、スクラムの概念を崩して使ったりできるようになった\n\n<ul>\n<li>（これは基本的には非推奨、 <code>スクラムはシンプルである。まずはそのままの状態で試してほしい。</code> と明確にかかれている ）</li>\n</ul>\n</li>\n<li>上手くいってないプロジェクトのファシリテーションを任せるって言われて急に投入されてもうまく回せた</li>\n</ul>\n\n<h2>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h2>\n\n<p>スクラムの本質の一つはゴール・目標に向かって漸進していく開発だということです</p>\n\n<ul>\n<li>プロダクトゴール（スクラムの⻑期的な目標）をプロダクトオーナーが決め、プロダクトバックログとして管理します</li>\n<li>スプリントゴール（スプリントの目標）をプロダクトオーナーが決め、その中で開発者が何をするか自分の意志で決めます</li>\n<li>デイリースクラムで、日々何をやるかを開発者が宣言して、また昨日の予実を振り返ります</li>\n</ul>\n\n<p>長期的な目標に向かって、日々振り返り、毎週振り借り、少しずつでも進んでいく、そんな姿勢がスクラムです。<br>\nプロダクトゴールは2020年度のスクラムガイドから導入されましたが、目標に向かって自分自身・自分たちのチームのことを定期的に振り返る、きれいなサイクルがイベントとして設定されています。</p>\n\n<p>スクラムでやりたかったことが少しだけわかると誰かに広めたくなって、この記事をかかせていただきました。</p>\n\n<p>少しでも誰かの興味に残ってもらえるとうれしいです。</p>\n\n<p>最後まで読んでいただきありがとうございました。</p>\n","body":"こちらの記事はアドベントカレンダー[開発者体験:DXをめちゃくちゃ改善した話 Advent Calendar 2021](https://qiita.com/advent-calendar/2021/dx-improvement)　の16日目の記事です。\n\n\n> 個人的にスクラムマスターの資格勉強したときが他人（開発者）との関わり方が明確に変わったのでおすすめしたい。\n\nというタイトルにさせてもらったのですが、この一言でいうとその通りで、他に言うことないです。\n\n`開発者体験` という意味だとゴールを持つことがとても重要で、そこに向かって開発者として何故何をどうやって開発するのか、そういうのをとても意識できるようになった体験でした。2021年の年末にぜひ挑戦してほしいなと思っております。\n\n来年度もみなさんが、最高の開発者体験でありますように。\n\n\n\n* ※※※こちらポエム && 主観 && 駄文（推敲せずに30分くらいで書いている） です※※※\n* 題名とおりです。勉強したら他の開発者との関わり方とか変わって、仕事しやすくなりました\n* [PSM](https://www.scrum.org/professional-scrum-master-i-certification)のプロフェッショナルスクラムマスターを勉強するのをおすすめします\n\n\n# スクラムマスターの資格取得について\n\n## 外部リンク\n色々参考情報を調べましたが、個人的に参考にした外部リンクこちら2つです\n\n- [スクラムマスター資格psmに合格した私の勉強法](https://shiftasia.com/ja/column/%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E8%B3%87%E6%A0%BCpsm%E3%81%AB%E5%90%88%E6%A0%BC%E3%81%97%E3%81%9F%E7%A7%81%E3%81%AE%E5%8B%89%E5%BC%B7%E6%B3%95/)\n- [スクラムマスターにおすすめの資格は3つだけ【コスパ良し】](https://proengineer.internous.co.jp/content/columnfeature/17096)\n\n## 私が今回勉強した資格\n\nスクラムマスターの資格はたくさんありますが、今回はPSMの資格をおすすめします。\n\n* 認定スクラムマスター（Certified ScrumMaster®：CSM®）\n* PSM（Professional Scrum Master™）\n* LSM（Licensed Scrum Master）\n\n他とくらべると\n\n- 安い！$150!\n    - （1/10以下）\n    - 認定スクラムマスターは資格に30万円とかかかるので会社の補助とかないと難しいと思います\n- 合格最低点数が高いので真剣に勉強が必要、理論がしっかり身につく\n\n\n## 勉強方法\n\n* 0. スクラムの入門書籍を読む\n    * スクラムっぽいもの、アジャイルを経験したことない人は読み物からがおすすめ\n    * [SCRUM BOOT CAMP THE BOOK](https://www.amazon.co.jp/dp/4798129712)を読む\n* 1. スクラムガイドを読む\n    * PDF版が読みにくかったので以下、Web版をQiitaに公開してます\n        * [【Web版】スクラムガイド™ 2020](https://qiita.com/ykhirao/items/ed320eaecb876bfd189e)\n        * [【Web版】スクラムガイド™ 2017](https://qiita.com/ykhirao/items/421dd8681671ada1f55a)\n* 2. Scrum.orgの公式問題30問解く\n    * https://www.classmarker.com/online-test/start/?quiz=3qg5fac7589c0416\n    * 正直わからないものばかりだと思います\n    * このorgのテストを受けるのとGoogle翻訳アドオンの使用は許可されているので試しにうけてみる\n* 3. Udemyで問題集を解く\n    * UdemyのProfessional Scrum Master certification Practice Tests PSM1 [リンク](https://www.udemy.com/course/professional-scrum-master-certification-practice-tests-psm1/) をやると一気に理解度が深まる\n    * 定価2400円くらいで割引使うととても安い\n    * こういう場合はスクラムはこう使うんだ〜とかの理解が深まった\n    * Google翻訳使いながら、説いていくとよいが、スクラムガイドの原文・英文を読まないと翻訳の問題とかで変な日本語になります\n        * アーティファクトとか\n* 4. Scrum.orgのテストを受ける\n    * 150$\n    * 受けなくても\n\n## 効果\n\nポエムで主観で定量的ではないですが以下のような効果あったなと振り返ってます\n\n* 仕事するときに誰の責務かはっきりすることで勉強になった\n* 外注のコントロールにスクラムの概念（漸進的なインクリメンタルな開発・報告をお願いするとか）をちゃんと導入してうまくいくようになった\n* 周りの開発者とのかかわりがかわった\n* しっかり学んだことで、スクラムの概念を崩して使ったりできるようになった\n    * （これは基本的には非推奨、 `スクラムはシンプルである。まずはそのままの状態で試してほしい。` と明確にかかれている ）\n* 上手くいってないプロジェクトのファシリテーションを任せるって言われて急に投入されてもうまく回せた\n\n\n## 最後に\n\nスクラムの本質の一つはゴール・目標に向かって漸進していく開発だということです\n\n* プロダクトゴール（スクラムの⻑期的な目標）をプロダクトオーナーが決め、プロダクトバックログとして管理します\n* スプリントゴール（スプリントの目標）をプロダクトオーナーが決め、その中で開発者が何をするか自分の意志で決めます\n* デイリースクラムで、日々何をやるかを開発者が宣言して、また昨日の予実を振り返ります\n\n長期的な目標に向かって、日々振り返り、毎週振り借り、少しずつでも進んでいく、そんな姿勢がスクラムです。\nプロダクトゴールは2020年度のスクラムガイドから導入されましたが、目標に向かって自分自身・自分たちのチームのことを定期的に振り返る、きれいなサイクルがイベントとして設定されています。\n\nスクラムでやりたかったことが少しだけわかると誰かに広めたくなって、この記事をかかせていただきました。\n\n\n少しでも誰かの興味に残ってもらえるとうれしいです。\n\n\n最後まで読んでいただきありがとうございました。\n","coediting":false,"comments_count":0,"created_at":"2021-12-16T01:05:12+09:00","group":null,"id":"d86d99a46a997443bf52","likes_count":19,"private":false,"reactions_count":0,"stocks_count":12,"tags":[{"name":"アジャイル","versions":[]},{"name":"ポエム","versions":[]},{"name":"スクラム","versions":[]},{"name":"DX","versions":[]},{"name":"スクラムマスター","versions":[]}],"title":"個人的にスクラムマスターの資格勉強したときが他人（開発者）との関わり方が明確に変わったのでおすすめしたい","updated_at":"2021-12-16T10:56:32+09:00","url":"https://qiita.com/ykhirao/items/d86d99a46a997443bf52","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h2>\n<span id=\"結論\" class=\"fragment\"></span><a href=\"#%E7%B5%90%E8%AB%96\"><i class=\"fa fa-link\"></i></a>結論</h2>\n\n<p>以下順番で使える記号のバリデーションがゆるい順です。<br>\nRFCに準拠するなら18個の記号に対応させないといけませんが、<br>\n実際にその記号はGmailなどに対応していないケースもあって、「なにに合わせるかは自社のサービスで決めてください」が一定の答えかなと思いました。Twitterに合わせるのがよさそうと有名サービスに迎合するのもよさそうでした。</p>\n\n<table>\n<thead>\n<tr>\n<th>サービス</th>\n<th>対応（記号）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>RFC</td>\n<td>18</td>\n</tr>\n<tr>\n<td>フレームワーク</td>\n<td>何種類かあるので適切に組み合わせて使うのがよさそう</td>\n</tr>\n<tr>\n<td>Webサービス</td>\n<td>6</td>\n</tr>\n<tr>\n<td>あなたのサービス！</td>\n<td>RFCに準拠したら記号含めて自分で考えてね</td>\n</tr>\n<tr>\n<td>Webメールサービス</td>\n<td>4</td>\n</tr>\n</tbody>\n</table>\n\n<p>このまとめが100%よいとは限りませんが、結局なにがいいの？は議論余地あると思うので<br>\nぜひ自分の思う最強のバリデーション正規表現をコメント欄とか新しい記事とか書いていただけると見てみたいです！</p>\n\n<hr>\n\n<h2>\n<span id=\"検討方法の列挙\" class=\"fragment\"></span><a href=\"#%E6%A4%9C%E8%A8%8E%E6%96%B9%E6%B3%95%E3%81%AE%E5%88%97%E6%8C%99\"><i class=\"fa fa-link\"></i></a>検討方法の列挙</h2>\n\n<ul>\n<li>RFCに準拠する: Emailの仕様を決めている組織に従うべき論</li>\n<li>Webメールサービスに準拠する: 世の中のすべてのサービスのドキュメントを参考にする</li>\n<li>有名なWebサービスに準拠する: Twitterのサインアップのバリデーションを検証する</li>\n<li>フレームワークに準拠する: php/Laravelを見てみる</li>\n</ul>\n\n<h2>\n<span id=\"rfcに準拠する\" class=\"fragment\"></span><a href=\"#rfc%E3%81%AB%E6%BA%96%E6%8B%A0%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>RFCに準拠する</h2>\n\n<blockquote>\n<p>Request for Comments（リクエスト フォー コメンツ、略称：RFC）はIETF（Internet Engineering Task Force）による技術仕様の保存、公開形式である。内容には特に制限はないが、プロトコルやファイルフォーマットが主に扱われる。RFCとは「コメント募集」を意味する英語の略語であり、もともとは技術仕様を公開し、それについての意見を広く募集してより良いものにしていく観点から始められたようである。全てのRFCはインターネット上で公開されており、誰でも閲覧することができる。</p>\n\n<p><a href=\"https://ja.wikipedia.org/wiki/Request_for_Comments\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://ja.wikipedia.org/wiki/Request_for_Comments</a></p>\n</blockquote>\n\n<ul>\n<li>ここが詳しい <a href=\"https://qiita.com/yoshitake_1201/items/40268332cd23f67c504c\" id=\"reference-436072bc137751fe47ea\">RFC 5322 &amp; 5321に沿ったメールアドレス（local-part）に使える文字まとめ\nin Qiita</a>\n</li>\n</ul>\n\n<p>原点確認したい人は<a href=\"https://www.rfc-editor.org/info/rfc6854\" rel=\"nofollow noopener\" target=\"_blank\">このあたり</a>みてほしい。<br>\n- RFC 6854<br>\n- RFC 5322<br>\n- RFC 7504<br>\n- RFC 5321<br>\n- RFC 1846</p>\n\n<p>使える文字</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>! # $ % &amp; ' * + - / = ? ^ _ ` { | } ~\n</code></pre></div></div>\n\n<h2>\n<span id=\"webメールサービスに準拠する\" class=\"fragment\"></span><a href=\"#web%E3%83%A1%E3%83%BC%E3%83%AB%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AB%E6%BA%96%E6%8B%A0%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Webメールサービスに準拠する</h2>\n\n<p>何種類かサービスを見てみたがこのあたりが使えたら問題なさそう。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>.\n-\n_\n+\n</code></pre></div></div>\n\n<table>\n<thead>\n<tr>\n<th></th>\n<th>使える記号（半角英数字以外）</th>\n<th>その他</th>\n<th>資料URL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>softbank</td>\n<td>「－」（ハイフン）、「．」（ドット）、「＿ 」（アンダーバー）</td>\n<td>「＠」直前の「．」（ドット）や「．」（ドット）の連続使用などもできません。<br>文字数は、3文字以上30文字以内<br>ひとつ目の文字は、アルファベットまたは数字のみ</td>\n<td><a href=\"https://www.softbank.jp/support/faq/view/10544\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.softbank.jp/support/faq/view/10544</a></td>\n</tr>\n<tr>\n<td>docomo</td>\n<td>「_」（アンダーバー）、「.」（ピリオド）、「-」（ハイフン）の記号</td>\n<td>3字以上30字まで設定することができます。<br>また、2009年4月1日以降、「.」は「..」などのように連続で使用することや@マークの直前で使用することはできなくなりました。<br>アドレス内に「..」や「.@」が存在する場合、一部のメールサービスからのメールが正しく届かない可能性がございます。<br>「スペース（空白）」は使用できません。<br>英字を入力する場合、大文字小文字の区別はありません。すべて小文字で表示されます。<br>先頭文字は英文字にしてください。</td>\n<td><a href=\"https://www.nttdocomo.co.jp/info/spam_mail/change_add/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.nttdocomo.co.jp/info/spam_mail/change_add/</a></td>\n</tr>\n<tr>\n<td>au</td>\n<td>「-（ハイフン）」、「.（ピリオド／ドット）」、「_ （アンダーバー）」</td>\n<td>メールネーム文字数が、30文字まで利用可能です。<br>「.」をアドレス内での連続使用や「.」をEメールネームの最初/最後に使用することはできません。また最初に数字の「0」を使用することもできません。</td>\n<td><a href=\"https://www.au.com/support/service/mobile/trouble/mail/email/change//\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.au.com/support/service/mobile/trouble/mail/email/change//</a></td>\n</tr>\n<tr>\n<td>Gmail</td>\n<td>ユーザー名: ピリオド（.）<br>エイリアス: プラス（+）</td>\n<td>ユーザー名にはアンパサンド（＆）、等号（=）、アンダースコア（_）、アポストロフィ（'）、ダッシュ（-）、プラス記号（+）、カンマ（,）、山括弧（&lt;&gt;）、連続するピリオド（.）を使用することはできません。</td>\n<td><a href=\"https://support.google.com/mail/answer/9211434?hl=ja\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://support.google.com/mail/answer/9211434?hl=ja</a></td>\n</tr>\n<tr>\n<td>Yahoo!メール</td>\n<td>半角で “.”（ピリオド）、“-”（ハイフン）、“_”（アンダーバー）の3種類</td>\n<td>設定できるメールアドレスは、プログラムの誤動作等を防ぐ目的で、RFCというインターネットにかかわるルール(RFC2822)や、インターネット上の慣例をもとにしたYahoo!ウェブホスティングの独自ルールを適用しております。 メールアドレスに使用できる文字列は以下のとおりです。<br><br> <br>アルファベット : 半角小文字でa～zまでの26文字<br>数字 :半角で0～9までの10字<br>記号 :半角で “.”（ピリオド）、“-”（ハイフン）、“_”（アンダーバー）の3種類<br> <br>禁止されている文字や記号<br>メールアドレスは上記の文字と記号を組み合わせて1字以上32字以内でご設定ください。なお、弊社独自ルールで以下のように設定しています。<br><br> <br>記号で始まるアドレスは不可<br>「.」「-」の連続使用は不可</td>\n<td><a href=\"https://support.yahoo-net.jp/PccHostingupper/s/article/H000004944\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://support.yahoo-net.jp/PccHostingupper/s/article/H000004944</a></td>\n</tr>\n<tr>\n<td>Outlook</td>\n<td>ピリオド (.)、ハイフン (-)、下線 (_)</td>\n<td>メール アドレスに使うことができる文字は、アルファベット、数字、ピリオド (.)、ハイフン (-)、または下線 (_) のみです。特殊な文字やアクセント記号は使うことができません。また、ラテン アルファベット以外のアルファベットも使うことができません。</td>\n<td>\n<a href=\"https://account.live.com/AddAssocId\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://account.live.com/AddAssocId</a><br>(ドキュメントなし、エラーメッセージの文言で判断)</td>\n</tr>\n<tr>\n<td>iCloud Mail</td>\n<td>不明</td>\n<td></td>\n<td>ドキュメントなし</td>\n</tr>\n</tbody>\n</table>\n\n<h2>\n<span id=\"有名なwebサービスに準拠する\" class=\"fragment\"></span><a href=\"#%E6%9C%89%E5%90%8D%E3%81%AAweb%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AB%E6%BA%96%E6%8B%A0%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>有名なWebサービスに準拠する</h2>\n\n<p>Twitterのサインアップ画面で検証した<br>\n<a href=\"https://twitter.com/i/flow/signup\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://twitter.com/i/flow/signup</a></p>\n\n<table>\n<thead>\n<tr>\n<th>email</th>\n<th>valid</th>\n<th>意図</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"mailto:test@example.com\" class=\"autolink\">test@example.com</a></td>\n<td>TRUE</td>\n<td>簡単な例</td>\n</tr>\n<tr>\n<td><a href=\"mailto:test+-.._1@example.com\" class=\"autolink\">test+-.._1@example.com</a></td>\n<td>FALSE</td>\n<td>..の連続が弾かれるか</td>\n</tr>\n<tr>\n<td><a href=\"mailto:0test+-._1@example.com\" class=\"autolink\">0test+-._1@example.com</a></td>\n<td>TRUE</td>\n<td>先頭の文字が英数字のとき</td>\n</tr>\n<tr>\n<td><a href=\"mailto:0test++--.__1@example.com\" class=\"autolink\">0test++--.__1@example.com</a></td>\n<td>TRUE</td>\n<td>yahooで-_の連続使用できないので確認</td>\n</tr>\n<tr>\n<td>x!&amp;<a href=\"mailto:x@example.com\" class=\"autolink\">x@example.com</a>\n</td>\n<td>TRUE</td>\n<td>RFC準拠でWebメールサービスで使えない文字の検証（!&amp;のみ使えた）<br>! # $ % &amp; ' * + - / = ? ^ _ ` {</td>\n</tr>\n</tbody>\n</table>\n\n<p>!&amp; を使える設定しているのは意外でした。</p>\n\n<h2>\n<span id=\"フレームワークに準拠する\" class=\"fragment\"></span><a href=\"#%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%AB%E6%BA%96%E6%8B%A0%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>フレームワークに準拠する</h2>\n\n<p>Laravelのバリデーション</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>rfc: RFCValidation\nstrict: NoRFCWarningsValidation\ndns: DNSCheckValidation\nspoof: SpoofCheckValidation\nfilter: FilterEmailValidation\n</code></pre></div></div>\n\n<p>いろいろ組み合わせて適切なバリデーションを作れるようなってます</p>\n\n<div class=\"code-frame\" data-lang=\"php\"><div class=\"highlight\"><pre><code><span class=\"s1\">'email'</span> <span class=\"o\">=&gt;</span> <span class=\"s1\">'email:rfc,dns'</span>\n</code></pre></div></div>\n\n<p>こんな感じでバリデーションかけれます。<br>\n<a href=\"https://readouble.com/laravel/8.x/ja/validation.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://readouble.com/laravel/8.x/ja/validation.html</a></p>\n\n<h2>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h2>\n\n<p>...の連続がX年からできなくなったとか、最初の文字が数値じゃだめとか色々決まりはありますが、<br>\nサービサーによって異なっていたり、バリデーションってゆるいところに合わせるのが正とは限らない気がしているので<br>\n最適ってなんだろうって調べてみておもいました。</p>\n","body":"\n## 結論\n\n以下順番で使える記号のバリデーションがゆるい順です。\nRFCに準拠するなら18個の記号に対応させないといけませんが、\n実際にその記号はGmailなどに対応していないケースもあって、「なにに合わせるかは自社のサービスで決めてください」が一定の答えかなと思いました。Twitterに合わせるのがよさそうと有名サービスに迎合するのもよさそうでした。\n\n| サービス | 対応（記号） |\n| --- | --- |\n| RFC | 18 |\n| フレームワーク | 何種類かあるので適切に組み合わせて使うのがよさそう |\n| Webサービス | 6 |\n| あなたのサービス！ | RFCに準拠したら記号含めて自分で考えてね |\n| Webメールサービス | 4 |\n\n\nこのまとめが100%よいとは限りませんが、結局なにがいいの？は議論余地あると思うので\nぜひ自分の思う最強のバリデーション正規表現をコメント欄とか新しい記事とか書いていただけると見てみたいです！\n\n\n--------------\n\n## 検討方法の列挙\n\n- RFCに準拠する: Emailの仕様を決めている組織に従うべき論\n- Webメールサービスに準拠する: 世の中のすべてのサービスのドキュメントを参考にする\n- 有名なWebサービスに準拠する: Twitterのサインアップのバリデーションを検証する\n- フレームワークに準拠する: php/Laravelを見てみる\n\n## RFCに準拠する\n\n\n> Request for Comments（リクエスト フォー コメンツ、略称：RFC）はIETF（Internet Engineering Task Force）による技術仕様の保存、公開形式である。内容には特に制限はないが、プロトコルやファイルフォーマットが主に扱われる。RFCとは「コメント募集」を意味する英語の略語であり、もともとは技術仕様を公開し、それについての意見を広く募集してより良いものにしていく観点から始められたようである。全てのRFCはインターネット上で公開されており、誰でも閲覧することができる。\n> \n> https://ja.wikipedia.org/wiki/Request_for_Comments\n\n\n- ここが詳しい [RFC 5322 & 5321に沿ったメールアドレス（local-part）に使える文字まとめ\n in Qiita](https://qiita.com/yoshitake_1201/items/40268332cd23f67c504c)\n\n原点確認したい人は[このあたり](https://www.rfc-editor.org/info/rfc6854)みてほしい。\n- RFC 6854\n- RFC 5322\n- RFC 7504\n- RFC 5321\n- RFC 1846\n\n使える文字\n\n```\n! # $ % & ' * + - / = ? ^ _ ` { | } ~\n```\n\n## Webメールサービスに準拠する\n\n何種類かサービスを見てみたがこのあたりが使えたら問題なさそう。\n\n```\n.\n-\n_\n+\n```\n\n|  | 使える記号（半角英数字以外） | その他 | 資料URL |\n| --- | --- | --- | --- |\n| softbank | 「－」（ハイフン）、「．」（ドット）、「＿ 」（アンダーバー） | 「＠」直前の「．」（ドット）や「．」（ドット）の連続使用などもできません。<br>文字数は、3文字以上30文字以内<br>ひとつ目の文字は、アルファベットまたは数字のみ | https://www.softbank.jp/support/faq/view/10544 |\n| docomo | 「_」（アンダーバー）、「.」（ピリオド）、「-」（ハイフン）の記号 | 3字以上30字まで設定することができます。<br>また、2009年4月1日以降、「.」は「..」などのように連続で使用することや@マークの直前で使用することはできなくなりました。<br>アドレス内に「..」や「.@」が存在する場合、一部のメールサービスからのメールが正しく届かない可能性がございます。<br>「スペース（空白）」は使用できません。<br>英字を入力する場合、大文字小文字の区別はありません。すべて小文字で表示されます。<br>先頭文字は英文字にしてください。 | https://www.nttdocomo.co.jp/info/spam_mail/change_add/ |\n| au | 「-（ハイフン）」、「.（ピリオド／ドット）」、「_ （アンダーバー）」 | メールネーム文字数が、30文字まで利用可能です。<br>「.」をアドレス内での連続使用や「.」をEメールネームの最初/最後に使用することはできません。また最初に数字の「0」を使用することもできません。 | https://www.au.com/support/service/mobile/trouble/mail/email/change// |\n| Gmail | ユーザー名: ピリオド（.）<br>エイリアス: プラス（+） | ユーザー名にはアンパサンド（＆）、等号（=）、アンダースコア（_）、アポストロフィ（'）、ダッシュ（-）、プラス記号（+）、カンマ（,）、山括弧（<>）、連続するピリオド（.）を使用することはできません。 | https://support.google.com/mail/answer/9211434?hl=ja |\n| Yahoo!メール | 半角で “.”（ピリオド）、“-”（ハイフン）、“_”（アンダーバー）の3種類 | 設定できるメールアドレスは、プログラムの誤動作等を防ぐ目的で、RFCというインターネットにかかわるルール(RFC2822)や、インターネット上の慣例をもとにしたYahoo!ウェブホスティングの独自ルールを適用しております。 メールアドレスに使用できる文字列は以下のとおりです。<br><br> <br>アルファベット : 半角小文字でa～zまでの26文字<br>数字 :半角で0～9までの10字<br>記号 :半角で “.”（ピリオド）、“-”（ハイフン）、“_”（アンダーバー）の3種類<br> <br>禁止されている文字や記号<br>メールアドレスは上記の文字と記号を組み合わせて1字以上32字以内でご設定ください。なお、弊社独自ルールで以下のように設定しています。<br><br> <br>記号で始まるアドレスは不可<br>「.」「-」の連続使用は不可 | https://support.yahoo-net.jp/PccHostingupper/s/article/H000004944 |\n| Outlook | ピリオド (.)、ハイフン (-)、下線 (_) | メール アドレスに使うことができる文字は、アルファベット、数字、ピリオド (.)、ハイフン (-)、または下線 (_) のみです。特殊な文字やアクセント記号は使うことができません。また、ラテン アルファベット以外のアルファベットも使うことができません。 | https://account.live.com/AddAssocId<br>(ドキュメントなし、エラーメッセージの文言で判断) |\n| iCloud Mail | 不明 |  | ドキュメントなし |\n\n\n## 有名なWebサービスに準拠する\n\nTwitterのサインアップ画面で検証した\nhttps://twitter.com/i/flow/signup\n\n| email | valid | 意図 |\n| --- | --- | --- |\n| test@example.com | TRUE | 簡単な例 |\n| test+-.._1@example.com | FALSE | ..の連続が弾かれるか |\n| 0test+-._1@example.com | TRUE | 先頭の文字が英数字のとき |\n| 0test++--.__1@example.com | TRUE | yahooで-_の連続使用できないので確認 |\n| x!&x@example.com | TRUE | RFC準拠でWebメールサービスで使えない文字の検証（!&のみ使えた）<br>! # $ % & ' * + - / = ? ^ _ ` { | } ~ |\n\n!& を使える設定しているのは意外でした。\n\n## フレームワークに準拠する\n\nLaravelのバリデーション\n\n```\nrfc: RFCValidation\nstrict: NoRFCWarningsValidation\ndns: DNSCheckValidation\nspoof: SpoofCheckValidation\nfilter: FilterEmailValidation\n```\n\nいろいろ組み合わせて適切なバリデーションを作れるようなってます\n\n```php\n'email' => 'email:rfc,dns'\n```\n\nこんな感じでバリデーションかけれます。\nhttps://readouble.com/laravel/8.x/ja/validation.html\n\n\n## 最後に\n\n...の連続がX年からできなくなったとか、最初の文字が数値じゃだめとか色々決まりはありますが、\nサービサーによって異なっていたり、バリデーションってゆるいところに合わせるのが正とは限らない気がしているので\n最適ってなんだろうって調べてみておもいました。\n\n","coediting":false,"comments_count":0,"created_at":"2021-10-18T13:31:27+09:00","group":null,"id":"59c4de2bddc610c2e3a3","likes_count":4,"private":false,"reactions_count":0,"stocks_count":7,"tags":[{"name":"Laravel","versions":[]},{"name":"email","versions":[]},{"name":"バリデーション","versions":[]},{"name":"rfc","versions":[]}],"title":"【保存版】Emailのバリデーションを考える上でのまとめ資料【ゆるい順: RFC→FW→サービス→Emailプラットフォーム】","updated_at":"2021-10-18T13:31:27+09:00","url":"https://qiita.com/ykhirao/items/59c4de2bddc610c2e3a3","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p><a href=\"https://camo.qiitausercontent.com/1ad18f2781a9a463a11ffccaed0dacf909a6ddff/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39626434636530612d373763342d336661662d636130332d6238643963336332383838612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9bd4ce0a-77c4-3faf-ca03-b8d9c3c2888a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=95d47533c7507a0816419d81deee1797\" alt=\"スクリーンショット 2021-10-18 2.27.25.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9bd4ce0a-77c4-3faf-ca03-b8d9c3c2888a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9bd4ce0a-77c4-3faf-ca03-b8d9c3c2888a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f1680524740f69578970cd02feb6ba4c 1x\" loading=\"lazy\"></a></p>\n\n<p>スクリプトエディタで以下の関数を追加</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\"><div class=\"highlight\"><pre><code>\n<span class=\"cm\">/**\n * アクティブな範囲をMDの表に変換する\n */</span>\n<span class=\"kd\">function</span> <span class=\"nx\">createMdTableText</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">range</span> <span class=\"o\">=</span> <span class=\"nx\">SpreadsheetApp</span><span class=\"p\">.</span><span class=\"nx\">getActiveRange</span><span class=\"p\">();</span>\n\n  <span class=\"kd\">const</span> <span class=\"nx\">data</span> <span class=\"o\">=</span> <span class=\"nx\">range</span><span class=\"p\">.</span><span class=\"nx\">getValues</span><span class=\"p\">();</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">);</span>\n\n  <span class=\"c1\">// 行列</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">rowNum</span> <span class=\"o\">=</span> <span class=\"nx\">range</span><span class=\"p\">.</span><span class=\"nx\">getNumRows</span><span class=\"p\">();</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">columnNum</span> <span class=\"o\">=</span> <span class=\"nx\">range</span><span class=\"p\">.</span><span class=\"nx\">getNumColumns</span><span class=\"p\">();</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"s2\">`行数: </span><span class=\"p\">${</span><span class=\"nx\">rowNum</span><span class=\"p\">}</span><span class=\"s2\">, 列数: </span><span class=\"p\">${</span><span class=\"nx\">columnNum</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">);</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">rowNum</span> <span class=\"o\">&lt;</span> <span class=\"mi\">1</span> <span class=\"o\">||</span> <span class=\"nx\">columnNum</span> <span class=\"o\">&lt;</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">Browser</span><span class=\"p\">.</span><span class=\"nx\">msgBox</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">選択して〜</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"kd\">const</span>  <span class=\"nx\">convertedData</span> <span class=\"o\">=</span> <span class=\"p\">[];</span>\n  <span class=\"nx\">convertedData</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">shift</span><span class=\"p\">())</span>\n  <span class=\"nx\">convertedData</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">(</span><span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"nx\">columnNum</span><span class=\"p\">).</span><span class=\"nx\">fill</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">---</span><span class=\"dl\">\"</span><span class=\"p\">))</span>\n  <span class=\"nx\">convertedData</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">(...</span><span class=\"nx\">data</span><span class=\"p\">);</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span> <span class=\"nx\">convertedData</span><span class=\"p\">);</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">resText</span> <span class=\"o\">=</span> <span class=\"nx\">convertedData</span><span class=\"p\">.</span><span class=\"nx\">map</span><span class=\"p\">(</span><span class=\"nx\">v</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">v</span><span class=\"p\">.</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\"> | </span><span class=\"dl\">\"</span><span class=\"p\">)).</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"se\">\\\\</span><span class=\"s2\">n</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">resText</span><span class=\"p\">);</span>\n  <span class=\"nx\">Browser</span><span class=\"p\">.</span><span class=\"nx\">msgBox</span><span class=\"p\">(</span><span class=\"nx\">resText</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p><a href=\"https://camo.qiitausercontent.com/4eb5aab886db8007112ba3a3a67145055f8f2312/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f35363262383466622d616366342d383133622d626562662d3333333836356334626633332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F562b84fb-acf4-813b-bebf-333865c4bf33.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0e0a11da6ec04903f606a420dadccb20\" alt=\"スクリーンショット 2021-10-18 2.28.19.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/562b84fb-acf4-813b-bebf-333865c4bf33.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F562b84fb-acf4-813b-bebf-333865c4bf33.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8da9b31ac6e721941c71fd66e915f950 1x\" loading=\"lazy\"></a></p>\n\n<p>インポート <code>createMdTableText</code></p>\n\n<p>表を選択してマクロの <code>createMdTableText</code> ボタンを押す</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/4a1c23f741f3237b89a09d5d1b6359adc8599f18/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f33653137356138652d323063362d393832652d373937302d6534386439393265343461612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F3e175a8e-20c6-982e-7970-e48d992e44aa.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a33e6386e80dc37f42566196cf86dd23\" alt=\"スクリーンショット 2021-10-18 2.29.31.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/3e175a8e-20c6-982e-7970-e48d992e44aa.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F3e175a8e-20c6-982e-7970-e48d992e44aa.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=222c2417be4266dd4262c0fae7dfdb14 1x\" loading=\"lazy\"></a></p>\n\n<p>許可するウインドウがでる、Googleの認証</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/1fc48507f703cb705d3dd6b66620e5b290feadeb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36373535636639382d666265322d633436352d346366632d3666636230316162373737352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6755cf98-fbe2-c465-4cfc-6fcb01ab7775.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d92d5fbeef4abfee87b5f9e161544421\" alt=\"スクリーンショット 2021-10-18 2.33.31.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6755cf98-fbe2-c465-4cfc-6fcb01ab7775.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6755cf98-fbe2-c465-4cfc-6fcb01ab7775.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=807eaf09054e30faf90c87a8c97841ff 1x\" loading=\"lazy\"></a></p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>タイトル | URL\n--- | ---\ngoogle | https://www.google.com/\nyahoo | https://www.yahoo.co.jp/\n</code></pre></div></div>\n\n<p>↑作られたMDファイル↑<br>\n↓実際の表↓</p>\n\n<table>\n<thead>\n<tr>\n<th>タイトル</th>\n<th>URL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>google</td>\n<td><a href=\"https://www.google.com/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.google.com/</a></td>\n</tr>\n<tr>\n<td>yahoo</td>\n<td><a href=\"https://www.yahoo.co.jp/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.yahoo.co.jp/</a></td>\n</tr>\n</tbody>\n</table>\n","body":"\n![スクリーンショット 2021-10-18 2.27.25.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9bd4ce0a-77c4-3faf-ca03-b8d9c3c2888a.png)\n\nスクリプトエディタで以下の関数を追加\n\n```javascript\n\n/**\n * アクティブな範囲をMDの表に変換する\n */\nfunction createMdTableText() {\n  const range = SpreadsheetApp.getActiveRange();\n\n  const data = range.getValues();\n  console.log(data);\n\n  // 行列\n  const rowNum = range.getNumRows();\n  const columnNum = range.getNumColumns();\n  console.log(`行数: ${rowNum}, 列数: ${columnNum}`);\n  if (rowNum < 1 || columnNum < 1) {\n    Browser.msgBox(\"選択して〜\");\n  }\n\n  const  convertedData = [];\n  convertedData.push(data.shift())\n  convertedData.push(Array(columnNum).fill(\"---\"))\n  convertedData.push(...data);\n  console.log( convertedData);\n  const resText = convertedData.map(v => v.join(\" | \")).join(\"\\\\n\")\n  console.log(resText);\n  Browser.msgBox(resText);\n}\n```\n\n![スクリーンショット 2021-10-18 2.28.19.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/562b84fb-acf4-813b-bebf-333865c4bf33.png)\n\nインポート `createMdTableText`\n\n表を選択してマクロの `createMdTableText` ボタンを押す\n\n![スクリーンショット 2021-10-18 2.29.31.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/3e175a8e-20c6-982e-7970-e48d992e44aa.png)\n\n\n許可するウインドウがでる、Googleの認証\n\n![スクリーンショット 2021-10-18 2.33.31.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6755cf98-fbe2-c465-4cfc-6fcb01ab7775.png)\n\n\n```\nタイトル | URL\n--- | ---\ngoogle | https://www.google.com/\nyahoo | https://www.yahoo.co.jp/\n```\n\n↑作られたMDファイル↑\n↓実際の表↓\n\nタイトル | URL\n--- | ---\ngoogle | https://www.google.com/\nyahoo | https://www.yahoo.co.jp/\n\n\n\n\n\n","coediting":false,"comments_count":0,"created_at":"2021-10-18T02:34:59+09:00","group":null,"id":"21b15c39f05ed7a7528b","likes_count":0,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"Markdown","versions":[]},{"name":"spreadsheet","versions":[]}],"title":"スプレッドシートでマークダウンの表をコピーする【マクロ】","updated_at":"2021-10-18T02:34:59+09:00","url":"https://qiita.com/ykhirao/items/21b15c39f05ed7a7528b","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:14\">\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n<p data-sourcepos=\"3:1-3:69\">みなさんはスクラムガイド読んだことありますか？</p>\n<p data-sourcepos=\"5:1-6:99\"><code>弊社はスクラム導入している</code> <code>アジャイルいいよね！</code> とかいう会話をしたことが一度でもある人は、<br>\nそんな長くないので原著スクラムガイドを読んでおくのはおすすめです。</p>\n<p data-sourcepos=\"8:1-11:84\"><a href=\"https://scrumguides.org/docs/scrumguide/v2020/2020-Scrum-Guide-Japanese.pdf\" rel=\"nofollow noopener\" target=\"_blank\">PDF版</a>の文書を、クリエイティブ・コモンズ　<a href=\"https://creativecommons.org/licenses/by-sa/4.0/deed.ja\" rel=\"nofollow noopener\" target=\"_blank\">CC BY-SA 4.0</a>　のライセンス下で再配布しています。内容に変更はありません。<br>\n通勤中に何度も読んでいるときにPDFが大変だったなと思い、Webで見れるようにしたく書いてます。<br>\n(<a href=\"https://qiita.com/ykhirao/items/421dd8681671ada1f55a\" id=\"reference-286ac8dee7be21d488eb\">2017年版はこっち</a>)<br>\n<a href=\"https://scrumguides.org/scrum-guide.html#scrum-values\" rel=\"nofollow noopener\" target=\"_blank\">英語のweb版はこっち</a></p>\n<h1 data-sourcepos=\"13:1-13:23\">\n<span id=\"スクラムガイド\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%AC%E3%82%A4%E3%83%89\"><i class=\"fa fa-link\"></i></a>スクラムガイド</h1>\n<h2 data-sourcepos=\"15:1-15:36\">\n<span id=\"1-スクラムガイドの目的\" class=\"fragment\"></span><a href=\"#1-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%AC%E3%82%A4%E3%83%89%E3%81%AE%E7%9B%AE%E7%9A%84\"><i class=\"fa fa-link\"></i></a>1. スクラムガイドの目的</h2>\n<p data-sourcepos=\"17:1-17:372\">我々は 1990 年代初頭にスクラムを開発した。世界中の人たちがスクラムを理解できるように、スクラムガイドの最初のバージョンを 2010 年に執筆した。それ以来、機能的に小さな更新を加えながらスクラムガイドを進化させてきた。我々は共にスクラムガイドを支援している。</p>\n<p data-sourcepos=\"20:1-20:552\">スクラムガイドにはスクラムの定義が含まれている。フレームワークの各要素には特定の目的があり、スクラムで実現される全体的な価値や結果に欠かせないものとなっている。スクラムの核となるデザインやアイデアを変更したり、要素を省略したり、スクラムのルールに従わなかったりすると、問題が隠蔽され、スクラムの利点が制限される。場合によっては、スクラムが役に立たなくなることさえある。</p>\n<p data-sourcepos=\"23:1-23:876\">成⻑を続ける複雑な世界において、スクラムの利用は増加しており、我々はそれを見守っている。スクラムが誕生したソフトウェアプロダクト開発の領域を超えて、本質的に複雑な作業を必要とするさまざまなドメインでスクラムが採用されている。そうした状況を見ると、我々も光栄である。スクラムが広まったことにより、開発者、研究者、アナリスト、科学者、その他の専門家もスクラムを利用するようになった。スクラムでは「開発者」という言葉を使っているが、開発者以外を排除しているのではなく、単純化のために使用しているだけである。スクラムから価値を得ているのであれば、そこにあなたも含まれていると考えてもらいたい。</p>\n<p data-sourcepos=\"26:1-26:621\">スクラムを利用していると、本文書で説明しているスクラムフレームワークと適合するようなパターン、プロセス、インサイトを発見・適用・考案することもあるだろう。そうしたものについては、スクラムガイドの目的の範囲外である。これらは状況に依存しており、スクラムを利用する状況によって大きく異なるからだ。スクラムフレームワークで利用できる戦術にはさまざまなものが存在するが、それらはスクラムガイド以外のところで説明されている。</p>\n<p data-sourcepos=\"28:1-29:15\">Ken Schwaber &amp; Jeff Sutherland<br>\n2020 年 11 ⽉</p>\n<p data-sourcepos=\"31:1-31:40\">© 2020 Ken Schwaber and Jeff Sutherland</p>\n<blockquote data-sourcepos=\"33:1-33:427\">\n<p data-sourcepos=\"33:3-33:427\">This publication is offered for license under the Attribution Share-Alike license of Creative Commons,accessible at <a href=\"http://creativecommons.org/licenses/by-sa/4.0/legalcode\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://creativecommons.org/licenses/by-sa/4.0/legalcode</a> and also described in summaryform at <a href=\"http://creativecommons.org/licenses/by-sa/4.0/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://creativecommons.org/licenses/by-sa/4.0/</a>. By utilizing this Scrum Guide, you acknowledgeand agree that you have read and agree to be bound by the terms of the Attribution Share-Alike licenseof Creative Commons.</p>\n</blockquote>\n<h2 data-sourcepos=\"36:1-36:27\">\n<span id=\"2-スクラムの定義\" class=\"fragment\"></span><a href=\"#2-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E5%AE%9A%E7%BE%A9\"><i class=\"fa fa-link\"></i></a>2. スクラムの定義</h2>\n<p data-sourcepos=\"38:1-38:201\">スクラムとは、複雑な問題に対応する適応型のソリューションを通じて、人々、チーム、組織が価値を生み出すための軽量級フレームワークである。</p>\n<p data-sourcepos=\"40:1-40:135\">簡単に言えば、スクラムとは次の環境を促進するためにスクラムマスターを必要とするものである。</p>\n<ol data-sourcepos=\"43:1-48:0\">\n<li data-sourcepos=\"43:1-43:129\">プロダクトオーナーは、複雑な問題に対応するための作業をプロダクトバックログに並べる。</li>\n<li data-sourcepos=\"44:1-44:114\">スクラムチームは、スプリントで選択した作業を価値のインクリメントに変える。</li>\n<li data-sourcepos=\"45:1-45:129\">スクラムチームとステークホルダーは、結果を検査して、次のスプリントに向けて調整する。</li>\n<li data-sourcepos=\"46:1-48:0\">繰り返す。</li>\n</ol>\n<p data-sourcepos=\"49:1-49:630\">スクラムはシンプルである。まずはそのままの状態で試してほしい。そして、スクラムの哲学、理論、構造が、ゴールを達成し、価値を生み出すかどうかを判断してほしい。スクラムフレームワークは意図的に不完全なものであり、スクラムの理論を実現するために必要な部分のみが定義されている。スクラムは実践する人たちの集合知で構築されている。スクラムのルールは詳細な指示を提供するものではなく、実践者の関係性や相互作用をガイドするものである。</p>\n<p data-sourcepos=\"51:1-51:378\">スクラムフレームワークの中で、さまざまなプロセス、技法、手法を使用できる。スクラムは既存のプラクティスを包み込む。あるいは、その存在を不要にする。スクラムによって現在のマネジメント、環境、作業技術の相対的な有効性が可視化され、改善が可能になるのである。</p>\n<h2 data-sourcepos=\"54:1-54:27\">\n<span id=\"3-スクラムの理論\" class=\"fragment\"></span><a href=\"#3-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E7%90%86%E8%AB%96\"><i class=\"fa fa-link\"></i></a>3. スクラムの理論</h2>\n<p data-sourcepos=\"56:1-56:237\">スクラムは「経験主義」と「リーン思考」に基づいている。経験主義では、知識は経験から生まれ、意思決定は観察に基づく。リーン思考では、ムダを省き、本質に集中する。</p>\n<p data-sourcepos=\"59:1-59:462\">スクラムでは、予測可能性を最適化してリスクを制御するために、イテレーティブ（反復的）でインクリメンタル（漸進的）なアプローチを採用している。スクラムを構成するのは、作業に必要なすべてのスキルや専門知識をグループ全体として備える人たちである。また、必要に応じてそうしたスキルを共有または習得できる人たちである。</p>\n<p data-sourcepos=\"61:1-61:351\">スクラムでは、検査と適応のための 4 つの正式なイベントを組み合わせている。それらを包含するイベントは「スプリント」と呼ばれる。これらのイベントが機能するのは、経験主義のスクラムの三本柱「透明性」「検査」「適応」を実現しているからである。</p>\n<h3 data-sourcepos=\"64:1-64:17\">\n<span id=\"31-透明性\" class=\"fragment\"></span><a href=\"#31-%E9%80%8F%E6%98%8E%E6%80%A7\"><i class=\"fa fa-link\"></i></a>3.1 透明性</h3>\n<p data-sourcepos=\"66:1-66:374\">創発的なプロセスや作業は、作業を実行する人とその作業を受け取る人に見える必要がある。スクラムにおける重要な意思決定は、 3つの正式な作成物を認知する状態に基づいている。透明性の低い作成物は、価値を低下させ、リスクを高める意思決定につながる可能性がある。</p>\n<p data-sourcepos=\"68:1-68:123\">透明性によって検査が可能になる。透明性のない検査は、誤解を招き、ムダなものである。</p>\n<h3 data-sourcepos=\"70:1-70:14\">\n<span id=\"32-検査\" class=\"fragment\"></span><a href=\"#32-%E6%A4%9C%E6%9F%BB\"><i class=\"fa fa-link\"></i></a>3.2 検査</h3>\n<p data-sourcepos=\"72:1-72:342\">スクラムの作成物と合意されたゴールに向けた進捗状況は、頻繁かつ熱心に検査されなければならない。これは、潜在的に望ましくない変化や問題を検知するためである。スクラムでは、検査を支援するために、 5 つのイベントでリズムを提供している。</p>\n<p data-sourcepos=\"74:1-74:189\">検査によって適応が可能になる。適応のない検査は意味がないとされる。スクラムのイベントは、変化を引き起こすように設計されている。</p>\n<h3 data-sourcepos=\"76:1-76:14\">\n<span id=\"33-適応\" class=\"fragment\"></span><a href=\"#33-%E9%81%A9%E5%BF%9C\"><i class=\"fa fa-link\"></i></a>3.3 適応</h3>\n<p data-sourcepos=\"78:1-78:369\">プロセスのいずれかの側面が許容範囲を逸脱していたり、成果となるプロダクトが受け入れられなかったりしたときは、適用しているプロセスや製造している構成要素を調整する必要がある。それ以上の逸脱を最小限に抑えるため、できるだけ早く調整しなければならない。</p>\n<p data-sourcepos=\"80:1-80:249\">関係者に権限が与えられていないときや、自己管理されていないときは、適応が難しくなる。スクラムチームは検査によって新しいことを学んだ瞬間に適応することが期待されている。</p>\n<h2 data-sourcepos=\"82:1-82:33\">\n<span id=\"4-スクラムの価値基準\" class=\"fragment\"></span><a href=\"#4-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E4%BE%A1%E5%80%A4%E5%9F%BA%E6%BA%96\"><i class=\"fa fa-link\"></i></a>4. スクラムの価値基準</h2>\n<p data-sourcepos=\"84:1-84:126\">スクラムが成功するかどうかは、次の 5 つの価値基準を実践できるかどうかにかかっている。</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"86:1-92:3\"><div class=\"highlight\"><pre><code>確約（ Commitment ）\n集中（ Focus ）\n公開（ Openness ）\n尊敬（ Respect ）\n勇気（ Courage ）\n</code></pre></div></div>\n<p data-sourcepos=\"94:1-94:621\">スクラムチームは、ゴールを達成し、お互いにサポートすることを確約する。スクラムチームは、ゴールに向けて可能な限り進捗できるように、スプリントの作業に集中する。スクラムチームとステークホルダーは、作業や課題を公開する。スクラムチームのメンバーは、お互いに能力のある独立した個人として尊敬し、一緒に働く人たちからも同じように尊敬される。スクラムチームのメンバーは、正しいことをする勇気や困難な問題に取り組む勇気を持つ。</p>\n<p data-sourcepos=\"96:1-96:732\">これらの価値基準は、スクラムチームの作業・行動・振る舞いの方向性を示している。下される意思決定、実行される手順、スクラムの使用方法は、これらの価値基準を減少や弱体化させるものではなく、強化させるものでなければならない。スクラムチームのメンバーは、スクラムのイベントや作成物を用いながら、これらの価値基準を学習および探求する。これらの価値基準がスクラムチームや一緒に働く人たちによって具現化されるとき、経験主義のスクラムの三本柱「透明性」「検査」「適応」に息が吹き込まれ、信頼が構築される。</p>\n<h2 data-sourcepos=\"98:1-98:27\">\n<span id=\"5-スクラムチーム\" class=\"fragment\"></span><a href=\"#5-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%81%E3%83%BC%E3%83%A0\"><i class=\"fa fa-link\"></i></a>5. スクラムチーム</h2>\n<p data-sourcepos=\"100:1-100:441\">スクラムの基本単位は、スクラムチームという小さなチームである。スクラムチームは、スクラムマスター 1 人、プロダクトオーナー 1 人、複数人の開発者で構成される。スクラムチーム内には、サブチームや階層は存在しない。これは、一度にひとつの目的（プロダクトゴール）に集中している専門家が集まった単位である。</p>\n<p data-sourcepos=\"102:1-102:276\">スクラムチームは機能横断型で、各スプリントで価値を生み出すために必要なすべてのスキルを備えている。また、自己管理型であり、誰が何を、いつ、どのように行うかをスクラムチーム内で決定する。</p>\n<p data-sourcepos=\"104:1-104:700\">スクラムチームは、敏捷性を維持するための十分な小ささと、スプリント内で重要な作業を完了するための十分な大きさがあり、通常は 10 人以下である。一般的に小さなチームのほうがコミュニケーションがうまく、生産性が高いことがわかっている。スクラムチームが大きくなりすぎる場合は、同じプロダクトに専念した、複数のまとまりのあるスクラムチームに再編成することを検討する必要がある。したがって、同じプロダクトゴール、プロダクトバックログ、およびプロダクトオーナーを共有する必要がある。</p>\n<p data-sourcepos=\"106:1-106:513\">スクラムチームは、ステークホルダーとのコラボレーション、検証、保守、運用、実験、研究開発など、プロダクトに関して必要となり得るすべての活動に責任を持つ。スクラムチームは、自分たちで作業を管理できるように組織によって構成され、その権限が与えられている。持続可能なペースでスプリントの作業を行うことにより、スクラムチームの集中と一貫性が向上する。</p>\n<p data-sourcepos=\"108:1-108:303\">スクラムチーム全体が、スプリントごとに価値のある有用なインクリメントを作成する責任を持つ。スクラムはスクラムチームにおいて、開発者、プロダクトオーナー、スクラムマスターという 3 つの明確な責任を定義する。</p>\n<h3 data-sourcepos=\"110:1-110:17\">\n<span id=\"51-開発者\" class=\"fragment\"></span><a href=\"#51-%E9%96%8B%E7%99%BA%E8%80%85\"><i class=\"fa fa-link\"></i></a>5.1 開発者</h3>\n<p data-sourcepos=\"112:1-112:183\">開発者はスクラムチームの一員である。各スプリントにおいて、利用可能なインクリメントのあらゆる側面を作成することを確約する。</p>\n<p data-sourcepos=\"114:1-114:165\">開発者が必要とする特定のスキルは、幅広く、作業の領域によって異なる。ただし、開発者は常に次の結果に責任を持つ。</p>\n<ul data-sourcepos=\"117:1-122:0\">\n<li data-sourcepos=\"117:1-117:80\">スプリントの計画（スプリントバックログ）を作成する。</li>\n<li data-sourcepos=\"118:1-118:74\">完成の定義を忠実に守ることにより品質を作り込む。</li>\n<li data-sourcepos=\"119:1-119:71\">スプリントゴールに向けて毎日計画を適応させる。</li>\n<li data-sourcepos=\"120:1-122:0\">専門家としてお互いに責任を持つ。</li>\n</ul>\n<h3 data-sourcepos=\"123:1-123:35\">\n<span id=\"52-プロダクトオーナー\" class=\"fragment\"></span><a href=\"#52-%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%82%AA%E3%83%BC%E3%83%8A%E3%83%BC\"><i class=\"fa fa-link\"></i></a>5.2 プロダクトオーナー</h3>\n<p data-sourcepos=\"125:1-125:249\">プロダクトオーナーは、スクラムチームから生み出されるプロダクトの価値を最大化することの結果に責任を持つ。組織・スクラムチーム・個人によって、その方法はさまざまである。</p>\n<p data-sourcepos=\"127:1-127:120\">プロダクトオーナーは、効果的なプロダクトバックログ管理にも責任を持つ。たとえば、</p>\n<ul data-sourcepos=\"130:1-135:0\">\n<li data-sourcepos=\"130:1-130:65\">プロダクトゴールを策定し、明示的に伝える。</li>\n<li data-sourcepos=\"131:1-131:80\">プロダクトバックログアイテムを作成し、明確に伝える。</li>\n<li data-sourcepos=\"132:1-132:65\">プロダクトバックログアイテムを並び替える。</li>\n<li data-sourcepos=\"133:1-135:0\">プロダクトバックログに透明性があり、見える化され、理解されるようにする。</li>\n</ul>\n<p data-sourcepos=\"136:1-136:210\">上記の作業は、プロダクトオーナーが行うこともできるが、他の人に委任することもできる。いずれの場合も、最終的な責任はプロダクトオーナーが持つ。</p>\n<p data-sourcepos=\"138:1-138:345\">プロダクトオーナーをうまく機能させるには、組織全体でプロダクトオーナーの決定を尊重しなければならない。これらの決定は、プロダクトバックログの内容や並び順、およびスプリントレビューでの検査可能なインクリメントによって見える化される。</p>\n<p data-sourcepos=\"140:1-140:360\">プロダクトオーナーは 1 人の人間であり、委員会ではない。プロダクトオーナーは、多くのステークホルダーのニーズをプロダクトバックログで表している場合がある。ステークホルダーがプロダクトバックログを変更したいときは、プロダクトオーナーを説得する。</p>\n<h3 data-sourcepos=\"142:1-142:32\">\n<span id=\"53-スクラムマスター\" class=\"fragment\"></span><a href=\"#53-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC\"><i class=\"fa fa-link\"></i></a>5.3 スクラムマスター</h3>\n<p data-sourcepos=\"144:1-144:345\">スクラムマスターは、スクラムガイドで定義されたスクラムを確立させることの結果に責任を持つ。スクラムマスターは、スクラムチームと組織において、スクラムの理論とプラクティスを全員に理解してもらえるよう支援することで、その責任を果たす。</p>\n<p data-sourcepos=\"146:1-146:267\">スクラムマスターは、スクラムチームの有効性に責任を持つ。スクラムマスターは、スクラムチームがスクラムフレームワーク内でプラクティスを改善できるようにすることで、その責任を果たす。</p>\n<p data-sourcepos=\"148:1-148:123\">スクラムマスターは、スクラムチームと、より大きな組織に奉仕する真のリーダーである。</p>\n<h4 data-sourcepos=\"151:1-151:95\">\n<span id=\"スクラムマスターはさまざまな形でスクラムチームを支援する\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E3%81%AF%E3%81%95%E3%81%BE%E3%81%96%E3%81%BE%E3%81%AA%E5%BD%A2%E3%81%A7%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%81%E3%83%BC%E3%83%A0%E3%82%92%E6%94%AF%E6%8F%B4%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>スクラムマスターは、さまざまな形でスクラムチームを支援する。</h4>\n<ul data-sourcepos=\"154:1-159:0\">\n<li data-sourcepos=\"154:1-154:80\">自己管理型で機能横断型のチームメンバーをコーチする。</li>\n<li data-sourcepos=\"155:1-155:137\">スクラムチームが完成の定義を満たす価値の高いインクリメントの作成に集中できるよう支援する。</li>\n<li data-sourcepos=\"156:1-156:95\">スクラムチームの進捗を妨げる障害物を排除するように働きかける。</li>\n<li data-sourcepos=\"157:1-159:0\">すべてのスクラムイベントが開催され、ポジティブで生産的であり、タイムボックスの制限が守られるようにする。</li>\n</ul>\n<h4 data-sourcepos=\"160:1-160:101\">\n<span id=\"スクラムマスターはさまざまな形でプロダクトオーナーを支援する\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E3%81%AF%E3%81%95%E3%81%BE%E3%81%96%E3%81%BE%E3%81%AA%E5%BD%A2%E3%81%A7%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%82%AA%E3%83%BC%E3%83%8A%E3%83%BC%E3%82%92%E6%94%AF%E6%8F%B4%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>スクラムマスターは、さまざまな形でプロダクトオーナーを支援する。</h4>\n<ul data-sourcepos=\"162:1-167:0\">\n<li data-sourcepos=\"162:1-162:128\">効果的なプロダクトゴールの定義とプロダクトバックログ管理の方法を探すことを支援する。</li>\n<li data-sourcepos=\"163:1-163:134\">明確で簡潔なプロダクトバックログアイテムの必要性についてスクラムチームに理解してもらう。</li>\n<li data-sourcepos=\"164:1-164:83\">複雑な環境での経験的なプロダクト計画の策定を支援する。</li>\n<li data-sourcepos=\"165:1-167:0\">必要に応じてステークホルダーとのコラボレーションを促進する。</li>\n</ul>\n<h4 data-sourcepos=\"168:1-168:80\">\n<span id=\"スクラムマスターはさまざまな形で組織を支援する\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E3%81%AF%E3%81%95%E3%81%BE%E3%81%96%E3%81%BE%E3%81%AA%E5%BD%A2%E3%81%A7%E7%B5%84%E7%B9%94%E3%82%92%E6%94%AF%E6%8F%B4%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>スクラムマスターは、さまざまな形で組織を支援する。</h4>\n<ul data-sourcepos=\"170:1-175:0\">\n<li data-sourcepos=\"170:1-170:86\">組織へのスクラムの導入を指導・トレーニング・コーチする。</li>\n<li data-sourcepos=\"171:1-171:74\">組織においてスクラムの実施方法を計画・助言する。</li>\n<li data-sourcepos=\"172:1-172:125\">複雑な作業に対する経験的アプローチを社員やステークホルダーに理解・実施してもらう。</li>\n<li data-sourcepos=\"173:1-175:0\">ステークホルダーとスクラムチームの間の障壁を取り除く。</li>\n</ul>\n<h2 data-sourcepos=\"176:1-176:30\">\n<span id=\"6-スクラムイベント\" class=\"fragment\"></span><a href=\"#6-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88\"><i class=\"fa fa-link\"></i></a>6. スクラムイベント</h2>\n<p data-sourcepos=\"178:1-178:585\">スプリントは他のすべてのイベントの入れ物である。スクラムにおけるそれぞれのイベントは、スクラムの作成物の検査と適応をするための公式の機会である。これらのイベントは必要な透明性を実現するために明確に設計されている。規定通りにイベントを運用しなければ、検査と適応の機会が失われる。スクラムにおけるイベントは、規則性を生み、スクラムで定義されていない会議の必要性を最小限に抑えるために用いられる。</p>\n<p data-sourcepos=\"180:1-180:129\">すべてのイベントは、複雑さを低減するために、同じ時間と場所で開催されることが望ましい。</p>\n<h3 data-sourcepos=\"182:1-182:23\">\n<span id=\"61-スプリント\" class=\"fragment\"></span><a href=\"#61-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88\"><i class=\"fa fa-link\"></i></a>6.1 スプリント</h3>\n<p data-sourcepos=\"184:1-184:132\">スプリントはスクラムにおける心臓の鼓動であり、スプリントにおいてアイデアが価値に変わる。</p>\n<p data-sourcepos=\"186:1-186:174\">一貫性を保つため、スプリントは 1 か月以内の決まった⻑さとする。前のスプリントが終わり次第、新しいスプリントが始まる。</p>\n<p data-sourcepos=\"188:1-188:264\">スプリントプランニング、デイリースクラム、スプリントレビュー、スプリントレトロスペクティブを含む、プロダクトゴールを達成するために必要なすべての作業は、スプリント内で行われる。</p>\n<p data-sourcepos=\"190:1-190:24\">スプリントでは、</p>\n<ul data-sourcepos=\"193:1-198:0\">\n<li data-sourcepos=\"193:1-193:86\">スプリントゴールの達成を危険にさらすような変更はしない。</li>\n<li data-sourcepos=\"194:1-194:32\">品質を低下させない。</li>\n<li data-sourcepos=\"195:1-195:86\">プロダクトバックログを必要に応じてリファインメントする。</li>\n<li data-sourcepos=\"196:1-198:0\">学習が進むにつれてスコープが明確化され、プロダクトオーナーとの再交渉が必要になる場合がある。</li>\n</ul>\n<p data-sourcepos=\"199:1-199:588\">スプリントによって、プロダクトゴールに対する進捗の検査と適応が少なくとも 1 か月ごとに確実になり、予測可能性が高まる。スプリントの期間が⻑すぎると、スプリントゴールが役に立たなくなり、複雑さが増し、リスクが高まる可能性がある。スプリントの期間を短くすれば、より多くの学習サイクルを生み出し、コストや労力のリスクを短い時間枠に収めることができる。スプリントは短いプロジェクトと考えることもできる。</p>\n<p data-sourcepos=\"201:1-201:429\">進捗の見通しを立てるために、バーンダウン、バーンアップ、累積フローなど、さまざまなプラクティスが存在する。これらの有用性は証明されているが、経験主義の重要性を置き換えるものではない。複雑な環境下では、何が起きるかわからない。すでに発生したことだけが、将来を見据えた意思決定に使用できる。</p>\n<p data-sourcepos=\"203:1-203:216\">スプリントゴールがもはや役に立たなくなった場合、スプリントは中止されることになるだろう。プロダクトオーナーだけがスプリントを中止する権限を持つ。</p>\n<h3 data-sourcepos=\"205:1-205:41\">\n<span id=\"62-スプリントプランニング\" class=\"fragment\"></span><a href=\"#62-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%97%E3%83%A9%E3%83%B3%E3%83%8B%E3%83%B3%E3%82%B0\"><i class=\"fa fa-link\"></i></a>6.2 スプリントプランニング</h3>\n<p data-sourcepos=\"207:1-207:636\">スプリントプランニングはスプリントの起点であり、ここではスプリントで実行する作業の計画を立てる。結果としてできる計画は、スクラムチーム全体の共同作業によって作成される。プロダクトオーナーは参加者に対して、最も重要なプロダクトバックログアイテムと、それらとプロダクトゴールとの関連性について話し合う準備ができているかを確認する。スクラムチームは、アドバイスをもらうためにチーム以外の人をスプリントプランニングに招待してもよい。</p>\n<h4 data-sourcepos=\"209:1-209:77\">\n<span id=\"スプリントプランニングは次のトピックに対応する\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%97%E3%83%A9%E3%83%B3%E3%83%8B%E3%83%B3%E3%82%B0%E3%81%AF%E6%AC%A1%E3%81%AE%E3%83%88%E3%83%94%E3%83%83%E3%82%AF%E3%81%AB%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>スプリントプランニングは次のトピックに対応する：</h4>\n<h5 data-sourcepos=\"211:1-211:78\">\n<span id=\"トピック-1-このスプリントはなぜ価値があるのか\" class=\"fragment\"></span><a href=\"#%E3%83%88%E3%83%94%E3%83%83%E3%82%AF-1-%E3%81%93%E3%81%AE%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%81%AF%E3%81%AA%E3%81%9C%E4%BE%A1%E5%80%A4%E3%81%8C%E3%81%82%E3%82%8B%E3%81%AE%E3%81%8B\"><i class=\"fa fa-link\"></i></a>トピック 1 ：このスプリントはなぜ価値があるのか？</h5>\n<p data-sourcepos=\"213:1-213:456\">プロダクトオーナーは、プロダクトの価値と有用性を今回のスプリントでどのように高めることができるかを提案する。次に、スクラムチーム全体が協力して、そのスプリントになぜ価値があるかをステークホルダーに伝えるスプリントゴールを定義する。スプリントゴールは、スプリントプランニングの終了までに確定する必要がある。</p>\n<h5 data-sourcepos=\"215:1-215:72\">\n<span id=\"トピック-2-このスプリントで何ができるのか\" class=\"fragment\"></span><a href=\"#%E3%83%88%E3%83%94%E3%83%83%E3%82%AF-2-%E3%81%93%E3%81%AE%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%81%A7%E4%BD%95%E3%81%8C%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE%E3%81%8B\"><i class=\"fa fa-link\"></i></a>トピック 2 ：このスプリントで何ができるのか？</h5>\n<p data-sourcepos=\"217:1-217:390\">開発者は、プロダクトオーナーとの話し合いを通じて、プロダクトバックログからアイテムを選択し、今回のスプリントに含める。スクラムチームは、このプロセスの中でプロダクトバックログアイテムのリファインメントをする場合がある。それによって、チームの理解と自信が高まる。</p>\n<p data-sourcepos=\"219:1-219:336\">スプリント内でどれくらい完了できるかを選択するのは難しいかもしれない。しかしながら、開発者が過去の自分たちのパフォーマンス、今回のキャパシティ、および完成の定義の理解を深めていけば、スプリントの予測に自信が持てるようになる。</p>\n<h5 data-sourcepos=\"221:1-221:84\">\n<span id=\"トピック-3-選択した作業をどのように成し遂げるのか\" class=\"fragment\"></span><a href=\"#%E3%83%88%E3%83%94%E3%83%83%E3%82%AF-3-%E9%81%B8%E6%8A%9E%E3%81%97%E3%81%9F%E4%BD%9C%E6%A5%AD%E3%82%92%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E6%88%90%E3%81%97%E9%81%82%E3%81%92%E3%82%8B%E3%81%AE%E3%81%8B\"><i class=\"fa fa-link\"></i></a>トピック 3 ：選択した作業をどのように成し遂げるのか？</h5>\n<p data-sourcepos=\"223:1-223:552\">開発者は、選択したプロダクトバックログアイテムごとに、完成の定義を満たすインクリメントを作成するために必要な作業を計画する。これは多くの場合、プロダクトバックログアイテムを 1 日以内の小さな作業アイテムに分解することによって行われる。これをどのように行うかは、開発者だけの裁量とする。プロダクトバックログアイテムを価値のインクリメントに変換する方法は誰も教えてくれない。</p>\n<p data-sourcepos=\"225:1-225:213\">スプリントゴール、スプリント向けに選択したプロダクトバックログアイテム、およびそれらを提供するための計画をまとめてスプリントバックログと呼ぶ。</p>\n<p data-sourcepos=\"227:1-227:246\">スプリントが 1 か月の場合、スプリントプランニングのタイムボックスは最大で 8 時間である。スプリントの期間が短ければ、スプリントプランニングの時間も短くすることが多い。</p>\n<h3 data-sourcepos=\"229:1-229:32\">\n<span id=\"63-デイリースクラム\" class=\"fragment\"></span><a href=\"#63-%E3%83%87%E3%82%A4%E3%83%AA%E3%83%BC%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0\"><i class=\"fa fa-link\"></i></a>6.3 デイリースクラム</h3>\n<p data-sourcepos=\"231:1-231:234\">デイリースクラムの目的は、計画された今後の作業を調整しながら、スプリントゴールに対する進捗を検査し、必要に応じてスプリントバックログを適応させることである。</p>\n<p data-sourcepos=\"233:1-233:409\">デイリースクラムは、スクラムチームの開発者のための 15 分のイベントである。複雑さを低減するために、スプリント期間中は毎日、同じ時間・場所で開催する。プロダクトオーナーまたはスクラムマスターがスプリントバックログのアイテムに積極的に取り組んでいる場合は、開発者として参加する。</p>\n<p data-sourcepos=\"235:1-235:285\">開発者は、デイリースクラムがスプリントゴールの進捗に焦点をあて、これからの 1 日の作業の実行可能な計画を作成する限り、必要な構造とやり方を選択できる。これは集中を生み出し、自己管理を促進する。</p>\n<p data-sourcepos=\"237:1-237:183\">デイリースクラムは、コミュニケーションを改善し、障害物を特定し、迅速な意思決定を促進する。その結果、他の会議を不要にする。</p>\n<p data-sourcepos=\"239:1-239:282\">開発者が計画を調整できるのは、デイリースクラムのときだけではない。スプリントの残りの作業を適応または再計画することについて、より詳細な議論をするために、開発者は一日を通じて頻繁に話し合う。</p>\n<h3 data-sourcepos=\"241:1-241:35\">\n<span id=\"64-スプリントレビュー\" class=\"fragment\"></span><a href=\"#64-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC\"><i class=\"fa fa-link\"></i></a>6.4 スプリントレビュー</h3>\n<p data-sourcepos=\"243:1-243:291\">スプリントレビューの目的は、スプリントの成果を検査し、今後の適応を決定することである。スクラムチームは、主要なステークホルダーに作業の結果を提示し、プロダクトゴールに対する進捗について話し合う。</p>\n<p data-sourcepos=\"245:1-245:603\">スプリントレビューにおいて、スクラムチームとステークホルダーは、スプリントで何が達成され、自分たちの環境で何が変化したかについてレビューする。この情報に基づいて、参加者は次にやるべきことに協力して取り組む。新たな機会に見合うようにプロダクトバックログを調整することもある。スプリントレビューはワーキングセッションであり、スクラムチームはスプリントレビューをプレゼンテーションだけに限定しないようにする。</p>\n<p data-sourcepos=\"247:1-247:300\">スプリントレビューは、スプリントの最後から 2 番目のイベントであり、スプリントが 1 か月の場合、タイムボックスは最大 4 時間である。スプリントの期間が短ければ、スプリントレビューの時間も短くすることが多い。</p>\n<h3 data-sourcepos=\"249:1-249:50\">\n<span id=\"65-スプリントレトロスペクティブ\" class=\"fragment\"></span><a href=\"#65-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%AC%E3%83%88%E3%83%AD%E3%82%B9%E3%83%9A%E3%82%AF%E3%83%86%E3%82%A3%E3%83%96\"><i class=\"fa fa-link\"></i></a>6.5 スプリントレトロスペクティブ</h3>\n<p data-sourcepos=\"251:1-251:123\">スプリントレトロスペクティブの目的は、品質と効果を高める方法を計画することである。</p>\n<p data-sourcepos=\"253:1-253:603\">スクラムチームは、個人、相互作用、プロセス、ツール、完成の定義に関して、今回のスプリントがどのように進んだかを検査する。多くの場合、検査する要素は作業領域によって異なる。スクラムチームを迷わせた仮説があれば特定し、その真因を探求する。スクラムチームは、スプリント中に何がうまくいったか、どのような問題が発生したか、そしてそれらの問題がどのように解決されたか（または解決されなかったか）について話し合う。</p>\n<p data-sourcepos=\"255:1-255:273\">スクラムチームは、自分たちの効果を改善するために最も役立つ変更を特定する。最も影響の大きな改善は、できるだけ早く対処する。次のスプリントのスプリントバックログに追加することもできる。</p>\n<p data-sourcepos=\"257:1-257:324\">スプリントレトロスペクティブをもってスプリントは終了する。スプリントが 1 か月の場合、スプリントレトロスペクティブは最大 3 時間である。スプリントの期間が短ければ、スプリントレトロスペクティブの時間も短くすることが多い。</p>\n<h2 data-sourcepos=\"259:1-259:30\">\n<span id=\"7-スクラムの作成物\" class=\"fragment\"></span><a href=\"#7-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E4%BD%9C%E6%88%90%E7%89%A9\"><i class=\"fa fa-link\"></i></a>7. スクラムの作成物</h2>\n<p data-sourcepos=\"261:1-261:423\">スクラムの作成物は、作業や価値を表している。これらは重要な情報の透明性を最大化できるように設計されている。作成物を検査する人が、適応するときと同じ基準を持っている。各作成物には、透明性と集中を高める情報を提供する「確約（コミットメント）」が含まれている。これにより進捗を測定できる。</p>\n<ul data-sourcepos=\"264:1-267:0\">\n<li data-sourcepos=\"264:1-264:68\">プロダクトバックログのためのプロダクトゴール</li>\n<li data-sourcepos=\"265:1-265:68\">スプリントバックログのためのスプリントゴール</li>\n<li data-sourcepos=\"266:1-267:0\">インクリメントのための完成の定義</li>\n</ul>\n<p data-sourcepos=\"268:1-268:156\">これらの確約は、スクラムチームとステークホルダーの経験主義とスクラムの価値基準を強化するために存在する。</p>\n<h3 data-sourcepos=\"271:1-271:38\">\n<span id=\"71-プロダクトバックログ\" class=\"fragment\"></span><a href=\"#71-%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%83%90%E3%83%83%E3%82%AF%E3%83%AD%E3%82%B0\"><i class=\"fa fa-link\"></i></a>7.1 プロダクトバックログ</h3>\n<p data-sourcepos=\"273:1-273:222\">プロダクトバックログは、創発的かつ順番に並べられた、プロダクトの改善に必要なものの一覧である。これは、スクラムチームが行う作業の唯一の情報源である。</p>\n<p data-sourcepos=\"275:1-275:629\">1 スプリント内でスクラムチームが完成できるプロダクトバックログアイテムは、スプリントプランニングのときには選択の準備ができている。スクラムチームは通常、リファインメントの活動を通じて、選択に必要な透明性を獲得する。プロダクトバックログアイテムがより小さく詳細になるように、分割および定義をする活動である。これは、説明・並び順・サイズなどの詳細を追加するための継続的な活動である。多くの場合、属性は作業領域によって異なる。</p>\n<p data-sourcepos=\"277:1-277:225\">作業を行う開発者は、その作業規模の評価に責任を持つ。開発者がトレードオフを理解して選択できるように、プロダクトオーナーが開発者を支援することもできる。</p>\n<h4 data-sourcepos=\"279:1-279:71\">\n<span id=\"711-確約コミットメントプロダクトゴール\" class=\"fragment\"></span><a href=\"#711-%E7%A2%BA%E7%B4%84%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%83%A1%E3%83%B3%E3%83%88%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%82%B4%E3%83%BC%E3%83%AB\"><i class=\"fa fa-link\"></i></a>7.1.1 確約（コミットメント）：プロダクトゴール</h4>\n<p data-sourcepos=\"281:1-281:376\">プロダクトゴールは、プロダクトの将来の状態を表している。それがスクラムチームの計画のターゲットになる。プロダクトゴールはプロダクトバックログに含まれる。プロダクトバックログの残りの部分は、プロダクトゴールを達成する「何か（what）」を定義するものである。</p>\n<blockquote data-sourcepos=\"284:1-284:332\">\n<p data-sourcepos=\"284:3-284:332\">プロダクトとは価値を提供する手段である。プロダクトは、明確な境界、既知のステークホルダー、明確に定義されたユーザーや顧客を持っている。プロダクトは、サービスや物理的な製品である場合もあれば、より抽象的なものの場合もある。</p>\n</blockquote>\n<p data-sourcepos=\"287:1-287:216\">プロダクトゴールは、スクラムチームの⻑期的な目標である。次の目標に移る前に、スクラムチームはひとつの目標を達成（または放棄）しなければならない。</p>\n<h3 data-sourcepos=\"289:1-289:38\">\n<span id=\"72-スプリントバックログ\" class=\"fragment\"></span><a href=\"#72-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%90%E3%83%83%E3%82%AF%E3%83%AD%E3%82%B0\"><i class=\"fa fa-link\"></i></a>7.2 スプリントバックログ</h3>\n<p data-sourcepos=\"291:1-291:300\">スプリントバックログは、スプリントゴール（なぜ）、スプリント向けに選択されたいくつかのプロダクトバックログアイテム（何を）、およびインクリメントを届けるための実行可能な計画（どのように）で構成される。</p>\n<p data-sourcepos=\"293:1-293:504\">スプリントバックログは、開発者による、開発者のための計画である。スプリントバックログには、スプリントゴールを達成するために開発者がスプリントで行う作業がリアルタイムに反映される。その結果、より多くのことを学ぶにつれて、スプリントの期間を通して更新される。スプリントバックログはデイリースクラムで進捗を検査できる程度の詳細さが必要である。</p>\n<h4 data-sourcepos=\"295:1-295:71\">\n<span id=\"721-確約コミットメントスプリントゴール\" class=\"fragment\"></span><a href=\"#721-%E7%A2%BA%E7%B4%84%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%83%A1%E3%83%B3%E3%83%88%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%82%B4%E3%83%BC%E3%83%AB\"><i class=\"fa fa-link\"></i></a>7.2.1 確約（コミットメント）：スプリントゴール</h4>\n<p data-sourcepos=\"297:1-297:399\">スプリントゴールはスプリントの唯一の目的である。スプリントゴールは開発者が確約するものだが、スプリントゴールを達成するために必要となる作業に対しては柔軟性をもたらす。スプリントゴールはまた、一貫性と集中を生み出し、スクラムチームに一致団結した作業を促すものでもある。</p>\n<p data-sourcepos=\"299:1-299:471\">スプリントゴールは、スプリントプランニングで作成され、スプリントバックログに追加される。開発者がスプリントで作業するときには、スプリントゴールを念頭に置く。作業が予想と異なることが判明した場合は、スプリントゴールに影響を与えることがないように、プロダクトオーナーと交渉してスプリントバックログのスコープを調整する。</p>\n<h3 data-sourcepos=\"301:1-301:29\">\n<span id=\"73-インクリメント\" class=\"fragment\"></span><a href=\"#73-%E3%82%A4%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88\"><i class=\"fa fa-link\"></i></a>7.3 インクリメント</h3>\n<p data-sourcepos=\"303:1-303:429\">インクリメントは、プロダクトゴールに向けた具体的な踏み石である。インクリメントはこれまでのすべてのインクリメントに追加する。また、すべてのインクリメントが連携して機能することを保証するために、徹底的に検証する必要がある。価値を提供するには、インクリメントを利用可能にしなければならない。</p>\n<p data-sourcepos=\"305:1-305:477\">スプリントでは、複数のインクリメントを作成可能である。インクリメントをまとめたものをスプリントレビューで提示する。それによって、経験主義がサポートされる。ただし、スプリント終了前にインクリメントをステークホルダーにデリバリーする可能性もある。スプリントレビューのことを価値をリリースするための関門と見なすべきではない。</p>\n<p data-sourcepos=\"307:1-307:117\">完成の定義を満たさない限り、作業をインクリメントの一部と見なすことはできない。</p>\n<h4 data-sourcepos=\"309:1-309:62\">\n<span id=\"731-確約コミットメント完成の定義\" class=\"fragment\"></span><a href=\"#731-%E7%A2%BA%E7%B4%84%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%83%A1%E3%83%B3%E3%83%88%E5%AE%8C%E6%88%90%E3%81%AE%E5%AE%9A%E7%BE%A9\"><i class=\"fa fa-link\"></i></a>7.3.1 確約（コミットメント）：完成の定義</h4>\n<p data-sourcepos=\"311:1-311:135\">完成の定義とは、プロダクトの品質基準を満たすインクリメントの状態を示した正式な記述である。</p>\n<p data-sourcepos=\"313:1-313:123\">プロダクトバックログアイテムが完成の定義を満たしたときにインクリメントが誕生する。</p>\n<p data-sourcepos=\"315:1-315:483\">完成の定義により、作業が完了してインクリメントの一部となったことが全員の共通認識となり、透明性が生み出される。プロダクトバックログアイテムが完成の定義を満たしていない場合、リリースすることはできない。ましてやスプリントレビューで提示することもできない。そうした場合、あとで検討できるようにプロダクトバックログに戻しておく。</p>\n<p data-sourcepos=\"317:1-317:321\">インクリメントの完成の定義が組織の標準の一部となっている場合、すべてのスクラムチームは最低限それに従う必要がある。組織の標準になっていない場合、そのスクラムチームはプロダクトに適した完成の定義を作成する必要がある。</p>\n<p data-sourcepos=\"319:1-319:213\">開発者は完成の定義に準拠する必要がある。プロダクトに関わるスクラムチームが複数ある場合、共通の完成の定義を作成して、それに準拠する必要がある。</p>\n<h2 data-sourcepos=\"322:1-322:15\">\n<span id=\"8-最後に\" class=\"fragment\"></span><a href=\"#8-%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>8. 最後に</h2>\n<p data-sourcepos=\"324:1-324:438\">スクラムは無料であり、本ガイドで提供されるものである。ここで概要を述べたように、スクラムフレームワークは不変である。スクラムの一部だけを導入することも可能だが、それはスクラムとは言えない。すべてを備えたものがスクラムであり、その他の技法・方法論・プラクティスの入れ物として機能するものである。</p>\n<h3 data-sourcepos=\"326:1-326:14\">\n<span id=\"81-謝辞\" class=\"fragment\"></span><a href=\"#81-%E8%AC%9D%E8%BE%9E\"><i class=\"fa fa-link\"></i></a>8.1 謝辞</h3>\n<h4 data-sourcepos=\"328:1-328:17\">\n<span id=\"811-人々\" class=\"fragment\"></span><a href=\"#811-%E4%BA%BA%E3%80%85\"><i class=\"fa fa-link\"></i></a>8.1.1 人々</h4>\n<p data-sourcepos=\"330:1-330:522\">スクラムに貢献してくれた多くの方々の中でも、最初に尽力してくれた人物の名前を挙げたい。まず、Jeff Sutherlandと一緒に働いたJeff McKennaとJohn Scumniotales。それから、Ken Schwaberと一緒に働いたMike SmithとChris Martin。みんなで一緒に働いたこともあった。その後の数年間は、さらに多くの方々が貢献してくれた。彼らの助けがなければ、スクラムは今日のように洗練されていなかっただろう。</p>\n<h4 data-sourcepos=\"332:1-332:41\">\n<span id=\"812-スクラムガイドの歴史\" class=\"fragment\"></span><a href=\"#812-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%AC%E3%82%A4%E3%83%89%E3%81%AE%E6%AD%B4%E5%8F%B2\"><i class=\"fa fa-link\"></i></a>8.1.2 スクラムガイドの歴史</h4>\n<p data-sourcepos=\"334:1-334:292\">Ken SchwaberとJeff Sutherlandが、 1995 年のOOPSLAカンファレンスにおいてスクラムを共同発表した。この発表は、KenとJeffが過去数年間で学んだことを文書化したものであり、はじめて公開された正式なスクラムの定義である。</p>\n<p data-sourcepos=\"336:1-336:430\">スクラムガイドは、Jeff SutherlandとKen Schwaberが 30 年以上かけて開発・進化・保守しているスクラムを文書化したものである。その他の情報源では、スクラムフレームワークを補完するパターン、プロセス、インサイトなどが提供されている。これらは、生産性・価値・創造性・結果に対する満足度を高める可能性がある。</p>\n<p data-sourcepos=\"338:1-338:246\">スクラムの詳細な歴史については、別のところで説明されている。初期の試行錯誤および証明の場であるIndividual, Inc.、Newspage、Fidelity Investments、IDX（現GE Medical）の各社に感謝したい。</p>\n<h2 data-sourcepos=\"341:1-341:24\">\n<span id=\"9-翻訳について\" class=\"fragment\"></span><a href=\"#9-%E7%BF%BB%E8%A8%B3%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a>9. 翻訳について</h2>\n<p data-sourcepos=\"343:1-343:180\">本ガイドは、上記の開発者による英語バージョンを日本語に翻訳したものである。日本語訳は角征典、荒本実、和田圭介が担当した。</p>\n<p data-sourcepos=\"345:1-345:345\">過去の版の翻訳レビューについては、守田憲司さん、高江洲睦さん、永瀬美穂さん、栗秋宏徳さん、川口恭伸さん、角谷信太郎さん、木村卓央さん、原田騎郎さん、吉羽龍太郎さん、むらはしけんいちさん、いろさん、たなべすなおさんに協力いただいた。</p>\n<p data-sourcepos=\"347:1-347:61\">翻訳に関する連絡先：角征典（<a href=\"mailto:kdmsnr@gmail.com\" class=\"autolink\">kdmsnr@gmail.com</a>）</p>\n<h2 data-sourcepos=\"349:1-349:16\">\n<span id=\"10-用語集\" class=\"fragment\"></span><a href=\"#10-%E7%94%A8%E8%AA%9E%E9%9B%86\"><i class=\"fa fa-link\"></i></a>10. 用語集</h2>\n<p data-sourcepos=\"351:1-352:19\"><em><em>Genera</em> Terms</em>*  一般用語<br>\nScrum  スクラム</p>\n<p data-sourcepos=\"354:1-358:17\"><strong>Theory</strong> 理論<br>\nEmpiricism 経験主義<br>\nTransparency 透明性<br>\nInspection 検査<br>\nAdaptation 適応</p>\n<p data-sourcepos=\"360:1-365:63\"><strong>Events</strong> イベント<br>\nSprint スプリント<br>\nSprint Planning スプリントプランニング<br>\nDaily Scrum デイリースクラム<br>\nSprint Review スプリントレビュー<br>\nSprint Retrospective スプリントレトロスペクティブ</p>\n<p data-sourcepos=\"367:1-371:20\"><strong>Roles</strong> 役割<br>\nScrum Team スクラムチーム<br>\nScrum Master スクラムマスター<br>\nProduct Owner プロダクトオーナー<br>\nDevelopers 開発者</p>\n<p data-sourcepos=\"373:1-376:31\"><strong>Artifacts</strong> 作成物<br>\nProduct Backlog プロダクトバックログ<br>\nSprint Backlog スプリントバックログ<br>\nIncrement インクリメント</p>\n<p data-sourcepos=\"378:1-379:34\"><strong>Misc</strong> その他<br>\nDefinition of Done 完成の定義</p>\n<h2 data-sourcepos=\"381:1-381:94\">\n<span id=\"11-スクラムガイド-2017-年版からスクラムガイド-2020-年版への変更点\" class=\"fragment\"></span><a href=\"#11-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%AC%E3%82%A4%E3%83%89-2017-%E5%B9%B4%E7%89%88%E3%81%8B%E3%82%89%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%AC%E3%82%A4%E3%83%89-2020-%E5%B9%B4%E7%89%88%E3%81%B8%E3%81%AE%E5%A4%89%E6%9B%B4%E7%82%B9\"><i class=\"fa fa-link\"></i></a>11. スクラムガイド 2017 年版からスクラムガイド 2020 年版への変更点</h2>\n<h3 data-sourcepos=\"383:1-383:36\">\n<span id=\"111-指示的な部分を削減\" class=\"fragment\"></span><a href=\"#111-%E6%8C%87%E7%A4%BA%E7%9A%84%E3%81%AA%E9%83%A8%E5%88%86%E3%82%92%E5%89%8A%E6%B8%9B\"><i class=\"fa fa-link\"></i></a>11.1 指示的な部分を削減</h3>\n<p data-sourcepos=\"384:1-384:606\">スクラムガイドは時間が経つにつれて少し指示的なものになっていた。 2020 年版では、指示的な表現を削除または緩和して、スクラムを最小限かつ十分なフレームワークに戻すことを目的としている。たとえば、デイリースクラムの質問の削除、PBI（プロダクトバックログアイテム）の属性に関する記述の緩和、スプリントバックログにあるレトロスペクティブのアイテムに関する記述の緩和、スプリントの中止のセクションの削減などを実施した。</p>\n<h3 data-sourcepos=\"386:1-386:75\">\n<span id=\"112-ひとつのチームがひとつのプロダクトに集中する\" class=\"fragment\"></span><a href=\"#112-%E3%81%B2%E3%81%A8%E3%81%A4%E3%81%AE%E3%83%81%E3%83%BC%E3%83%A0%E3%81%8C%E3%81%B2%E3%81%A8%E3%81%A4%E3%81%AE%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%81%AB%E9%9B%86%E4%B8%AD%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>11.2 ひとつのチームがひとつのプロダクトに集中する</h3>\n<p data-sourcepos=\"387:1-387:354\">これはチーム内で分断が発生し、POと開発チームの関係が「プロキシ」や「我々と彼ら」といった問題につながることを排除するためである。存在するのは、PO、SM、開発者の 3 つの異なる責任を持ち、同じ目的を共有するひとつの「スクラムチーム」だけである。</p>\n<h3 data-sourcepos=\"389:1-389:42\">\n<span id=\"113-プロダクトゴールの導入\" class=\"fragment\"></span><a href=\"#113-%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%82%B4%E3%83%BC%E3%83%AB%E3%81%AE%E5%B0%8E%E5%85%A5\"><i class=\"fa fa-link\"></i></a>11.3 プロダクトゴールの導入</h3>\n<p data-sourcepos=\"390:1-390:297\">スクラムガイド 2020 年版では「プロダクトゴール」を導入した。スクラムチームに大きな価値のある目的に集中してもらうためである。各スプリントでは、プロダクトを全体的なプロダクトゴールに近づける必要がある。</p>\n<h3 data-sourcepos=\"392:1-392:90\">\n<span id=\"114-スプリントゴール完成の定義プロダクトゴールの居場所\" class=\"fragment\"></span><a href=\"#114-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%82%B4%E3%83%BC%E3%83%AB%E5%AE%8C%E6%88%90%E3%81%AE%E5%AE%9A%E7%BE%A9%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%82%B4%E3%83%BC%E3%83%AB%E3%81%AE%E5%B1%85%E5%A0%B4%E6%89%80\"><i class=\"fa fa-link\"></i></a>11.4 スプリントゴール、完成の定義、プロダクトゴールの居場所</h3>\n<p data-sourcepos=\"393:1-393:812\">以前のスクラムガイドでは、明確なアイデンティティーを与えることなく、「スプリントゴール」と「完成の定義」について説明していた。これらは作成物ではなく、作成物に付随するものだった。 2020 年版では「プロダクトゴール」を導入し、これらの位置づけを明確にした。 3つの作成物には、それぞれの「確約（コミットメント）」が含まれる。つまり、プロダクトバックログにはプロダクトゴール、スプリントバックログにはスプリントゴール、インクリメントには完成の定義（カッコをなくした）が含まれる。これらの存在により透明性がもたらされ、作成物の進捗に集中できるようになる。</p>\n<h3 data-sourcepos=\"395:1-395:45\">\n<span id=\"115-自己組織化よりも自己管理\" class=\"fragment\"></span><a href=\"#115-%E8%87%AA%E5%B7%B1%E7%B5%84%E7%B9%94%E5%8C%96%E3%82%88%E3%82%8A%E3%82%82%E8%87%AA%E5%B7%B1%E7%AE%A1%E7%90%86\"><i class=\"fa fa-link\"></i></a>11.5 自己組織化よりも自己管理</h3>\n<p data-sourcepos=\"396:1-396:345\">以前のスクラムガイドでは、開発チームは自己組織化しており、「誰が」「どのように」作業するかを選択できるとしていた。 2020 年版ではスクラムチームの自己管理に重点を置き、「誰が」「どのように」「何の」作業をするかを選択できるようにした。</p>\n<h3 data-sourcepos=\"399:1-399:66\">\n<span id=\"116-スプリントプランニングの-3-つのトピック\" class=\"fragment\"></span><a href=\"#116-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%97%E3%83%A9%E3%83%B3%E3%83%8B%E3%83%B3%E3%82%B0%E3%81%AE-3-%E3%81%A4%E3%81%AE%E3%83%88%E3%83%94%E3%83%83%E3%82%AF\"><i class=\"fa fa-link\"></i></a>11.6 スプリントプランニングの 3 つのトピック</h3>\n<p data-sourcepos=\"401:1-401:268\">これまでのスプリントプランニングのトピックである「What」と「How」に加えて、スクラムガイド 2020 年版では、 3 つ目のトピック「Why」に重点を置いた。これはスプリントゴールで言及されている。</p>\n<h3 data-sourcepos=\"403:1-403:66\">\n<span id=\"117-幅広い読者のために全体的に文章を簡略化\" class=\"fragment\"></span><a href=\"#117-%E5%B9%85%E5%BA%83%E3%81%84%E8%AA%AD%E8%80%85%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AB%E5%85%A8%E4%BD%93%E7%9A%84%E3%81%AB%E6%96%87%E7%AB%A0%E3%82%92%E7%B0%A1%E7%95%A5%E5%8C%96\"><i class=\"fa fa-link\"></i></a>11.7 幅広い読者のために全体的に文章を簡略化</h3>\n<p data-sourcepos=\"405:1-405:252\">スクラムガイド 2020 年版では、冗⻑で複雑な文章とITに関する記述（例：テスト、システム、設計、要求など）を排除している。以上の変更で、スクラムガイドは 13 ページ未満となった。</p>\n","body":"# はじめに\n\nみなさんはスクラムガイド読んだことありますか？\n\n`弊社はスクラム導入している` `アジャイルいいよね！` とかいう会話をしたことが一度でもある人は、\nそんな長くないので原著スクラムガイドを読んでおくのはおすすめです。\n\n[PDF版](https://scrumguides.org/docs/scrumguide/v2020/2020-Scrum-Guide-Japanese.pdf)の文書を、クリエイティブ・コモンズ　[CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/deed.ja)　のライセンス下で再配布しています。内容に変更はありません。\n通勤中に何度も読んでいるときにPDFが大変だったなと思い、Webで見れるようにしたく書いてます。\n([2017年版はこっち](https://qiita.com/ykhirao/items/421dd8681671ada1f55a))\n[英語のweb版はこっち](https://scrumguides.org/scrum-guide.html#scrum-values)\n\n# スクラムガイド\n\n## 1. スクラムガイドの目的\n\n我々は 1990 年代初頭にスクラムを開発した。世界中の人たちがスクラムを理解できるように、スクラムガイドの最初のバージョンを 2010 年に執筆した。それ以来、機能的に小さな更新を加えながらスクラムガイドを進化させてきた。我々は共にスクラムガイドを支援している。\n\n\nスクラムガイドにはスクラムの定義が含まれている。フレームワークの各要素には特定の目的があり、スクラムで実現される全体的な価値や結果に欠かせないものとなっている。スクラムの核となるデザインやアイデアを変更したり、要素を省略したり、スクラムのルールに従わなかったりすると、問題が隠蔽され、スクラムの利点が制限される。場合によっては、スクラムが役に立たなくなることさえある。\n\n\n成⻑を続ける複雑な世界において、スクラムの利用は増加しており、我々はそれを見守っている。スクラムが誕生したソフトウェアプロダクト開発の領域を超えて、本質的に複雑な作業を必要とするさまざまなドメインでスクラムが採用されている。そうした状況を見ると、我々も光栄である。スクラムが広まったことにより、開発者、研究者、アナリスト、科学者、その他の専門家もスクラムを利用するようになった。スクラムでは「開発者」という言葉を使っているが、開発者以外を排除しているのではなく、単純化のために使用しているだけである。スクラムから価値を得ているのであれば、そこにあなたも含まれていると考えてもらいたい。\n\n\nスクラムを利用していると、本文書で説明しているスクラムフレームワークと適合するようなパターン、プロセス、インサイトを発見・適用・考案することもあるだろう。そうしたものについては、スクラムガイドの目的の範囲外である。これらは状況に依存しており、スクラムを利用する状況によって大きく異なるからだ。スクラムフレームワークで利用できる戦術にはさまざまなものが存在するが、それらはスクラムガイド以外のところで説明されている。\n\nKen Schwaber & Jeff Sutherland\n2020 年 11 ⽉\n\n© 2020 Ken Schwaber and Jeff Sutherland\n\n> This publication is offered for license under the Attribution Share-Alike license of Creative Commons,accessible at http://creativecommons.org/licenses/by-sa/4.0/legalcode and also described in summaryform at http://creativecommons.org/licenses/by-sa/4.0/. By utilizing this Scrum Guide, you acknowledgeand agree that you have read and agree to be bound by the terms of the Attribution Share-Alike licenseof Creative Commons.\n\n\n## 2. スクラムの定義\n\nスクラムとは、複雑な問題に対応する適応型のソリューションを通じて、人々、チーム、組織が価値を生み出すための軽量級フレームワークである。\n\n簡単に言えば、スクラムとは次の環境を促進するためにスクラムマスターを必要とするものである。\n\n\n1. プロダクトオーナーは、複雑な問題に対応するための作業をプロダクトバックログに並べる。\n2. スクラムチームは、スプリントで選択した作業を価値のインクリメントに変える。\n3. スクラムチームとステークホルダーは、結果を検査して、次のスプリントに向けて調整する。\n4. 繰り返す。\n\n\nスクラムはシンプルである。まずはそのままの状態で試してほしい。そして、スクラムの哲学、理論、構造が、ゴールを達成し、価値を生み出すかどうかを判断してほしい。スクラムフレームワークは意図的に不完全なものであり、スクラムの理論を実現するために必要な部分のみが定義されている。スクラムは実践する人たちの集合知で構築されている。スクラムのルールは詳細な指示を提供するものではなく、実践者の関係性や相互作用をガイドするものである。\n\nスクラムフレームワークの中で、さまざまなプロセス、技法、手法を使用できる。スクラムは既存のプラクティスを包み込む。あるいは、その存在を不要にする。スクラムによって現在のマネジメント、環境、作業技術の相対的な有効性が可視化され、改善が可能になるのである。\n\n\n## 3. スクラムの理論\n\nスクラムは「経験主義」と「リーン思考」に基づいている。経験主義では、知識は経験から生まれ、意思決定は観察に基づく。リーン思考では、ムダを省き、本質に集中する。\n\n\nスクラムでは、予測可能性を最適化してリスクを制御するために、イテレーティブ（反復的）でインクリメンタル（漸進的）なアプローチを採用している。スクラムを構成するのは、作業に必要なすべてのスキルや専門知識をグループ全体として備える人たちである。また、必要に応じてそうしたスキルを共有または習得できる人たちである。\n\nスクラムでは、検査と適応のための 4 つの正式なイベントを組み合わせている。それらを包含するイベントは「スプリント」と呼ばれる。これらのイベントが機能するのは、経験主義のスクラムの三本柱「透明性」「検査」「適応」を実現しているからである。\n\n\n### 3.1 透明性\n\n創発的なプロセスや作業は、作業を実行する人とその作業を受け取る人に見える必要がある。スクラムにおける重要な意思決定は、 3つの正式な作成物を認知する状態に基づいている。透明性の低い作成物は、価値を低下させ、リスクを高める意思決定につながる可能性がある。\n\n透明性によって検査が可能になる。透明性のない検査は、誤解を招き、ムダなものである。\n\n### 3.2 検査\n\nスクラムの作成物と合意されたゴールに向けた進捗状況は、頻繁かつ熱心に検査されなければならない。これは、潜在的に望ましくない変化や問題を検知するためである。スクラムでは、検査を支援するために、 5 つのイベントでリズムを提供している。\n\n検査によって適応が可能になる。適応のない検査は意味がないとされる。スクラムのイベントは、変化を引き起こすように設計されている。\n\n### 3.3 適応\n\nプロセスのいずれかの側面が許容範囲を逸脱していたり、成果となるプロダクトが受け入れられなかったりしたときは、適用しているプロセスや製造している構成要素を調整する必要がある。それ以上の逸脱を最小限に抑えるため、できるだけ早く調整しなければならない。\n\n関係者に権限が与えられていないときや、自己管理されていないときは、適応が難しくなる。スクラムチームは検査によって新しいことを学んだ瞬間に適応することが期待されている。\n\n## 4. スクラムの価値基準\n\nスクラムが成功するかどうかは、次の 5 つの価値基準を実践できるかどうかにかかっている。\n\n```\n確約（ Commitment ）\n集中（ Focus ）\n公開（ Openness ）\n尊敬（ Respect ）\n勇気（ Courage ）\n```\n\nスクラムチームは、ゴールを達成し、お互いにサポートすることを確約する。スクラムチームは、ゴールに向けて可能な限り進捗できるように、スプリントの作業に集中する。スクラムチームとステークホルダーは、作業や課題を公開する。スクラムチームのメンバーは、お互いに能力のある独立した個人として尊敬し、一緒に働く人たちからも同じように尊敬される。スクラムチームのメンバーは、正しいことをする勇気や困難な問題に取り組む勇気を持つ。\n\nこれらの価値基準は、スクラムチームの作業・行動・振る舞いの方向性を示している。下される意思決定、実行される手順、スクラムの使用方法は、これらの価値基準を減少や弱体化させるものではなく、強化させるものでなければならない。スクラムチームのメンバーは、スクラムのイベントや作成物を用いながら、これらの価値基準を学習および探求する。これらの価値基準がスクラムチームや一緒に働く人たちによって具現化されるとき、経験主義のスクラムの三本柱「透明性」「検査」「適応」に息が吹き込まれ、信頼が構築される。\n\n## 5. スクラムチーム\n\nスクラムの基本単位は、スクラムチームという小さなチームである。スクラムチームは、スクラムマスター 1 人、プロダクトオーナー 1 人、複数人の開発者で構成される。スクラムチーム内には、サブチームや階層は存在しない。これは、一度にひとつの目的（プロダクトゴール）に集中している専門家が集まった単位である。\n\nスクラムチームは機能横断型で、各スプリントで価値を生み出すために必要なすべてのスキルを備えている。また、自己管理型であり、誰が何を、いつ、どのように行うかをスクラムチーム内で決定する。\n\nスクラムチームは、敏捷性を維持するための十分な小ささと、スプリント内で重要な作業を完了するための十分な大きさがあり、通常は 10 人以下である。一般的に小さなチームのほうがコミュニケーションがうまく、生産性が高いことがわかっている。スクラムチームが大きくなりすぎる場合は、同じプロダクトに専念した、複数のまとまりのあるスクラムチームに再編成することを検討する必要がある。したがって、同じプロダクトゴール、プロダクトバックログ、およびプロダクトオーナーを共有する必要がある。\n\nスクラムチームは、ステークホルダーとのコラボレーション、検証、保守、運用、実験、研究開発など、プロダクトに関して必要となり得るすべての活動に責任を持つ。スクラムチームは、自分たちで作業を管理できるように組織によって構成され、その権限が与えられている。持続可能なペースでスプリントの作業を行うことにより、スクラムチームの集中と一貫性が向上する。\n\nスクラムチーム全体が、スプリントごとに価値のある有用なインクリメントを作成する責任を持つ。スクラムはスクラムチームにおいて、開発者、プロダクトオーナー、スクラムマスターという 3 つの明確な責任を定義する。\n\n### 5.1 開発者\n\n開発者はスクラムチームの一員である。各スプリントにおいて、利用可能なインクリメントのあらゆる側面を作成することを確約する。\n\n開発者が必要とする特定のスキルは、幅広く、作業の領域によって異なる。ただし、開発者は常に次の結果に責任を持つ。\n\n\n* スプリントの計画（スプリントバックログ）を作成する。\n* 完成の定義を忠実に守ることにより品質を作り込む。\n* スプリントゴールに向けて毎日計画を適応させる。\n* 専門家としてお互いに責任を持つ。\n\n\n### 5.2 プロダクトオーナー\n\nプロダクトオーナーは、スクラムチームから生み出されるプロダクトの価値を最大化することの結果に責任を持つ。組織・スクラムチーム・個人によって、その方法はさまざまである。\n\nプロダクトオーナーは、効果的なプロダクトバックログ管理にも責任を持つ。たとえば、\n\n\n* プロダクトゴールを策定し、明示的に伝える。\n* プロダクトバックログアイテムを作成し、明確に伝える。\n* プロダクトバックログアイテムを並び替える。\n* プロダクトバックログに透明性があり、見える化され、理解されるようにする。\n\n\n上記の作業は、プロダクトオーナーが行うこともできるが、他の人に委任することもできる。いずれの場合も、最終的な責任はプロダクトオーナーが持つ。\n\nプロダクトオーナーをうまく機能させるには、組織全体でプロダクトオーナーの決定を尊重しなければならない。これらの決定は、プロダクトバックログの内容や並び順、およびスプリントレビューでの検査可能なインクリメントによって見える化される。\n\nプロダクトオーナーは 1 人の人間であり、委員会ではない。プロダクトオーナーは、多くのステークホルダーのニーズをプロダクトバックログで表している場合がある。ステークホルダーがプロダクトバックログを変更したいときは、プロダクトオーナーを説得する。\n\n### 5.3 スクラムマスター\n\nスクラムマスターは、スクラムガイドで定義されたスクラムを確立させることの結果に責任を持つ。スクラムマスターは、スクラムチームと組織において、スクラムの理論とプラクティスを全員に理解してもらえるよう支援することで、その責任を果たす。\n\nスクラムマスターは、スクラムチームの有効性に責任を持つ。スクラムマスターは、スクラムチームがスクラムフレームワーク内でプラクティスを改善できるようにすることで、その責任を果たす。\n\nスクラムマスターは、スクラムチームと、より大きな組織に奉仕する真のリーダーである。\n\n\n#### スクラムマスターは、さまざまな形でスクラムチームを支援する。\n\n\n* 自己管理型で機能横断型のチームメンバーをコーチする。\n* スクラムチームが完成の定義を満たす価値の高いインクリメントの作成に集中できるよう支援する。\n* スクラムチームの進捗を妨げる障害物を排除するように働きかける。\n* すべてのスクラムイベントが開催され、ポジティブで生産的であり、タイムボックスの制限が守られるようにする。\n\n\n#### スクラムマスターは、さまざまな形でプロダクトオーナーを支援する。\n\n* 効果的なプロダクトゴールの定義とプロダクトバックログ管理の方法を探すことを支援する。\n* 明確で簡潔なプロダクトバックログアイテムの必要性についてスクラムチームに理解してもらう。\n* 複雑な環境での経験的なプロダクト計画の策定を支援する。\n* 必要に応じてステークホルダーとのコラボレーションを促進する。\n\n\n#### スクラムマスターは、さまざまな形で組織を支援する。\n\n* 組織へのスクラムの導入を指導・トレーニング・コーチする。\n* 組織においてスクラムの実施方法を計画・助言する。\n* 複雑な作業に対する経験的アプローチを社員やステークホルダーに理解・実施してもらう。\n* ステークホルダーとスクラムチームの間の障壁を取り除く。\n\n\n## 6. スクラムイベント\n\nスプリントは他のすべてのイベントの入れ物である。スクラムにおけるそれぞれのイベントは、スクラムの作成物の検査と適応をするための公式の機会である。これらのイベントは必要な透明性を実現するために明確に設計されている。規定通りにイベントを運用しなければ、検査と適応の機会が失われる。スクラムにおけるイベントは、規則性を生み、スクラムで定義されていない会議の必要性を最小限に抑えるために用いられる。\n\nすべてのイベントは、複雑さを低減するために、同じ時間と場所で開催されることが望ましい。\n\n### 6.1 スプリント\n\nスプリントはスクラムにおける心臓の鼓動であり、スプリントにおいてアイデアが価値に変わる。\n\n一貫性を保つため、スプリントは 1 か月以内の決まった⻑さとする。前のスプリントが終わり次第、新しいスプリントが始まる。\n\nスプリントプランニング、デイリースクラム、スプリントレビュー、スプリントレトロスペクティブを含む、プロダクトゴールを達成するために必要なすべての作業は、スプリント内で行われる。\n\nスプリントでは、\n\n\n* スプリントゴールの達成を危険にさらすような変更はしない。\n* 品質を低下させない。\n* プロダクトバックログを必要に応じてリファインメントする。\n* 学習が進むにつれてスコープが明確化され、プロダクトオーナーとの再交渉が必要になる場合がある。\n\n\nスプリントによって、プロダクトゴールに対する進捗の検査と適応が少なくとも 1 か月ごとに確実になり、予測可能性が高まる。スプリントの期間が⻑すぎると、スプリントゴールが役に立たなくなり、複雑さが増し、リスクが高まる可能性がある。スプリントの期間を短くすれば、より多くの学習サイクルを生み出し、コストや労力のリスクを短い時間枠に収めることができる。スプリントは短いプロジェクトと考えることもできる。\n\n進捗の見通しを立てるために、バーンダウン、バーンアップ、累積フローなど、さまざまなプラクティスが存在する。これらの有用性は証明されているが、経験主義の重要性を置き換えるものではない。複雑な環境下では、何が起きるかわからない。すでに発生したことだけが、将来を見据えた意思決定に使用できる。\n\nスプリントゴールがもはや役に立たなくなった場合、スプリントは中止されることになるだろう。プロダクトオーナーだけがスプリントを中止する権限を持つ。\n\n### 6.2 スプリントプランニング\n\nスプリントプランニングはスプリントの起点であり、ここではスプリントで実行する作業の計画を立てる。結果としてできる計画は、スクラムチーム全体の共同作業によって作成される。プロダクトオーナーは参加者に対して、最も重要なプロダクトバックログアイテムと、それらとプロダクトゴールとの関連性について話し合う準備ができているかを確認する。スクラムチームは、アドバイスをもらうためにチーム以外の人をスプリントプランニングに招待してもよい。\n\n#### スプリントプランニングは次のトピックに対応する：\n\n##### トピック 1 ：このスプリントはなぜ価値があるのか？\n\nプロダクトオーナーは、プロダクトの価値と有用性を今回のスプリントでどのように高めることができるかを提案する。次に、スクラムチーム全体が協力して、そのスプリントになぜ価値があるかをステークホルダーに伝えるスプリントゴールを定義する。スプリントゴールは、スプリントプランニングの終了までに確定する必要がある。\n\n##### トピック 2 ：このスプリントで何ができるのか？\n\n開発者は、プロダクトオーナーとの話し合いを通じて、プロダクトバックログからアイテムを選択し、今回のスプリントに含める。スクラムチームは、このプロセスの中でプロダクトバックログアイテムのリファインメントをする場合がある。それによって、チームの理解と自信が高まる。\n\nスプリント内でどれくらい完了できるかを選択するのは難しいかもしれない。しかしながら、開発者が過去の自分たちのパフォーマンス、今回のキャパシティ、および完成の定義の理解を深めていけば、スプリントの予測に自信が持てるようになる。\n\n##### トピック 3 ：選択した作業をどのように成し遂げるのか？\n\n開発者は、選択したプロダクトバックログアイテムごとに、完成の定義を満たすインクリメントを作成するために必要な作業を計画する。これは多くの場合、プロダクトバックログアイテムを 1 日以内の小さな作業アイテムに分解することによって行われる。これをどのように行うかは、開発者だけの裁量とする。プロダクトバックログアイテムを価値のインクリメントに変換する方法は誰も教えてくれない。\n\nスプリントゴール、スプリント向けに選択したプロダクトバックログアイテム、およびそれらを提供するための計画をまとめてスプリントバックログと呼ぶ。\n\nスプリントが 1 か月の場合、スプリントプランニングのタイムボックスは最大で 8 時間である。スプリントの期間が短ければ、スプリントプランニングの時間も短くすることが多い。\n\n### 6.3 デイリースクラム\n\nデイリースクラムの目的は、計画された今後の作業を調整しながら、スプリントゴールに対する進捗を検査し、必要に応じてスプリントバックログを適応させることである。\n\nデイリースクラムは、スクラムチームの開発者のための 15 分のイベントである。複雑さを低減するために、スプリント期間中は毎日、同じ時間・場所で開催する。プロダクトオーナーまたはスクラムマスターがスプリントバックログのアイテムに積極的に取り組んでいる場合は、開発者として参加する。\n\n開発者は、デイリースクラムがスプリントゴールの進捗に焦点をあて、これからの 1 日の作業の実行可能な計画を作成する限り、必要な構造とやり方を選択できる。これは集中を生み出し、自己管理を促進する。\n\nデイリースクラムは、コミュニケーションを改善し、障害物を特定し、迅速な意思決定を促進する。その結果、他の会議を不要にする。\n\n開発者が計画を調整できるのは、デイリースクラムのときだけではない。スプリントの残りの作業を適応または再計画することについて、より詳細な議論をするために、開発者は一日を通じて頻繁に話し合う。\n\n### 6.4 スプリントレビュー\n\nスプリントレビューの目的は、スプリントの成果を検査し、今後の適応を決定することである。スクラムチームは、主要なステークホルダーに作業の結果を提示し、プロダクトゴールに対する進捗について話し合う。\n\nスプリントレビューにおいて、スクラムチームとステークホルダーは、スプリントで何が達成され、自分たちの環境で何が変化したかについてレビューする。この情報に基づいて、参加者は次にやるべきことに協力して取り組む。新たな機会に見合うようにプロダクトバックログを調整することもある。スプリントレビューはワーキングセッションであり、スクラムチームはスプリントレビューをプレゼンテーションだけに限定しないようにする。\n\nスプリントレビューは、スプリントの最後から 2 番目のイベントであり、スプリントが 1 か月の場合、タイムボックスは最大 4 時間である。スプリントの期間が短ければ、スプリントレビューの時間も短くすることが多い。\n\n### 6.5 スプリントレトロスペクティブ\n\nスプリントレトロスペクティブの目的は、品質と効果を高める方法を計画することである。\n\nスクラムチームは、個人、相互作用、プロセス、ツール、完成の定義に関して、今回のスプリントがどのように進んだかを検査する。多くの場合、検査する要素は作業領域によって異なる。スクラムチームを迷わせた仮説があれば特定し、その真因を探求する。スクラムチームは、スプリント中に何がうまくいったか、どのような問題が発生したか、そしてそれらの問題がどのように解決されたか（または解決されなかったか）について話し合う。\n\nスクラムチームは、自分たちの効果を改善するために最も役立つ変更を特定する。最も影響の大きな改善は、できるだけ早く対処する。次のスプリントのスプリントバックログに追加することもできる。\n\nスプリントレトロスペクティブをもってスプリントは終了する。スプリントが 1 か月の場合、スプリントレトロスペクティブは最大 3 時間である。スプリントの期間が短ければ、スプリントレトロスペクティブの時間も短くすることが多い。\n\n## 7. スクラムの作成物\n\nスクラムの作成物は、作業や価値を表している。これらは重要な情報の透明性を最大化できるように設計されている。作成物を検査する人が、適応するときと同じ基準を持っている。各作成物には、透明性と集中を高める情報を提供する「確約（コミットメント）」が含まれている。これにより進捗を測定できる。\n\n\n* プロダクトバックログのためのプロダクトゴール\n* スプリントバックログのためのスプリントゴール\n* インクリメントのための完成の定義\n\nこれらの確約は、スクラムチームとステークホルダーの経験主義とスクラムの価値基準を強化するために存在する。\n\n\n### 7.1 プロダクトバックログ\n\nプロダクトバックログは、創発的かつ順番に並べられた、プロダクトの改善に必要なものの一覧である。これは、スクラムチームが行う作業の唯一の情報源である。\n\n1 スプリント内でスクラムチームが完成できるプロダクトバックログアイテムは、スプリントプランニングのときには選択の準備ができている。スクラムチームは通常、リファインメントの活動を通じて、選択に必要な透明性を獲得する。プロダクトバックログアイテムがより小さく詳細になるように、分割および定義をする活動である。これは、説明・並び順・サイズなどの詳細を追加するための継続的な活動である。多くの場合、属性は作業領域によって異なる。\n\n作業を行う開発者は、その作業規模の評価に責任を持つ。開発者がトレードオフを理解して選択できるように、プロダクトオーナーが開発者を支援することもできる。\n\n#### 7.1.1 確約（コミットメント）：プロダクトゴール\n\nプロダクトゴールは、プロダクトの将来の状態を表している。それがスクラムチームの計画のターゲットになる。プロダクトゴールはプロダクトバックログに含まれる。プロダクトバックログの残りの部分は、プロダクトゴールを達成する「何か（what）」を定義するものである。\n\n\n> プロダクトとは価値を提供する手段である。プロダクトは、明確な境界、既知のステークホルダー、明確に定義されたユーザーや顧客を持っている。プロダクトは、サービスや物理的な製品である場合もあれば、より抽象的なものの場合もある。\n\n\nプロダクトゴールは、スクラムチームの⻑期的な目標である。次の目標に移る前に、スクラムチームはひとつの目標を達成（または放棄）しなければならない。\n\n### 7.2 スプリントバックログ\n\nスプリントバックログは、スプリントゴール（なぜ）、スプリント向けに選択されたいくつかのプロダクトバックログアイテム（何を）、およびインクリメントを届けるための実行可能な計画（どのように）で構成される。\n\nスプリントバックログは、開発者による、開発者のための計画である。スプリントバックログには、スプリントゴールを達成するために開発者がスプリントで行う作業がリアルタイムに反映される。その結果、より多くのことを学ぶにつれて、スプリントの期間を通して更新される。スプリントバックログはデイリースクラムで進捗を検査できる程度の詳細さが必要である。\n\n#### 7.2.1 確約（コミットメント）：スプリントゴール\n\nスプリントゴールはスプリントの唯一の目的である。スプリントゴールは開発者が確約するものだが、スプリントゴールを達成するために必要となる作業に対しては柔軟性をもたらす。スプリントゴールはまた、一貫性と集中を生み出し、スクラムチームに一致団結した作業を促すものでもある。\n\nスプリントゴールは、スプリントプランニングで作成され、スプリントバックログに追加される。開発者がスプリントで作業するときには、スプリントゴールを念頭に置く。作業が予想と異なることが判明した場合は、スプリントゴールに影響を与えることがないように、プロダクトオーナーと交渉してスプリントバックログのスコープを調整する。\n\n### 7.3 インクリメント\n\nインクリメントは、プロダクトゴールに向けた具体的な踏み石である。インクリメントはこれまでのすべてのインクリメントに追加する。また、すべてのインクリメントが連携して機能することを保証するために、徹底的に検証する必要がある。価値を提供するには、インクリメントを利用可能にしなければならない。\n\nスプリントでは、複数のインクリメントを作成可能である。インクリメントをまとめたものをスプリントレビューで提示する。それによって、経験主義がサポートされる。ただし、スプリント終了前にインクリメントをステークホルダーにデリバリーする可能性もある。スプリントレビューのことを価値をリリースするための関門と見なすべきではない。\n\n完成の定義を満たさない限り、作業をインクリメントの一部と見なすことはできない。\n\n#### 7.3.1 確約（コミットメント）：完成の定義\n\n完成の定義とは、プロダクトの品質基準を満たすインクリメントの状態を示した正式な記述である。\n\nプロダクトバックログアイテムが完成の定義を満たしたときにインクリメントが誕生する。\n\n完成の定義により、作業が完了してインクリメントの一部となったことが全員の共通認識となり、透明性が生み出される。プロダクトバックログアイテムが完成の定義を満たしていない場合、リリースすることはできない。ましてやスプリントレビューで提示することもできない。そうした場合、あとで検討できるようにプロダクトバックログに戻しておく。\n\nインクリメントの完成の定義が組織の標準の一部となっている場合、すべてのスクラムチームは最低限それに従う必要がある。組織の標準になっていない場合、そのスクラムチームはプロダクトに適した完成の定義を作成する必要がある。\n\n開発者は完成の定義に準拠する必要がある。プロダクトに関わるスクラムチームが複数ある場合、共通の完成の定義を作成して、それに準拠する必要がある。\n\n\n## 8. 最後に\n\nスクラムは無料であり、本ガイドで提供されるものである。ここで概要を述べたように、スクラムフレームワークは不変である。スクラムの一部だけを導入することも可能だが、それはスクラムとは言えない。すべてを備えたものがスクラムであり、その他の技法・方法論・プラクティスの入れ物として機能するものである。\n\n### 8.1 謝辞\n\n#### 8.1.1 人々\n\nスクラムに貢献してくれた多くの方々の中でも、最初に尽力してくれた人物の名前を挙げたい。まず、Jeff Sutherlandと一緒に働いたJeff McKennaとJohn Scumniotales。それから、Ken Schwaberと一緒に働いたMike SmithとChris Martin。みんなで一緒に働いたこともあった。その後の数年間は、さらに多くの方々が貢献してくれた。彼らの助けがなければ、スクラムは今日のように洗練されていなかっただろう。\n\n#### 8.1.2 スクラムガイドの歴史\n\nKen SchwaberとJeff Sutherlandが、 1995 年のOOPSLAカンファレンスにおいてスクラムを共同発表した。この発表は、KenとJeffが過去数年間で学んだことを文書化したものであり、はじめて公開された正式なスクラムの定義である。\n\nスクラムガイドは、Jeff SutherlandとKen Schwaberが 30 年以上かけて開発・進化・保守しているスクラムを文書化したものである。その他の情報源では、スクラムフレームワークを補完するパターン、プロセス、インサイトなどが提供されている。これらは、生産性・価値・創造性・結果に対する満足度を高める可能性がある。\n\nスクラムの詳細な歴史については、別のところで説明されている。初期の試行錯誤および証明の場であるIndividual, Inc.、Newspage、Fidelity Investments、IDX（現GE Medical）の各社に感謝したい。\n\n\n## 9. 翻訳について\n\n本ガイドは、上記の開発者による英語バージョンを日本語に翻訳したものである。日本語訳は角征典、荒本実、和田圭介が担当した。\n\n過去の版の翻訳レビューについては、守田憲司さん、高江洲睦さん、永瀬美穂さん、栗秋宏徳さん、川口恭伸さん、角谷信太郎さん、木村卓央さん、原田騎郎さん、吉羽龍太郎さん、むらはしけんいちさん、いろさん、たなべすなおさんに協力いただいた。\n\n翻訳に関する連絡先：角征典（kdmsnr@gmail.com）\n\n## 10. 用語集\n\n**Genera* Terms**  一般用語\nScrum  スクラム\n\n**Theory** 理論\nEmpiricism 経験主義\nTransparency 透明性\nInspection 検査\nAdaptation 適応\n\n**Events** イベント\nSprint スプリント \nSprint Planning スプリントプランニング\nDaily Scrum デイリースクラム\nSprint Review スプリントレビュー\nSprint Retrospective スプリントレトロスペクティブ\n\n**Roles** 役割\nScrum Team スクラムチーム\nScrum Master スクラムマスター\nProduct Owner プロダクトオーナー\nDevelopers 開発者\n\n**Artifacts** 作成物\nProduct Backlog プロダクトバックログ\nSprint Backlog スプリントバックログ\nIncrement インクリメント\n\n**Misc** その他\nDefinition of Done 完成の定義\n\n## 11. スクラムガイド 2017 年版からスクラムガイド 2020 年版への変更点\n\n### 11.1 指示的な部分を削減\nスクラムガイドは時間が経つにつれて少し指示的なものになっていた。 2020 年版では、指示的な表現を削除または緩和して、スクラムを最小限かつ十分なフレームワークに戻すことを目的としている。たとえば、デイリースクラムの質問の削除、PBI（プロダクトバックログアイテム）の属性に関する記述の緩和、スプリントバックログにあるレトロスペクティブのアイテムに関する記述の緩和、スプリントの中止のセクションの削減などを実施した。\n\n### 11.2 ひとつのチームがひとつのプロダクトに集中する\nこれはチーム内で分断が発生し、POと開発チームの関係が「プロキシ」や「我々と彼ら」といった問題につながることを排除するためである。存在するのは、PO、SM、開発者の 3 つの異なる責任を持ち、同じ目的を共有するひとつの「スクラムチーム」だけである。\n\n### 11.3 プロダクトゴールの導入\nスクラムガイド 2020 年版では「プロダクトゴール」を導入した。スクラムチームに大きな価値のある目的に集中してもらうためである。各スプリントでは、プロダクトを全体的なプロダクトゴールに近づける必要がある。\n\n### 11.4 スプリントゴール、完成の定義、プロダクトゴールの居場所\n以前のスクラムガイドでは、明確なアイデンティティーを与えることなく、「スプリントゴール」と「完成の定義」について説明していた。これらは作成物ではなく、作成物に付随するものだった。 2020 年版では「プロダクトゴール」を導入し、これらの位置づけを明確にした。 3つの作成物には、それぞれの「確約（コミットメント）」が含まれる。つまり、プロダクトバックログにはプロダクトゴール、スプリントバックログにはスプリントゴール、インクリメントには完成の定義（カッコをなくした）が含まれる。これらの存在により透明性がもたらされ、作成物の進捗に集中できるようになる。\n\n### 11.5 自己組織化よりも自己管理\n以前のスクラムガイドでは、開発チームは自己組織化しており、「誰が」「どのように」作業するかを選択できるとしていた。 2020 年版ではスクラムチームの自己管理に重点を置き、「誰が」「どのように」「何の」作業をするかを選択できるようにした。\n\n\n### 11.6 スプリントプランニングの 3 つのトピック\n\nこれまでのスプリントプランニングのトピックである「What」と「How」に加えて、スクラムガイド 2020 年版では、 3 つ目のトピック「Why」に重点を置いた。これはスプリントゴールで言及されている。\n\n### 11.7 幅広い読者のために全体的に文章を簡略化\n\nスクラムガイド 2020 年版では、冗⻑で複雑な文章とITに関する記述（例：テスト、システム、設計、要求など）を排除している。以上の変更で、スクラムガイドは 13 ページ未満となった。\n\n\n","coediting":false,"comments_count":1,"created_at":"2021-10-11T11:12:18+09:00","group":null,"id":"ed320eaecb876bfd189e","likes_count":55,"private":false,"reactions_count":0,"stocks_count":67,"tags":[{"name":"アジャイル","versions":[]},{"name":"devops","versions":[]},{"name":"スクラム","versions":[]},{"name":"スクラムマスター","versions":[]},{"name":"スクラムガイド","versions":[]}],"title":"【Web版】スクラムガイド™ 2020","updated_at":"2023-10-20T14:28:47+09:00","url":"https://qiita.com/ykhirao/items/ed320eaecb876bfd189e","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h2>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h2>\n\n<p>みなさんはスクラムガイド読んだことありますか？</p>\n\n<p><code>弊社はスクラム導入している</code> <code>アジャイルいいよね！</code> とかいう会話をしたことが一度でもある人は、<br>\nそんな長くないので原著スクラムガイドを読んでおくのはおすすめです。</p>\n\n<p><a href=\"https://scrumguides.org/docs/scrumguide/v2017/2017-Scrum-Guide-Japanese.pdf\" rel=\"nofollow noopener\" target=\"_blank\">PDF版</a>の文書を、クリエイティブ・コモンズ　<a href=\"https://creativecommons.org/licenses/by-sa/4.0/deed.ja\" rel=\"nofollow noopener\" target=\"_blank\">CC BY-SA 4.0</a>　のライセンス下で再配布しています。内容に変更はありません。<br>\n通勤中に何度も読んでいるときにPDFが大変だったなと思い、Webで見れるようにしたく書いてます。<br>\n(<a href=\"https://qiita.com/ykhirao/items/ed320eaecb876bfd189e\" id=\"reference-1c0d56d8870b27b1c787\">2020年版はこっち</a>)</p>\n\n<hr>\n\n<h1>\n<span id=\"スクラムガイド-2017\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%AC%E3%82%A4%E3%83%89-2017\"><i class=\"fa fa-link\"></i></a>スクラムガイド™ 2017</h1>\n\n<h2>\n<span id=\"1-スクラムガイドの目的\" class=\"fragment\"></span><a href=\"#1-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%AC%E3%82%A4%E3%83%89%E3%81%AE%E7%9B%AE%E7%9A%84\"><i class=\"fa fa-link\"></i></a>1. スクラムガイドの目的</h2>\n\n<p>スクラムは、複雑なプロダクトを開発・提供・保守するためのフレームワークである。本ガイドでは、スクラムの定義を説明する。スクラムの定義に、スクラムの役割・イベント・作成物と、それらをまとめるルールが含まれる。スクラムは、Ken SchwaberとJeff Sutherlandが開発したものであり、スクラムガイドはこの 2 人が執筆・提供する。両者は共にスクラムガイドを支援している。</p>\n\n<h2>\n<span id=\"2-スクラムの定義\" class=\"fragment\"></span><a href=\"#2-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E5%AE%9A%E7%BE%A9\"><i class=\"fa fa-link\"></i></a>2. スクラムの定義</h2>\n\n<p>スクラム（名詞）：複雑で変化の激しい問題に対応するためのフレームワークであり、可能な限り価値の高いプロダクトを生産的かつ創造的に届けるためのものである。</p>\n\n<p>スクラムとは、以下のようなものである。</p>\n\n<ul>\n<li>軽量</li>\n<li>理解が容易</li>\n<li>習得は困難</li>\n</ul>\n\n<p>スクラムは、 1990 年代初頭から複雑なプロダクトの作業管理に使用されてきたプロセスフレームワークである。プロダクトを構築するプロセス、技法、決定的な方法論などではない。さまざまなプロセスや技法を取り入れることのできるフレームワークである。スクラムは、これまでのプロダクト管理や仕事のテクニックの相対的な有効性を明らかにして、プロダクト・チーム・作業環境の継続的な改善を可能にする。</p>\n\n<p>スクラムフレームワークは、スクラムチームとその役割・イベント・作成物・ルールで構成されている。それぞれに目的があり、スクラムの成功や利用に欠かせない。</p>\n\n<p>スクラムのルールは、役割・イベント・作成物をまとめ、それらの関係性や相互作用を統括するものである。スクラムのルールについては、本稿全体で説明する。</p>\n\n<p>スクラムフレームワークを使用する具体的な方法にはさまざまなものがあり、それらについては本稿では触れない。</p>\n\n<h2>\n<span id=\"3-スクラムの用途\" class=\"fragment\"></span><a href=\"#3-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E7%94%A8%E9%80%94\"><i class=\"fa fa-link\"></i></a>3. スクラムの用途</h2>\n\n<p>当初、スクラムはプロダクトの開発と管理のために開発された。 1990 年代初頭から使用され、今では以下のように世界中で広く利用されている。</p>\n\n<ol>\n<li>有望な市場・技術・プロダクトの研究および特定</li>\n<li>プロダクトや追加機能の開発</li>\n<li>プロダクトや追加機能のリリース（ 1 日に何度もリリースされる）</li>\n<li>プロダクトが使用するクラウド（オンライン、セキュア、オンデマンド）やその他運用環境の開発\nと保守</li>\n<li>プロダクトの保守や刷新</li>\n</ol>\n\n<p>スクラムは、ソフトウェア、ハードウェア、組込みソフトウェア、機能同士を接続するネットワーク、自動運転車などの開発から、学校、政府、マーケティング、組織運営マネジメントに至るまで、個人や社会が日常的に使用するあらゆるものに使用されている。</p>\n\n<p>技術・市場・環境の複雑化やそれらの相互作用は急速に高まっており、スクラムがその対応に有効であることは日々証明されている。</p>\n\n<p>スクラムは反復的で漸進的な知識移転において特に有効であることが示されている。今では、プロダクト、サービス、所属する組織の管理に広く利用されている。</p>\n\n<p>スクラムの本質は、少人数制のチームである。個々のチームは非常に柔軟で適応力に優れている。こうした強みは、単一のチームであっても、複数あるいは多数のチームであっても、数千人の成果やプロダクトを開発・リリース・運用・保守するネットワーク型のチームであっても有効である。チームは協力や情報交換をしながら、洗練された開発アーキテクチャやターゲットとするリリース環境を整えていく。</p>\n\n<p>スクラムガイドで「開発」や「開発する」といった言葉が登場するとき、それは上記のような複雑な作業を意味している。</p>\n\n<h2>\n<span id=\"4-スクラムの理論\" class=\"fragment\"></span><a href=\"#4-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E7%90%86%E8%AB%96\"><i class=\"fa fa-link\"></i></a>4. スクラムの理論</h2>\n\n<p>スクラムは、経験的プロセス制御の理論（経験主義）を基本にしている。経験主義とは、実際の経験と既知に基づく判断によって知識が獲得できるというものである。スクラムでは、反復的かつ漸進的な手法を用いて、予測可能性の最適化とリスクの管理を行う。</p>\n\n<p>経験的プロセス制御の実現は、透明性・検査・適応の 3 本柱に支えられている。</p>\n\n<h3>\n<span id=\"41-透明性\" class=\"fragment\"></span><a href=\"#41-%E9%80%8F%E6%98%8E%E6%80%A7\"><i class=\"fa fa-link\"></i></a>4.1 透明性</h3>\n\n<p>経験的プロセスで重要なのは、結果責任を持つ者に対して見える化されていることである。透明性とは、こうしたことが標準化され、見ている人が共通理解を持つことである。</p>\n\n<p>例：</p>\n\n<ul>\n<li>プロセスの用語を参加者全員で共有している。</li>\n<li>作業する人とそのインクリメントを検査する人が「完成」の定義を共有している。</li>\n</ul>\n\n<h3>\n<span id=\"42-検査\" class=\"fragment\"></span><a href=\"#42-%E6%A4%9C%E6%9F%BB\"><i class=\"fa fa-link\"></i></a>4.2 検査</h3>\n\n<p>スクラムのユーザーは、スクラムの作成物やスプリントゴールの進捗を頻繁に検査し、好ましくない変化を検知する。ただし、頻繁にやりすぎて作業の妨げになってはいけない。スキルの高い検査担当者が念入りに行えば、検査は最大の効果をもたらす。</p>\n\n<h3>\n<span id=\"43-適応\" class=\"fragment\"></span><a href=\"#43-%E9%81%A9%E5%BF%9C\"><i class=\"fa fa-link\"></i></a>4.3 適応</h3>\n\n<p>プロセスの不備が許容値を超え、成果となるプロダクトを受け入れられないと検査担当者が判断した場合は、プロセスやその構成要素を調整する必要がある。調整はできるだけ早く行い、これ以上の逸脱を防がなければいけない。</p>\n\n<p>スクラムでは、検査と適応のための 4 つの公式なイベントを規定している。詳しくは、「スクラムイベント」の節で説明する。</p>\n\n<ul>\n<li>スプリントプランニング</li>\n<li>デイリースクラム</li>\n<li>スプリントレビュー</li>\n<li>スプリントレトロスペクティブ</li>\n</ul>\n\n<h2>\n<span id=\"5-スクラムの価値基準\" class=\"fragment\"></span><a href=\"#5-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E4%BE%A1%E5%80%A4%E5%9F%BA%E6%BA%96\"><i class=\"fa fa-link\"></i></a>5. スクラムの価値基準</h2>\n\n<p>スクラムチームが、確約（commitment）・勇気（courage）・集中（focus）・公開（openness）・尊敬（respect）の価値基準を取り入れ、それらを実践するとき、スクラムの柱（透明性・検査・適応）は現実のものとなり、あらゆる人に対する信頼が築かれる。スクラムチームのメンバーは、スクラムの役割・イベント・作成物に触れて仕事を進めるなかで、これらの価値基準を学習・探索する。</p>\n\n<p>スクラムを活用するには、これらの 5 つの価値基準を上手に実践しなければいけない。個人は、スクラムチームのゴールの達成を確約しなければいけない。スクラムチームのメンバーは、正しいことをする勇気を持ち、困難な問題に取り組まなければいけない。全員が、スプリントの作業とスクラムチームのゴールに集中しなければいけない。スクラムチームとステークホルダーは、すべての仕事とそれらを遂行する上での課題を公開することに合意しなければいけない。スクラムチームのメンバーは、お互いを能力のある独立した個人として尊敬しなければいけない。</p>\n\n<h2>\n<span id=\"6-スクラムチーム\" class=\"fragment\"></span><a href=\"#6-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%81%E3%83%BC%E3%83%A0\"><i class=\"fa fa-link\"></i></a>6. スクラムチーム</h2>\n\n<p>スクラムチームは、プロダクトオーナー・開発チーム・スクラムマスターで構成される。スクラムチームは自己組織化されており、機能横断的である。自己組織化チームは、作業を成し遂げるための最善の策を、チーム外からの指示ではなく、自分たちで選択する。機能横断的チームは、チーム以外に頼らずに作業を成し遂げる能力を持っている。スクラムにおけるチームのモデルは、柔軟性・創造性・生産性を最適化するように設計されている。スクラムチームは、前述した用途や複雑な仕事において、非常に高い効果を自ら証明している。スクラムチームは、プロダクトを反復的・漸進的に届ける。これは、フィードバックの機会を最大化するためである。「完成」したプロダクトを漸進的に届けることで、動作するプロダクトで役に立つ可能性のあるバージョンを常に利用可能にする。</p>\n\n<h3>\n<span id=\"61-プロダクトオーナー\" class=\"fragment\"></span><a href=\"#61-%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%82%AA%E3%83%BC%E3%83%8A%E3%83%BC\"><i class=\"fa fa-link\"></i></a>6.1 プロダクトオーナー</h3>\n\n<p>プロダクトオーナーは、開発チームから生み出されるプロダクトの価値の最大化に責任を持つ。組織・スクラムチーム・個人によって、その方法はさまざまである。プロダクトオーナーは、プロダクトバックログの管理に責任を持つ 1 人の人間である。プロダクトバックログの管理には、以下のようなものがある。</p>\n\n<ul>\n<li>プロダクトバックログアイテムを明確に表現する。</li>\n<li>ゴールとミッションを達成できるようにプロダクトバックログアイテムを並び替える。</li>\n<li>開発チームが行う作業の価値を最適化する。</li>\n<li>プロダクトバックログを全員に見える化・透明化・明確化し、スクラムチームが次に行う作業を示す。</li>\n<li>必要とされるレベルでプロダクトバックログアイテムを開発チームに理解してもらう。</li>\n</ul>\n\n<p>上記の作業は、プロダクトオーナーが行う場合もあれば、開発チームが行う場合もある。いずれの場合も、最終的な責任はプロダクトオーナーが持つ。</p>\n\n<p>プロダクトオーナーは 1 人の人間であり、委員会ではない。委員会の要求をプロダクトバックログに反映することもあるだろうが、プロダクトバックログアイテムの優先順位の変更については、プロダクトオーナーと相談しなければいけない。</p>\n\n<p>プロダクトオーナーをうまく機能させるには、組織全体でプロダクトオーナーの決定を尊重しなければいけない。プロダクトオーナーの決定は、プロダクトバックログの内容や並び順という形で見える化されている。異なる要求の作業を開発チームに強制することは誰にもできない。</p>\n\n<h3>\n<span id=\"62-開発チーム\" class=\"fragment\"></span><a href=\"#62-%E9%96%8B%E7%99%BA%E3%83%81%E3%83%BC%E3%83%A0\"><i class=\"fa fa-link\"></i></a>6.2 開発チーム</h3>\n\n<p>開発チームは、各スプリントの終了時にリリース判断可能な「完成」したプロダクトインクリメントを届けることのできる専門家で構成されている。「完成」したインクリメントは、スプリントレビューに必要である。インクリメントを作成できるのは、開発チームのメンバーだけである。</p>\n\n<p>開発チームは、自分たちの作業を構成・管理するために、組織から体制と権限を与えられている。その相乗効果によって、開発チーム全体の効率と効果が最適化される。</p>\n\n<p>開発チームには、以下のような特徴がある。</p>\n\n<ul>\n<li>自己組織化されている。プロダクトバックログをリリース判断可能な機能のインクリメントに変える方法は、誰も（スクラムマスターでさえも）教えてくれない。</li>\n<li>機能横断的である。インクリメントを作成するスキルをチームとしてすべて備えている。</li>\n<li>ある人にしかできない作業があったとしても、スクラムにおける開発チームのメンバーに肩書きはない。</li>\n<li>テスティング、アーキテクチャ、運用、ビジネス分析のような専門領域であっても、スクラムは開発チームのサブチームを認めていない。</li>\n<li>開発チームのメンバーに専門能力や専門分野があったとしても、最終的な責任は開発チーム全体が持つ。</li>\n</ul>\n\n<h4>\n<span id=\"621-開発チームの規模\" class=\"fragment\"></span><a href=\"#621-%E9%96%8B%E7%99%BA%E3%83%81%E3%83%BC%E3%83%A0%E3%81%AE%E8%A6%8F%E6%A8%A1\"><i class=\"fa fa-link\"></i></a>6.2.1 開発チームの規模</h4>\n\n<p>開発チームに最適な人数は、小回りが利く程度に少なく、 1 つのスプリントで重要な作業が成し遂げられる程度に多い人数である。開発チームのメンバーが 3 人未満の場合は、相互作用が少なく、生産性の向上につながらない。また、開発チームの規模が小さいと、スキル不足が原因でリリース判断可能なインクリメントを届けられない可能性もある。メンバーが 9 人を超えた場合は、調整の機会が多くなってしまう。また、チームの規模が大きいと経験的プロセスが複雑になり、有益ではなくなる。スプリントバックログの作業に携わらないのであれば、プロダクトオーナーとスクラムマスターはこの人数に含まない。</p>\n\n<h3>\n<span id=\"63-スクラムマスター\" class=\"fragment\"></span><a href=\"#63-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC\"><i class=\"fa fa-link\"></i></a>6.3 スクラムマスター</h3>\n\n<p>スクラムマスターは、スクラムガイドで定義されたスクラムの促進と支援に責任を持つ。スクラムマスターは、スクラムの理論・プラクティス・ルール・価値基準を全員に理解してもらえるように支援することで、その責任を果たす。</p>\n\n<p>スクラムマスターは、スクラムチームのサーバントリーダーである（訳注：メンバーが成果を上げるために支援や奉仕をするリーダーのこと）。 スクラムマスターは、スクラムチームとやり取りをするときに役に立つこと／立たないことをスクラムチームの外部の人たちに理解してもらう。スクラムマスターは、こうしたやり取りに変化をもたらすことで、スクラムチームの作る価値を最大化する。</p>\n\n<h4>\n<span id=\"631-スクラムマスターはプロダクトオーナーを支援する\" class=\"fragment\"></span><a href=\"#631-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E3%81%AF%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%82%AA%E3%83%BC%E3%83%8A%E3%83%BC%E3%82%92%E6%94%AF%E6%8F%B4%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>6.3.1 スクラムマスターはプロダクトオーナーを支援する</h4>\n\n<p>スクラムマスターは、さまざまな形でプロダクトオーナーを支援する。</p>\n\n<ul>\n<li>スクラムチームの全員がゴール、スコープ、プロダクトのドメインを可能な限り理解できるようにする。</li>\n<li>効果的なプロダクトバックログの管理方法を探す。</li>\n<li>明確で簡潔なプロダクトバックログアイテムの必要性についてスクラムチームに理解してもらう。</li>\n<li>経験主義におけるプロダクトプランニングについて理解する。</li>\n<li>価値を最大化するためのプロダクトバックログの調整方法をプロダクトオーナーに把握してもらう。</li>\n<li>アジャイルを理解・実践している。</li>\n<li>必要に応じてスクラムイベントをファシリテートする。</li>\n</ul>\n\n<h4>\n<span id=\"632-スクラムマスターは開発チームを支援する\" class=\"fragment\"></span><a href=\"#632-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E3%81%AF%E9%96%8B%E7%99%BA%E3%83%81%E3%83%BC%E3%83%A0%E3%82%92%E6%94%AF%E6%8F%B4%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>6.3.2 スクラムマスターは開発チームを支援する</h4>\n\n<p>スクラムマスターは、さまざまな形で開発チームを支援する。</p>\n\n<ul>\n<li>自己組織化・機能横断的な開発チームをコーチする。</li>\n<li>開発チームが価値の高いプロダクトを作れるように支援する。</li>\n<li>開発チームの進捗を妨げるものを排除する。</li>\n<li>必要に応じてスクラムイベントをファシリテートする。</li>\n<li>スクラムがまだ完全に適用・理解されていない組織環境で、開発チームをコーチする。</li>\n</ul>\n\n<h4>\n<span id=\"633-スクラムマスターは組織を支援する\" class=\"fragment\"></span><a href=\"#633-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E3%81%AF%E7%B5%84%E7%B9%94%E3%82%92%E6%94%AF%E6%8F%B4%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>6.3.3 スクラムマスターは組織を支援する</h4>\n\n<p>スクラムマスターは、さまざまな形で組織を支援する。</p>\n\n<ul>\n<li>組織へのスクラムの導入を指導・コーチする。</li>\n<li>組織へのスクラムの導入方法を計画する。</li>\n<li>スクラムや経験的プロダクト開発を社員やステークホルダーに理解・実施してもらう。</li>\n<li>スクラムチームの生産性を高めるような変化を促す。</li>\n<li>他のスクラムマスターと一緒に組織におけるスクラム導入の効果を高める。</li>\n</ul>\n\n<h2>\n<span id=\"7-スクラムイベント\" class=\"fragment\"></span><a href=\"#7-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88\"><i class=\"fa fa-link\"></i></a>7. スクラムイベント</h2>\n\n<p>スクラムで規定されたイベントは規則性を作り出し、スクラムで定義されていないミーティングの必要性を最小化する。すべてのイベントは、時間に上限のあるタイムボックス化されたイベントである。スプリントを開始すると、その期間は固定され、増減することはできない。スプリント以外のイベントについては、目的が達成されたときに終了することもある。これは、プロセスでムダなことをせずに、必要な分だけ時間を使うためである。</p>\n\n<p>スプリント以外のスクラムイベントは、何かを検査・適応するための公式な機会である（スプリントはその他のイベントの入れ物である）。これらのイベントは、非常に重要な透明性と検査の両方が実現できるように設計されている。これらのイベントがなければ、透明性は低下し、検査・適応の多くの機会を失う。</p>\n\n<h3>\n<span id=\"71-スプリント\" class=\"fragment\"></span><a href=\"#71-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88\"><i class=\"fa fa-link\"></i></a>7.1 スプリント</h3>\n\n<p>スクラムの中心はスプリントである。これは、「完成」した、利用可能な、リリース判断可能なプロダクトインクリメントを作るための、 1 か月以下のタイムボックスである。開発中はスプリントの長さは常に一定である。スプリントが終了すると、すぐに新しいスプリントが開始される。</p>\n\n<p>スプリントは、スプリントプランニング・デイリースクラム・開発作業・スプリントレビュー・スプリントレトロスペクティブで構成される。</p>\n\n<p>スプリントでは、</p>\n\n<ul>\n<li>スプリントゴールに悪影響を及ぼすような変更を加えない。</li>\n<li>品質目標を下げない。</li>\n<li>学習が進むにつれてスコープが明確化され、プロダクトオーナーと開発チームの交渉が必要になる可能性がある。</li>\n</ul>\n\n<p>スプリントは 1 か月以内のプロジェクトと考えることができる。プロジェクトと同様に、スプリントは何かを成し遂げるために使うものである。スプリントには、開発対象のゴール、開発のための設計や柔軟な計画、実際の作業、成果となるプロダクトインクリメントが含まれる。</p>\n\n<p>スプリントの期間は 1 か月以内に制限されている。スプリントが長すぎると、開発対象の定義が変更されたり、複雑になったり、リスクが増大したりする可能性がある。ゴールに対する進捗を少なくとも 1 か月ごとに検査・適応することで、予測可能性が高まるのである。また、リスクも 1 か月分のコストに収まるようになる。</p>\n\n<h4>\n<span id=\"711-スプリントの中止\" class=\"fragment\"></span><a href=\"#711-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%81%AE%E4%B8%AD%E6%AD%A2\"><i class=\"fa fa-link\"></i></a>7.1.1 スプリントの中止</h4>\n\n<p>スプリントはタイムボックスの終了前に中止できる。スプリントを中止する権限があるのは、プロダクトオーナーだけである。このときに、ステークホルダー・開発チーム・スクラムマスターの意見を参考にすることもできる。</p>\n\n<p>スプリントゴールが古くなった場合は、スプリントを中止することになるだろう。会社の方向性や市場・技術の状況が変化すると、スプリントゴールは古くなってしまう。状況を考慮して意味がなくなったと思えば、スプリントを中止すべきである。ただし、スプリントの期間は短いので、中止したからといって影響があることはほとんどない。</p>\n\n<p>スプリントを中止した場合は、プロダクトバックログの「完成」したアイテムをレビューする。部分的にリリース判断可能なものについては、通常はプロダクトオーナーが受け入れる。未完成のプロダクトバックログアイテムは、再見積りをしてからプロダクトバックログに戻す。そこにかかった作業の価値は急速に低下するため、頻繁に再見積りが必要になる（訳注：作りかけの機能や設計については、時間が経つと状況が変わってしまうため、その価値が失われてしまうことが多い。そうすると、最初から見積りをやり直す必要が出てくる）。</p>\n\n<p>スプリントを中止すると、新しいスプリントのスプリントプランニングのために全員が再度集まる必要があり、リソースを消費してしまう。また、スプリントの中止がチームのトラウマになってしまうこともある。とはいえ、スプリントの中止はめったに発生しない。</p>\n\n<h3>\n<span id=\"72-スプリントプランニング\" class=\"fragment\"></span><a href=\"#72-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%97%E3%83%A9%E3%83%B3%E3%83%8B%E3%83%B3%E3%82%B0\"><i class=\"fa fa-link\"></i></a>7.2 スプリントプランニング</h3>\n\n<p>スプリントの作業はスプリントプランニングで計画する。これはスクラムチームの共同作業である。</p>\n\n<p>スプリントが 1 か月の場合、スプリントプランニングのタイムボックスは最大で 8 時間である。スプリントの期間が短ければ、スプリントプランニングの時間も短くすることが多い。スクラムマスターは、参加者に目的を理解してもらうようにする。スクラムマスターは、スクラムチームにタイムボックスを守るように伝える。</p>\n\n<p>スプリントプランニングでは、以下の質問に答える。</p>\n\n<ul>\n<li>スプリントの成果であるインクリメントで何を届けることができるか？</li>\n<li>インクリメントを届けるために必要な作業をどのように成し遂げるか？</li>\n</ul>\n\n<h5>\n<span id=\"トピック-1-スプリントで何ができるか\" class=\"fragment\"></span><a href=\"#%E3%83%88%E3%83%94%E3%83%83%E3%82%AF-1-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%81%A7%E4%BD%95%E3%81%8C%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%8B\"><i class=\"fa fa-link\"></i></a>トピック 1 ：スプリントで何ができるか？</h5>\n\n<p>開発チームは、スプリントで開発できそうな機能を予想する。プロダクトオーナーは、スプリントで達成すべき目的と、完成すればスプリントゴールを達成できそうなプロダクトバックログアイテムについて検討する。スクラムチームはみんなで協力して、スプリントの作業を理解する。</p>\n\n<p>スプリントプランニングのインプットは、プロダクトバックログ、最新のプロダクトインクリメント、開発チームが予想するキャパシティと過去の実績である。プロダクトバックログから選択するアイテム数については、開発チームが責任を持つ。スプリントで何を達成するかを評価できるのは、開発チームだけである。</p>\n\n<p>スプリントプランニングでは、スクラムチームがスプリントゴールを設定する。スプリントゴールとは、プロダクトバックログを実装することで実現するスプリントの目的であり、開発チームがインクリメントを開発する指針となるものである。</p>\n\n<h5>\n<span id=\"トピック-2-選択した作業をどのように成し遂げるか\" class=\"fragment\"></span><a href=\"#%E3%83%88%E3%83%94%E3%83%83%E3%82%AF-2-%E9%81%B8%E6%8A%9E%E3%81%97%E3%81%9F%E4%BD%9C%E6%A5%AD%E3%82%92%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E6%88%90%E3%81%97%E9%81%82%E3%81%92%E3%82%8B%E3%81%8B\"><i class=\"fa fa-link\"></i></a>トピック 2 ：選択した作業をどのように成し遂げるか？</h5>\n\n<p>プロダクトバックログアイテムを選択し、スプリントゴールを設定したら、開発チームはスプリントでそれらの機能を「完成」したプロダクトインクリメントにする方法を決める。選択したプロダクトバックログアイテムとそれらを届ける計画を合わせて、スプリントバックログと呼ぶ。</p>\n\n<p>開発チームは、プロダクトバックログを動作するプロダクトインクリメントに変えるために必要なシステムと作業の設計から着手する。作業の規模や工数はバラバラであっても構わないが、開発チームが次のスプリントで実現できそうなものを計画する。開発チームがスプリントの最初の数日間で行う作業については、スプリントプランニングで作業に分解する。作業の単位は 1 日以下にすることが多い。開発チームは自己組織化して、スプリントバックログの作業を引き受ける。これはスプリントプランニングだけでなく、必要であればスプリントでも行う。</p>\n\n<p>プロダクトオーナーは、選択したプロダクトバックログアイテムの明確化やトレードオフを支援する。開発チームの作業が多すぎたり少なすぎたりした場合は、選択されたプロダクトバックログアイテムについて、開発チームとプロダクトオーナーで話し合う。あるいは、技術やドメインに詳しい人を招待してアドバイスを求めることもできる。</p>\n\n<p>スプリントプランニングが終了するまでに、開発チームは自己組織化したチームとして、どのようにスプリントゴールを達成し、どのように期待されるインクリメントを作成するかをプロダクトオーナーとスクラムマスターに説明できなければいけない。</p>\n\n<h4>\n<span id=\"721-スプリントゴール\" class=\"fragment\"></span><a href=\"#721-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%82%B4%E3%83%BC%E3%83%AB\"><i class=\"fa fa-link\"></i></a>7.2.1 スプリントゴール</h4>\n\n<p>スプリントゴールはスプリントの目的の集合であり、プロダクトバックログの実装によって実現するものである。これは開発チームがインクリメントを構築する理由を知る指針となる。スプリントゴールはスプリントプランニングで作成する。スプリントゴールを設定することで、開発チームがスプリント終了までに実装する機能を柔軟にできる。選択したプロダクトバックログアイテムは、一貫性のある機能として届けられる。それがスプリントゴールになることもある。スプリントゴールがあれば、開発チームは一致団結して作業ができる。</p>\n\n<p>開発チームが作業するときには、スプリントゴールを念頭に置く。スプリントゴールを達成するために、機能や技術を実装する。開発チームの予想と異なることが判明した場合は、プロダクトオーナーと交渉してスプリントバックログのスコープを調整する。</p>\n\n<h3>\n<span id=\"73-デイリースクラム\" class=\"fragment\"></span><a href=\"#73-%E3%83%87%E3%82%A4%E3%83%AA%E3%83%BC%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0\"><i class=\"fa fa-link\"></i></a>7.3 デイリースクラム</h3>\n\n<p>デイリースクラムとは、開発チームのための 15 分間のタイムボックスのイベントである。スプリントでは、毎日デイリースクラムを開催する。開発チームは、次の 24 時間の作業を計画する。前回のデイリースクラムから行なった作業の検査と今後のスプリント作業の予想をすることで、チームのコラボレーションやパフォーマンスを最適化するのである。デイリースクラムは毎日、同じ時間・場所で開催し、複雑にならないようにする。</p>\n\n<p>開発チームはデイリースクラムを使って、スプリントゴールとスプリントバックログの進捗を検査する。デイリースクラムは、開発チームがスプリントゴールを達成する可能性を最適化する。開発チームは、自己組織化チームとしてスプリントゴールを達成し、スプリント終了までに期待されるインクリメントを作成できるかを毎日把握しなければいけない。</p>\n\n<p>デイリースクラムの構成は、開発チームが設定する。スプリントゴールを目指している限り、他のやり方で行なっても構わない。質問を使うチームもあれば、議論ベースで進めるチームもある。たとえば、以下のような例を使用するといいだろう。</p>\n\n<ul>\n<li>開発チームがスプリントゴールを達成するために、私が昨日やったことは何か？</li>\n<li>開発チームがスプリントゴールを達成するために、私が今日やることは何か？</li>\n<li>私や開発チームがスプリントゴールを達成する上で、障害となる物を目撃したか？</li>\n</ul>\n\n<p>開発チームやチームメンバーは、デイリースクラムの終了直後に集まり、スプリントの残作業について、詳細な議論・適応・再計画を行うこともある。</p>\n\n<p>スクラムマスターは、開発チームにデイリースクラムを開催してもらうようにする。ただし、デイリースクラムを開催する責任は開発チームにある。スクラムマスターは、デイリースクラムを 15 分間のタイムボックスで終わらせるように開発チームに伝える。</p>\n\n<p>デイリースクラムは開発チームのためのミーティングである。それ以外の人たちが参加する場合、開発チームの邪魔にならないようにスクラムマスターが配慮する。</p>\n\n<p>デイリースクラムは、コミュニケーションを改善し、その他のミーティングを取り除き、開発の障害物を特定・排除し、迅速な意思決定を強調・助長して、開発チームのプロジェクト知識のレベルを向上させるものである。これは、検査と適応の重要なイベントである。</p>\n\n<h3>\n<span id=\"74-スプリントレビュー\" class=\"fragment\"></span><a href=\"#74-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC\"><i class=\"fa fa-link\"></i></a>7.4 スプリントレビュー</h3>\n\n<p>スプリントレビューとは、スプリントの終了時にインクリメントの検査と、必要であればプロダクトバックログの適応を行うものである。スプリントレビューでは、スクラムチームとステークホルダーがスプリントの成果をレビューする。スプリントの成果とプロダクトバックログの変更を参考にして、価値を最適化するために次に何ができるかを参加者全員で話し合う。これはステータスミーティングではなく、略式のミーティングである。インクリメントを提示することで、フィードバックや協力を引き出すことを目的とする。</p>\n\n<p>スプリントが 1 か月の場合、スプリントレビューは最大 4 時間である。スプリントの期間が短ければ、スプリントレビューの時間も短くすることが多い。スクラムマスターはスプリントレビューが確実に開催されるようにして、参加者には目的を理解してもらうようにする。スクラムマスターは関係者全員にタイムボックスを守るように伝える。</p>\n\n<p>スプリントレビューには、以下の要素が含まれる。</p>\n\n<ul>\n<li>参加者は、スクラムチームと、プロダクトオーナーが招待した重要なステークホルダーである。</li>\n<li>プロダクトオーナーは、プロダクトバックログアイテムの「完成」したものと「完成」していないものについて説明する。</li>\n<li>開発チームは、スプリントでうまくいったこと、直面した問題点、それをどのように解決したかを議論する。</li>\n<li>開発チームは、「完成」したものをデモして、インクリメントに対する質問に答える。「完成」の定義にプロダクト機能のリリースが含まれていれば、それらを表示してレビューしてもらう。</li>\n<li>プロダクトオーナーは、現在のプロダクトバックログの状況を説明する。（必要であれば）現在の進捗から、可能性のある目標とデリバリーの日程を予測する。</li>\n<li>グループ全体で次に何をするべきかを議論し、次のスプリントプランニングに価値のあるインプットを提供できるようにする。</li>\n<li>市場やプロダクトの利用状況によって、次に行うべき最も価値の高いことが変更される可能性をレビューする。</li>\n<li>次にリリースするプロダクトの機能や性能のスケジュール・予算・可能性・市場をレビューする。</li>\n</ul>\n\n<p>スプリントレビューの成果は、次のスプリントで使用するプロダクトバックログアイテムが含まれた改訂版のプロダクトバックログである。新たな機会に見合うように、プロダクトバックログを全体的に調整することもある。</p>\n\n<h3>\n<span id=\"75-スプリントレトロスペクティブ\" class=\"fragment\"></span><a href=\"#75-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%AC%E3%83%88%E3%83%AD%E3%82%B9%E3%83%9A%E3%82%AF%E3%83%86%E3%82%A3%E3%83%96\"><i class=\"fa fa-link\"></i></a>7.5 スプリントレトロスペクティブ</h3>\n\n<p>スプリントレトロスペクティブは、スクラムチームの検査と次のスプリントの改善計画を作成する機会である。</p>\n\n<p>スプリントレトロスペクティブは、スプリントレビューが終わって、次のスプリントプランニングが始まる前に行う。スプリントが 1 か月の場合、スプリントレトロスペクティブは最大 3 時間である。スプリントの期間が短ければ、スプリントレトロスペクティブの時間も短くすることが多い。スクラムマスターは、このイベントが確実に開催されるようにする。また、参加者に目的を理解してもらうようにする。</p>\n\n<p>スクラムマスターは、このミーティングがポジティブで生産的になるようにする。スクラムマスターは、全員にタイムボックスを守るように伝える。スクラムマスターは、スクラムのプロセスを説明するために、チームメンバーとして参加する。</p>\n\n<p>スプリントレトロスペクティブには、以下の目的がある。</p>\n\n<ul>\n<li>人・関係・プロセス・ツールの観点から今回のスプリントを検査する。</li>\n<li>うまくいった項目や今後の改善が必要な項目を特定・整理する。</li>\n<li>スクラムチームの作業の改善実施計画を作成する。</li>\n</ul>\n\n<p>スクラムマスターは、次のスプリントが効果的で楽しいものになるように、スクラムチームにスクラムプロセスフレームワークの範囲内で開発プロセスやプラクティスを改善してもらう。スプリントレトロスペクティブにおいてスクラムチームは、作業プロセスの改善や「完成」の定義を調整することにより、プロダクトの品質を向上させる方法を計画する。ただし、プロダクトや組織の基準と衝突しないように適切に行う。</p>\n\n<p>スプリントレトロスペクティブが終わるまでに、スクラムチームは次のスプリントで実施する改善策を特定しなければいけない。これらの改善策の実施は、スクラムチーム自体の検査に対する適応になる。改善はいつでも実施可能だが、スプリントレトロスペクティブは検査と適応に集中するための公式な機会である。</p>\n\n<h2>\n<span id=\"8-スクラムの作成物\" class=\"fragment\"></span><a href=\"#8-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E4%BD%9C%E6%88%90%E7%89%A9\"><i class=\"fa fa-link\"></i></a>8. スクラムの作成物</h2>\n\n<p>スクラムの作成物は、作業や価値を表したものであり、透明性や検査・適応の機会を提供するものである。スクラムで定義された作成物は、全員が共通理解を得るために必要な情報の透明性を最大化するように設計されている。</p>\n\n<h3>\n<span id=\"81-プロダクトバックログ\" class=\"fragment\"></span><a href=\"#81-%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%83%90%E3%83%83%E3%82%AF%E3%83%AD%E3%82%B0\"><i class=\"fa fa-link\"></i></a>8.1 プロダクトバックログ</h3>\n\n<p>プロダクトバックログは、プロダクトに必要だと把握しているものをすべて順番に並べた一覧である。プロダクトに対する変更要求の唯一の情報源である。プロダクトオーナーは、プロダクトバックログの内容・可用性・並び順に責任を持つ。</p>\n\n<p>プロダクトバックログは決して完成しない。構築の初期段階には、明確でよく理解できている要求が並べられている。その後、プロダクトや使用環境に合わせて進化する。プロダクトバックログは動的であり、適切で競争力のある有用なプロダクトに必要なものを求めて絶えず変化する。プロダクトが存在する限り、プロダクトバックログも存在し続けるのである。</p>\n\n<p>プロダクトバックログは、今後のリリースで実装するプロダクトのフィーチャ・機能・要求・要望・修正をすべて一覧にしている。プロダクトバックログアイテムには、詳細・並び順・見積り・価値の属性がある。プロダクトバックログアイテムには、「完成」時にそれを確認するためのテスト記述も含まれていることが多い。</p>\n\n<p>プロダクトが使用されて価値が増加し、市場からフィードバックを得られると、プロダクトバックログは巨大で包括的な一覧になる。要求の変更は止まらない。プロダクトバックログは生きた作成物である。ビジネス要求、市場の状態、技術の変化などが、プロダクトバックログの変化につながる。</p>\n\n<p>複数のスクラムチームが同じプロダクトの作業をすることがよくある。そうした場合、プロダクトの作業は 1 つのプロダクトバックログに記述する。また、アイテムを分類するための属性をプロダクトバックログに追加することもある。</p>\n\n<p>プロダクトバックログに含まれるアイテムに対して、詳細の追加、見積り、並び替えをすることを、プロダクトバックログのリファインメントと呼ぶ。これはプロダクトオーナーと開発チームが協力して行う継続的なプロセスである。プロダクトバックログのリファインメントによって、アイテムのレビューと改訂が行われる。いつどのようにリファインメントをするかは、スクラムチームが決定する。リファインメントは、開発チームの作業の10%以下にすることが多い。ただし、プロダクトバックログアイテムはプロダクトオーナーの判断によって、いつでも更新できる。</p>\n\n<p>並び順が上のプロダクトバックログアイテムほど明確で詳細である。明確で詳細であれば、見積りも正確になる。並び順が下のアイテムほど不正確で詳細ではない。今後のスプリントで開発チームが従事するプロダクトバックログアイテムは、スプリントのタイムボックスで「完成」できるようにうまく細分化する。開発チームが 1 つのスプリントで「完成」できそうなプロダクトバックログアイテムは、スプリントプランニングで選択できる「準備完了（Ready）」の状態になったと見なすことができる。プロダクトバックログアイテムは、上記のリファインメントによって透明性を獲得することが多い。</p>\n\n<p>開発チームは見積りに対して責任を持つ。プロダクトオーナーがトレードオフの理解や選択などについて開発チームに影響を及ぼすこともあるが、最終的な見積りは実際に作業をする人が行う。</p>\n\n<h4>\n<span id=\"811-ゴールへの進捗を追跡する\" class=\"fragment\"></span><a href=\"#811-%E3%82%B4%E3%83%BC%E3%83%AB%E3%81%B8%E3%81%AE%E9%80%B2%E6%8D%97%E3%82%92%E8%BF%BD%E8%B7%A1%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>8.1.1 ゴールへの進捗を追跡する</h4>\n\n<p>いずれかの時点で、ゴールに対する残作業を合計する。プロダクトオーナーは、少なくともスプリントレビューにおいて、この残作業の合計を追跡する。プロダクトオーナーは、前回のスプリントレビュー時点の残作業の合計と比較して、希望する期日までにゴールに到達できるかどうかを評価する。この情報はステークホルダー全員に明らかにする。</p>\n\n<p>進捗の見通しを立てるために、バーンダウン、バーンアップ、累積フローなどのさまざまなプラクティスが使用されている。これらは有用ではあるが、経験主義の重要性を置き換えるものではない。複雑な環境下では、何が起きるかわからない。すでに発生したことだけが、これから先の意思決定に使用できる。</p>\n\n<h3>\n<span id=\"82-スプリントバックログ\" class=\"fragment\"></span><a href=\"#82-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%90%E3%83%83%E3%82%AF%E3%83%AD%E3%82%B0\"><i class=\"fa fa-link\"></i></a>8.2 スプリントバックログ</h3>\n\n<p>スプリントバックログは、スプリントで選択したプロダクトバックログアイテムと、それらのアイテムをプロダクトインクリメントにして届け、スプリントゴールを達成するための計画を合わせたものである。スプリントバックログは、次のインクリメントに含まれる機能と、その機能を「完成」したインクリメントにして届けるために必要な作業について、開発チームが予想したものである。</p>\n\n<p>スプリントバックログによって、開発チームがスプリントゴールを達成するのに必要な作業がすべて見える化されている。継続的改善を確実なものとするために、前回のレトロスペクティブで特定した優先順位の高いプロセスの改善策を少なくとも 1 つは含めておく。</p>\n\n<p>スプリントバックログは十分に詳細であり、今後も変更される可能性のある計画である。それはデイリースクラムで理解できる程度のものである。開発チームは、スプリントでスプリントバックログを修正する。スプリントバックログはスプリントで創発される。こうした創発が発生するのは、開発チームが計画を実行するなかで、スプリントゴールの達成に必要な作業を学習するからである。</p>\n\n<p>新しい作業が必要になれば、開発チームがスプリントバックログに作業を追加する。作業が完了すれば、残作業の見積りを更新する。計画の要素が不要になれば削除する。スプリントでスプリントバックログを変更できるのは開発チームだけである。スプリントバックログには、開発チームがスプリントで行う作業がリアルタイムに反映される。スプリントバックログは開発チームのものである。</p>\n\n<h4>\n<span id=\"821-スプリントの進捗を追跡する\" class=\"fragment\"></span><a href=\"#821-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%81%AE%E9%80%B2%E6%8D%97%E3%82%92%E8%BF%BD%E8%B7%A1%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>8.2.1 スプリントの進捗を追跡する</h4>\n\n<p>スプリントのいずれかの時点で、スプリントバックログの残作業を合計する。開発チームは、少なくともデイリースクラムにおいて、この残作業の合計を追跡し、スプリントゴールの達成に見通しを立てる。開発チームはスプリントで残作業を追跡し、自分たちの進捗を管理する。</p>\n\n<h3>\n<span id=\"83-インクリメント\" class=\"fragment\"></span><a href=\"#83-%E3%82%A4%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88\"><i class=\"fa fa-link\"></i></a>8.3 インクリメント</h3>\n\n<p>インクリメントとは、これまでのインクリメントの価値と今回のスプリントで完成したプロダクトバックログアイテムを合わせたものである。スプリントの終了時には、新しいインクリメントが「完成」していなければいけない。つまり、インクリメントが動作する状態であり、スクラムチームの「完成」の定義に合っていることを意味する。インクリメントは、完成していて、検査可能なものであり、スプリントの終了時の経験主義を支援するものである。インクリメントは、ビジョンやゴールに向かうステップである。プロダクトオーナーがリリースを決定する／しないにかかわらず、インクリメントは常に動作する状態にしておかなければいけない。</p>\n\n<h2>\n<span id=\"9-作成物の透明性\" class=\"fragment\"></span><a href=\"#9-%E4%BD%9C%E6%88%90%E7%89%A9%E3%81%AE%E9%80%8F%E6%98%8E%E6%80%A7\"><i class=\"fa fa-link\"></i></a>9. 作成物の透明性</h2>\n\n<p>スクラムは透明性に依存している。作成物の状態を把握することで、価値の最適化やリスクの制御に関する決定を行う。透明性が確保されている限り、こうした決定には信頼できる根拠が存在する。作成物の透明性が不完全であれば、こうした決定には不備があり、価値は低減し、リスクが高まる可能性がある。</p>\n\n<p>スクラムマスターは、プロダクトオーナー、開発チーム、その他の関係者と一緒になって、作成物が完全に透明化されているかを理解する。不完全な透明性に対処するには、いくつかのプラクティスが存在する。スクラムマスターは、そのなかから最適なプラクティスを選択してもらえるように支援する。スクラムマスターは、作成物の検査、パターンの察知、言説の傾聴、期待値と実際値の違いを把握することで、不完全な透明性を検知できる。</p>\n\n<p>スクラムマスターの仕事は、スクラムチームや組織と一緒になって、作成物の透明性を向上させることである。この仕事には、学習・説得・変化を伴うことが多い。透明性は一夜にしてならず。透明性とは長い道のりなのである。</p>\n\n<h3>\n<span id=\"91-完成doneの定義\" class=\"fragment\"></span><a href=\"#91-%E5%AE%8C%E6%88%90done%E3%81%AE%E5%AE%9A%E7%BE%A9\"><i class=\"fa fa-link\"></i></a>9.1 「完成（Done）」の定義</h3>\n\n<p>プロダクトバックログアイテムやインクリメントの「完成」を決めるときには、全員がその「完成」の意味を理解しておかなければいけない。スクラムチームによってその意味は大きく異なるかもしれないが、作業の完了についてメンバーが共通の理解を持ち、透明性を確保しなければいけない。これは、スクラムチームの『「完成」の定義』と呼ばれ、プロダクトインクリメントの作業が完了したかどうかの評価に使われる。</p>\n\n<p>この定義は、開発チームがスプリントプランニングでプロダクトバックログアイテムをいくつ選択するかの指針にもなる。各スプリントの目的は、そのときの「完成」の定義に合ったリリース判断可能な機能のインクリメントを届けることである。</p>\n\n<p>開発チームは、スプリントごとにプロダクトインクリメントを届ける。インクリメントは実際に利用可能なものであり、プロダクトオーナーがすぐにリリースすることもできる。インクリメントの「完成」の定義に関して、開発組織の慣例・標準・ガイドラインが存在する場合は、スクラムチームは最低でもそれを守らなければいけない。</p>\n\n<p>インクリメントの「完成」の定義が開発組織に存在しない場合は、スクラムチームの開発チームはプロダクトに適した「完成」を定義しなければいけない。複数のスクラムチームがシステムやプロダクトのリリース作業をする場合は、すべてのスクラムチームの開発チームが共通の「完成」の定義を使用しなければいけない。</p>\n\n<p>インクリメントは、それまでのインクリメントに追加されたものであり、すべてが正常に動くように十分にテストされたものである。</p>\n\n<p>スクラムチームが成熟していくと、「完成」の定義にさらに厳しい品質条件を追加することもある。新しい定義を作り、それを使用していくと、以前に「完成」したインクリメントにも手を加えなければいけないことが明らかになる可能性がある。あらゆるプロダクトやシステムは「完成」の定義を備えるべきである。それがあらゆる作業の完了基準となる。</p>\n\n<h2>\n<span id=\"10-最後に\" class=\"fragment\"></span><a href=\"#10-%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>10. 最後に</h2>\n\n<p>スクラムは無料であり、本ガイドで提供されるものである。スクラムの役割・イベント・作成物・ルールは不変である。スクラムの一部だけを導入することも可能だが、それはスクラムとは言えない。すべてをまとめたものがスクラムであり、その他の技法・方法論・プラクティスのコンテナとして機能する。</p>\n\n<h2>\n<span id=\"11-謝辞\" class=\"fragment\"></span><a href=\"#11-%E8%AC%9D%E8%BE%9E\"><i class=\"fa fa-link\"></i></a>11. 謝辞</h2>\n\n<h3>\n<span id=\"111-人々\" class=\"fragment\"></span><a href=\"#111-%E4%BA%BA%E3%80%85\"><i class=\"fa fa-link\"></i></a>11.1 人々</h3>\n\n<p>スクラムに貢献してくれた非常に多くの人たちのなかでも、最初に貢献してくれた人物の名前を挙</p>\n\n<p>げたい。まず、Jeff Sutherlandと一緒に働いたJeff McKennaとJohn Scumniotales。それから、KenSchwaberと一緒に働いたMike SmithとChris Martinと同僚たち。翌年からは、その他にも多くの人たちが貢献してくれた。彼らの助けがなければ、スクラムは今日のように洗練されていなかっただろう。</p>\n\n<h3>\n<span id=\"112-歴史\" class=\"fragment\"></span><a href=\"#112-%E6%AD%B4%E5%8F%B2\"><i class=\"fa fa-link\"></i></a>11.2 歴史</h3>\n\n<p>Ken SchwaberとJeff Sutherlandが 1995 年からスクラムに取り組み、 1995 年のOOPSLAカンファレンスにおいて、スクラムを共同発表した。この発表は、KenとJeffが過去数年間で学んだことを文書化したものであり、はじめて公開された正式なスクラムの定義である。</p>\n\n<p>スクラムの歴史は別のところで説明されている。最初の試行錯誤の場であるIndividual, Inc.、Newspage、Fidelity Investments、IDX（現 GE Medical）に感謝したい。</p>\n\n<p>スクラムガイドは、Jeff SutherlandとKen Schwaberが 20 年以上かけて開発・進化・保守してきたスクラムを文書化したものである。その他の情報源では、スクラムフレームワークを補完するパターン、プロセス、インサイトなどが提供されている。これらは、生産性、価値、創造性、結果に対する満足を高める可能性がある。</p>\n\n<h3>\n<span id=\"113-翻訳\" class=\"fragment\"></span><a href=\"#113-%E7%BF%BB%E8%A8%B3\"><i class=\"fa fa-link\"></i></a>11.3 翻訳</h3>\n\n<p>本ガイドは、Ken SchwaberとJeff Sutherlandによる英語バージョンを日本語に翻訳したものである。日本語訳は、角征典が担当した。最新版の翻訳は、守田憲司さん、高江洲睦さん、永瀬美穂さん、栗秋宏徳さん、川口恭伸さん、角谷信太郎さん、木村卓央さん、原田騎郎さん、吉羽龍太郎さんにご協力いただいた。以前の版では、むらはしけんいちさん、いろさん、たなべすなおさんにもご協力いただいた。</p>\n\n<p>翻訳に関する連絡先：角征典</p>\n\n<h2>\n<span id=\"12-スクラムガイド-2016-年版と-2017-年版の変更点\" class=\"fragment\"></span><a href=\"#12-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%AC%E3%82%A4%E3%83%89-2016-%E5%B9%B4%E7%89%88%E3%81%A8-2017-%E5%B9%B4%E7%89%88%E3%81%AE%E5%A4%89%E6%9B%B4%E7%82%B9\"><i class=\"fa fa-link\"></i></a>12. スクラムガイド 2016 年版と 2017 年版の変更点</h2>\n\n<h3>\n<span id=\"121-スクラムの用途のセクションを追加した\" class=\"fragment\"></span><a href=\"#121-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E7%94%A8%E9%80%94%E3%81%AE%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%9F\"><i class=\"fa fa-link\"></i></a>12.1. 「スクラムの用途」のセクションを追加した。</h3>\n\n<p>当初、スクラムはプロダクトの開発と管理のために開発された。 1990 年代初頭から使用され、今では<br>\n以下のように世界中で広く利用されている。</p>\n\n<ol>\n<li>有望な市場・技術・プロダクトの研究および特定</li>\n<li>プロダクトや追加機能の開発</li>\n<li>プロダクトや追加機能のリリース（ 1 日に何度もリリースされる）</li>\n<li>プロダクトが使用するクラウド（オンライン、セキュア、オンデマンド）やその他運用環境の開発と保守</li>\n<li>プロダクトの保守や刷新</li>\n</ol>\n\n<p>スクラムは、ソフトウェア、ハードウェア、組込みソフトウェア、機能同士を接続するネットワーク、自動運転車などの開発から、学校、政府、マーケティング、組織運営マネジメントに至るまで、個人や社会が日常的に使用するあらゆるものに使用されている。技術・市場・環境の複雑化やそれらの相互作用は急速に高まっており、スクラムがその対応に有効であることは日々証明されている。</p>\n\n<p>スクラムは反復的で漸進的な知識移転において特に有効であることが示されている。今では、プロダクト、サービス、所属する組織の管理に広く利用されている。</p>\n\n<p>スクラムの本質は、少人数制のチームである。個々のチームは非常に柔軟で適応力に優れている。こうした強みは、単一のチームであっても、複数あるいは多数のチームであっても、数千人の成果やプロダクトを開発・リリース・運用・保守するネットワーク型のチームであっても有効である。チームは協力や情報交換をしながら、洗練された開発アーキテクチャやターゲットとするリリース環境を整えていく。</p>\n\n<p>スクラムガイドで「開発」や「開発する」といった言葉が登場するとき、それは上記のような複雑な作業を意味している。</p>\n\n<h3>\n<span id=\"122-スクラムマスターのセクションの表現を変更し役割を明確化した\" class=\"fragment\"></span><a href=\"#122-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E3%81%AE%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E8%A1%A8%E7%8F%BE%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%97%E5%BD%B9%E5%89%B2%E3%82%92%E6%98%8E%E7%A2%BA%E5%8C%96%E3%81%97%E3%81%9F\"><i class=\"fa fa-link\"></i></a>12.2. 「スクラムマスター」のセクションの表現を変更し、役割を明確化した。</h3>\n\n<p>スクラムマスターは、スクラムガイドで定義されたスクラムの促進と支援に責任を持つ。そのためにスクラムマスターは、スクラムの理論・プラクティス・ルール・価値基準を全員に理解してもらえるように支援する。</p>\n\n<p>スクラムマスターは、スクラムチームのサーバントリーダーである（訳注：メンバーが成果を上げるために支援や奉仕をするリーダーのこと）。 スクラムマスターは、スクラムチームとやり取りをするときに役に立つこと／立たないことをスクラムチームの外部の人たちに理解してもらう。スクラムマスターは、こうしたやり取りに変化をもたらすことで、スクラムチームの作る価値を最大化する。</p>\n\n<h3>\n<span id=\"123-スクラムマスターはプロダクトオーナーを支援するのセクションに以下を追加した\" class=\"fragment\"></span><a href=\"#123-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%83%9E%E3%82%B9%E3%82%BF%E3%83%BC%E3%81%AF%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%83%88%E3%82%AA%E3%83%BC%E3%83%8A%E3%83%BC%E3%82%92%E6%94%AF%E6%8F%B4%E3%81%99%E3%82%8B%E3%81%AE%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E4%BB%A5%E4%B8%8B%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%9F\"><i class=\"fa fa-link\"></i></a>12.3. 「スクラムマスターはプロダクトオーナーを支援する」のセクションに以下を追加した。</h3>\n\n<p>スクラムチームの全員がゴール、スコープ、プロダクトのドメインを可能な限り理解できるようにする。</p>\n\n<h3>\n<span id=\"124-デイリースクラムのセクションの最初の段落を以下のように変更した\" class=\"fragment\"></span><a href=\"#124-%E3%83%87%E3%82%A4%E3%83%AA%E3%83%BC%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E6%9C%80%E5%88%9D%E3%81%AE%E6%AE%B5%E8%90%BD%E3%82%92%E4%BB%A5%E4%B8%8B%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%9F\"><i class=\"fa fa-link\"></i></a>12.4. 「デイリースクラム」のセクションの最初の段落を以下のように変更した。</h3>\n\n<p>デイリースクラムとは、開発チームのための 15 分間のタイムボックスのイベントである。スプリントでは、毎日デイリースクラムを開催する。開発チームは、次の 24 時間の作業を計画する。前回のデイリースクラムから行なった作業の検査と今後のスプリント作業の予想をすることで、チームのコラボレーションやパフォーマンスを最適化するのである。デイリースクラムは毎日、同じ時間・場所で開催し、複雑にならないようにする。</p>\n\n<h3>\n<span id=\"125-デイリースクラムのセクションを変更してデイリースクラムのゴールを明確化した\" class=\"fragment\"></span><a href=\"#125-%E3%83%87%E3%82%A4%E3%83%AA%E3%83%BC%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%A6%E3%83%87%E3%82%A4%E3%83%AA%E3%83%BC%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%81%AE%E3%82%B4%E3%83%BC%E3%83%AB%E3%82%92%E6%98%8E%E7%A2%BA%E5%8C%96%E3%81%97%E3%81%9F\"><i class=\"fa fa-link\"></i></a>12.5. 「デイリースクラム」のセクションを変更して、デイリースクラムのゴールを明確化した。</h3>\n\n<p>デイリースクラムの構成は、開発チームが設定する。スプリントゴールを目指している限り、他のやり方で行なっても構わない。質問を使うチームもあれば、議論ベースで進めるチームもある。たとえば、以下のような例を使用するといいだろう。</p>\n\n<ul>\n<li>開発チームがスプリントゴールを達成するために、私が昨日やったことは何か？</li>\n<li>開発チームがスプリントゴールを達成するために、私が今日やることは何か？</li>\n<li>私や開発チームがスプリントゴールを達成する上で、障害となる物を目撃したか？</li>\n</ul>\n\n<h3>\n<span id=\"126-タイムボックスについて明確化した\" class=\"fragment\"></span><a href=\"#126-%E3%82%BF%E3%82%A4%E3%83%A0%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E6%98%8E%E7%A2%BA%E5%8C%96%E3%81%97%E3%81%9F\"><i class=\"fa fa-link\"></i></a>12.6. タイムボックスについて明確化した。</h3>\n\n<p>「最大」という言葉を追加して、イベントを時間どおりに行なう必要があるのかという疑問を解消し、許容される最大の時間であることを明確にした。</p>\n\n<h3>\n<span id=\"127-スプリントバックログのセクションに以下を追加した\" class=\"fragment\"></span><a href=\"#127-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%83%88%E3%83%90%E3%83%83%E3%82%AF%E3%83%AD%E3%82%B0%E3%81%AE%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E4%BB%A5%E4%B8%8B%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%9F\"><i class=\"fa fa-link\"></i></a>12.7. 「スプリントバックログ」のセクションに以下を追加した。</h3>\n\n<p>継続的改善を確実なものとするために、前回のレトロスペクティブで特定した優先順位の高いプロセスの改善策を少なくとも 1 つは含めておく。</p>\n\n<h3>\n<span id=\"128-インクリメントのセクションが明確になるように以下を追加した\" class=\"fragment\"></span><a href=\"#128-%E3%82%A4%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%8C%E6%98%8E%E7%A2%BA%E3%81%AB%E3%81%AA%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E4%BB%A5%E4%B8%8B%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%9F\"><i class=\"fa fa-link\"></i></a>12.8. 「インクリメント」のセクションが明確になるように以下を追加した。</h3>\n\n<p>インクリメントは、完成していて、検査可能なものであり、スプリントの終了時の経験主義を支援するものである。インクリメントは、ビジョンやゴールに向かうステップである。</p>\n","body":"## はじめに\n\nみなさんはスクラムガイド読んだことありますか？\n\n`弊社はスクラム導入している` `アジャイルいいよね！` とかいう会話をしたことが一度でもある人は、\nそんな長くないので原著スクラムガイドを読んでおくのはおすすめです。\n\n[PDF版](https://scrumguides.org/docs/scrumguide/v2017/2017-Scrum-Guide-Japanese.pdf)の文書を、クリエイティブ・コモンズ　[CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/deed.ja)　のライセンス下で再配布しています。内容に変更はありません。\n通勤中に何度も読んでいるときにPDFが大変だったなと思い、Webで見れるようにしたく書いてます。\n([2020年版はこっち](https://qiita.com/ykhirao/items/ed320eaecb876bfd189e))\n\n------\n\n# スクラムガイド™ 2017\n\n## 1. スクラムガイドの目的\nスクラムは、複雑なプロダクトを開発・提供・保守するためのフレームワークである。本ガイドでは、スクラムの定義を説明する。スクラムの定義に、スクラムの役割・イベント・作成物と、それらをまとめるルールが含まれる。スクラムは、Ken SchwaberとJeff Sutherlandが開発したものであり、スクラムガイドはこの 2 人が執筆・提供する。両者は共にスクラムガイドを支援している。\n\n## 2. スクラムの定義\nスクラム（名詞）：複雑で変化の激しい問題に対応するためのフレームワークであり、可能な限り価値の高いプロダクトを生産的かつ創造的に届けるためのものである。\n\nスクラムとは、以下のようなものである。\n\n* 軽量\n* 理解が容易\n* 習得は困難\n\nスクラムは、 1990 年代初頭から複雑なプロダクトの作業管理に使用されてきたプロセスフレームワークである。プロダクトを構築するプロセス、技法、決定的な方法論などではない。さまざまなプロセスや技法を取り入れることのできるフレームワークである。スクラムは、これまでのプロダクト管理や仕事のテクニックの相対的な有効性を明らかにして、プロダクト・チーム・作業環境の継続的な改善を可能にする。\n\nスクラムフレームワークは、スクラムチームとその役割・イベント・作成物・ルールで構成されている。それぞれに目的があり、スクラムの成功や利用に欠かせない。\n\nスクラムのルールは、役割・イベント・作成物をまとめ、それらの関係性や相互作用を統括するものである。スクラムのルールについては、本稿全体で説明する。\n\nスクラムフレームワークを使用する具体的な方法にはさまざまなものがあり、それらについては本稿では触れない。\n\n## 3. スクラムの用途\n\n当初、スクラムはプロダクトの開発と管理のために開発された。 1990 年代初頭から使用され、今では以下のように世界中で広く利用されている。\n\n1. 有望な市場・技術・プロダクトの研究および特定\n2. プロダクトや追加機能の開発\n3. プロダクトや追加機能のリリース（ 1 日に何度もリリースされる）\n4. プロダクトが使用するクラウド（オンライン、セキュア、オンデマンド）やその他運用環境の開発\nと保守\n5. プロダクトの保守や刷新\n\nスクラムは、ソフトウェア、ハードウェア、組込みソフトウェア、機能同士を接続するネットワーク、自動運転車などの開発から、学校、政府、マーケティング、組織運営マネジメントに至るまで、個人や社会が日常的に使用するあらゆるものに使用されている。\n\n技術・市場・環境の複雑化やそれらの相互作用は急速に高まっており、スクラムがその対応に有効であることは日々証明されている。\n\nスクラムは反復的で漸進的な知識移転において特に有効であることが示されている。今では、プロダクト、サービス、所属する組織の管理に広く利用されている。\n\nスクラムの本質は、少人数制のチームである。個々のチームは非常に柔軟で適応力に優れている。こうした強みは、単一のチームであっても、複数あるいは多数のチームであっても、数千人の成果やプロダクトを開発・リリース・運用・保守するネットワーク型のチームであっても有効である。チームは協力や情報交換をしながら、洗練された開発アーキテクチャやターゲットとするリリース環境を整えていく。\n\nスクラムガイドで「開発」や「開発する」といった言葉が登場するとき、それは上記のような複雑な作業を意味している。\n\n## 4. スクラムの理論\n\nスクラムは、経験的プロセス制御の理論（経験主義）を基本にしている。経験主義とは、実際の経験と既知に基づく判断によって知識が獲得できるというものである。スクラムでは、反復的かつ漸進的な手法を用いて、予測可能性の最適化とリスクの管理を行う。\n\n経験的プロセス制御の実現は、透明性・検査・適応の 3 本柱に支えられている。\n\n### 4.1 透明性\n\n経験的プロセスで重要なのは、結果責任を持つ者に対して見える化されていることである。透明性とは、こうしたことが標準化され、見ている人が共通理解を持つことである。\n\n例：\n\n* プロセスの用語を参加者全員で共有している。\n* 作業する人とそのインクリメントを検査する人が「完成」の定義を共有している。\n\n### 4.2 検査\n\nスクラムのユーザーは、スクラムの作成物やスプリントゴールの進捗を頻繁に検査し、好ましくない変化を検知する。ただし、頻繁にやりすぎて作業の妨げになってはいけない。スキルの高い検査担当者が念入りに行えば、検査は最大の効果をもたらす。\n\n### 4.3 適応\n\nプロセスの不備が許容値を超え、成果となるプロダクトを受け入れられないと検査担当者が判断した場合は、プロセスやその構成要素を調整する必要がある。調整はできるだけ早く行い、これ以上の逸脱を防がなければいけない。\n\nスクラムでは、検査と適応のための 4 つの公式なイベントを規定している。詳しくは、「スクラムイベント」の節で説明する。\n\n* スプリントプランニング\n* デイリースクラム\n* スプリントレビュー\n* スプリントレトロスペクティブ\n\n## 5. スクラムの価値基準\n\nスクラムチームが、確約（commitment）・勇気（courage）・集中（focus）・公開（openness）・尊敬（respect）の価値基準を取り入れ、それらを実践するとき、スクラムの柱（透明性・検査・適応）は現実のものとなり、あらゆる人に対する信頼が築かれる。スクラムチームのメンバーは、スクラムの役割・イベント・作成物に触れて仕事を進めるなかで、これらの価値基準を学習・探索する。\n\nスクラムを活用するには、これらの 5 つの価値基準を上手に実践しなければいけない。個人は、スクラムチームのゴールの達成を確約しなければいけない。スクラムチームのメンバーは、正しいことをする勇気を持ち、困難な問題に取り組まなければいけない。全員が、スプリントの作業とスクラムチームのゴールに集中しなければいけない。スクラムチームとステークホルダーは、すべての仕事とそれらを遂行する上での課題を公開することに合意しなければいけない。スクラムチームのメンバーは、お互いを能力のある独立した個人として尊敬しなければいけない。\n\n## 6. スクラムチーム\n\nスクラムチームは、プロダクトオーナー・開発チーム・スクラムマスターで構成される。スクラムチームは自己組織化されており、機能横断的である。自己組織化チームは、作業を成し遂げるための最善の策を、チーム外からの指示ではなく、自分たちで選択する。機能横断的チームは、チーム以外に頼らずに作業を成し遂げる能力を持っている。スクラムにおけるチームのモデルは、柔軟性・創造性・生産性を最適化するように設計されている。スクラムチームは、前述した用途や複雑な仕事において、非常に高い効果を自ら証明している。スクラムチームは、プロダクトを反復的・漸進的に届ける。これは、フィードバックの機会を最大化するためである。「完成」したプロダクトを漸進的に届けることで、動作するプロダクトで役に立つ可能性のあるバージョンを常に利用可能にする。\n\n### 6.1 プロダクトオーナー\n\nプロダクトオーナーは、開発チームから生み出されるプロダクトの価値の最大化に責任を持つ。組織・スクラムチーム・個人によって、その方法はさまざまである。プロダクトオーナーは、プロダクトバックログの管理に責任を持つ 1 人の人間である。プロダクトバックログの管理には、以下のようなものがある。\n\n* プロダクトバックログアイテムを明確に表現する。\n* ゴールとミッションを達成できるようにプロダクトバックログアイテムを並び替える。\n* 開発チームが行う作業の価値を最適化する。\n* プロダクトバックログを全員に見える化・透明化・明確化し、スクラムチームが次に行う作業を示す。\n* 必要とされるレベルでプロダクトバックログアイテムを開発チームに理解してもらう。\n\n上記の作業は、プロダクトオーナーが行う場合もあれば、開発チームが行う場合もある。いずれの場合も、最終的な責任はプロダクトオーナーが持つ。\n\nプロダクトオーナーは 1 人の人間であり、委員会ではない。委員会の要求をプロダクトバックログに反映することもあるだろうが、プロダクトバックログアイテムの優先順位の変更については、プロダクトオーナーと相談しなければいけない。\n\nプロダクトオーナーをうまく機能させるには、組織全体でプロダクトオーナーの決定を尊重しなければいけない。プロダクトオーナーの決定は、プロダクトバックログの内容や並び順という形で見える化されている。異なる要求の作業を開発チームに強制することは誰にもできない。\n\n### 6.2 開発チーム\n\n開発チームは、各スプリントの終了時にリリース判断可能な「完成」したプロダクトインクリメントを届けることのできる専門家で構成されている。「完成」したインクリメントは、スプリントレビューに必要である。インクリメントを作成できるのは、開発チームのメンバーだけである。\n\n開発チームは、自分たちの作業を構成・管理するために、組織から体制と権限を与えられている。その相乗効果によって、開発チーム全体の効率と効果が最適化される。\n\n開発チームには、以下のような特徴がある。\n\n* 自己組織化されている。プロダクトバックログをリリース判断可能な機能のインクリメントに変える方法は、誰も（スクラムマスターでさえも）教えてくれない。\n* 機能横断的である。インクリメントを作成するスキルをチームとしてすべて備えている。\n* ある人にしかできない作業があったとしても、スクラムにおける開発チームのメンバーに肩書きはない。\n* テスティング、アーキテクチャ、運用、ビジネス分析のような専門領域であっても、スクラムは開発チームのサブチームを認めていない。\n* 開発チームのメンバーに専門能力や専門分野があったとしても、最終的な責任は開発チーム全体が持つ。\n\n#### 6.2.1 開発チームの規模\n\n開発チームに最適な人数は、小回りが利く程度に少なく、 1 つのスプリントで重要な作業が成し遂げられる程度に多い人数である。開発チームのメンバーが 3 人未満の場合は、相互作用が少なく、生産性の向上につながらない。また、開発チームの規模が小さいと、スキル不足が原因でリリース判断可能なインクリメントを届けられない可能性もある。メンバーが 9 人を超えた場合は、調整の機会が多くなってしまう。また、チームの規模が大きいと経験的プロセスが複雑になり、有益ではなくなる。スプリントバックログの作業に携わらないのであれば、プロダクトオーナーとスクラムマスターはこの人数に含まない。\n\n\n### 6.3 スクラムマスター\n\nスクラムマスターは、スクラムガイドで定義されたスクラムの促進と支援に責任を持つ。スクラムマスターは、スクラムの理論・プラクティス・ルール・価値基準を全員に理解してもらえるように支援することで、その責任を果たす。\n\nスクラムマスターは、スクラムチームのサーバントリーダーである（訳注：メンバーが成果を上げるために支援や奉仕をするリーダーのこと）。 スクラムマスターは、スクラムチームとやり取りをするときに役に立つこと／立たないことをスクラムチームの外部の人たちに理解してもらう。スクラムマスターは、こうしたやり取りに変化をもたらすことで、スクラムチームの作る価値を最大化する。\n\n\n#### 6.3.1 スクラムマスターはプロダクトオーナーを支援する\n\nスクラムマスターは、さまざまな形でプロダクトオーナーを支援する。\n\n* スクラムチームの全員がゴール、スコープ、プロダクトのドメインを可能な限り理解できるようにする。\n* 効果的なプロダクトバックログの管理方法を探す。\n* 明確で簡潔なプロダクトバックログアイテムの必要性についてスクラムチームに理解してもらう。\n* 経験主義におけるプロダクトプランニングについて理解する。\n* 価値を最大化するためのプロダクトバックログの調整方法をプロダクトオーナーに把握してもらう。\n* アジャイルを理解・実践している。\n* 必要に応じてスクラムイベントをファシリテートする。\n\n#### 6.3.2 スクラムマスターは開発チームを支援する\n\nスクラムマスターは、さまざまな形で開発チームを支援する。\n\n* 自己組織化・機能横断的な開発チームをコーチする。\n* 開発チームが価値の高いプロダクトを作れるように支援する。\n* 開発チームの進捗を妨げるものを排除する。\n* 必要に応じてスクラムイベントをファシリテートする。\n* スクラムがまだ完全に適用・理解されていない組織環境で、開発チームをコーチする。\n\n#### 6.3.3 スクラムマスターは組織を支援する\n\nスクラムマスターは、さまざまな形で組織を支援する。\n\n* 組織へのスクラムの導入を指導・コーチする。\n* 組織へのスクラムの導入方法を計画する。\n* スクラムや経験的プロダクト開発を社員やステークホルダーに理解・実施してもらう。\n* スクラムチームの生産性を高めるような変化を促す。\n* 他のスクラムマスターと一緒に組織におけるスクラム導入の効果を高める。\n\n## 7. スクラムイベント\n\nスクラムで規定されたイベントは規則性を作り出し、スクラムで定義されていないミーティングの必要性を最小化する。すべてのイベントは、時間に上限のあるタイムボックス化されたイベントである。スプリントを開始すると、その期間は固定され、増減することはできない。スプリント以外のイベントについては、目的が達成されたときに終了することもある。これは、プロセスでムダなことをせずに、必要な分だけ時間を使うためである。\n\nスプリント以外のスクラムイベントは、何かを検査・適応するための公式な機会である（スプリントはその他のイベントの入れ物である）。これらのイベントは、非常に重要な透明性と検査の両方が実現できるように設計されている。これらのイベントがなければ、透明性は低下し、検査・適応の多くの機会を失う。\n\n### 7.1 スプリント\n\nスクラムの中心はスプリントである。これは、「完成」した、利用可能な、リリース判断可能なプロダクトインクリメントを作るための、 1 か月以下のタイムボックスである。開発中はスプリントの長さは常に一定である。スプリントが終了すると、すぐに新しいスプリントが開始される。\n\nスプリントは、スプリントプランニング・デイリースクラム・開発作業・スプリントレビュー・スプリントレトロスペクティブで構成される。\n\nスプリントでは、\n\n* スプリントゴールに悪影響を及ぼすような変更を加えない。\n* 品質目標を下げない。\n* 学習が進むにつれてスコープが明確化され、プロダクトオーナーと開発チームの交渉が必要になる可能性がある。\n\nスプリントは 1 か月以内のプロジェクトと考えることができる。プロジェクトと同様に、スプリントは何かを成し遂げるために使うものである。スプリントには、開発対象のゴール、開発のための設計や柔軟な計画、実際の作業、成果となるプロダクトインクリメントが含まれる。\n\nスプリントの期間は 1 か月以内に制限されている。スプリントが長すぎると、開発対象の定義が変更されたり、複雑になったり、リスクが増大したりする可能性がある。ゴールに対する進捗を少なくとも 1 か月ごとに検査・適応することで、予測可能性が高まるのである。また、リスクも 1 か月分のコストに収まるようになる。\n\n#### 7.1.1 スプリントの中止\n\nスプリントはタイムボックスの終了前に中止できる。スプリントを中止する権限があるのは、プロダクトオーナーだけである。このときに、ステークホルダー・開発チーム・スクラムマスターの意見を参考にすることもできる。\n\nスプリントゴールが古くなった場合は、スプリントを中止することになるだろう。会社の方向性や市場・技術の状況が変化すると、スプリントゴールは古くなってしまう。状況を考慮して意味がなくなったと思えば、スプリントを中止すべきである。ただし、スプリントの期間は短いので、中止したからといって影響があることはほとんどない。\n\nスプリントを中止した場合は、プロダクトバックログの「完成」したアイテムをレビューする。部分的にリリース判断可能なものについては、通常はプロダクトオーナーが受け入れる。未完成のプロダクトバックログアイテムは、再見積りをしてからプロダクトバックログに戻す。そこにかかった作業の価値は急速に低下するため、頻繁に再見積りが必要になる（訳注：作りかけの機能や設計については、時間が経つと状況が変わってしまうため、その価値が失われてしまうことが多い。そうすると、最初から見積りをやり直す必要が出てくる）。\n\nスプリントを中止すると、新しいスプリントのスプリントプランニングのために全員が再度集まる必要があり、リソースを消費してしまう。また、スプリントの中止がチームのトラウマになってしまうこともある。とはいえ、スプリントの中止はめったに発生しない。\n\n### 7.2 スプリントプランニング\n\nスプリントの作業はスプリントプランニングで計画する。これはスクラムチームの共同作業である。\n\nスプリントが 1 か月の場合、スプリントプランニングのタイムボックスは最大で 8 時間である。スプリントの期間が短ければ、スプリントプランニングの時間も短くすることが多い。スクラムマスターは、参加者に目的を理解してもらうようにする。スクラムマスターは、スクラムチームにタイムボックスを守るように伝える。\n\nスプリントプランニングでは、以下の質問に答える。\n\n* スプリントの成果であるインクリメントで何を届けることができるか？\n* インクリメントを届けるために必要な作業をどのように成し遂げるか？\n\n##### トピック 1 ：スプリントで何ができるか？\n\n開発チームは、スプリントで開発できそうな機能を予想する。プロダクトオーナーは、スプリントで達成すべき目的と、完成すればスプリントゴールを達成できそうなプロダクトバックログアイテムについて検討する。スクラムチームはみんなで協力して、スプリントの作業を理解する。\n\nスプリントプランニングのインプットは、プロダクトバックログ、最新のプロダクトインクリメント、開発チームが予想するキャパシティと過去の実績である。プロダクトバックログから選択するアイテム数については、開発チームが責任を持つ。スプリントで何を達成するかを評価できるのは、開発チームだけである。\n\n\nスプリントプランニングでは、スクラムチームがスプリントゴールを設定する。スプリントゴールとは、プロダクトバックログを実装することで実現するスプリントの目的であり、開発チームがインクリメントを開発する指針となるものである。\n\n\n##### トピック 2 ：選択した作業をどのように成し遂げるか？\n\nプロダクトバックログアイテムを選択し、スプリントゴールを設定したら、開発チームはスプリントでそれらの機能を「完成」したプロダクトインクリメントにする方法を決める。選択したプロダクトバックログアイテムとそれらを届ける計画を合わせて、スプリントバックログと呼ぶ。\n\n開発チームは、プロダクトバックログを動作するプロダクトインクリメントに変えるために必要なシステムと作業の設計から着手する。作業の規模や工数はバラバラであっても構わないが、開発チームが次のスプリントで実現できそうなものを計画する。開発チームがスプリントの最初の数日間で行う作業については、スプリントプランニングで作業に分解する。作業の単位は 1 日以下にすることが多い。開発チームは自己組織化して、スプリントバックログの作業を引き受ける。これはスプリントプランニングだけでなく、必要であればスプリントでも行う。\n\n\nプロダクトオーナーは、選択したプロダクトバックログアイテムの明確化やトレードオフを支援する。開発チームの作業が多すぎたり少なすぎたりした場合は、選択されたプロダクトバックログアイテムについて、開発チームとプロダクトオーナーで話し合う。あるいは、技術やドメインに詳しい人を招待してアドバイスを求めることもできる。\n\n\nスプリントプランニングが終了するまでに、開発チームは自己組織化したチームとして、どのようにスプリントゴールを達成し、どのように期待されるインクリメントを作成するかをプロダクトオーナーとスクラムマスターに説明できなければいけない。\n\n#### 7.2.1 スプリントゴール\n\nスプリントゴールはスプリントの目的の集合であり、プロダクトバックログの実装によって実現するものである。これは開発チームがインクリメントを構築する理由を知る指針となる。スプリントゴールはスプリントプランニングで作成する。スプリントゴールを設定することで、開発チームがスプリント終了までに実装する機能を柔軟にできる。選択したプロダクトバックログアイテムは、一貫性のある機能として届けられる。それがスプリントゴールになることもある。スプリントゴールがあれば、開発チームは一致団結して作業ができる。\n\n\n開発チームが作業するときには、スプリントゴールを念頭に置く。スプリントゴールを達成するために、機能や技術を実装する。開発チームの予想と異なることが判明した場合は、プロダクトオーナーと交渉してスプリントバックログのスコープを調整する。\n\n### 7.3 デイリースクラム\n\nデイリースクラムとは、開発チームのための 15 分間のタイムボックスのイベントである。スプリントでは、毎日デイリースクラムを開催する。開発チームは、次の 24 時間の作業を計画する。前回のデイリースクラムから行なった作業の検査と今後のスプリント作業の予想をすることで、チームのコラボレーションやパフォーマンスを最適化するのである。デイリースクラムは毎日、同じ時間・場所で開催し、複雑にならないようにする。\n\n開発チームはデイリースクラムを使って、スプリントゴールとスプリントバックログの進捗を検査する。デイリースクラムは、開発チームがスプリントゴールを達成する可能性を最適化する。開発チームは、自己組織化チームとしてスプリントゴールを達成し、スプリント終了までに期待されるインクリメントを作成できるかを毎日把握しなければいけない。\n\nデイリースクラムの構成は、開発チームが設定する。スプリントゴールを目指している限り、他のやり方で行なっても構わない。質問を使うチームもあれば、議論ベースで進めるチームもある。たとえば、以下のような例を使用するといいだろう。\n\n* 開発チームがスプリントゴールを達成するために、私が昨日やったことは何か？\n* 開発チームがスプリントゴールを達成するために、私が今日やることは何か？\n* 私や開発チームがスプリントゴールを達成する上で、障害となる物を目撃したか？\n\n開発チームやチームメンバーは、デイリースクラムの終了直後に集まり、スプリントの残作業について、詳細な議論・適応・再計画を行うこともある。\n\n\nスクラムマスターは、開発チームにデイリースクラムを開催してもらうようにする。ただし、デイリースクラムを開催する責任は開発チームにある。スクラムマスターは、デイリースクラムを 15 分間のタイムボックスで終わらせるように開発チームに伝える。\n\nデイリースクラムは開発チームのためのミーティングである。それ以外の人たちが参加する場合、開発チームの邪魔にならないようにスクラムマスターが配慮する。\n\nデイリースクラムは、コミュニケーションを改善し、その他のミーティングを取り除き、開発の障害物を特定・排除し、迅速な意思決定を強調・助長して、開発チームのプロジェクト知識のレベルを向上させるものである。これは、検査と適応の重要なイベントである。\n\n\n### 7.4 スプリントレビュー\n\n\nスプリントレビューとは、スプリントの終了時にインクリメントの検査と、必要であればプロダクトバックログの適応を行うものである。スプリントレビューでは、スクラムチームとステークホルダーがスプリントの成果をレビューする。スプリントの成果とプロダクトバックログの変更を参考にして、価値を最適化するために次に何ができるかを参加者全員で話し合う。これはステータスミーティングではなく、略式のミーティングである。インクリメントを提示することで、フィードバックや協力を引き出すことを目的とする。\n\n\nスプリントが 1 か月の場合、スプリントレビューは最大 4 時間である。スプリントの期間が短ければ、スプリントレビューの時間も短くすることが多い。スクラムマスターはスプリントレビューが確実に開催されるようにして、参加者には目的を理解してもらうようにする。スクラムマスターは関係者全員にタイムボックスを守るように伝える。\n\nスプリントレビューには、以下の要素が含まれる。\n\n* 参加者は、スクラムチームと、プロダクトオーナーが招待した重要なステークホルダーである。\n* プロダクトオーナーは、プロダクトバックログアイテムの「完成」したものと「完成」していないものについて説明する。\n* 開発チームは、スプリントでうまくいったこと、直面した問題点、それをどのように解決したかを議論する。\n* 開発チームは、「完成」したものをデモして、インクリメントに対する質問に答える。「完成」の定義にプロダクト機能のリリースが含まれていれば、それらを表示してレビューしてもらう。\n* プロダクトオーナーは、現在のプロダクトバックログの状況を説明する。（必要であれば）現在の進捗から、可能性のある目標とデリバリーの日程を予測する。\n* グループ全体で次に何をするべきかを議論し、次のスプリントプランニングに価値のあるインプットを提供できるようにする。\n* 市場やプロダクトの利用状況によって、次に行うべき最も価値の高いことが変更される可能性をレビューする。\n* 次にリリースするプロダクトの機能や性能のスケジュール・予算・可能性・市場をレビューする。\n\n\nスプリントレビューの成果は、次のスプリントで使用するプロダクトバックログアイテムが含まれた改訂版のプロダクトバックログである。新たな機会に見合うように、プロダクトバックログを全体的に調整することもある。\n\n\n### 7.5 スプリントレトロスペクティブ\n\nスプリントレトロスペクティブは、スクラムチームの検査と次のスプリントの改善計画を作成する機会である。\n\nスプリントレトロスペクティブは、スプリントレビューが終わって、次のスプリントプランニングが始まる前に行う。スプリントが 1 か月の場合、スプリントレトロスペクティブは最大 3 時間である。スプリントの期間が短ければ、スプリントレトロスペクティブの時間も短くすることが多い。スクラムマスターは、このイベントが確実に開催されるようにする。また、参加者に目的を理解してもらうようにする。\n\nスクラムマスターは、このミーティングがポジティブで生産的になるようにする。スクラムマスターは、全員にタイムボックスを守るように伝える。スクラムマスターは、スクラムのプロセスを説明するために、チームメンバーとして参加する。\n\nスプリントレトロスペクティブには、以下の目的がある。\n\n* 人・関係・プロセス・ツールの観点から今回のスプリントを検査する。\n* うまくいった項目や今後の改善が必要な項目を特定・整理する。\n* スクラムチームの作業の改善実施計画を作成する。\n\nスクラムマスターは、次のスプリントが効果的で楽しいものになるように、スクラムチームにスクラムプロセスフレームワークの範囲内で開発プロセスやプラクティスを改善してもらう。スプリントレトロスペクティブにおいてスクラムチームは、作業プロセスの改善や「完成」の定義を調整することにより、プロダクトの品質を向上させる方法を計画する。ただし、プロダクトや組織の基準と衝突しないように適切に行う。\n\nスプリントレトロスペクティブが終わるまでに、スクラムチームは次のスプリントで実施する改善策を特定しなければいけない。これらの改善策の実施は、スクラムチーム自体の検査に対する適応になる。改善はいつでも実施可能だが、スプリントレトロスペクティブは検査と適応に集中するための公式な機会である。\n\n## 8. スクラムの作成物\n\nスクラムの作成物は、作業や価値を表したものであり、透明性や検査・適応の機会を提供するものである。スクラムで定義された作成物は、全員が共通理解を得るために必要な情報の透明性を最大化するように設計されている。\n\n### 8.1 プロダクトバックログ\n\nプロダクトバックログは、プロダクトに必要だと把握しているものをすべて順番に並べた一覧である。プロダクトに対する変更要求の唯一の情報源である。プロダクトオーナーは、プロダクトバックログの内容・可用性・並び順に責任を持つ。\n\nプロダクトバックログは決して完成しない。構築の初期段階には、明確でよく理解できている要求が並べられている。その後、プロダクトや使用環境に合わせて進化する。プロダクトバックログは動的であり、適切で競争力のある有用なプロダクトに必要なものを求めて絶えず変化する。プロダクトが存在する限り、プロダクトバックログも存在し続けるのである。\n\n\nプロダクトバックログは、今後のリリースで実装するプロダクトのフィーチャ・機能・要求・要望・修正をすべて一覧にしている。プロダクトバックログアイテムには、詳細・並び順・見積り・価値の属性がある。プロダクトバックログアイテムには、「完成」時にそれを確認するためのテスト記述も含まれていることが多い。\n\n\nプロダクトが使用されて価値が増加し、市場からフィードバックを得られると、プロダクトバックログは巨大で包括的な一覧になる。要求の変更は止まらない。プロダクトバックログは生きた作成物である。ビジネス要求、市場の状態、技術の変化などが、プロダクトバックログの変化につながる。\n\n\n複数のスクラムチームが同じプロダクトの作業をすることがよくある。そうした場合、プロダクトの作業は 1 つのプロダクトバックログに記述する。また、アイテムを分類するための属性をプロダクトバックログに追加することもある。\n\n\nプロダクトバックログに含まれるアイテムに対して、詳細の追加、見積り、並び替えをすることを、プロダクトバックログのリファインメントと呼ぶ。これはプロダクトオーナーと開発チームが協力して行う継続的なプロセスである。プロダクトバックログのリファインメントによって、アイテムのレビューと改訂が行われる。いつどのようにリファインメントをするかは、スクラムチームが決定する。リファインメントは、開発チームの作業の10%以下にすることが多い。ただし、プロダクトバックログアイテムはプロダクトオーナーの判断によって、いつでも更新できる。\n\n\n並び順が上のプロダクトバックログアイテムほど明確で詳細である。明確で詳細であれば、見積りも正確になる。並び順が下のアイテムほど不正確で詳細ではない。今後のスプリントで開発チームが従事するプロダクトバックログアイテムは、スプリントのタイムボックスで「完成」できるようにうまく細分化する。開発チームが 1 つのスプリントで「完成」できそうなプロダクトバックログアイテムは、スプリントプランニングで選択できる「準備完了（Ready）」の状態になったと見なすことができる。プロダクトバックログアイテムは、上記のリファインメントによって透明性を獲得することが多い。\n\n\n開発チームは見積りに対して責任を持つ。プロダクトオーナーがトレードオフの理解や選択などについて開発チームに影響を及ぼすこともあるが、最終的な見積りは実際に作業をする人が行う。\n\n#### 8.1.1 ゴールへの進捗を追跡する\n\nいずれかの時点で、ゴールに対する残作業を合計する。プロダクトオーナーは、少なくともスプリントレビューにおいて、この残作業の合計を追跡する。プロダクトオーナーは、前回のスプリントレビュー時点の残作業の合計と比較して、希望する期日までにゴールに到達できるかどうかを評価する。この情報はステークホルダー全員に明らかにする。\n\n進捗の見通しを立てるために、バーンダウン、バーンアップ、累積フローなどのさまざまなプラクティスが使用されている。これらは有用ではあるが、経験主義の重要性を置き換えるものではない。複雑な環境下では、何が起きるかわからない。すでに発生したことだけが、これから先の意思決定に使用できる。\n\n\n### 8.2 スプリントバックログ\n\n\nスプリントバックログは、スプリントで選択したプロダクトバックログアイテムと、それらのアイテムをプロダクトインクリメントにして届け、スプリントゴールを達成するための計画を合わせたものである。スプリントバックログは、次のインクリメントに含まれる機能と、その機能を「完成」したインクリメントにして届けるために必要な作業について、開発チームが予想したものである。\n\nスプリントバックログによって、開発チームがスプリントゴールを達成するのに必要な作業がすべて見える化されている。継続的改善を確実なものとするために、前回のレトロスペクティブで特定した優先順位の高いプロセスの改善策を少なくとも 1 つは含めておく。\n\nスプリントバックログは十分に詳細であり、今後も変更される可能性のある計画である。それはデイリースクラムで理解できる程度のものである。開発チームは、スプリントでスプリントバックログを修正する。スプリントバックログはスプリントで創発される。こうした創発が発生するのは、開発チームが計画を実行するなかで、スプリントゴールの達成に必要な作業を学習するからである。\n\n新しい作業が必要になれば、開発チームがスプリントバックログに作業を追加する。作業が完了すれば、残作業の見積りを更新する。計画の要素が不要になれば削除する。スプリントでスプリントバックログを変更できるのは開発チームだけである。スプリントバックログには、開発チームがスプリントで行う作業がリアルタイムに反映される。スプリントバックログは開発チームのものである。\n\n#### 8.2.1 スプリントの進捗を追跡する\n\nスプリントのいずれかの時点で、スプリントバックログの残作業を合計する。開発チームは、少なくともデイリースクラムにおいて、この残作業の合計を追跡し、スプリントゴールの達成に見通しを立てる。開発チームはスプリントで残作業を追跡し、自分たちの進捗を管理する。\n\n### 8.3 インクリメント\n\nインクリメントとは、これまでのインクリメントの価値と今回のスプリントで完成したプロダクトバックログアイテムを合わせたものである。スプリントの終了時には、新しいインクリメントが「完成」していなければいけない。つまり、インクリメントが動作する状態であり、スクラムチームの「完成」の定義に合っていることを意味する。インクリメントは、完成していて、検査可能なものであり、スプリントの終了時の経験主義を支援するものである。インクリメントは、ビジョンやゴールに向かうステップである。プロダクトオーナーがリリースを決定する／しないにかかわらず、インクリメントは常に動作する状態にしておかなければいけない。\n\n\n## 9. 作成物の透明性\n\nスクラムは透明性に依存している。作成物の状態を把握することで、価値の最適化やリスクの制御に関する決定を行う。透明性が確保されている限り、こうした決定には信頼できる根拠が存在する。作成物の透明性が不完全であれば、こうした決定には不備があり、価値は低減し、リスクが高まる可能性がある。\n\nスクラムマスターは、プロダクトオーナー、開発チーム、その他の関係者と一緒になって、作成物が完全に透明化されているかを理解する。不完全な透明性に対処するには、いくつかのプラクティスが存在する。スクラムマスターは、そのなかから最適なプラクティスを選択してもらえるように支援する。スクラムマスターは、作成物の検査、パターンの察知、言説の傾聴、期待値と実際値の違いを把握することで、不完全な透明性を検知できる。\n\nスクラムマスターの仕事は、スクラムチームや組織と一緒になって、作成物の透明性を向上させることである。この仕事には、学習・説得・変化を伴うことが多い。透明性は一夜にしてならず。透明性とは長い道のりなのである。\n\n\n### 9.1 「完成（Done）」の定義\n\nプロダクトバックログアイテムやインクリメントの「完成」を決めるときには、全員がその「完成」の意味を理解しておかなければいけない。スクラムチームによってその意味は大きく異なるかもしれないが、作業の完了についてメンバーが共通の理解を持ち、透明性を確保しなければいけない。これは、スクラムチームの『「完成」の定義』と呼ばれ、プロダクトインクリメントの作業が完了したかどうかの評価に使われる。\n\nこの定義は、開発チームがスプリントプランニングでプロダクトバックログアイテムをいくつ選択するかの指針にもなる。各スプリントの目的は、そのときの「完成」の定義に合ったリリース判断可能な機能のインクリメントを届けることである。\n\n開発チームは、スプリントごとにプロダクトインクリメントを届ける。インクリメントは実際に利用可能なものであり、プロダクトオーナーがすぐにリリースすることもできる。インクリメントの「完成」の定義に関して、開発組織の慣例・標準・ガイドラインが存在する場合は、スクラムチームは最低でもそれを守らなければいけない。\n\nインクリメントの「完成」の定義が開発組織に存在しない場合は、スクラムチームの開発チームはプロダクトに適した「完成」を定義しなければいけない。複数のスクラムチームがシステムやプロダクトのリリース作業をする場合は、すべてのスクラムチームの開発チームが共通の「完成」の定義を使用しなければいけない。\n\nインクリメントは、それまでのインクリメントに追加されたものであり、すべてが正常に動くように十分にテストされたものである。\n\nスクラムチームが成熟していくと、「完成」の定義にさらに厳しい品質条件を追加することもある。新しい定義を作り、それを使用していくと、以前に「完成」したインクリメントにも手を加えなければいけないことが明らかになる可能性がある。あらゆるプロダクトやシステムは「完成」の定義を備えるべきである。それがあらゆる作業の完了基準となる。\n\n\n## 10. 最後に\n\n\nスクラムは無料であり、本ガイドで提供されるものである。スクラムの役割・イベント・作成物・ルールは不変である。スクラムの一部だけを導入することも可能だが、それはスクラムとは言えない。すべてをまとめたものがスクラムであり、その他の技法・方法論・プラクティスのコンテナとして機能する。\n\n## 11. 謝辞\n\n### 11.1 人々\n\nスクラムに貢献してくれた非常に多くの人たちのなかでも、最初に貢献してくれた人物の名前を挙\n\nげたい。まず、Jeff Sutherlandと一緒に働いたJeff McKennaとJohn Scumniotales。それから、KenSchwaberと一緒に働いたMike SmithとChris Martinと同僚たち。翌年からは、その他にも多くの人たちが貢献してくれた。彼らの助けがなければ、スクラムは今日のように洗練されていなかっただろう。\n\n\n### 11.2 歴史\n\nKen SchwaberとJeff Sutherlandが 1995 年からスクラムに取り組み、 1995 年のOOPSLAカンファレンスにおいて、スクラムを共同発表した。この発表は、KenとJeffが過去数年間で学んだことを文書化したものであり、はじめて公開された正式なスクラムの定義である。\n\nスクラムの歴史は別のところで説明されている。最初の試行錯誤の場であるIndividual, Inc.、Newspage、Fidelity Investments、IDX（現 GE Medical）に感謝したい。\n\nスクラムガイドは、Jeff SutherlandとKen Schwaberが 20 年以上かけて開発・進化・保守してきたスクラムを文書化したものである。その他の情報源では、スクラムフレームワークを補完するパターン、プロセス、インサイトなどが提供されている。これらは、生産性、価値、創造性、結果に対する満足を高める可能性がある。\n\n\n### 11.3 翻訳\n\n\n本ガイドは、Ken SchwaberとJeff Sutherlandによる英語バージョンを日本語に翻訳したものである。日本語訳は、角征典が担当した。最新版の翻訳は、守田憲司さん、高江洲睦さん、永瀬美穂さん、栗秋宏徳さん、川口恭伸さん、角谷信太郎さん、木村卓央さん、原田騎郎さん、吉羽龍太郎さんにご協力いただいた。以前の版では、むらはしけんいちさん、いろさん、たなべすなおさんにもご協力いただいた。\n\n翻訳に関する連絡先：角征典\n\n## 12. スクラムガイド 2016 年版と 2017 年版の変更点\n\n### 12.1. 「スクラムの用途」のセクションを追加した。\n\n当初、スクラムはプロダクトの開発と管理のために開発された。 1990 年代初頭から使用され、今では\n以下のように世界中で広く利用されている。\n\n1. 有望な市場・技術・プロダクトの研究および特定\n2. プロダクトや追加機能の開発\n3. プロダクトや追加機能のリリース（ 1 日に何度もリリースされる）\n4. プロダクトが使用するクラウド（オンライン、セキュア、オンデマンド）やその他運用環境の開発と保守\n5. プロダクトの保守や刷新\n\nスクラムは、ソフトウェア、ハードウェア、組込みソフトウェア、機能同士を接続するネットワーク、自動運転車などの開発から、学校、政府、マーケティング、組織運営マネジメントに至るまで、個人や社会が日常的に使用するあらゆるものに使用されている。技術・市場・環境の複雑化やそれらの相互作用は急速に高まっており、スクラムがその対応に有効であることは日々証明されている。\n\nスクラムは反復的で漸進的な知識移転において特に有効であることが示されている。今では、プロダクト、サービス、所属する組織の管理に広く利用されている。\n\nスクラムの本質は、少人数制のチームである。個々のチームは非常に柔軟で適応力に優れている。こうした強みは、単一のチームであっても、複数あるいは多数のチームであっても、数千人の成果やプロダクトを開発・リリース・運用・保守するネットワーク型のチームであっても有効である。チームは協力や情報交換をしながら、洗練された開発アーキテクチャやターゲットとするリリース環境を整えていく。\n\nスクラムガイドで「開発」や「開発する」といった言葉が登場するとき、それは上記のような複雑な作業を意味している。\n\n### 12.2. 「スクラムマスター」のセクションの表現を変更し、役割を明確化した。\n\nスクラムマスターは、スクラムガイドで定義されたスクラムの促進と支援に責任を持つ。そのためにスクラムマスターは、スクラムの理論・プラクティス・ルール・価値基準を全員に理解してもらえるように支援する。\n\nスクラムマスターは、スクラムチームのサーバントリーダーである（訳注：メンバーが成果を上げるために支援や奉仕をするリーダーのこと）。 スクラムマスターは、スクラムチームとやり取りをするときに役に立つこと／立たないことをスクラムチームの外部の人たちに理解してもらう。スクラムマスターは、こうしたやり取りに変化をもたらすことで、スクラムチームの作る価値を最大化する。\n\n### 12.3. 「スクラムマスターはプロダクトオーナーを支援する」のセクションに以下を追加した。\n\nスクラムチームの全員がゴール、スコープ、プロダクトのドメインを可能な限り理解できるようにする。\n\n### 12.4. 「デイリースクラム」のセクションの最初の段落を以下のように変更した。\n\nデイリースクラムとは、開発チームのための 15 分間のタイムボックスのイベントである。スプリントでは、毎日デイリースクラムを開催する。開発チームは、次の 24 時間の作業を計画する。前回のデイリースクラムから行なった作業の検査と今後のスプリント作業の予想をすることで、チームのコラボレーションやパフォーマンスを最適化するのである。デイリースクラムは毎日、同じ時間・場所で開催し、複雑にならないようにする。\n\n### 12.5. 「デイリースクラム」のセクションを変更して、デイリースクラムのゴールを明確化した。\n\nデイリースクラムの構成は、開発チームが設定する。スプリントゴールを目指している限り、他のやり方で行なっても構わない。質問を使うチームもあれば、議論ベースで進めるチームもある。たとえば、以下のような例を使用するといいだろう。\n\n* 開発チームがスプリントゴールを達成するために、私が昨日やったことは何か？\n* 開発チームがスプリントゴールを達成するために、私が今日やることは何か？\n* 私や開発チームがスプリントゴールを達成する上で、障害となる物を目撃したか？\n\n### 12.6. タイムボックスについて明確化した。\n\n「最大」という言葉を追加して、イベントを時間どおりに行なう必要があるのかという疑問を解消し、許容される最大の時間であることを明確にした。\n\n\n### 12.7. 「スプリントバックログ」のセクションに以下を追加した。\n\n継続的改善を確実なものとするために、前回のレトロスペクティブで特定した優先順位の高いプロセスの改善策を少なくとも 1 つは含めておく。\n\n### 12.8. 「インクリメント」のセクションが明確になるように以下を追加した。\n\nインクリメントは、完成していて、検査可能なものであり、スプリントの終了時の経験主義を支援するものである。インクリメントは、ビジョンやゴールに向かうステップである。\n\n\n","coediting":false,"comments_count":0,"created_at":"2021-10-06T20:02:49+09:00","group":null,"id":"421dd8681671ada1f55a","likes_count":2,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"アジャイル","versions":[]},{"name":"devops","versions":[]},{"name":"スクラム","versions":[]},{"name":"スクラムマスター","versions":[]}],"title":"【Web版】スクラムガイド™ 2017","updated_at":"2021-10-13T17:37:37+09:00","url":"https://qiita.com/ykhirao/items/421dd8681671ada1f55a","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"google-driveで共有設定が適切に設定されているかドライブのファイルフォルダを一覧で調べる方法\" class=\"fragment\"></span><a href=\"#google-drive%E3%81%A7%E5%85%B1%E6%9C%89%E8%A8%AD%E5%AE%9A%E3%81%8C%E9%81%A9%E5%88%87%E3%81%AB%E8%A8%AD%E5%AE%9A%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%E3%83%89%E3%83%A9%E3%82%A4%E3%83%96%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%82%92%E4%B8%80%E8%A6%A7%E3%81%A7%E8%AA%BF%E3%81%B9%E3%82%8B%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>Google Driveで共有設定が適切に設定されているかドライブのファイル・フォルダを一覧で調べる方法</h1>\n\n<p>30分くらいで作ったやつを貼っておく。<br>\nかんたんなスクリプトなのでもっと良さそうな改良版あればコメント欄なり、自分で記事お願いします！</p>\n\n<p>「2021年１月６日、福岡県の新型コロナウイルス感染症陽性者に関する個人情報の漏えい」がありましたが、この漏洩事案がGoogle Driveによるものだとは存じ上げないのですが、SaaSのドライブを利用するユーザーが増えてくると（絶対数が増える）と、共有設定を間違えるニュースが増えてくると思います。</p>\n\n<p>なのでDriveのファイルとフォルダが適切に共有設定されているか確認しましょう、ってお話。</p>\n\n<h2>\n<span id=\"データ\" class=\"fragment\"></span><a href=\"#%E3%83%87%E3%83%BC%E3%82%BF\"><i class=\"fa fa-link\"></i></a>データ</h2>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">results</span> <span class=\"o\">=</span> <span class=\"p\">[];</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">doGet</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"nx\">writeInforInFolder</span><span class=\"p\">(</span><span class=\"nx\">DriveApp</span><span class=\"p\">.</span><span class=\"nx\">getRootFolder</span><span class=\"p\">());</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"nx\">results</span><span class=\"p\">.</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"se\">\\n</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"nx\">Logger</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">);</span>\n\n  <span class=\"c1\">// Webアプリとして導入するならこんな感じ？</span>\n  <span class=\"c1\">// return HtmlService.createHtmlOutput(text);</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">writeInforInFolder</span><span class=\"p\">(</span><span class=\"nx\">folder</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">if</span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">folder</span><span class=\"p\">)</span> <span class=\"k\">return</span><span class=\"p\">;</span>\n\n  <span class=\"c1\">// フォルダ以下ファイルをすべて取得</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">files</span> <span class=\"o\">=</span> <span class=\"nx\">folder</span><span class=\"p\">.</span><span class=\"nx\">getFiles</span><span class=\"p\">();</span>\n  <span class=\"k\">while</span><span class=\"p\">(</span><span class=\"nx\">files</span><span class=\"p\">.</span><span class=\"nx\">hasNext</span><span class=\"p\">())</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">file</span> <span class=\"o\">=</span> <span class=\"nx\">files</span><span class=\"p\">.</span><span class=\"nx\">next</span><span class=\"p\">();</span>\n    <span class=\"nx\">results</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">(</span><span class=\"s2\">`FILE,</span><span class=\"p\">${</span><span class=\"nx\">file</span><span class=\"p\">.</span><span class=\"nx\">getName</span><span class=\"p\">()}</span><span class=\"s2\">,</span><span class=\"p\">${</span><span class=\"nx\">file</span><span class=\"p\">.</span><span class=\"nx\">getSharingAccess</span><span class=\"p\">()}</span><span class=\"s2\">,</span><span class=\"p\">${</span><span class=\"nx\">file</span><span class=\"p\">.</span><span class=\"nx\">getUrl</span><span class=\"p\">()}</span><span class=\"s2\">`</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"c1\">// フォルダ配下のフォルダを取得</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">folders</span> <span class=\"o\">=</span> <span class=\"nx\">folder</span><span class=\"p\">.</span><span class=\"nx\">getFolders</span><span class=\"p\">();</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">folders</span><span class=\"p\">)</span> <span class=\"k\">return</span><span class=\"p\">;</span>\n  <span class=\"k\">while</span><span class=\"p\">(</span><span class=\"nx\">folders</span><span class=\"p\">.</span><span class=\"nx\">hasNext</span><span class=\"p\">())</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">folder</span> <span class=\"o\">=</span> <span class=\"nx\">folders</span><span class=\"p\">.</span><span class=\"nx\">next</span><span class=\"p\">();</span>\n    <span class=\"nx\">results</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">(</span><span class=\"s2\">`FOLDER,</span><span class=\"p\">${</span><span class=\"nx\">folder</span><span class=\"p\">.</span><span class=\"nx\">getName</span><span class=\"p\">()}</span><span class=\"s2\">,</span><span class=\"p\">${</span><span class=\"nx\">folder</span><span class=\"p\">.</span><span class=\"nx\">getSharingAccess</span><span class=\"p\">()}</span><span class=\"s2\">,</span><span class=\"p\">${</span><span class=\"nx\">folder</span><span class=\"p\">.</span><span class=\"nx\">getUrl</span><span class=\"p\">()}</span><span class=\"s2\">`</span><span class=\"p\">)</span>\n    <span class=\"c1\">// 更に下のフォルダを検索するため再帰処理</span>\n    <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">writeInforInFolder</span><span class=\"p\">(</span><span class=\"nx\">folder</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<ul>\n<li>権限を取得とかもろもろの許可が必要</li>\n</ul>\n\n<p>CSV形式のテキストで出力されるので、3列目がANYONEとかANYONE_WITH_LINKになっているのは確認したほうがいいと思います。</p>\n\n<div class=\"code-frame\" data-lang=\"csvs\"><div class=\"highlight\"><pre><code><span class=\"c1\">// 出力例</span>\n<span class=\"c1\">// 長すぎるとエラーでるので、</span>\n<span class=\"c1\">// return HtmlService.createHtmlOutput(text);のとこコメントアウト外してWebで見たほうがいいかも</span>\n<span class=\"k\">Logging</span> <span class=\"k\">output</span> <span class=\"k\">too</span> <span class=\"k\">large</span><span class=\"err\">.</span> <span class=\"k\">Truncating</span> <span class=\"k\">output</span><span class=\"err\">.</span> \n\n<span class=\"c1\">// folderとfile,名前,url</span>\n<span class=\"k\">FOLDER</span><span class=\"p\">,</span><span class=\"k\">test</span><span class=\"p\">,</span><span class=\"k\">PRIVATE</span><span class=\"p\">,</span><span class=\"nv\">https:</span><span class=\"c1\">//script.google.com/d/sample</span>\n<span class=\"k\">FILE</span><span class=\"p\">,</span><span class=\"err\">無題のプロジェクト</span><span class=\"p\">,</span><span class=\"k\">PRIVATE</span><span class=\"p\">,</span><span class=\"nv\">https:</span><span class=\"c1\">//script.google.com/d/1i</span>\n</code></pre></div></div>\n\n<p>権限は以下を確認してください。<br>\n<a href=\"https://developers.google.com/apps-script/reference/drive/access\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://developers.google.com/apps-script/reference/drive/access</a></p>\n\n<ul>\n<li>ANYONE (誰でも見れる)</li>\n<li>ANYONE_WITH_LINK(リンク知っている人全員)</li>\n<li>DOMAIN (自社のGsuiteワークスペースの人のみ)</li>\n<li>DOMAIN_WITH_LINK(自社のワークスペースの人でリンク知っている人のみ)</li>\n<li>PRIVATE (自分のみ)</li>\n</ul>\n\n<p>基本的に機密情報は、ANYONE,ANYONE_WITH_LINKだと合うと、特に気密性高い情報はDOMAINもDOMAIN_WITH_LINKもだめかも。<br>\n気密性の高いファイルは、PRIVATEにして、必要な人だけ個別で追加していくスタイルがよいかと。</p>\n","body":"# Google Driveで共有設定が適切に設定されているかドライブのファイル・フォルダを一覧で調べる方法\n\n30分くらいで作ったやつを貼っておく。\nかんたんなスクリプトなのでもっと良さそうな改良版あればコメント欄なり、自分で記事お願いします！\n\n「2021年１月６日、福岡県の新型コロナウイルス感染症陽性者に関する個人情報の漏えい」がありましたが、この漏洩事案がGoogle Driveによるものだとは存じ上げないのですが、SaaSのドライブを利用するユーザーが増えてくると（絶対数が増える）と、共有設定を間違えるニュースが増えてくると思います。\n\nなのでDriveのファイルとフォルダが適切に共有設定されているか確認しましょう、ってお話。\n\n## データ\n\n\n\n```js\nconst results = [];\n\nfunction doGet() {\n  writeInforInFolder(DriveApp.getRootFolder());\n  const text = results.join(\"\\n\");\n  Logger.log(text);\n\n  // Webアプリとして導入するならこんな感じ？\n  // return HtmlService.createHtmlOutput(text);\n}\n\nfunction writeInforInFolder(folder) {\n  if(!folder) return;\n  \n  // フォルダ以下ファイルをすべて取得\n  const files = folder.getFiles();\n  while(files.hasNext()) {\n    const file = files.next();\n    results.push(`FILE,${file.getName()},${file.getSharingAccess()},${file.getUrl()}`)\n  }\n\n  // フォルダ配下のフォルダを取得\n  const folders = folder.getFolders();\n  if (!folders) return;\n  while(folders.hasNext()) {\n    const folder = folders.next();\n    results.push(`FOLDER,${folder.getName()},${folder.getSharingAccess()},${folder.getUrl()}`)\n    // 更に下のフォルダを検索するため再帰処理\n    this.writeInforInFolder(folder)\n  }\n}\n```\n\n- 権限を取得とかもろもろの許可が必要\n\n\nCSV形式のテキストで出力されるので、3列目がANYONEとかANYONE_WITH_LINKになっているのは確認したほうがいいと思います。\n\n```csvs\n// 出力例\n// 長すぎるとエラーでるので、\n// return HtmlService.createHtmlOutput(text);のとこコメントアウト外してWebで見たほうがいいかも\nLogging output too large. Truncating output. \n\n// folderとfile,名前,url\nFOLDER,test,PRIVATE,https://script.google.com/d/sample\nFILE,無題のプロジェクト,PRIVATE,https://script.google.com/d/1i\n```\n\n権限は以下を確認してください。\nhttps://developers.google.com/apps-script/reference/drive/access\n\n- ANYONE (誰でも見れる)\n- ANYONE_WITH_LINK(リンク知っている人全員)\n- DOMAIN (自社のGsuiteワークスペースの人のみ)\n- DOMAIN_WITH_LINK(自社のワークスペースの人でリンク知っている人のみ)\n- PRIVATE (自分のみ)\n\n\n基本的に機密情報は、ANYONE,ANYONE_WITH_LINKだと合うと、特に気密性高い情報はDOMAINもDOMAIN_WITH_LINKもだめかも。\n気密性の高いファイルは、PRIVATEにして、必要な人だけ個別で追加していくスタイルがよいかと。\n\n","coediting":false,"comments_count":0,"created_at":"2021-03-08T11:09:30+09:00","group":null,"id":"e068314d14879221f5a8","likes_count":4,"private":false,"reactions_count":0,"stocks_count":3,"tags":[{"name":"GAS","versions":[]},{"name":"GoogleDrive","versions":[]},{"name":"共有","versions":[]},{"name":"権限管理","versions":[]}],"title":"Google Driveで共有設定が適切に設定されているかドライブのファイル・フォルダを一覧で調べる方法","updated_at":"2021-03-08T11:09:30+09:00","url":"https://qiita.com/ykhirao/items/e068314d14879221f5a8","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p><a href=\"https://camo.qiitausercontent.com/18478755f9544ec862fc94ec1a7b10735aefcc0b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f38663930653861382d343534652d386537302d653831372d3363343661363433356630352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F8f90e8a8-454e-8e70-e817-3c46a6435f05.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6ecec4d48ae118bd405aa88a860fcdb7\" alt=\"スクリーンショット 2020-12-28 2.10.22.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/8f90e8a8-454e-8e70-e817-3c46a6435f05.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F8f90e8a8-454e-8e70-e817-3c46a6435f05.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8ce4169eb7dc6662c7349314c29adf22 1x\" loading=\"lazy\"></a></p>\n\n<p>以下のようなURLをクリックするだけで、規定の配列から何人か選んでくれる。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>https://script.google.com/macros/s/XXXXX-XXXX/exec\nhttps://script.google.com/macros/s/XXXXX-XXXX/exec?num=2\nhttps://script.google.com/macros/s/XXXXX-XXXX/exec?num=3\nhttps://script.google.com/macros/s/XXXXX-XXXX/exec?num=4\n</code></pre></div></div>\n\n<p>以下のようなスクリプトをGASにいれて、Webアプリケーションとして公開したらOK</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">doGet</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">if</span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">isOurGsuiteUser</span><span class=\"p\">())</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"nx\">resText</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">ログインアドレスが違います</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"nx\">postSlackMessage</span><span class=\"p\">(</span><span class=\"nx\">getMessageArray</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">).</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"se\">\\n</span><span class=\"dl\">\"</span><span class=\"p\">));</span>\n\n  <span class=\"k\">return</span> <span class=\"nx\">resText</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">OK!</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">testSlack</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">array</span> <span class=\"o\">=</span> <span class=\"nx\">getMessageArray</span><span class=\"p\">();</span>\n\n  <span class=\"nx\">postSlackMessage</span><span class=\"p\">(</span><span class=\"nx\">array</span><span class=\"p\">.</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"se\">\\n</span><span class=\"dl\">\"</span><span class=\"p\">))</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">getMessageArray</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">num</span> <span class=\"o\">=</span> <span class=\"nx\">getNum</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">);</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">array</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"nx\">getLoginUser</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"s2\">`さんからのリクエストでランダムに </span><span class=\"se\">\\`</span><span class=\"p\">${</span><span class=\"nx\">num</span><span class=\"p\">}</span><span class=\"s2\">人</span><span class=\"se\">\\`</span><span class=\"s2\"> 選ばれました :tada:`</span><span class=\"p\">,</span>\n    <span class=\"dl\">\"\"</span><span class=\"p\">,</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">```</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"p\">...(</span><span class=\"nx\">getMember</span><span class=\"p\">(</span><span class=\"nx\">num</span><span class=\"p\">)),</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">```</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"dl\">\"\"</span><span class=\"p\">,</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">ランチとか1on1とか楽しんできてください:+1::star:</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"p\">];</span>\n\n  <span class=\"k\">return</span> <span class=\"nx\">array</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">postSlackMessage</span><span class=\"p\">(</span><span class=\"nx\">message</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">postUrl</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">https://hooks.slack.com/services/BBBBB/XXXX/????????</span><span class=\"dl\">'</span><span class=\"p\">;</span> <span class=\"c1\">// webhookurlは自分のチャンネルで取得してください</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">username</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">Choice BOT</span><span class=\"dl\">'</span><span class=\"p\">;</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">icon</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">:slightly_smiling_face:</span><span class=\"dl\">'</span><span class=\"p\">;</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">jsonData</span> <span class=\"o\">=</span>\n  <span class=\"p\">{</span>\n     <span class=\"dl\">\"</span><span class=\"s2\">username</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> <span class=\"nx\">username</span><span class=\"p\">,</span>\n     <span class=\"dl\">\"</span><span class=\"s2\">icon_emoji</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"nx\">icon</span><span class=\"p\">,</span>\n     <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> <span class=\"nx\">message</span>\n  <span class=\"p\">};</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">payload</span> <span class=\"o\">=</span> <span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nx\">stringify</span><span class=\"p\">(</span><span class=\"nx\">jsonData</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">options</span> <span class=\"o\">=</span>\n  <span class=\"p\">{</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">method</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">post</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">contentType</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">application/json</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">payload</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> <span class=\"nx\">payload</span>\n  <span class=\"p\">};</span>\n\n  <span class=\"nx\">UrlFetchApp</span><span class=\"p\">.</span><span class=\"nx\">fetch</span><span class=\"p\">(</span><span class=\"nx\">postUrl</span><span class=\"p\">,</span> <span class=\"nx\">options</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/**\n * memberを指定の数だけ返す\n */</span>\n<span class=\"kd\">function</span> <span class=\"nx\">getMember</span><span class=\"p\">(</span><span class=\"nx\">num</span><span class=\"p\">){</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">member</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"dl\">'</span><span class=\"s1\">Aさん</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n    <span class=\"dl\">'</span><span class=\"s1\">Bさん</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n    <span class=\"dl\">'</span><span class=\"s1\">Cさん</span><span class=\"dl\">'</span>\n  <span class=\"p\">];</span>\n\n  <span class=\"k\">return</span> <span class=\"nx\">shuffle</span><span class=\"p\">(</span><span class=\"nx\">member</span><span class=\"p\">).</span><span class=\"nx\">slice</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"nx\">num</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/**\n * 何人にするか\n * 基本は1人\n * @return number\n */</span>\n<span class=\"kd\">function</span> <span class=\"nx\">getNum</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"kd\">const</span> <span class=\"nx\">num</span> <span class=\"o\">=</span> <span class=\"nb\">parseInt</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">parameter</span><span class=\"p\">.</span><span class=\"nx\">num</span><span class=\"p\">);</span>\n\n  <span class=\"k\">return</span> <span class=\"nb\">isNaN</span><span class=\"p\">(</span><span class=\"nx\">num</span><span class=\"p\">)</span> <span class=\"p\">?</span> <span class=\"mi\">1</span> <span class=\"p\">:</span> <span class=\"nx\">num</span><span class=\"p\">;</span> \n<span class=\"p\">}</span>\n\n<span class=\"cm\">/**\n * ログインユーザーのアドレスを確認して弊社社員か確認する\n */</span>\n<span class=\"kd\">function</span> <span class=\"nx\">isOurGsuiteUser</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">user</span> <span class=\"o\">=</span> <span class=\"nx\">Session</span><span class=\"p\">.</span><span class=\"nx\">getActiveUser</span><span class=\"p\">();</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">email</span> <span class=\"o\">=</span> <span class=\"nx\">user</span><span class=\"p\">.</span><span class=\"nx\">getEmail</span><span class=\"p\">();</span>\n\n  <span class=\"k\">return</span> <span class=\"nx\">email</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">email</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">@</span><span class=\"dl\">\"</span><span class=\"p\">)</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">email</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">@</span><span class=\"dl\">\"</span><span class=\"p\">)[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">===</span> <span class=\"dl\">\"</span><span class=\"s2\">gmail.com</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/**\n * ログインユーザーを取得\n * return Sting\n */</span>\n<span class=\"kd\">function</span> <span class=\"nx\">getLoginUser</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">user</span> <span class=\"o\">=</span> <span class=\"nx\">Session</span><span class=\"p\">.</span><span class=\"nx\">getActiveUser</span><span class=\"p\">();</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">email</span> <span class=\"o\">=</span> <span class=\"nx\">user</span><span class=\"p\">.</span><span class=\"nx\">getEmail</span><span class=\"p\">();</span>\n\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">email</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">email</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">@</span><span class=\"dl\">\"</span><span class=\"p\">)</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">email</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">@</span><span class=\"dl\">\"</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">])</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"nx\">email</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">@</span><span class=\"dl\">\"</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">];</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"k\">return</span> <span class=\"dl\">\"</span><span class=\"s2\">Who??</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n\n<span class=\"cm\">/**\n * responceのラッパーにしようとしている\n */</span>\n<span class=\"kd\">function</span> <span class=\"nx\">resText</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">return</span> <span class=\"nx\">ContentService</span><span class=\"p\">.</span><span class=\"nx\">createTextOutput</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n\n<span class=\"cm\">/**\n * 配列をシャッフルする\n */</span>\n<span class=\"kd\">function</span> <span class=\"nx\">shuffle</span><span class=\"p\">(</span><span class=\"nx\">array</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">let</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"nx\">array</span><span class=\"p\">.</span><span class=\"nx\">length</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">--</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">j</span> <span class=\"o\">=</span> <span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nx\">floor</span><span class=\"p\">(</span><span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nx\">random</span><span class=\"p\">()</span> <span class=\"o\">*</span> <span class=\"p\">(</span><span class=\"nx\">i</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">));</span>\n    <span class=\"p\">[</span><span class=\"nx\">array</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">],</span> <span class=\"nx\">array</span><span class=\"p\">[</span><span class=\"nx\">j</span><span class=\"p\">]]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"nx\">array</span><span class=\"p\">[</span><span class=\"nx\">j</span><span class=\"p\">],</span> <span class=\"nx\">array</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">]];</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"k\">return</span> <span class=\"nx\">array</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n","body":"\n\n\n![スクリーンショット 2020-12-28 2.10.22.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/8f90e8a8-454e-8e70-e817-3c46a6435f05.png)\n\n以下のようなURLをクリックするだけで、規定の配列から何人か選んでくれる。\n\n```\nhttps://script.google.com/macros/s/XXXXX-XXXX/exec\nhttps://script.google.com/macros/s/XXXXX-XXXX/exec?num=2\nhttps://script.google.com/macros/s/XXXXX-XXXX/exec?num=3\nhttps://script.google.com/macros/s/XXXXX-XXXX/exec?num=4\n```\n\n以下のようなスクリプトをGASにいれて、Webアプリケーションとして公開したらOK\n\n```js\nfunction doGet(e) {\n  if(!isOurGsuiteUser()) {\n    return resText(\"ログインアドレスが違います\");\n  }\n\n  postSlackMessage(getMessageArray(e).join(\"\\n\"));\n\n  return resText(\"OK!\");\n}\n\nfunction testSlack() {\n  const array = getMessageArray();\n\n  postSlackMessage(array.join(\"\\n\"))\n}\n\nfunction getMessageArray(e) {\n  const num = getNum(e);\n  const array = [\n    getLoginUser() + `さんからのリクエストでランダムに \\`${num}人\\` 選ばれました :tada:`,\n    \"\",\n    \"```\",\n    ...(getMember(num)),\n    \"```\",\n    \"\",\n    \"ランチとか1on1とか楽しんできてください:+1::star:\",\n  ];\n  \n  return array;\n}\n\nfunction postSlackMessage(message) {\n  var postUrl = 'https://hooks.slack.com/services/BBBBB/XXXX/????????'; // webhookurlは自分のチャンネルで取得してください\n  var username = 'Choice BOT';\n  var icon = ':slightly_smiling_face:';\n\n  var jsonData =\n  {\n     \"username\" : username,\n     \"icon_emoji\": icon,\n     \"text\" : message\n  };\n  var payload = JSON.stringify(jsonData);\n\n  var options =\n  {\n    \"method\" : \"post\",\n    \"contentType\" : \"application/json\",\n    \"payload\" : payload\n  };\n\n  UrlFetchApp.fetch(postUrl, options);\n}\n\n/**\n * memberを指定の数だけ返す\n */\nfunction getMember(num){\n  const member = [\n    'Aさん',\n    'Bさん',\n    'Cさん'\n  ];\n\n  return shuffle(member).slice(0,num);\n}\n\n/**\n * 何人にするか\n * 基本は1人\n * @return number\n */\nfunction getNum(e) {\n  if (!e) {\n    return 1;\n  }\n\n  const num = parseInt(e.parameter.num);\n\n  return isNaN(num) ? 1 : num; \n}\n\n/**\n * ログインユーザーのアドレスを確認して弊社社員か確認する\n */\nfunction isOurGsuiteUser() {\n  const user = Session.getActiveUser();\n  const email = user.getEmail();\n\n  return email && email.split(\"@\") && email.split(\"@\")[1] === \"gmail.com\";\n}\n\n/**\n * ログインユーザーを取得\n * return Sting\n */\nfunction getLoginUser() {\n  const user = Session.getActiveUser();\n  const email = user.getEmail();\n\n  if (email && email.split(\"@\") && email.split(\"@\")[0]) {\n    return email.split(\"@\")[0];\n  }\n\n  return \"Who??\";\n}\n\n\n/**\n * responceのラッパーにしようとしている\n */\nfunction resText(text) {\n  return ContentService.createTextOutput(text)\n}\n\n\n/**\n * 配列をシャッフルする\n */\nfunction shuffle(array) {\n  for (let i = array.length - 1; i >= 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n\n  return array;\n}\n\n```\n","coediting":false,"comments_count":0,"created_at":"2020-12-28T02:13:59+09:00","group":null,"id":"11479365b0280a6aaeca","likes_count":0,"private":false,"reactions_count":0,"stocks_count":1,"tags":[{"name":"JavaScript","versions":[]},{"name":"GAS","versions":[]},{"name":"Slack","versions":[]}],"title":"ランチメンバーをランダムでいい感じに選ぶGASスクリプト","updated_at":"2020-12-28T02:13:59+09:00","url":"https://qiita.com/ykhirao/items/11479365b0280a6aaeca","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"mysqlで複数のorder-by指定\" class=\"fragment\"></span><a href=\"#mysql%E3%81%A7%E8%A4%87%E6%95%B0%E3%81%AEorder-by%E6%8C%87%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>mysqlで複数のorder by指定</h1>\n\n<p>構文 is</p>\n\n<div class=\"code-frame\" data-lang=\"sql\"><div class=\"highlight\"><pre><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">tables</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">name1</span><span class=\"p\">,</span> <span class=\"n\">name2</span>\n<span class=\"p\">;</span>\n</code></pre></div></div>\n\n<p>知っている人からすると当たり前で何を今更って感じかもしれないのですが、<br>\nname2でソートしてから、name1でソートされるみたいでした。</p>\n\n<h2>\n<span id=\"動作確認のログ\" class=\"fragment\"></span><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%AE%E3%83%AD%E3%82%B0\"><i class=\"fa fa-link\"></i></a>動作確認のログ</h2>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>vagrant@homestead:~<span class=\"nv\">$ </span>mysql <span class=\"nt\">-V</span>\nmysql  Ver 14.14 Distrib 5.7.31, <span class=\"k\">for </span>Linux <span class=\"o\">(</span>x86_64<span class=\"o\">)</span> using  EditLine wrapper\n\nmysql&gt; create database sample<span class=\"p\">;</span>\nQuery OK, 1 row affected <span class=\"o\">(</span>0.00 sec<span class=\"o\">)</span>\n\nmysql&gt; use sample<span class=\"p\">;</span>\nDatabase changed\n\nmysql&gt; create table <span class=\"nb\">users</span> <span class=\"o\">(</span><span class=\"nb\">id </span>int, name1 varchar<span class=\"o\">(</span>10<span class=\"o\">)</span>, name2 varchar<span class=\"o\">(</span>10<span class=\"o\">))</span><span class=\"p\">;</span>\nQuery OK, 0 rows affected <span class=\"o\">(</span>0.04 sec<span class=\"o\">)</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"sql\"><div class=\"highlight\"><pre><code><span class=\"k\">insert</span> <span class=\"k\">into</span> <span class=\"n\">users</span> <span class=\"k\">values</span> \n<span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">'A'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">)</span>\n<span class=\"p\">,(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">'B'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">)</span>\n<span class=\"p\">,(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">'B'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">)</span>\n<span class=\"p\">,(</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">'C'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">)</span>\n<span class=\"p\">,(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"s1\">'C'</span><span class=\"p\">,</span> <span class=\"s1\">'2'</span><span class=\"p\">)</span>\n<span class=\"p\">,(</span><span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"s1\">'D'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">)</span>\n<span class=\"p\">;</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"sql\"><div class=\"highlight\"><pre><code><span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">select</span> <span class=\"o\">*</span>\n    <span class=\"o\">-&gt;</span> <span class=\"k\">from</span> <span class=\"n\">users</span>\n    <span class=\"o\">-&gt;</span> <span class=\"k\">order</span> <span class=\"k\">by</span> <span class=\"n\">id</span><span class=\"p\">;</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span> <span class=\"n\">id</span>   <span class=\"o\">|</span> <span class=\"n\">name1</span> <span class=\"o\">|</span> <span class=\"n\">name2</span> <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span>    <span class=\"mi\">1</span> <span class=\"o\">|</span> <span class=\"n\">A</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">2</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">3</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">4</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">5</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">2</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">6</span> <span class=\"o\">|</span> <span class=\"n\">D</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"mi\">6</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">00</span> <span class=\"n\">sec</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"sql\"><div class=\"highlight\"><pre><code><span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">select</span> <span class=\"o\">*</span> <span class=\"k\">from</span> <span class=\"n\">users</span> <span class=\"k\">order</span> <span class=\"k\">by</span> <span class=\"n\">name1</span><span class=\"p\">,</span> <span class=\"n\">name2</span><span class=\"p\">;</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span> <span class=\"n\">id</span>   <span class=\"o\">|</span> <span class=\"n\">name1</span> <span class=\"o\">|</span> <span class=\"n\">name2</span> <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span>    <span class=\"mi\">1</span> <span class=\"o\">|</span> <span class=\"n\">A</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">2</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">3</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">4</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">5</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">2</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">6</span> <span class=\"o\">|</span> <span class=\"n\">D</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"mi\">6</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">00</span> <span class=\"n\">sec</span><span class=\"p\">)</span>\n\n<span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">select</span> <span class=\"o\">*</span> <span class=\"k\">from</span> <span class=\"n\">users</span> <span class=\"k\">order</span> <span class=\"k\">by</span> <span class=\"n\">name2</span><span class=\"p\">,</span> <span class=\"n\">name1</span><span class=\"p\">;</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span> <span class=\"n\">id</span>   <span class=\"o\">|</span> <span class=\"n\">name1</span> <span class=\"o\">|</span> <span class=\"n\">name2</span> <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span>    <span class=\"mi\">1</span> <span class=\"o\">|</span> <span class=\"n\">A</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">2</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">3</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">4</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">6</span> <span class=\"o\">|</span> <span class=\"n\">D</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">5</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">2</span>     <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"mi\">6</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">00</span> <span class=\"n\">sec</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<h2>\n<span id=\"その他\" class=\"fragment\"></span><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\"><i class=\"fa fa-link\"></i></a>その他</h2>\n\n<p>昇順、降順をいじる場合</p>\n\n<p>name1順にならべたいけど、name2は降順でいてほしい。</p>\n\n<div class=\"code-frame\" data-lang=\"sql\"><div class=\"highlight\"><pre><code><span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">users</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">name1</span> <span class=\"k\">ASC</span><span class=\"p\">,</span> <span class=\"n\">name2</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span> <span class=\"n\">id</span>   <span class=\"o\">|</span> <span class=\"n\">name1</span> <span class=\"o\">|</span> <span class=\"n\">name2</span> <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"o\">|</span>    <span class=\"mi\">1</span> <span class=\"o\">|</span> <span class=\"n\">A</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">2</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">3</span> <span class=\"o\">|</span> <span class=\"n\">B</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">5</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">2</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">4</span> <span class=\"o\">|</span> <span class=\"k\">C</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">|</span>    <span class=\"mi\">6</span> <span class=\"o\">|</span> <span class=\"n\">D</span>     <span class=\"o\">|</span> <span class=\"mi\">1</span>     <span class=\"o\">|</span>\n<span class=\"o\">+</span><span class=\"c1\">------+-------+-------+</span>\n<span class=\"mi\">6</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">00</span> <span class=\"n\">sec</span><span class=\"p\">)</span>\n</code></pre></div></div>\n","body":"# mysqlで複数のorder by指定\n\n構文 is\n\n```sql\nSELECT *\nFROM tables\nORDER BY name1, name2\n;\n```\n\n知っている人からすると当たり前で何を今更って感じかもしれないのですが、\nname2でソートしてから、name1でソートされるみたいでした。\n\n## 動作確認のログ\n\n```bash\nvagrant@homestead:~$ mysql -V\nmysql  Ver 14.14 Distrib 5.7.31, for Linux (x86_64) using  EditLine wrapper\n\nmysql> create database sample;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> use sample;\nDatabase changed\n\nmysql> create table users (id int, name1 varchar(10), name2 varchar(10));\nQuery OK, 0 rows affected (0.04 sec)\n```\n\n```sql\ninsert into users values \n(1, 'A', '1')\n,(2, 'B', '1')\n,(3, 'B', '1')\n,(4, 'C', '1')\n,(5, 'C', '2')\n,(6, 'D', '1')\n;\n```\n\n```sql\nmysql> select *\n    -> from users\n    -> order by id;\n+------+-------+-------+\n| id   | name1 | name2 |\n+------+-------+-------+\n|    1 | A     | 1     |\n|    2 | B     | 1     |\n|    3 | B     | 1     |\n|    4 | C     | 1     |\n|    5 | C     | 2     |\n|    6 | D     | 1     |\n+------+-------+-------+\n6 rows in set (0.00 sec)\n```\n\n```sql\nmysql> select * from users order by name1, name2;\n+------+-------+-------+\n| id   | name1 | name2 |\n+------+-------+-------+\n|    1 | A     | 1     |\n|    2 | B     | 1     |\n|    3 | B     | 1     |\n|    4 | C     | 1     |\n|    5 | C     | 2     |\n|    6 | D     | 1     |\n+------+-------+-------+\n6 rows in set (0.00 sec)\n\nmysql> select * from users order by name2, name1;\n+------+-------+-------+\n| id   | name1 | name2 |\n+------+-------+-------+\n|    1 | A     | 1     |\n|    2 | B     | 1     |\n|    3 | B     | 1     |\n|    4 | C     | 1     |\n|    6 | D     | 1     |\n|    5 | C     | 2     |\n+------+-------+-------+\n6 rows in set (0.00 sec)\n```\n\n## その他\n\n昇順、降順をいじる場合\n\nname1順にならべたいけど、name2は降順でいてほしい。\n\n```sql\nmysql> SELECT * FROM users ORDER BY name1 ASC, name2 DESC;\n+------+-------+-------+\n| id   | name1 | name2 |\n+------+-------+-------+\n|    1 | A     | 1     |\n|    2 | B     | 1     |\n|    3 | B     | 1     |\n|    5 | C     | 2     |\n|    4 | C     | 1     |\n|    6 | D     | 1     |\n+------+-------+-------+\n6 rows in set (0.00 sec)\n```\n","coediting":false,"comments_count":1,"created_at":"2020-11-04T02:14:54+09:00","group":null,"id":"c45a2e3deda617824253","likes_count":3,"private":false,"reactions_count":0,"stocks_count":2,"tags":[{"name":"MySQL","versions":[]},{"name":"SQL","versions":[]}],"title":"mysqlで複数のorder by設定したときに少しハマった件","updated_at":"2020-11-04T02:14:54+09:00","url":"https://qiita.com/ykhirao/items/c45a2e3deda617824253","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:115\">\n<span id=\"本番運用しているphplaravelサーバーにgitを入れたいんだけどこれであってるのかな\" class=\"fragment\"></span><a href=\"#%E6%9C%AC%E7%95%AA%E9%81%8B%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8Bphplaravel%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%ABgit%E3%82%92%E5%85%A5%E3%82%8C%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9%E3%81%93%E3%82%8C%E3%81%A7%E3%81%82%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE%E3%81%8B%E3%81%AA\"><i class=\"fa fa-link\"></i></a>本番運用しているphp/Laravelサーバーにgitを入れたいんだけどこれであってるのかな。</h1>\n<p data-sourcepos=\"3:1-3:398\">こんにちは！ <a href=\"/ykhirao\" class=\"user-mention js-hovercard\" title=\"ykhirao\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"ykhirao\">@ykhirao</a> です！本番サーバーにFTPでぽちぽちアップロードしている現状ですが、 <code>ssh production</code> <code>git pull origin master</code> とかで本番コードを反映させたいなと夢みたいなことを考えています。適当に考えたベストプラクティス（たたき台ともいう）を投稿するのでマサカリください！！！！！</p>\n<h2 data-sourcepos=\"5:1-5:33\">\n<span id=\"手順の大まかなながれ\" class=\"fragment\"></span><a href=\"#%E6%89%8B%E9%A0%86%E3%81%AE%E5%A4%A7%E3%81%BE%E3%81%8B%E3%81%AA%E3%81%AA%E3%81%8C%E3%82%8C\"><i class=\"fa fa-link\"></i></a>手順の大まかなながれ</h2>\n<p data-sourcepos=\"7:1-7:45\">だいたいこんな状況を仮定すると</p>\n<ul data-sourcepos=\"9:1-12:0\">\n<li data-sourcepos=\"9:1-9:69\">ローカルブランチにgitを導入して、GitHubにpushする</li>\n<li data-sourcepos=\"10:1-10:86\">GitHubのレポジトリがあるし、masterブランチで最新になっている</li>\n<li data-sourcepos=\"11:1-12:0\">本番コードはだいたいmasterブランチと同じ、一部デプロイ忘れとかある</li>\n</ul>\n<p data-sourcepos=\"13:1-13:66\">こんなものかなと思う。それに対してやることは</p>\n<ul data-sourcepos=\"15:1-19:0\">\n<li data-sourcepos=\"15:1-15:77\">サーバー上で <code>ssh key-gen</code> して公開鍵・秘密鍵を作成する</li>\n<li data-sourcepos=\"16:1-16:116\">GitHubでデプロイキーを登録する（GitHubにデプロイユーザーとか作らなくていいよ！）</li>\n<li data-sourcepos=\"17:1-17:60\">.gitignoreが適切に設定されているか確認する</li>\n<li data-sourcepos=\"18:1-19:0\">特に.envファイルとか、storageフォルダとか、DB以外に本番とローカル環境で違うものがないかよく確認する</li>\n</ul>\n<p data-sourcepos=\"20:1-20:24\">とかでしょうか。</p>\n<h2 data-sourcepos=\"22:1-22:33\">\n<span id=\"実際の動作で確認する\" class=\"fragment\"></span><a href=\"#%E5%AE%9F%E9%9A%9B%E3%81%AE%E5%8B%95%E4%BD%9C%E3%81%A7%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>実際の動作で確認する</h2>\n<p data-sourcepos=\"24:1-25:42\">GitHubにレポジトリ作るのを省略するためにlocalにremote addする。<br>\nGitHubとして読み解いてほしい。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"27:1-38:3\"><div class=\"highlight\"><pre><code>yk@yk <span class=\"nb\">local</span> % git remote add origin /Users/yk/server/project.git\nyk@yk <span class=\"nb\">local</span> % <span class=\"nb\">cd</span> ..                 \nyk@yk server % <span class=\"nb\">ls\nlocal\t</span>prod\nyk@yk server % git clone <span class=\"nt\">--bare</span> <span class=\"nb\">local </span>project.git \nCloning into bare repository <span class=\"s1\">'project.git'</span>...\n<span class=\"k\">done</span><span class=\"nb\">.</span>\nyk@yk server % <span class=\"nb\">cd local \n</span>yk@yk <span class=\"nb\">local</span> % git push origin master                            \nEverything up-to-date\n</code></pre></div></div>\n<p data-sourcepos=\"40:1-40:134\">prodフォルダにcloneしてくる！！で <code>.git</code> フォルダを削除して、git管理下に置かれてない状況に戻す。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"42:1-68:3\"><div class=\"highlight\"><pre><code>yk@yk server % <span class=\"nb\">cd </span>prod\nyk@yk prod % <span class=\"nb\">ls\n</span>yk@yk prod % git clone /Users/yk/server/project.git <span class=\"nb\">.</span>\nCloning into <span class=\"s1\">'.'</span>...\n<span class=\"k\">done</span><span class=\"nb\">.</span>\nyk@yk prod % ll\ntotal 8\ndrwxr-xr-x   5 yk  staff  160  7 11 01:54 <span class=\"nb\">.</span>\ndrwxr-xr-x   5 yk  staff  160  7 11 01:51 ..\ndrwxr-xr-x  12 yk  staff  384  7 11 01:54 .git\n<span class=\"nt\">-rw-r--r--</span>   1 yk  staff   16  7 11 01:54 .gitignore\n<span class=\"nt\">-rw-r--r--</span>   1 yk  staff    0  7 11 01:54 README.md\n\nyk@yk prod % <span class=\"nb\">rm</span> <span class=\"nt\">-fr</span> .git\n\n<span class=\"c\"># 本番ではstorageフォルダに画像がたくさん溜まっていることを仮定</span>\nyk@yk prod % <span class=\"nb\">mkdir </span>storage\nyk@yk prod % <span class=\"nb\">touch </span>storage/image-prod.jpg\nyk@yk prod % <span class=\"nb\">touch </span>storage/image-prod2.jpg\nyk@yk prod % <span class=\"nb\">touch </span>storage/image-prod3.jpg\n\n<span class=\"c\"># .envファイル を本番用に書き換え</span>\nyk@yk prod % vim .env\nyk@yk prod % <span class=\"nb\">cat</span> .env \n<span class=\"nv\">APP</span><span class=\"o\">=</span>prod\n</code></pre></div></div>\n<p data-sourcepos=\"70:1-70:35\">いろいろlocalで作業した！</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"72:1-98:3\"><div class=\"highlight\"><pre><code>yk@yk server % <span class=\"nb\">cd local \n\n</span>yk@yk <span class=\"nb\">local</span> % <span class=\"nb\">echo</span> <span class=\"s2\">\"# README.md を追記\"</span> <span class=\"o\">&gt;&gt;</span> README.md \n\nyk@yk <span class=\"nb\">local</span> % git diff\ndiff <span class=\"nt\">--git</span> a/README.md b/README.md\nindex e69de29..7039b84 100644\n<span class=\"nt\">---</span> a/README.md\n+++ b/README.md\n@@ <span class=\"nt\">-0</span>,0 +1 @@\n+# README.md を追記\n\nyk@yk <span class=\"nb\">local</span> % git commit <span class=\"nt\">-am</span> <span class=\"s2\">\"Update\"</span>\n<span class=\"o\">[</span>master 1b9e11d] Update\n 1 file changed, 1 insertion<span class=\"o\">(</span>+<span class=\"o\">)</span>\n\nyk@yk <span class=\"nb\">local</span> % git push origin master\nEnumerating objects: 5, <span class=\"k\">done</span><span class=\"nb\">.</span>\nCounting objects: 100% <span class=\"o\">(</span>5/5<span class=\"o\">)</span>, <span class=\"k\">done</span><span class=\"nb\">.</span>\nDelta compression using up to 4 threads\nCompressing objects: 100% <span class=\"o\">(</span>2/2<span class=\"o\">)</span>, <span class=\"k\">done</span><span class=\"nb\">.</span>\nWriting objects: 100% <span class=\"o\">(</span>3/3<span class=\"o\">)</span>, 298 bytes | 298.00 KiB/s, <span class=\"k\">done</span><span class=\"nb\">.</span>\nTotal 3 <span class=\"o\">(</span>delta 0<span class=\"o\">)</span>, reused 0 <span class=\"o\">(</span>delta 0<span class=\"o\">)</span>\nTo /Users/yk/server/project.git\n   cf9a63e..1b9e11d  master -&gt; master\n</code></pre></div></div>\n<p data-sourcepos=\"100:1-100:69\">さてこの状況で本番にgitを導入しようと思います。</p>\n<ul data-sourcepos=\"102:1-105:0\">\n<li data-sourcepos=\"102:1-102:40\">少しlocalのほうが進んでいる</li>\n<li data-sourcepos=\"103:1-103:48\">.envファイルが書き換わるとまずい</li>\n<li data-sourcepos=\"104:1-105:0\">storage配下に画像たくさんあるけど.gitignoreしているから大丈夫なんだっけ？</li>\n</ul>\n<p data-sourcepos=\"106:1-106:66\">とかそんな感じの疑問を抱えつつ、見てみます。</p>\n<p data-sourcepos=\"108:1-108:312\">サーバーで <code>ssh-keygen</code> をして 公開鍵を GitHubのこのあたり<a href=\"https://github.com/XXXXX/XXXXX/settings/keys\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/XXXXX/XXXXX/settings/keys</a> に登録すると、privateレポジトリでも、いい感じにpullとかできるようになります。デプロイユーザーとかをGitHubに登録しなくても大丈夫です。</p>\n<p data-sourcepos=\"111:1-111:83\">本番のプロジェクトにはgit initされていない状態を確認する。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"113:1-116:3\"><div class=\"highlight\"><pre><code>yk@yk prod % git log\nfatal: not a git repository <span class=\"o\">(</span>or any of the parent directories<span class=\"o\">)</span>: .git\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"118:1-123:3\"><div class=\"highlight\"><pre><code>yk@yk prod % git init \nInitialized empty Git repository <span class=\"k\">in</span> /Users/yk/server/prod/.git/\nyk@yk prod % git log\nfatal: your current branch <span class=\"s1\">'master'</span> does not have any commits yet\n</code></pre></div></div>\n<p data-sourcepos=\"125:1-125:136\">masterブランチもないし、操作できない状態なので、remoteでGitHubとかを指定して、pullしてきましょう。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"127:1-143:3\"><div class=\"highlight\"><pre><code>yk@yk prod % git remote add origin /Users/yk/server/project.git \nyk@yk prod % git pull origin master\nremote: Enumerating objects: 7, <span class=\"k\">done</span><span class=\"nb\">.</span>\nremote: Counting objects: 100% <span class=\"o\">(</span>7/7<span class=\"o\">)</span>, <span class=\"k\">done</span><span class=\"nb\">.</span>\nremote: Compressing objects: 100% <span class=\"o\">(</span>4/4<span class=\"o\">)</span>, <span class=\"k\">done</span><span class=\"nb\">.</span>\nremote: Total 7 <span class=\"o\">(</span>delta 0<span class=\"o\">)</span>, reused 0 <span class=\"o\">(</span>delta 0<span class=\"o\">)</span>\nUnpacking objects: 100% <span class=\"o\">(</span>7/7<span class=\"o\">)</span>, 516 bytes | 103.00 KiB/s, <span class=\"k\">done</span><span class=\"nb\">.</span>\nFrom /Users/yk/server/project\n <span class=\"k\">*</span> branch            master     -&gt; FETCH_HEAD\n <span class=\"k\">*</span> <span class=\"o\">[</span>new branch]      master     -&gt; origin/master\nerror: The following untracked working tree files would be overwritten by merge:\n\t.gitignore\n\tREADME.md\nPlease move or remove them before you merge.\nAborting\n</code></pre></div></div>\n<p data-sourcepos=\"146:1-146:15\">いい感じ。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"149:1-163:3\"><div class=\"highlight\"><pre><code>yk@yk prod % git log\nfatal: your current branch <span class=\"s1\">'master'</span> does not have any commits yet\nyk@yk prod % git status                   \nOn branch master\n\nNo commits yet\n\nUntracked files:\n  <span class=\"o\">(</span>use <span class=\"s2\">\"git add &lt;file&gt;...\"</span> to include <span class=\"k\">in </span>what will be committed<span class=\"o\">)</span>\n\t.gitignore\n\tREADME.md\n\nnothing added to commit but untracked files present <span class=\"o\">(</span>use <span class=\"s2\">\"git add\"</span> to track<span class=\"o\">)</span>\n</code></pre></div></div>\n<p data-sourcepos=\"165:1-165:84\">まだlogも見れないのでブランチを切り替えて一旦コミットする</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"167:1-179:3\"><div class=\"highlight\"><pre><code>yk@yk prod % git checkout <span class=\"nt\">-b</span> master-backup\nSwitched to a new branch <span class=\"s1\">'master-backup'</span>\nyk@yk prod % git add <span class=\"nb\">.</span>\nyk@yk prod % git commit <span class=\"nt\">-m</span> <span class=\"s2\">\"マスターのバックアップ\"</span>\n<span class=\"o\">[</span>master-backup <span class=\"o\">(</span>root-commit<span class=\"o\">)</span> a6fd38c] マスターのバックアップ\n 2 files changed, 3 insertions<span class=\"o\">(</span>+<span class=\"o\">)</span>\n create mode 100644 .gitignore\n create mode 100644 README.md\n\nyk@yk prod % git branch\n<span class=\"k\">*</span> master-backup\n</code></pre></div></div>\n<p data-sourcepos=\"181:1-181:60\">大丈夫そう。masterにチェックアウトしてみる</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"184:1-201:3\"><div class=\"highlight\"><pre><code>yk@yk prod % git checkout master\nBranch <span class=\"s1\">'master'</span> <span class=\"nb\">set </span>up to track remote branch <span class=\"s1\">'master'</span> from <span class=\"s1\">'origin'</span><span class=\"nb\">.</span>\nSwitched to a new branch <span class=\"s1\">'master'</span>\n\nyk@yk prod % git log\ncommit 1b9e11d15bda2ecdec75a8d205bdbdec185a9388 <span class=\"o\">(</span>HEAD -&gt; master, origin/master<span class=\"o\">)</span>\nAuthor: Yuki &lt;yuki@example.com&gt;\nDate:   Sat Jul 11 02:01:05 2020 +0900\n\n    Update\n\ncommit cf9a63ebb4676faa949aa29a9fdf56244ed313d0\nAuthor: Yuki &lt;yuki@example.com&gt;\nDate:   Sat Jul 11 01:48:36 2020 +0900\n\n    init\n</code></pre></div></div>\n<p data-sourcepos=\"203:1-204:62\"><code>Update</code> という変更はまだ <code>prod</code> フォルダには適応させてなかったのに、きちんとpullされていることがわかりますね！<br>\nこれで最新ブランチの適応はOKかと思います。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"206:1-211:3\"><div class=\"highlight\"><pre><code>yk@yk prod % <span class=\"nb\">cat</span> .env \n<span class=\"nv\">APP</span><span class=\"o\">=</span>prod\nyk@yk prod % <span class=\"nb\">ls </span>storage \nimage-prod.jpg\timage-prod2.jpg\timage-prod3.jpg\n</code></pre></div></div>\n<p data-sourcepos=\"213:1-214:83\"><code>.env</code> ファイルとか <code>storage/</code> とか <code>.gitignore</code> に記述しているものは書き換わってないことがわかります。<br>\nもちろんlocalファイルは <code>AA=local</code> ときちんとなったままです。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"216:1-219:3\"><div class=\"highlight\"><pre><code>yk@yk prod % <span class=\"nb\">cat</span> ../local/.env \n<span class=\"nv\">APP</span><span class=\"o\">=</span><span class=\"nb\">local</span>\n</code></pre></div></div>\n<h2 data-sourcepos=\"221:1-221:12\">\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n<p data-sourcepos=\"223:1-223:201\">こんな感じでサーバー上で <code>git init</code> して <code>remote add</code> <code>checkout -b</code> <code>git add .</code> <code>git commit</code> <code>git checkout master</code> って流れでいい感じにgit適応できる気がしたのです。</p>\n<p data-sourcepos=\"225:1-226:162\">あまりこのあたりちゃんとまとめられてなかったので、サーバー運用得意な方いたら編集リクエスト、<br>\nコメント欄記入、自分なりのやつを投稿、何でも構いませんので後世に残せるいいドキュメントになればと思ってます。</p>\n<p data-sourcepos=\"230:1-230:3\">。</p>\n","body":"# 本番運用しているphp/Laravelサーバーにgitを入れたいんだけどこれであってるのかな。\n\nこんにちは！ @ykhirao です！本番サーバーにFTPでぽちぽちアップロードしている現状ですが、 `ssh production` `git pull origin master` とかで本番コードを反映させたいなと夢みたいなことを考えています。適当に考えたベストプラクティス（たたき台ともいう）を投稿するのでマサカリください！！！！！\n\n## 手順の大まかなながれ\n\nだいたいこんな状況を仮定すると\n\n- ローカルブランチにgitを導入して、GitHubにpushする\n- GitHubのレポジトリがあるし、masterブランチで最新になっている\n- 本番コードはだいたいmasterブランチと同じ、一部デプロイ忘れとかある\n\nこんなものかなと思う。それに対してやることは\n\n- サーバー上で `ssh key-gen` して公開鍵・秘密鍵を作成する\n- GitHubでデプロイキーを登録する（GitHubにデプロイユーザーとか作らなくていいよ！）\n- .gitignoreが適切に設定されているか確認する\n- 特に.envファイルとか、storageフォルダとか、DB以外に本番とローカル環境で違うものがないかよく確認する\n\nとかでしょうか。\n\n## 実際の動作で確認する\n\nGitHubにレポジトリ作るのを省略するためにlocalにremote addする。\nGitHubとして読み解いてほしい。\n\n```bash\nyk@yk local % git remote add origin /Users/yk/server/project.git\nyk@yk local % cd ..                 \nyk@yk server % ls\nlocal\tprod\nyk@yk server % git clone --bare local project.git \nCloning into bare repository 'project.git'...\ndone.\nyk@yk server % cd local \nyk@yk local % git push origin master                            \nEverything up-to-date\n```\n\nprodフォルダにcloneしてくる！！で `.git` フォルダを削除して、git管理下に置かれてない状況に戻す。\n\n```bash\nyk@yk server % cd prod\nyk@yk prod % ls\nyk@yk prod % git clone /Users/yk/server/project.git .\nCloning into '.'...\ndone.\nyk@yk prod % ll\ntotal 8\ndrwxr-xr-x   5 yk  staff  160  7 11 01:54 .\ndrwxr-xr-x   5 yk  staff  160  7 11 01:51 ..\ndrwxr-xr-x  12 yk  staff  384  7 11 01:54 .git\n-rw-r--r--   1 yk  staff   16  7 11 01:54 .gitignore\n-rw-r--r--   1 yk  staff    0  7 11 01:54 README.md\n\nyk@yk prod % rm -fr .git\n\n# 本番ではstorageフォルダに画像がたくさん溜まっていることを仮定\nyk@yk prod % mkdir storage\nyk@yk prod % touch storage/image-prod.jpg\nyk@yk prod % touch storage/image-prod2.jpg\nyk@yk prod % touch storage/image-prod3.jpg\n\n# .envファイル を本番用に書き換え\nyk@yk prod % vim .env\nyk@yk prod % cat .env \nAPP=prod\n```\n\nいろいろlocalで作業した！\n\n```bash\nyk@yk server % cd local \n\nyk@yk local % echo \"# README.md を追記\" >> README.md \n\nyk@yk local % git diff\ndiff --git a/README.md b/README.md\nindex e69de29..7039b84 100644\n--- a/README.md\n+++ b/README.md\n@@ -0,0 +1 @@\n+# README.md を追記\n\nyk@yk local % git commit -am \"Update\"\n[master 1b9e11d] Update\n 1 file changed, 1 insertion(+)\n\nyk@yk local % git push origin master\nEnumerating objects: 5, done.\nCounting objects: 100% (5/5), done.\nDelta compression using up to 4 threads\nCompressing objects: 100% (2/2), done.\nWriting objects: 100% (3/3), 298 bytes | 298.00 KiB/s, done.\nTotal 3 (delta 0), reused 0 (delta 0)\nTo /Users/yk/server/project.git\n   cf9a63e..1b9e11d  master -> master\n```\n\nさてこの状況で本番にgitを導入しようと思います。\n\n- 少しlocalのほうが進んでいる\n- .envファイルが書き換わるとまずい\n- storage配下に画像たくさんあるけど.gitignoreしているから大丈夫なんだっけ？\n\nとかそんな感じの疑問を抱えつつ、見てみます。\n\nサーバーで `ssh-keygen` をして 公開鍵を GitHubのこのあたりhttps://github.com/XXXXX/XXXXX/settings/keys に登録すると、privateレポジトリでも、いい感じにpullとかできるようになります。デプロイユーザーとかをGitHubに登録しなくても大丈夫です。\n\n\n本番のプロジェクトにはgit initされていない状態を確認する。\n\n```bash\nyk@yk prod % git log\nfatal: not a git repository (or any of the parent directories): .git\n```\n\n```bash\nyk@yk prod % git init \nInitialized empty Git repository in /Users/yk/server/prod/.git/\nyk@yk prod % git log\nfatal: your current branch 'master' does not have any commits yet\n```\n\nmasterブランチもないし、操作できない状態なので、remoteでGitHubとかを指定して、pullしてきましょう。\n\n```bash\nyk@yk prod % git remote add origin /Users/yk/server/project.git \nyk@yk prod % git pull origin master\nremote: Enumerating objects: 7, done.\nremote: Counting objects: 100% (7/7), done.\nremote: Compressing objects: 100% (4/4), done.\nremote: Total 7 (delta 0), reused 0 (delta 0)\nUnpacking objects: 100% (7/7), 516 bytes | 103.00 KiB/s, done.\nFrom /Users/yk/server/project\n * branch            master     -> FETCH_HEAD\n * [new branch]      master     -> origin/master\nerror: The following untracked working tree files would be overwritten by merge:\n\t.gitignore\n\tREADME.md\nPlease move or remove them before you merge.\nAborting\n```\n\n\nいい感じ。\n\n\n```bash\nyk@yk prod % git log\nfatal: your current branch 'master' does not have any commits yet\nyk@yk prod % git status                   \nOn branch master\n\nNo commits yet\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\t.gitignore\n\tREADME.md\n\nnothing added to commit but untracked files present (use \"git add\" to track)\n```\n\nまだlogも見れないのでブランチを切り替えて一旦コミットする\n\n```bash\nyk@yk prod % git checkout -b master-backup\nSwitched to a new branch 'master-backup'\nyk@yk prod % git add .\nyk@yk prod % git commit -m \"マスターのバックアップ\"\n[master-backup (root-commit) a6fd38c] マスターのバックアップ\n 2 files changed, 3 insertions(+)\n create mode 100644 .gitignore\n create mode 100644 README.md\n\nyk@yk prod % git branch\n* master-backup\n```\n\n大丈夫そう。masterにチェックアウトしてみる\n\n\n```bash\nyk@yk prod % git checkout master\nBranch 'master' set up to track remote branch 'master' from 'origin'.\nSwitched to a new branch 'master'\n\nyk@yk prod % git log\ncommit 1b9e11d15bda2ecdec75a8d205bdbdec185a9388 (HEAD -> master, origin/master)\nAuthor: Yuki <yuki@example.com>\nDate:   Sat Jul 11 02:01:05 2020 +0900\n\n    Update\n\ncommit cf9a63ebb4676faa949aa29a9fdf56244ed313d0\nAuthor: Yuki <yuki@example.com>\nDate:   Sat Jul 11 01:48:36 2020 +0900\n\n    init\n```\n\n`Update` という変更はまだ `prod` フォルダには適応させてなかったのに、きちんとpullされていることがわかりますね！\nこれで最新ブランチの適応はOKかと思います。\n\n```bash\nyk@yk prod % cat .env \nAPP=prod\nyk@yk prod % ls storage \nimage-prod.jpg\timage-prod2.jpg\timage-prod3.jpg\n```\n\n`.env` ファイルとか `storage/` とか `.gitignore` に記述しているものは書き換わってないことがわかります。\nもちろんlocalファイルは `AA=local` ときちんとなったままです。\n\n```bash\nyk@yk prod % cat ../local/.env \nAPP=local\n```\n\n## まとめ\n\nこんな感じでサーバー上で `git init` して `remote add` `checkout -b` `git add .` `git commit` `git checkout master` って流れでいい感じにgit適応できる気がしたのです。\n\nあまりこのあたりちゃんとまとめられてなかったので、サーバー運用得意な方いたら編集リクエスト、\nコメント欄記入、自分なりのやつを投稿、何でも構いませんので後世に残せるいいドキュメントになればと思ってます。\n\n\n\n。\n","coediting":false,"comments_count":0,"created_at":"2020-07-14T09:36:07+09:00","group":null,"id":"b555dc7e550257fce5f2","likes_count":0,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"PHP","versions":[]},{"name":"Git","versions":[]},{"name":"GitHub","versions":[]}],"title":"本番運用しているサーバーにgit/GitHubを導入するときのベストプラクティスとマサカリ","updated_at":"2023-06-20T17:46:57+09:00","url":"https://qiita.com/ykhirao/items/b555dc7e550257fce5f2","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"lockファイルって邪魔だよねって思っている人いたら校舎裏来てください優しく解説します\" class=\"fragment\"></span><a href=\"#lock%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A3%E3%81%A6%E9%82%AA%E9%AD%94%E3%81%A0%E3%82%88%E3%81%AD%E3%81%A3%E3%81%A6%E6%80%9D%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E4%BA%BA%E3%81%84%E3%81%9F%E3%82%89%E6%A0%A1%E8%88%8E%E8%A3%8F%E6%9D%A5%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%E5%84%AA%E3%81%97%E3%81%8F%E8%A7%A3%E8%AA%AC%E3%81%97%E3%81%BE%E3%81%99\"><i class=\"fa fa-link\"></i></a>.lockファイルって邪魔だよね。って思っている人いたら校舎裏来てください。優しく解説します。</h1>\n\n<p>こんにちは！ <a href=\"/ykhirao\" class=\"user-mention js-hovercard\" title=\"ykhirao\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"ykhirao\">@ykhirao</a> です。最近ジョインさせていただいた案件で <code>composer.lock</code> のバージョンが本番が一番新しくて、ローカルが一番古い素敵な状況を発見しました <img alt=\":relaxed:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/263a-fe0f.png\" title=\":relaxed:\" width=\"20\" loading=\"lazy\"></p>\n\n<p>本番環境でSSHして <code>composer update</code> かけたんだなあーー。そっかーーー、バグ起きたらどないすんねん、。。。。。。</p>\n\n<p>というのが私の感想で、実際にnpmパッケージを使ってバグを再現しながら<br>\nゆっくり解説していこうと思います。どうぞ最後までよろしくお願いします。！！！</p>\n\n<blockquote>\n<p>このQiitaを呼んで得ること</p>\n</blockquote>\n\n<ul>\n<li>あーー、ほんとだ。バグが入る可能性があるんだ！</li>\n<li>lockファイルはちゃんとコミットするね！</li>\n</ul>\n\n<p>というお気持ちになれると思います。</p>\n\n<blockquote>\n<p>このQiitaで解説しないこと</p>\n</blockquote>\n\n<ul>\n<li>詳しい依存関係の解消法</li>\n<li>packageの公開の仕方</li>\n<li>むずかしいはなし</li>\n</ul>\n\n<p>です！</p>\n\n<h2>\n<span id=\"さて時系列を見てみよう\" class=\"fragment\"></span><a href=\"#%E3%81%95%E3%81%A6%E6%99%82%E7%B3%BB%E5%88%97%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"><i class=\"fa fa-link\"></i></a>さて時系列を見てみよう！</h2>\n\n<p>こんな事故が起こる可能性がありますよって話をします。</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">時系列</th>\n<th style=\"text-align: center\">OSSのmypackage.js</th>\n<th style=\"text-align: center\">ローカル</th>\n<th style=\"text-align: center\">本番サーバー</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">1日目</td>\n<td style=\"text-align: center\">v1.0.0公開</td>\n<td style=\"text-align: center\">動いている</td>\n<td style=\"text-align: center\">動いている</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">2日目</td>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\">ローカルでmypackage.jsをinstall<br>動作確認OK、明後日本番に適応させる</td>\n<td style=\"text-align: center\"></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">3日目</td>\n<td style=\"text-align: center\">v1.0.1公開 バグあり</td>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\"></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">4日目</td>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\">本番サーバーで新しいコードを反映、install。本番が動かなくなってしまった。ぴえん<br>もちろんソースコードはローカルと同じだし、ローカルで動いていたのになんで…？<img alt=\":flushed:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f633.png\" title=\":flushed:\" width=\"20\" loading=\"lazy\">\n</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">5日目</td>\n<td style=\"text-align: center\">v1.0.2公開 バグ修正された</td>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\"></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">6日目</td>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\">v1.0.2を適応ローカル確認OK<br> 今度はlockファイルを本番にアップロードする予定！</td>\n<td style=\"text-align: center\"></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">7日目</td>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\">package-lock.jsonを使ってinstallする！今度は動いた！</td>\n</tr>\n</tbody>\n</table>\n\n<h2>\n<span id=\"npmでパッケージを作りながら説明する\" class=\"fragment\"></span><a href=\"#npm%E3%81%A7%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E3%82%8A%E3%81%AA%E3%81%8C%E3%82%89%E8%AA%AC%E6%98%8E%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>npmでパッケージを作りながら説明する</h2>\n\n<p>OSSっぽい動作をするpackageフォルダと、ローカル環境と本番環境っぽいフォルダを作る。</p>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>yk@yk ~ % <span class=\"nb\">cd </span>qiita \nyk@yk qiita % <span class=\"nb\">mkdir </span>package\nyk@yk qiita % <span class=\"nb\">mkdir local\n</span>yk@yk qiita % <span class=\"nb\">mkdir </span>production\nyk@yk qiita % ll\ntotal 0\ndrwxr-xr-x   5 yk  staff   160  7 11 00:34 <span class=\"nb\">.</span>\ndrwxr-xr-x+ 83 yk  staff  2656  7 11 00:33 ..\ndrwxr-xr-x   2 yk  staff    64  7 11 00:34 <span class=\"nb\">local\n</span>drwxr-xr-x   2 yk  staff    64  7 11 00:34 package\ndrwxr-xr-x   2 yk  staff    64  7 11 00:34 production\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>yk@yk qiita % <span class=\"nb\">cd </span>package \nyk@yk package % npm init <span class=\"nt\">-y</span>\nWrote to /Users/yk/qiita/package/package.json:\n\n<span class=\"o\">{</span>\n  <span class=\"s2\">\"name\"</span>: <span class=\"s2\">\"package\"</span>,\n  <span class=\"s2\">\"version\"</span>: <span class=\"s2\">\"1.0.0\"</span>,\n  <span class=\"s2\">\"description\"</span>: <span class=\"s2\">\"\"</span>,\n  <span class=\"s2\">\"main\"</span>: <span class=\"s2\">\"index.js\"</span>,\n  <span class=\"s2\">\"scripts\"</span>: <span class=\"o\">{</span>\n    <span class=\"s2\">\"test\"</span>: <span class=\"s2\">\"echo </span><span class=\"se\">\\\"</span><span class=\"s2\">Error: no test specified</span><span class=\"se\">\\\"</span><span class=\"s2\"> &amp;&amp; exit 1\"</span>\n  <span class=\"o\">}</span>,\n  <span class=\"s2\">\"keywords\"</span>: <span class=\"o\">[]</span>,\n  <span class=\"s2\">\"author\"</span>: <span class=\"s2\">\"\"</span>,\n  <span class=\"s2\">\"license\"</span>: <span class=\"s2\">\"ISC\"</span>\n<span class=\"o\">}</span>\n\n\nyk@yk package % vim package.json\nyk@yk package % vim index.js\nyk@yk package % npm publish <span class=\"nt\">--access</span><span class=\"o\">=</span>public\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN package@1.0.0 No description\nnpm WARN package@1.0.0 No repository field.\n\nup to <span class=\"nb\">date </span><span class=\"k\">in </span>0.429s\nfound 0 vulnerabilities\n\n/Users/yk/.nodebrew/node/v13.8.0/lib/node_modules/package -&gt; /Users/yk/qiita/package\n\nyk@yk package % <span class=\"nb\">cat </span>index.js \nconst text <span class=\"o\">=</span> <span class=\"s2\">\"sample\"</span>\n\nmodule.exports <span class=\"o\">=</span> text<span class=\"p\">;</span>\n</code></pre></div></div>\n\n<p>index.jsにただただ \"sample\" という文字列を返す動作を記述して、パッケージとして認識させる。 <br>\n<code>@y_hirao/mypackage</code> というパッケージをnpmに公開した。</p>\n\n<p>localフォルダでいろいろゴリゴリしてみる。</p>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>yk@yk <span class=\"nb\">local</span> % npm init <span class=\"nt\">-y</span>\nWrote to /Users/yk/qiita/local/package.json:\n\n<span class=\"o\">{</span>\n  <span class=\"s2\">\"name\"</span>: <span class=\"s2\">\"local\"</span>,\n  <span class=\"s2\">\"version\"</span>: <span class=\"s2\">\"1.0.0\"</span>,\n  <span class=\"s2\">\"main\"</span>: <span class=\"s2\">\"index.js\"</span>,\n  <span class=\"s2\">\"scripts\"</span>: <span class=\"o\">{</span>\n    <span class=\"s2\">\"test\"</span>: <span class=\"s2\">\"echo </span><span class=\"se\">\\\"</span><span class=\"s2\">Error: no test specified</span><span class=\"se\">\\\"</span><span class=\"s2\"> &amp;&amp; exit 1\"</span>\n  <span class=\"o\">}</span>,\n  <span class=\"s2\">\"keywords\"</span>: <span class=\"o\">[]</span>,\n  <span class=\"s2\">\"author\"</span>: <span class=\"s2\">\"\"</span>,\n  <span class=\"s2\">\"license\"</span>: <span class=\"s2\">\"ISC\"</span>,\n  <span class=\"s2\">\"dependencies\"</span>: <span class=\"o\">{</span>\n    <span class=\"s2\">\"@y_hirao/mypackage\"</span>: <span class=\"s2\">\"^1.0.0\"</span>\n  <span class=\"o\">}</span>,\n  <span class=\"s2\">\"devDependencies\"</span>: <span class=\"o\">{}</span>,\n  <span class=\"s2\">\"description\"</span>: <span class=\"s2\">\"\"</span>\n<span class=\"o\">}</span>\n\n\nyk@yk <span class=\"nb\">local</span> % <span class=\"nb\">cat </span>index.js \nconst text <span class=\"o\">=</span> require<span class=\"o\">(</span><span class=\"s2\">\"@y_hirao/mypackage\"</span><span class=\"o\">)</span><span class=\"p\">;</span>\nconsole.log<span class=\"o\">(</span>text<span class=\"o\">)</span>\n\nyk@yk <span class=\"nb\">local</span> % node index.js \nsample\n</code></pre></div></div>\n\n<p>sampleという文字列が返却されました。！！！！！！！！！</p>\n\n<p>このときpackage.jsonを見ると <code>^</code> キャレット指定なのでバージョンアップは <code>1.系</code> は守られるけど残りはすべてアップデートされます。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>  \"dependencies\": {\n    \"@y_hirao/mypackage\": \"^1.0.0\"\n  },\n</code></pre></div></div>\n\n<p>さてパッケージの方を更新します。 <code>v1.0.2</code> にしましょう！</p>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>yk@yk package % <span class=\"nb\">cat </span>package.json \n<span class=\"o\">{</span>\n  <span class=\"s2\">\"name\"</span>: <span class=\"s2\">\"@y_hirao/mypackage\"</span>,\n  <span class=\"s2\">\"version\"</span>: <span class=\"s2\">\"1.0.2\"</span>,\n  <span class=\"s2\">\"description\"</span>: <span class=\"s2\">\"\"</span>,\n  <span class=\"s2\">\"main\"</span>: <span class=\"s2\">\"index.js\"</span>,\n  <span class=\"s2\">\"scripts\"</span>: <span class=\"o\">{</span>\n    <span class=\"s2\">\"test\"</span>: <span class=\"s2\">\"echo </span><span class=\"se\">\\\"</span><span class=\"s2\">Error: no test specified</span><span class=\"se\">\\\"</span><span class=\"s2\"> &amp;&amp; exit 1\"</span>\n  <span class=\"o\">}</span>,\n  <span class=\"s2\">\"keywords\"</span>: <span class=\"o\">[]</span>,\n  <span class=\"s2\">\"author\"</span>: <span class=\"s2\">\"\"</span>,\n  <span class=\"s2\">\"license\"</span>: <span class=\"s2\">\"ISC\"</span>\n<span class=\"o\">}</span>\n\nyk@yk package % <span class=\"nb\">cat </span>index.js    \nconst text <span class=\"o\">=</span> <span class=\"s2\">\"sample2\"</span>\nthrow <span class=\"s1\">'エラーを出したい気分'</span><span class=\"p\">;</span>\n\nmodule.exports <span class=\"o\">=</span> text<span class=\"p\">;</span>\nyk@yk package % npm publish   \n</code></pre></div></div>\n\n<p>このパッケージをそのまま使うとthrowされます。</p>\n\n<p>さてローカルでinstallしてみましょう！</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>yk@yk local % npm install\nnpm WARN local@1.0.0 No description\nnpm WARN local@1.0.0 No repository field.\n\naudited 1 package in 0.411s\nfound 0 vulnerabilities\n\nyk@yk\n</code></pre></div></div>\n\n<p>あれ、エラーが起きませんね。<br>\nこれは 一度ダウンロードしたパッケージはlockファイルというものでバージョン指定されているので、新しく勝手にバージョンがあがったりしないのです。</p>\n\n<p>さてローカルから本番環境に package.json と index.js をコピーしてnpm installして動かしてみましょう！</p>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>yk@yk production % <span class=\"nb\">cp</span> ../local/package.json package.json\nyk@yk production % <span class=\"nb\">cp</span> ../local/index.js index.js        \nyk@yk production % npm i\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN <span class=\"nb\">local</span>@1.0.0 No description\nnpm WARN <span class=\"nb\">local</span>@1.0.0 No repository field.\n\nadded 1 package and audited 1 package <span class=\"k\">in </span>2.811s\nfound 0 vulnerabilities\n\nyk@yk production % node index.js \n\n/Users/yk/qiita/production/node_modules/@y_hirao/mypackage/index.js:2\nthrow <span class=\"s1\">'エラーを出したい気分'</span><span class=\"p\">;</span>\n^\nエラーを出したい気分\n<span class=\"o\">(</span>Use <span class=\"sb\">`</span>node <span class=\"nt\">--trace-uncaught</span> ...<span class=\"sb\">`</span> to show where the exception was thrown<span class=\"o\">)</span>\n</code></pre></div></div>\n\n<p>さて、、、本番環境でinstallを走らせるとエラーがおきました。。。。</p>\n\n<p><code>npm install</code> したときに <code>package-lock.json</code> がないと <code>package.json</code> を使って <code>^1.0.0</code> が指定されているので <code>1.系で一番新しいもの</code> つまり今回だとバグが混入している <code>v1.0.2</code> がインストールされたことになります。</p>\n\n<p>lockファイルを見てみましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>yk@yk production % <span class=\"nb\">cat </span>package-lock.json \n<span class=\"o\">{</span>\n  <span class=\"s2\">\"name\"</span>: <span class=\"s2\">\"local\"</span>,\n  <span class=\"s2\">\"version\"</span>: <span class=\"s2\">\"1.0.0\"</span>,\n  <span class=\"s2\">\"lockfileVersion\"</span>: 1,\n  <span class=\"s2\">\"requires\"</span>: <span class=\"nb\">true</span>,\n  <span class=\"s2\">\"dependencies\"</span>: <span class=\"o\">{</span>\n    <span class=\"s2\">\"@y_hirao/mypackage\"</span>: <span class=\"o\">{</span>\n      <span class=\"s2\">\"version\"</span>: <span class=\"s2\">\"1.0.2\"</span>,\n      <span class=\"s2\">\"resolved\"</span>: <span class=\"s2\">\"https://registry.npmjs.org/@y_hirao/mypackage/-/mypackage-1.0.2.tgz\"</span>,\n      <span class=\"s2\">\"integrity\"</span>: <span class=\"s2\">\"sha512-W2RoQsC1FVnHxximVJMovEvfl/3WNI95EjGxPbMlmyuDZ+0SImS76dOII/0AiP4cVVjXZUbFzaLs9h6l8TrrFQ==\"</span>\n    <span class=\"o\">}</span>\n  <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</code></pre></div></div>\n\n<p>まさしく <code>v1.0.2</code> が指定されていますね！localだともちろん最初に <code>npm install</code> したときに最新だった <code>@y_hirao/mypackage</code> の <code>v1.0.0</code> が使われています。</p>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>yk@yk <span class=\"nb\">local</span> % <span class=\"nb\">cat </span>package-lock.json \n<span class=\"o\">{</span>\n  <span class=\"s2\">\"name\"</span>: <span class=\"s2\">\"local\"</span>,\n  <span class=\"s2\">\"version\"</span>: <span class=\"s2\">\"1.0.0\"</span>,\n  <span class=\"s2\">\"lockfileVersion\"</span>: 1,\n  <span class=\"s2\">\"requires\"</span>: <span class=\"nb\">true</span>,\n  <span class=\"s2\">\"dependencies\"</span>: <span class=\"o\">{</span>\n    <span class=\"s2\">\"@y_hirao/mypackage\"</span>: <span class=\"o\">{</span>\n      <span class=\"s2\">\"version\"</span>: <span class=\"s2\">\"1.0.0\"</span>,\n      <span class=\"s2\">\"resolved\"</span>: <span class=\"s2\">\"https://registry.npmjs.org/@y_hirao/mypackage/-/mypackage-1.0.0.tgz\"</span>,\n      <span class=\"s2\">\"integrity\"</span>: <span class=\"s2\">\"sha512-auQ5grIpWd0IRkMR3rn6xRjIhGZqBu/Q/g1lDkS5AWakAysrZ3iQAIRngbgBGBAFlPZxQ/LCVYdAW+3VLxeSEw==\"</span>\n    <span class=\"o\">}</span>\n  <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</code></pre></div></div>\n\n<p>更にインストールされているフォルダを確認しても</p>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>yk@yk production % <span class=\"nb\">cat </span>node_modules/@y_hirao/mypackage/index.js\nconst text <span class=\"o\">=</span> <span class=\"s2\">\"sample2\"</span>\nthrow <span class=\"s1\">'エラーを出したい気分'</span><span class=\"p\">;</span>\n\nmodule.exports <span class=\"o\">=</span> text<span class=\"p\">;</span>\nyk@yk production % \n</code></pre></div></div>\n\n<p>どう見てもエラーが起きそうです。</p>\n\n<p>package-lock.jsonをlocalからコピーしてきましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>yk@yk production % <span class=\"nb\">cp</span> ../local/package-lock.json package-lock.json\nyk@yk production % npm i\nnpm WARN <span class=\"nb\">local</span>@1.0.0 No description\nnpm WARN <span class=\"nb\">local</span>@1.0.0 No repository field.\n\nupdated 1 package and audited 1 package <span class=\"k\">in </span>0.45s\nfound 0 vulnerabilities\n\nyk@yk production % <span class=\"nb\">cat </span>node_modules/@y_hirao/mypackage/index.js\nconst text <span class=\"o\">=</span> <span class=\"s2\">\"sample\"</span>\n\nmodule.exports <span class=\"o\">=</span> text<span class=\"p\">;</span>\nyk@yk production % node index.js \nsample\nyk@yk production % \n</code></pre></div></div>\n\n<p>lockファイルを持ってきてインストールするだけで、エラーが起きなくなりました！ <img alt=\":clap:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44f.png\" title=\":clap:\" width=\"20\" loading=\"lazy\"><img alt=\":clap:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44f.png\" title=\":clap:\" width=\"20\" loading=\"lazy\"><img alt=\":clap:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44f.png\" title=\":clap:\" width=\"20\" loading=\"lazy\"><img alt=\":clap:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44f.png\" title=\":clap:\" width=\"20\" loading=\"lazy\"><img alt=\":clap:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44f.png\" title=\":clap:\" width=\"20\" loading=\"lazy\"> </p>\n\n<h2>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n\n<p>本番環境で lockファイルごと更新する <code>composer update</code> とかlockファイルの存在しない状態での <code>npm install</code> とか、そんなことはやめましょう。ってことを主張したいです！！！！！</p>\n\n<p>ローカルでしっかり確認してlockファイルを作り、それを本番にアップロードして、lockファイルの状態で依存パッケージをインストールしちゃってください。。 <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"> </p>\n\n<p>インストールする時期によって最新のバージョンが使われるので、もしそのバージョンにバグがあるのなら本番死んじゃいますよ。。</p>\n\n<h2>\n<span id=\"終わりに\" class=\"fragment\"></span><a href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>終わりに</h2>\n\n<p>新しい会社に入って色々根本的に変えたいところがあるので、最近はdevopsの領域をごりごり触らせていただいてます。環境構築、開発フローの策定とかもろもろやらせてもらっているのでかなり楽しいです <img alt=\":muscle:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f4aa.png\" title=\":muscle:\" width=\"20\" loading=\"lazy\"> </p>\n\n<p>読んでいただきありがとうございました。lockファイル入門したい方、事故りそうな不安があるかたは同僚と一緒に「弊社のパッケージ依存関係の運用どうする…？」と一度話し合ってみてください。</p>\n\n<p>ありがとうございました。</p>\n\n<p>.</p>\n","body":"# .lockファイルって邪魔だよね。って思っている人いたら校舎裏来てください。優しく解説します。\n\nこんにちは！ @ykhirao です。最近ジョインさせていただいた案件で `composer.lock` のバージョンが本番が一番新しくて、ローカルが一番古い素敵な状況を発見しました :relaxed:\n\n本番環境でSSHして `composer update` かけたんだなあーー。そっかーーー、バグ起きたらどないすんねん、。。。。。。\n\nというのが私の感想で、実際にnpmパッケージを使ってバグを再現しながら\nゆっくり解説していこうと思います。どうぞ最後までよろしくお願いします。！！！\n\n> このQiitaを呼んで得ること\n\n- あーー、ほんとだ。バグが入る可能性があるんだ！\n- lockファイルはちゃんとコミットするね！\n\nというお気持ちになれると思います。\n\n> このQiitaで解説しないこと\n\n- 詳しい依存関係の解消法\n- packageの公開の仕方\n- むずかしいはなし\n\nです！\n\n## さて時系列を見てみよう！\n\nこんな事故が起こる可能性がありますよって話をします。\n\n時系列 | OSSのmypackage.js| ローカル | 本番サーバー\n:---:|:---:|:---:|:---:\n 1日目 | v1.0.0公開 | 動いている | 動いている\n 2日目 |  | ローカルでmypackage.jsをinstall<br>動作確認OK、明後日本番に適応させる | \n 3日目 | v1.0.1公開 バグあり |  | \n 4日目 |  |  | 本番サーバーで新しいコードを反映、install。本番が動かなくなってしまった。ぴえん<br>もちろんソースコードはローカルと同じだし、ローカルで動いていたのになんで…？:flushed:\n 5日目 | v1.0.2公開 バグ修正された |  | \n 6日目 | | v1.0.2を適応ローカル確認OK<br> 今度はlockファイルを本番にアップロードする予定！ | \n 7日目 | |  | package-lock.jsonを使ってinstallする！今度は動いた！\n\n## npmでパッケージを作りながら説明する\n\nOSSっぽい動作をするpackageフォルダと、ローカル環境と本番環境っぽいフォルダを作る。\n\n```bash\nyk@yk ~ % cd qiita \nyk@yk qiita % mkdir package\nyk@yk qiita % mkdir local\nyk@yk qiita % mkdir production\nyk@yk qiita % ll\ntotal 0\ndrwxr-xr-x   5 yk  staff   160  7 11 00:34 .\ndrwxr-xr-x+ 83 yk  staff  2656  7 11 00:33 ..\ndrwxr-xr-x   2 yk  staff    64  7 11 00:34 local\ndrwxr-xr-x   2 yk  staff    64  7 11 00:34 package\ndrwxr-xr-x   2 yk  staff    64  7 11 00:34 production\n```\n\n\n\n```bash\nyk@yk qiita % cd package \nyk@yk package % npm init -y\nWrote to /Users/yk/qiita/package/package.json:\n\n{\n  \"name\": \"package\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\"\n}\n\n\nyk@yk package % vim package.json\nyk@yk package % vim index.js\nyk@yk package % npm publish --access=public\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN package@1.0.0 No description\nnpm WARN package@1.0.0 No repository field.\n\nup to date in 0.429s\nfound 0 vulnerabilities\n\n/Users/yk/.nodebrew/node/v13.8.0/lib/node_modules/package -> /Users/yk/qiita/package\n\nyk@yk package % cat index.js \nconst text = \"sample\"\n\nmodule.exports = text;\n```\n\nindex.jsにただただ \"sample\" という文字列を返す動作を記述して、パッケージとして認識させる。 \n`@y_hirao/mypackage` というパッケージをnpmに公開した。\n\n\nlocalフォルダでいろいろゴリゴリしてみる。\n\n```bash\nyk@yk local % npm init -y\nWrote to /Users/yk/qiita/local/package.json:\n\n{\n  \"name\": \"local\",\n  \"version\": \"1.0.0\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"@y_hirao/mypackage\": \"^1.0.0\"\n  },\n  \"devDependencies\": {},\n  \"description\": \"\"\n}\n\n\nyk@yk local % cat index.js \nconst text = require(\"@y_hirao/mypackage\");\nconsole.log(text)\n\nyk@yk local % node index.js \nsample\n```\n\nsampleという文字列が返却されました。！！！！！！！！！\n\nこのときpackage.jsonを見ると `^` キャレット指定なのでバージョンアップは `1.系` は守られるけど残りはすべてアップデートされます。\n\n```\n  \"dependencies\": {\n    \"@y_hirao/mypackage\": \"^1.0.0\"\n  },\n```\n\nさてパッケージの方を更新します。 `v1.0.2` にしましょう！\n\n```bash\nyk@yk package % cat package.json \n{\n  \"name\": \"@y_hirao/mypackage\",\n  \"version\": \"1.0.2\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\"\n}\n\nyk@yk package % cat index.js    \nconst text = \"sample2\"\nthrow 'エラーを出したい気分';\n\nmodule.exports = text;\nyk@yk package % npm publish   \n```\n\nこのパッケージをそのまま使うとthrowされます。\n\nさてローカルでinstallしてみましょう！\n\n```\nyk@yk local % npm install\nnpm WARN local@1.0.0 No description\nnpm WARN local@1.0.0 No repository field.\n\naudited 1 package in 0.411s\nfound 0 vulnerabilities\n\nyk@yk\n```\n\nあれ、エラーが起きませんね。\nこれは 一度ダウンロードしたパッケージはlockファイルというものでバージョン指定されているので、新しく勝手にバージョンがあがったりしないのです。\n\nさてローカルから本番環境に package.json と index.js をコピーしてnpm installして動かしてみましょう！\n\n```bash\nyk@yk production % cp ../local/package.json package.json\nyk@yk production % cp ../local/index.js index.js        \nyk@yk production % npm i\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN local@1.0.0 No description\nnpm WARN local@1.0.0 No repository field.\n\nadded 1 package and audited 1 package in 2.811s\nfound 0 vulnerabilities\n\nyk@yk production % node index.js \n\n/Users/yk/qiita/production/node_modules/@y_hirao/mypackage/index.js:2\nthrow 'エラーを出したい気分';\n^\nエラーを出したい気分\n(Use `node --trace-uncaught ...` to show where the exception was thrown)\n```\n\nさて、、、本番環境でinstallを走らせるとエラーがおきました。。。。\n\n`npm install` したときに `package-lock.json` がないと `package.json` を使って `^1.0.0` が指定されているので `1.系で一番新しいもの` つまり今回だとバグが混入している `v1.0.2` がインストールされたことになります。\n\nlockファイルを見てみましょう。\n\n```bash\nyk@yk production % cat package-lock.json \n{\n  \"name\": \"local\",\n  \"version\": \"1.0.0\",\n  \"lockfileVersion\": 1,\n  \"requires\": true,\n  \"dependencies\": {\n    \"@y_hirao/mypackage\": {\n      \"version\": \"1.0.2\",\n      \"resolved\": \"https://registry.npmjs.org/@y_hirao/mypackage/-/mypackage-1.0.2.tgz\",\n      \"integrity\": \"sha512-W2RoQsC1FVnHxximVJMovEvfl/3WNI95EjGxPbMlmyuDZ+0SImS76dOII/0AiP4cVVjXZUbFzaLs9h6l8TrrFQ==\"\n    }\n  }\n}\n```\n\nまさしく `v1.0.2` が指定されていますね！localだともちろん最初に `npm install` したときに最新だった `@y_hirao/mypackage` の `v1.0.0` が使われています。\n\n```bash\nyk@yk local % cat package-lock.json \n{\n  \"name\": \"local\",\n  \"version\": \"1.0.0\",\n  \"lockfileVersion\": 1,\n  \"requires\": true,\n  \"dependencies\": {\n    \"@y_hirao/mypackage\": {\n      \"version\": \"1.0.0\",\n      \"resolved\": \"https://registry.npmjs.org/@y_hirao/mypackage/-/mypackage-1.0.0.tgz\",\n      \"integrity\": \"sha512-auQ5grIpWd0IRkMR3rn6xRjIhGZqBu/Q/g1lDkS5AWakAysrZ3iQAIRngbgBGBAFlPZxQ/LCVYdAW+3VLxeSEw==\"\n    }\n  }\n}\n```\n\n更にインストールされているフォルダを確認しても\n\n```bash\nyk@yk production % cat node_modules/@y_hirao/mypackage/index.js\nconst text = \"sample2\"\nthrow 'エラーを出したい気分';\n\nmodule.exports = text;\nyk@yk production % \n```\n\nどう見てもエラーが起きそうです。\n\npackage-lock.jsonをlocalからコピーしてきましょう。\n\n```bash\nyk@yk production % cp ../local/package-lock.json package-lock.json\nyk@yk production % npm i\nnpm WARN local@1.0.0 No description\nnpm WARN local@1.0.0 No repository field.\n\nupdated 1 package and audited 1 package in 0.45s\nfound 0 vulnerabilities\n\nyk@yk production % cat node_modules/@y_hirao/mypackage/index.js\nconst text = \"sample\"\n\nmodule.exports = text;\nyk@yk production % node index.js \nsample\nyk@yk production % \n```\n\nlockファイルを持ってきてインストールするだけで、エラーが起きなくなりました！ :clap::clap::clap::clap::clap: \n\n\n## まとめ\n\n本番環境で lockファイルごと更新する `composer update` とかlockファイルの存在しない状態での `npm install` とか、そんなことはやめましょう。ってことを主張したいです！！！！！\n\nローカルでしっかり確認してlockファイルを作り、それを本番にアップロードして、lockファイルの状態で依存パッケージをインストールしちゃってください。。 :pray: \n\nインストールする時期によって最新のバージョンが使われるので、もしそのバージョンにバグがあるのなら本番死んじゃいますよ。。\n\n\n## 終わりに\n\n\n新しい会社に入って色々根本的に変えたいところがあるので、最近はdevopsの領域をごりごり触らせていただいてます。環境構築、開発フローの策定とかもろもろやらせてもらっているのでかなり楽しいです :muscle: \n\n読んでいただきありがとうございました。lockファイル入門したい方、事故りそうな不安があるかたは同僚と一緒に「弊社のパッケージ依存関係の運用どうする…？」と一度話し合ってみてください。\n\nありがとうございました。\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2020-07-13T09:28:39+09:00","group":null,"id":"dbd6b12ea500178168b5","likes_count":7,"private":false,"reactions_count":0,"stocks_count":4,"tags":[{"name":"PHP","versions":[]},{"name":"JavaScript","versions":[]},{"name":"Node.js","versions":[]},{"name":"Composer","versions":[]},{"name":"npm","versions":[]}],"title":"そろそろlockファイルを理解するための最初のページ【composer.lock/package-lock.json】","updated_at":"2020-07-13T09:28:39+09:00","url":"https://qiita.com/ykhirao/items/dbd6b12ea500178168b5","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:26\">\n<span id=\"gitって難しいよね\" class=\"fragment\"></span><a href=\"#git%E3%81%A3%E3%81%A6%E9%9B%A3%E3%81%97%E3%81%84%E3%82%88%E3%81%AD\"><i class=\"fa fa-link\"></i></a>Gitって難しいよね</h1>\n<p data-sourcepos=\"3:1-3:348\">こんにちは <a href=\"/ykhirao\" class=\"user-mention js-hovercard\" title=\"ykhirao\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"ykhirao\">@ykhirao</a> です！！フリーランスエンジニア初めて2週間立ちましたが、案件に入って初めてやったことは開発ではなくGit/GitHubを導入でした。いまWinSCP/TeraTermからGitベースのデプロイ環境を構築しようと思って、改めてGitに関して調べ直していました。</p>\n<p data-sourcepos=\"5:1-5:33\">その知見を書いていく。</p>\n<p data-sourcepos=\"7:1-7:272\">基本的にはここ <a href=\"https://git-scm.com/book/ja/v2/Git%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC-%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB\" rel=\"nofollow noopener\" target=\"_blank\">https://git-scm.com/book/ja/v2/Gitサーバー-プロトコル</a> の4章の内容を中心に書いていこうかと思います。</p>\n<blockquote data-sourcepos=\"9:1-9:62\">\n<p data-sourcepos=\"9:3-9:62\">Git標準でついているGitWebを立ち上げてみたり</p>\n</blockquote>\n<a href=\"https://camo.qiitausercontent.com/a9f9221265455cf2e0885ac516233aa350ba8556/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32633337633562622d323364662d343833632d323262642d3536323934653438653165372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1680\" alt=\"スクリーンショット 2020-07-10 23.46.16.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2c37c5bb-23df-483c-22bd-56294e48e1e7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=292dca34caa3d4e0d9fa850ff0f35dc8\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2c37c5bb-23df-483c-22bd-56294e48e1e7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2c37c5bb-23df-483c-22bd-56294e48e1e7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3a5136c10d5ab931f40eda9219e52da1 1x\" loading=\"lazy\"></a>\n<blockquote data-sourcepos=\"13:1-13:105\">\n<p data-sourcepos=\"13:3-13:105\">GitHubとか使うんではなくてbareレポジトリというものをGCPのVPSに置いてみたり</p>\n</blockquote>\n<p data-sourcepos=\"15:1-15:310\">そんな感じのQiitaです。暇があったらGitサーバーってなんじゃらほいって自分でも調べてみてください。私にはよくわからなかったです。たぶんGitのbareレポジトリ(つまり.git/ディレクトリ)をホストしているだけのサーバーのこと…</p>\n<h2 data-sourcepos=\"18:1-18:63\">\n<span id=\"最初gitサーバーって何言ってるのかと思った\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%88%9Dgit%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%A3%E3%81%A6%E4%BD%95%E8%A8%80%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE%E3%81%8B%E3%81%A8%E6%80%9D%E3%81%A3%E3%81%9F\"><i class=\"fa fa-link\"></i></a>最初Gitサーバーって何言ってるのかと思った</h2>\n<p data-sourcepos=\"20:1-20:60\">Gitサーバーって何？パルプンテ状態でした。</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"23:1-25:3\"><div class=\"highlight\"><pre><code>Git on the Server\n</code></pre></div></div>\n<p data-sourcepos=\"27:1-27:108\">って書かれているので、サーバーにGit入れる話で、誤訳なのかなって思ったけど</p>\n<p data-sourcepos=\"29:1-29:79\"><iframe id=\"qiita-embed-content__d6e61f4701d8128bcbeedc3d16bb4063\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__d6e61f4701d8128bcbeedc3d16bb4063\" data-content=\"https%3A%2F%2Fgit-scm.com%2Fbook%2Fen%2Fv2%2FGit-on-the-Server-Generating-Your-SSH-Public-Key\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"31:1-31:3\">で</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"33:1-35:3\"><div class=\"highlight\"><pre><code>Many Git servers ... \n</code></pre></div></div>\n<p data-sourcepos=\"37:1-37:162\">って書かれているので、誤訳じゃなくて普通に使われている言葉っぽいなあと思い、一旦言葉じりについては納得した。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"39:1-42:3\"><div class=\"highlight\"><pre><code>yk@yk ~ % git <span class=\"nt\">--version</span>\ngit version 2.25.0\n</code></pre></div></div>\n<h2 data-sourcepos=\"44:1-44:93\">\n<span id=\"gitって川の流れに例えるとわかりやすいよね異論は受け付ける\" class=\"fragment\"></span><a href=\"#git%E3%81%A3%E3%81%A6%E5%B7%9D%E3%81%AE%E6%B5%81%E3%82%8C%E3%81%AB%E4%BE%8B%E3%81%88%E3%82%8B%E3%81%A8%E3%82%8F%E3%81%8B%E3%82%8A%E3%82%84%E3%81%99%E3%81%84%E3%82%88%E3%81%AD%E7%95%B0%E8%AB%96%E3%81%AF%E5%8F%97%E3%81%91%E4%BB%98%E3%81%91%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Gitって川の流れに例えるとわかりやすいよね（異論は受け付ける）</h2>\n<p data-sourcepos=\"47:1-47:33\">Gitのプロトコルには主に</p>\n<ol data-sourcepos=\"49:1-52:0\">\n<li data-sourcepos=\"49:1-49:24\">Local プロトコル</li>\n<li data-sourcepos=\"50:1-50:26\">HTTP/S プロトコル</li>\n<li data-sourcepos=\"51:1-52:0\">SSH プロトコル</li>\n</ol>\n<p data-sourcepos=\"53:1-53:122\">があるみたい。この中のLocalプロトコルは使ったことなかったのでとても新鮮味を感じた。</p>\n<blockquote data-sourcepos=\"55:1-55:59\">\n<p data-sourcepos=\"55:3-55:59\">適当なレポジトリをダウンロードしてくる</p>\n</blockquote>\n<p data-sourcepos=\"57:1-57:130\">とりあえず <a href=\"https://github.com/explore\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/explore</a> から自分にあったいい感じの軽そうなレポジトリを取ってくる。</p>\n<p data-sourcepos=\"59:1-59:154\"><a href=\"https://github.com/denoland\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/denoland</a> が 出てきたので一番コミット数少なそうな <a href=\"https://github.com/denoland/ninja_gn_binaries\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/denoland/ninja_gn_binaries</a> を選んで見る。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"61:1-80:3\"><div class=\"highlight\"><pre><code><span class=\"c\"># GitHubから適当なレポジトリをクローンしてくる</span>\n<span class=\"nv\">$ </span>git clone https://github.com/denoland/ninja_gn_binaries\n\nCloning into <span class=\"s1\">'ninja_gn_binaries'</span>...\n<span class=\"o\">(</span>ry<span class=\"o\">)</span>\n\n\n<span class=\"c\"># プロジェクト名.git というフォルダ名をつけて bareレポジトリというのを作成する</span>\n<span class=\"nv\">$ </span>git clone <span class=\"nt\">--bare</span> ninja_gn_binaries ninja_gn_binaries.git\n\n<span class=\"c\"># bareレポジトリに移動</span>\n<span class=\"nv\">$ </span><span class=\"nb\">cd </span>ninja_gn_binaries.git\n\n<span class=\"c\"># git操作に反応するhooksをサンプルを使用できる形に</span>\n<span class=\"nv\">$ </span><span class=\"nb\">mv </span>hooks/post-update.sample hooks/post-update\n\n<span class=\"c\"># 全ユーザーに実行権限付与</span>\n<span class=\"nv\">$ </span><span class=\"nb\">chmod </span>a+x hooks/post-update\n</code></pre></div></div>\n<p data-sourcepos=\"82:1-83:270\">いい感じにローカルプロトコルの準備ができました。<br>\n今回は普通の場所 <code>/Users/yk/workspace/ninja_gn_binaries.git</code> に作りましたが、同じネットワーク内の共有ファイルシステム内においたりすると、ネットワーク内からpull/pushなどのアクセスができるっぽいです。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"85:1-95:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span><span class=\"nb\">pwd</span>\n/Users/yk/workspace/ninja_gn_binaries\n\n<span class=\"c\"># remoteの設定をしよう</span>\n<span class=\"nv\">$ </span>git remote add <span class=\"nb\">local</span> /Users/yk/workspace/ninja_gn_binaries.git\n\n<span class=\"c\"># この場合</span>\n<span class=\"c\"># git push local master</span>\n<span class=\"c\"># みたいにアクセスできるようになる</span>\n</code></pre></div></div>\n<p data-sourcepos=\"98:1-98:17\"><code>vim .git/config</code></p>\n<div class=\"code-frame\" data-lang=\"config\" data-sourcepos=\"100:1-117:3\"><div class=\"highlight\"><pre><code>[<span class=\"n\">core</span>]\n        <span class=\"n\">repositoryformatversion</span> = <span class=\"m\">0</span>\n        <span class=\"n\">filemode</span> = <span class=\"n\">true</span>\n        <span class=\"n\">bare</span> = <span class=\"n\">false</span>\n        <span class=\"n\">logallrefupdates</span> = <span class=\"n\">true</span>\n        <span class=\"n\">ignorecase</span> = <span class=\"n\">true</span>\n        <span class=\"n\">precomposeunicode</span> = <span class=\"n\">true</span>\n[<span class=\"n\">remote</span> <span class=\"s2\">\"origin\"</span>]\n        <span class=\"n\">url</span> = <span class=\"n\">https</span>://<span class=\"n\">github</span>.<span class=\"n\">com</span>/<span class=\"n\">denoland</span>/<span class=\"n\">ninja_gn_binaries</span>\n        <span class=\"n\">fetch</span> = +<span class=\"n\">refs</span>/<span class=\"n\">heads</span>/*:<span class=\"n\">refs</span>/<span class=\"n\">remotes</span>/<span class=\"n\">origin</span>/*\n[<span class=\"n\">branch</span> <span class=\"s2\">\"master\"</span>]\n        <span class=\"n\">remote</span> = <span class=\"n\">origin</span>\n        <span class=\"n\">merge</span> = <span class=\"n\">refs</span>/<span class=\"n\">heads</span>/<span class=\"n\">master</span>\n[<span class=\"n\">remote</span> <span class=\"s2\">\"local\"</span>]\n        <span class=\"n\">url</span> = /<span class=\"n\">Users</span>/<span class=\"n\">yk</span>/<span class=\"n\">workspace</span>/<span class=\"n\">ninja_gn_binaries</span>.<span class=\"n\">git</span>\n        <span class=\"n\">fetch</span> = +<span class=\"n\">refs</span>/<span class=\"n\">heads</span>/*:<span class=\"n\">refs</span>/<span class=\"n\">remotes</span>/<span class=\"n\">local</span>/*\n</code></pre></div></div>\n<p data-sourcepos=\"119:1-119:335\">いい感じに設定できてますね。 <code>origin</code> は <code>https://github.com/denoland/ninja_gn_binaries</code> に設定されているので <code>git push origin master</code> は他人のレポジトリなので権限的にエラーがでると思います。 <code>git push local master</code> なら自分のPC内なのでいい感じにpushできるはず。</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"122:1-145:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span><span class=\"nb\">pwd</span>\n/Users/yk/workspace/ninja_gn_binaries\n\n<span class=\"nv\">$ </span><span class=\"nb\">touch </span>README.md\n<span class=\"nv\">$ </span>git add <span class=\"nb\">.</span>\n<span class=\"nv\">$ </span>git commit <span class=\"nt\">-m</span> <span class=\"s2\">\"Create readme\"</span>\n<span class=\"o\">[</span>master db503c6] Create readme\n 1 file changed, 0 insertions<span class=\"o\">(</span>+<span class=\"o\">)</span>, 0 deletions<span class=\"o\">(</span>-<span class=\"o\">)</span>\n create mode 100644 README.md\n\n<span class=\"nv\">$ </span>git log\ncommit db503c617db3b9f8ce88c8c1f6afc9a71d4675f8 <span class=\"o\">(</span>HEAD -&gt; master, <span class=\"nb\">local</span>/master<span class=\"o\">)</span>\nAuthor: Yuki &lt;yuki@example.com&gt;\nDate:   Thu Jul 9 00:31:45 2020 +0900\n\n    Create readme\n\ncommit 50abf78bdabe66518865e3b9fdfaaade87bcfded <span class=\"o\">(</span>tag: 20200506, origin/master, origin/HEAD<span class=\"o\">)</span>\nAuthor: Bert Belder &lt;bertbelder@gmail.com&gt;\nDate:   Wed May 6 01:41:43 2020 +0200\n\n    Update gn to git revision 5ed3c9cc\n</code></pre></div></div>\n<p data-sourcepos=\"147:1-148:80\">いい感じに <code>local/master</code> にpushできました！<br>\nこのremoteのブランチを別のファイルにcloneしてきましょう！</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"150:1-176:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span><span class=\"nb\">pwd</span>\n/Users/yk/workspace\n\n<span class=\"nv\">$ </span>git clone /Users/yk/workspace/ninja_gn_binaries.git second-clone-sample\nCloning into <span class=\"s1\">'second-clone-sample'</span>...\n<span class=\"k\">done</span><span class=\"nb\">.</span>\n\n<span class=\"nv\">$ </span>ll | <span class=\"nb\">grep </span>second-clone-sample\ndrwxr-xr-x   7 yk  staff   224  7  9 00:37 second-clone-sample\n\n<span class=\"nv\">$ </span><span class=\"nb\">cd </span>second-clone-sample\n\n<span class=\"nv\">$ </span>git log\ncommit db503c617db3b9f8ce88c8c1f6afc9a71d4675f8 <span class=\"o\">(</span>HEAD -&gt; master, origin/master, origin/HEAD<span class=\"o\">)</span>\nAuthor: Yuki &lt;yuki@example.com&gt;\nDate:   Thu Jul 9 00:31:45 2020 +0900\n\n    Create readme\n\ncommit 50abf78bdabe66518865e3b9fdfaaade87bcfded <span class=\"o\">(</span>tag: 20200506<span class=\"o\">)</span>\nAuthor: Bert Belder &lt;bertbelder@gmail.com&gt;\nDate:   Wed May 6 01:41:43 2020 +0200\n\n    Update gn to git revision 5ed3c9cc\n\n</code></pre></div></div>\n<p data-sourcepos=\"178:1-178:73\">別のフォルダにcloneしてくることができました。 <img alt=\":clap:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44f.png\" title=\":clap:\" width=\"20\" loading=\"lazy\"></p>\n<ol data-sourcepos=\"181:1-182:0\">\n<li data-sourcepos=\"181:1-182:0\">Local プロトコル</li>\n</ol>\n<p data-sourcepos=\"183:1-183:36\">の話が終わったのですが、</p>\n<ol data-sourcepos=\"185:1-187:0\">\n<li data-sourcepos=\"185:1-185:25\">HTTP/S プロトコル</li>\n<li data-sourcepos=\"186:1-187:0\">SSH プロトコル</li>\n</ol>\n<p data-sourcepos=\"188:1-188:12\">は簡単で</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"190:1-200:3\"><div class=\"highlight\"><pre><code><span class=\"c\"># HTTP/S プロトコル</span>\ngit clone https://github.com/denoland/ninja_gn_binaries.git\n<span class=\"c\"># 仮にプライベートレポジトリの場合、この段階でID/Passwordが聞かれる</span>\n\n\n<span class=\"c\"># SSH プロトコル</span>\ngit@github.com:denoland/ninja_gn_binaries.git\n<span class=\"c\"># 公開鍵を登録していると使えて</span>\n<span class=\"c\"># プライベートレポジトリでもID/Passの入力なしで使える</span>\n</code></pre></div></div>\n<p data-sourcepos=\"202:1-202:51\">いつも見ているあれです！GitHubのここ</p>\n<a href=\"https://camo.qiitausercontent.com/2b8e4e537729dbc4548c7b7ae1c13c753faeb0b4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f64666338376462362d383264362d333662352d363231322d3031663439376133353163322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1352\" alt=\"スクリーンショット 2020-07-09 0.40.17.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fdfc87db6-82d6-36b5-6212-01f497a351c2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=41c40991f83b7ff8efe2f440a29c5f62\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/dfc87db6-82d6-36b5-6212-01f497a351c2.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fdfc87db6-82d6-36b5-6212-01f497a351c2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a2d24210f19ef7a2da28a260717b9570 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"206:1-206:246\">bareレポジトリの本質的なものは、 <code>git init</code> したときに作られる <code>.git</code> フォルダだけを管理しているレポジトリみたいです。[https://git-scm.com/book/ja/v2/Gitサーバー-サーバー用の-Git-の取得]</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"208:1-228:3\"><div class=\"highlight\"><pre><code>$ mkdir sample\n\n$ cd sample\n\n$ ls\n\n$ ll\ntotal 0\ndrwxr-xr-x   2 yk  staff   64  7  9 00:49 .\ndrwxr-xr-x  10 yk  staff  320  7  9 00:49 ..\n\n$ git init\nInitialized empty Git repository in /Users/yk/workspace/sample/.git/\n\n$ ll\ntotal 0\ndrwxr-xr-x   3 yk  staff   96  7  9 00:49 .\ndrwxr-xr-x  10 yk  staff  320  7  9 00:49 ..\ndrwxr-xr-x   9 yk  staff  288  7  9 00:49 .git\n</code></pre></div></div>\n<p data-sourcepos=\"230:1-230:316\">このlocalプロトコルを作成したときの bare というファイルの実態を持たないものがいわゆる世間で言われる <code>Gitサーバー</code> で、世の中にGitサーバーを構築してGit管理したいって思っている人たちの選択肢は次の3つくらいだと思っている。</p>\n<ol data-sourcepos=\"232:1-236:0\">\n<li data-sourcepos=\"232:1-232:65\">GitHub/GitLab/その他ホスティングサービスを使う</li>\n<li data-sourcepos=\"233:1-233:70\">同じサーバー上の別の階層にbareレポジトリを置く</li>\n<li data-sourcepos=\"234:1-236:0\">別のサーバー上にbareレポジトリを置く</li>\n</ol>\n<p data-sourcepos=\"237:1-237:376\">特に「社内でセキュリティが…」って理由がない限りは「マイクロソフトが買収した設計図サイトです！」と上司を説得してGitHubをbareレポジトリの代わりにする方向が一番きれいかなと思いました。イシュートラッカーとかカンバンとかプルリクエストとか使えるし、便利かなと</p>\n<h2 data-sourcepos=\"240:1-240:72\">\n<span id=\"ついに始まるサーバにgit入れてみるサーバー構築編\" class=\"fragment\"></span><a href=\"#%E3%81%A4%E3%81%84%E3%81%AB%E5%A7%8B%E3%81%BE%E3%82%8B%E3%82%B5%E3%83%BC%E3%83%90%E3%81%ABgit%E5%85%A5%E3%82%8C%E3%81%A6%E3%81%BF%E3%82%8B%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E6%A7%8B%E7%AF%89%E7%B7%A8\"><i class=\"fa fa-link\"></i></a>ついに始まるサーバにGit入れてみるサーバー構築編</h2>\n<p data-sourcepos=\"242:1-243:40\">ここみてGCPの無料VPSをたちあげた<br>\n<a href=\"https://22musyoku.tokyo/gce-always-free/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://22musyoku.tokyo/gce-always-free/</a></p>\n<p data-sourcepos=\"245:1-245:63\">公開鍵を登録したら、こんな感じでSSHできる。</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"247:1-257:3\"><div class=\"highlight\"><pre><code>yk@yk sample % ssh 3X.1XX.XX.45\n\n(yes)\n\nWelcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-1019-gcp x86_64)\n\n(ryaku)\n\nyk@lwaysfree-micro:~$\n</code></pre></div></div>\n<p data-sourcepos=\"259:1-259:75\">GCP-Ubuntu20.04だとgitが入ってなかったので適当にいれる。</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"261:1-268:3\"><div class=\"highlight\"><pre><code>$ git\n-bash: git: command not found\n$ sudo apt update\n$ sudo apt upgrade\n$ git --version\ngit version 2.25.1\n</code></pre></div></div>\n<p data-sourcepos=\"270:1-270:29\">projectのbareレポを作る</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"272:1-278:3\"><div class=\"highlight\"><pre><code>$ sudo mkdir /opt/git\n$ sudo mkdir /opt/git/project.git\n$ cd /opt/git/project.git\n$ sudo git init --bare\nInitialized empty Git repository in /opt/git/project.git/\n</code></pre></div></div>\n<p data-sourcepos=\"280:1-280:41\">ローカルPCでいろいろごりごり</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"282:1-301:3\"><div class=\"highlight\"><pre><code>$ git status\nOn branch master\n\nNo commits yet\n\nnothing to commit (create/copy files and use \"git add\" to track)\n$ touch README.md\n$ git add .\n$ git commit -m \"INIT\"\n[master (root-commit) 909289c] INIT\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 README.md\n$\n\n# リモートの設定する\n# ykとIPアドレスの部分は適宜変えて\n$ git remote add origin yk@34.105.XX.XX:/opt/git/project.git\n$ git push origin master\n</code></pre></div></div>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"305:1-316:3\"><div class=\"highlight\"><pre><code>% git push origin master\n\nEnumerating objects: 3, done.\nCounting objects: 100% (3/3), done.\nWriting objects: 100% (3/3), 213 bytes | 213.00 KiB/s, done.\nTotal 3 (delta 0), reused 0 (delta 0)\nerror: remote unpack failed: unable to create temporary object directory\nTo 34.105.93.45:/opt/git/project.git\n ! [remote rejected] master -&gt; master (unpacker error)\nerror: failed to push some refs to 'yk@34.105.93.45:/opt/git/project.git'\n</code></pre></div></div>\n<p data-sourcepos=\"318:1-318:75\">書き込みのエラーが出たので一旦ユーザー所有者にする</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"320:1-327:3\"><div class=\"highlight\"><pre><code>yk@lwaysfree-micro:/opt/git<span class=\"nv\">$ </span><span class=\"nb\">sudo chown </span>yk project.git/ <span class=\"nt\">-R</span>\nyk@lwaysfree-micro:/opt/git<span class=\"nv\">$ </span>ll\ntotal 12\ndrwxr-xr-x 3 root root 4096 Jul  8 16:11 ./\ndrwxr-xr-x 3 root root 4096 Jul  8 16:10 ../\ndrwxr-xr-x 7 yk   root 4096 Jul  8 16:34 project.git/\n</code></pre></div></div>\n<p data-sourcepos=\"329:1-329:24\">OKそう。push成功！</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"331:1-340:3\"><div class=\"highlight\"><pre><code>% git push origin master\n\nEnumerating objects: 3, <span class=\"k\">done</span><span class=\"nb\">.</span>\nCounting objects: 100% <span class=\"o\">(</span>3/3<span class=\"o\">)</span>, <span class=\"k\">done</span><span class=\"nb\">.</span>\nWriting objects: 100% <span class=\"o\">(</span>3/3<span class=\"o\">)</span>, 213 bytes | 213.00 KiB/s, <span class=\"k\">done</span><span class=\"nb\">.</span>\nTotal 3 <span class=\"o\">(</span>delta 0<span class=\"o\">)</span>, reused 0 <span class=\"o\">(</span>delta 0<span class=\"o\">)</span>\nTo 34.105.93.45:/opt/git/project.git\n <span class=\"k\">*</span> <span class=\"o\">[</span>new branch]      master -&gt; master\n</code></pre></div></div>\n<p data-sourcepos=\"342:1-343:51\">localにクローンしてくることもできます！いい感じですね。<br>\nこれが噂のGit用だけのGitサーバーか…</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"345:1-359:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git clone yk@34.105.XX.XX:/opt/git/project.git sample-clone\nCloning into <span class=\"s1\">'sample-clone'</span>...\nremote: Enumerating objects: 3, <span class=\"k\">done</span><span class=\"nb\">.</span>\nremote: Counting objects: 100% <span class=\"o\">(</span>3/3<span class=\"o\">)</span>, <span class=\"k\">done</span><span class=\"nb\">.</span>\nremote: Total 3 <span class=\"o\">(</span>delta 0<span class=\"o\">)</span>, reused 0 <span class=\"o\">(</span>delta 0<span class=\"o\">)</span>\nReceiving objects: 100% <span class=\"o\">(</span>3/3<span class=\"o\">)</span>, <span class=\"k\">done</span><span class=\"nb\">.</span>\n\n<span class=\"nv\">$ </span><span class=\"nb\">cd </span>sample-clone\n\ny<span class=\"nv\">$ </span>git log\ncommit 909289c7a8057ec6fcb207da70684e9daa81e39e <span class=\"o\">(</span>HEAD -&gt; master, origin/master, origin/HEAD<span class=\"o\">)</span>\nAuthor: Yuki &lt;yuki@example.com&gt;\nDate:   Thu Jul 9 01:22:46 2020 +0900\n</code></pre></div></div>\n<p data-sourcepos=\"361:1-361:62\"><code>4.10 Gitサーバー - まとめ</code> に書かれていますが</p>\n<blockquote data-sourcepos=\"364:1-364:574\">\n<p data-sourcepos=\"364:3-364:574\">自前でサーバーを構築すれば、多くのことを制御できるようになり、ファイアウォールの内側でもサーバーを実行することができます。 しかし、サーバーを構築して運用するにはそれなりの手間がかかります。ホスティングサービスを使えば、サーバーの準備や保守は簡単になります。 しかし、他人のサーバー上に自分のコードを置き続けなければなりません。組織によってはそんなことを許可していないかもしれません。</p>\n</blockquote>\n<p data-sourcepos=\"367:1-367:45\">可能ならGitHubとか使いましょう〜</p>\n<h2 data-sourcepos=\"370:1-370:30\">\n<span id=\"gitweb立ち上げてみる\" class=\"fragment\"></span><a href=\"#gitweb%E7%AB%8B%E3%81%A1%E4%B8%8A%E3%81%92%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>GitWeb立ち上げてみる</h2>\n<p data-sourcepos=\"372:1-372:30\"><code>4.7 Gitサーバー - GitWeb</code></p>\n<p data-sourcepos=\"374:1-374:141\">簡単にGitのなにそれをWebで見えるいい感じのサーバーが立ち上げられます。(macだとrubyが入っているので)</p>\n<div class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"376:1-404:3\"><div class=\"highlight\"><pre><code>yk@yk workspace % <span class=\"nb\">mkdir </span>sample\nyk@yk workspace % <span class=\"nb\">cd </span>sample \nyk@yk sample % git init \nInitialized empty Git repository <span class=\"k\">in</span> /Users/yk/workspace/sample/.git/\nyk@yk sample % <span class=\"nb\">touch </span>README.md\nyk@yk sample % git add README.md \nyk@yk sample % git status\nOn branch master\n\nNo commits yet\n\nChanges to be committed:\n  <span class=\"o\">(</span>use <span class=\"s2\">\"git rm --cached &lt;file&gt;...\"</span> to unstage<span class=\"o\">)</span>\n\tnew file:   README.md\n\nyk@yk sample % git commit <span class=\"nt\">-m</span> <span class=\"s2\">\"INIT\"</span>\n<span class=\"o\">[</span>master <span class=\"o\">(</span>root-commit<span class=\"o\">)</span> 290565d] INIT\n 1 file changed, 0 insertions<span class=\"o\">(</span>+<span class=\"o\">)</span>, 0 deletions<span class=\"o\">(</span>-<span class=\"o\">)</span>\n create mode 100644 README.md\nyk@yk sample % git instaweb <span class=\"nt\">--httpd</span><span class=\"o\">=</span>webrick <span class=\"nt\">--stop</span>\nyk@yk sample % git instaweb <span class=\"nt\">--httpd</span><span class=\"o\">=</span>webrick       \nyk@yk sample % \n\n<span class=\"c\"># http://127.0.0.1:1234/ が立ち上がります！！！！！</span>\n\n<span class=\"c\"># 必要なくなったら落とす</span>\nyk@yk sample % git instaweb <span class=\"nt\">--httpd</span><span class=\"o\">=</span>webrick <span class=\"nt\">--stop</span>\n</code></pre></div></div>\n<a href=\"https://camo.qiitausercontent.com/a9f9221265455cf2e0885ac516233aa350ba8556/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32633337633562622d323364662d343833632d323262642d3536323934653438653165372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1680\" alt=\"スクリーンショット 2020-07-10 23.46.16.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2c37c5bb-23df-483c-22bd-56294e48e1e7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=292dca34caa3d4e0d9fa850ff0f35dc8\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2c37c5bb-23df-483c-22bd-56294e48e1e7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2c37c5bb-23df-483c-22bd-56294e48e1e7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3a5136c10d5ab931f40eda9219e52da1 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"408:1-408:74\">これでSource Treeとか必要ないですね！！！！！（極論）</p>\n<p data-sourcepos=\"410:1-410:87\">正直TIGとかのほうが好きだと思ってしまったのはここだけの話。</p>\n<p data-sourcepos=\"412:1-412:148\"><code>4.8 Gitサーバー - GitLab</code> でGitWeb使うくらいならGitLab使おうぜ…OSSだし。みたいな雰囲気が醸し出されています。</p>\n<h2 data-sourcepos=\"414:1-414:34\">\n<span id=\"結論gitサーバーって何\" class=\"fragment\"></span><a href=\"#%E7%B5%90%E8%AB%96git%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%A3%E3%81%A6%E4%BD%95\"><i class=\"fa fa-link\"></i></a>結論Gitサーバーって何?</h2>\n<p data-sourcepos=\"416:1-416:42\">調べてもよくわからなかった。</p>\n<p data-sourcepos=\"418:1-419:208\">Gitだけのために用意している、踏み台サーバー的な存在のことを <code>Gitサーバー</code> って呼んでいるのかと思った。<br>\nbareレポジトリをホストするだけならわざわざサーバーを建てずに、プロジェクトと同じサーバーの別の階層におけばいいのでは、と思いました。（感想）</p>\n<p data-sourcepos=\"422:1-422:1\">.</p>\n","body":"# Gitって難しいよね\n\nこんにちは @ykhirao です！！フリーランスエンジニア初めて2週間立ちましたが、案件に入って初めてやったことは開発ではなくGit/GitHubを導入でした。いまWinSCP/TeraTermからGitベースのデプロイ環境を構築しようと思って、改めてGitに関して調べ直していました。\n\nその知見を書いていく。\n\n基本的にはここ [https://git-scm.com/book/ja/v2/Gitサーバー-プロトコル](https://git-scm.com/book/ja/v2/Git%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC-%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB) の4章の内容を中心に書いていこうかと思います。\n\n> Git標準でついているGitWebを立ち上げてみたり\n\n<img width=\"1680\" alt=\"スクリーンショット 2020-07-10 23.46.16.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2c37c5bb-23df-483c-22bd-56294e48e1e7.png\">\n\n> GitHubとか使うんではなくてbareレポジトリというものをGCPのVPSに置いてみたり\n\nそんな感じのQiitaです。暇があったらGitサーバーってなんじゃらほいって自分でも調べてみてください。私にはよくわからなかったです。たぶんGitのbareレポジトリ(つまり.git/ディレクトリ)をホストしているだけのサーバーのこと…\n\n\n## 最初Gitサーバーって何言ってるのかと思った\n\nGitサーバーって何？パルプンテ状態でした。\n\n\n```\nGit on the Server\n```\n\nって書かれているので、サーバーにGit入れる話で、誤訳なのかなって思ったけど\n\nhttps://git-scm.com/book/en/v2/Git-on-the-Server-Generating-Your-SSH-Public-Key\n\nで\n\n```\nMany Git servers ... \n```\n\nって書かれているので、誤訳じゃなくて普通に使われている言葉っぽいなあと思い、一旦言葉じりについては納得した。\n\n```bash\nyk@yk ~ % git --version\ngit version 2.25.0\n```\n\n## Gitって川の流れに例えるとわかりやすいよね（異論は受け付ける）\n\n\nGitのプロトコルには主に\n\n1. Local プロトコル\n2. HTTP/S プロトコル \n3. SSH プロトコル \n\nがあるみたい。この中のLocalプロトコルは使ったことなかったのでとても新鮮味を感じた。\n\n> 適当なレポジトリをダウンロードしてくる\n\nとりあえず https://github.com/explore から自分にあったいい感じの軽そうなレポジトリを取ってくる。\n\nhttps://github.com/denoland が 出てきたので一番コミット数少なそうな https://github.com/denoland/ninja_gn_binaries を選んで見る。\n\n```bash\n# GitHubから適当なレポジトリをクローンしてくる\n$ git clone https://github.com/denoland/ninja_gn_binaries\n\nCloning into 'ninja_gn_binaries'...\n(ry)\n\n\n# プロジェクト名.git というフォルダ名をつけて bareレポジトリというのを作成する\n$ git clone --bare ninja_gn_binaries ninja_gn_binaries.git\n\n# bareレポジトリに移動\n$ cd ninja_gn_binaries.git\n\n# git操作に反応するhooksをサンプルを使用できる形に\n$ mv hooks/post-update.sample hooks/post-update\n\n# 全ユーザーに実行権限付与\n$ chmod a+x hooks/post-update\n```\n\nいい感じにローカルプロトコルの準備ができました。\n今回は普通の場所 `/Users/yk/workspace/ninja_gn_binaries.git` に作りましたが、同じネットワーク内の共有ファイルシステム内においたりすると、ネットワーク内からpull/pushなどのアクセスができるっぽいです。\n\n```bash\n$ pwd\n/Users/yk/workspace/ninja_gn_binaries\n\n# remoteの設定をしよう\n$ git remote add local /Users/yk/workspace/ninja_gn_binaries.git\n\n# この場合\n# git push local master\n# みたいにアクセスできるようになる\n```\n\n\n`vim .git/config`\n\n```config\n[core]\n        repositoryformatversion = 0\n        filemode = true\n        bare = false\n        logallrefupdates = true\n        ignorecase = true\n        precomposeunicode = true\n[remote \"origin\"]\n        url = https://github.com/denoland/ninja_gn_binaries\n        fetch = +refs/heads/*:refs/remotes/origin/*\n[branch \"master\"]\n        remote = origin\n        merge = refs/heads/master\n[remote \"local\"]\n        url = /Users/yk/workspace/ninja_gn_binaries.git\n        fetch = +refs/heads/*:refs/remotes/local/*\n```\n\nいい感じに設定できてますね。 `origin` は `https://github.com/denoland/ninja_gn_binaries` に設定されているので `git push origin master` は他人のレポジトリなので権限的にエラーがでると思います。 `git push local master` なら自分のPC内なのでいい感じにpushできるはず。\n\n\n```bash\n$ pwd\n/Users/yk/workspace/ninja_gn_binaries\n\n$ touch README.md\n$ git add .\n$ git commit -m \"Create readme\"\n[master db503c6] Create readme\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 README.md\n\n$ git log\ncommit db503c617db3b9f8ce88c8c1f6afc9a71d4675f8 (HEAD -> master, local/master)\nAuthor: Yuki <yuki@example.com>\nDate:   Thu Jul 9 00:31:45 2020 +0900\n\n    Create readme\n\ncommit 50abf78bdabe66518865e3b9fdfaaade87bcfded (tag: 20200506, origin/master, origin/HEAD)\nAuthor: Bert Belder <bertbelder@gmail.com>\nDate:   Wed May 6 01:41:43 2020 +0200\n\n    Update gn to git revision 5ed3c9cc\n```\n\nいい感じに `local/master` にpushできました！\nこのremoteのブランチを別のファイルにcloneしてきましょう！\n\n```bash\n$ pwd\n/Users/yk/workspace\n\n$ git clone /Users/yk/workspace/ninja_gn_binaries.git second-clone-sample\nCloning into 'second-clone-sample'...\ndone.\n\n$ ll | grep second-clone-sample\ndrwxr-xr-x   7 yk  staff   224  7  9 00:37 second-clone-sample\n\n$ cd second-clone-sample\n\n$ git log\ncommit db503c617db3b9f8ce88c8c1f6afc9a71d4675f8 (HEAD -> master, origin/master, origin/HEAD)\nAuthor: Yuki <yuki@example.com>\nDate:   Thu Jul 9 00:31:45 2020 +0900\n\n    Create readme\n\ncommit 50abf78bdabe66518865e3b9fdfaaade87bcfded (tag: 20200506)\nAuthor: Bert Belder <bertbelder@gmail.com>\nDate:   Wed May 6 01:41:43 2020 +0200\n\n    Update gn to git revision 5ed3c9cc\n\n```\n\n別のフォルダにcloneしてくることができました。 :clap: \n\n\n1. Local プロトコル\n\nの話が終わったのですが、\n\n2. HTTP/S プロトコル\n3. SSH プロトコル\n\nは簡単で\n\n```bash\n# HTTP/S プロトコル\ngit clone https://github.com/denoland/ninja_gn_binaries.git\n# 仮にプライベートレポジトリの場合、この段階でID/Passwordが聞かれる\n\n\n# SSH プロトコル\ngit@github.com:denoland/ninja_gn_binaries.git\n# 公開鍵を登録していると使えて\n# プライベートレポジトリでもID/Passの入力なしで使える\n```\n\nいつも見ているあれです！GitHubのここ\n\n<img width=\"1352\" alt=\"スクリーンショット 2020-07-09 0.40.17.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/dfc87db6-82d6-36b5-6212-01f497a351c2.png\">\n\nbareレポジトリの本質的なものは、 `git init` したときに作られる `.git` フォルダだけを管理しているレポジトリみたいです。[https://git-scm.com/book/ja/v2/Gitサーバー-サーバー用の-Git-の取得]\n\n```\n$ mkdir sample\n\n$ cd sample\n\n$ ls\n\n$ ll\ntotal 0\ndrwxr-xr-x   2 yk  staff   64  7  9 00:49 .\ndrwxr-xr-x  10 yk  staff  320  7  9 00:49 ..\n\n$ git init\nInitialized empty Git repository in /Users/yk/workspace/sample/.git/\n\n$ ll\ntotal 0\ndrwxr-xr-x   3 yk  staff   96  7  9 00:49 .\ndrwxr-xr-x  10 yk  staff  320  7  9 00:49 ..\ndrwxr-xr-x   9 yk  staff  288  7  9 00:49 .git\n```\n\nこのlocalプロトコルを作成したときの bare というファイルの実態を持たないものがいわゆる世間で言われる `Gitサーバー` で、世の中にGitサーバーを構築してGit管理したいって思っている人たちの選択肢は次の3つくらいだと思っている。\n\n1. GitHub/GitLab/その他ホスティングサービスを使う\n1. 同じサーバー上の別の階層にbareレポジトリを置く\n1. 別のサーバー上にbareレポジトリを置く\n\n\n特に「社内でセキュリティが…」って理由がない限りは「マイクロソフトが買収した設計図サイトです！」と上司を説得してGitHubをbareレポジトリの代わりにする方向が一番きれいかなと思いました。イシュートラッカーとかカンバンとかプルリクエストとか使えるし、便利かなと\n\n\n## ついに始まるサーバにGit入れてみるサーバー構築編\n\nここみてGCPの無料VPSをたちあげた\nhttps://22musyoku.tokyo/gce-always-free/\n\n公開鍵を登録したら、こんな感じでSSHできる。\n\n```\nyk@yk sample % ssh 3X.1XX.XX.45\n\n(yes)\n\nWelcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-1019-gcp x86_64)\n\n(ryaku)\n\nyk@lwaysfree-micro:~$\n```\n\nGCP-Ubuntu20.04だとgitが入ってなかったので適当にいれる。\n\n```\n$ git\n-bash: git: command not found\n$ sudo apt update\n$ sudo apt upgrade\n$ git --version\ngit version 2.25.1\n```\n\nprojectのbareレポを作る\n\n```\n$ sudo mkdir /opt/git\n$ sudo mkdir /opt/git/project.git\n$ cd /opt/git/project.git\n$ sudo git init --bare\nInitialized empty Git repository in /opt/git/project.git/\n```\n\nローカルPCでいろいろごりごり\n\n```\n$ git status\nOn branch master\n\nNo commits yet\n\nnothing to commit (create/copy files and use \"git add\" to track)\n$ touch README.md\n$ git add .\n$ git commit -m \"INIT\"\n[master (root-commit) 909289c] INIT\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 README.md\n$\n\n# リモートの設定する\n# ykとIPアドレスの部分は適宜変えて\n$ git remote add origin yk@34.105.XX.XX:/opt/git/project.git\n$ git push origin master\n```\n\n\n\n```\n% git push origin master\n\nEnumerating objects: 3, done.\nCounting objects: 100% (3/3), done.\nWriting objects: 100% (3/3), 213 bytes | 213.00 KiB/s, done.\nTotal 3 (delta 0), reused 0 (delta 0)\nerror: remote unpack failed: unable to create temporary object directory\nTo 34.105.93.45:/opt/git/project.git\n ! [remote rejected] master -> master (unpacker error)\nerror: failed to push some refs to 'yk@34.105.93.45:/opt/git/project.git'\n```\n\n書き込みのエラーが出たので一旦ユーザー所有者にする\n\n```bash\nyk@lwaysfree-micro:/opt/git$ sudo chown yk project.git/ -R\nyk@lwaysfree-micro:/opt/git$ ll\ntotal 12\ndrwxr-xr-x 3 root root 4096 Jul  8 16:11 ./\ndrwxr-xr-x 3 root root 4096 Jul  8 16:10 ../\ndrwxr-xr-x 7 yk   root 4096 Jul  8 16:34 project.git/\n```\n\nOKそう。push成功！\n\n```bash\n% git push origin master\n\nEnumerating objects: 3, done.\nCounting objects: 100% (3/3), done.\nWriting objects: 100% (3/3), 213 bytes | 213.00 KiB/s, done.\nTotal 3 (delta 0), reused 0 (delta 0)\nTo 34.105.93.45:/opt/git/project.git\n * [new branch]      master -> master\n```\n\nlocalにクローンしてくることもできます！いい感じですね。\nこれが噂のGit用だけのGitサーバーか…\n\n```bash\n$ git clone yk@34.105.XX.XX:/opt/git/project.git sample-clone\nCloning into 'sample-clone'...\nremote: Enumerating objects: 3, done.\nremote: Counting objects: 100% (3/3), done.\nremote: Total 3 (delta 0), reused 0 (delta 0)\nReceiving objects: 100% (3/3), done.\n\n$ cd sample-clone\n\ny$ git log\ncommit 909289c7a8057ec6fcb207da70684e9daa81e39e (HEAD -> master, origin/master, origin/HEAD)\nAuthor: Yuki <yuki@example.com>\nDate:   Thu Jul 9 01:22:46 2020 +0900\n```\n\n`4.10 Gitサーバー - まとめ` に書かれていますが\n\n\n> 自前でサーバーを構築すれば、多くのことを制御できるようになり、ファイアウォールの内側でもサーバーを実行することができます。 しかし、サーバーを構築して運用するにはそれなりの手間がかかります。ホスティングサービスを使えば、サーバーの準備や保守は簡単になります。 しかし、他人のサーバー上に自分のコードを置き続けなければなりません。組織によってはそんなことを許可していないかもしれません。\n\n\n可能ならGitHubとか使いましょう〜\n\n\n## GitWeb立ち上げてみる\n\n`4.7 Gitサーバー - GitWeb`\n\n簡単にGitのなにそれをWebで見えるいい感じのサーバーが立ち上げられます。(macだとrubyが入っているので)\n\n```bash\nyk@yk workspace % mkdir sample\nyk@yk workspace % cd sample \nyk@yk sample % git init \nInitialized empty Git repository in /Users/yk/workspace/sample/.git/\nyk@yk sample % touch README.md\nyk@yk sample % git add README.md \nyk@yk sample % git status\nOn branch master\n\nNo commits yet\n\nChanges to be committed:\n  (use \"git rm --cached <file>...\" to unstage)\n\tnew file:   README.md\n\nyk@yk sample % git commit -m \"INIT\"\n[master (root-commit) 290565d] INIT\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 README.md\nyk@yk sample % git instaweb --httpd=webrick --stop\nyk@yk sample % git instaweb --httpd=webrick       \nyk@yk sample % \n\n# http://127.0.0.1:1234/ が立ち上がります！！！！！\n\n# 必要なくなったら落とす\nyk@yk sample % git instaweb --httpd=webrick --stop\n```\n\n<img width=\"1680\" alt=\"スクリーンショット 2020-07-10 23.46.16.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2c37c5bb-23df-483c-22bd-56294e48e1e7.png\">\n\nこれでSource Treeとか必要ないですね！！！！！（極論）\n\n正直TIGとかのほうが好きだと思ってしまったのはここだけの話。\n\n`4.8 Gitサーバー - GitLab` でGitWeb使うくらいならGitLab使おうぜ…OSSだし。みたいな雰囲気が醸し出されています。\n\n## 結論Gitサーバーって何?\n\n調べてもよくわからなかった。\n\nGitだけのために用意している、踏み台サーバー的な存在のことを `Gitサーバー` って呼んでいるのかと思った。\nbareレポジトリをホストするだけならわざわざサーバーを建てずに、プロジェクトと同じサーバーの別の階層におけばいいのでは、と思いました。（感想）\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2020-07-11T11:32:30+09:00","group":null,"id":"c172d09943e932899c9e","likes_count":17,"private":false,"reactions_count":0,"stocks_count":18,"tags":[{"name":"Git","versions":[]},{"name":"GitHub","versions":[]},{"name":"GitLab","versions":[]}],"title":"【Gitサーバー】サーバーにGitを入れてGitサーバー構築してみた【GitWeb】","updated_at":"2022-06-09T02:15:03+09:00","url":"https://qiita.com/ykhirao/items/c172d09943e932899c9e","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"api-gatewayとjsonサーバーで動的htmlレンダリングしてみた\" class=\"fragment\"></span><a href=\"#api-gateway%E3%81%A8json%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%A7%E5%8B%95%E7%9A%84html%E3%83%AC%E3%83%B3%E3%83%80%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F\"><i class=\"fa fa-link\"></i></a>API GatewayとJSONサーバーで動的htmlレンダリングしてみた。</h1>\n\n<p>AWSのAPI GatewayとDynamoDBとLambdaでサービス構築してみたかった動機があったので、今回はAPI Gatewayを触ってみた。</p>\n\n<ul>\n<li>特定URLにWebブラウザでアクセスする</li>\n<li>API GatewayがJSONデータを取得して、htmlにレンダリングして表示する</li>\n</ul>\n\n<p>というシンプルな構造です。</p>\n\n<p>今回はやらないが、API Gatewayは統合リクエストなどの機能を使えばLambdaを挟まなくてもDynamoDBにアクセスできます。なので、 <code>/1</code> にアクセスするとDynamoDBのあるテーブルの <code>id 1</code> にアクセスして必要なデータをJSON形式で取得して、そのデータをAPIGatewayの統合レスポンスでhtmlにマッピングして返す、みたいな簡単なWEBアプリケーションが作れます。その触りだけ書いて行きます。</p>\n\n<h2>\n<span id=\"やりかた\" class=\"fragment\"></span><a href=\"#%E3%82%84%E3%82%8A%E3%81%8B%E3%81%9F\"><i class=\"fa fa-link\"></i></a>やりかた</h2>\n\n<p>REST APIとかで作る。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/855da9fa14373cfce5ba4a2da6135974c8f1b3ae/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32333238396265382d363931332d363964362d343838352d6436613030326339363133312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1109\" alt=\"スクリーンショット 2020-05-14 5.12.04.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F23289be8-6913-69d6-4885-d6a002c96131.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2cd6b00a95f37fc9418ad90b1aac0fb1\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/23289be8-6913-69d6-4885-d6a002c96131.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F23289be8-6913-69d6-4885-d6a002c96131.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3ecfaba59774788dc3cc3ac3d76fa198 1x\" loading=\"lazy\"></a></p>\n\n<p>こんな感じで適当に作り</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/b0f284f74ce457f96b3b4f7e238608a16f5120d1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61656563363439302d303064342d306439652d383462322d6464396237653634653838612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1287\" alt=\"スクリーンショット 2020-05-14 5.12.37.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Faeec6490-00d4-0d9e-84b2-dd9b7e64e88a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8f4dacec16f7424f7fdb7f60bdbabe07\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/aeec6490-00d4-0d9e-84b2-dd9b7e64e88a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Faeec6490-00d4-0d9e-84b2-dd9b7e64e88a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b1f067c7c236c2cf0d5409a34465cb00 1x\" loading=\"lazy\"></a></p>\n\n<p>GETメソッドを追加する</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/a65642ae8b51848703495dcb56403641b61c2242/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f38633237633366352d396263362d653838302d313562362d3330346539353065643630612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"894\" alt=\"スクリーンショット 2020-05-14 5.13.08.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F8c27c3f5-9bc6-e880-15b6-304e950ed60a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ac389a2ba5b27129bb9bc6adcfd54e49\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/8c27c3f5-9bc6-e880-15b6-304e950ed60a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F8c27c3f5-9bc6-e880-15b6-304e950ed60a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=386f67aa56511eb2c35334179c840cd3 1x\" loading=\"lazy\"></a></p>\n\n<p>エンドポイントに <a href=\"https://jsondata.okiba.me/v1/json/PiWpM200513171710\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://jsondata.okiba.me/v1/json/PiWpM200513171710</a> みたいなJSONを返してくれるURLをいれる。Lambdaとかに接続させてもいいがその場合は <code>AWSサービス</code> を選びゴニョゴニョしてください。後ほど書きますがMockだと、統合レスポンスでマッピングできなくてハマります。</p>\n\n<p>今回の帰ってくるデータはこれ</p>\n\n<div class=\"code-frame\" data-lang=\"json\"><div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"statusCode\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">200</span><span class=\"p\">,</span><span class=\"w\"> \n  </span><span class=\"nl\">\"body\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n    </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"JavaScript\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"tel\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"08000000000\"</span><span class=\"w\">\n    </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Object\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"tel\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"09000000000\"</span><span class=\"w\">\n    </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Node\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"tel\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"07000000000\"</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">]</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n\n<p><a href=\"https://camo.qiitausercontent.com/b15e8e46755971e942053d9461296af1af90985a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36613430306263622d313937362d643434362d383732362d3630306366326462356534352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1107\" alt=\"スクリーンショット 2020-05-14 5.13.47.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6a400bcb-1976-d446-8726-600cf2db5e45.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f331b304ae46cae1d7d55a9c0ce81536\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6a400bcb-1976-d446-8726-600cf2db5e45.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6a400bcb-1976-d446-8726-600cf2db5e45.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e322088dd2601ccb6f670e596f65d5a1 1x\" loading=\"lazy\"></a></p>\n\n<p>次はここの <code>メソッドレスポンス</code> と <code>統合レスポンス</code> をいじる。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/65c168fa84d49840c6afadcef7b41930a13b3fdd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f65306163393931632d366534662d656465332d306363322d6132393664616661313739642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1085\" alt=\"スクリーンショット 2020-05-14 5.44.49.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fe0ac991c-6e4f-ede3-0cc2-a296dafa179d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=827b28d91245fd1b48102a918679659f\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/e0ac991c-6e4f-ede3-0cc2-a296dafa179d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fe0ac991c-6e4f-ede3-0cc2-a296dafa179d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=55a89622200ac0f42d04eaf1e1402121 1x\" loading=\"lazy\"></a></p>\n\n<p>メソッドレスポンスで <code>200</code> のステータスで <code>text/html</code> がブラウザに帰るように設定する。<br>\nこのあたりの <code>application/json</code> を <code>text/html</code> に変えたらおｋ。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/12d9a201a77702bf68c605f8c736889313d29fc1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f66333664343433652d323333662d356233642d373537312d3230663866646332336135642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"930\" alt=\"スクリーンショット 2020-05-14 5.48.26.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ff36d443e-233f-5b3d-7571-20f8fdc23a5d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=81ef8cbab46c1d0e5ada1247ea663056\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/f36d443e-233f-5b3d-7571-20f8fdc23a5d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ff36d443e-233f-5b3d-7571-20f8fdc23a5d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d1caedd4190ee451ee4a6c3e17d2435b 1x\" loading=\"lazy\"></a></p>\n\n<p>次は統合レスポンスですが、これもこのあたりの <code>application/json</code> を <code>text/html</code> に変えたらおｋ。<br>\n<a href=\"https://jsondata.okiba.me/v1/json/PiWpM200513171710\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://jsondata.okiba.me/v1/json/PiWpM200513171710</a> が200を返したときの処理しか書いてないが一旦これでOK</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/1198c5d5695c8fcde1a495ecc5f258ad174ca42c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f31366332613032612d383862332d613162322d623861312d3765383665396465393063642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"952\" alt=\"スクリーンショット 2020-05-14 5.49.48.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F16c2a02a-88b3-a1b2-b8a1-7e86e9de90cd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=33d5b88a7f4d8e0e19b7dea869a4f388\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/16c2a02a-88b3-a1b2-b8a1-7e86e9de90cd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F16c2a02a-88b3-a1b2-b8a1-7e86e9de90cd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a8b05161204761d685cd1d3595bbd46a 1x\" loading=\"lazy\"></a></p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code>#set($inputRoot = $input.path('$.body'))\n\n<span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"nt\">&lt;html</span> <span class=\"na\">lang=</span><span class=\"s\">\"ja\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;head&gt;</span>\n        <span class=\"nt\">&lt;meta</span> <span class=\"na\">charset=</span><span class=\"s\">\"UTF-8\"</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;meta</span> <span class=\"na\">name=</span><span class=\"s\">\"viewport\"</span> <span class=\"na\">content=</span><span class=\"s\">\"width=device-width, initial-scale=1.0\"</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;link</span>\n            <span class=\"na\">rel=</span><span class=\"s\">\"stylesheet\"</span>\n            <span class=\"na\">href=</span><span class=\"s\">\"https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/light.min.css\"</span>\n        <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;title&gt;</span>API Gateway<span class=\"nt\">&lt;/title&gt;</span>\n    <span class=\"nt\">&lt;/head&gt;</span>\n    <span class=\"nt\">&lt;body&gt;</span>\n        <span class=\"nt\">&lt;h1&gt;</span>Qiitaテスト<span class=\"nt\">&lt;/h1&gt;</span>\n        <span class=\"nt\">&lt;table</span> <span class=\"na\">border=</span><span class=\"s\">\"1\"</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;tr&gt;</span>\n                <span class=\"nt\">&lt;td&gt;</span>id<span class=\"nt\">&lt;/td&gt;</span>\n                <span class=\"nt\">&lt;td&gt;</span>name<span class=\"nt\">&lt;/td&gt;</span>\n                <span class=\"nt\">&lt;td&gt;</span>tel<span class=\"nt\">&lt;/td&gt;</span>\n            <span class=\"nt\">&lt;/tr&gt;</span>\n            #foreach($elem in $inputRoot)\n            <span class=\"nt\">&lt;tr&gt;</span>\n                <span class=\"nt\">&lt;td&gt;</span>$elem.id<span class=\"nt\">&lt;/td&gt;</span>\n                <span class=\"nt\">&lt;td&gt;</span>$elem.name<span class=\"nt\">&lt;/td&gt;</span>\n                <span class=\"nt\">&lt;td&gt;</span>$elem.tel<span class=\"nt\">&lt;/td&gt;</span>\n            <span class=\"nt\">&lt;/tr&gt;</span>\n            #end\n        <span class=\"nt\">&lt;/table&gt;</span>\n    <span class=\"nt\">&lt;/body&gt;</span>\n<span class=\"nt\">&lt;/html&gt;</span>\n</code></pre></div></div>\n\n<p>マッピングはVTLという名前のテンプレートエンジン？<br>\n<a href=\"https://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/api-gateway-mapping-template-reference.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/api-gateway-mapping-template-reference.html</a></p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code>#foreach($elem in $inputRoot)\n<span class=\"nt\">&lt;tr&gt;</span>\n    <span class=\"nt\">&lt;td&gt;</span>$elem.id<span class=\"nt\">&lt;/td&gt;</span>\n    <span class=\"nt\">&lt;td&gt;</span>$elem.name<span class=\"nt\">&lt;/td&gt;</span>\n    <span class=\"nt\">&lt;td&gt;</span>$elem.tel<span class=\"nt\">&lt;/td&gt;</span>\n<span class=\"nt\">&lt;/tr&gt;</span>\n#end\n</code></pre></div></div>\n\n<p>で、一個前の画面に戻っての <code>テスト⚡</code> </p>\n\n<p><a href=\"https://camo.qiitausercontent.com/eb7bcb86c26cc78871ed38824105dc0f3ea4621b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f38656462653634392d323261392d393232382d333061622d6430353032366331666536322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1085\" alt=\"スクリーンショット 2020-05-14 5.44.49.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F8edbe649-22a9-9228-30ab-d05026c1fe62.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1f8244be59f3a6fca98ab5ceaeedbf02\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/8edbe649-22a9-9228-30ab-d05026c1fe62.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F8edbe649-22a9-9228-30ab-d05026c1fe62.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4cbe56f35130a86ff3ef19d92b1f2802 1x\" loading=\"lazy\"></a></p>\n\n<p>テストとかぽちぽちしてると、ちゃんとhtmlが帰ってくれるならおｋ。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/96c5461e4ffd4c061e381cbbac516c9e162e5992/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39373232366361362d656439362d323865622d666263312d3333343130346563643563322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"947\" alt=\"スクリーンショット 2020-05-14 5.55.08.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F97226ca6-ed96-28eb-fbc1-334104ecd5c2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5dc23304717820f2c9e0e15d9e9069d2\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/97226ca6-ed96-28eb-fbc1-334104ecd5c2.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F97226ca6-ed96-28eb-fbc1-334104ecd5c2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a02e5078e0193d720cbf614d9e9078c5 1x\" loading=\"lazy\"></a></p>\n\n<p>APIのデプロイして、誰でもアクセスできるようにして、ステージ名は適当に <code>develop</code> とか <code>stage</code> とかでいいと思う。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/8d3c2b4e31f04c7eb214784f99a086f63c74609b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f64643232333934662d636264662d666337372d333834612d3630643135653761343438332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"512\" alt=\"スクリーンショット 2020-05-14 5.56.01.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fdd22394f-cbdf-fc77-384a-60d15e7a4483.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5e29550b89a8e93fbf144ec69b49cf77\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/dd22394f-cbdf-fc77-384a-60d15e7a4483.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fdd22394f-cbdf-fc77-384a-60d15e7a4483.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=de812b4579ccde6b551c7bccaf031726 1x\" loading=\"lazy\"></a></p>\n\n<p><qiita-embed-ogp src=\"https://XXXXXXXXXXXXXX.execute-api.ap-northeast-1.amazonaws.com/stage\"></qiita-embed-ogp></p>\n\n<p>みたいなURLが発行されて完了です。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/fdd9603b33d4e84863814f08fb243768b436f21b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61376365666434632d363733392d386263362d633136612d3637663230346434313933322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1217\" alt=\"スクリーンショット 2020-05-14 5.57.52.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fa7cefd4c-6739-8bc6-c16a-67f204d41932.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f8d12610c362dce38ed56e22effa7de0\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a7cefd4c-6739-8bc6-c16a-67f204d41932.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fa7cefd4c-6739-8bc6-c16a-67f204d41932.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5be3f1b698ac3ea3259a61f7e63cf1b5 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"mockを統合レスポンスで使おうとしてハマった話\" class=\"fragment\"></span><a href=\"#mock%E3%82%92%E7%B5%B1%E5%90%88%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%81%A7%E4%BD%BF%E3%81%8A%E3%81%86%E3%81%A8%E3%81%97%E3%81%A6%E3%83%8F%E3%83%9E%E3%81%A3%E3%81%9F%E8%A9%B1\"><i class=\"fa fa-link\"></i></a>Mockを統合レスポンスで使おうとしてハマった話</h2>\n\n<p><a href=\"https://camo.qiitausercontent.com/ab7dadcdc3da000ba4120ca245956c9425827f49/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36373230376431362d623236372d333735652d616165642d3962383862336435653533302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"940\" alt=\"スクリーンショット 2020-05-14 2.07.22.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F67207d16-b267-375e-aaed-9b88b3d5e530.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6dc12c2d268c5eb0a9499408bcc8a85d\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/67207d16-b267-375e-aaed-9b88b3d5e530.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F67207d16-b267-375e-aaed-9b88b3d5e530.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=190f5f67239bf7a196466bbf097f1c72 1x\" loading=\"lazy\"></a></p>\n\n<p>絵でいうとここが <code>$input.json('$')</code> が使えなかったので2週間くらいハマってました（途中でこころ折れたりしながらの二週間）</p>\n\n<p>スタック・オーバーフローに <a href=\"https://stackoverflow.com/questions/47918477/aws-api-gateway-use-mock-integration-to-echo-response-body\" rel=\"nofollow noopener\" target=\"_blank\">書いて</a>ました。</p>\n\n<p>以前 <a href=\"https://qiita.com/ykhirao/items/a41322085ab55837b88e\" id=\"reference-ae3c3946afce091a3365\">JSONを返す無料APIを3分で作る方法</a> を書きましたが、今回は <a href=\"https://jsondata.okiba.me/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://jsondata.okiba.me/</a> さんを使わせてもらいました。リクエストを噛まさずにAWSサービス内で完結させようと思ってのMOCKでしたが見事にハマりました。</p>\n\n<p><qiita-embed-ogp src=\"https://jsondata.okiba.me/v1/json/PiWpM200513171710\"></qiita-embed-ogp></p>\n","body":"# API GatewayとJSONサーバーで動的htmlレンダリングしてみた。\n\nAWSのAPI GatewayとDynamoDBとLambdaでサービス構築してみたかった動機があったので、今回はAPI Gatewayを触ってみた。\n\n- 特定URLにWebブラウザでアクセスする\n- API GatewayがJSONデータを取得して、htmlにレンダリングして表示する\n\nというシンプルな構造です。\n\n今回はやらないが、API Gatewayは統合リクエストなどの機能を使えばLambdaを挟まなくてもDynamoDBにアクセスできます。なので、 `/1` にアクセスするとDynamoDBのあるテーブルの `id 1` にアクセスして必要なデータをJSON形式で取得して、そのデータをAPIGatewayの統合レスポンスでhtmlにマッピングして返す、みたいな簡単なWEBアプリケーションが作れます。その触りだけ書いて行きます。\n\n## やりかた\n\nREST APIとかで作る。\n\n<img width=\"1109\" alt=\"スクリーンショット 2020-05-14 5.12.04.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/23289be8-6913-69d6-4885-d6a002c96131.png\">\n\nこんな感じで適当に作り\n\n<img width=\"1287\" alt=\"スクリーンショット 2020-05-14 5.12.37.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/aeec6490-00d4-0d9e-84b2-dd9b7e64e88a.png\">\n\nGETメソッドを追加する\n\n<img width=\"894\" alt=\"スクリーンショット 2020-05-14 5.13.08.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/8c27c3f5-9bc6-e880-15b6-304e950ed60a.png\">\n\nエンドポイントに https://jsondata.okiba.me/v1/json/PiWpM200513171710 みたいなJSONを返してくれるURLをいれる。Lambdaとかに接続させてもいいがその場合は `AWSサービス` を選びゴニョゴニョしてください。後ほど書きますがMockだと、統合レスポンスでマッピングできなくてハマります。\n\n今回の帰ってくるデータはこれ\n\n```json\n{\n  \"statusCode\": 200, \n  \"body\": [\n    {\n      \"id\": 1,\n      \"name\": \"JavaScript\",\n      \"tel\": \"08000000000\"\n    },\n    {\n      \"id\": 2,\n      \"name\": \"Object\",\n      \"tel\": \"09000000000\"\n    },\n    {\n      \"id\": 3,\n      \"name\": \"Node\",\n      \"tel\": \"07000000000\"\n    }\n  ]\n}\n```\n\n<img width=\"1107\" alt=\"スクリーンショット 2020-05-14 5.13.47.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6a400bcb-1976-d446-8726-600cf2db5e45.png\">\n\n次はここの `メソッドレスポンス` と `統合レスポンス` をいじる。\n\n<img width=\"1085\" alt=\"スクリーンショット 2020-05-14 5.44.49.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/e0ac991c-6e4f-ede3-0cc2-a296dafa179d.png\">\n\nメソッドレスポンスで `200` のステータスで `text/html` がブラウザに帰るように設定する。\nこのあたりの `application/json` を `text/html` に変えたらおｋ。\n\n<img width=\"930\" alt=\"スクリーンショット 2020-05-14 5.48.26.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/f36d443e-233f-5b3d-7571-20f8fdc23a5d.png\">\n\n次は統合レスポンスですが、これもこのあたりの `application/json` を `text/html` に変えたらおｋ。\nhttps://jsondata.okiba.me/v1/json/PiWpM200513171710 が200を返したときの処理しか書いてないが一旦これでOK\n\n\n<img width=\"952\" alt=\"スクリーンショット 2020-05-14 5.49.48.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/16c2a02a-88b3-a1b2-b8a1-7e86e9de90cd.png\">\n\n\n```html\n#set($inputRoot = $input.path('$.body'))\n\n<!DOCTYPE html>\n<html lang=\"ja\">\n    <head>\n        <meta charset=\"UTF-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <link\n            rel=\"stylesheet\"\n            href=\"https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/light.min.css\"\n        />\n        <title>API Gateway</title>\n    </head>\n    <body>\n        <h1>Qiitaテスト</h1>\n        <table border=\"1\">\n            <tr>\n                <td>id</td>\n                <td>name</td>\n                <td>tel</td>\n            </tr>\n            #foreach($elem in $inputRoot)\n            <tr>\n                <td>$elem.id</td>\n                <td>$elem.name</td>\n                <td>$elem.tel</td>\n            </tr>\n            #end\n        </table>\n    </body>\n</html>\n```\n\nマッピングはVTLという名前のテンプレートエンジン？\nhttps://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/api-gateway-mapping-template-reference.html\n\n```html\n#foreach($elem in $inputRoot)\n<tr>\n    <td>$elem.id</td>\n    <td>$elem.name</td>\n    <td>$elem.tel</td>\n</tr>\n#end\n```\n\nで、一個前の画面に戻っての `テスト⚡` \n\n\n<img width=\"1085\" alt=\"スクリーンショット 2020-05-14 5.44.49.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/8edbe649-22a9-9228-30ab-d05026c1fe62.png\">\n\nテストとかぽちぽちしてると、ちゃんとhtmlが帰ってくれるならおｋ。\n\n<img width=\"947\" alt=\"スクリーンショット 2020-05-14 5.55.08.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/97226ca6-ed96-28eb-fbc1-334104ecd5c2.png\">\n\nAPIのデプロイして、誰でもアクセスできるようにして、ステージ名は適当に `develop` とか `stage` とかでいいと思う。\n\n<img width=\"512\" alt=\"スクリーンショット 2020-05-14 5.56.01.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/dd22394f-cbdf-fc77-384a-60d15e7a4483.png\">\n\n\nhttps://XXXXXXXXXXXXXX.execute-api.ap-northeast-1.amazonaws.com/stage\n\nみたいなURLが発行されて完了です。\n\n<img width=\"1217\" alt=\"スクリーンショット 2020-05-14 5.57.52.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a7cefd4c-6739-8bc6-c16a-67f204d41932.png\">\n\n\n## Mockを統合レスポンスで使おうとしてハマった話\n\n<img width=\"940\" alt=\"スクリーンショット 2020-05-14 2.07.22.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/67207d16-b267-375e-aaed-9b88b3d5e530.png\">\n\n\n絵でいうとここが `$input.json('$')` が使えなかったので2週間くらいハマってました（途中でこころ折れたりしながらの二週間）\n\nスタック・オーバーフローに [書いて](https://stackoverflow.com/questions/47918477/aws-api-gateway-use-mock-integration-to-echo-response-body)ました。\n\n以前 [JSONを返す無料APIを3分で作る方法](https://qiita.com/ykhirao/items/a41322085ab55837b88e) を書きましたが、今回は https://jsondata.okiba.me/ さんを使わせてもらいました。リクエストを噛まさずにAWSサービス内で完結させようと思ってのMOCKでしたが見事にハマりました。\n\nhttps://jsondata.okiba.me/v1/json/PiWpM200513171710\n\n","coediting":false,"comments_count":0,"created_at":"2020-05-14T05:59:27+09:00","group":null,"id":"0fdd5876d9f906ffd90a","likes_count":7,"private":false,"reactions_count":0,"stocks_count":5,"tags":[{"name":"AWS","versions":[]},{"name":"API","versions":[]},{"name":"APIGateway","versions":[]}],"title":"[AWS] API GatewayとJSONサーバーで動的htmlレンダリングしてみた。","updated_at":"2020-05-14T06:00:17+09:00","url":"https://qiita.com/ykhirao/items/0fdd5876d9f906ffd90a","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p>なんか微妙にミスってて一部ファイルをdevelopブランチとかから持ってきて、ごにょっとごまかしたい時ありますよね。そんな時の</p>\n\n<h2>\n<span id=\"checkout編\" class=\"fragment\"></span><a href=\"#checkout%E7%B7%A8\"><i class=\"fa fa-link\"></i></a>checkout編</h2>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>git checkout develop tests/API/<span class=\"k\">*</span>\n</code></pre></div></div>\n\n<p>developブランチの <code>tests/API/*</code> ディレクトリ全部持ってくる。</p>\n\n<hr>\n\n<p>以下蛇足編</p>\n\n<h2>\n<span id=\"リバート編\" class=\"fragment\"></span><a href=\"#%E3%83%AA%E3%83%90%E3%83%BC%E3%83%88%E7%B7%A8\"><i class=\"fa fa-link\"></i></a>リバート編</h2>\n\n<p>コミットが一つなら単純に</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>git log \n<span class=\"go\">\ncommit bdf589c8bdca598eae59c8fd3559f5129e5489\n</span><span class=\"gp\">Author: Yuki Hirao &lt;&gt;</span><span class=\"w\">\n</span><span class=\"go\">Date:   Tue May 12 14:39:35 2020 +0900\n\n    テスト修正: AAAAAAAA\n</span></code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>git revert bdf589c8bdca598eae59c8fd3559f5129e5489\n</code></pre></div></div>\n\n<p>とかでいい気がする</p>\n","body":"なんか微妙にミスってて一部ファイルをdevelopブランチとかから持ってきて、ごにょっとごまかしたい時ありますよね。そんな時の\n\n## checkout編\n\n```shell-session\n$ git checkout develop tests/API/*\n```\n\ndevelopブランチの `tests/API/*` ディレクトリ全部持ってくる。\n\n\n--- \n\n以下蛇足編\n\n\n## リバート編\n\nコミットが一つなら単純に\n\n```shell-session\n$ git log \n\ncommit bdf589c8bdca598eae59c8fd3559f5129e5489\nAuthor: Yuki Hirao <>\nDate:   Tue May 12 14:39:35 2020 +0900\n\n    テスト修正: AAAAAAAA\n```\n\n```shell-session\n$ git revert bdf589c8bdca598eae59c8fd3559f5129e5489\n```\n\nとかでいい気がする\n\n\n\n\n","coediting":false,"comments_count":0,"created_at":"2020-05-12T16:23:27+09:00","group":null,"id":"b1ac0cbd85298737e7f0","likes_count":1,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"Git","versions":[]}],"title":"[git]地味に便利に特定ブランチの特定ファイルを持ってくる","updated_at":"2020-05-12T16:23:27+09:00","url":"https://qiita.com/ykhirao/items/b1ac0cbd85298737e7f0","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"シェルスクリプト内でディレクトリ階層移動して呼び出し元で反映する方法\" class=\"fragment\"></span><a href=\"#%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E5%86%85%E3%81%A7%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E9%9A%8E%E5%B1%A4%E7%A7%BB%E5%8B%95%E3%81%97%E3%81%A6%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E5%85%83%E3%81%A7%E5%8F%8D%E6%98%A0%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>シェルスクリプト内でディレクトリ階層移動して呼び出し元で反映する方法</h1>\n\n<p>簡単なシェルスクリプト書いたので後世に残しておく。<br>\n特にシェルに詳しいわけではないので何か問題あったら気軽に編集リクエストとかコメントください！</p>\n\n<h2>\n<span id=\"やりたいこと\" class=\"fragment\"></span><a href=\"#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8\"><i class=\"fa fa-link\"></i></a>やりたいこと</h2>\n\n<ul>\n<li>毎日サーバー上で日付いりのフォルダを掘ってそこで作業している人向けのスクリプト <code>mkdir 190512 &amp;&amp; cd 190512</code>\n</li>\n<li>現シェルのコンテキストで別シェルを呼び出す <code>source ~/start.sh</code>\n</li>\n</ul>\n\n<h2>\n<span id=\"データ\" class=\"fragment\"></span><a href=\"#%E3%83%87%E3%83%BC%E3%82%BF\"><i class=\"fa fa-link\"></i></a>データ</h2>\n\n<blockquote>\n<p>~/ops/startTodaysOps.sh</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code><span class=\"c\">#!/bin/bash</span>\n\n<span class=\"nv\">dir1</span><span class=\"o\">=</span><span class=\"s1\">'ops/'</span>\n<span class=\"nv\">dir2</span><span class=\"o\">=</span><span class=\"sb\">`</span><span class=\"nb\">date</span> <span class=\"s2\">\"+%y%m%d\"</span><span class=\"sb\">`</span>\n\n<span class=\"nb\">dir</span><span class=\"o\">=</span><span class=\"nv\">$dir1$dir2</span>\n\n<span class=\"k\">if</span> <span class=\"o\">[[</span> <span class=\"o\">!</span> <span class=\"nt\">-e</span> <span class=\"nv\">$dir</span> <span class=\"o\">]]</span><span class=\"p\">;</span> <span class=\"k\">then\n    </span><span class=\"nb\">mkdir</span> <span class=\"nv\">$dir</span>\n    <span class=\"nb\">chmod </span>g+w <span class=\"nv\">$dir</span>\n<span class=\"k\">fi\n\n</span><span class=\"nb\">echo</span> <span class=\"nv\">$dir</span>\n<span class=\"nb\">cd</span> <span class=\"nv\">$dir</span>\n</code></pre></div></div>\n\n<blockquote>\n<p>~/.bashrc</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"bashrc\"><div class=\"highlight\"><pre><code>alias start='source ~/ops/startTodaysOps.sh'\n</code></pre></div></div>\n\n<blockquote>\n<p>実行する</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>hirao <span class=\"nv\">$ </span>start\nops/200512\n\nhirao <span class=\"nv\">$ </span>~/ops/200512<span class=\"nv\">$ </span>\n</code></pre></div></div>\n\n<h2>\n<span id=\"ちょっとだけ解説\" class=\"fragment\"></span><a href=\"#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%A0%E3%81%91%E8%A7%A3%E8%AA%AC\"><i class=\"fa fa-link\"></i></a>ちょっとだけ解説</h2>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code># 存在確認\nif [[ ! -e $dir ]]; then\n\nfi\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code><span class=\"c\"># -p オプションで存在確認してもよし</span>\n    <span class=\"nb\">mkdir</span> <span class=\"nv\">$dir</span>\n\n<span class=\"c\"># とりあえずグループに書き込み権限あたえる</span>\n    <span class=\"nb\">chmod </span>g+w <span class=\"nv\">$dir</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code><span class=\"nb\">cd</span> <span class=\"nv\">$dir</span>\n\n<span class=\"c\"># このCDは source で呼び出さないと別シェルでディレクトリ移動するっぽい</span>\n</code></pre></div></div>\n\n<p>実行シェルのプロセスIDを書き出す</p>\n\n<blockquote>\n<p>test.sh</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code><span class=\"c\">#!/bin/bash</span>\n\n<span class=\"nb\">echo</span> <span class=\"nv\">$$</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>~/workspace/shell-sample hirao<span class=\"nv\">$ </span><span class=\"nb\">echo</span> <span class=\"nv\">$$</span>\n42143\n\n~/workspace/shell-sample hirao<span class=\"nv\">$ </span>./test1.sh       \n42366\n\n~/workspace/shell-sample hirao<span class=\"nv\">$ </span><span class=\"nb\">source</span> ./test1.sh\n42143\n\n</code></pre></div></div>\n\n<p>こんな感じ。sourceで実行すればもとのシェル内での移動になるので実行後に移動されています。</p>\n\n<h2>\n<span id=\"終わりに\" class=\"fragment\"></span><a href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>終わりに</h2>\n\n<p>結構雑に書きましたが、スクリプト書くのには時間かかった（ <code>cd</code> されずにハマった）ので同じ感じでハマるかたがいないように <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"></p>\n","body":"# シェルスクリプト内でディレクトリ階層移動して呼び出し元で反映する方法\n\n簡単なシェルスクリプト書いたので後世に残しておく。\n特にシェルに詳しいわけではないので何か問題あったら気軽に編集リクエストとかコメントください！\n\n## やりたいこと\n\n- 毎日サーバー上で日付いりのフォルダを掘ってそこで作業している人向けのスクリプト `mkdir 190512 && cd 190512`\n- 現シェルのコンテキストで別シェルを呼び出す `source ~/start.sh`\n\n## データ\n\n> ~/ops/startTodaysOps.sh\n\n```bash\n#!/bin/bash\n\ndir1='ops/'\ndir2=`date \"+%y%m%d\"`\n\ndir=$dir1$dir2\n\nif [[ ! -e $dir ]]; then\n    mkdir $dir\n    chmod g+w $dir\nfi\n\necho $dir\ncd $dir\n```\n\n> ~/.bashrc\n\n```.bashrc\nalias start='source ~/ops/startTodaysOps.sh'\n```\n\n> 実行する\n\n```bash\nhirao $ start\nops/200512\n\nhirao $ ~/ops/200512$ \n```\n\n## ちょっとだけ解説\n\n\n```\n# 存在確認\nif [[ ! -e $dir ]]; then\n\nfi\n```\n\n```bash\n# -p オプションで存在確認してもよし\n    mkdir $dir\n\n# とりあえずグループに書き込み権限あたえる\n    chmod g+w $dir\n```\n\n```bash\ncd $dir\n\n# このCDは source で呼び出さないと別シェルでディレクトリ移動するっぽい\n```\n\n実行シェルのプロセスIDを書き出す\n\n\n> test.sh\n\n```bash\n#!/bin/bash\n\necho $$\n```\n\n\n```bash\n~/workspace/shell-sample hirao$ echo $$\n42143\n\n~/workspace/shell-sample hirao$ ./test1.sh       \n42366\n\n~/workspace/shell-sample hirao$ source ./test1.sh\n42143\n\n```\n\nこんな感じ。sourceで実行すればもとのシェル内での移動になるので実行後に移動されています。\n\n## 終わりに\n\n結構雑に書きましたが、スクリプト書くのには時間かかった（ `cd` されずにハマった）ので同じ感じでハマるかたがいないように :pray:\n","coediting":false,"comments_count":0,"created_at":"2020-05-12T11:25:26+09:00","group":null,"id":"f9e25324bc2e24891848","likes_count":1,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"Ubuntu","versions":[]},{"name":"shell","versions":[]}],"title":"シェルスクリプト内でディレクトリ階層移動して呼び出し元で反映する方法","updated_at":"2020-05-12T11:25:26+09:00","url":"https://qiita.com/ykhirao/items/f9e25324bc2e24891848","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:151\">\n<span id=\"gmailで大量の送信先にメールを送るときにスプレッドシートで管理するスクリプトを書いたので使ってほしい\" class=\"fragment\"></span><a href=\"#gmail%E3%81%A7%E5%A4%A7%E9%87%8F%E3%81%AE%E9%80%81%E4%BF%A1%E5%85%88%E3%81%AB%E3%83%A1%E3%83%BC%E3%83%AB%E3%82%92%E9%80%81%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%AB%E3%82%B9%E3%83%97%E3%83%AC%E3%83%83%E3%83%89%E3%82%B7%E3%83%BC%E3%83%88%E3%81%A7%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E6%9B%B8%E3%81%84%E3%81%9F%E3%81%AE%E3%81%A7%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BB%E3%81%97%E3%81%84\"><i class=\"fa fa-link\"></i></a>Gmailで大量の送信先にメールを送るときにスプレッドシートで管理するスクリプトを書いたので使ってほしい。</h1>\n<p data-sourcepos=\"3:1-3:33\">スクショはこんな感じ。</p>\n<a href=\"https://camo.qiitausercontent.com/b33ced787ae0f9adc8dbb1be8b521a3f594e6a07/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f66383035323666632d623130372d383533622d383163362d3935353765323337626564322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"944\" alt=\"スクリーンショット 2020-03-14 15.29.04.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ff80526fc-b107-853b-81c6-9557e237bed2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=17b8b022a7973f78b56e048435d22d79\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/f80526fc-b107-853b-81c6-9557e237bed2.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ff80526fc-b107-853b-81c6-9557e237bed2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1de81c0f2aad7ac7e751a056f38156a8 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"7:1-7:42\"><code>下書き作成</code> ぼたんポチすると</p>\n<a href=\"https://camo.qiitausercontent.com/e60634aca0c6db4d0fa5eb149719c3bd349e31be/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f34666639373434642d333438302d626338322d646532342d3035616535643130613035362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1351\" alt=\"スクリーンショット 2020-03-14 15.32.25.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F4ff9744d-3480-bc82-de24-05ae5d10a056.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9f62a1b3930a24a8cdeba2ba8ac522c4\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/4ff9744d-3480-bc82-de24-05ae5d10a056.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F4ff9744d-3480-bc82-de24-05ae5d10a056.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b3682d3594055533678cdd49b7b369ad 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"11:1-11:86\">Gmail側に下書きが保存されます。目で目視してから使ってくれ。</p>\n<h2 data-sourcepos=\"13:1-13:6\">\n<span id=\"faq\" class=\"fragment\"></span><a href=\"#faq\"><i class=\"fa fa-link\"></i></a>FAQ</h2>\n<ul data-sourcepos=\"15:1-24:0\">\n<li data-sourcepos=\"15:1-16:65\">BCCじゃだめなんですか？\n<ul data-sourcepos=\"16:5-16:65\">\n<li data-sourcepos=\"16:5-16:65\">Toでたくさん贈りたいときもあるよね…？？</li>\n</ul>\n</li>\n<li data-sourcepos=\"17:1-18:21\">え、もしかして ひとつひとつの宛先ごとにメール作ってくれるの？\n<ul data-sourcepos=\"18:5-18:21\">\n<li data-sourcepos=\"18:5-18:21\">そうです！</li>\n</ul>\n</li>\n<li data-sourcepos=\"19:1-21:101\">プログラムから実行すると、間違ったときに不安！！！\n<ul data-sourcepos=\"20:5-21:101\">\n<li data-sourcepos=\"20:5-20:97\">大丈夫です。下書き <code>GmailApp.createDraft(to, subject, body)</code> で作ってます！</li>\n<li data-sourcepos=\"21:5-21:101\">自分の目で確認してから、Gmailから送信ボタンぽちぽちしてください。</li>\n</ul>\n</li>\n<li data-sourcepos=\"22:1-24:0\">悪いことに使っていい？\n<ul data-sourcepos=\"23:5-24:0\">\n<li data-sourcepos=\"23:5-24:0\">絶対にやめてください。特定電子メール法に則って使ってください。</li>\n</ul>\n</li>\n</ul>\n<h2 data-sourcepos=\"25:1-25:9\">\n<span id=\"共有\" class=\"fragment\"></span><a href=\"#%E5%85%B1%E6%9C%89\"><i class=\"fa fa-link\"></i></a>共有</h2>\n<p data-sourcepos=\"27:1-28:51\">ファイルを共有したので自分のドライブにコピーして使ってほしいです。<br>\n共有リクエストしないでくださいね〜</p>\n<p data-sourcepos=\"30:1-30:63\">↓共有リクエストくるたびにメールきてます。</p>\n<p data-sourcepos=\"32:1-32:163\"><a href=\"https://camo.qiitausercontent.com/1d014ad262e48f1fc69453b9a4430cde72a409c7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f63363630343039392d393230662d666330612d316462302d3363353230373635653639382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc6604099-920f-fc0a-1db0-3c520765e698.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=74121489bc611f0e006ecb776776e4cf\" alt=\"スクリーンショット 2023-01-15 21.14.32.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c6604099-920f-fc0a-1db0-3c520765e698.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc6604099-920f-fc0a-1db0-3c520765e698.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=82d1b6373bd2d908ab208410593d43ff 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"35:1-35:100\"><iframe id=\"qiita-embed-content__8af4af7e78be9fb892f28a933453a5d3\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__8af4af7e78be9fb892f28a933453a5d3\" data-content=\"https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1fPE17OVUx0-OBXCRTZAm-vkLn1msYerBis7rN1tMaRc%2Fedit%3Fusp%3Dsharing\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<p data-sourcepos=\"37:1-37:191\">あ、もちろん実際に使われているコードがどんなのか見てから使ってほしいのと、Gmailから権限要求されるので適切に許可してあげてほしい。</p>\n<h2 data-sourcepos=\"39:1-39:9\">\n<span id=\"実装\" class=\"fragment\"></span><a href=\"#%E5%AE%9F%E8%A3%85\"><i class=\"fa fa-link\"></i></a>実装</h2>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"41:1-82:3\"><div class=\"highlight\"><pre><code><span class=\"cm\">/** *****************************************\n[ [ '項目', '内容', 'To', 'Name' ],\n  [ '件名', 'XXXXの件について', 'example@example.com', '開発室example さま' ],\n  [ '書き出し', '', 'example+123@example.com', '総務 田中 さま' ],\n  [ '本文', '', '', '' ],\n  [ 'To欄の数', 2, '', '' ] ]\n***************************************** */</span>\n<span class=\"kd\">const</span> <span class=\"nx\">allData</span> <span class=\"o\">=</span> <span class=\"nx\">SpreadsheetApp</span><span class=\"p\">.</span><span class=\"nf\">getActiveSheet</span><span class=\"p\">().</span><span class=\"nf\">getDataRange</span><span class=\"p\">().</span><span class=\"nf\">getValues</span><span class=\"p\">();</span>\n\n<span class=\"cm\">/** *****************************************\n['XXXXの件について', '本文']\n***************************************** */</span>\n<span class=\"kd\">const</span> <span class=\"nx\">commonData</span> <span class=\"o\">=</span> <span class=\"nx\">allData</span><span class=\"p\">.</span><span class=\"nf\">filter</span><span class=\"p\">(</span><span class=\"nx\">x</span> <span class=\"o\">=&gt;</span> <span class=\"p\">(</span><span class=\"nx\">x</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">===</span> <span class=\"dl\">\"</span><span class=\"s2\">件名</span><span class=\"dl\">\"</span> <span class=\"o\">||</span> <span class=\"nx\">x</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">===</span> <span class=\"dl\">\"</span><span class=\"s2\">本文</span><span class=\"dl\">\"</span><span class=\"p\">)).</span><span class=\"nf\">map</span><span class=\"p\">(</span><span class=\"nx\">x</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">x</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]);</span>\n\n<span class=\"cm\">/** *****************************************\n[ [ 'tanaka@example.com', '開発室example さま' ],\n  [ 'AAA@example.com', '総務 田中 さま' ] ]\n***************************************** */</span>\n<span class=\"kd\">const</span> <span class=\"nx\">toMailData</span> <span class=\"o\">=</span> <span class=\"nx\">allData</span><span class=\"p\">.</span><span class=\"nf\">filter</span><span class=\"p\">(</span><span class=\"nx\">x</span> <span class=\"o\">=&gt;</span> <span class=\"p\">(</span><span class=\"nx\">x</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"o\">!==</span> <span class=\"dl\">\"</span><span class=\"s2\">To</span><span class=\"dl\">\"</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">x</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"o\">!==</span> <span class=\"dl\">\"\"</span><span class=\"p\">)).</span><span class=\"nf\">map</span><span class=\"p\">(</span><span class=\"nx\">x</span> <span class=\"o\">=&gt;</span> <span class=\"p\">[</span><span class=\"nx\">x</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"nx\">x</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]])</span>\n\n<span class=\"kd\">function</span> <span class=\"nf\">createDraft</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">subject</span> <span class=\"o\">=</span> <span class=\"nx\">commonData</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">];</span>\n\n  <span class=\"c1\">// GmailApp.createDraft([\"hirao@openlogi.com\", \"hirao+2@openlogi.com\"], subject, \"body test\");</span>\n\n  <span class=\"nx\">toMailData</span><span class=\"p\">.</span><span class=\"nf\">forEach</span><span class=\"p\">(</span><span class=\"k\">async</span> <span class=\"nx\">x</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"nx\">x</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]);</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">to</span> <span class=\"o\">=</span> <span class=\"nx\">x</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">];</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">body</span> <span class=\"o\">=</span> <span class=\"nf\">createBody</span><span class=\"p\">(</span><span class=\"nx\">x</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]);</span>\n    <span class=\"k\">await</span> <span class=\"nx\">GmailApp</span><span class=\"p\">.</span><span class=\"nf\">createDraft</span><span class=\"p\">(</span><span class=\"nx\">to</span><span class=\"p\">,</span> <span class=\"nx\">subject</span><span class=\"p\">,</span> <span class=\"nx\">body</span><span class=\"p\">);</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/**\n * @todo メッセージ本文入れたり署名欄とか拡張する\n */</span>\n<span class=\"kd\">function</span> <span class=\"nf\">createBody</span><span class=\"p\">(</span><span class=\"nx\">name</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">return</span> <span class=\"nx\">name</span> <span class=\"o\">+</span> <span class=\"dl\">\"</span><span class=\"se\">\\n\\n</span><span class=\"dl\">\"</span> <span class=\"o\">+</span> <span class=\"nx\">commonData</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">];</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n<p data-sourcepos=\"87:1-87:120\"><code>下書き作成</code> ってボタンをスプレッドシート内のGASの関数 <code>createDraft</code> に紐づけています。</p>\n<p data-sourcepos=\"90:1-90:285\">発火したら、今ひらいているページのデータを読み込みにいってメール送信するので、こんな感じでどんどんタブを追加していって、どの時はどの人たちにメールを送ったのか、そういう履歴もわかりますです。</p>\n<a href=\"https://camo.qiitausercontent.com/763a833f552a8f96d06c83ca60c96ec7dc0d9770/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f35333164336333332d313038332d393566642d623831652d6337343932326239616632642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"426\" alt=\"スクリーンショット 2020-03-14 15.30.10.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F531d3c33-1083-95fd-b81e-c74922b9af2d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1bfeba60cd42a4303dccbef53075ab85\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/531d3c33-1083-95fd-b81e-c74922b9af2d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F531d3c33-1083-95fd-b81e-c74922b9af2d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=27779f5a95d1bf6bbc74eeccd457b391 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"95:1-95:9\">以上。</p>\n<p data-sourcepos=\"97:1-97:90\">今日さくっと作ったやつですが、必要な方いたら使ってください。</p>\n","body":"# Gmailで大量の送信先にメールを送るときにスプレッドシートで管理するスクリプトを書いたので使ってほしい。\n\nスクショはこんな感じ。\n\n<img width=\"944\" alt=\"スクリーンショット 2020-03-14 15.29.04.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/f80526fc-b107-853b-81c6-9557e237bed2.png\">\n\n`下書き作成` ぼたんポチすると\n\n<img width=\"1351\" alt=\"スクリーンショット 2020-03-14 15.32.25.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/4ff9744d-3480-bc82-de24-05ae5d10a056.png\">\n\nGmail側に下書きが保存されます。目で目視してから使ってくれ。\n\n## FAQ\n\n- BCCじゃだめなんですか？\n    - Toでたくさん贈りたいときもあるよね…？？\n- え、もしかして ひとつひとつの宛先ごとにメール作ってくれるの？\n    - そうです！\n- プログラムから実行すると、間違ったときに不安！！！\n    - 大丈夫です。下書き `GmailApp.createDraft(to, subject, body)` で作ってます！\n    - 自分の目で確認してから、Gmailから送信ボタンぽちぽちしてください。\n- 悪いことに使っていい？\n    - 絶対にやめてください。特定電子メール法に則って使ってください。\n\n## 共有\n\nファイルを共有したので自分のドライブにコピーして使ってほしいです。\n共有リクエストしないでくださいね〜\n\n↓共有リクエストくるたびにメールきてます。\n\n![スクリーンショット 2023-01-15 21.14.32.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c6604099-920f-fc0a-1db0-3c520765e698.png)\n\n\nhttps://docs.google.com/spreadsheets/d/1fPE17OVUx0-OBXCRTZAm-vkLn1msYerBis7rN1tMaRc/edit?usp=sharing\n\nあ、もちろん実際に使われているコードがどんなのか見てから使ってほしいのと、Gmailから権限要求されるので適切に許可してあげてほしい。\n\n## 実装\n\n```javascript\n/** *****************************************\n[ [ '項目', '内容', 'To', 'Name' ],\n  [ '件名', 'XXXXの件について', 'example@example.com', '開発室example さま' ],\n  [ '書き出し', '', 'example+123@example.com', '総務 田中 さま' ],\n  [ '本文', '', '', '' ],\n  [ 'To欄の数', 2, '', '' ] ]\n***************************************** */\nconst allData = SpreadsheetApp.getActiveSheet().getDataRange().getValues();\n\n/** *****************************************\n['XXXXの件について', '本文']\n***************************************** */\nconst commonData = allData.filter(x => (x[0] === \"件名\" || x[0] === \"本文\")).map(x => x[1]);\n\n/** *****************************************\n[ [ 'tanaka@example.com', '開発室example さま' ],\n  [ 'AAA@example.com', '総務 田中 さま' ] ]\n***************************************** */\nconst toMailData = allData.filter(x => (x[2] !== \"To\" && x[2] !== \"\")).map(x => [x[2], x[3]])\n\nfunction createDraft() {\n  const subject = commonData[0];\n\n  // GmailApp.createDraft([\"hirao@openlogi.com\", \"hirao+2@openlogi.com\"], subject, \"body test\");\n\n  toMailData.forEach(async x => {\n    console.log(x[0]);\n    const to = x[0];\n    const body = createBody(x[1]);\n    await GmailApp.createDraft(to, subject, body);\n  })\n}\n\n/**\n * @todo メッセージ本文入れたり署名欄とか拡張する\n */\nfunction createBody(name) {\n  return name + \"\\n\\n\" + commonData[1];\n}\n\n```\n\n\n\n\n`下書き作成` ってボタンをスプレッドシート内のGASの関数 `createDraft` に紐づけています。\n\n\n発火したら、今ひらいているページのデータを読み込みにいってメール送信するので、こんな感じでどんどんタブを追加していって、どの時はどの人たちにメールを送ったのか、そういう履歴もわかりますです。\n\n<img width=\"426\" alt=\"スクリーンショット 2020-03-14 15.30.10.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/531d3c33-1083-95fd-b81e-c74922b9af2d.png\">\n\n\n以上。\n\n今日さくっと作ったやつですが、必要な方いたら使ってください。\n","coediting":false,"comments_count":0,"created_at":"2020-03-14T15:33:41+09:00","group":null,"id":"7392b9d2d8c2096e2332","likes_count":5,"private":false,"reactions_count":0,"stocks_count":4,"tags":[{"name":"JavaScript","versions":[]},{"name":"GAS","versions":[]},{"name":"Gmail","versions":[]}],"title":"【大量のGmailを一括下書き作成】スプレッドシートから管理するスクリプトを書いたので使ってほしい。","updated_at":"2023-01-15T21:17:04+09:00","url":"https://qiita.com/ykhirao/items/7392b9d2d8c2096e2332","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"react-nativeを書いててcssの設計についてすごく考えたときの小話\" class=\"fragment\"></span><a href=\"#react-native%E3%82%92%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%A6css%E3%81%AE%E8%A8%AD%E8%A8%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%99%E3%81%94%E3%81%8F%E8%80%83%E3%81%88%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E5%B0%8F%E8%A9%B1\"><i class=\"fa fa-link\"></i></a>React Nativeを書いててCSSの設計についてすごく考えたときの小話</h1>\n\n<p>HTML5 を書いているみなさんは、以下のようなコンポーネントがあったときにフォントサイズをどこに定義しますか？</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;li&gt;</span>\n  <span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"/home\"</span><span class=\"nt\">&gt;</span>home<span class=\"nt\">&lt;/a&gt;</span>\n  <span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"/about\"</span><span class=\"nt\">&gt;</span>about<span class=\"nt\">&lt;/a&gt;</span>\n  <span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"http://google.co.jp/\"</span><span class=\"nt\">&gt;</span>google<span class=\"nt\">&lt;/a&gt;</span>\n<span class=\"nt\">&lt;/li&gt;</span>\n</code></pre></div></div>\n\n<p>継承したらいいので <code>li</code> に書くぜ <img alt=\":raised_hand:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/270b.png\" title=\":raised_hand:\" width=\"20\" loading=\"lazy\"> <img alt=\":raised_hand:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/270b.png\" title=\":raised_hand:\" width=\"20\" loading=\"lazy\"> <img alt=\":raised_hand:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/270b.png\" title=\":raised_hand:\" width=\"20\" loading=\"lazy\"> <img alt=\":raised_hand:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/270b.png\" title=\":raised_hand:\" width=\"20\" loading=\"lazy\"> </p>\n\n<div class=\"code-frame\" data-lang=\"css\"><div class=\"highlight\"><pre><code><span class=\"nt\">li</span> <span class=\"p\">{</span>\n    <span class=\"nl\">font-size</span><span class=\"p\">:</span> <span class=\"m\">20px</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>文字列のすぐ上の要素の <code>a</code> に書くぜ <img alt=\":hand_splayed:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f590.png\" title=\":hand_splayed:\" width=\"20\" loading=\"lazy\"> <img alt=\":hand_splayed:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f590.png\" title=\":hand_splayed:\" width=\"20\" loading=\"lazy\"> <img alt=\":hand_splayed:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f590.png\" title=\":hand_splayed:\" width=\"20\" loading=\"lazy\"> <img alt=\":hand_splayed:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f590.png\" title=\":hand_splayed:\" width=\"20\" loading=\"lazy\"> </p>\n\n<div class=\"code-frame\" data-lang=\"css\"><div class=\"highlight\"><pre><code><span class=\"nt\">a</span> <span class=\"p\">{</span>\n    <span class=\"nl\">font-size</span><span class=\"p\">:</span> <span class=\"m\">20px</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>さてReact Nativeではどう書くのでしょうか。それを見ていきます。</p>\n\n<h2>\n<span id=\"環境構築\" class=\"fragment\"></span><a href=\"#%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89\"><i class=\"fa fa-link\"></i></a>環境構築</h2>\n\n<p>ここを参考に構築しました。React Native for WEB<br>\n<a href=\"https://qiita.com/propella/items/4cfd01506c72dc3d63ea\" id=\"reference-477ea34b78a172a68e50\">react-native-web を試す</a></p>\n\n<div class=\"code-frame\" data-lang=\"shell\"><div class=\"highlight\"><pre><code><span class=\"c\"># プロジェクト作成</span>\nnpx create-react-app react-native-web-simple\n\n<span class=\"c\"># ディレクトリ移動とnpmモジュールのインストール</span>\n<span class=\"nb\">cd </span>react-native-web-simple\nyarn add react-native-web\n\n<span class=\"c\"># リンク先に書かれているように2ファイルを編集</span>\nvim src/index.js\nvim src/App.js\n</code></pre></div></div>\n\n<p>でいろいろ試せると思います。</p>\n\n<h2>\n<span id=\"いろいろ見てみる\" class=\"fragment\"></span><a href=\"#%E3%81%84%E3%82%8D%E3%81%84%E3%82%8D%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>いろいろ見てみる</h2>\n\n<p>エラーとかわかる人は自分でみてみてください！！こんな感じ。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/d10003fe655571869a216cb4d667c42dfaa82500/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39323938363366652d303030392d396366632d346635662d6130336261353064653763662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1680\" alt=\"スクリーンショット 2020-03-11 2.33.44.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F929863fe-0009-9cfc-4f5f-a03ba50de7cf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f343d43b877acca22b66fd84cebccd0f\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/929863fe-0009-9cfc-4f5f-a03ba50de7cf.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F929863fe-0009-9cfc-4f5f-a03ba50de7cf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b5cf66c9e6e3bff10db8abbd1838d0b5 1x\" loading=\"lazy\"></a></p>\n\n<p><code>&lt;View&gt;</code> というコンポーネントは文字列を入れるためのコンポーネントではないので <code>Unexpected text node: ここはエラーがでる. A text node cannot be a child of a &lt;View&gt;.</code> って言われます。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"o\">&lt;</span><span class=\"nx\">View</span> <span class=\"nx\">style</span><span class=\"o\">=</span><span class=\"p\">{[{</span> <span class=\"na\">fontSize</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">50px</span><span class=\"dl\">'</span> <span class=\"p\">}]}</span><span class=\"o\">&gt;</span><span class=\"nx\">ここはエラーがでる</span><span class=\"o\">&lt;</span><span class=\"sr\">/View</span><span class=\"err\">&gt;\n</span></code></pre></div></div>\n\n<p>なので以下のように書きます。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"o\">&lt;</span><span class=\"nx\">View</span><span class=\"o\">&gt;</span>\n  <span class=\"o\">&lt;</span><span class=\"nx\">Text</span><span class=\"o\">&gt;</span><span class=\"nx\">ここはエラーがでない</span><span class=\"o\">&lt;</span><span class=\"sr\">/Text</span><span class=\"err\">&gt;\n</span><span class=\"o\">&lt;</span><span class=\"sr\">/View</span><span class=\"err\">&gt;\n</span></code></pre></div></div>\n\n<p>list形式の <code>FlatList</code> というコンポーネントにフォントサイズを渡しても文字は大きくなりません。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"o\">&lt;</span><span class=\"nx\">FlatList</span>\n  <span class=\"nx\">style</span><span class=\"o\">=</span><span class=\"p\">{[{</span> <span class=\"na\">fontSize</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">50px</span><span class=\"dl\">'</span> <span class=\"p\">}]}</span> <span class=\"c1\">// style効かないよ！！</span>\n<span class=\"sr\">/</span><span class=\"err\">&gt;\n</span></code></pre></div></div>\n\n<h2>\n<span id=\"簡単にまとめ\" class=\"fragment\"></span><a href=\"#%E7%B0%A1%E5%8D%98%E3%81%AB%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>簡単にまとめ</h2>\n\n<p>MECEではないかもしれませんが <code>&lt;Text&gt;</code> に代表されるように文字列をいれるコンポーネントと、 <code>View</code> に代表されるような文字列は入らずに箱の大きさなどを調整するマークアップ用のコンポーネントがある感じがあります。</p>\n\n<p>ReactNativeを少し書いたおかげで、HTML5を書いている時に <code>div</code> <code>li</code> <code>a</code> とかをスタイリングするときは少しだけ考えるようになりました。</p>\n\n<p>こちらの <a href=\"https://watercelldev.hatenablog.jp/entry/2018/07/18/122604\" rel=\"nofollow noopener\" target=\"_blank\">React Native for Webをプロダクションで使ってみました</a> というブログでもReact Native for Webを使ってWeb系の方が苦戦しているのが垣間見れます。</p>\n\n<h2>\n<span id=\"おわりに\" class=\"fragment\"></span><a href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>おわりに</h2>\n\n<p>ReactNative では li 要素にフォントサイズは効きませんでした。ですが、HTML5としてはどっちでもいいと思います。新しい技術を触ると今までの考え方が更新されるのでとても新鮮な気持ちになれますよね。これからは同じ <code>&lt;div&gt;</code> でも <code>スタイルを整えるため</code> に入れたのか <code>文字を入れるため</code> に入れた要素なのか意識していきたいです。</p>\n\n<p>お試しで書いていたらすごく考えさせられたのでその時のことを書いていきます。ありがとうございました。！！！！<br>\n（Webだけで生きていたので、ギブス巻かれたようにエラー出しまくりました。React Nativeはいまでも初心者です。）</p>\n\n<p>.</p>\n","body":"# React Nativeを書いててCSSの設計についてすごく考えたときの小話\n\nHTML5 を書いているみなさんは、以下のようなコンポーネントがあったときにフォントサイズをどこに定義しますか？\n\n```html\n<li>\n  <a href=\"/home\">home</a>\n  <a href=\"/about\">about</a>\n  <a href=\"http://google.co.jp/\">google</a>\n</li>\n```\n\n継承したらいいので `li` に書くぜ :raised_hand: :raised_hand: :raised_hand: :raised_hand: \n\n```css\nli {\n    font-size: 20px;\n}\n```\n\n文字列のすぐ上の要素の `a` に書くぜ :hand_splayed: :hand_splayed: :hand_splayed: :hand_splayed: \n\n```css\na {\n    font-size: 20px;\n}\n```\n\nさてReact Nativeではどう書くのでしょうか。それを見ていきます。\n\n\n## 環境構築\n\nここを参考に構築しました。React Native for WEB\n[react-native-web を試す](https://qiita.com/propella/items/4cfd01506c72dc3d63ea)\n\n\n```shell\n# プロジェクト作成\nnpx create-react-app react-native-web-simple\n\n# ディレクトリ移動とnpmモジュールのインストール\ncd react-native-web-simple\nyarn add react-native-web\n\n# リンク先に書かれているように2ファイルを編集\nvim src/index.js\nvim src/App.js\n```\n\nでいろいろ試せると思います。\n\n## いろいろ見てみる\n\nエラーとかわかる人は自分でみてみてください！！こんな感じ。\n\n<img width=\"1680\" alt=\"スクリーンショット 2020-03-11 2.33.44.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/929863fe-0009-9cfc-4f5f-a03ba50de7cf.png\">\n\n`<View>` というコンポーネントは文字列を入れるためのコンポーネントではないので `Unexpected text node: ここはエラーがでる. A text node cannot be a child of a <View>.` って言われます。\n\n```js\n<View style={[{ fontSize: '50px' }]}>ここはエラーがでる</View>\n```\n\nなので以下のように書きます。\n\n```js\n<View>\n  <Text>ここはエラーがでない</Text>\n</View>\n```\n\nlist形式の `FlatList` というコンポーネントにフォントサイズを渡しても文字は大きくなりません。\n\n```js\n<FlatList\n  style={[{ fontSize: '50px' }]} // style効かないよ！！\n/>\n```\n\n## 簡単にまとめ\n\nMECEではないかもしれませんが `<Text>` に代表されるように文字列をいれるコンポーネントと、 `View` に代表されるような文字列は入らずに箱の大きさなどを調整するマークアップ用のコンポーネントがある感じがあります。\n\nReactNativeを少し書いたおかげで、HTML5を書いている時に `div` `li` `a` とかをスタイリングするときは少しだけ考えるようになりました。\n\n\nこちらの [React Native for Webをプロダクションで使ってみました](https://watercelldev.hatenablog.jp/entry/2018/07/18/122604) というブログでもReact Native for Webを使ってWeb系の方が苦戦しているのが垣間見れます。\n\n## おわりに\n\nReactNative では li 要素にフォントサイズは効きませんでした。ですが、HTML5としてはどっちでもいいと思います。新しい技術を触ると今までの考え方が更新されるのでとても新鮮な気持ちになれますよね。これからは同じ `<div>` でも `スタイルを整えるため` に入れたのか `文字を入れるため` に入れた要素なのか意識していきたいです。\n\nお試しで書いていたらすごく考えさせられたのでその時のことを書いていきます。ありがとうございました。！！！！\n（Webだけで生きていたので、ギブス巻かれたようにエラー出しまくりました。React Nativeはいまでも初心者です。）\n\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2020-03-11T11:05:16+09:00","group":null,"id":"c68d721e46a7a4efcd98","likes_count":2,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"CSS","versions":[]},{"name":"JavaScript","versions":[]},{"name":"HTML5","versions":[]},{"name":"React","versions":[]},{"name":"reactnative","versions":[]}],"title":"React Nativeを書いててCSSの設計についてすごく考えたときの小話","updated_at":"2020-03-11T11:05:16+09:00","url":"https://qiita.com/ykhirao/items/c68d721e46a7a4efcd98","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"firebase-x-ogpの決定版はdynamic-linksだと思うけど異論ある\" class=\"fragment\"></span><a href=\"#firebase-x-ogp%E3%81%AE%E6%B1%BA%E5%AE%9A%E7%89%88%E3%81%AFdynamic-links%E3%81%A0%E3%81%A8%E6%80%9D%E3%81%86%E3%81%91%E3%81%A9%E7%95%B0%E8%AB%96%E3%81%82%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Firebase x OGPの決定版はDynamic Linksだと思うけど異論ある？</h1>\n\n<p>異論は受け付けます。</p>\n\n<p>まず最初に私が紹介する方法は何種類か存在するOGPでも一種類だけしか使えないっぽいので、それ以外だと以下のようなやり方が一番いいと思います。</p>\n\n<p><a href=\"https://qiita.com/serinuntius/items/3017fb6ef51cd47352f6\" id=\"reference-30a17e2e0edac70a62a6\">Vue.jsとFirebaseでOGP画像生成系のサービスを爆速で作ろう</a></p>\n\n<p>HostingにアクセスしたときにFunctionsをいい感じに使えるのは <code>us-central1</code> のみですので、その詳細は、この記事 <a href=\"https://firebase.google.com/docs/hosting/functions?hl=ja\" rel=\"nofollow noopener\" target=\"_blank\">Cloud Functions を使用した動的コンテンツの配信とマイクロサービスのホスティング</a> の <code>重要: Firebase Hosting は、us-central1 でのみ Cloud Functions をサポートします。</code> のあたりを見るといいと思います。</p>\n\n<h2>\n<span id=\"試してほしい\" class=\"fragment\"></span><a href=\"#%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BB%E3%81%97%E3%81%84\"><i class=\"fa fa-link\"></i></a>試してほしい。</h2>\n\n<p>Twitterのカードバリデーターは<a href=\"https://cards-dev.twitter.com/validator\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a> <br>\nOGP試せるやつです！！</p>\n\n<h2>\n<span id=\"dynamic-linksの使い方\" class=\"fragment\"></span><a href=\"#dynamic-links%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\"><i class=\"fa fa-link\"></i></a>Dynamic Linksの使い方</h2>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>yk@yk for-qiita % firebase init\n\n     ######## #### ########  ######## ########     ###     ######  ########\n     ##        ##  ##     ## ##       ##     ##  ##   ##  ##       ##\n     ######    ##  ########  ######   ########  #########  ######  ######\n     ##        ##  ##    ##  ##       ##     ## ##     ##       ## ##\n     ##       #### ##     ## ######## ########  ##     ##  ######  ########\n\nYou're about to initialize a Firebase project in this directory:\n\n  /Users/yk/workspace/for-qiita\n\n? Which Firebase CLI features do you want to set up for this folder? Press Space to select features, then Enter to confirm your choices. Hosting: Configure and deploy Firebase Hosting s\nites\n\n=== Project Setup\n\nFirst, let's associate this project directory with a Firebase project.\nYou can create multiple project aliases by running firebase use --add, \nbut for now we'll just set up a default project.\n\n? Please select an option: Create a new project\ni  If you want to create a project in a Google Cloud organization or folder, please use \"firebase projects:create\" instead, and return to this command when you've created the project.\n? Please specify a unique project id (warning: cannot be modified afterward) [6-30 characters]:\n for-qiita-ogp\n? What would you like to call your project? (defaults to your project ID) \n✔ Creating Google Cloud Platform project\n✔ Adding Firebase resources to Google Cloud Platform project\n\n🎉🎉🎉 Your Firebase project is ready! 🎉🎉🎉\n\nProject information:\n   - Project ID: for-qiita-ogp\n   - Project Name: for-qiita-ogp\n\nFirebase console is available at\nhttps://console.firebase.google.com/project/for-qiita-ogp/overview\ni  Using project for-qiita-ogp (for-qiita-ogp)\n\n=== Hosting Setup\n\nYour public directory is the folder (relative to your project directory) that\nwill contain Hosting assets to be uploaded with firebase deploy. If you\nhave a build process for your assets, use your build's output directory.\n\n? What do you want to use as your public directory? public\n? Configure as a single-page app (rewrite all urls to /index.html)? Yes\n✔  Wrote public/index.html\n\ni  Writing configuration info to firebase.json...\ni  Writing project information to .firebaserc...\ni  Writing gitignore file to .gitignore...\n\n✔  Firebase initialization complete!\n</code></pre></div></div>\n\n<p>こんな感じ。public配下に <code>index.html</code> が作られていたらOK</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>yk@yk for-qiita % ls public \nindex.html\n</code></pre></div></div>\n\n<p>このままデプロイします。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>yk@yk for-qiita % firebase deploy\n\n=== Deploying to 'for-qiita-ogp'...\n\ni  deploying hosting\ni  hosting[for-qiita-ogp]: beginning deploy...\ni  hosting[for-qiita-ogp]: found 1 files in public\n✔  hosting[for-qiita-ogp]: file upload complete\ni  hosting[for-qiita-ogp]: finalizing version...\n✔  hosting[for-qiita-ogp]: version finalized\ni  hosting[for-qiita-ogp]: releasing new version...\n✔  hosting[for-qiita-ogp]: release complete\n\n✔  Deploy complete!\n\nProject Console: https://console.firebase.google.com/project/for-qiita-ogp/overview\nHosting URL: https://for-qiita-ogp.firebaseapp.com\n</code></pre></div></div>\n\n<p>最初のカードバリデーターはこんな感じ。OGP用のデータがないのでOGPが表示されません。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/130a5a7046a435baf167ba2354b0ccea26d9ac77/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32346239613436652d363538312d656132652d616665662d6433636461323832663565302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1001\" alt=\"スクリーンショット 2020-03-11 3.06.01.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F24b9a46e-6581-ea2e-afef-d3cda282f5e0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=16f08de15b05de20b27be9f912f0e3a2\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/24b9a46e-6581-ea2e-afef-d3cda282f5e0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F24b9a46e-6581-ea2e-afef-d3cda282f5e0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c201feaaebe1b490b4dbb224be203184 1x\" loading=\"lazy\"></a></p>\n\n<p>次は自分専用のリンクURLを発行します。適当に <code>forqiita</code> を入力しました。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/e52d7bea1921709bbae47d88266b6f6621a3a122/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f66663963396137362d373365652d386461632d323136642d3538666661303763313363372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1321\" alt=\"スクリーンショット 2020-03-11 3.06.59.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fff9c9a76-73ee-8dac-216d-58ffa07c13c7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=30578d58a7ff5b7ca17381bc58a55ef6\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/ff9c9a76-73ee-8dac-216d-58ffa07c13c7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fff9c9a76-73ee-8dac-216d-58ffa07c13c7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=28db7ecb7973c31943c2d8c933e4db50 1x\" loading=\"lazy\"></a></p>\n\n<p>次は適当にポチポチしていたら、ダイナミックリンクの設定ができます。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/69af5eefd465f52381e9c898ada764e90de2df55/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39623934356565652d333461302d316633332d323666622d6636666431363663633366322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1021\" alt=\"スクリーンショット 2020-03-11 3.07.37.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9b945eee-34a0-1f33-26fb-f6fd166cc3f2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=936089523fea80c00ac6481cdd043cfc\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9b945eee-34a0-1f33-26fb-f6fd166cc3f2.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9b945eee-34a0-1f33-26fb-f6fd166cc3f2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b85af4e1d7680427f88f70d82894513d 1x\" loading=\"lazy\"></a></p>\n\n<p>ここに自分のサイトへのリンクを貼り</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/aad7a393e7a766d20c401649fe20dcf5b9833f97/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f30613463323337342d306337332d376564612d633930302d3331666234643461333934392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"965\" alt=\"スクリーンショット 2020-03-11 3.08.48.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F0a4c2374-0c73-7eda-c900-31fb4d4a3949.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=57fe4ccec1eec0267eff0276bee27f48\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/0a4c2374-0c73-7eda-c900-31fb4d4a3949.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F0a4c2374-0c73-7eda-c900-31fb4d4a3949.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=148f56e5a77e1ef363e7a81da8ff55de 1x\" loading=\"lazy\"></a></p>\n\n<p>そして 5番が重要で、OGPのタイトルとか猫の画像とかをはります。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/13b00eca45a6876ebec34f5fdb747db3de76396b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62353063663364332d336132372d333464332d376132352d3238333661613233653564382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"941\" alt=\"スクリーンショット 2020-03-11 3.09.51.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb50cf3d3-3a27-34d3-7a25-2836aa23e5d8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=33dd01c287d6a08704912e9f7a587e4d\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b50cf3d3-3a27-34d3-7a25-2836aa23e5d8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb50cf3d3-3a27-34d3-7a25-2836aa23e5d8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f29b3a61149ae0dcd7ad34aab188ffbd 1x\" loading=\"lazy\"></a></p>\n\n<p>なんということでしょう。猫の画像がOGPとして表示されました！</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/b7fe4941472d2c9a5df08e673eef86a6e8d2a54a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36616139653938662d653233352d343238322d653939342d3036373533626437653262332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1142\" alt=\"スクリーンショット 2020-03-11 3.10.10.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6aa9e98f-e235-4282-e994-06753bd7e2b3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f06a53ac02c09473c345ca29b0f3e323\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6aa9e98f-e235-4282-e994-06753bd7e2b3.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6aa9e98f-e235-4282-e994-06753bd7e2b3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d797fec1fc62b80767e0b9c750924e03 1x\" loading=\"lazy\"></a></p>\n\n<p>このURLを試してみたください。</p>\n\n<p><qiita-embed-ogp src=\"https://forqiita.page.link/R6GT\"></qiita-embed-ogp></p>\n\n<p>さて後2つ猫画像用意したので、猫好きさんは次のURLも試してくれるでしょう😺</p>\n\n<ul>\n<li><a href=\"https://forqiita.page.link/n3UL\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://forqiita.page.link/n3UL</a></li>\n<li><a href=\"https://forqiita.page.link/6eZ4\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://forqiita.page.link/6eZ4</a></li>\n</ul>\n\n<p>さて、 <code>https://forqiita.page.link/6eZ4</code> にアクセスしたら <code>https://for-qiita-ogp.firebaseapp.com/</code> にリダイレクトされます。その仕組を追うために <code>Network</code> の <code>Preserve log</code> で遷移後までログを追ってみたのですが、 <code>300</code> とかでhttpリダイレクトでもなく、 <code>meta</code> とか <code>JavaScript</code> とかでもなさそう？だったので、詳しいかたリダイレクトのレスポンスとか確認してほしいです。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/3e6f54889667b750bcd0a483f932133f1162650a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f63336133653232642d656462392d396361352d303761382d6634363633613936303130652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1397\" alt=\"スクリーンショット 2020-03-11 3.20.37.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc3a3e22d-edb9-9ca5-07a8-f4663a96010e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7a8fac2a20d009f71dae38c73eef6924\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c3a3e22d-edb9-9ca5-07a8-f4663a96010e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc3a3e22d-edb9-9ca5-07a8-f4663a96010e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d5632b5bbcd0da0cdd743bed7d483bed 1x\" loading=\"lazy\"></a></p>\n\n<p>そんな感じです。</p>\n\n<p>.</p>\n","body":"# Firebase x OGPの決定版はDynamic Linksだと思うけど異論ある？\n\n異論は受け付けます。\n\nまず最初に私が紹介する方法は何種類か存在するOGPでも一種類だけしか使えないっぽいので、それ以外だと以下のようなやり方が一番いいと思います。\n\n[Vue.jsとFirebaseでOGP画像生成系のサービスを爆速で作ろう](https://qiita.com/serinuntius/items/3017fb6ef51cd47352f6)\n\nHostingにアクセスしたときにFunctionsをいい感じに使えるのは `us-central1` のみですので、その詳細は、この記事 [Cloud Functions を使用した動的コンテンツの配信とマイクロサービスのホスティング](https://firebase.google.com/docs/hosting/functions?hl=ja) の `重要: Firebase Hosting は、us-central1 でのみ Cloud Functions をサポートします。` のあたりを見るといいと思います。\n\n## 試してほしい。\n\nTwitterのカードバリデーターは[こちら](https://cards-dev.twitter.com/validator) \nOGP試せるやつです！！\n\n\n## Dynamic Linksの使い方\n\n```\nyk@yk for-qiita % firebase init\n\n     ######## #### ########  ######## ########     ###     ######  ########\n     ##        ##  ##     ## ##       ##     ##  ##   ##  ##       ##\n     ######    ##  ########  ######   ########  #########  ######  ######\n     ##        ##  ##    ##  ##       ##     ## ##     ##       ## ##\n     ##       #### ##     ## ######## ########  ##     ##  ######  ########\n\nYou're about to initialize a Firebase project in this directory:\n\n  /Users/yk/workspace/for-qiita\n\n? Which Firebase CLI features do you want to set up for this folder? Press Space to select features, then Enter to confirm your choices. Hosting: Configure and deploy Firebase Hosting s\nites\n\n=== Project Setup\n\nFirst, let's associate this project directory with a Firebase project.\nYou can create multiple project aliases by running firebase use --add, \nbut for now we'll just set up a default project.\n\n? Please select an option: Create a new project\ni  If you want to create a project in a Google Cloud organization or folder, please use \"firebase projects:create\" instead, and return to this command when you've created the project.\n? Please specify a unique project id (warning: cannot be modified afterward) [6-30 characters]:\n for-qiita-ogp\n? What would you like to call your project? (defaults to your project ID) \n✔ Creating Google Cloud Platform project\n✔ Adding Firebase resources to Google Cloud Platform project\n\n🎉🎉🎉 Your Firebase project is ready! 🎉🎉🎉\n\nProject information:\n   - Project ID: for-qiita-ogp\n   - Project Name: for-qiita-ogp\n\nFirebase console is available at\nhttps://console.firebase.google.com/project/for-qiita-ogp/overview\ni  Using project for-qiita-ogp (for-qiita-ogp)\n\n=== Hosting Setup\n\nYour public directory is the folder (relative to your project directory) that\nwill contain Hosting assets to be uploaded with firebase deploy. If you\nhave a build process for your assets, use your build's output directory.\n\n? What do you want to use as your public directory? public\n? Configure as a single-page app (rewrite all urls to /index.html)? Yes\n✔  Wrote public/index.html\n\ni  Writing configuration info to firebase.json...\ni  Writing project information to .firebaserc...\ni  Writing gitignore file to .gitignore...\n\n✔  Firebase initialization complete!\n```\n\nこんな感じ。public配下に `index.html` が作られていたらOK\n\n```\nyk@yk for-qiita % ls public \nindex.html\n```\n\nこのままデプロイします。\n\n\n```\nyk@yk for-qiita % firebase deploy\n\n=== Deploying to 'for-qiita-ogp'...\n\ni  deploying hosting\ni  hosting[for-qiita-ogp]: beginning deploy...\ni  hosting[for-qiita-ogp]: found 1 files in public\n✔  hosting[for-qiita-ogp]: file upload complete\ni  hosting[for-qiita-ogp]: finalizing version...\n✔  hosting[for-qiita-ogp]: version finalized\ni  hosting[for-qiita-ogp]: releasing new version...\n✔  hosting[for-qiita-ogp]: release complete\n\n✔  Deploy complete!\n\nProject Console: https://console.firebase.google.com/project/for-qiita-ogp/overview\nHosting URL: https://for-qiita-ogp.firebaseapp.com\n```\n\n最初のカードバリデーターはこんな感じ。OGP用のデータがないのでOGPが表示されません。\n\n<img width=\"1001\" alt=\"スクリーンショット 2020-03-11 3.06.01.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/24b9a46e-6581-ea2e-afef-d3cda282f5e0.png\">\n\n次は自分専用のリンクURLを発行します。適当に `forqiita` を入力しました。\n\n<img width=\"1321\" alt=\"スクリーンショット 2020-03-11 3.06.59.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/ff9c9a76-73ee-8dac-216d-58ffa07c13c7.png\">\n\n次は適当にポチポチしていたら、ダイナミックリンクの設定ができます。\n\n\n<img width=\"1021\" alt=\"スクリーンショット 2020-03-11 3.07.37.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9b945eee-34a0-1f33-26fb-f6fd166cc3f2.png\">\n\nここに自分のサイトへのリンクを貼り\n\n<img width=\"965\" alt=\"スクリーンショット 2020-03-11 3.08.48.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/0a4c2374-0c73-7eda-c900-31fb4d4a3949.png\">\n\nそして 5番が重要で、OGPのタイトルとか猫の画像とかをはります。\n\n<img width=\"941\" alt=\"スクリーンショット 2020-03-11 3.09.51.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b50cf3d3-3a27-34d3-7a25-2836aa23e5d8.png\">\n\nなんということでしょう。猫の画像がOGPとして表示されました！\n\n<img width=\"1142\" alt=\"スクリーンショット 2020-03-11 3.10.10.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6aa9e98f-e235-4282-e994-06753bd7e2b3.png\">\n\n\nこのURLを試してみたください。\n\nhttps://forqiita.page.link/R6GT\n\nさて後2つ猫画像用意したので、猫好きさんは次のURLも試してくれるでしょう😺\n\n- https://forqiita.page.link/n3UL\n- https://forqiita.page.link/6eZ4\n\n\nさて、 `https://forqiita.page.link/6eZ4` にアクセスしたら `https://for-qiita-ogp.firebaseapp.com/` にリダイレクトされます。その仕組を追うために `Network` の `Preserve log` で遷移後までログを追ってみたのですが、 `300` とかでhttpリダイレクトでもなく、 `meta` とか `JavaScript` とかでもなさそう？だったので、詳しいかたリダイレクトのレスポンスとか確認してほしいです。\n\n<img width=\"1397\" alt=\"スクリーンショット 2020-03-11 3.20.37.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c3a3e22d-edb9-9ca5-07a8-f4663a96010e.png\">\n\nそんな感じです。\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2020-03-11T03:29:20+09:00","group":null,"id":"7939788161ffe7b5693d","likes_count":16,"private":false,"reactions_count":0,"stocks_count":13,"tags":[{"name":"JavaScript","versions":[]},{"name":"Firebase","versions":[]}],"title":"Firebase x OGPの決定版【Dynamic Links】","updated_at":"2020-03-11T03:29:20+09:00","url":"https://qiita.com/ykhirao/items/7939788161ffe7b5693d","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:68\">\n<span id=\"amazonkdpに出版ときに必要な技術を書くまとめる\" class=\"fragment\"></span><a href=\"#amazonkdp%E3%81%AB%E5%87%BA%E7%89%88%E3%81%A8%E3%81%8D%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E6%8A%80%E8%A1%93%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B\"><i class=\"fa fa-link\"></i></a>AmazonKDPに出版ときに必要な技術を書く・まとめる</h1>\n<h2 data-sourcepos=\"3:1-3:87\">\n<span id=\"とりあえずわかる人はこれだけみたらわかるものを置いておく\" class=\"fragment\"></span><a href=\"#%E3%81%A8%E3%82%8A%E3%81%82%E3%81%88%E3%81%9A%E3%82%8F%E3%81%8B%E3%82%8B%E4%BA%BA%E3%81%AF%E3%81%93%E3%82%8C%E3%81%A0%E3%81%91%E3%81%BF%E3%81%9F%E3%82%89%E3%82%8F%E3%81%8B%E3%82%8B%E3%82%82%E3%81%AE%E3%82%92%E7%BD%AE%E3%81%84%E3%81%A6%E3%81%8A%E3%81%8F\"><i class=\"fa fa-link\"></i></a>とりあえずわかる人はこれだけみたらわかるものを置いておく</h2>\n<p data-sourcepos=\"5:1-5:355\">最初 <code>GitBook</code> で作ってたので <code>node.js</code> ベースになってるけど、途中から <code>pandoc</code> という <code>brew install pandoc</code> でインストールできるもので、作り始めたので <code>package.json</code> とか作らなくても <code>makefile</code> を作ってで <code>make up</code> すると自動でビルドしてくれる感じにしてもいいと思う。</p>\n<p data-sourcepos=\"7:1-7:69\">動いたらいいので結構雑にスクリプト書いてます。</p>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"9:1-23:3\">\n<div class=\"code-lang\"><span class=\"bold\">package.json</span></div>\n<div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"scripts\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"build\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"touch publish/merged.md &amp;&amp; rm publish/merged.md &amp;&amp; node publish/build.js\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"epub\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"npm run build &amp;&amp; pandoc publish/merged.md -f markdown -t epub --self-contained -s  -o publish.epub -c assets/github.css --toc --toc-depth=2 --epub-cover-image=images/cover.png &amp;&amp; open publish.epub\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"epub-free\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"touch pub-1-free/merged.md &amp;&amp; rm pub-1-free/merged.md &amp;&amp; node pub-1-free/build.js &amp;&amp; pandoc pub-1-free/merged.md -f markdown -t epub --self-contained -s  -o pub-1-free.epub -c assets/github.css --toc --toc-depth=2 --epub-cover-image=images/cover-free.png &amp;&amp; open pub-1-free.epub\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"ls-highlight\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"pandoc --list-highlight-languages\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"open\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"open publish.epub\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"download\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"npm run build &amp;&amp; node publish/download.js &amp;&amp; node publish/replace.js\"</span><span class=\"w\">\n  </span><span class=\"p\">},</span><span class=\"w\">\n  </span><span class=\"nl\">\"devDependencies\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"request\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"^2.88.0\"</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div>\n</div>\n<p data-sourcepos=\"25:1-25:210\">markdownファイルをまとめてくれるやつ。 <code>.md</code> ファイルはただのテキストファイルなので、ファイルの内容を足していけば、ファイルを分けて管理できます。</p>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"27:1-51:3\">\n<div class=\"code-lang\"><span class=\"bold\">build.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"cp\">#!/usr/bin/env node\n</span>\n<span class=\"kd\">const</span> <span class=\"nx\">fs</span> <span class=\"o\">=</span> <span class=\"nf\">require</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">fs</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">path</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">./publish</span><span class=\"dl\">'</span>\n<span class=\"kd\">let</span> <span class=\"nx\">mergedMdContent</span> <span class=\"o\">=</span> <span class=\"dl\">''</span>\n\n<span class=\"k\">try</span> <span class=\"p\">{</span>\n  <span class=\"nx\">fs</span><span class=\"p\">.</span><span class=\"nf\">readdirSync</span><span class=\"p\">(</span><span class=\"nx\">path</span><span class=\"p\">).</span><span class=\"nf\">forEach</span><span class=\"p\">(</span><span class=\"nx\">fileName</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"nx\">fileName</span><span class=\"p\">.</span><span class=\"nf\">includes</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">.DS_Store</span><span class=\"dl\">'</span><span class=\"p\">))</span> <span class=\"k\">return</span>\n    <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">fileName</span><span class=\"p\">.</span><span class=\"nf\">includes</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">.md</span><span class=\"dl\">'</span><span class=\"p\">))</span> <span class=\"k\">return</span>\n    <span class=\"nx\">mergedMdContent</span> <span class=\"o\">+=</span> <span class=\"nx\">fs</span><span class=\"p\">.</span><span class=\"nf\">readFileSync</span><span class=\"p\">(</span><span class=\"s2\">`</span><span class=\"p\">${</span><span class=\"nx\">path</span><span class=\"p\">}</span><span class=\"s2\">/</span><span class=\"p\">${</span><span class=\"nx\">fileName</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">utf-8</span><span class=\"dl\">'</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"dl\">'</span><span class=\"se\">\\n</span><span class=\"dl\">'</span>\n  <span class=\"p\">})</span>\n\n  <span class=\"c1\">// pandocを実行するフォルダの階層にあわせる</span>\n  <span class=\"nx\">mergedMdContent</span> <span class=\"o\">=</span> <span class=\"nx\">mergedMdContent</span><span class=\"p\">.</span><span class=\"nf\">replace</span><span class=\"p\">(</span><span class=\"sr\">/</span><span class=\"se\">\\.\\.\\/</span><span class=\"sr\">images/g</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">./images</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">fs</span><span class=\"p\">.</span><span class=\"nf\">writeFileSync</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">./publish/merged.md</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"nx\">mergedMdContent</span><span class=\"p\">)</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"s2\">`merged!`</span><span class=\"p\">)</span>\n<span class=\"p\">}</span> <span class=\"k\">catch </span><span class=\"p\">(</span><span class=\"nx\">err</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"s2\">`Oh no, An error occurred! </span><span class=\"p\">${</span><span class=\"nx\">err</span><span class=\"p\">.</span><span class=\"nx\">message</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">)</span>\n  <span class=\"nx\">process</span><span class=\"p\">.</span><span class=\"nf\">exit</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n</div>\n<p data-sourcepos=\"53:1-53:324\">最初、gyazoさんに画像をホストしていたので、途中でダウンロードした。スクショしたらすぐにマークダウンの画像リンクが作れるので、めっちゃ便利だった。画像のダウンロードを非同期処理なJavaScriptで書くのとても面倒なのですね… :sad:</p>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"55:1-100:3\">\n<div class=\"code-lang\"><span class=\"bold\">download.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"cp\">#!/usr/bin/env node\n</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">Start: </span><span class=\"dl\">'</span><span class=\"p\">)</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">fs</span> <span class=\"o\">=</span> <span class=\"nf\">require</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">fs</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n<span class=\"kd\">const</span> <span class=\"nx\">request</span> <span class=\"o\">=</span> <span class=\"nf\">require</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">request</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">merged</span> <span class=\"o\">=</span> <span class=\"nx\">fs</span><span class=\"p\">.</span><span class=\"nf\">readFileSync</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">publish/merged.md</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">utf-8</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n<span class=\"kd\">const</span> <span class=\"nx\">re</span> <span class=\"o\">=</span> <span class=\"sr\">/</span><span class=\"se\">(</span><span class=\"sr\">https</span><span class=\"se\">?</span><span class=\"sr\">|ftp</span><span class=\"se\">)(</span><span class=\"sr\">:</span><span class=\"se\">\\/\\/[</span><span class=\"sr\">-_.!~*</span><span class=\"se\">\\'</span><span class=\"sr\">()a-zA-Z0-9;</span><span class=\"se\">\\/</span><span class=\"sr\">?:</span><span class=\"se\">\\@</span><span class=\"sr\">&amp;=+</span><span class=\"se\">\\$</span><span class=\"sr\">,%#</span><span class=\"se\">]</span><span class=\"sr\">+.png</span><span class=\"se\">)</span><span class=\"sr\">/gi</span>\n<span class=\"kd\">let</span> <span class=\"nx\">urls</span> <span class=\"o\">=</span> <span class=\"nx\">merged</span><span class=\"p\">.</span><span class=\"nf\">match</span><span class=\"p\">(</span><span class=\"nx\">re</span><span class=\"p\">)</span>\n<span class=\"k\">if </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">urls</span><span class=\"p\">)</span> <span class=\"k\">return</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"nx\">urls</span><span class=\"p\">)</span>\n\n<span class=\"kd\">function</span> <span class=\"nf\">requestSiteData</span><span class=\"p\">(</span><span class=\"nx\">urls</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"nx\">urls</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">url</span> <span class=\"o\">=</span> <span class=\"nx\">urls</span><span class=\"p\">.</span><span class=\"nf\">shift</span><span class=\"p\">()</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">name</span> <span class=\"o\">=</span> <span class=\"nx\">url</span><span class=\"p\">.</span><span class=\"nf\">replace</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">https://i.gyazo.com/</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"dl\">''</span><span class=\"p\">)</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">imagePath</span> <span class=\"o\">=</span> <span class=\"s2\">`images/</span><span class=\"p\">${</span><span class=\"nx\">name</span><span class=\"p\">}</span><span class=\"s2\">`</span>\n\n    <span class=\"k\">try</span> <span class=\"p\">{</span>\n      <span class=\"nx\">fs</span><span class=\"p\">.</span><span class=\"nf\">statSync</span><span class=\"p\">(</span><span class=\"nx\">imagePath</span><span class=\"p\">)</span>\n      <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"s2\">`Exists: </span><span class=\"p\">${</span><span class=\"nx\">imagePath</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">)</span>\n      <span class=\"k\">return</span> <span class=\"nf\">requestSiteData</span><span class=\"p\">(</span><span class=\"nx\">urls</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span> <span class=\"k\">catch </span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{}</span>\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"s2\">`Download: </span><span class=\"p\">${</span><span class=\"nx\">imagePath</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">)</span>\n\n    <span class=\"nf\">request</span><span class=\"p\">({</span> <span class=\"na\">method</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">GET</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"na\">url</span><span class=\"p\">:</span> <span class=\"nx\">url</span><span class=\"p\">,</span> <span class=\"na\">encoding</span><span class=\"p\">:</span> <span class=\"kc\">null</span> <span class=\"p\">},</span> <span class=\"nf\">function</span><span class=\"p\">(</span>\n      <span class=\"nx\">error</span><span class=\"p\">,</span>\n      <span class=\"nx\">response</span><span class=\"p\">,</span>\n      <span class=\"nx\">body</span>\n    <span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">error</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"nx\">fs</span><span class=\"p\">.</span><span class=\"nf\">writeFileSync</span><span class=\"p\">(</span><span class=\"nx\">imagePath</span><span class=\"p\">,</span> <span class=\"nx\">body</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">binary</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n      <span class=\"p\">}</span>\n\n      <span class=\"nf\">requestSiteData</span><span class=\"p\">(</span><span class=\"nx\">urls</span><span class=\"p\">)</span>\n    <span class=\"p\">})</span>\n  <span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"p\">{</span>\n    <span class=\"c1\">// 再帰の終了</span>\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">fin</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"nf\">requestSiteData</span><span class=\"p\">(</span><span class=\"nx\">urls</span><span class=\"p\">)</span> <span class=\"c1\">//start requesting data</span>\n</code></pre></div>\n</div>\n<p data-sourcepos=\"102:1-102:92\">gyazoさんへのリンクをダウンロードしたフォルダに書き換えたやつ。</p>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"104:1-127:3\">\n<div class=\"code-lang\"><span class=\"bold\">replace.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"cp\">#!/usr/bin/env node\n</span>\n<span class=\"kd\">const</span> <span class=\"nx\">fs</span> <span class=\"o\">=</span> <span class=\"nf\">require</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">fs</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n\n<span class=\"k\">try</span> <span class=\"p\">{</span>\n  <span class=\"nx\">fs</span><span class=\"p\">.</span><span class=\"nf\">readdirSync</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">publish</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nf\">forEach</span><span class=\"p\">(</span><span class=\"nx\">fileName</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"k\">if </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">fileName</span><span class=\"p\">.</span><span class=\"nf\">includes</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">.md</span><span class=\"dl\">'</span><span class=\"p\">))</span> <span class=\"k\">return</span>\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"nx\">fileName</span><span class=\"p\">)</span>\n    <span class=\"kd\">let</span> <span class=\"nx\">content</span> <span class=\"o\">=</span> <span class=\"nx\">fs</span><span class=\"p\">.</span><span class=\"nf\">readFileSync</span><span class=\"p\">(</span><span class=\"s2\">`publish/</span><span class=\"p\">${</span><span class=\"nx\">fileName</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">utf-8</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n    <span class=\"nx\">content</span> <span class=\"o\">=</span> <span class=\"nx\">content</span><span class=\"p\">.</span><span class=\"nf\">replace</span><span class=\"p\">(</span>\n      <span class=\"sr\">/https:</span><span class=\"se\">\\/\\/</span><span class=\"sr\">i.gyazo.com</span><span class=\"se\">\\/</span><span class=\"sr\">/g</span><span class=\"p\">,</span>\n      <span class=\"dl\">'</span><span class=\"s1\">/Users/yk/workspace/books/lets-sql/images/</span><span class=\"dl\">'</span>\n    <span class=\"p\">)</span>\n    <span class=\"nx\">fs</span><span class=\"p\">.</span><span class=\"nf\">writeFileSync</span><span class=\"p\">(</span><span class=\"s2\">`publish/</span><span class=\"p\">${</span><span class=\"nx\">fileName</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">,</span> <span class=\"nx\">content</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"s2\">`fin!`</span><span class=\"p\">)</span>\n<span class=\"p\">}</span> <span class=\"k\">catch </span><span class=\"p\">(</span><span class=\"nx\">err</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"s2\">`!Error! </span><span class=\"p\">${</span><span class=\"nx\">err</span><span class=\"p\">.</span><span class=\"nx\">message</span><span class=\"p\">}</span><span class=\"s2\">`</span><span class=\"p\">)</span>\n  <span class=\"nx\">process</span><span class=\"p\">.</span><span class=\"nf\">exit</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n</code></pre></div>\n</div>\n<p data-sourcepos=\"129:1-129:27\">こんな感じのdir構成</p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"131:1-142:3\"><div class=\"highlight\"><pre><code>$ tree -L 2 publish                                                                                                  (git)-[master]\npublish\n├── 4.md\n├── 5.md\n├── 6.md\n├── 7.md\n├── 8.md\n├── build.js\n├── download.js\n└── replace.js\n</code></pre></div></div>\n<h2 data-sourcepos=\"145:1-145:6\">\n<span id=\"qa\" class=\"fragment\"></span><a href=\"#qa\"><i class=\"fa fa-link\"></i></a>Q&amp;A</h2>\n<h3 data-sourcepos=\"147:1-147:36\">\n<span id=\"q-出版する時の形式は\" class=\"fragment\"></span><a href=\"#q-%E5%87%BA%E7%89%88%E3%81%99%E3%82%8B%E6%99%82%E3%81%AE%E5%BD%A2%E5%BC%8F%E3%81%AF\"><i class=\"fa fa-link\"></i></a>Q 出版する時の形式は？</h3>\n<p data-sourcepos=\"149:1-149:61\"><code>KDP ファイル形式</code> とかでググるとでてくる。</p>\n<ul data-sourcepos=\"152:1-159:0\">\n<li data-sourcepos=\"152:1-152:7\">HTML</li>\n<li data-sourcepos=\"153:1-153:7\">Word</li>\n<li data-sourcepos=\"154:1-154:6\">MOBI</li>\n<li data-sourcepos=\"155:1-155:6\">ePub</li>\n<li data-sourcepos=\"156:1-156:6\">PDF</li>\n<li data-sourcepos=\"157:1-157:24\">リッチテキスト</li>\n<li data-sourcepos=\"158:1-159:0\">プレーンテキスト</li>\n</ul>\n<p data-sourcepos=\"160:1-160:27\">今回私が試したのは</p>\n<ul data-sourcepos=\"162:1-164:0\">\n<li data-sourcepos=\"162:1-162:36\">PDF （固定長で作りたい）</li>\n<li data-sourcepos=\"163:1-164:0\">ePub（ユーザーの設定で文字のサイズを調整できる）</li>\n</ul>\n<p data-sourcepos=\"165:1-165:18\">の二つです。</p>\n<h3 data-sourcepos=\"167:1-167:75\">\n<span id=\"q-markdownをまとめてくれる何かはどうすればいいの\" class=\"fragment\"></span><a href=\"#q-markdown%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E4%BD%95%E3%81%8B%E3%81%AF%E3%81%A9%E3%81%86%E3%81%99%E3%82%8C%E3%81%B0%E3%81%84%E3%81%84%E3%81%AE\"><i class=\"fa fa-link\"></i></a>Q. markdownをまとめてくれる何かはどうすればいいの？</h3>\n<p data-sourcepos=\"169:1-169:93\">以下のようなツールが便利でやり方の記事とかがたくさん出てくる。</p>\n<ol data-sourcepos=\"171:1-174:0\">\n<li data-sourcepos=\"171:1-171:50\"><a href=\"https://github.com/GitbookIO/gitbook\" rel=\"nofollow noopener\" target=\"_blank\">GitBook</a></li>\n<li data-sourcepos=\"172:1-172:32\"><a href=\"https://pandoc.org/\" rel=\"nofollow noopener\" target=\"_blank\">pandoc</a></li>\n<li data-sourcepos=\"173:1-174:0\"><a href=\"https://conv.denshochan.com/\" rel=\"nofollow noopener\" target=\"_blank\">でんでんコンバーターさん</a></li>\n</ol>\n<p data-sourcepos=\"175:1-175:391\">GitBookは少し古いバージョンがOSSとしてGitHubにホストされているので無料で使えて、PDFにもepubにも変換できた。ちょっと古いのでいろいろと困ってpandocに乗り換えたけど、普通に使いやすい。GitBookはOSS版じゃないWeb版に注力しているみたい by <a href=\"https://vuepress.vuejs.org/guide/#why-not\" rel=\"nofollow noopener\" target=\"_blank\">vuepress の why not?</a></p>\n<p data-sourcepos=\"177:1-177:141\">Vue.js使える人は、PDFとかepubとかじゃなくてドキュメント形式の管理したいならVuePressとかでいいと思う。</p>\n<p data-sourcepos=\"179:1-179:161\">pandocは <code>brew install</code> で使えるのでMacユーザーは一番使いやすいのではなかろうか。pdfもepub形式も使えるっぽいので便利。</p>\n<p data-sourcepos=\"181:1-181:102\">でんでんコンバーターさんもWebで使えるのでさくっと試したいときは便利。</p>\n<h3 data-sourcepos=\"183:1-183:43\">\n<span id=\"q-kdpは無料で公開できるの\" class=\"fragment\"></span><a href=\"#q-kdp%E3%81%AF%E7%84%A1%E6%96%99%E3%81%A7%E5%85%AC%E9%96%8B%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE\"><i class=\"fa fa-link\"></i></a>Q. KDPは無料で公開できるの？</h3>\n<p data-sourcepos=\"185:1-186:45\">ここ盲点だったのですが、技術書などの電子書籍は無料公開は基本的に駄目っぽいです。<br>\n90日に5日だけ無料公開できます。</p>\n<h3 data-sourcepos=\"188:1-188:28\">\n<span id=\"q-印税はいくら\" class=\"fragment\"></span><a href=\"#q-%E5%8D%B0%E7%A8%8E%E3%81%AF%E3%81%84%E3%81%8F%E3%82%89\"><i class=\"fa fa-link\"></i></a>Q. 印税はいくら？</h3>\n<ul data-sourcepos=\"190:1-192:0\">\n<li data-sourcepos=\"190:1-190:5\">35%</li>\n<li data-sourcepos=\"191:1-192:0\">70%</li>\n</ul>\n<p data-sourcepos=\"193:1-193:144\">の二種類が選べるのだけど、それぞれできることと、制約があったりするのでちゃんと調べたほうがいい。</p>\n<p data-sourcepos=\"195:1-195:297\">Amazon独占販売なら70%で売れるけど、同時にUnlimited（無限に読めるやつ）に登録されるっぽいから、1ページいくらと安い金額で読めてしまう的な議論がたくさんブログでささやかれています。どうぞ <a href=\"https://google.com\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://google.com</a> ご検索を</p>\n<h3 data-sourcepos=\"197:1-197:70\">\n<span id=\"q-登録してから公開までに何時間くらいかかる\" class=\"fragment\"></span><a href=\"#q-%E7%99%BB%E9%8C%B2%E3%81%97%E3%81%A6%E3%81%8B%E3%82%89%E5%85%AC%E9%96%8B%E3%81%BE%E3%81%A7%E3%81%AB%E4%BD%95%E6%99%82%E9%96%93%E3%81%8F%E3%82%89%E3%81%84%E3%81%8B%E3%81%8B%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Q. 登録してから公開までに何時間くらいかかる？</h3>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"199:1-203:3\"><div class=\"highlight\"><pre><code>Kindle ダイレクト・パブリッシングをご利用いただきありがとうございます。\n\nお客様の本『XxxxxxxXXX』が Kindle ストアで購入可能になり XXXXXXXX\n</code></pre></div></div>\n<p data-sourcepos=\"205:1-205:124\">的なメールが6時間後くらいに来ていたので、適宜確認が行われて公開されている印象です。</p>\n<h3 data-sourcepos=\"207:1-207:43\">\n<span id=\"q-何を出版したの売れた\" class=\"fragment\"></span><a href=\"#q-%E4%BD%95%E3%82%92%E5%87%BA%E7%89%88%E3%81%97%E3%81%9F%E3%81%AE%E5%A3%B2%E3%82%8C%E3%81%9F\"><i class=\"fa fa-link\"></i></a>Q. 何を出版したの？売れた？</h3>\n<p data-sourcepos=\"209:1-209:75\">秘密です！まだ見てませんが、売れてないと思います！</p>\n<p data-sourcepos=\"211:1-211:1\">.</p>\n","body":"# AmazonKDPに出版ときに必要な技術を書く・まとめる\n\n## とりあえずわかる人はこれだけみたらわかるものを置いておく\n\n最初 `GitBook` で作ってたので `node.js` ベースになってるけど、途中から `pandoc` という `brew install pandoc` でインストールできるもので、作り始めたので `package.json` とか作らなくても `makefile` を作ってで `make up` すると自動でビルドしてくれる感じにしてもいいと思う。\n\n動いたらいいので結構雑にスクリプト書いてます。\n\n```package.json\n{\n  \"scripts\": {\n    \"build\": \"touch publish/merged.md && rm publish/merged.md && node publish/build.js\",\n    \"epub\": \"npm run build && pandoc publish/merged.md -f markdown -t epub --self-contained -s  -o publish.epub -c assets/github.css --toc --toc-depth=2 --epub-cover-image=images/cover.png && open publish.epub\",\n    \"epub-free\": \"touch pub-1-free/merged.md && rm pub-1-free/merged.md && node pub-1-free/build.js && pandoc pub-1-free/merged.md -f markdown -t epub --self-contained -s  -o pub-1-free.epub -c assets/github.css --toc --toc-depth=2 --epub-cover-image=images/cover-free.png && open pub-1-free.epub\",\n    \"ls-highlight\": \"pandoc --list-highlight-languages\",\n    \"open\": \"open publish.epub\",\n    \"download\": \"npm run build && node publish/download.js && node publish/replace.js\"\n  },\n  \"devDependencies\": {\n    \"request\": \"^2.88.0\"\n  }\n}\n```\n\nmarkdownファイルをまとめてくれるやつ。 `.md` ファイルはただのテキストファイルなので、ファイルの内容を足していけば、ファイルを分けて管理できます。\n\n```build.js\n#!/usr/bin/env node\n\nconst fs = require('fs')\n\nconst path = './publish'\nlet mergedMdContent = ''\n\ntry {\n  fs.readdirSync(path).forEach(fileName => {\n    if (fileName.includes('.DS_Store')) return\n    if (!fileName.includes('.md')) return\n    mergedMdContent += fs.readFileSync(`${path}/${fileName}`, 'utf-8') + '\\n'\n  })\n\n  // pandocを実行するフォルダの階層にあわせる\n  mergedMdContent = mergedMdContent.replace(/\\.\\.\\/images/g, './images')\n\n  fs.writeFileSync('./publish/merged.md', mergedMdContent)\n  console.log(`merged!`)\n} catch (err) {\n  console.log(`Oh no, An error occurred! ${err.message}`)\n  process.exit(-1)\n}\n```\n\n最初、gyazoさんに画像をホストしていたので、途中でダウンロードした。スクショしたらすぐにマークダウンの画像リンクが作れるので、めっちゃ便利だった。画像のダウンロードを非同期処理なJavaScriptで書くのとても面倒なのですね… :sad:\n\n```download.js\n#!/usr/bin/env node\n\nconsole.log('Start: ')\n\nconst fs = require('fs')\nconst request = require('request')\n\nconst merged = fs.readFileSync('publish/merged.md', 'utf-8')\nconst re = /(https?|ftp)(:\\/\\/[-_.!~*\\'()a-zA-Z0-9;\\/?:\\@&=+\\$,%#]+.png)/gi\nlet urls = merged.match(re)\nif (!urls) return\nconsole.log(urls)\n\nfunction requestSiteData(urls) {\n  if (urls.length) {\n    const url = urls.shift()\n    const name = url.replace('https://i.gyazo.com/', '')\n    const imagePath = `images/${name}`\n\n    try {\n      fs.statSync(imagePath)\n      console.log(`Exists: ${imagePath}`)\n      return requestSiteData(urls)\n    } catch (e) {}\n    console.log(`Download: ${imagePath}`)\n\n    request({ method: 'GET', url: url, encoding: null }, function(\n      error,\n      response,\n      body\n    ) {\n      if (!error) {\n        fs.writeFileSync(imagePath, body, 'binary')\n      }\n\n      requestSiteData(urls)\n    })\n  } else {\n    // 再帰の終了\n    console.log('fin')\n  }\n}\n\nrequestSiteData(urls) //start requesting data\n```\n\ngyazoさんへのリンクをダウンロードしたフォルダに書き換えたやつ。\n\n```replace.js\n#!/usr/bin/env node\n\nconst fs = require('fs')\n\ntry {\n  fs.readdirSync('publish').forEach(fileName => {\n    if (!fileName.includes('.md')) return\n    console.log(fileName)\n    let content = fs.readFileSync(`publish/${fileName}`, 'utf-8')\n    content = content.replace(\n      /https:\\/\\/i.gyazo.com\\//g,\n      '/Users/yk/workspace/books/lets-sql/images/'\n    )\n    fs.writeFileSync(`publish/${fileName}`, content)\n  })\n\n  console.log(`fin!`)\n} catch (err) {\n  console.log(`!Error! ${err.message}`)\n  process.exit(-1)\n}\n\n```\n\nこんな感じのdir構成\n\n```\n$ tree -L 2 publish                                                                                                  (git)-[master]\npublish\n├── 4.md\n├── 5.md\n├── 6.md\n├── 7.md\n├── 8.md\n├── build.js\n├── download.js\n└── replace.js\n```\n\n\n## Q&A\n\n### Q 出版する時の形式は？\n\n`KDP ファイル形式` とかでググるとでてくる。\n\n\n- HTML \n- Word \n- MOBI\n- ePub\n- PDF \n- リッチテキスト \n- プレーンテキスト \n\n今回私が試したのは\n\n- PDF （固定長で作りたい）\n- ePub（ユーザーの設定で文字のサイズを調整できる）\n\nの二つです。\n\n### Q. markdownをまとめてくれる何かはどうすればいいの？\n\n以下のようなツールが便利でやり方の記事とかがたくさん出てくる。\n\n1. [GitBook](https://github.com/GitbookIO/gitbook)\n1. [pandoc](https://pandoc.org/)\n1. [でんでんコンバーターさん](https://conv.denshochan.com/)\n\nGitBookは少し古いバージョンがOSSとしてGitHubにホストされているので無料で使えて、PDFにもepubにも変換できた。ちょっと古いのでいろいろと困ってpandocに乗り換えたけど、普通に使いやすい。GitBookはOSS版じゃないWeb版に注力しているみたい by [vuepress の why not?](https://vuepress.vuejs.org/guide/#why-not)\n\nVue.js使える人は、PDFとかepubとかじゃなくてドキュメント形式の管理したいならVuePressとかでいいと思う。\n\npandocは `brew install` で使えるのでMacユーザーは一番使いやすいのではなかろうか。pdfもepub形式も使えるっぽいので便利。\n\nでんでんコンバーターさんもWebで使えるのでさくっと試したいときは便利。\n\n### Q. KDPは無料で公開できるの？\n\nここ盲点だったのですが、技術書などの電子書籍は無料公開は基本的に駄目っぽいです。\n90日に5日だけ無料公開できます。\n\n### Q. 印税はいくら？\n\n- 35%\n- 70%\n\nの二種類が選べるのだけど、それぞれできることと、制約があったりするのでちゃんと調べたほうがいい。\n\nAmazon独占販売なら70%で売れるけど、同時にUnlimited（無限に読めるやつ）に登録されるっぽいから、1ページいくらと安い金額で読めてしまう的な議論がたくさんブログでささやかれています。どうぞ https://google.com ご検索を\n\n### Q. 登録してから公開までに何時間くらいかかる？\n\n```\nKindle ダイレクト・パブリッシングをご利用いただきありがとうございます。\n\nお客様の本『XxxxxxxXXX』が Kindle ストアで購入可能になり XXXXXXXX\n```\n\n的なメールが6時間後くらいに来ていたので、適宜確認が行われて公開されている印象です。\n\n### Q. 何を出版したの？売れた？\n\n秘密です！まだ見てませんが、売れてないと思います！\n\n.\n","coediting":false,"comments_count":0,"created_at":"2020-02-04T14:52:57+09:00","group":null,"id":"eaeb4b62acad56aa3092","likes_count":7,"private":false,"reactions_count":0,"stocks_count":9,"tags":[{"name":"Markdown","versions":[]},{"name":"Pandoc","versions":[]},{"name":"電子書籍","versions":[]},{"name":"gitbook","versions":[]},{"name":"vuepress","versions":[]}],"title":"2020年初めて技術書をAmazonKDP(kindle)に出版したので必要な技術を軽くまとめる","updated_at":"2023-05-26T12:51:52+09:00","url":"https://qiita.com/ykhirao/items/eaeb4b62acad56aa3092","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p>こんにちは。年末年始はずっとFirebaseを触っていました <a href=\"/ykhirao\" class=\"user-mention js-hovercard\" title=\"ykhirao\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"ykhirao\">@ykhirao</a> です。たぶん3年くらい遅れて流行に乗り始めています。Typescriptお正月にはじめました。</p>\n\n<p>今日は、仕事がお休みなのでスマホぽちぽちしていたらすごく参考になる記事を見かけましたのですが、こちらの記事 <a href=\"https://tech.appbrew.io/entry/2020/01/15/120000\" rel=\"nofollow noopener\" target=\"_blank\">Firebaseで作る！リアルタイム画像変換CDN【Firebase Hosting + Cloud Functions】 - AppBrew Tech Blog</a> で書かれている <code>アップロードされた画像をそのまま表示する時代は平成とともに終わりを告げたわけですが[※要出典]</code> という文言を見てくすっと笑ってしまい、少し前に <a href=\"https://qiita.com/hecateball/items/c55b6811835923fb9574\">君はまだ平成のアーキテクチャを使ってるのか？僕はFirebaseと令和の時代に行くぞ。</a> という記事がたくさんの方に読まれていたこととか、Twitterの擬人化された <a href=\"https://twitter.com/search?q=%23%E4%BB%A4%E5%92%8C%E3%81%A1%E3%82%83%E3%82%93\" rel=\"nofollow noopener\" target=\"_blank\">#令和ちゃん</a> を思い出したりして、エンジニアのみなさんは令和ちゃんもFirebaseも大好きっぽいので私も記事を書こうかなーーと思って書き始めました。ネタなんだけど誰かの役にたつ記事を書きたい次第です。</p>\n\n<p>さて前置きが長くなりましたが、本文は、画像をアップロードする前にゴリッと処理する方法を書いて行きます。</p>\n\n<h1>\n<span id=\"画像をアップロード前に圧縮する流行りの方法\" class=\"fragment\"></span><a href=\"#%E7%94%BB%E5%83%8F%E3%82%92%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E5%89%8D%E3%81%AB%E5%9C%A7%E7%B8%AE%E3%81%99%E3%82%8B%E6%B5%81%E8%A1%8C%E3%82%8A%E3%81%AE%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>画像をアップロード前に圧縮する流行りの方法</h1>\n\n<h2>\n<span id=\"今回紹介することしないこと\" class=\"fragment\"></span><a href=\"#%E4%BB%8A%E5%9B%9E%E7%B4%B9%E4%BB%8B%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%81%97%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8\"><i class=\"fa fa-link\"></i></a>今回紹介すること、しないこと</h2>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code># 画像アップロードについての手法\n\n1. 画像処理をしない(平成)\n\n2. 画像処理をする(令和)\n  - 2.1 サーバーで処理する (https://tech.appbrew.io/entry/2020/01/15/120000 で紹介されている)\n    - Firebase Extension（まだβっぽいですが公式の拡張があるっぽい！）\n    - CloudFunctionsを自分でNode.JSごりごり書く\n  - 2.2 クライアント側で処理する( &lt;---- 今日の記事はここ！！！)\n</code></pre></div></div>\n\n<h2>\n<span id=\"本文いらないからスクショとかgistみたいひと\" class=\"fragment\"></span><a href=\"#%E6%9C%AC%E6%96%87%E3%81%84%E3%82%89%E3%81%AA%E3%81%84%E3%81%8B%E3%82%89%E3%82%B9%E3%82%AF%E3%82%B7%E3%83%A7%E3%81%A8%E3%81%8Bgist%E3%81%BF%E3%81%9F%E3%81%84%E3%81%B2%E3%81%A8\"><i class=\"fa fa-link\"></i></a>本文いらないからスクショとかGistみたいひと</h2>\n\n<p>以下のスクショのようになるGistはこちら<br>\n<a href=\"https://gist.github.com/ykhirao/1d36aeca9abb02709cc9dd3d676040ef\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://gist.github.com/ykhirao/1d36aeca9abb02709cc9dd3d676040ef</a></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/6b6c597a98d947ee94c260fa4d55bd4436205254/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62313533373531372d656334342d663962302d336632342d3066393962376365613434612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1672\" alt=\"スクリーンショット 2020-01-16 13.32.29.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb1537517-ec44-f9b0-3f24-0f99b7cea44a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=69b617e8b6520c467cfa27db3dd124bb\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b1537517-ec44-f9b0-3f24-0f99b7cea44a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb1537517-ec44-f9b0-3f24-0f99b7cea44a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5ccaf52e4a792a625b9688b420bd8c1b 1x\" loading=\"lazy\"></a></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/affbbab7aafe55e01f7105f920d83748d3a2df4f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f64366437663039642d666463362d343739612d336639362d3765396137313236306265322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1330\" alt=\"スクリーンショット 2020-01-16 14.17.23.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fd6d7f09d-fdc6-479a-3f96-7e9a71260be2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1570a6f782c256deaa732bd20c2fb778\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/d6d7f09d-fdc6-479a-3f96-7e9a71260be2.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fd6d7f09d-fdc6-479a-3f96-7e9a71260be2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e34da2ce6e6f65476da3ca294eaa1aa1 1x\" loading=\"lazy\"></a></p>\n\n<p>(最大 100x100 px にしているので2kbくらい)</p>\n\n<h2>\n<span id=\"処理して簡単に解説する\" class=\"fragment\"></span><a href=\"#%E5%87%A6%E7%90%86%E3%81%97%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%A7%A3%E8%AA%AC%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>処理して簡単に解説する</h2>\n\n<p><a href=\"https://qiita.com/komakomako/items/8efd4184f6d7cf1363f2\" id=\"reference-70c300a4799183af61fb\">Canvasでごりっと処理する</a>とか、ライブラリに頼るとか方法はあると思いますが今回は <a href=\"https://github.com/fengyuanchen/compressorjs\" rel=\"nofollow noopener\" target=\"_blank\">compressorjs</a> を紹介したいっす。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">component.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"nx\">Compressor</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">compressorjs</span><span class=\"dl\">'</span>\n</code></pre></div>\n</div>\n\n<p>OR</p>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">index.html</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"https://cdn.jsdelivr.net/gh/fengyuanchen/compressorjs/dist/compressor.min.js\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n</code></pre></div>\n</div>\n\n<p>CDNはなかなか見つからなかったのですがぐぐったら <a href=\"https://paiza.hatenablog.com/entry/2019/04/03/%E7%94%BB%E5%83%8F%E5%9C%A7%E7%B8%AE%E3%82%84%E3%82%AA%E3%83%BC%E3%83%88%E3%82%B3%E3%83%B3%E3%83%97%E3%83%AA%E3%83%BC%E3%83%88%E3%81%AA%E3%81%A9Web%E9%96%8B%E7%99%BA%E3%82%92%E7%B0%A1%E5%8D%98%E3%81%AB\" rel=\"nofollow noopener\" target=\"_blank\">このブログ</a> で見つかった。まさとらんさんありがとうです。</p>\n\n<p>画像は <code>input</code> タグで選択してもらって</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"o\">&lt;</span><span class=\"nx\">input</span>\n  <span class=\"nx\">type</span><span class=\"o\">=</span><span class=\"dl\">\"</span><span class=\"s2\">file</span><span class=\"dl\">\"</span>\n  <span class=\"nx\">id</span><span class=\"o\">=</span><span class=\"dl\">\"</span><span class=\"s2\">file</span><span class=\"dl\">\"</span>\n  <span class=\"nx\">multiple</span>\n  <span class=\"nx\">accept</span><span class=\"o\">=</span><span class=\"dl\">\"</span><span class=\"s2\">image/*</span><span class=\"dl\">\"</span>\n  <span class=\"p\">@</span><span class=\"nd\">change</span><span class=\"o\">=</span><span class=\"dl\">\"</span><span class=\"s2\">handleFiles</span><span class=\"dl\">\"</span>\n<span class=\"o\">/&gt;</span>\n</code></pre></div></div>\n\n<p><code>multiple</code> で複数選択可にして <code>accept</code> で画像以外を一応弾いています。それで <code>@change</code> イベントのフックで画像を圧縮しています。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"nx\">handleFiles</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">:</span> <span class=\"nx\">Event</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">images</span> <span class=\"o\">=</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">images</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">files</span><span class=\"p\">:</span> <span class=\"nx\">FileList</span> <span class=\"o\">|</span> <span class=\"kc\">null</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"nx\">HTMLInputElement</span><span class=\"o\">&gt;</span><span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">target</span><span class=\"p\">).</span><span class=\"nx\">files</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">files</span> <span class=\"o\">===</span> <span class=\"kc\">null</span><span class=\"p\">)</span> <span class=\"k\">return</span>\n  <span class=\"p\">;[...</span><span class=\"nx\">files</span><span class=\"p\">].</span><span class=\"nx\">forEach</span><span class=\"p\">((</span><span class=\"nx\">file</span><span class=\"p\">:</span> <span class=\"nx\">File</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"c1\">// 複数ファイルを受け入れているので、この中で処理している</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>複数処理やfileが取得できなかった場合の処理は上のような感じで、Typescript的にエラーが出ていないのでこれでOKかなと思ってます（認識あってますか？）</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">payload</span><span class=\"p\">:</span> <span class=\"nx\">Compressor</span><span class=\"p\">.</span><span class=\"nx\">Options</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"na\">quality</span><span class=\"p\">:</span> <span class=\"mf\">0.8</span><span class=\"p\">,</span>\n  <span class=\"na\">maxWidth</span><span class=\"p\">:</span> <span class=\"mi\">100</span><span class=\"p\">,</span>\n  <span class=\"na\">maxHeight</span><span class=\"p\">:</span> <span class=\"mi\">100</span><span class=\"p\">,</span>\n  <span class=\"na\">mimeType</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">image/jpeg</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n  <span class=\"nx\">success</span><span class=\"p\">(</span><span class=\"na\">blob</span><span class=\"p\">:</span> <span class=\"nx\">Blob</span><span class=\"p\">):</span> <span class=\"k\">void</span> <span class=\"p\">{</span>\n    <span class=\"c1\">// ここに成功時の処理を書く。次。</span>\n  <span class=\"p\">},</span>\n  <span class=\"nx\">error</span><span class=\"p\">(</span><span class=\"na\">err</span><span class=\"p\">:</span> <span class=\"nb\">Error</span><span class=\"p\">):</span> <span class=\"k\">void</span> <span class=\"p\">{</span>\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">err</span><span class=\"p\">.</span><span class=\"nx\">message</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n<span class=\"k\">new</span> <span class=\"nx\">Compressor</span><span class=\"p\">(</span><span class=\"nx\">file</span><span class=\"p\">,</span> <span class=\"nx\">payload</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>実際の処理はこんな感じで横幅・縦幅の最大とか圧縮率とかたくさんの <a href=\"https://github.com/fengyuanchen/compressorjs/blob/master/README.md#options\" rel=\"nofollow noopener\" target=\"_blank\">オプション</a> があります。また成功時と失敗時は <code>success</code> と <code>error</code> のコールバックに書くみたいです。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"nx\">success</span><span class=\"p\">(</span><span class=\"nx\">blob</span><span class=\"p\">:</span> <span class=\"nx\">Blob</span><span class=\"p\">):</span> <span class=\"k\">void</span> <span class=\"p\">{</span>\n<span class=\"p\">},</span>\n\n</code></pre></div></div>\n\n<p>サクセスのコールバックは <code>Blob</code> を受け取るのでFirebaseではこの段階でファイルのアップロードができます！！！<a href=\"https://firebase.google.com/docs/storage/web/upload-files?hl=ja#upload_from_a_blob_or_file\" rel=\"nofollow noopener\" target=\"_blank\">ドキュメントはこちら。</a>  Blobからアップロードできるとかすごくいいですね。(試してないけどたぶんそちらでUploadできる)</p>\n\n<p>今回はアップロードする前に読み込みを確認したかったので、DataUrlという形式に変換しています。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"nx\">success</span><span class=\"p\">(</span><span class=\"nx\">blob</span><span class=\"p\">:</span> <span class=\"nx\">Blob</span><span class=\"p\">):</span> <span class=\"k\">void</span> <span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">reader</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nx\">FileReader</span><span class=\"p\">()</span>\n  <span class=\"nx\">reader</span><span class=\"p\">.</span><span class=\"nx\">onloadend</span> <span class=\"o\">=</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">result</span> <span class=\"o\">=</span> <span class=\"o\">&lt;</span><span class=\"nx\">string</span> <span class=\"o\">|</span> <span class=\"nb\">ArrayBuffer</span> <span class=\"o\">|</span> <span class=\"kc\">null</span><span class=\"o\">&gt;</span><span class=\"nx\">reader</span><span class=\"p\">.</span><span class=\"nx\">result</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">result</span> <span class=\"k\">instanceof</span> <span class=\"nb\">ArrayBuffer</span> <span class=\"o\">||</span> <span class=\"nx\">result</span> <span class=\"o\">===</span> <span class=\"kc\">null</span><span class=\"p\">)</span> <span class=\"k\">return</span>\n    <span class=\"nx\">images</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">(</span><span class=\"nx\">result</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n  <span class=\"nx\">reader</span><span class=\"p\">.</span><span class=\"nx\">readAsDataURL</span><span class=\"p\">(</span><span class=\"nx\">blob</span><span class=\"p\">)</span>\n<span class=\"p\">},</span>\n</code></pre></div></div>\n\n<p><code>images.push(result)</code> する段階でDataUrlという形式の <code>data:image/jpeg;base64,XXXXXXXX</code>みたいな文字列になっています。<a href=\"https://firebase.google.com/docs/storage/web/upload-files?hl=ja#upload_from_a_string\" rel=\"nofollow noopener\" target=\"_blank\">ドキュメントの文字列からアップロードする</a>を見ると</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">var</span> <span class=\"nx\">message</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">data:text/plain;base64,5b6p5Y+344GX44G+44GX44Gf77yB44GK44KB44Gn44Go44GG77yB</span><span class=\"dl\">'</span><span class=\"p\">;</span>\n<span class=\"nx\">ref</span><span class=\"p\">.</span><span class=\"nx\">putString</span><span class=\"p\">(</span><span class=\"nx\">message</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">data_url</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">then</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nx\">snapshot</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">Uploaded a data_url string!</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n<span class=\"p\">});</span>\n</code></pre></div></div>\n\n<p>これでアップロードできそうですね。</p>\n\n<p>ドキュメントを読むと <code>data:text/plain;base64,</code> という文字列を削除したら ref.putString(message, 'base64url')でアップロードできそうです。たぶん。</p>\n\n<p>サンプルファイルは <code>&lt;script lang=\"ts\"&gt;</code> にしているのでVSCodeでひらいて、 <code>CMD + Click</code> とかで定義元とか飛んで行って自分で触ってみてください！！</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/1727be86da44b5cc85c2dbae435f1b31f2af6e04/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f38643038333739662d323139322d626266312d386238342d6437323764373361623237622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"659\" alt=\"スクリーンショット 2020-01-16 14.09.43.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F8d08379f-2192-bbf1-8b84-d727d73ab27b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c089a54495a050d153c48ddf100f248e\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/8d08379f-2192-bbf1-8b84-d727d73ab27b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F8d08379f-2192-bbf1-8b84-d727d73ab27b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=14f8e46852d921d15bfacf5512470bfe 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"終わりに\" class=\"fragment\"></span><a href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>終わりに</h2>\n\n<p>ブラウザのAPIを叩くときにTypeScriptすごく開発体験良かったです。MDNを見に行かなくても何が返ってくるかわかるので、null制御とかそういうのがやりやすかったです。コード書いてて楽しかった。</p>\n\n<p>なにか間違い見つけたら編集リクエストください！！！</p>\n\n<p>最後まで読んでいただきありがとうございます。！！</p>\n","body":"こんにちは。年末年始はずっとFirebaseを触っていました @ykhirao です。たぶん3年くらい遅れて流行に乗り始めています。Typescriptお正月にはじめました。\n\n今日は、仕事がお休みなのでスマホぽちぽちしていたらすごく参考になる記事を見かけましたのですが、こちらの記事 [Firebaseで作る！リアルタイム画像変換CDN【Firebase Hosting + Cloud Functions】 - AppBrew Tech Blog](https://tech.appbrew.io/entry/2020/01/15/120000) で書かれている `アップロードされた画像をそのまま表示する時代は平成とともに終わりを告げたわけですが[※要出典]` という文言を見てくすっと笑ってしまい、少し前に [君はまだ平成のアーキテクチャを使ってるのか？僕はFirebaseと令和の時代に行くぞ。](https://qiita.com/hecateball/items/c55b6811835923fb9574) という記事がたくさんの方に読まれていたこととか、Twitterの擬人化された [#令和ちゃん](https://twitter.com/search?q=%23令和ちゃん) を思い出したりして、エンジニアのみなさんは令和ちゃんもFirebaseも大好きっぽいので私も記事を書こうかなーーと思って書き始めました。ネタなんだけど誰かの役にたつ記事を書きたい次第です。\n\n\nさて前置きが長くなりましたが、本文は、画像をアップロードする前にゴリッと処理する方法を書いて行きます。\n\n# 画像をアップロード前に圧縮する流行りの方法\n\n## 今回紹介すること、しないこと\n\n```\n# 画像アップロードについての手法\n\n1. 画像処理をしない(平成)\n\n2. 画像処理をする(令和)\n  - 2.1 サーバーで処理する (https://tech.appbrew.io/entry/2020/01/15/120000 で紹介されている)\n    - Firebase Extension（まだβっぽいですが公式の拡張があるっぽい！）\n    - CloudFunctionsを自分でNode.JSごりごり書く\n  - 2.2 クライアント側で処理する( <---- 今日の記事はここ！！！)\n```\n\n\n\n## 本文いらないからスクショとかGistみたいひと\n\n以下のスクショのようになるGistはこちら\nhttps://gist.github.com/ykhirao/1d36aeca9abb02709cc9dd3d676040ef\n\n<img width=\"1672\" alt=\"スクリーンショット 2020-01-16 13.32.29.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b1537517-ec44-f9b0-3f24-0f99b7cea44a.png\">\n\n<img width=\"1330\" alt=\"スクリーンショット 2020-01-16 14.17.23.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/d6d7f09d-fdc6-479a-3f96-7e9a71260be2.png\">\n\n(最大 100x100 px にしているので2kbくらい)\n\n\n## 処理して簡単に解説する\n\n[Canvasでごりっと処理する](https://qiita.com/komakomako/items/8efd4184f6d7cf1363f2)とか、ライブラリに頼るとか方法はあると思いますが今回は [compressorjs](https://github.com/fengyuanchen/compressorjs) を紹介したいっす。\n\n```component.js\nimport Compressor from 'compressorjs'\n```\n\nOR\n\n```index.html\n<script src=\"https://cdn.jsdelivr.net/gh/fengyuanchen/compressorjs/dist/compressor.min.js\"></script>\n```\n\nCDNはなかなか見つからなかったのですがぐぐったら [このブログ](https://paiza.hatenablog.com/entry/2019/04/03/画像圧縮やオートコンプリートなどWeb開発を簡単に) で見つかった。まさとらんさんありがとうです。\n\n画像は `input` タグで選択してもらって\n\n```js\n<input\n  type=\"file\"\n  id=\"file\"\n  multiple\n  accept=\"image/*\"\n  @change=\"handleFiles\"\n/>\n```\n\n`multiple` で複数選択可にして `accept` で画像以外を一応弾いています。それで `@change` イベントのフックで画像を圧縮しています。\n\n```js\nhandleFiles(e: Event) {\n  const images = this.images\n  const files: FileList | null = (<HTMLInputElement>e.target).files\n  if (files === null) return\n  ;[...files].forEach((file: File) => {\n    // 複数ファイルを受け入れているので、この中で処理している\n  })\n}\n```\n\n複数処理やfileが取得できなかった場合の処理は上のような感じで、Typescript的にエラーが出ていないのでこれでOKかなと思ってます（認識あってますか？）\n\n```js\nconst payload: Compressor.Options = {\n  quality: 0.8,\n  maxWidth: 100,\n  maxHeight: 100,\n  mimeType: 'image/jpeg',\n  success(blob: Blob): void {\n    // ここに成功時の処理を書く。次。\n  },\n  error(err: Error): void {\n    console.log(err.message)\n  }\n}\nnew Compressor(file, payload)\n```\n\n実際の処理はこんな感じで横幅・縦幅の最大とか圧縮率とかたくさんの [オプション](https://github.com/fengyuanchen/compressorjs/blob/master/README.md#options) があります。また成功時と失敗時は `success` と `error` のコールバックに書くみたいです。\n\n\n```js\nsuccess(blob: Blob): void {\n},\n\n```\n\nサクセスのコールバックは `Blob` を受け取るのでFirebaseではこの段階でファイルのアップロードができます！！！[ドキュメントはこちら。](https://firebase.google.com/docs/storage/web/upload-files?hl=ja#upload_from_a_blob_or_file)  Blobからアップロードできるとかすごくいいですね。(試してないけどたぶんそちらでUploadできる)\n\n今回はアップロードする前に読み込みを確認したかったので、DataUrlという形式に変換しています。\n\n```js\nsuccess(blob: Blob): void {\n  var reader = new FileReader()\n  reader.onloadend = () => {\n    const result = <string | ArrayBuffer | null>reader.result\n    if (result instanceof ArrayBuffer || result === null) return\n    images.push(result)\n  }\n  reader.readAsDataURL(blob)\n},\n```\n\n`images.push(result)` する段階でDataUrlという形式の `data:image/jpeg;base64,XXXXXXXX`みたいな文字列になっています。[ドキュメントの文字列からアップロードする](https://firebase.google.com/docs/storage/web/upload-files?hl=ja#upload_from_a_string)を見ると\n\n```js\nvar message = 'data:text/plain;base64,5b6p5Y+344GX44G+44GX44Gf77yB44GK44KB44Gn44Go44GG77yB';\nref.putString(message, 'data_url').then(function(snapshot) {\n  console.log('Uploaded a data_url string!');\n});\n```\n\nこれでアップロードできそうですね。\n\nドキュメントを読むと `data:text/plain;base64,` という文字列を削除したら ref.putString(message, 'base64url')でアップロードできそうです。たぶん。\n\nサンプルファイルは `<script lang=\"ts\">` にしているのでVSCodeでひらいて、 `CMD + Click` とかで定義元とか飛んで行って自分で触ってみてください！！\n\n<img width=\"659\" alt=\"スクリーンショット 2020-01-16 14.09.43.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/8d08379f-2192-bbf1-8b84-d727d73ab27b.png\">\n\n## 終わりに\n\nブラウザのAPIを叩くときにTypeScriptすごく開発体験良かったです。MDNを見に行かなくても何が返ってくるかわかるので、null制御とかそういうのがやりやすかったです。コード書いてて楽しかった。\n\nなにか間違い見つけたら編集リクエストください！！！\n\n最後まで読んでいただきありがとうございます。！！\n\n\n\n\n","coediting":false,"comments_count":3,"created_at":"2020-01-16T14:21:50+09:00","group":null,"id":"33815dfe198ea332d142","likes_count":154,"private":false,"reactions_count":0,"stocks_count":144,"tags":[{"name":"JavaScript","versions":[]},{"name":"Vue.js","versions":[]},{"name":"Firebase","versions":[]},{"name":"FirebaseStorage","versions":[]}],"title":"画像をアップロード前に圧縮する流行りの方法【Vue.js x Firebase x 令和】","updated_at":"2021-10-06T21:01:55+09:00","url":"https://qiita.com/ykhirao/items/33815dfe198ea332d142","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p>API叩いたりとかした時に、たまにこういうメッセージ返ってくるじゃないですか。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>{\n  \"error\":true,\n  \"message\":\"\\u30a8\\u30e9\\u30fc\\u304c\\u51fa\\u3066\\u3044\\u307e\\u3059\\uff01\\uff01\\uff01\"\n}\n</code></pre></div></div>\n\n<p><a href=\"https://camo.qiitausercontent.com/0ae378c73078a0aaaa982d2ebe829debc5f750fe/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39623733636661612d376531372d386436342d343265312d3932646266666565316635662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9b73cfaa-7e17-8d64-42e1-92dbffee1f5f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c1b9c725cff3bcdf1820925e3d0cfc67\" alt=\"Screenshot from 2019-12-25 13-55-32.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9b73cfaa-7e17-8d64-42e1-92dbffee1f5f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9b73cfaa-7e17-8d64-42e1-92dbffee1f5f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=21181e81b94837e1ffac8ead9ca7aa5f 1x\" loading=\"lazy\"></a></p>\n\n<p>Chromeのコンソールにぶちこむと返り値としていい感じに表示してくれる。</p>\n\n<p>firefoxはエラーが起きるので駄目でした。</p>\n\n<h1>\n<span id=\"その他unicodeなjsonを日本語変換する方法\" class=\"fragment\"></span><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96unicode%E3%81%AAjson%E3%82%92%E6%97%A5%E6%9C%AC%E8%AA%9E%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>その他、UnicodeなJSONを日本語変換する方法</h1>\n\n<h2>\n<span id=\"コンソールでパース\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB%E3%81%A7%E3%83%91%E3%83%BC%E3%82%B9\"><i class=\"fa fa-link\"></i></a>コンソールでパース</h2>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>JSON.parse(`{\n  \"error\":true,\n  \"message\":\"\\u30a8\\u30e9\\u30fc\\u304c\\u51fa\\u3066\\u3044\\u307e\\u3059\\uff01\\uff01\\uff01\"\n}`)\n</code></pre></div></div>\n\n<p>これを使うと便利なところはそのまま変数として使ったりがしやすいです。右クリックで <code>Store as global variable</code> を押せば <code>temp1</code> として使えるようになりました。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/c006770bffce774b45d1cfc94bf974b400fe29cb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f30383365333439382d646262632d376538302d336531642d3135353366306330383238322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F083e3498-dbbc-7e80-3e1d-1553f0c08282.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fd1ac2a876e817e81eb86cea2731cf55\" alt=\"Screenshot from 2019-12-25 14-32-06.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/083e3498-dbbc-7e80-3e1d-1553f0c08282.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F083e3498-dbbc-7e80-3e1d-1553f0c08282.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=78b10a3253bf7bb70f436ddd16340ab3 1x\" loading=\"lazy\"></a></p>\n\n<p><code>console.dir(temp1)</code> とか <code>console.log</code> 以外も使えます。◯</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/8c46cd1eef3f1aad75b75ab0984ad6ea1e31cdff/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f66343537393664642d343861392d333537362d616464612d3436666539313761353663352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ff45796dd-48a9-3576-adda-46fe917a56c5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5d778ad14583b690eccbc843476226cc\" alt=\"Screenshot from 2019-12-25 14-39-18.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/f45796dd-48a9-3576-adda-46fe917a56c5.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ff45796dd-48a9-3576-adda-46fe917a56c5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=341a9df7829ee36daa70b605eeb36626 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"エディターにjsonparser系のプラグインをいれる\" class=\"fragment\"></span><a href=\"#%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%83%BC%E3%81%ABjsonparser%E7%B3%BB%E3%81%AE%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E3%81%84%E3%82%8C%E3%82%8B\"><i class=\"fa fa-link\"></i></a>エディターにJsonParser系のプラグインをいれる</h2>\n\n<p>phpstorm</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/d001f592db98adb0b7322f56849e89972928eef3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f63343934623063352d323031372d366661622d326333332d3562326464396535346234362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc494b0c5-2017-6fab-2c33-5b2dd9e54b46.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=04f824611b2f09bb289cd8f0d29f1b12\" alt=\"Screenshot from 2019-12-25 14-40-17.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c494b0c5-2017-6fab-2c33-5b2dd9e54b46.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc494b0c5-2017-6fab-2c33-5b2dd9e54b46.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0b701c5e402c6a618b5bb9fe7b849ed4 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"その他\" class=\"fragment\"></span><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\"><i class=\"fa fa-link\"></i></a>その他</h2>\n\n<p>JSONじゃなければ、firefoxでも可です！！！</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>\"\\u30a8\\u30e9\\u30fc\\u304c\\u51fa\\u3066\\u3044\\u307e\\u3059\\uff01\\uff01\\uff01\"\n</code></pre></div></div>\n\n<p><a href=\"https://camo.qiitausercontent.com/45b8107777f423554b6a83cda8f6615a51cb098d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f65396662626133332d666239352d653833622d346339342d3537616162313637613134652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fe9fbba33-fb95-e83b-4c94-57aab167a14e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e63ad32c6824ee45da24cda95aaaff5b\" alt=\"Screenshot from 2019-12-25 14-47-27.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/e9fbba33-fb95-e83b-4c94-57aab167a14e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fe9fbba33-fb95-e83b-4c94-57aab167a14e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6ade19f2eca56e289a64cf2acf126b12 1x\" loading=\"lazy\"></a></p>\n\n<p>.</p>\n","body":"API叩いたりとかした時に、たまにこういうメッセージ返ってくるじゃないですか。\n\n```\n{\n  \"error\":true,\n  \"message\":\"\\u30a8\\u30e9\\u30fc\\u304c\\u51fa\\u3066\\u3044\\u307e\\u3059\\uff01\\uff01\\uff01\"\n}\n```\n\n![Screenshot from 2019-12-25 13-55-32.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9b73cfaa-7e17-8d64-42e1-92dbffee1f5f.png)\n\nChromeのコンソールにぶちこむと返り値としていい感じに表示してくれる。\n\nfirefoxはエラーが起きるので駄目でした。\n\n# その他、UnicodeなJSONを日本語変換する方法\n\n## コンソールでパース\n\n```\nJSON.parse(`{\n  \"error\":true,\n  \"message\":\"\\u30a8\\u30e9\\u30fc\\u304c\\u51fa\\u3066\\u3044\\u307e\\u3059\\uff01\\uff01\\uff01\"\n}`)\n```\n\nこれを使うと便利なところはそのまま変数として使ったりがしやすいです。右クリックで `Store as global variable` を押せば `temp1` として使えるようになりました。\n\n![Screenshot from 2019-12-25 14-32-06.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/083e3498-dbbc-7e80-3e1d-1553f0c08282.png)\n\n`console.dir(temp1)` とか `console.log` 以外も使えます。◯\n\n![Screenshot from 2019-12-25 14-39-18.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/f45796dd-48a9-3576-adda-46fe917a56c5.png)\n\n## エディターにJsonParser系のプラグインをいれる\n\nphpstorm\n\n![Screenshot from 2019-12-25 14-40-17.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c494b0c5-2017-6fab-2c33-5b2dd9e54b46.png)\n\n## その他\n\nJSONじゃなければ、firefoxでも可です！！！\n\n```\n\"\\u30a8\\u30e9\\u30fc\\u304c\\u51fa\\u3066\\u3044\\u307e\\u3059\\uff01\\uff01\\uff01\"\n```\n\n![Screenshot from 2019-12-25 14-47-27.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/e9fbba33-fb95-e83b-4c94-57aab167a14e.png)\n\n\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2019-12-25T14:51:32+09:00","group":null,"id":"321b22cb063e3f48c7ed","likes_count":9,"private":false,"reactions_count":0,"stocks_count":2,"tags":[{"name":"API","versions":[]},{"name":"JSON","versions":[]},{"name":"Unicode","versions":[]}],"title":"UnicodeなJSONを日本語変換するならChromeのコンソール使うといいと思う。","updated_at":"2019-12-25T14:51:32+09:00","url":"https://qiita.com/ykhirao/items/321b22cb063e3f48c7ed","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"異体字の世界-サイトウ\" class=\"fragment\"></span><a href=\"#%E7%95%B0%E4%BD%93%E5%AD%97%E3%81%AE%E4%B8%96%E7%95%8C-%E3%82%B5%E3%82%A4%E3%83%88%E3%82%A6\"><i class=\"fa fa-link\"></i></a>異体字の世界 <code>サイトウ</code>\n</h1>\n\n<p>こんにちは。オープンロジの <a href=\"/ykhirao\" class=\"user-mention js-hovercard\" title=\"ykhirao\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"ykhirao\">@ykhirao</a> です。こちらは <a href=\"https://qiita.com/advent-calendar/2019/openlogi\">OPENLOGI Advent Calendar 2019</a> 4日目の記事になります。</p>\n\n<p>内容については、以前 <a href=\"https://qiita.com/ykhirao/items/9ca1fbd294883e06dbd6\" id=\"reference-03869d9c8a89fc9aafc4\">pͪoͣnͬpͣoͥnͭpͣa͡inͥを支える技術 - Qiita</a> という記事を書かせてもらったので、その続きでまた文字コードを扱った記事を書いていきたいと思います。どうぞ最後までよろしくお願いします！！</p>\n\n<h2>\n<span id=\"長いので結論\" class=\"fragment\"></span><a href=\"#%E9%95%B7%E3%81%84%E3%81%AE%E3%81%A7%E7%B5%90%E8%AB%96\"><i class=\"fa fa-link\"></i></a>長いので結論</h2>\n\n<p>戸籍統一文字情報では <code>斎藤</code> と <code>斉藤</code> は別の漢字として扱われているので、「サイトウさん、漢字はどのように書くのですか…？」と聞いたほうが無難な気がします。 ただ <code>斎藤</code> って書くと <code>62.2%</code> 正解で、 <code>斉藤</code> と書くと <code>30.3%</code> 正解になります。</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: left\">漢字</th>\n<th style=\"text-align: right\">戸籍数（たぶん）</th>\n<th style=\"text-align: right\">%</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left\">斎藤</td>\n<td style=\"text-align: right\">150494</td>\n<td style=\"text-align: right\">62.2</td>\n</tr>\n<tr>\n<td style=\"text-align: left\">斉藤</td>\n<td style=\"text-align: right\">73424</td>\n<td style=\"text-align: right\">30.3</td>\n</tr>\n<tr>\n<td style=\"text-align: left\">齋藤</td>\n<td style=\"text-align: right\">17071</td>\n<td style=\"text-align: right\">7.1</td>\n</tr>\n<tr>\n<td style=\"text-align: left\">齊藤</td>\n<td style=\"text-align: right\">1111</td>\n<td style=\"text-align: right\">0.5</td>\n</tr>\n<tr>\n<td style=\"text-align: left\">合計:</td>\n<td style=\"text-align: right\">242100</td>\n<td style=\"text-align: right\">100</td>\n</tr>\n</tbody>\n</table>\n\n<p>また法務省によると、旧自体と新字体が乗っていますので、</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code># 法務省\n齋藤 → (新字体) → 斎藤\n齊藤 → (新字体) → 斉藤\n</code></pre></div></div>\n\n<p>ここも考慮すると <code>斎藤</code> と書くと <code>69.3%</code> 正解で、 <code>斉藤</code> と書くと <code>30.7%</code> 正解になります。</p>\n\n<p>また子供のころに <code>斎</code> が難しかったので <code>斉</code> と書いていたケースも考えると、この二つの差は少し縮まりまるかもしれません。</p>\n\n<p>とりあえず確立論的には <code>斎</code> と書けば…なんとなく、あたるかも…しれない？<br>\n（ちゃんと本人に確認とりましょう！！！）</p>\n\n<ul>\n<li>\n<a href=\"http://kosekimoji.moj.go.jp/kosekimojidb/mjko/PeopleList/EXECUTE?ihid_clickedButtonName=iimag_Moji&amp;ihid_SelectedKskMjBng=548870&amp;ihid_SearchCount=0&amp;itxt_Yomi1=&amp;itxt_Yomi2=&amp;itxt_Yomi3=&amp;islc_Jis=0&amp;islc_Kakusu1=0&amp;irdo_Code=1&amp;itxt_Code=548870&amp;ihid_SearchCount=1\" rel=\"nofollow noopener\" target=\"_blank\">斉 | 法務省　戸籍統一文字情報　詳細表示</a> の正字</li>\n<li>\n<a href=\"http://kosekimoji.moj.go.jp/kosekimojidb/mjko/PeopleList/EXECUTE?ihid_clickedButtonName=iimag_Moji&amp;ihid_SelectedKskMjBng=548940&amp;ihid_SearchCount=0&amp;itxt_Yomi1=&amp;itxt_Yomi2=&amp;itxt_Yomi3=&amp;islc_Jis=0&amp;islc_Kakusu1=0&amp;irdo_Code=1&amp;itxt_Code=548940&amp;ihid_SearchCount=1\" rel=\"nofollow noopener\" target=\"_blank\">斎 | 法務省　戸籍統一文字情報　詳細表示</a> の正字</li>\n<li>人数情報 <a href=\"https://toyokeizai.net/articles/-/65709?page=2\" rel=\"nofollow noopener\" target=\"_blank\">｢斎藤｣｢斉藤｣｢齋藤｣｢齊藤｣･･この差って何？ | 東洋経済オンライン</a>\n</li>\n</ul>\n\n<h2>\n<span id=\"拝啓-斎藤さん\" class=\"fragment\"></span><a href=\"#%E6%8B%9D%E5%95%93-%E6%96%8E%E8%97%A4%E3%81%95%E3%82%93\"><i class=\"fa fa-link\"></i></a>拝啓 斎藤さん</h2>\n\n<p>先日エンジニアとしてサイトウさんが入社したときに「サイトウのサイってどう書きますか…？ Unicodeで教えてください。」という、いつものあれが発生したのでそろそろサイトウについて理解してみようと思いました。</p>\n\n<p>また以前に <a href=\"https://www.kanjimuseum.kyoto/news/post_73.html\" rel=\"nofollow noopener\" target=\"_blank\">『異体字の世界”ワタナベ”』| 漢検 漢字博物館・図書館 [漢字ミュージアム]</a> というイベントがあったのでタイトルはそこから来ています。（展示にはいけてません…）</p>\n\n<h2>\n<span id=\"周辺知識編\" class=\"fragment\"></span><a href=\"#%E5%91%A8%E8%BE%BA%E7%9F%A5%E8%AD%98%E7%B7%A8\"><i class=\"fa fa-link\"></i></a>周辺知識編</h2>\n\n<h3>\n<span id=\"wikipedia\" class=\"fragment\"></span><a href=\"#wikipedia\"><i class=\"fa fa-link\"></i></a>Wikipedia</h3>\n\n<p>(ここから クリエイティブ・コモンズ CC-BY-SA 3.0 のライセンス)</p>\n\n<p>Wikipediaで一つの項目となっているのは <code>斎藤</code> と <code>斉藤</code> のみみたいです</p>\n\n<ul>\n<li><a href=\"https://ja.wikipedia.org/wiki/%E6%96%8E%E8%97%A4\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://ja.wikipedia.org/wiki/斎藤</a></li>\n<li><a href=\"https://ja.wikipedia.org/wiki/%E6%96%89%E8%97%A4\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://ja.wikipedia.org/wiki/斉藤</a></li>\n</ul>\n\n<p>この２つのWikipediaで重要なことは、 <code>斎藤</code> は <strong><code>「斎宮頭を務めた藤原氏」の略</code></strong> で、 <code>斉</code> についてはただの誤記説 <strong><code>(「斉」の文字に本来「さい」の読みがないことから斎藤の誤記が由来と言われる)</code></strong> が濃厚みたいです。</p>\n\n<p>また法務省で定められている漢字としては、以下のように落ち着いているみたいです。</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">旧字体</th>\n<th style=\"text-align: center\">新字体</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">齋</td>\n<td style=\"text-align: center\">斎</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">齊</td>\n<td style=\"text-align: center\">斉</td>\n</tr>\n</tbody>\n</table>\n\n<p>(ここまで クリエイティブ・コモンズ CC-BY-SA 3.0 のライセンス)</p>\n\n<p>ですので、現状 <code>斉</code> は <code>斎</code> の新字体ではないので、小学生のときに「簡単な方」として書いていたケースを除いて、<code>斉</code> は <code>斎</code> 2種類別の漢字として扱われているので正式な文章を書くときは2種類だけ気をつけたらよさそうです。</p>\n\n<p>(ここから クリエイティブ・コモンズ CC-BY-SA 3.0 のライセンス)</p>\n\n<p>また<a href=\"https://ja.wikipedia.org/wiki/%E6%96%8E%E8%97%A4\" rel=\"nofollow noopener\" target=\"_blank\">斎藤のページ</a> によると、斎の派生は31種類あるみたいで、画像がはられています。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/3dd2fcf8b226914f339a9e4c07323eea9e541416/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f612f61312f2545392542442538412545372539352542302545342542442539332545352541442539372545342542382538302545382541362541372e4a5047\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fa%2Fa1%2F%25E9%25BD%258A%25E7%2595%25B0%25E4%25BD%2593%25E5%25AD%2597%25E4%25B8%2580%25E8%25A6%25A7.JPG?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d5c684ddeec24568c71362fdde0fc4b8\" alt=\"\" data-canonical-src=\"https://upload.wikimedia.org/wikipedia/commons/a/a1/%E9%BD%8A%E7%95%B0%E4%BD%93%E5%AD%97%E4%B8%80%E8%A6%A7.JPG\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fa%2Fa1%2F%25E9%25BD%258A%25E7%2595%25B0%25E4%25BD%2593%25E5%25AD%2597%25E4%25B8%2580%25E8%25A6%25A7.JPG?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=24ffa483fe885e5fc13073998288b98f 1x\" loading=\"lazy\"></a></p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>// 画像の注釈として\n「斉藤」または「斎藤」の一文字目に使用される異体字はあわせて31種類あると言われている。\n</code></pre></div></div>\n\n<p>とありますが、それは後ほど出てくる <code>高信幸男氏</code> による調査による <code>\"西藤\",\"西塔\",\"才藤\",\"済藤\",\"西頭\",\"西等\",\"佐井藤\",\"再藤\"</code> なども含んだ話なので、はられている画像と説明が食い違っているように思えます。が一旦は無視します。</p>\n\n<p>また31種以外にも <code>この他に例えば埼玉県の電話帳には齋の字の亠の下が刀丫氏の並びになっている齋藤姓が確認出来る。</code> との記載があり、どんどん派生しているのかもしれません。</p>\n\n<p>(ここまで クリエイティブ・コモンズ CC-BY-SA 3.0 のライセンス)</p>\n\n<h3>\n<span id=\"tbsテレビこの差って何ですか\" class=\"fragment\"></span><a href=\"#tbs%E3%83%86%E3%83%AC%E3%83%93%E3%81%93%E3%81%AE%E5%B7%AE%E3%81%A3%E3%81%A6%E4%BD%95%E3%81%A7%E3%81%99%E3%81%8B\"><i class=\"fa fa-link\"></i></a>TBSテレビ『この差って何ですか？』</h3>\n\n<p>また <a href=\"https://toyokeizai.net/articles/-/65709\" rel=\"nofollow noopener\" target=\"_blank\">｢斎藤｣｢斉藤｣｢齋藤｣｢齊藤｣･･この差って何？ | 東洋経済オンライン</a> で <code>名字研究家 高信幸男氏</code> からの情報がまとめられてますが、法務省が定めた見解とは少し違っていて</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>明治時代になると(略)国民全員に名字(略)多くの庶民が役所に行き、名字を申請した(略)\n\n(中略)\n\n役人はそれぞれ思い思いの｢サイトウ｣を書いてしまった(略)\n\n具体的には｢齋藤｣は旧字体で書いてしまったパターンで、｢齊藤｣は旧字体の書き間違い。そして｢斉藤｣は本来の｢斎藤｣の書き間違い、というのだ。\n</code></pre></div></div>\n\n<p>とあるので、 <code>斉</code> の派生は <code>斎</code> としているところが面白いです。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code># 法務省\n齋 → 斎\n齊 → 斉\n\n# 高信幸男氏\n齋 → (書き間違い) → 齊\n↓\n↓ （新字体）\n↓\n斎 → (書き間違い) → 斉\n</code></pre></div></div>\n\n<p>真実はいつも一つだと思いますが、文明開化の音とともに闇に消え去ったと思います。</p>\n\n<p>また｢サイトウ｣と読む姓が31種類存在しているみたいで、人数の多い順に <code>[\"斎藤\",\"斉藤\",\"齋藤\",\"齊藤\",\"西藤\",\"西塔\",\"才藤\",\"済藤\",\"西頭\",\"西等\",\"佐井藤\",\"再藤\"]</code> となっています。</p>\n\n<h3>\n<span id=\"三省堂-ことばのコラム\" class=\"fragment\"></span><a href=\"#%E4%B8%89%E7%9C%81%E5%A0%82-%E3%81%93%E3%81%A8%E3%81%B0%E3%81%AE%E3%82%B3%E3%83%A9%E3%83%A0\"><i class=\"fa fa-link\"></i></a>三省堂 ことばのコラム</h3>\n\n<p><a href=\"https://dictionary.sanseido-publ.co.jp/column/%E7%AC%AC78%E5%9B%9E-%E3%80%8C%E6%96%8E%E3%80%8D%E3%81%A8%E3%80%8C%E9%BD%8B%E3%80%8D\" rel=\"nofollow noopener\" target=\"_blank\">第78回 「斎」と「齋」 | 人名用漢字の新字旧字（安岡 孝一） | 三省堂 ことばのコラム</a> によると <code>示</code> の横棒の長さの揺れが出生届を出すときにすごく揺れていたみたいで、平成22年11月30日 に正式に <code>改定常用漢字表</code> で今の <code>斎</code> になったみたいです。結構最近ですね。</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">出来事</th>\n<th style=\"text-align: center\">年代</th>\n<th style=\"text-align: center\">漢字</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">標準漢字表</td>\n<td style=\"text-align: center\">昭和17年6月17日</td>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/b272e92ff065460636c44df4b872d0d5d553182b/68747470733a2f2f64696374696f6e6172792e73616e736569646f2d7075626c2e636f2e6a702f77702f77702d636f6e74656e742f75706c6f6164732f323031302f31322f303738697473756b692d6e6577312e7468756d626e61696c2e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new1.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c9c6ced5b2eb4202b4fc4d8f039fb0ac\" alt=\"示\" data-canonical-src=\"https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new1.thumbnail.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new1.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=352bd0ca8290d3fc48ed770688e935d2 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">当用漢字表</td>\n<td style=\"text-align: center\">昭和21年11月16日</td>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/0f5cf81a5f765f116282c12938d867a274d3285c/68747470733a2f2f64696374696f6e6172792e73616e736569646f2d7075626c2e636f2e6a702f77702f77702d636f6e74656e742f75706c6f6164732f323031302f31322f303738697473756b692d6e6577322e7468756d626e61696c2e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new2.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ec45df5ab6dde58be5c979b76483c9fe\" alt=\"小\" data-canonical-src=\"https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new2.thumbnail.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new2.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=78354f69aa30ccd3fe00b045d7d5c280 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">戸籍法が改正</td>\n<td style=\"text-align: center\">昭和23年1月1日</td>\n<td style=\"text-align: center\">名付けに使用できるのは当用漢字表</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">漢字コード 規格<br>JIS C 6226<br>(コンピュータ表記)</td>\n<td style=\"text-align: center\">昭和53年1月1日</td>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/b272e92ff065460636c44df4b872d0d5d553182b/68747470733a2f2f64696374696f6e6172792e73616e736569646f2d7075626c2e636f2e6a702f77702f77702d636f6e74656e742f75706c6f6164732f323031302f31322f303738697473756b692d6e6577312e7468756d626e61696c2e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new1.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c9c6ced5b2eb4202b4fc4d8f039fb0ac\" alt=\"示\" data-canonical-src=\"https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new1.thumbnail.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new1.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=352bd0ca8290d3fc48ed770688e935d2 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">常用漢字表</td>\n<td style=\"text-align: center\">昭和56年10月1日</td>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/0f5cf81a5f765f116282c12938d867a274d3285c/68747470733a2f2f64696374696f6e6172792e73616e736569646f2d7075626c2e636f2e6a702f77702f77702d636f6e74656e742f75706c6f6164732f323031302f31322f303738697473756b692d6e6577322e7468756d626e61696c2e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new2.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ec45df5ab6dde58be5c979b76483c9fe\" alt=\"小\" data-canonical-src=\"https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new2.thumbnail.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new2.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=78354f69aa30ccd3fe00b045d7d5c280 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">名付けに使用</td>\n<td style=\"text-align: center\">(S56 ~ H22)</td>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/0f5cf81a5f765f116282c12938d867a274d3285c/68747470733a2f2f64696374696f6e6172792e73616e736569646f2d7075626c2e636f2e6a702f77702f77702d636f6e74656e742f75706c6f6164732f323031302f31322f303738697473756b692d6e6577322e7468756d626e61696c2e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new2.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ec45df5ab6dde58be5c979b76483c9fe\" alt=\"小\" data-canonical-src=\"https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new2.thumbnail.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new2.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=78354f69aa30ccd3fe00b045d7d5c280 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">コンピュータ表記</td>\n<td style=\"text-align: center\">(S56 ~ H22)</td>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/b272e92ff065460636c44df4b872d0d5d553182b/68747470733a2f2f64696374696f6e6172792e73616e736569646f2d7075626c2e636f2e6a702f77702f77702d636f6e74656e742f75706c6f6164732f323031302f31322f303738697473756b692d6e6577312e7468756d626e61696c2e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new1.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c9c6ced5b2eb4202b4fc4d8f039fb0ac\" alt=\"示\" data-canonical-src=\"https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new1.thumbnail.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new1.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=352bd0ca8290d3fc48ed770688e935d2 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">改定常用漢字表<br>コンピュータ表記と名付けでの表記が変わった</td>\n<td style=\"text-align: center\">平成22年11月30日</td>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/b272e92ff065460636c44df4b872d0d5d553182b/68747470733a2f2f64696374696f6e6172792e73616e736569646f2d7075626c2e636f2e6a702f77702f77702d636f6e74656e742f75706c6f6164732f323031302f31322f303738697473756b692d6e6577312e7468756d626e61696c2e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new1.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c9c6ced5b2eb4202b4fc4d8f039fb0ac\" alt=\"示\" data-canonical-src=\"https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new1.thumbnail.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fdictionary.sanseido-publ.co.jp%2Fwp%2Fwp-content%2Fuploads%2F2010%2F12%2F078itsuki-new1.thumbnail.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=352bd0ca8290d3fc48ed770688e935d2 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n\n<p>漢字とは面白いですね。</p>\n\n<h3>\n<span id=\"調査と終えて今後の記事の目標\" class=\"fragment\"></span><a href=\"#%E8%AA%BF%E6%9F%BB%E3%81%A8%E7%B5%82%E3%81%88%E3%81%A6%E4%BB%8A%E5%BE%8C%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%AE%E7%9B%AE%E6%A8%99\"><i class=\"fa fa-link\"></i></a>調査と終えて今後の記事の目標</h3>\n\n<ul>\n<li>斎という31字のユニコード特定</li>\n</ul>\n\n<p>以上踏まえてコードなどを追っていきましょう。</p>\n\n<h2>\n<span id=\"unicodeを特定する\" class=\"fragment\"></span><a href=\"#unicode%E3%82%92%E7%89%B9%E5%AE%9A%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Unicodeを特定する</h2>\n\n<h3>\n<span id=\"google-日本語入力から探す\" class=\"fragment\"></span><a href=\"#google-%E6%97%A5%E6%9C%AC%E8%AA%9E%E5%85%A5%E5%8A%9B%E3%81%8B%E3%82%89%E6%8E%A2%E3%81%99\"><i class=\"fa fa-link\"></i></a>Google 日本語入力から探す</h3>\n\n<p><code>サイトウ</code> で変換できたそれっぽい字。（さんずいを除くと5字見つかった）</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>斎\n斉\n齋\n齊\n齎\n済\n濟\n</code></pre></div></div>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">元の漢字</th>\n<th style=\"text-align: center\">JS CODE</th>\n<th style=\"text-align: center\">UTF-16 コード(10進数)</th>\n<th style=\"text-align: center\">(16進数)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">斎</td>\n<td style=\"text-align: center\">'斎'.charCodeAt(0)</td>\n<td style=\"text-align: center\">25998</td>\n<td style=\"text-align: center\">658E</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">斉</td>\n<td style=\"text-align: center\">'斉'.charCodeAt(0)</td>\n<td style=\"text-align: center\">25993</td>\n<td style=\"text-align: center\">6589</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">齋</td>\n<td style=\"text-align: center\">'齋'.charCodeAt(0)</td>\n<td style=\"text-align: center\">40779</td>\n<td style=\"text-align: center\">9F4B</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">齊</td>\n<td style=\"text-align: center\">'齊'.charCodeAt(0)</td>\n<td style=\"text-align: center\">40778</td>\n<td style=\"text-align: center\">9F4A</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">齎</td>\n<td style=\"text-align: center\">'齎'.charCodeAt(0)</td>\n<td style=\"text-align: center\">40782</td>\n<td style=\"text-align: center\">9F4E</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">済</td>\n<td style=\"text-align: center\">'済'.charCodeAt(0)</td>\n<td style=\"text-align: center\">28168</td>\n<td style=\"text-align: center\">6E08</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">濟</td>\n<td style=\"text-align: center\">'濟'.charCodeAt(0)</td>\n<td style=\"text-align: center\">28639</td>\n<td style=\"text-align: center\">6FDF</td>\n</tr>\n</tbody>\n</table>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"c1\">// MACだと command + alt + i で開発ツールが開くのでConsoleなどで試してください。</span>\n<span class=\"nx\">$</span> <span class=\"dl\">'</span><span class=\"s1\">斎</span><span class=\"dl\">'</span><span class=\"p\">.</span><span class=\"nx\">charCodeAt</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"mi\">25998</span>\n\n<span class=\"nx\">$</span> <span class=\"nb\">String</span><span class=\"p\">.</span><span class=\"nx\">fromCharCode</span><span class=\"p\">(</span><span class=\"mi\">25998</span><span class=\"p\">)</span>\n<span class=\"dl\">\"</span><span class=\"s2\">斎</span><span class=\"dl\">\"</span>\n\n<span class=\"nx\">$</span> <span class=\"nb\">String</span><span class=\"p\">.</span><span class=\"nx\">fromCharCode</span><span class=\"p\">(</span><span class=\"mh\">0x658E</span><span class=\"p\">)</span>\n<span class=\"dl\">\"</span><span class=\"s2\">斎</span><span class=\"dl\">\"</span>\n</code></pre></div></div>\n\n<p>10進法でいうと <code>25998</code> と <code>40779</code> のあたりに <code>サイ</code> が固まってそうな雰囲気がしますね。</p>\n\n<h3>\n<span id=\"unicodeと漢字をマッピングしてくれるサイトを探す\" class=\"fragment\"></span><a href=\"#unicode%E3%81%A8%E6%BC%A2%E5%AD%97%E3%82%92%E3%83%9E%E3%83%83%E3%83%94%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%82%B5%E3%82%A4%E3%83%88%E3%82%92%E6%8E%A2%E3%81%99\"><i class=\"fa fa-link\"></i></a>Unicodeと漢字をマッピングしてくれるサイトを探す</h3>\n\n<p><qiita-embed-ogp src=\"https://glyphwiki.org/wiki/u658e\"></qiita-embed-ogp></p>\n\n<blockquote>\n<p>グリフウィキに登録されているグリフデータおよび記事は、誰もが自由に利用できることとします。あらゆる改変の有無に関わらず、また商業的な利用であっても、自由に利用、複製、再配布することができます。著作者表示も特に制限を設けません。新しいフォントのベースデータとして用いることや、そのままコピーしたものをフォントとして著作物とすることを妨げません。記事中に引用されている部分については、グリフウィキには著作権はありませんので引用元のライセンスを確認してください。</p>\n\n<p><a href=\"https://glyphwiki.org/wiki/GlyphWiki:%E3%83%87%E3%83%BC%E3%82%BF%E3%83%BB%E8%A8%98%E4%BA%8B%E3%81%AE%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/GlyphWiki:データ・記事のライセンス</a></p>\n</blockquote>\n\n<p>とても使いやすそうなライセンスなのでこのページをメインで調べてみようと思う。</p>\n\n<blockquote>\n<p>グリフウィキを広めてください<br>\n登録されているグリフの画像やフォントをどんどん利用してください。画像やフォントに直接リンクを張ってもかまいません。またグリフウィキの存在をクチコミでみんなに広めてください。</p>\n\n<p><a href=\"https://glyphwiki.org/wiki/GlyphWiki:%E3%81%82%E3%81%AA%E3%81%9F%E3%81%AB%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%93%E3%81%A8\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/GlyphWiki:あなたにできること</a></p>\n</blockquote>\n\n<p>またグリフウィキさんを広めるのは正義みたいなので、、私の代わりに使ってくれ。画像への直リンク可みたいなので使うことにする。</p>\n\n<p>先程の <a href=\"https://glyphwiki.org/wiki/u658e\" rel=\"nofollow noopener\" target=\"_blank\"><code>斎</code> へのリンク</a>を確認する限り、Unicodeとして定義されているのは、さきほどあげた5種類の <code>サイ</code> だけなのではないかと思い初めてきた…。その他は <code>法務省</code> が規定する戸籍関連の字とか、中国語字体とか…なんかそういうのも含めている気がする。</p>\n\n<h3>\n<span id=\"斎-の異体字関連文字データ抽出する\" class=\"fragment\"></span><a href=\"#%E6%96%8E-%E3%81%AE%E7%95%B0%E4%BD%93%E5%AD%97%E9%96%A2%E9%80%A3%E6%96%87%E5%AD%97%E3%83%87%E3%83%BC%E3%82%BF%E6%8A%BD%E5%87%BA%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a><code>斎</code> の異体字・関連文字データ抽出する</h3>\n\n<p><qiita-embed-ogp src=\"https://glyphwiki.org/wiki/u658e\"></qiita-embed-ogp></p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"c1\">// データ作成</span>\n<span class=\"kd\">const</span> <span class=\"nx\">td</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">querySelector</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">body &gt; div.right_pane &gt; div.right_body &gt; div:nth-child(15) &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td:nth-child(3)</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n<span class=\"kd\">const</span> <span class=\"nx\">arr</span> <span class=\"o\">=</span> <span class=\"p\">[...</span><span class=\"nx\">td</span><span class=\"p\">.</span><span class=\"nx\">querySelectorAll</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">a&gt;img</span><span class=\"dl\">'</span><span class=\"p\">)]</span>\n<span class=\"nx\">arr</span><span class=\"p\">.</span><span class=\"nx\">map</span><span class=\"p\">(</span><span class=\"nx\">x</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">`</span><span class=\"p\">${</span><span class=\"nx\">x</span><span class=\"p\">.</span><span class=\"nx\">parentNode</span><span class=\"p\">.</span><span class=\"nx\">href</span><span class=\"p\">}</span><span class=\"s2\">\\t</span><span class=\"p\">${</span><span class=\"nx\">x</span><span class=\"p\">.</span><span class=\"nx\">parentNode</span><span class=\"p\">.</span><span class=\"nx\">innerText</span><span class=\"p\">.</span><span class=\"nx\">trim</span><span class=\"p\">()}</span><span class=\"s2\">`</span><span class=\"p\">).</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"se\">\\n</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n<span class=\"nx\">arr</span><span class=\"p\">.</span><span class=\"nx\">map</span><span class=\"p\">(</span><span class=\"nx\">x</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">x</span><span class=\"p\">.</span><span class=\"nx\">src</span><span class=\"p\">).</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"se\">\\n</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><code>斎 u658e</code> の異体字は32個登録されていて、右月になっている <code>u9f4b-02</code> の系統の <code>u9f4b-02</code> <code>u9f4b-02-var-001</code> <code>u9f4b-02-var-002</code> <code>u9f4b-02-var-003</code> の4つを除き、 <code>斎 u658e</code> の一文字足すと、29個確認された。</p>\n\n<table>\n<thead>\n<tr>\n<th>コード</th>\n<th>サイトリンク</th>\n<th>画像</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>u658e</td>\n<td><a href=\"https://glyphwiki.org/wiki/u658e\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u658e</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/2a697335453fb5871cd563201a96175a97b0800f/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f753635386540322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu658e%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=06510840f515737ec7437929d582f9df\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u658e@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu658e%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=370a00b8ed0ebda70fe0ac24958e1797 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/dbaaefcc95990ec09519ddfbd395b489d83d6712/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f753966346240342e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b%404.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b34a44a2adc0129e1f6c434cb282b175\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b@4.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b%404.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ac71cef71bcb0f5570a51e3070cde1bf 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-02</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-02\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-02</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/6b07c87c2674d015ae3e52a9eef616e462961691/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d303240332e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-02%403.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6b9813f0f1b16c972b9dfa3934adae91\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-02@3.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-02%403.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4f77d22c2c694d158d36eae849030039 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-02-var-001</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-02-var-001\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-02-var-001</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/e7c27c5eca2fa87a91f8b5511cbc1e3c95bd54bd/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d30322d7661722d30303140322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-02-var-001%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bfa6fdf2b49caaf8951a6adf7d3def64\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-02-var-001@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-02-var-001%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=38a6ccc42faf8d78a7993e7e5172384b 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-02-var-002</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-02-var-002\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-02-var-002</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/df245d36ac31ca35140e8b3f67b18587dffdaa69/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d30322d7661722d30303240322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-02-var-002%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e03e46d55db89c162678d435ce76a5d1\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-02-var-002@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-02-var-002%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=63990300939b7893b81271e58dba6365 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-02-var-003</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-02-var-003\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-02-var-003</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/5a2dcec33174ec8f90e83c44ee1aef48fb94e4b8/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d30322d7661722d30303340322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-02-var-003%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=30a3c40719195142532dbb51da249260\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-02-var-003@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-02-var-003%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=505cbb27d4641f6d2739922d54270415 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-itaiji-001</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-itaiji-001\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-itaiji-001</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/60121fea5aeb2a6b15b41ca1f9c149434a830166/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d697461696a692d30303140312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-itaiji-001%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=152dcc4335da6412bf0a9689b3683758\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-itaiji-001@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-itaiji-001%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a6476e8501572a2a8087fbec66889b8e 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-j</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-j\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-j</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/8eb299e0255e12e38f07a5235f580c2ef6fbdfe7/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d6a40322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-j%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=060bf4ea621d09835fb6fbfdbd436815\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-j@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-j%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=45fd12bf287e9ea1fbc02ac68731001c 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-ue0101</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-ue0101\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-ue0101</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/407079942651ff23d8b9fcf9b78a3282b37dca81/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d75653031303140322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-ue0101%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8f4a14919c6af2c72136547c44161908\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-ue0101@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-ue0101%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=345cdb837ba399911d9a7f44bb9daef8 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-var-001</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-var-001\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-var-001</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/3fab975199c73678d6a91369e5996a2e4ab7a4f3/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d7661722d30303140322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-001%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8d5333a9b293ba7470ff7b674ff71ac2\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-var-001@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-001%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=48b7ca8a31e5e9b92366b7a60d2b9183 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-var-002</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-var-002\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-var-002</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/8b74fca0857080e84355d907a7cabb5bc8c6a87a/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d7661722d30303240322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-002%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=95ecd57c98b73a741a62857e9207bfa6\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-var-002@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-002%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d29c7758346f961ef97817d2dfa70af9 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-var-003</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-var-003\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-var-003</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/aeb620309e2119c4dcea8b4f4878a35ae6639ad0/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d7661722d30303340322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-003%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=700ad20d7374b6b6e718f2a70ce80d1c\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-var-003@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-003%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=01b3b054d249d5ee9692934d59381e86 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-var-004</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-var-004\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-var-004</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/9ecc31478598911b4d4e091ace90515cb5351814/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d7661722d30303440332e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-004%403.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bab293517678a1b4640827bcfab0eb35\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-var-004@3.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-004%403.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ab312b28209d2959a8dbc2e288037228 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u9f4b-var-005</td>\n<td><a href=\"https://glyphwiki.org/wiki/u9f4b-var-005\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4b-var-005</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/e486f1689d286b08935f2b769ca77d710f11b1e6/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d7661722d30303540312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-005%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0c524a5355ca40e8fc32056bc8617d28\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-var-005@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-005%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=584a0bcff269da8dfacdb73171922c86 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>cbeta-30389</td>\n<td><a href=\"https://glyphwiki.org/wiki/cbeta-30389\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/cbeta-30389</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/119ad0708899e6f8307c57dfdcd98b2179ac6fe0/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f63626574612d333033383940312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fcbeta-30389%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=df280d00847414df7b97236602a5277c\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/cbeta-30389@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fcbeta-30389%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f851146a45e93356ef7c330d7d5eda00 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>cbeta-31099</td>\n<td><a href=\"https://glyphwiki.org/wiki/cbeta-31099\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/cbeta-31099</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/4dcd80818ab02bd915c619820f550c78ba18cd1e/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f63626574612d333130393940322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fcbeta-31099%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=74efe2ffe8b4cb5387f8eacd7dd3bf7d\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/cbeta-31099@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fcbeta-31099%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bc8554420c91c2e1cfd2cd3ecd87d769 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>jmj-059306</td>\n<td><a href=\"https://glyphwiki.org/wiki/jmj-059306\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/jmj-059306</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/4ed98e91a6756b4a897d1aa067de305e519ec3bc/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f6a6d6a2d30353933303640322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjmj-059306%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fca62b5e7b0285638f3e0eb55c8738c8\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/jmj-059306@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjmj-059306%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=41c9ed236c09a75b76da308951ceb836 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>juki-ad38</td>\n<td><a href=\"https://glyphwiki.org/wiki/juki-ad38\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/juki-ad38</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/e067bfd36c28c28453eaf9310def171910da53a7/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f6a756b692d6164333840322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-ad38%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3fb5722a20d19147eb6b6a3c20648729\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/juki-ad38@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-ad38%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0943d240ade95fef80e75a1514760017 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>juki-ad39</td>\n<td><a href=\"https://glyphwiki.org/wiki/juki-ad39\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/juki-ad39</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/ecea2f195d9ac192df7275fec4a7a355bd4e3016/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f6a756b692d6164333940342e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-ad39%404.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c0aa6e1373a2468a35c5aed8dd39c448\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/juki-ad39@4.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-ad39%404.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8cf70c6d3ff46c44e9f89d1b94bf3468 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>juki-b720</td>\n<td><a href=\"https://glyphwiki.org/wiki/juki-b720\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/juki-b720</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/c95bb7e0ce4a53e964ab91c4e86e693b9f6a7815/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f6a756b692d6237323040322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-b720%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1b74b845e7f8fe5b3c806ae3271fbedb\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/juki-b720@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-b720%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f570c560b445df5ddd2f991c2c70db61 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>koseki-548960</td>\n<td><a href=\"https://glyphwiki.org/wiki/koseki-548960\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/koseki-548960</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/d1cddd56abe82e8910253e384386f3de917935b3/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f6b6f73656b692d35343839363040322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fkoseki-548960%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=19b2aa0f15a28f7cdb23b89821b15ced\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/koseki-548960@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fkoseki-548960%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ff3f7e0289a7ebcf639c69c5429c54ac 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>toki-01001950</td>\n<td><a href=\"https://glyphwiki.org/wiki/toki-01001950\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/toki-01001950</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/7835a65ce2c182ae481eec07ef3aa955c88f922d/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f746f6b692d303130303139353040332e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Ftoki-01001950%403.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bbbdad94904103ca9106326b6fc9281a\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/toki-01001950@3.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Ftoki-01001950%403.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c5c4bd65bbe396b7eba40d98fefdfd6b 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>toki-01066230</td>\n<td><a href=\"https://glyphwiki.org/wiki/toki-01066230\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/toki-01066230</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/1fd35958d133bba6c7577a161c5be0f5953d4116/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f746f6b692d303130363632333040322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Ftoki-01066230%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e112315794fe2d2eb120ce65ff725c87\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/toki-01066230@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Ftoki-01066230%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=eac9a4fdb9b0a74d3f4deada7fb0c7df 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f</td>\n<td><a href=\"https://glyphwiki.org/wiki/u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/dd149f5a63396708d5a74ea57ad9fbabc6c0f11c/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75326666352d75326666332d75346561302d75366333362d6364702d383963362d753563306640312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1ade40fae73c9354958d23aee279e962\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e2a0109bcdbbb679c8556d428397772c 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>zihai-014012</td>\n<td><a href=\"https://glyphwiki.org/wiki/zihai-014012\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/zihai-014012</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/34375fe3cbd78de2c35ee5c09f2fbee0b8391fb2/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30313430313240312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014012%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=be41838fdbc1407aae6a79e00ffda7a3\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-014012@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014012%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7dcbbe262d5441e69617849cb75bfcce 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>zihai-014103</td>\n<td><a href=\"https://glyphwiki.org/wiki/zihai-014103\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/zihai-014103</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/7f9f37ceef6fc5159a646c7035315e2bba425b45/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30313431303340312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014103%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4944c29ca2cb8280fc5c6909c65ed5c7\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-014103@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014103%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=de790450c914d0b935f3757ab6b59bda 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>zihai-014137</td>\n<td><a href=\"https://glyphwiki.org/wiki/zihai-014137\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/zihai-014137</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/213a1a8366c4755d54700973888516ad03368389/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30313431333740312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014137%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6f0536760f00c482db51b9d4a84daece\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-014137@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014137%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e82d9d100e28e5d268977c57ba557b28 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>zihai-014217</td>\n<td><a href=\"https://glyphwiki.org/wiki/zihai-014217\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/zihai-014217</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/5d85138f38d9c3ef0a210b8cf43b95e7d316a530/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30313432313740312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014217%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2776c29fbb38fce0f33e09091bea9f45\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-014217@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014217%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=02344a5c02708fe1ad78bb43be2658a4 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>zihai-014218</td>\n<td><a href=\"https://glyphwiki.org/wiki/zihai-014218\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/zihai-014218</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/da334ba24a42d036a63f9827f48e3b0b1b96d4e5/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30313432313840312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014218%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=99e289bb09dfe3e639aa5fbf06a29856\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-014218@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014218%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=78ccbf773d5ee7e8fb40306a933d11c9 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>zihai-014223</td>\n<td><a href=\"https://glyphwiki.org/wiki/zihai-014223\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/zihai-014223</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/a3c6432a036a02576bf4292ddf13641234633929/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30313432323340312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014223%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8bc518030611bccb8be0a04822d8c525\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-014223@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014223%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9d42543aadfe4ff6264cc6b6e422edae 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>zihai-020358</td>\n<td><a href=\"https://glyphwiki.org/wiki/zihai-020358\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/zihai-020358</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/85cb5cd5adf0fb4d79381c0dc9d859bd5f17edb2/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30323033353840322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-020358%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=244f6da5c01156101d5933ec8d6dab65\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-020358@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-020358%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0aff23e05b283dd0573010895826e11b 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>hkcs_m9f4b</td>\n<td><a href=\"https://glyphwiki.org/wiki/hkcs_m9f4b\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/hkcs_m9f4b</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/af1c75f58f09342cef48106c0ec74778f3e253ce/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f686b63735f6d3966346240322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fhkcs_m9f4b%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=dba847ddf959f8df98da1cb90b5a1d56\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/hkcs_m9f4b@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fhkcs_m9f4b%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bcca686113971147afae72671e2d46d2 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td>hkcs_u9f4b</td>\n<td><a href=\"https://glyphwiki.org/wiki/hkcs_u9f4b\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/hkcs_u9f4b</a></td>\n<td><a href=\"https://camo.qiitausercontent.com/d719040c84426d054fbdbe1c7ac6e80b2371fccd/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f686b63735f753966346240312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fhkcs_u9f4b%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cd2e70243c2d06fc87d6e6b7bdb740f8\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/hkcs_u9f4b@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fhkcs_u9f4b%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5bfbe39a472af6d46f59b62f14fce619 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n\n<p>そして残念ながらこれらの字体は、ほとんどがUnicodeには登録されていなくて</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>[異体字（常用漢字表）]\n[異体字（戸籍統一文字）]\n[異體字（民國教育部）]\n[異體字（漢語大字典）]\n[関連字（JIS X 0212）]\n</code></pre></div></div>\n\n<p>などに定義されているみたいである。</p>\n\n<p><code>koseki-548960</code> となっている文字の正確な情報は <code>法務省の戸籍統一文字情報</code> <a href=\"http://kosekimoji.moj.go.jp/kosekimojidb/mjko/PeopleTop/EXECUTE\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://kosekimoji.moj.go.jp/kosekimojidb/mjko/PeopleTop/EXECUTE</a> から探すことになる。</p>\n\n<p>もしくは後術する <a href=\"https://mojikiban.ipa.go.jp/search/code\" rel=\"nofollow noopener\" target=\"_blank\">MJ文字情報検索システム | 独立行政法人 情報処理推進機構 - IPA</a> から探す。</p>\n\n<h3>\n<span id=\"斉-の異体字関連文字データを抽出する\" class=\"fragment\"></span><a href=\"#%E6%96%89-%E3%81%AE%E7%95%B0%E4%BD%93%E5%AD%97%E9%96%A2%E9%80%A3%E6%96%87%E5%AD%97%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E6%8A%BD%E5%87%BA%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a><code>斉</code> の異体字・関連文字データを抽出する</h3>\n\n<p>とりあえず関連データを引っ張ってきた。少なかったのといろいろあって手作業。</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: left\">コード</th>\n<th style=\"text-align: left\">サイトリンク</th>\n<th style=\"text-align: left\">画像</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left\">u6589</td>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u6589\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u6589</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/45ca019660ab966c4fd416bc89c3d4f12abfb18c/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75363538392e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu6589.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a9fc9a07899674e440df0f960b81088a\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u6589.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu6589.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5e5f57b37992274a8c52e1806bdd3e50 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: left\">u658a</td>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u658a\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u658a</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/9425fa9cbea0f33f8395a7a57c7b462ee7cb5686/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75363538612e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu658a.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3c07d83775efae2ef81d0ef45bf612c1\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u658a.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu658a.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=39bccda2235ddf4297b48d508a013e8f 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: left\">u4e9d</td>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u4e9d\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u4e9d</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/ba7792835d0d038b6fb48f906364ddfaa56690a0/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75346539642e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu4e9d.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=67a0d35b3a1e3e35378292079915da13\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u4e9d.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu4e9d.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=adfd634a26ef2a4d4cddbbe47902ba22 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: left\">u9f4a</td>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u9f4a\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u9f4a</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/372d49afc70a55b19e29e8bc98fe3fcfe441cdfa/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634612e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4a.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5f7273db3f6e31f77fe9546667843b62\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4a.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4a.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=83f0c4ffc7c066aee6346c1f01abddae 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: left\">u2bfed</td>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u2bfed\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u2bfed</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/1520d2201e2a6c71775df8a9d6f74b353625babd/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7532626665642e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu2bfed.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=29c33704f824a9554bc2444920122f2b\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u2bfed.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu2bfed.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=270202f385ef0b2c1c4e3e820335a1e1 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: left\">u2d918</td>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u2d918\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u2d918</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/35f6f757f85b3c0bbd090d466f009b634cf9ee16/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7532643931382e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu2d918.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0091a103b99804e9dbc81936809b6284\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u2d918.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu2d918.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c3009162d569e51032b82c30a73fd6e3 1x\" loading=\"lazy\"></a></td>\n</tr>\n<tr>\n<td style=\"text-align: left\">u2ebbc</td>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u2ebbc\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://glyphwiki.org/wiki/u2ebbc</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/35fe53acf65767213c1f7fc6786e89c190348fab/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7532656262632e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu2ebbc.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=61a91206490f1a2f82feb82e0ecac6ce\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u2ebbc.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu2ebbc.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bda757070a60e9a647b6651889d3279a 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n\n<p>unicodeにありそうな上4つを見てみた。下3つは桁が一つ多い…？</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"nb\">String</span><span class=\"p\">.</span><span class=\"nx\">fromCharCode</span><span class=\"p\">(</span><span class=\"mh\">0x6589</span><span class=\"p\">)</span>\n<span class=\"dl\">\"</span><span class=\"s2\">斉</span><span class=\"dl\">\"</span>\n<span class=\"nb\">String</span><span class=\"p\">.</span><span class=\"nx\">fromCharCode</span><span class=\"p\">(</span><span class=\"mh\">0x658a</span><span class=\"p\">)</span>\n<span class=\"dl\">\"</span><span class=\"s2\">斊</span><span class=\"dl\">\"</span>\n<span class=\"nb\">String</span><span class=\"p\">.</span><span class=\"nx\">fromCharCode</span><span class=\"p\">(</span><span class=\"mh\">0x4e9d</span><span class=\"p\">)</span>\n<span class=\"dl\">\"</span><span class=\"s2\">亝</span><span class=\"dl\">\"</span>\n<span class=\"nb\">String</span><span class=\"p\">.</span><span class=\"nx\">fromCharCode</span><span class=\"p\">(</span><span class=\"mh\">0x9f4a</span><span class=\"p\">)</span>\n<span class=\"dl\">\"</span><span class=\"s2\">齊</span><span class=\"dl\">\"</span>\n<span class=\"nb\">String</span><span class=\"p\">.</span><span class=\"nx\">fromCharCode</span><span class=\"p\">(</span><span class=\"mh\">0x2bfed</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<h3>\n<span id=\"mj文字情報検索システム--独立行政法人-情報処理推進機構---ipa\" class=\"fragment\"></span><a href=\"#mj%E6%96%87%E5%AD%97%E6%83%85%E5%A0%B1%E6%A4%9C%E7%B4%A2%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0--%E7%8B%AC%E7%AB%8B%E8%A1%8C%E6%94%BF%E6%B3%95%E4%BA%BA-%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86%E6%8E%A8%E9%80%B2%E6%A9%9F%E6%A7%8B---ipa\"><i class=\"fa fa-link\"></i></a>MJ文字情報検索システム | 独立行政法人 情報処理推進機構 - IPA</h3>\n\n<p><qiita-embed-ogp src=\"https://mojikiban.ipa.go.jp/search/code\"></qiita-embed-ogp></p>\n\n<p>良い感じのサイトを見つけた。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f01058529d21ae4f9579fa791548f7e2670b5dfb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f30376533306665332d336231312d313039302d353532342d6566663134626166356631362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F07e30fe3-3b11-1090-5524-eff14baf5f16.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=684d26aa27450812b1a060c21805d414\" alt=\"Screenshot from 2019-11-29 18-58-02.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/07e30fe3-3b11-1090-5524-eff14baf5f16.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F07e30fe3-3b11-1090-5524-eff14baf5f16.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=01dcc10532b133400127e0da137d4e0e 1x\" loading=\"lazy\"></a></p>\n\n<p>IPAが文字情報を統一的に調べられるようにしている。信頼できそう。</p>\n\n<h3>\n<span id=\"なんとなく細かいところを比べてみる\" class=\"fragment\"></span><a href=\"#%E3%81%AA%E3%82%93%E3%81%A8%E3%81%AA%E3%81%8F%E7%B4%B0%E3%81%8B%E3%81%84%E3%81%A8%E3%81%93%E3%82%8D%E3%82%92%E6%AF%94%E3%81%B9%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>なんとなく細かいところを比べてみる</h3>\n\n<p><code>斎 の異体字・関連文字データ抽出する</code> で抽出したデータの細かいところを見ていきましょう。</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: left\">コード</th>\n<th style=\"text-align: left\">画像</th>\n<th style=\"text-align: left\">冠</th>\n<th style=\"text-align: left\">左</th>\n<th style=\"text-align: left\">真ん中</th>\n<th style=\"text-align: left\">右</th>\n<th style=\"text-align: left\">下</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u9f4b\" rel=\"nofollow noopener\" target=\"_blank\">u9f4b</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/dbaaefcc95990ec09519ddfbd395b489d83d6712/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f753966346240342e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b%404.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b34a44a2adc0129e1f6c434cb282b175\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b@4.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b%404.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ac71cef71bcb0f5570a51e3070cde1bf 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①普通の鍋蓋</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①氏みたいなやつ</td>\n<td style=\"text-align: left\">① 示で上が左右くっついている、下はねなし</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u9f4b-itaiji-001\" rel=\"nofollow noopener\" target=\"_blank\">u9f4b-itaiji-001</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/60121fea5aeb2a6b15b41ca1f9c149434a830166/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d697461696a692d30303140312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-itaiji-001%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=152dcc4335da6412bf0a9689b3683758\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-itaiji-001@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-itaiji-001%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a6476e8501572a2a8087fbec66889b8e 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">②ちょんと鍋蓋</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">了</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">② 普通の示、下はねあり</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u9f4b-j\" rel=\"nofollow noopener\" target=\"_blank\">u9f4b-j</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/8eb299e0255e12e38f07a5235f580c2ef6fbdfe7/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d6a40322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-j%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=060bf4ea621d09835fb6fbfdbd436815\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-j@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-j%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=45fd12bf287e9ea1fbc02ac68731001c 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">①</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u9f4b-ue0101\" rel=\"nofollow noopener\" target=\"_blank\">u9f4b-ue0101</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/407079942651ff23d8b9fcf9b78a3282b37dca81/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d75653031303140322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-ue0101%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8f4a14919c6af2c72136547c44161908\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-ue0101@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-ue0101%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=345cdb837ba399911d9a7f44bb9daef8 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">了</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">①</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u9f4b-var-001\" rel=\"nofollow noopener\" target=\"_blank\">u9f4b-var-001</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/3fab975199c73678d6a91369e5996a2e4ab7a4f3/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d7661722d30303140322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-001%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8d5333a9b293ba7470ff7b674ff71ac2\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-var-001@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-001%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=48b7ca8a31e5e9b92366b7a60d2b9183 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">⑤ ①の下跳ねあり版</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u9f4b-var-002\" rel=\"nofollow noopener\" target=\"_blank\">u9f4b-var-002</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/8b74fca0857080e84355d907a7cabb5bc8c6a87a/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d7661722d30303240322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-002%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=95ecd57c98b73a741a62857e9207bfa6\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-var-002@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-002%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d29c7758346f961ef97817d2dfa70af9 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">③ ①の示すに見せかけて右側がくっついてない</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u9f4b-var-003\" rel=\"nofollow noopener\" target=\"_blank\">u9f4b-var-003</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/aeb620309e2119c4dcea8b4f4878a35ae6639ad0/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d7661722d30303340322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-003%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=700ad20d7374b6b6e718f2a70ce80d1c\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-var-003@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-003%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=01b3b054d249d5ee9692934d59381e86 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">④ ③の小の下がはねてない</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u9f4b-var-004\" rel=\"nofollow noopener\" target=\"_blank\">u9f4b-var-004</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/9ecc31478598911b4d4e091ace90515cb5351814/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d7661722d30303440332e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-004%403.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bab293517678a1b4640827bcfab0eb35\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-var-004@3.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-004%403.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ab312b28209d2959a8dbc2e288037228 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">②</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u9f4b-var-005\" rel=\"nofollow noopener\" target=\"_blank\">u9f4b-var-005</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/e486f1689d286b08935f2b769ca77d710f11b1e6/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75396634622d7661722d30303540312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-005%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0c524a5355ca40e8fc32056bc8617d28\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u9f4b-var-005@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu9f4b-var-005%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=584a0bcff269da8dfacdb73171922c86 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">⑥ ①で上の右側だけくっついてない</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/jmj-059306\" rel=\"nofollow noopener\" target=\"_blank\">jmj-059306</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/4ed98e91a6756b4a897d1aa067de305e519ec3bc/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f6a6d6a2d30353933303640322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjmj-059306%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fca62b5e7b0285638f3e0eb55c8738c8\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/jmj-059306@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjmj-059306%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=41c9ed236c09a75b76da308951ceb836 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">夕</td>\n<td style=\"text-align: left\">了</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">⑤</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/juki-ad38\" rel=\"nofollow noopener\" target=\"_blank\">juki-ad38</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/e067bfd36c28c28453eaf9310def171910da53a7/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f6a756b692d6164333840322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-ad38%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3fb5722a20d19147eb6b6a3c20648729\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/juki-ad38@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-ad38%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0943d240ade95fef80e75a1514760017 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">了</td>\n<td style=\"text-align: left\">②氏のパート2</td>\n<td style=\"text-align: left\">②</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/juki-ad39\" rel=\"nofollow noopener\" target=\"_blank\">juki-ad39</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/ecea2f195d9ac192df7275fec4a7a355bd4e3016/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f6a756b692d6164333940342e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-ad39%404.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c0aa6e1373a2468a35c5aed8dd39c448\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/juki-ad39@4.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-ad39%404.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8cf70c6d3ff46c44e9f89d1b94bf3468 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">夕</td>\n<td style=\"text-align: left\">了</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">②</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/juki-b720\" rel=\"nofollow noopener\" target=\"_blank\">juki-b720</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/c95bb7e0ce4a53e964ab91c4e86e693b9f6a7815/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f6a756b692d6237323040322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-b720%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1b74b845e7f8fe5b3c806ae3271fbedb\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/juki-b720@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fjuki-b720%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f570c560b445df5ddd2f991c2c70db61 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">⑦ ②の下はねなし版</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/koseki-548960\" rel=\"nofollow noopener\" target=\"_blank\">koseki-548960</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/d1cddd56abe82e8910253e384386f3de917935b3/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f6b6f73656b692d35343839363040322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fkoseki-548960%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=19b2aa0f15a28f7cdb23b89821b15ced\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/koseki-548960@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fkoseki-548960%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ff3f7e0289a7ebcf639c69c5429c54ac 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">了</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">②</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/toki-01001950\" rel=\"nofollow noopener\" target=\"_blank\">toki-01001950</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/7835a65ce2c182ae481eec07ef3aa955c88f922d/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f746f6b692d303130303139353040332e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Ftoki-01001950%403.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bbbdad94904103ca9106326b6fc9281a\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/toki-01001950@3.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Ftoki-01001950%403.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c5c4bd65bbe396b7eba40d98fefdfd6b 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">冫</td>\n<td style=\"text-align: left\">了</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">⑦</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/toki-01066230\" rel=\"nofollow noopener\" target=\"_blank\">toki-01066230</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/1fd35958d133bba6c7577a161c5be0f5953d4116/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f746f6b692d303130363632333040322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Ftoki-01066230%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e112315794fe2d2eb120ce65ff725c87\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/toki-01066230@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Ftoki-01066230%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=eac9a4fdb9b0a74d3f4deada7fb0c7df 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">②</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f\" rel=\"nofollow noopener\" target=\"_blank\">u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/dd149f5a63396708d5a74ea57ad9fbabc6c0f11c/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f75326666352d75326666332d75346561302d75366333362d6364702d383963362d753563306640312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1ade40fae73c9354958d23aee279e962\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fu2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e2a0109bcdbbb679c8556d428397772c 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">水と永の間</td>\n<td style=\"text-align: left\">水と永の間</td>\n<td style=\"text-align: left\">水と永の間</td>\n<td style=\"text-align: left\">①</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/zihai-014137\" rel=\"nofollow noopener\" target=\"_blank\">zihai-014137</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/213a1a8366c4755d54700973888516ad03368389/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30313431333740312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014137%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6f0536760f00c482db51b9d4a84daece\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-014137@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014137%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e82d9d100e28e5d268977c57ba557b28 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">②</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">⑧ 丙みたいなやつ</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/zihai-014217\" rel=\"nofollow noopener\" target=\"_blank\">zihai-014217</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/5d85138f38d9c3ef0a210b8cf43b95e7d316a530/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30313432313740312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014217%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2776c29fbb38fce0f33e09091bea9f45\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-014217@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014217%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=02344a5c02708fe1ad78bb43be2658a4 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">②</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">⑨ 米</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/zihai-014218\" rel=\"nofollow noopener\" target=\"_blank\">zihai-014218</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/da334ba24a42d036a63f9827f48e3b0b1b96d4e5/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30313432313840312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014218%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=99e289bb09dfe3e639aa5fbf06a29856\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-014218@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014218%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=78ccbf773d5ee7e8fb40306a933d11c9 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">②</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">⑨</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/zihai-014223\" rel=\"nofollow noopener\" target=\"_blank\">zihai-014223</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/a3c6432a036a02576bf4292ddf13641234633929/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f7a696861692d30313432323340312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014223%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8bc518030611bccb8be0a04822d8c525\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/zihai-014223@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fzihai-014223%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9d42543aadfe4ff6264cc6b6e422edae 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">②</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">マ</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">⑨</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/hkcs_m9f4b\" rel=\"nofollow noopener\" target=\"_blank\">hkcs_m9f4b</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/af1c75f58f09342cef48106c0ec74778f3e253ce/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f686b63735f6d3966346240322e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fhkcs_m9f4b%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=dba847ddf959f8df98da1cb90b5a1d56\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/hkcs_m9f4b@2.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fhkcs_m9f4b%402.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bcca686113971147afae72671e2d46d2 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">①</td>\n</tr>\n<tr>\n<td style=\"text-align: left\"><a href=\"https://glyphwiki.org/wiki/hkcs_u9f4b\" rel=\"nofollow noopener\" target=\"_blank\">hkcs_u9f4b</a></td>\n<td style=\"text-align: left\"><a href=\"https://camo.qiitausercontent.com/d719040c84426d054fbdbe1c7ac6e80b2371fccd/68747470733a2f2f676c79706877696b692e6f72672f676c7970682f686b63735f753966346240312e353070782e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fhkcs_u9f4b%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cd2e70243c2d06fc87d6e6b7bdb740f8\" alt=\"\" data-canonical-src=\"https://glyphwiki.org/glyph/hkcs_u9f4b@1.50px.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fglyphwiki.org%2Fglyph%2Fhkcs_u9f4b%401.50px.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5bfbe39a472af6d46f59b62f14fce619 1x\" loading=\"lazy\"></a></td>\n<td style=\"text-align: left\">②</td>\n<td style=\"text-align: left\">刀</td>\n<td style=\"text-align: left\">Y</td>\n<td style=\"text-align: left\">①</td>\n<td style=\"text-align: left\">⑩ ①と②の中間くらい</td>\n</tr>\n</tbody>\n</table>\n\n<p>作っている途中(23:11)で力ついて途中適当になりました。なんか雰囲気たくさん種類あるんだなーーーくらいに思っておいて、正確さは求めないでください。</p>\n\n<h2>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n\n<p>長い記事を読んでいただきありがとうございました！！！</p>\n\n<p>サイトウは誤字から生まれたのはちょっとおもしろかったです。ｗ</p>\n\n<p>お疲れ様でした。！！！</p>\n\n<p><a href=\"%E8%87%AA%E5%88%86%E7%94%A8%E3%83%A1%E3%83%A2%E3%80%81%E3%83%87%E3%83%BC%E3%82%BF%E5%8A%A0%E5%B7%A5%E7%94%A8%E3%82%B9%E3%83%97%E3%83%AC%E3%83%83%E3%83%89%E3%82%B7%E3%83%BC%E3%83%88%E3%81%B8%E3%81%AE%E3%83%AA%E3%83%B3%E3%82%AF\"></a><br>\n<a href=\"https://docs.google.com/spreadsheets/u/1/d/1JpRoYkzAdgChoLRdMXnJ8KMGMK1klVzg86FJxuClnyY/edit#gid=205306604\" rel=\"nofollow noopener\" target=\"_blank\"></a></p>\n\n<p>.</p>\n","body":"# 異体字の世界 `サイトウ`\n\nこんにちは。オープンロジの @ykhirao です。こちらは [OPENLOGI Advent Calendar 2019](https://qiita.com/advent-calendar/2019/openlogi) 4日目の記事になります。\n\n\n内容については、以前 [pͪoͣnͬpͣoͥnͭpͣa͡inͥを支える技術 - Qiita](https://qiita.com/ykhirao/items/9ca1fbd294883e06dbd6) という記事を書かせてもらったので、その続きでまた文字コードを扱った記事を書いていきたいと思います。どうぞ最後までよろしくお願いします！！\n\n\n\n## 長いので結論\n\n戸籍統一文字情報では `斎藤` と `斉藤` は別の漢字として扱われているので、「サイトウさん、漢字はどのように書くのですか…？」と聞いたほうが無難な気がします。 ただ `斎藤` って書くと `62.2%` 正解で、 `斉藤` と書くと `30.3%` 正解になります。\n\n| 漢字 | 戸籍数（たぶん） | % |\n|:--|--:|--:|\n| 斎藤 | 150494 | 62.2 |\n| 斉藤 | 73424 | 30.3 |\n| 齋藤 | 17071 | 7.1 |\n| 齊藤 | 1111 | 0.5 |\n| 合計: | 242100 | 100 |\n\nまた法務省によると、旧自体と新字体が乗っていますので、\n\n```\n# 法務省\n齋藤 → (新字体) → 斎藤\n齊藤 → (新字体) → 斉藤\n```\n\nここも考慮すると `斎藤` と書くと `69.3%` 正解で、 `斉藤` と書くと `30.7%` 正解になります。\n\nまた子供のころに `斎` が難しかったので `斉` と書いていたケースも考えると、この二つの差は少し縮まりまるかもしれません。\n\nとりあえず確立論的には `斎` と書けば…なんとなく、あたるかも…しれない？\n（ちゃんと本人に確認とりましょう！！！）\n\n\n- [斉 | 法務省　戸籍統一文字情報　詳細表示](http://kosekimoji.moj.go.jp/kosekimojidb/mjko/PeopleList/EXECUTE?ihid_clickedButtonName=iimag_Moji&ihid_SelectedKskMjBng=548870&ihid_SearchCount=0&itxt_Yomi1=&itxt_Yomi2=&itxt_Yomi3=&islc_Jis=0&islc_Kakusu1=0&irdo_Code=1&itxt_Code=548870&ihid_SearchCount=1) の正字\n- [斎 | 法務省　戸籍統一文字情報　詳細表示](http://kosekimoji.moj.go.jp/kosekimojidb/mjko/PeopleList/EXECUTE?ihid_clickedButtonName=iimag_Moji&ihid_SelectedKskMjBng=548940&ihid_SearchCount=0&itxt_Yomi1=&itxt_Yomi2=&itxt_Yomi3=&islc_Jis=0&islc_Kakusu1=0&irdo_Code=1&itxt_Code=548940&ihid_SearchCount=1) の正字\n- 人数情報 [｢斎藤｣｢斉藤｣｢齋藤｣｢齊藤｣･･この差って何？ | 東洋経済オンライン](https://toyokeizai.net/articles/-/65709?page=2)\n\n## 拝啓 斎藤さん\n\n先日エンジニアとしてサイトウさんが入社したときに「サイトウのサイってどう書きますか…？ Unicodeで教えてください。」という、いつものあれが発生したのでそろそろサイトウについて理解してみようと思いました。\n\nまた以前に [『異体字の世界”ワタナベ”』| 漢検 漢字博物館・図書館 [漢字ミュージアム]](https://www.kanjimuseum.kyoto/news/post_73.html) というイベントがあったのでタイトルはそこから来ています。（展示にはいけてません…）\n\n## 周辺知識編 \n\n### Wikipedia\n(ここから クリエイティブ・コモンズ CC-BY-SA 3.0 のライセンス)\n\nWikipediaで一つの項目となっているのは `斎藤` と `斉藤` のみみたいです\n\n- https://ja.wikipedia.org/wiki/斎藤\n- https://ja.wikipedia.org/wiki/斉藤\n\nこの２つのWikipediaで重要なことは、 `斎藤` は **`「斎宮頭を務めた藤原氏」の略`** で、 `斉` についてはただの誤記説 **`(「斉」の文字に本来「さい」の読みがないことから斎藤の誤記が由来と言われる)`** が濃厚みたいです。\n\nまた法務省で定められている漢字としては、以下のように落ち着いているみたいです。\n\n旧字体|新字体|\n:--:|:--:\n齋|斎\n齊|斉\n\n(ここまで クリエイティブ・コモンズ CC-BY-SA 3.0 のライセンス)\n\nですので、現状 `斉` は `斎` の新字体ではないので、小学生のときに「簡単な方」として書いていたケースを除いて、`斉` は `斎` 2種類別の漢字として扱われているので正式な文章を書くときは2種類だけ気をつけたらよさそうです。\n\n\n(ここから クリエイティブ・コモンズ CC-BY-SA 3.0 のライセンス)\n\nまた[斎藤のページ](https://ja.wikipedia.org/wiki/斎藤) によると、斎の派生は31種類あるみたいで、画像がはられています。\n\n![](https://upload.wikimedia.org/wikipedia/commons/a/a1/齊異体字一覧.JPG)\n\n```\n// 画像の注釈として\n「斉藤」または「斎藤」の一文字目に使用される異体字はあわせて31種類あると言われている。\n```\n\nとありますが、それは後ほど出てくる `高信幸男氏` による調査による `\"西藤\",\"西塔\",\"才藤\",\"済藤\",\"西頭\",\"西等\",\"佐井藤\",\"再藤\"` なども含んだ話なので、はられている画像と説明が食い違っているように思えます。が一旦は無視します。\n\nまた31種以外にも `この他に例えば埼玉県の電話帳には齋の字の亠の下が刀丫氏の並びになっている齋藤姓が確認出来る。` との記載があり、どんどん派生しているのかもしれません。\n\n(ここまで クリエイティブ・コモンズ CC-BY-SA 3.0 のライセンス)\n\n\n### TBSテレビ『この差って何ですか？』\n\nまた [｢斎藤｣｢斉藤｣｢齋藤｣｢齊藤｣･･この差って何？ | 東洋経済オンライン](https://toyokeizai.net/articles/-/65709) で `名字研究家 高信幸男氏` からの情報がまとめられてますが、法務省が定めた見解とは少し違っていて\n\n```\n明治時代になると(略)国民全員に名字(略)多くの庶民が役所に行き、名字を申請した(略)\n\n(中略)\n\n役人はそれぞれ思い思いの｢サイトウ｣を書いてしまった(略)\n\n具体的には｢齋藤｣は旧字体で書いてしまったパターンで、｢齊藤｣は旧字体の書き間違い。そして｢斉藤｣は本来の｢斎藤｣の書き間違い、というのだ。\n```\n\nとあるので、 `斉` の派生は `斎` としているところが面白いです。\n\n```\n# 法務省\n齋 → 斎\n齊 → 斉\n\n# 高信幸男氏\n齋 → (書き間違い) → 齊\n↓\n↓ （新字体）\n↓\n斎 → (書き間違い) → 斉\n```\n\n真実はいつも一つだと思いますが、文明開化の音とともに闇に消え去ったと思います。\n\nまた｢サイトウ｣と読む姓が31種類存在しているみたいで、人数の多い順に `[\"斎藤\",\"斉藤\",\"齋藤\",\"齊藤\",\"西藤\",\"西塔\",\"才藤\",\"済藤\",\"西頭\",\"西等\",\"佐井藤\",\"再藤\"]` となっています。\n\n### 三省堂 ことばのコラム\n\n[第78回 「斎」と「齋」 | 人名用漢字の新字旧字（安岡 孝一） | 三省堂 ことばのコラム](https://dictionary.sanseido-publ.co.jp/column/%E7%AC%AC78%E5%9B%9E-%E3%80%8C%E6%96%8E%E3%80%8D%E3%81%A8%E3%80%8C%E9%BD%8B%E3%80%8D) によると `示` の横棒の長さの揺れが出生届を出すときにすごく揺れていたみたいで、平成22年11月30日 に正式に `改定常用漢字表` で今の `斎` になったみたいです。結構最近ですね。\n\n出来事|年代|漢字\n:--:|:--:|:--:\n標準漢字表|昭和17年6月17日|![示](https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new1.thumbnail.png)\n当用漢字表|昭和21年11月16日|![小](https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new2.thumbnail.png)\n戸籍法が改正|昭和23年1月1日|名付けに使用できるのは当用漢字表\n漢字コード 規格<BR>JIS C 6226<BR>(コンピュータ表記)|昭和53年1月1日|![示](https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new1.thumbnail.png)\n常用漢字表|昭和56年10月1日|![小](https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new2.thumbnail.png)\n名付けに使用|(S56 ~ H22)|![小](https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new2.thumbnail.png)\nコンピュータ表記|(S56 ~ H22)|![示](https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new1.thumbnail.png)\n改定常用漢字表<BR>コンピュータ表記と名付けでの表記が変わった|平成22年11月30日|![示](https://dictionary.sanseido-publ.co.jp/wp/wp-content/uploads/2010/12/078itsuki-new1.thumbnail.png)\n\n漢字とは面白いですね。\n\n### 調査と終えて今後の記事の目標\n\n- 斎という31字のユニコード特定\n\n以上踏まえてコードなどを追っていきましょう。\n\n## Unicodeを特定する\n\n### Google 日本語入力から探す\n\n`サイトウ` で変換できたそれっぽい字。（さんずいを除くと5字見つかった）\n\n```\n斎\n斉\n齋\n齊\n齎\n済\n濟\n```\n\n元の漢字|JS CODE|UTF-16 コード(10進数)|(16進数)\n|:-:|:-:|:-:|:-:|\n斎|'斎'.charCodeAt(0)|25998|658E\n斉|'斉'.charCodeAt(0)|25993|6589\n齋|'齋'.charCodeAt(0)|40779|9F4B\n齊|'齊'.charCodeAt(0)|40778|9F4A\n齎|'齎'.charCodeAt(0)|40782|9F4E\n済|'済'.charCodeAt(0)|28168|6E08\n濟|'濟'.charCodeAt(0)|28639|6FDF\n\n```js\n// MACだと command + alt + i で開発ツールが開くのでConsoleなどで試してください。\n$ '斎'.charCodeAt(0)\n25998\n\n$ String.fromCharCode(25998)\n\"斎\"\n\n$ String.fromCharCode(0x658E)\n\"斎\"\n```\n\n10進法でいうと `25998` と `40779` のあたりに `サイ` が固まってそうな雰囲気がしますね。\n\n### Unicodeと漢字をマッピングしてくれるサイトを探す\n\nhttps://glyphwiki.org/wiki/u658e\n\n> グリフウィキに登録されているグリフデータおよび記事は、誰もが自由に利用できることとします。あらゆる改変の有無に関わらず、また商業的な利用であっても、自由に利用、複製、再配布することができます。著作者表示も特に制限を設けません。新しいフォントのベースデータとして用いることや、そのままコピーしたものをフォントとして著作物とすることを妨げません。記事中に引用されている部分については、グリフウィキには著作権はありませんので引用元のライセンスを確認してください。\n> \n> https://glyphwiki.org/wiki/GlyphWiki:データ・記事のライセンス\n\nとても使いやすそうなライセンスなのでこのページをメインで調べてみようと思う。\n\n> グリフウィキを広めてください\n> 登録されているグリフの画像やフォントをどんどん利用してください。画像やフォントに直接リンクを張ってもかまいません。またグリフウィキの存在をクチコミでみんなに広めてください。\n> \n> https://glyphwiki.org/wiki/GlyphWiki:あなたにできること\n\nまたグリフウィキさんを広めるのは正義みたいなので、、私の代わりに使ってくれ。画像への直リンク可みたいなので使うことにする。\n\n先程の [`斎` へのリンク](https://glyphwiki.org/wiki/u658e)を確認する限り、Unicodeとして定義されているのは、さきほどあげた5種類の `サイ` だけなのではないかと思い初めてきた…。その他は `法務省` が規定する戸籍関連の字とか、中国語字体とか…なんかそういうのも含めている気がする。\n\n### `斎` の異体字・関連文字データ抽出する\n\nhttps://glyphwiki.org/wiki/u658e\n\n\n```js\n// データ作成\nconst td = document.querySelector('body > div.right_pane > div.right_body > div:nth-child(15) > table > tbody > tr:nth-child(2) > td:nth-child(3)')\nconst arr = [...td.querySelectorAll('a>img')]\narr.map(x => `${x.parentNode.href}\\t${x.parentNode.innerText.trim()}`).join('\\n')\narr.map(x => x.src).join('\\n')\n```\n\n`斎 u658e` の異体字は32個登録されていて、右月になっている `u9f4b-02` の系統の `u9f4b-02` `u9f4b-02-var-001` `u9f4b-02-var-002` `u9f4b-02-var-003` の4つを除き、 `斎 u658e` の一文字足すと、29個確認された。\n\nコード|サイトリンク|画像\n---|---|---\nu658e|https://glyphwiki.org/wiki/u658e|![](https://glyphwiki.org/glyph/u658e@2.50px.png)\nu9f4b|https://glyphwiki.org/wiki/u9f4b|![](https://glyphwiki.org/glyph/u9f4b@4.50px.png)\nu9f4b-02|https://glyphwiki.org/wiki/u9f4b-02|![](https://glyphwiki.org/glyph/u9f4b-02@3.50px.png)\nu9f4b-02-var-001|https://glyphwiki.org/wiki/u9f4b-02-var-001|![](https://glyphwiki.org/glyph/u9f4b-02-var-001@2.50px.png)\nu9f4b-02-var-002|https://glyphwiki.org/wiki/u9f4b-02-var-002|![](https://glyphwiki.org/glyph/u9f4b-02-var-002@2.50px.png)\nu9f4b-02-var-003|https://glyphwiki.org/wiki/u9f4b-02-var-003|![](https://glyphwiki.org/glyph/u9f4b-02-var-003@2.50px.png)\nu9f4b-itaiji-001|https://glyphwiki.org/wiki/u9f4b-itaiji-001|![](https://glyphwiki.org/glyph/u9f4b-itaiji-001@1.50px.png)\nu9f4b-j|https://glyphwiki.org/wiki/u9f4b-j|![](https://glyphwiki.org/glyph/u9f4b-j@2.50px.png)\nu9f4b-ue0101|https://glyphwiki.org/wiki/u9f4b-ue0101|![](https://glyphwiki.org/glyph/u9f4b-ue0101@2.50px.png)\nu9f4b-var-001|https://glyphwiki.org/wiki/u9f4b-var-001|![](https://glyphwiki.org/glyph/u9f4b-var-001@2.50px.png)\nu9f4b-var-002|https://glyphwiki.org/wiki/u9f4b-var-002|![](https://glyphwiki.org/glyph/u9f4b-var-002@2.50px.png)\nu9f4b-var-003|https://glyphwiki.org/wiki/u9f4b-var-003|![](https://glyphwiki.org/glyph/u9f4b-var-003@2.50px.png)\nu9f4b-var-004|https://glyphwiki.org/wiki/u9f4b-var-004|![](https://glyphwiki.org/glyph/u9f4b-var-004@3.50px.png)\nu9f4b-var-005|https://glyphwiki.org/wiki/u9f4b-var-005|![](https://glyphwiki.org/glyph/u9f4b-var-005@1.50px.png)\ncbeta-30389|https://glyphwiki.org/wiki/cbeta-30389|![](https://glyphwiki.org/glyph/cbeta-30389@1.50px.png)\ncbeta-31099|https://glyphwiki.org/wiki/cbeta-31099|![](https://glyphwiki.org/glyph/cbeta-31099@2.50px.png)\njmj-059306|https://glyphwiki.org/wiki/jmj-059306|![](https://glyphwiki.org/glyph/jmj-059306@2.50px.png)\njuki-ad38|https://glyphwiki.org/wiki/juki-ad38|![](https://glyphwiki.org/glyph/juki-ad38@2.50px.png)\njuki-ad39|https://glyphwiki.org/wiki/juki-ad39|![](https://glyphwiki.org/glyph/juki-ad39@4.50px.png)\njuki-b720|https://glyphwiki.org/wiki/juki-b720|![](https://glyphwiki.org/glyph/juki-b720@2.50px.png)\nkoseki-548960|https://glyphwiki.org/wiki/koseki-548960|![](https://glyphwiki.org/glyph/koseki-548960@2.50px.png)\ntoki-01001950|https://glyphwiki.org/wiki/toki-01001950|![](https://glyphwiki.org/glyph/toki-01001950@3.50px.png)\ntoki-01066230|https://glyphwiki.org/wiki/toki-01066230|![](https://glyphwiki.org/glyph/toki-01066230@2.50px.png)\nu2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f|https://glyphwiki.org/wiki/u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f|![](https://glyphwiki.org/glyph/u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f@1.50px.png)\nzihai-014012|https://glyphwiki.org/wiki/zihai-014012|![](https://glyphwiki.org/glyph/zihai-014012@1.50px.png)\nzihai-014103|https://glyphwiki.org/wiki/zihai-014103|![](https://glyphwiki.org/glyph/zihai-014103@1.50px.png)\nzihai-014137|https://glyphwiki.org/wiki/zihai-014137|![](https://glyphwiki.org/glyph/zihai-014137@1.50px.png)\nzihai-014217|https://glyphwiki.org/wiki/zihai-014217|![](https://glyphwiki.org/glyph/zihai-014217@1.50px.png)\nzihai-014218|https://glyphwiki.org/wiki/zihai-014218|![](https://glyphwiki.org/glyph/zihai-014218@1.50px.png)\nzihai-014223|https://glyphwiki.org/wiki/zihai-014223|![](https://glyphwiki.org/glyph/zihai-014223@1.50px.png)\nzihai-020358|https://glyphwiki.org/wiki/zihai-020358|![](https://glyphwiki.org/glyph/zihai-020358@2.50px.png)\nhkcs_m9f4b|https://glyphwiki.org/wiki/hkcs_m9f4b|![](https://glyphwiki.org/glyph/hkcs_m9f4b@2.50px.png)\nhkcs_u9f4b|https://glyphwiki.org/wiki/hkcs_u9f4b|![](https://glyphwiki.org/glyph/hkcs_u9f4b@1.50px.png)\n\nそして残念ながらこれらの字体は、ほとんどがUnicodeには登録されていなくて\n\n```\n[異体字（常用漢字表）]\n[異体字（戸籍統一文字）]\n[異體字（民國教育部）]\n[異體字（漢語大字典）]\n[関連字（JIS X 0212）]\n```\n\nなどに定義されているみたいである。\n\n`koseki-548960` となっている文字の正確な情報は `法務省の戸籍統一文字情報` http://kosekimoji.moj.go.jp/kosekimojidb/mjko/PeopleTop/EXECUTE から探すことになる。\n\nもしくは後術する [MJ文字情報検索システム | 独立行政法人 情報処理推進機構 - IPA](https://mojikiban.ipa.go.jp/search/code) から探す。\n\n### `斉` の異体字・関連文字データを抽出する\n\nとりあえず関連データを引っ張ってきた。少なかったのといろいろあって手作業。\n\n| コード | サイトリンク | 画像 |\n|:--|:--|:--|\n| u6589 | https://glyphwiki.org/wiki/u6589 | ![](https://glyphwiki.org/glyph/u6589.50px.png) |\n| u658a | https://glyphwiki.org/wiki/u658a | ![](https://glyphwiki.org/glyph/u658a.50px.png) |\n| u4e9d | https://glyphwiki.org/wiki/u4e9d | ![](https://glyphwiki.org/glyph/u4e9d.50px.png) |\n| u9f4a | https://glyphwiki.org/wiki/u9f4a | ![](https://glyphwiki.org/glyph/u9f4a.50px.png) |\n| u2bfed | https://glyphwiki.org/wiki/u2bfed | ![](https://glyphwiki.org/glyph/u2bfed.50px.png) |\n| u2d918 | https://glyphwiki.org/wiki/u2d918 | ![](https://glyphwiki.org/glyph/u2d918.50px.png) |\n| u2ebbc | https://glyphwiki.org/wiki/u2ebbc | ![](https://glyphwiki.org/glyph/u2ebbc.50px.png) |\n\nunicodeにありそうな上4つを見てみた。下3つは桁が一つ多い…？\n\n```js\nString.fromCharCode(0x6589)\n\"斉\"\nString.fromCharCode(0x658a)\n\"斊\"\nString.fromCharCode(0x4e9d)\n\"亝\"\nString.fromCharCode(0x9f4a)\n\"齊\"\nString.fromCharCode(0x2bfed)\n```\n\n### MJ文字情報検索システム | 独立行政法人 情報処理推進機構 - IPA\n\nhttps://mojikiban.ipa.go.jp/search/code\n\n良い感じのサイトを見つけた。\n\n![Screenshot from 2019-11-29 18-58-02.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/07e30fe3-3b11-1090-5524-eff14baf5f16.png)\n\nIPAが文字情報を統一的に調べられるようにしている。信頼できそう。\n\n### なんとなく細かいところを比べてみる\n\n`斎 の異体字・関連文字データ抽出する` で抽出したデータの細かいところを見ていきましょう。\n\n\n| コード | 画像 | 冠 | 左 | 真ん中 | 右 | 下 |\n|:--|:--|:--|:--|:--|:--|:--|\n| [u9f4b](https://glyphwiki.org/wiki/u9f4b) | ![](https://glyphwiki.org/glyph/u9f4b@4.50px.png) | ①普通の鍋蓋 | 刀 | Y | ①氏みたいなやつ | ① 示で上が左右くっついている、下はねなし |\n| [u9f4b-itaiji-001](https://glyphwiki.org/wiki/u9f4b-itaiji-001) | ![](https://glyphwiki.org/glyph/u9f4b-itaiji-001@1.50px.png) | ②ちょんと鍋蓋 | 刀 | 了 | ① | ② 普通の示、下はねあり |\n| [u9f4b-j](https://glyphwiki.org/wiki/u9f4b-j) | ![](https://glyphwiki.org/glyph/u9f4b-j@2.50px.png) | ① | 刀 | Y | ① | ① |\n| [u9f4b-ue0101](https://glyphwiki.org/wiki/u9f4b-ue0101) | ![](https://glyphwiki.org/glyph/u9f4b-ue0101@2.50px.png) | ① | 刀 | 了 | ① | ① |\n| [u9f4b-var-001](https://glyphwiki.org/wiki/u9f4b-var-001) | ![](https://glyphwiki.org/glyph/u9f4b-var-001@2.50px.png) | ① | 刀 | Y | ① | ⑤ ①の下跳ねあり版 |\n| [u9f4b-var-002](https://glyphwiki.org/wiki/u9f4b-var-002) | ![](https://glyphwiki.org/glyph/u9f4b-var-002@2.50px.png) | ① | 刀 | Y | ① | ③ ①の示すに見せかけて右側がくっついてない |\n| [u9f4b-var-003](https://glyphwiki.org/wiki/u9f4b-var-003) | ![](https://glyphwiki.org/glyph/u9f4b-var-003@2.50px.png) | ① | 刀 | Y | ① | ④ ③の小の下がはねてない |\n| [u9f4b-var-004](https://glyphwiki.org/wiki/u9f4b-var-004) | ![](https://glyphwiki.org/glyph/u9f4b-var-004@3.50px.png) | ① | 刀 | Y | ① | ② |\n| [u9f4b-var-005](https://glyphwiki.org/wiki/u9f4b-var-005) | ![](https://glyphwiki.org/glyph/u9f4b-var-005@1.50px.png) | ① | 刀 | Y | ① | ⑥ ①で上の右側だけくっついてない |\n| [jmj-059306](https://glyphwiki.org/wiki/jmj-059306) | ![](https://glyphwiki.org/glyph/jmj-059306@2.50px.png) | ① | 夕 | 了 | ① | ⑤ |\n| [juki-ad38](https://glyphwiki.org/wiki/juki-ad38) | ![](https://glyphwiki.org/glyph/juki-ad38@2.50px.png) | ① | 刀 | 了 | ②氏のパート2 | ② |\n| [juki-ad39](https://glyphwiki.org/wiki/juki-ad39) | ![](https://glyphwiki.org/glyph/juki-ad39@4.50px.png) | ① | 夕 | 了 | ① | ② |\n| [juki-b720](https://glyphwiki.org/wiki/juki-b720) | ![](https://glyphwiki.org/glyph/juki-b720@2.50px.png) | ① | 刀 | Y | ① | ⑦ ②の下はねなし版 |\n| [koseki-548960](https://glyphwiki.org/wiki/koseki-548960) | ![](https://glyphwiki.org/glyph/koseki-548960@2.50px.png) | ① | 刀 | 了 | ① | ② |\n| [toki-01001950](https://glyphwiki.org/wiki/toki-01001950) | ![](https://glyphwiki.org/glyph/toki-01001950@3.50px.png) | ① | 冫 | 了 | ① | ⑦ |\n| [toki-01066230](https://glyphwiki.org/wiki/toki-01066230) | ![](https://glyphwiki.org/glyph/toki-01066230@2.50px.png) | ① | 刀 | Y | ① | ② |\n| [u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f](https://glyphwiki.org/wiki/u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f) | ![](https://glyphwiki.org/glyph/u2ff5-u2ff3-u4ea0-u6c36-cdp-89c6-u5c0f@1.50px.png) | ① | 水と永の間 | 水と永の間 | 水と永の間 | ① |\n| [zihai-014137](https://glyphwiki.org/wiki/zihai-014137) | ![](https://glyphwiki.org/glyph/zihai-014137@1.50px.png) | ② | 刀 | Y | ① | ⑧ 丙みたいなやつ |\n| [zihai-014217](https://glyphwiki.org/wiki/zihai-014217) | ![](https://glyphwiki.org/glyph/zihai-014217@1.50px.png) | ② | 刀 | Y | ① | ⑨ 米 |\n| [zihai-014218](https://glyphwiki.org/wiki/zihai-014218) | ![](https://glyphwiki.org/glyph/zihai-014218@1.50px.png) | ② | 刀 | Y | ① | ⑨ |\n| [zihai-014223](https://glyphwiki.org/wiki/zihai-014223) | ![](https://glyphwiki.org/glyph/zihai-014223@1.50px.png) | ② | 刀 | マ | ① | ⑨ |\n| [hkcs_m9f4b](https://glyphwiki.org/wiki/hkcs_m9f4b) | ![](https://glyphwiki.org/glyph/hkcs_m9f4b@2.50px.png) | ① | 刀 | Y | ① | ① |\n| [hkcs_u9f4b](https://glyphwiki.org/wiki/hkcs_u9f4b) | ![](https://glyphwiki.org/glyph/hkcs_u9f4b@1.50px.png) | ② | 刀 | Y | ① | ⑩ ①と②の中間くらい |\n\n作っている途中(23:11)で力ついて途中適当になりました。なんか雰囲気たくさん種類あるんだなーーーくらいに思っておいて、正確さは求めないでください。\n\n## まとめ\n\n長い記事を読んでいただきありがとうございました！！！\n\nサイトウは誤字から生まれたのはちょっとおもしろかったです。ｗ\n\nお疲れ様でした。！！！\n\n[](自分用メモ、データ加工用スプレッドシートへのリンク)\n[](https://docs.google.com/spreadsheets/u/1/d/1JpRoYkzAdgChoLRdMXnJ8KMGMK1klVzg86FJxuClnyY/edit#gid=205306604)\n\n.\n","coediting":false,"comments_count":3,"created_at":"2019-12-01T21:08:20+09:00","group":null,"id":"c964202b9de3b347f31b","likes_count":29,"private":false,"reactions_count":0,"stocks_count":10,"tags":[{"name":"JavaScript","versions":[]},{"name":"Unicode","versions":[]},{"name":"異体字","versions":[]}],"title":"異体字の世界 【サイトウ】","updated_at":"2019-12-04T07:02:32+09:00","url":"https://qiita.com/ykhirao/items/c964202b9de3b347f31b","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:87\">\n<span id=\"github-actionsciを使って毎日自動でgithubに草を生やそうｗｗｗ\" class=\"fragment\"></span><a href=\"#github-actionsci%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E6%AF%8E%E6%97%A5%E8%87%AA%E5%8B%95%E3%81%A7github%E3%81%AB%E8%8D%89%E3%82%92%E7%94%9F%E3%82%84%E3%81%9D%E3%81%86%EF%BD%97%EF%BD%97%EF%BD%97\"><i class=\"fa fa-link\"></i></a>【GitHub Actions】CIを使って毎日自動でGitHubに草を生やそうｗｗｗ</h1>\n<p data-sourcepos=\"3:1-3:135\">タイトルに草が生えてますし内容もネタですが、文章の調子は至って真面目な記事にする予定です。</p>\n<p data-sourcepos=\"5:1-5:24\">分かる人は以下の</p>\n<ul data-sourcepos=\"7:1-10:0\">\n<li data-sourcepos=\"7:1-7:65\">fork する <a href=\"https://github.com/ykhirao/write-code-everyday-bot/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/ykhirao/write-code-everyday-bot/</a>\n</li>\n<li data-sourcepos=\"8:1-8:65\">GitHub Actionsを使えるように申請する(30分くらい)</li>\n<li data-sourcepos=\"9:1-10:0\">\n<code>touch .github/workflows/blank.yml</code> して後に記載のyamlファイルをpushする</li>\n</ul>\n<p data-sourcepos=\"11:1-11:108\">以上で、なんとなくわかる方は以降の記事は読まなくても大丈夫かと思います。</p>\n<div class=\"code-frame\" data-lang=\"yaml\" data-sourcepos=\"13:1-44:3\">\n<div class=\"code-lang\"><span class=\"bold\">.github/workflows/blank.yml</span></div>\n<div class=\"highlight\"><pre><code><span class=\"na\">name</span><span class=\"pi\">:</span> <span class=\"s\">CI</span>\n\n<span class=\"na\">on</span><span class=\"pi\">:</span>\n  <span class=\"na\">schedule</span><span class=\"pi\">:</span>\n  <span class=\"pi\">-</span> <span class=\"na\">cron</span><span class=\"pi\">:</span> <span class=\"s\">0 0 * * *</span> <span class=\"c1\">#JSTで9時</span>\n  <span class=\"na\">push</span><span class=\"pi\">:</span> <span class=\"c1\"># 一度動作確認してActionsが動きそうならオフにする</span>\n\n<span class=\"na\">jobs</span><span class=\"pi\">:</span>\n  <span class=\"na\">build</span><span class=\"pi\">:</span>\n\n    <span class=\"na\">runs-on</span><span class=\"pi\">:</span> <span class=\"s\">ubuntu-latest</span>\n    \n    <span class=\"na\">steps</span><span class=\"pi\">:</span>\n    <span class=\"pi\">-</span> <span class=\"na\">uses</span><span class=\"pi\">:</span> <span class=\"s\">actions/checkout@v1</span>\n    <span class=\"pi\">-</span> <span class=\"na\">name</span><span class=\"pi\">:</span> <span class=\"s\">Run a one-line script</span>\n      <span class=\"na\">run</span><span class=\"pi\">:</span> <span class=\"s\">echo Hello, world!</span>\n    <span class=\"pi\">-</span> <span class=\"na\">name</span><span class=\"pi\">:</span> <span class=\"s\">Run a multi-line script</span>\n      <span class=\"na\">run</span><span class=\"pi\">:</span> <span class=\"pi\">|</span>\n        <span class=\"s\">echo Add other actions to build,</span>\n        <span class=\"s\">echo test, and deploy your project.</span>\n        <span class=\"s\">git config user.name \"ykhirao-bot\"</span>\n        <span class=\"s\">git config user.email \"yk@example.com\"</span>\n        <span class=\"s\">git remote set-url origin https://ykhirao:${{ secrets.GITHUB_TOKEN }}@github.com/ykhirao/write-code-everyday-bot-fork</span>\n        <span class=\"s\">git branch</span>\n        <span class=\"s\">git checkout master</span>\n        <span class=\"s\">git branch</span>\n        <span class=\"s\">./omikuji.sh &gt;&gt; README.md</span>\n        <span class=\"s\">git add .</span>\n        <span class=\"s\">git commit -m \"update!\"</span>\n        <span class=\"s\">git push origin master</span>\n</code></pre></div>\n</div>\n<h2 data-sourcepos=\"46:1-46:21\">\n<span id=\"前提条件確認\" class=\"fragment\"></span><a href=\"#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6%E7%A2%BA%E8%AA%8D\"><i class=\"fa fa-link\"></i></a>前提条件確認</h2>\n<h3 data-sourcepos=\"48:1-48:16\">\n<span id=\"1-草とは\" class=\"fragment\"></span><a href=\"#1-%E8%8D%89%E3%81%A8%E3%81%AF\"><i class=\"fa fa-link\"></i></a>1. 草とは</h3>\n<p data-sourcepos=\"50:1-50:231\">こういう<a href=\"https://github.com/ykhirao\" rel=\"nofollow noopener\" target=\"_blank\">GitHubの個人ページ</a>に行った時に表示される、いつどれくらいコミットされてるかわかるので、エンジニアの技術評価に使われていたりする。</p>\n<a href=\"https://camo.qiitausercontent.com/540f3e7e05b229c7885e35fc67b2458357cc3ebd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32386631333834382d666637342d653932302d623935622d6164326433633730303337312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"819\" alt=\"スクリーンショット 2019-09-26 13.01.31.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F28f13848-ff74-e920-b95b-ad2d3c700371.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=37e13d74f2345920bd98555769076279\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/28f13848-ff74-e920-b95b-ad2d3c700371.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F28f13848-ff74-e920-b95b-ad2d3c700371.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=de7371ea6237467c7d55ad0de013e6b8 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"54:1-54:161\">エンジニア系のHRサイトだと以下のようなところがGitHubのデータ解析してポイントつけてくれたりするので面白いかも。</p>\n<ul data-sourcepos=\"56:1-58:0\">\n<li data-sourcepos=\"56:1-56:21\"><a href=\"https://lapras.com/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://lapras.com/</a></li>\n<li data-sourcepos=\"57:1-58:0\"><a href=\"https://findy-code.io/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://findy-code.io/</a></li>\n</ul>\n<p data-sourcepos=\"59:1-60:271\"><strong>⚠⚠今回私が紹介する方法でコミット数だけ増やしても実力は何も変わらないのでネタだと思ってください</strong><br>\n<strong>⚠⚠エンジニア採用する会社さんもコミット数が多い人を採用するのではなく、ちゃんとどういうレポジトリにコミットしているとか、ちゃんと面談で聞いていくのがいいのではないかなと思います</strong></p>\n<h3 data-sourcepos=\"62:1-62:16\">\n<span id=\"設計確認\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E8%A8%88%E7%A2%BA%E8%AA%8D\"><i class=\"fa fa-link\"></i></a>設計確認</h3>\n<ul data-sourcepos=\"64:1-66:0\">\n<li data-sourcepos=\"64:1-64:78\">毎朝9時に占いをして、その結果をREADME.mdにコミットする</li>\n<li data-sourcepos=\"65:1-66:0\">それをPushする</li>\n</ul>\n<p data-sourcepos=\"67:1-67:137\"><a href=\"https://camo.qiitausercontent.com/73744884e4d3ff67f2a8f314d0c062c3a0b66437/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f37626430643361632d383761652d316339312d623034372d6330633833343931336261662e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F7bd0d3ac-87ae-1c91-b047-c0c834913baf.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=951935d927ac6446ec2a3d673978a38b\" alt=\"名称未設定.001.jpeg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/7bd0d3ac-87ae-1c91-b047-c0c834913baf.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F7bd0d3ac-87ae-1c91-b047-c0c834913baf.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3123606da199ca22a82618c68507c45a 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"69:1-69:18\">簡単ですね。</p>\n<h3 data-sourcepos=\"71:1-71:34\">\n<span id=\"これを読んで得ること\" class=\"fragment\"></span><a href=\"#%E3%81%93%E3%82%8C%E3%82%92%E8%AA%AD%E3%82%93%E3%81%A7%E5%BE%97%E3%82%8B%E3%81%93%E3%81%A8\"><i class=\"fa fa-link\"></i></a>これを読んで得ること</h3>\n<ul data-sourcepos=\"73:1-77:0\">\n<li data-sourcepos=\"73:1-74:80\">スケジュールでいろんなスクリプトをフックできる環境が手に入る\n<ul data-sourcepos=\"74:5-74:80\">\n<li data-sourcepos=\"74:5-74:80\">毎月何かを実行したり、毎日運勢をSlackに送ったり…？</li>\n</ul>\n</li>\n<li data-sourcepos=\"75:1-75:37\">GitHub Actions少し詳しくなる</li>\n<li data-sourcepos=\"76:1-77:0\">CircleCIなどにも応用できるので いわゆる <code>CI/CD</code> という分野のことが少しわかる</li>\n</ul>\n<p data-sourcepos=\"78:1-78:90\">比較的初心者向けに書いていきますが、ある程度は省いていきます</p>\n<h3 data-sourcepos=\"80:1-80:55\">\n<span id=\"間違いを見つけたとき動かないとき\" class=\"fragment\"></span><a href=\"#%E9%96%93%E9%81%95%E3%81%84%E3%82%92%E8%A6%8B%E3%81%A4%E3%81%91%E3%81%9F%E3%81%A8%E3%81%8D%E5%8B%95%E3%81%8B%E3%81%AA%E3%81%84%E3%81%A8%E3%81%8D\"><i class=\"fa fa-link\"></i></a>間違いを見つけたとき、動かないとき</h3>\n<p data-sourcepos=\"81:1-81:112\">自分でデバックするか、このQiitaに編集リクエストくれると嬉しいかもです… <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"></p>\n<h2 data-sourcepos=\"83:1-83:75\">\n<span id=\"さて毎日コミットする環境を作りましょう\" class=\"fragment\"></span><a href=\"#%E3%81%95%E3%81%A6%E6%AF%8E%E6%97%A5%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%81%99%E3%82%8B%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%82%8A%E3%81%BE%E3%81%97%E3%82%87%E3%81%86\"><i class=\"fa fa-link\"></i></a>さて、毎日コミットする環境を作りましょう！！！！</h2>\n<p data-sourcepos=\"85:1-85:30\">ここからが本編です。</p>\n<h3 data-sourcepos=\"87:1-87:17\">\n<span id=\"1-forkする\" class=\"fragment\"></span><a href=\"#1-fork%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>1. forkする</h3>\n<ul data-sourcepos=\"89:1-91:0\">\n<li data-sourcepos=\"89:1-91:0\">私のGitHubのページに行ってレポジトリをforkしてきてください<br>\n<a href=\"https://github.com/ykhirao/write-code-everyday-bot/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/ykhirao/write-code-everyday-bot/</a>\n</li>\n</ul>\n<a href=\"https://camo.qiitausercontent.com/095162b1fbd4684c7f23543937cb70ca85d486b7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f37613736346432652d376136332d653966632d373364362d3862326236666630313365632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1073\" alt=\"スクリーンショット 2019-09-26 13.53.25.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F7a764d2e-7a63-e9fc-73d6-8b2b6ff013ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8d2f06fc2e13ffe7d52a0a9dbf3306ee\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/7a764d2e-7a63-e9fc-73d6-8b2b6ff013ec.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F7a764d2e-7a63-e9fc-73d6-8b2b6ff013ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9c0d63e43728a6d9b6ce01132a77594e 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"94:1-94:82\">ここの <code>Fork</code> というのを押して自分のGiｔHubへコピーします。</p>\n<h3 data-sourcepos=\"96:1-96:39\">\n<span id=\"2-github-actionsを有効にする\" class=\"fragment\"></span><a href=\"#2-github-actions%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>2. GitHub Actionsを有効にする</h3>\n<p data-sourcepos=\"98:1-98:153\">GitHub Actionsが有効になっていない人は有効にするために申請する。私の場合は夜中に30分待ちました。JST23時ころ。</p>\n<a href=\"https://camo.qiitausercontent.com/264aa009e3cdd0efc3de1c94ce9d20a3bb01bb3c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36656665356332302d336133652d333435352d373666612d6563326665623133306533652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1092\" alt=\"スクリーンショット 2019-09-26 12.58.53.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6efe5c20-3a3e-3455-76fa-ec2feb130e3e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f16b58b542fe2dd4cb6b4c17602a8895\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6efe5c20-3a3e-3455-76fa-ec2feb130e3e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6efe5c20-3a3e-3455-76fa-ec2feb130e3e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8f0554602d3fc0e301c19f043d07fdca 1x\" loading=\"lazy\"></a>\n<h3 data-sourcepos=\"102:1-102:36\">\n<span id=\"3-github-actionsを設定する\" class=\"fragment\"></span><a href=\"#3-github-actions%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>3. GitHub Actionsを設定する</h3>\n<a href=\"https://camo.qiitausercontent.com/7e03a8eef1c8c4a46e79bdbec65d409c6f53c617/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f63353838616263612d393432632d626664312d623063302d3366353662383038643035622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1386\" alt=\"スクリーンショット 2019-09-26 14.02.29.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc588abca-942c-bfd1-b0c0-3f56b808d05b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6f28bbc91db302c6e1b5ef2755534627\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c588abca-942c-bfd1-b0c0-3f56b808d05b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fc588abca-942c-bfd1-b0c0-3f56b808d05b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8632832cf1828925bf408df031daab1c 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"106:1-106:44\"><code>Set up this workflow</code> をクリックする</p>\n<a href=\"https://camo.qiitausercontent.com/cb15ae6f8e0edc47c78cbe3b08de52ac29fb0cbf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62376563623939342d653334372d666430352d366430632d3366666638663132646137392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1388\" alt=\"スクリーンショット 2019-09-26 14.04.43.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb7ecb994-e347-fd05-6d0c-3fff8f12da79.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8a4976bbbecff46a2599e6ea4fdbb2d0\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b7ecb994-e347-fd05-6d0c-3fff8f12da79.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb7ecb994-e347-fd05-6d0c-3fff8f12da79.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=77176996d9cddd911d1f5d986e4a328b 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"110:1-110:75\">左側の編集画面に何も考えずに以下の文章を貼り付ける</p>\n<div class=\"code-frame\" data-lang=\"yml\" data-sourcepos=\"112:1-144:3\"><div class=\"highlight\"><pre><code><span class=\"na\">name</span><span class=\"pi\">:</span> <span class=\"s\">CI</span>\n\n<span class=\"na\">on</span><span class=\"pi\">:</span>\n  <span class=\"na\">push</span><span class=\"pi\">:</span> <span class=\"c1\"># 一度動作確認してActionsが動きそうならオフにする # オフにしないとpushの無限ループにおちいるよ。</span>\n<span class=\"c1\">#   schedule:</span>\n<span class=\"c1\">#   - cron: 0 0 * * *</span>\n\n<span class=\"na\">jobs</span><span class=\"pi\">:</span>\n  <span class=\"na\">build</span><span class=\"pi\">:</span>\n\n    <span class=\"na\">runs-on</span><span class=\"pi\">:</span> <span class=\"s\">ubuntu-latest</span>\n    \n    <span class=\"na\">steps</span><span class=\"pi\">:</span>\n    <span class=\"pi\">-</span> <span class=\"na\">uses</span><span class=\"pi\">:</span> <span class=\"s\">actions/checkout@v1</span>\n    <span class=\"pi\">-</span> <span class=\"na\">name</span><span class=\"pi\">:</span> <span class=\"s\">Run a multi-line script</span>\n      <span class=\"na\">run</span><span class=\"pi\">:</span> <span class=\"pi\">|</span>\n        <span class=\"s\">echo Add other actions to build,</span>\n        <span class=\"s\">echo test, and deploy your project.</span>\n        <span class=\"s\">git config user.name ${NAME}</span>\n        <span class=\"s\">git config user.email ${EMAIL}</span>\n        <span class=\"s\">git remote set-url origin https://${NAME}:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repos }}</span>\n        <span class=\"s\">git branch</span>\n        <span class=\"s\">git checkout master</span>\n        <span class=\"s\">git branch</span>\n        <span class=\"s\">./omikuji.sh &gt;&gt; README.md</span>\n        <span class=\"s\">git add .</span>\n        <span class=\"s\">git commit -m \"update!\"</span>\n      <span class=\"na\">env</span><span class=\"pi\">:</span>\n        <span class=\"na\">NAME</span><span class=\"pi\">:</span> <span class=\"s\">${{ github.actor }}</span>\n        <span class=\"na\">EMAIL</span><span class=\"pi\">:</span> <span class=\"s\">yk@example.com</span>\n        <span class=\"na\">REPO</span><span class=\"pi\">:</span> <span class=\"s\">write-code-everyday-bot</span>\n</code></pre></div></div>\n<p data-sourcepos=\"146:1-146:72\">そしてコミットするとpushに反応して、CIが動き出す。</p>\n<a href=\"https://camo.qiitausercontent.com/02536c024e748c64e1a0f2d50afb7cef70070068/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f35643738333531652d663137652d643632312d393866302d3439363131636462616666392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1529\" alt=\"スクリーンショット 2019-09-26 14.22.58.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F5d78351e-f17e-d621-98f0-49611cdbaff9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a7a3dfa7b1836ee1ed65f3d051324fcb\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/5d78351e-f17e-d621-98f0-49611cdbaff9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F5d78351e-f17e-d621-98f0-49611cdbaff9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=79608db627a390341ef06207ea2caa48 1x\" loading=\"lazy\"></a>\n<a href=\"https://camo.qiitausercontent.com/92d6c18850a6f4f30c21d432adfa4430a5eaa53d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f64353064303837322d383431612d663833362d623466362d3262663334313731316232352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1526\" alt=\"スクリーンショット 2019-09-26 14.23.07.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fd50d0872-841a-f836-b4f6-2bf341711b25.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=242c37e61cf93005850a98c3fb0dbcbb\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/d50d0872-841a-f836-b4f6-2bf341711b25.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fd50d0872-841a-f836-b4f6-2bf341711b25.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=75364ead9124b6f4e19dbc61b2b93737 1x\" loading=\"lazy\"></a>\n<p data-sourcepos=\"152:1-152:153\">失敗してたらこのあたりに出てくるので、確認してみてください。たぶんパスワードがなくて失敗とかありそう。</p>\n<h2 data-sourcepos=\"154:1-154:12\">\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h2>\n<p data-sourcepos=\"156:1-156:248\">CircleCIとかまともに設定いじったことなかったので、初めてのCIでした。すごく楽しかったのでまたスケジュールでhookできる面白そうな何かがあれば触ってみたいなと思ってます！！！</p>\n<p data-sourcepos=\"158:1-158:69\">ここまで読んでいただきありがとうございました！</p>\n<h2 data-sourcepos=\"160:1-160:24\">\n<span id=\"参考にした資料\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83%E3%81%AB%E3%81%97%E3%81%9F%E8%B3%87%E6%96%99\"><i class=\"fa fa-link\"></i></a>参考にした資料</h2>\n<ul data-sourcepos=\"162:1-166:0\">\n<li data-sourcepos=\"162:1-163:0\">\n<p data-sourcepos=\"162:3-162:143\"><a href=\"https://qiita.com/toshihirock/items/461da0f60f975f6acb10\" id=\"reference-ab084bc3bee959fb7cd6\">シェルスクリプト(bash)のif文とtestコマンド([])自分メモ - Qiita</a></p>\n</li>\n<li data-sourcepos=\"164:1-166:0\">\n<p data-sourcepos=\"164:3-164:88\"><a href=\"http://blog.adjust-work.com/711/\" rel=\"nofollow noopener\" target=\"_blank\">ユー。今年の運勢占っちゃいなよ！ |</a></p>\n</li>\n</ul>\n<p data-sourcepos=\"167:1-167:1\">.</p>\n","body":"# 【GitHub Actions】CIを使って毎日自動でGitHubに草を生やそうｗｗｗ\n\nタイトルに草が生えてますし内容もネタですが、文章の調子は至って真面目な記事にする予定です。\n\n分かる人は以下の\n\n- fork する https://github.com/ykhirao/write-code-everyday-bot/\n- GitHub Actionsを使えるように申請する(30分くらい)\n- `touch .github/workflows/blank.yml` して後に記載のyamlファイルをpushする\n\n以上で、なんとなくわかる方は以降の記事は読まなくても大丈夫かと思います。\n\n```.github/workflows/blank.yml\nname: CI\n\non:\n  schedule:\n  - cron: 0 0 * * * #JSTで9時\n  push: # 一度動作確認してActionsが動きそうならオフにする\n\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n    \n    steps:\n    - uses: actions/checkout@v1\n    - name: Run a one-line script\n      run: echo Hello, world!\n    - name: Run a multi-line script\n      run: |\n        echo Add other actions to build,\n        echo test, and deploy your project.\n        git config user.name \"ykhirao-bot\"\n        git config user.email \"yk@example.com\"\n        git remote set-url origin https://ykhirao:${{ secrets.GITHUB_TOKEN }}@github.com/ykhirao/write-code-everyday-bot-fork\n        git branch\n        git checkout master\n        git branch\n        ./omikuji.sh >> README.md\n        git add .\n        git commit -m \"update!\"\n        git push origin master\n```\n\n## 前提条件確認\n\n### 1. 草とは\n\nこういう[GitHubの個人ページ](https://github.com/ykhirao)に行った時に表示される、いつどれくらいコミットされてるかわかるので、エンジニアの技術評価に使われていたりする。\n\n<img width=\"819\" alt=\"スクリーンショット 2019-09-26 13.01.31.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/28f13848-ff74-e920-b95b-ad2d3c700371.png\">\n\nエンジニア系のHRサイトだと以下のようなところがGitHubのデータ解析してポイントつけてくれたりするので面白いかも。\n\n- https://lapras.com/\n- https://findy-code.io/\n\n**⚠⚠今回私が紹介する方法でコミット数だけ増やしても実力は何も変わらないのでネタだと思ってください**\n**⚠⚠エンジニア採用する会社さんもコミット数が多い人を採用するのではなく、ちゃんとどういうレポジトリにコミットしているとか、ちゃんと面談で聞いていくのがいいのではないかなと思います**\n\n### 設計確認\n\n- 毎朝9時に占いをして、その結果をREADME.mdにコミットする\n- それをPushする\n\n![名称未設定.001.jpeg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/7bd0d3ac-87ae-1c91-b047-c0c834913baf.jpeg)\n\n簡単ですね。\n\n### これを読んで得ること\n\n- スケジュールでいろんなスクリプトをフックできる環境が手に入る\n    - 毎月何かを実行したり、毎日運勢をSlackに送ったり…？\n- GitHub Actions少し詳しくなる\n- CircleCIなどにも応用できるので いわゆる `CI/CD` という分野のことが少しわかる\n\n比較的初心者向けに書いていきますが、ある程度は省いていきます\n\n### 間違いを見つけたとき、動かないとき\n自分でデバックするか、このQiitaに編集リクエストくれると嬉しいかもです… :pray: \n\n## さて、毎日コミットする環境を作りましょう！！！！\n\nここからが本編です。\n\n### 1. forkする\n\n- 私のGitHubのページに行ってレポジトリをforkしてきてください\nhttps://github.com/ykhirao/write-code-everyday-bot/\n\n<img width=\"1073\" alt=\"スクリーンショット 2019-09-26 13.53.25.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/7a764d2e-7a63-e9fc-73d6-8b2b6ff013ec.png\">\n\nここの `Fork` というのを押して自分のGiｔHubへコピーします。\n\n### 2. GitHub Actionsを有効にする\n\nGitHub Actionsが有効になっていない人は有効にするために申請する。私の場合は夜中に30分待ちました。JST23時ころ。\n\n<img width=\"1092\" alt=\"スクリーンショット 2019-09-26 12.58.53.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6efe5c20-3a3e-3455-76fa-ec2feb130e3e.png\">\n\n### 3. GitHub Actionsを設定する\n\n<img width=\"1386\" alt=\"スクリーンショット 2019-09-26 14.02.29.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/c588abca-942c-bfd1-b0c0-3f56b808d05b.png\">\n\n`Set up this workflow` をクリックする\n\n<img width=\"1388\" alt=\"スクリーンショット 2019-09-26 14.04.43.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b7ecb994-e347-fd05-6d0c-3fff8f12da79.png\">\n\n左側の編集画面に何も考えずに以下の文章を貼り付ける\n\n```yml\nname: CI\n\non:\n  push: # 一度動作確認してActionsが動きそうならオフにする # オフにしないとpushの無限ループにおちいるよ。\n#   schedule:\n#   - cron: 0 0 * * *\n\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n    \n    steps:\n    - uses: actions/checkout@v1\n    - name: Run a multi-line script\n      run: |\n        echo Add other actions to build,\n        echo test, and deploy your project.\n        git config user.name ${NAME}\n        git config user.email ${EMAIL}\n        git remote set-url origin https://${NAME}:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repos }}\n        git branch\n        git checkout master\n        git branch\n        ./omikuji.sh >> README.md\n        git add .\n        git commit -m \"update!\"\n      env:\n        NAME: ${{ github.actor }}\n        EMAIL: yk@example.com\n        REPO: write-code-everyday-bot\n```\n\nそしてコミットするとpushに反応して、CIが動き出す。\n\n<img width=\"1529\" alt=\"スクリーンショット 2019-09-26 14.22.58.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/5d78351e-f17e-d621-98f0-49611cdbaff9.png\">\n\n<img width=\"1526\" alt=\"スクリーンショット 2019-09-26 14.23.07.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/d50d0872-841a-f836-b4f6-2bf341711b25.png\">\n\n失敗してたらこのあたりに出てくるので、確認してみてください。たぶんパスワードがなくて失敗とかありそう。\n\n## 最後に\n\nCircleCIとかまともに設定いじったことなかったので、初めてのCIでした。すごく楽しかったのでまたスケジュールでhookできる面白そうな何かがあれば触ってみたいなと思ってます！！！\n\nここまで読んでいただきありがとうございました！\n\n## 参考にした資料\n\n- [シェルスクリプト(bash)のif文とtestコマンド([])自分メモ - Qiita](https://qiita.com/toshihirock/items/461da0f60f975f6acb10)\n\n- [ユー。今年の運勢占っちゃいなよ！ |](http://blog.adjust-work.com/711/)\n\n\n.\n","coediting":false,"comments_count":2,"created_at":"2019-09-26T14:26:29+09:00","group":null,"id":"65fee829ee0478187027","likes_count":26,"private":false,"reactions_count":0,"stocks_count":10,"tags":[{"name":"Bash","versions":[]},{"name":"GitHub","versions":[]},{"name":"CI","versions":[]},{"name":"ネタ","versions":[]},{"name":"GitHubActions","versions":[]}],"title":"【GitHub Actions】CIを使って毎日自動でGitHubに草を生やそうｗｗｗ","updated_at":"2023-03-30T15:10:36+09:00","url":"https://qiita.com/ykhirao/items/65fee829ee0478187027","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:92\">\n<span id=\"git-rebase--i-したときのコマンドをすべて試してみたp-r-es-f-x-d\" class=\"fragment\"></span><a href=\"#git-rebase--i-%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E3%81%99%E3%81%B9%E3%81%A6%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9Fp-r-es-f-x-d\"><i class=\"fa fa-link\"></i></a><code>git rebase -i</code> したときのコマンドをすべて試してみた(p, r, e,s ,f ,x ,d)</h1>\n<p data-sourcepos=\"3:1-3:180\">いわゆる <code>git rebase -i HEAD~~</code> とかしたときに出てくる下のほうに出てくるコメントアウトされているコマンドのことを今回まとめます。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"5:1-27:3\"><div class=\"highlight\"><pre><code>pick 85b703f update 2\npick 4d9e3ec update 3\n\n<span class=\"c\"># Rebase 5d6b0f5..1fc7711 onto 5d6b0f5 (6 commands)</span>\n<span class=\"c\">#</span>\n<span class=\"c\"># Commands:</span>\n<span class=\"c\"># p, pick = use commit</span>\n<span class=\"c\"># r, reword = use commit, but edit the commit message</span>\n<span class=\"c\"># e, edit = use commit, but stop for amending</span>\n<span class=\"c\"># s, squash = use commit, but meld into previous commit</span>\n<span class=\"c\"># f, fixup = like \"squash\", but discard this commit's log message</span>\n<span class=\"c\"># x, exec = run command (the rest of the line) using shell</span>\n<span class=\"c\"># d, drop = remove commit</span>\n<span class=\"c\">#</span>\n<span class=\"c\"># These lines can be re-ordered; they are executed from top to bottom.</span>\n<span class=\"c\">#</span>\n<span class=\"c\"># If you remove a line here THAT COMMIT WILL BE LOST.</span>\n<span class=\"c\">#</span>\n<span class=\"c\"># However, if you remove everything, the rebase will be aborted.</span>\n<span class=\"c\">#</span>\n<span class=\"c\"># Note that empty commits are commented out</span>\n</code></pre></div></div>\n<table data-sourcepos=\"29:1-37:57\">\n<thead>\n<tr data-sourcepos=\"29:1-29:52\">\n<th style=\"text-align: center\" data-sourcepos=\"29:2-29:3\"></th>\n<th style=\"text-align: center\" data-sourcepos=\"29:5-29:12\">英語</th>\n<th style=\"text-align: center\" data-sourcepos=\"29:14-29:51\">なんとなく適当な日本語訳</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"31:1-31:48\">\n<td style=\"text-align: center\" data-sourcepos=\"31:2-31:10\">p, pick</td>\n<td style=\"text-align: center\" data-sourcepos=\"31:12-31:23\">use commit</td>\n<td style=\"text-align: center\" data-sourcepos=\"31:25-31:47\">コミットを使う</td>\n</tr>\n<tr data-sourcepos=\"32:1-32:127\">\n<td style=\"text-align: center\" data-sourcepos=\"32:2-32:12\">r, reword</td>\n<td style=\"text-align: center\" data-sourcepos=\"32:14-32:54\">use commit, but edit the commit message</td>\n<td style=\"text-align: center\" data-sourcepos=\"32:56-32:126\">コミットを使うが、コミットメッセージを編集する</td>\n</tr>\n<tr data-sourcepos=\"33:1-33:95\">\n<td style=\"text-align: center\" data-sourcepos=\"33:2-33:10\">e, edit</td>\n<td style=\"text-align: center\" data-sourcepos=\"33:12-33:46\">use commit, but stop for amending</td>\n<td style=\"text-align: center\" data-sourcepos=\"33:48-33:94\">コミットを使うが、修正を止める</td>\n</tr>\n<tr data-sourcepos=\"34:1-34:120\">\n<td style=\"text-align: center\" data-sourcepos=\"34:2-34:12\">s, squash</td>\n<td style=\"text-align: center\" data-sourcepos=\"34:14-34:56\">use commit, but meld into previous commit</td>\n<td style=\"text-align: center\" data-sourcepos=\"34:58-34:119\">コミットを使うが、以前のコミットに混ぜる</td>\n</tr>\n<tr data-sourcepos=\"35:1-35:139\">\n<td style=\"text-align: center\" data-sourcepos=\"35:2-35:11\">f, fixup</td>\n<td style=\"text-align: center\" data-sourcepos=\"35:13-35:66\">like \"squash\", but discard this commit's log message</td>\n<td style=\"text-align: center\" data-sourcepos=\"35:68-35:138\">squashと似ているが、コミットメッセージは破棄する</td>\n</tr>\n<tr data-sourcepos=\"36:1-36:126\">\n<td style=\"text-align: center\" data-sourcepos=\"36:2-36:10\">x, exec</td>\n<td style=\"text-align: center\" data-sourcepos=\"36:12-36:59\">run command (the rest of the line) using shell</td>\n<td style=\"text-align: center\" data-sourcepos=\"36:61-36:125\">シェルを使用して、残りのコマンドを実行する</td>\n</tr>\n<tr data-sourcepos=\"37:1-37:57\">\n<td style=\"text-align: center\" data-sourcepos=\"37:2-37:10\">d, drop</td>\n<td style=\"text-align: center\" data-sourcepos=\"37:12-37:26\">remove commit</td>\n<td style=\"text-align: center\" data-sourcepos=\"37:28-37:56\">コミットを削除する</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"39:1-39:15\">\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h2>\n<p data-sourcepos=\"41:1-42:84\">これはgitの正確に記述しして、きちんと学んで形からはいる！！というタイプの記事ではないです。<br>\n実際に体験して、なんとなく理解してみようという記事です。</p>\n<p data-sourcepos=\"44:1-44:81\">きちんとした記事は以下のようなのを参考にしてください。</p>\n<ul data-sourcepos=\"46:1-48:0\">\n<li data-sourcepos=\"46:1-48:0\"><a href=\"https://backlog.com/ja/git-tutorial/\" rel=\"nofollow noopener\" target=\"_blank\">サルでもわかるGit入門〜バージョン管理を使いこなそう〜【プロジェクト管理ツールBacklog】</a></li>\n</ul>\n<h2 data-sourcepos=\"49:1-49:27\">\n<span id=\"実際に使ってみる\" class=\"fragment\"></span><a href=\"#%E5%AE%9F%E9%9A%9B%E3%81%AB%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>実際に使ってみる</h2>\n<p data-sourcepos=\"51:1-51:60\">ディレクトリの作成とgitをスタートさせる。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"53:1-58:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span><span class=\"nb\">mkdir </span>git-work\n<span class=\"nv\">$ </span><span class=\"nb\">cd </span>git-work\n<span class=\"nv\">$ </span>git init\nInitialized empty Git repository <span class=\"k\">in</span> /home/hirao/workspace/git-work/.git/\n</code></pre></div></div>\n<p data-sourcepos=\"60:1-60:72\">もし途中でgit操作を間違って最初に戻りたくなったら</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"62:1-66:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span><span class=\"nb\">rm</span> <span class=\"nt\">-fr</span> .git/\n<span class=\"nv\">$ </span>git init\n<span class=\"c\"># もうちょっといい方法ありますか…？</span>\n</code></pre></div></div>\n<p data-sourcepos=\"68:1-68:33\">でやり直してください。</p>\n<h3 data-sourcepos=\"70:1-70:25\">\n<span id=\"ファイルの作成\" class=\"fragment\"></span><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>ファイルの作成</h3>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"73:1-85:3\"><div class=\"highlight\"><pre><code><span class=\"nb\">echo</span> <span class=\"s1\">'First line'</span> <span class=\"o\">&gt;&gt;</span> text.md \ngit add <span class=\"nb\">.</span>\ngit commit <span class=\"nt\">-m</span> <span class=\"s1\">'init'</span>\n\n<span class=\"nb\">echo</span> <span class=\"s1\">'line2'</span> <span class=\"o\">&gt;&gt;</span> text.md <span class=\"o\">&amp;&amp;</span> git commit <span class=\"nt\">-am</span> <span class=\"s1\">'update 2'</span>\n<span class=\"nb\">echo</span> <span class=\"s1\">'line3'</span> <span class=\"o\">&gt;&gt;</span> text.md <span class=\"o\">&amp;&amp;</span> git commit <span class=\"nt\">-am</span> <span class=\"s1\">'update 3'</span>\n<span class=\"nb\">echo</span> <span class=\"s1\">'line4'</span> <span class=\"o\">&gt;&gt;</span> text.md <span class=\"o\">&amp;&amp;</span> git commit <span class=\"nt\">-am</span> <span class=\"s1\">'update 4'</span>\n<span class=\"nb\">echo</span> <span class=\"s1\">'line5'</span> <span class=\"o\">&gt;&gt;</span> text.md\n<span class=\"nb\">echo</span> <span class=\"s1\">'line6'</span> <span class=\"o\">&gt;&gt;</span> text.md <span class=\"o\">&amp;&amp;</span> git commit <span class=\"nt\">-am</span> <span class=\"s1\">'update 6'</span>\n<span class=\"nb\">echo</span> <span class=\"s1\">'line7'</span> <span class=\"o\">&gt;&gt;</span> text.md <span class=\"o\">&amp;&amp;</span> git commit <span class=\"nt\">-am</span> <span class=\"s1\">'update 7'</span>\n<span class=\"nb\">echo</span> <span class=\"s1\">'line8'</span> <span class=\"o\">&gt;&gt;</span> text.md <span class=\"o\">&amp;&amp;</span> git commit <span class=\"nt\">-am</span> <span class=\"s1\">'update 8'</span>\n</code></pre></div></div>\n<p data-sourcepos=\"87:1-87:54\">一気上をすべてターミナルに流し込む。</p>\n<p data-sourcepos=\"89:1-89:60\">ファイルの中身を確認してみましょう。！！</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"91:1-101:3\"><div class=\"highlight\"><pre><code>yk:git-work yk<span class=\"nv\">$ </span><span class=\"nb\">cat </span>text.md \nFirst line\nline2\nline3\nline4\nline5\nline6\nline7\nline8\n</code></pre></div></div>\n<p data-sourcepos=\"103:1-103:69\">ちゃんとファイルの中身があることを確認します。</p>\n<p data-sourcepos=\"105:1-105:89\">そしてGITのコミットのハッシュを <code>git log</code> で確認しておきましょう</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"107:1-117:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git log <span class=\"nt\">--oneline</span>\n\n6e4cd32 <span class=\"o\">(</span>HEAD -&gt; master<span class=\"o\">)</span> update 8\n607b771 update 7\nda03d43 update 6\nbf8452b update 4\n89b026f update 3\nda1c070 update 2\n581d53a init\n</code></pre></div></div>\n<h3 data-sourcepos=\"119:1-119:78\">\n<span id=\"s-squash--use-commit-but-meld-into-previous-commit-を使ってみる\" class=\"fragment\"></span><a href=\"#s-squash--use-commit-but-meld-into-previous-commit-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a><code>s, squash = use commit, but meld into previous commit</code> を使ってみる</h3>\n<p data-sourcepos=\"121:1-121:372\">squashは <code>use commit, but meld into previous commit</code> というメッセージでしたね。私はコミットをまとめるときによく使ってます！。最初のコミットは <code>init</code> というコミットメッセージをつけたので、grepして見つけます。上のように <code>git log --oneline</code> で一番下のやつをコピペしても可能です。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"123:1-127:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git log <span class=\"nt\">--oneline</span> | <span class=\"nb\">grep </span>init\n\n581d53a init\n</code></pre></div></div>\n<p data-sourcepos=\"129:1-129:93\">初回のコミットを取得する。次のコミット <code>update 2</code> から編集できる。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"131:1-133:3\"><div class=\"highlight\"><pre><code>git rebase <span class=\"nt\">-i</span> 581d53a\n</code></pre></div></div>\n<p data-sourcepos=\"135:1-135:79\">以下のように編集して。 <code>update2~3</code> をまとめてみましょう。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"137:1-146:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git rebase <span class=\"nt\">-i</span> 581d53a\n\npick da1c070 update 2\ns 89b026f update 3\npick bf8452b update 4\npick da03d43 update 6\npick 607b771 update 7\npick 6e4cd32 update 8\n</code></pre></div></div>\n<p data-sourcepos=\"148:1-148:140\"><code>update2~3</code> は <code>s</code> オプションでの編集なので、コミットメッセージの編集ができます。以下のような感じ。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"150:1-162:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git rebase <span class=\"nt\">-i</span> 581d53a\n\nhint: Waiting <span class=\"k\">for </span>your editor to close the file... \n<span class=\"c\"># This is a combination of 2 commits.</span>\n<span class=\"c\"># This is the 1st commit message:</span>\n\nupdate 2\n\n<span class=\"c\"># This is the commit message #2:</span>\n\nupdate 3\n</code></pre></div></div>\n<p data-sourcepos=\"164:1-164:9\">これを</p>\n<div class=\"code-frame\" data-lang=\"vim\" data-sourcepos=\"166:1-168:3\"><div class=\"highlight\"><pre><code>update2 <span class=\"nb\">and</span> update3\n</code></pre></div></div>\n<p data-sourcepos=\"170:1-170:12\">へ変更。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"172:1-181:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git log <span class=\"nt\">--oneline</span>  \n\n0317cc1 <span class=\"o\">(</span>HEAD -&gt; master<span class=\"o\">)</span> update 8\na1526af update 7\n27bce0d update 6\n764c9ea update 4\n3e13197 update2 and update3\n581d53a init\n</code></pre></div></div>\n<p data-sourcepos=\"184:1-184:21\">となりました。</p>\n<h3 data-sourcepos=\"186:1-186:68\">\n<span id=\"e-edit--use-commit-but-stop-for-amending-を使ってみる\" class=\"fragment\"></span><a href=\"#e-edit--use-commit-but-stop-for-amending-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a><code>e, edit = use commit, but stop for amending</code> を使ってみる</h3>\n<p data-sourcepos=\"188:1-188:146\">間違って <code>update 5</code> というコミットを作るつもりだったのに、 <code>update6</code> にまとまっています。編集しましょう。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"190:1-199:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span> git log <span class=\"nt\">--oneline</span>\n\n0317cc1 <span class=\"o\">(</span>HEAD -&gt; master<span class=\"o\">)</span> update 8\na1526af update 7\n27bce0d update 6\n764c9ea update 4\n3e13197 update2 and update3\n581d53a init\n</code></pre></div></div>\n<p data-sourcepos=\"201:1-201:60\">また init コミットまでのrebaseをしましょう。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"203:1-205:3\"><div class=\"highlight\"><pre><code>git rebase <span class=\"nt\">-i</span> 581d53a\n</code></pre></div></div>\n<p data-sourcepos=\"207:1-207:115\">出てきた画面で以下のように <code>update 6</code> の <code>pick</code> を <code>e</code> に変更して、以下のようにする。</p>\n<div class=\"code-frame\" data-lang=\"vim\" data-sourcepos=\"209:1-215:3\"><div class=\"highlight\"><pre><code>pick <span class=\"m\">3</span>e13197 update2 <span class=\"nb\">and</span> update3\npick <span class=\"m\">764</span>c9ea <span class=\"k\">update</span> <span class=\"m\">4</span>\n<span class=\"k\">e</span> <span class=\"m\">27</span>bce0d <span class=\"k\">update</span> <span class=\"m\">6</span>\npick a1526af <span class=\"k\">update</span> <span class=\"m\">7</span>\npick <span class=\"m\">0317</span>cc1 <span class=\"k\">update</span> <span class=\"m\">8</span>\n</code></pre></div></div>\n<p data-sourcepos=\"217:1-217:72\">以下のような感じになって、rebaseがストップします。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"219:1-230:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git rebase <span class=\"nt\">-i</span> 581d53a\n\nStopped at 27bce0d...  update 6\nYou can amend the commit now, with\n\n  git commit <span class=\"nt\">--amend</span> \n\nOnce you are satisfied with your changes, run\n\n  git rebase <span class=\"nt\">--continue</span>\n</code></pre></div></div>\n<p data-sourcepos=\"232:1-232:126\">最後のコミットを確認します。これを編集してコミットするか、リセットしてやりなおすか…</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"234:1-253:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>g show \n\ncommit 27bce0d8e8e4c9ef38ae702d7259b72ee775e6a5 <span class=\"o\">(</span>HEAD<span class=\"o\">)</span>\nAuthor: Yuki &lt;author@example.com&gt;\nDate:   Mon Sep 16 21:41:29 2019 +0900\n\n    update 6\n\ndiff <span class=\"nt\">--git</span> a/text.md b/text.md\nindex a5e67f7..d3a7cc2 100644\n<span class=\"nt\">---</span> a/text.md\n+++ b/text.md\n@@ <span class=\"nt\">-2</span>,3 +2,5 @@ First line\n line2\n line3\n line4\n+line5\n+line6\n</code></pre></div></div>\n<p data-sourcepos=\"255:1-255:126\">一個前のコミットを削除しましょう。！！ <code>line5</code> と <code>line6</code> という行を追加したコミットです。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"257:1-265:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git reset <span class=\"nt\">--hard</span> HEAD~\nHEAD is now at 764c9ea update 4\n\n<span class=\"nv\">$ </span>git log <span class=\"nt\">--oneline</span>\n764c9ea <span class=\"o\">(</span>HEAD<span class=\"o\">)</span> update 4\n3e13197 update2 and update3\n581d53a init\n</code></pre></div></div>\n<p data-sourcepos=\"267:1-268:87\">この時、 <code>update 4</code> までしか表示してないのは、rebaseの途中で動作を止めるオプション <code>e/edit</code> を使ったからです。<br>\nコミット削除したら、一行ずつ追加してコミットしていきます。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"270:1-273:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span><span class=\"nb\">echo</span> <span class=\"s1\">'line5'</span> <span class=\"o\">&gt;&gt;</span> text.md <span class=\"o\">&amp;&amp;</span> git commit <span class=\"nt\">-am</span> <span class=\"s1\">'update 5'</span>\n<span class=\"nv\">$ </span><span class=\"nb\">echo</span> <span class=\"s1\">'line6'</span> <span class=\"o\">&gt;&gt;</span> text.md <span class=\"o\">&amp;&amp;</span> git commit <span class=\"nt\">-am</span> <span class=\"s1\">'update 6'</span>\n</code></pre></div></div>\n<p data-sourcepos=\"275:1-275:63\">ちゃんとコミットされているか、確認します。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"277:1-284:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git log <span class=\"nt\">--oneline</span>\nb9e284b <span class=\"o\">(</span>HEAD<span class=\"o\">)</span> update 6\nfd9fe8c update 5\n764c9ea update 4\n3e13197 update2 and update3\n581d53a init\n</code></pre></div></div>\n<p data-sourcepos=\"286:1-286:67\">大丈夫そうなら <code>git rebase --continue</code> して続けます。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"288:1-298:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git log <span class=\"nt\">--oneline</span>\n\n818cfad <span class=\"o\">(</span>HEAD -&gt; master<span class=\"o\">)</span> update 8\nb9fffe7 update 7\nb9e284b update 6\nfd9fe8c update 5\n764c9ea update 4\n3e13197 update2 and update3\n581d53a init\n</code></pre></div></div>\n<p data-sourcepos=\"300:1-301:169\">これで5と6を分割できましたね。<br>\nただしeオプションは、下手にやると <code>update 7</code> 以降のコミットによってコンフリクトが発生するので、置きをつけてください。</p>\n<h3 data-sourcepos=\"303:1-303:88\">\n<span id=\"f-fixup--like-squash-but-discard-this-commits-log-message-を使ってみる\" class=\"fragment\"></span><a href=\"#f-fixup--like-squash-but-discard-this-commits-log-message-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a><code>f, fixup = like \"squash\", but discard this commit's log message</code> を使ってみる</h3>\n<p data-sourcepos=\"305:1-305:71\">メッセージの編集なしの <code>s</code> オプションと同じです。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"307:1-316:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git rebase <span class=\"nt\">-i</span> 581d53a\n\npick 3e13197 update2 and update3\nf 764c9ea update 4\nf fd9fe8c update 5\nf b9e284b update 6\nf b9fffe7 update 7\npick 818cfad update 8\n</code></pre></div></div>\n<p data-sourcepos=\"318:1-319:81\">と最後のコミット以外を<code>f</code> オプションをつけて <code>update2 and update3</code> にすべて統合してみましょう！！！<br>\nコミットメッセージが確認されずにコミットされましたね。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"321:1-327:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git log <span class=\"nt\">--oneline</span>\n\n4b3bee7 <span class=\"o\">(</span>HEAD -&gt; master<span class=\"o\">)</span> update 8\n0cd592f update2 and update3\n581d53a init\n</code></pre></div></div>\n<p data-sourcepos=\"331:1-331:243\">コミット <code>update6~8</code> がまとまりましたが、コミットメッセージは何も聞かれませんでした。これは <code>f</code> コマンドはコミットメッセージはそのままコミットをまとめるものだからです。</p>\n<h3 data-sourcepos=\"333:1-333:79\">\n<span id=\"r-reword--use-commit-but-edit-the-commit-message-を使ってみよう\" class=\"fragment\"></span><a href=\"#r-reword--use-commit-but-edit-the-commit-message-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"><i class=\"fa fa-link\"></i></a><code>r, reword = use commit, but edit the commit message</code> を使ってみよう</h3>\n<p data-sourcepos=\"335:1-335:67\"><code>r</code> を使ってコミットのメッセージを変更しよう。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"337:1-342:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git rebase <span class=\"nt\">-i</span> 581d53a\n\npick 0cd592f update2 and update3\nr 3c72cf0 update 8\n</code></pre></div></div>\n<p data-sourcepos=\"344:1-344:36\">するとvimが立ち上がるので</p>\n<div class=\"code-frame\" data-lang=\"vim\" data-sourcepos=\"346:1-348:3\"><div class=\"highlight\"><pre><code><span class=\"k\">last</span> commit \n</code></pre></div></div>\n<p data-sourcepos=\"350:1-350:84\">と入力して閉じるとコミットメッセージが変更されています。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"352:1-358:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git log <span class=\"nt\">--oneline</span>\n\n1826743 <span class=\"o\">(</span>HEAD -&gt; master<span class=\"o\">)</span> last commit\n0cd592f update2 and update3\n581d53a init\n</code></pre></div></div>\n<p data-sourcepos=\"360:1-360:69\">実は一番最後のコミットメッセージの変更でしたら</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"362:1-364:3\"><div class=\"highlight\"><pre><code>git commit <span class=\"nt\">--amend</span>\n</code></pre></div></div>\n<p data-sourcepos=\"366:1-366:21\">で大丈夫です。</p>\n<div class=\"code-frame\" data-lang=\"vim\" data-sourcepos=\"368:1-370:3\"><div class=\"highlight\"><pre><code><span class=\"k\">last</span> commit <span class=\"p\">(</span><span class=\"m\">2</span><span class=\"p\">)</span>\n</code></pre></div></div>\n<p data-sourcepos=\"372:1-372:33\">に編集してみましょう。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"374:1-379:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git log <span class=\"nt\">--oneline</span>\n89a9f1c <span class=\"o\">(</span>HEAD -&gt; master<span class=\"o\">)</span> last commit <span class=\"o\">(</span>2<span class=\"o\">)</span>\n0cd592f update2 and update3\n581d53a init\n</code></pre></div></div>\n<h3 data-sourcepos=\"381:1-381:51\">\n<span id=\"d-drop--remove-commit-を使ってみよう\" class=\"fragment\"></span><a href=\"#d-drop--remove-commit-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"><i class=\"fa fa-link\"></i></a><code>d, drop = remove commit</code> を使ってみよう</h3>\n<p data-sourcepos=\"383:1-383:125\">実は最後のコミットは使わないコミットでした。的な場合は <code>d</code> オプションで消しましょう。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"385:1-390:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git rebase <span class=\"nt\">-i</span> 581d53a\n\npick 0cd592f update2 and update3\nd 89a9f1c last commit <span class=\"o\">(</span>2<span class=\"o\">)</span>\n</code></pre></div></div>\n<p data-sourcepos=\"392:1-392:51\">最後のコミットを消せたと思います。</p>\n<div class=\"code-frame\" data-lang=\"shell\" data-sourcepos=\"394:1-407:3\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>git log <span class=\"nt\">--oneline</span>\n0cd592f <span class=\"o\">(</span>HEAD -&gt; master<span class=\"o\">)</span> update2 and update3\n581d53a init\n\n<span class=\"nv\">$ </span><span class=\"nb\">cat </span>text.md\nFirst line\nline2\nline3\nline4\nline5\nline6\nline7\n</code></pre></div></div>\n<p data-sourcepos=\"409:1-409:26\">line8が消えました。</p>\n<h3 data-sourcepos=\"411:1-411:45\">\n<span id=\"p-pick--use-commit-を使ってみる\" class=\"fragment\"></span><a href=\"#p-pick--use-commit-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a><code>p, pick = use commit</code> を使ってみる</h3>\n<p data-sourcepos=\"413:1-413:92\">今まで何回も使っていましたね。何もしないのが <code>pick</code> みたいです。</p>\n<h3 data-sourcepos=\"415:1-415:84\">\n<span id=\"x-exec--run-command-the-rest-of-the-line-using-shell-を使ってみよう\" class=\"fragment\"></span><a href=\"#x-exec--run-command-the-rest-of-the-line-using-shell-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"><i class=\"fa fa-link\"></i></a><code>x, exec = run command (the rest of the line) using shell</code> を使ってみよう</h3>\n<p data-sourcepos=\"417:1-417:313\"><code>x</code> コマンドはすごくいろんなことができるので調べてみると楽しいかもしれません。今回は先人たちの記事の紹介のみにとどめておきます。理由は、私がこれを使わなければいけないシチュエーションを思いつかなかったからです。</p>\n<p data-sourcepos=\"419:1-419:310\">以下の記事では <code>exec git stash pop; git commit -a --amend -C HEAD</code> や <code>exec ruby -e '$&lt;.read == \"Alfa\\nBravo\\n\" ? exit(0) : exit(1)' &lt; example.txt</code> などが紹介されており、gitの他のコマンドを実行したり、rubyを実行したり、さまざまな使用例がありそうでした。</p>\n<ul data-sourcepos=\"421:1-424:0\">\n<li data-sourcepos=\"421:1-421:223\"><a href=\"https://yu8mada.com/2018/08/23/if-you-drastically-rewrite-git-s-commit-history-git-rebase-i-is-recommended/#content-1-8\" rel=\"nofollow noopener\" target=\"_blank\">Git のコミット履歴を大胆に書き換えるなら git rebase -i がオススメ - yu8mada</a></li>\n<li data-sourcepos=\"422:1-424:0\"><a href=\"https://qiita.com/yuku_t/items/fed530acb97385ecbeee\" id=\"reference-67e7a0801daf78591a24\">git-rebaseのexecを使ってstashした内容を履歴に埋め込む<br>\n</a></li>\n</ul>\n<h2 data-sourcepos=\"425:1-425:15\">\n<span id=\"終わりに\" class=\"fragment\"></span><a href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>終わりに</h2>\n<p data-sourcepos=\"427:1-427:82\"><code>git rebase -i</code> のときのオプションはいかがだったでしょうか！</p>\n<p data-sourcepos=\"429:1-429:135\">ドキュメントを読んで知っていたけど、実際に使ったのは初めて、というのもあるかもしれません。</p>\n<p data-sourcepos=\"431:1-431:69\">最後まで読んでいただきありがとうございました！</p>\n<p data-sourcepos=\"436:1-436:1\">.</p>\n","body":"# `git rebase -i` したときのコマンドをすべて試してみた(p, r, e,s ,f ,x ,d)\n\nいわゆる `git rebase -i HEAD~~` とかしたときに出てくる下のほうに出てくるコメントアウトされているコマンドのことを今回まとめます。\n\n```shell\npick 85b703f update 2\npick 4d9e3ec update 3\n\n# Rebase 5d6b0f5..1fc7711 onto 5d6b0f5 (6 commands)\n#\n# Commands:\n# p, pick = use commit\n# r, reword = use commit, but edit the commit message\n# e, edit = use commit, but stop for amending\n# s, squash = use commit, but meld into previous commit\n# f, fixup = like \"squash\", but discard this commit's log message\n# x, exec = run command (the rest of the line) using shell\n# d, drop = remove commit\n#\n# These lines can be re-ordered; they are executed from top to bottom.\n#\n# If you remove a line here THAT COMMIT WILL BE LOST.\n#\n# However, if you remove everything, the rebase will be aborted.\n#\n# Note that empty commits are commented out\n```\n\n|  | 英語 | なんとなく適当な日本語訳 |\n| :-: | :-: | :-: |\n| p, pick | use commit | コミットを使う |\n| r, reword | use commit, but edit the commit message | コミットを使うが、コミットメッセージを編集する |\n| e, edit | use commit, but stop for amending | コミットを使うが、修正を止める |\n| s, squash | use commit, but meld into previous commit | コミットを使うが、以前のコミットに混ぜる |\n| f, fixup | like \"squash\", but discard this commit's log message | squashと似ているが、コミットメッセージは破棄する |\n| x, exec | run command (the rest of the line) using shell | シェルを使用して、残りのコマンドを実行する |\n| d, drop | remove commit | コミットを削除する |\n\n## はじめに\n\nこれはgitの正確に記述しして、きちんと学んで形からはいる！！というタイプの記事ではないです。\n実際に体験して、なんとなく理解してみようという記事です。\n\nきちんとした記事は以下のようなのを参考にしてください。\n\n- [サルでもわかるGit入門〜バージョン管理を使いこなそう〜【プロジェクト管理ツールBacklog】](https://backlog.com/ja/git-tutorial/)\n\n\n## 実際に使ってみる\n\nディレクトリの作成とgitをスタートさせる。\n\n```shell\n$ mkdir git-work\n$ cd git-work\n$ git init\nInitialized empty Git repository in /home/hirao/workspace/git-work/.git/\n```\n\nもし途中でgit操作を間違って最初に戻りたくなったら\n\n```shell\n$ rm -fr .git/\n$ git init\n# もうちょっといい方法ありますか…？\n```\n\nでやり直してください。\n\n### ファイルの作成\n\n\n```shell\necho 'First line' >> text.md \ngit add .\ngit commit -m 'init'\n\necho 'line2' >> text.md && git commit -am 'update 2'\necho 'line3' >> text.md && git commit -am 'update 3'\necho 'line4' >> text.md && git commit -am 'update 4'\necho 'line5' >> text.md\necho 'line6' >> text.md && git commit -am 'update 6'\necho 'line7' >> text.md && git commit -am 'update 7'\necho 'line8' >> text.md && git commit -am 'update 8'\n```\n\n一気上をすべてターミナルに流し込む。\n\nファイルの中身を確認してみましょう。！！\n\n```shell\nyk:git-work yk$ cat text.md \nFirst line\nline2\nline3\nline4\nline5\nline6\nline7\nline8\n```\n\nちゃんとファイルの中身があることを確認します。\n\nそしてGITのコミットのハッシュを `git log` で確認しておきましょう\n\n```shell\n$ git log --oneline\n\n6e4cd32 (HEAD -> master) update 8\n607b771 update 7\nda03d43 update 6\nbf8452b update 4\n89b026f update 3\nda1c070 update 2\n581d53a init\n```\n\n### `s, squash = use commit, but meld into previous commit` を使ってみる\n\nsquashは `use commit, but meld into previous commit` というメッセージでしたね。私はコミットをまとめるときによく使ってます！。最初のコミットは `init` というコミットメッセージをつけたので、grepして見つけます。上のように `git log --oneline` で一番下のやつをコピペしても可能です。\n\n```shell\n$ git log --oneline | grep init\n\n581d53a init\n```\n\n初回のコミットを取得する。次のコミット `update 2` から編集できる。\n\n```shell\ngit rebase -i 581d53a\n```\n\n以下のように編集して。 `update2~3` をまとめてみましょう。\n\n```shell\n$ git rebase -i 581d53a\n\npick da1c070 update 2\ns 89b026f update 3\npick bf8452b update 4\npick da03d43 update 6\npick 607b771 update 7\npick 6e4cd32 update 8\n```\n\n`update2~3` は `s` オプションでの編集なので、コミットメッセージの編集ができます。以下のような感じ。\n\n```shell\n$ git rebase -i 581d53a\n\nhint: Waiting for your editor to close the file... \n# This is a combination of 2 commits.\n# This is the 1st commit message:\n\nupdate 2\n\n# This is the commit message #2:\n\nupdate 3\n```\n\nこれを\n\n```vim\nupdate2 and update3\n```\n\nへ変更。\n\n```shell\n$ git log --oneline  \n\n0317cc1 (HEAD -> master) update 8\na1526af update 7\n27bce0d update 6\n764c9ea update 4\n3e13197 update2 and update3\n581d53a init\n```\n\n\nとなりました。\n\n### `e, edit = use commit, but stop for amending` を使ってみる\n\n間違って `update 5` というコミットを作るつもりだったのに、 `update6` にまとまっています。編集しましょう。\n\n```shell\n$  git log --oneline\n\n0317cc1 (HEAD -> master) update 8\na1526af update 7\n27bce0d update 6\n764c9ea update 4\n3e13197 update2 and update3\n581d53a init\n```\n\nまた init コミットまでのrebaseをしましょう。\n\n```shell\ngit rebase -i 581d53a\n```\n\n出てきた画面で以下のように `update 6` の `pick` を `e` に変更して、以下のようにする。\n\n```vim\npick 3e13197 update2 and update3\npick 764c9ea update 4\ne 27bce0d update 6\npick a1526af update 7\npick 0317cc1 update 8\n```\n\n以下のような感じになって、rebaseがストップします。\n\n```shell\n$ git rebase -i 581d53a\n\nStopped at 27bce0d...  update 6\nYou can amend the commit now, with\n\n  git commit --amend \n\nOnce you are satisfied with your changes, run\n\n  git rebase --continue\n```\n\n最後のコミットを確認します。これを編集してコミットするか、リセットしてやりなおすか…\n\n```shell\n$ g show \n\ncommit 27bce0d8e8e4c9ef38ae702d7259b72ee775e6a5 (HEAD)\nAuthor: Yuki <author@example.com>\nDate:   Mon Sep 16 21:41:29 2019 +0900\n\n    update 6\n\ndiff --git a/text.md b/text.md\nindex a5e67f7..d3a7cc2 100644\n--- a/text.md\n+++ b/text.md\n@@ -2,3 +2,5 @@ First line\n line2\n line3\n line4\n+line5\n+line6\n```\n\n一個前のコミットを削除しましょう。！！ `line5` と `line6` という行を追加したコミットです。\n\n```shell\n$ git reset --hard HEAD~\nHEAD is now at 764c9ea update 4\n\n$ git log --oneline\n764c9ea (HEAD) update 4\n3e13197 update2 and update3\n581d53a init\n```\n\nこの時、 `update 4` までしか表示してないのは、rebaseの途中で動作を止めるオプション `e/edit` を使ったからです。 \nコミット削除したら、一行ずつ追加してコミットしていきます。\n\n```shell\n$ echo 'line5' >> text.md && git commit -am 'update 5'\n$ echo 'line6' >> text.md && git commit -am 'update 6'\n```\n\nちゃんとコミットされているか、確認します。\n\n```shell\n$ git log --oneline\nb9e284b (HEAD) update 6\nfd9fe8c update 5\n764c9ea update 4\n3e13197 update2 and update3\n581d53a init\n```\n\n大丈夫そうなら `git rebase --continue` して続けます。\n\n```shell\n$ git log --oneline\n\n818cfad (HEAD -> master) update 8\nb9fffe7 update 7\nb9e284b update 6\nfd9fe8c update 5\n764c9ea update 4\n3e13197 update2 and update3\n581d53a init\n```\n\nこれで5と6を分割できましたね。\nただしeオプションは、下手にやると `update 7` 以降のコミットによってコンフリクトが発生するので、置きをつけてください。\n\n### `f, fixup = like \"squash\", but discard this commit's log message` を使ってみる\n\nメッセージの編集なしの `s` オプションと同じです。\n\n```shell\n$ git rebase -i 581d53a\n\npick 3e13197 update2 and update3\nf 764c9ea update 4\nf fd9fe8c update 5\nf b9e284b update 6\nf b9fffe7 update 7\npick 818cfad update 8\n```\n\nと最後のコミット以外を`f` オプションをつけて `update2 and update3` にすべて統合してみましょう！！！\nコミットメッセージが確認されずにコミットされましたね。\n\n```shell\n$ git log --oneline\n\n4b3bee7 (HEAD -> master) update 8\n0cd592f update2 and update3\n581d53a init\n```\n\n\n\nコミット `update6~8` がまとまりましたが、コミットメッセージは何も聞かれませんでした。これは `f` コマンドはコミットメッセージはそのままコミットをまとめるものだからです。\n\n### `r, reword = use commit, but edit the commit message` を使ってみよう\n\n`r` を使ってコミットのメッセージを変更しよう。\n\n```shell\n$ git rebase -i 581d53a\n\npick 0cd592f update2 and update3\nr 3c72cf0 update 8\n```\n\nするとvimが立ち上がるので\n\n```vim\nlast commit \n```\n\nと入力して閉じるとコミットメッセージが変更されています。\n\n```shell\n$ git log --oneline\n\n1826743 (HEAD -> master) last commit\n0cd592f update2 and update3\n581d53a init\n```\n\n実は一番最後のコミットメッセージの変更でしたら\n\n```shell\ngit commit --amend\n```\n\nで大丈夫です。\n\n```vim\nlast commit (2)\n```\n\nに編集してみましょう。\n\n```shell\n$ git log --oneline\n89a9f1c (HEAD -> master) last commit (2)\n0cd592f update2 and update3\n581d53a init\n```\n\n### `d, drop = remove commit` を使ってみよう\n\n実は最後のコミットは使わないコミットでした。的な場合は `d` オプションで消しましょう。\n\n```shell\n$ git rebase -i 581d53a\n\npick 0cd592f update2 and update3\nd 89a9f1c last commit (2)\n```\n\n最後のコミットを消せたと思います。\n\n```shell\n$ git log --oneline\n0cd592f (HEAD -> master) update2 and update3\n581d53a init\n\n$ cat text.md\nFirst line\nline2\nline3\nline4\nline5\nline6\nline7\n```\n\nline8が消えました。\n\n### `p, pick = use commit` を使ってみる\n\n今まで何回も使っていましたね。何もしないのが `pick` みたいです。\n\n### `x, exec = run command (the rest of the line) using shell` を使ってみよう\n\n`x` コマンドはすごくいろんなことができるので調べてみると楽しいかもしれません。今回は先人たちの記事の紹介のみにとどめておきます。理由は、私がこれを使わなければいけないシチュエーションを思いつかなかったからです。\n\n以下の記事では `exec git stash pop; git commit -a --amend -C HEAD` や `exec ruby -e '$<.read == \"Alfa\\nBravo\\n\" ? exit(0) : exit(1)' < example.txt` などが紹介されており、gitの他のコマンドを実行したり、rubyを実行したり、さまざまな使用例がありそうでした。\n\n- [Git のコミット履歴を大胆に書き換えるなら git rebase -i がオススメ - yu8mada](https://yu8mada.com/2018/08/23/if-you-drastically-rewrite-git-s-commit-history-git-rebase-i-is-recommended/#content-1-8)\n- [git-rebaseのexecを使ってstashした内容を履歴に埋め込む\n](https://qiita.com/yuku_t/items/fed530acb97385ecbeee)\n\n## 終わりに\n\n`git rebase -i` のときのオプションはいかがだったでしょうか！\n\nドキュメントを読んで知っていたけど、実際に使ったのは初めて、というのもあるかもしれません。\n\n最後まで読んでいただきありがとうございました！\n\n\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2019-09-17T15:24:55+09:00","group":null,"id":"e9f723a553d4eb050817","likes_count":15,"private":false,"reactions_count":0,"stocks_count":9,"tags":[{"name":"Git","versions":[]},{"name":"rebase","versions":[]}],"title":"【git rebase -i】したときのコマンドをすべて試してみた(p, r, e,s ,f ,x ,d)","updated_at":"2023-02-26T23:50:54+09:00","url":"https://qiita.com/ykhirao/items/e9f723a553d4eb050817","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:70\">\n<span id=\"markdown99秒で3x3の表を作るchrome拡張を作った\" class=\"fragment\"></span><a href=\"#markdown99%E7%A7%92%E3%81%A73x3%E3%81%AE%E8%A1%A8%E3%82%92%E4%BD%9C%E3%82%8Bchrome%E6%8B%A1%E5%BC%B5%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F\"><i class=\"fa fa-link\"></i></a>【Markdown】9.9秒で3x3の表を作るChrome拡張を作った。</h1>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"3:1-5:3\"><div class=\"highlight\"><pre><code>時間測定2: 9971.44091796875ms\n</code></pre></div></div>\n<p data-sourcepos=\"7:1-7:36\">ボルト並みの速度ですね。</p>\n<p data-sourcepos=\"9:1-9:137\"><a href=\"https://camo.qiitausercontent.com/60889f8ab4f7126765b34ac517a9071a83e7db1d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f66636131623266632d643336382d386232302d356535312d6362653131373337366234662e676966\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ffca1b2fc-d368-8b20-5e51-cbe117376b4f.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a1399f485d19324f8fcb41298c4b2430\" alt=\"Peek 2019-08-30 11-30.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/fca1b2fc-d368-8b20-5e51-cbe117376b4f.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ffca1b2fc-d368-8b20-5e51-cbe117376b4f.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=44854c7948b0377574f5673daef1e659 1x\" loading=\"lazy\"></a></p>\n<p data-sourcepos=\"11:1-11:15\">作った表。</p>\n<table data-sourcepos=\"13:1-16:10\">\n<thead>\n<tr data-sourcepos=\"13:1-13:10\">\n<th style=\"text-align: center\" data-sourcepos=\"13:2-13:3\"></th>\n<th style=\"text-align: center\" data-sourcepos=\"13:5-13:6\"></th>\n<th style=\"text-align: center\" data-sourcepos=\"13:8-13:9\"></th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"15:1-15:10\">\n<td style=\"text-align: center\" data-sourcepos=\"15:2-15:3\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"15:5-15:6\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"15:8-15:9\"></td>\n</tr>\n<tr data-sourcepos=\"16:1-16:10\">\n<td style=\"text-align: center\" data-sourcepos=\"16:2-16:3\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"16:5-16:6\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"16:8-16:9\"></td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"18:1-18:24\">\n<span id=\"ちゃんとした表\" class=\"fragment\"></span><a href=\"#%E3%81%A1%E3%82%83%E3%82%93%E3%81%A8%E3%81%97%E3%81%9F%E8%A1%A8\"><i class=\"fa fa-link\"></i></a>ちゃんとした表</h2>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"20:1-22:3\"><div class=\"highlight\"><pre><code>時間測定: 40985.581787109375ms\n</code></pre></div></div>\n<p data-sourcepos=\"24:1-24:105\">40.9秒なので、<code>400m ウェイド・バンニーキルク</code> さんくらいの記録でしょうか。</p>\n<p data-sourcepos=\"26:1-26:137\"><a href=\"https://camo.qiitausercontent.com/aa467ccd655cfff1e23def8a106512af2c5fbfe6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f61366661353537322d636364302d643834302d303337322d6665653038656131383762612e676966\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a6fa5572-ccd0-d840-0372-fee08ea187ba.gif\" alt=\"Peek 2019-08-30 11-28.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a6fa5572-ccd0-d840-0372-fee08ea187ba.gif\" loading=\"lazy\"></a></p>\n<table data-sourcepos=\"28:1-31:30\">\n<thead>\n<tr data-sourcepos=\"28:1-28:46\">\n<th style=\"text-align: center\" data-sourcepos=\"28:2-28:3\"></th>\n<th style=\"text-align: center\" data-sourcepos=\"28:5-28:24\">緊急度（高）</th>\n<th style=\"text-align: center\" data-sourcepos=\"28:26-28:45\">緊急度（低）</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"30:1-30:30\">\n<td style=\"text-align: center\" data-sourcepos=\"30:2-30:21\">重要度（高）</td>\n<td style=\"text-align: center\" data-sourcepos=\"30:23-30:25\">1</td>\n<td style=\"text-align: center\" data-sourcepos=\"30:27-30:29\">2</td>\n</tr>\n<tr data-sourcepos=\"31:1-31:30\">\n<td style=\"text-align: center\" data-sourcepos=\"31:2-31:21\">重要度（低）</td>\n<td style=\"text-align: center\" data-sourcepos=\"31:23-31:25\">3</td>\n<td style=\"text-align: center\" data-sourcepos=\"31:27-31:29\">4</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"33:1-33:24\">\n<span id=\"拡張へのリンク\" class=\"fragment\"></span><a href=\"#%E6%8B%A1%E5%BC%B5%E3%81%B8%E3%81%AE%E3%83%AA%E3%83%B3%E3%82%AF\"><i class=\"fa fa-link\"></i></a>拡張へのリンク</h2>\n<p data-sourcepos=\"35:1-35:106\"><iframe id=\"qiita-embed-content__c560cb95d327f1caf559bc476871b5ed\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__c560cb95d327f1caf559bc476871b5ed\" data-content=\"https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Ftable-to-markdown-creater%2Fhhahknpikfglcfiepppleiobpgdfaank%3Fhl%3Dja\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<h2 data-sourcepos=\"37:1-37:33\">\n<span id=\"ちょっとした技術解説\" class=\"fragment\"></span><a href=\"#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%97%E3%81%9F%E6%8A%80%E8%A1%93%E8%A7%A3%E8%AA%AC\"><i class=\"fa fa-link\"></i></a>ちょっとした技術解説</h2>\n<p data-sourcepos=\"39:1-39:58\">GitHub <a href=\"https://github.com/ykhirao/apps/tree/master/Md2Html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/ykhirao/apps/tree/master/Md2Html</a></p>\n<ul data-sourcepos=\"42:1-46:0\">\n<li data-sourcepos=\"42:1-42:51\">\n<code>Vue create</code> で作った普通のVue.jsアプリ</li>\n<li data-sourcepos=\"43:1-43:79\">\n<code>build</code> で <code>dist/</code> というディレクトリにバンドルしています</li>\n<li data-sourcepos=\"44:1-44:142\">\n<code>cp:contents</code> で、その時に必須のファイルをコピーしてます(webpackに任せる方法でやっても可だと思います)</li>\n<li data-sourcepos=\"45:1-46:0\">\n<code>zip</code> でChrome拡張配布ようにZIPファイルに変換しています</li>\n</ul>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"47:1-55:3\">\n<div class=\"code-lang\"><span class=\"bold\">package.json</span></div>\n<div class=\"highlight\"><pre><code><span class=\"w\">  </span><span class=\"nl\">\"scripts\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"serve\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"vue-cli-service serve\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"lint\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"vue-cli-service lint\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"build\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"vue-cli-service build &amp;&amp; npm run cp:contents\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"zip\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"bestzip TableToMd.zip dist/*\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"cp:contents\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"cpx src/manifest.json dist/ &amp;&amp; cpx src/icon-128.png dist/\"</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"err\">,</span><span class=\"w\">\n</span></code></pre></div>\n</div>\n<h2 data-sourcepos=\"57:1-57:48\">\n<span id=\"開発してちょっと詰まったところ\" class=\"fragment\"></span><a href=\"#%E9%96%8B%E7%99%BA%E3%81%97%E3%81%A6%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E8%A9%B0%E3%81%BE%E3%81%A3%E3%81%9F%E3%81%A8%E3%81%93%E3%82%8D\"><i class=\"fa fa-link\"></i></a>開発してちょっと詰まったところ</h2>\n<div class=\"code-frame\" data-lang=\"json\" data-sourcepos=\"59:1-81:3\">\n<div class=\"code-lang\"><span class=\"bold\">manifest.json</span></div>\n<div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"manifest_version\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"version\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"0.1\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Table To Markdown Creater\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"short_name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"TableToMd\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Chrome and Firefox exetension\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"browser_action\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"default_icon\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"19\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"icon-128.png\"</span><span class=\"w\">\n    </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"default_popup\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"index.html\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"default_title\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"TableToMd\"</span><span class=\"w\">\n  </span><span class=\"p\">},</span><span class=\"w\">\n  </span><span class=\"nl\">\"homepage_url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/ykhirao/TableToMd\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"icons\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"128\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"icon-128.png\"</span><span class=\"w\">\n  </span><span class=\"p\">},</span><span class=\"w\">\n  </span><span class=\"nl\">\"permissions\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n    </span><span class=\"s2\">\"activeTab\"</span><span class=\"w\">\n  </span><span class=\"p\">]</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div>\n</div>\n<p data-sourcepos=\"83:1-84:54\"><code>permissions</code> は <code>http://*</code> とかにすると審査が伸びるみたいな雰囲気でした。途中で <code>activeTab</code> に変更して、3日で審査追えました。<br>\n<code>manifest_version</code> は <code>2</code> 固定みたいですね。</p>\n<p data-sourcepos=\"86:1-86:87\">ちゃんと公式を確認してから開発始めたほうがいいと思います。</p>\n<h2 data-sourcepos=\"88:1-88:33\">\n<span id=\"gsuite使っている人向け\" class=\"fragment\"></span><a href=\"#gsuite%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E4%BA%BA%E5%90%91%E3%81%91\"><i class=\"fa fa-link\"></i></a>Gsuite使っている人向け</h2>\n<p data-sourcepos=\"90:1-90:217\">Chrome拡張の開発と公開は普通5ドルの課金が必要ですが、同じGsuite内だけの配布なら課金なしで始めれるので、社内ツールとか作るのはとてもよいと思いました。</p>\n<h2 data-sourcepos=\"92:1-92:12\">\n<span id=\"ゆる募\" class=\"fragment\"></span><a href=\"#%E3%82%86%E3%82%8B%E5%8B%9F\"><i class=\"fa fa-link\"></i></a>ゆる募</h2>\n<ul data-sourcepos=\"94:1-96:0\">\n<li data-sourcepos=\"94:1-94:35\">スタイルあててくれる人</li>\n<li data-sourcepos=\"95:1-96:0\">アイコン作ってくれる人</li>\n</ul>\n<h2 data-sourcepos=\"97:1-97:12\">\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h2>\n<p data-sourcepos=\"99:1-99:60\">読んでいただきありがとうございました！！</p>\n","body":"# 【Markdown】9.9秒で3x3の表を作るChrome拡張を作った。\n\n```\n時間測定2: 9971.44091796875ms\n```\n\nボルト並みの速度ですね。\n\n![Peek 2019-08-30 11-30.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/fca1b2fc-d368-8b20-5e51-cbe117376b4f.gif)\n\n作った表。\n\n|  |  |  |\n| :-: | :-: | :-: |\n|  |  |  |\n|  |  |  |\n\n## ちゃんとした表\n\n```\n時間測定: 40985.581787109375ms\n```\n\n40.9秒なので、`400m ウェイド・バンニーキルク` さんくらいの記録でしょうか。\n\n![Peek 2019-08-30 11-28.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/a6fa5572-ccd0-d840-0372-fee08ea187ba.gif)\n\n|  | 緊急度（高） | 緊急度（低） |\n| :-: | :-: | :-: |\n| 重要度（高） | 1 | 2 |\n| 重要度（低） | 3 | 4 |\n\n## 拡張へのリンク\n\nhttps://chrome.google.com/webstore/detail/table-to-markdown-creater/hhahknpikfglcfiepppleiobpgdfaank?hl=ja\n\n## ちょっとした技術解説\n\nGitHub https://github.com/ykhirao/apps/tree/master/Md2Html\n\n\n- `Vue create` で作った普通のVue.jsアプリ\n- `build` で `dist/` というディレクトリにバンドルしています\n- `cp:contents` で、その時に必須のファイルをコピーしてます(webpackに任せる方法でやっても可だと思います)\n- `zip` でChrome拡張配布ようにZIPファイルに変換しています\n\n```package.json\n  \"scripts\": {\n    \"serve\": \"vue-cli-service serve\",\n    \"lint\": \"vue-cli-service lint\",\n    \"build\": \"vue-cli-service build && npm run cp:contents\",\n    \"zip\": \"bestzip TableToMd.zip dist/*\",\n    \"cp:contents\": \"cpx src/manifest.json dist/ && cpx src/icon-128.png dist/\"\n  },\n```\n\n## 開発してちょっと詰まったところ\n\n```manifest.json\n{\n  \"manifest_version\": 2,\n  \"version\": \"0.1\",\n  \"name\": \"Table To Markdown Creater\",\n  \"short_name\": \"TableToMd\",\n  \"description\": \"Chrome and Firefox exetension\",\n  \"browser_action\": {\n    \"default_icon\": {\n      \"19\": \"icon-128.png\"\n    },\n    \"default_popup\": \"index.html\",\n    \"default_title\": \"TableToMd\"\n  },\n  \"homepage_url\": \"https://github.com/ykhirao/TableToMd\",\n  \"icons\": {\n    \"128\": \"icon-128.png\"\n  },\n  \"permissions\": [\n    \"activeTab\"\n  ]\n}\n```\n\n`permissions` は `http://*` とかにすると審査が伸びるみたいな雰囲気でした。途中で `activeTab` に変更して、3日で審査追えました。\n`manifest_version` は `2` 固定みたいですね。\n\nちゃんと公式を確認してから開発始めたほうがいいと思います。\n\n## Gsuite使っている人向け\n\nChrome拡張の開発と公開は普通5ドルの課金が必要ですが、同じGsuite内だけの配布なら課金なしで始めれるので、社内ツールとか作るのはとてもよいと思いました。\n\n## ゆる募\n\n- スタイルあててくれる人\n- アイコン作ってくれる人\n\n## 最後に\n\n読んでいただきありがとうございました！！\n\n\n","coediting":false,"comments_count":0,"created_at":"2019-08-30T11:50:01+09:00","group":null,"id":"926576fd39d344466d48","likes_count":6,"private":false,"reactions_count":0,"stocks_count":2,"tags":[{"name":"JavaScript","versions":[]},{"name":"Markdown","versions":[]},{"name":"chrome-extension","versions":[]},{"name":"md","versions":[]},{"name":"Vue.js","versions":[]}],"title":"【Markdown】9.9秒で3x3の表を作るChrome拡張を作った。","updated_at":"2022-08-05T16:20:14+09:00","url":"https://qiita.com/ykhirao/items/926576fd39d344466d48","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"laravelvuejs勉強会10\" class=\"fragment\"></span><a href=\"#laravelvuejs%E5%8B%89%E5%BC%B7%E4%BC%9A10\"><i class=\"fa fa-link\"></i></a>Laravel/Vue.js勉強会#10</h1>\n\n<h2>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h2>\n\n<p>この記事は 先日の <a href=\"https://laravue.connpass.com/event/122581/\" rel=\"nofollow noopener\" target=\"_blank\">Laravel/Vue.js勉強会</a> に行ってきた感想・ポエムになります（ブログ枠）。基本的に資料は<a href=\"https://laravue.connpass.com/event/122581/presentation/\" rel=\"nofollow noopener\" target=\"_blank\">コンパス</a> にまとまっていますが、それぞれ独断と偏見で紹介していきたいと思います。発表者さんの資料を最後まで読んで欲しいなと思い、そこを目指して紹介できればと思います。主催ROXXさんの<a href=\"https://techblog.scouter.co.jp/entry/2019/07/22/120000\" rel=\"nofollow noopener\" target=\"_blank\">ブログ</a>にも内容よくまとまってます。。</p>\n\n<h2>\n<span id=\"6人分のlt紹介\" class=\"fragment\"></span><a href=\"#6%E4%BA%BA%E5%88%86%E3%81%AElt%E7%B4%B9%E4%BB%8B\"><i class=\"fa fa-link\"></i></a>6人分のLT紹介</h2>\n\n<h3>\n<span id=\"1-storybookを用いたvuejs共通コンポーネント開発との戦い--stores-fights-storybook\" class=\"fragment\"></span><a href=\"#1-storybook%E3%82%92%E7%94%A8%E3%81%84%E3%81%9Fvuejs%E5%85%B1%E9%80%9A%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E9%96%8B%E7%99%BA%E3%81%A8%E3%81%AE%E6%88%A6%E3%81%84--stores-fights-storybook\"><i class=\"fa fa-link\"></i></a>1. Storybookを用いたVue.js共通コンポーネント開発との戦い / stores-fights-storybook</h3>\n\n<p>Slide is <a href=\"https://speakerdeck.com/howdy39/stores-fights-storybook\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://speakerdeck.com/howdy39/stores-fights-storybook</a><br>\nPresenter is <a href=\"/howdy39\" class=\"user-mention js-hovercard\" title=\"howdy39\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"howdy39\">@howdy39</a> (間違いとかあったら編集リクエストとかコメントください <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"> )</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">\n<a href=\"https://speakerdeck.com/howdy39/stores-fights-storybook?slide=16\" rel=\"nofollow noopener\" target=\"_blank\">ここ</a> がポイント！</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/e825250519ff0535b15d8bb72e1cb68c557cbe52/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f36663462366534382d393861372d303935362d653630622d6432386532623662333462382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6f4b6e48-98a7-0956-e60b-d28e2b6b34b8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=331bff43f46e0970afdc27ca7be23b82\" alt=\"Screenshot from 2019-07-19 22-22-48.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6f4b6e48-98a7-0956-e60b-d28e2b6b34b8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F6f4b6e48-98a7-0956-e60b-d28e2b6b34b8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=05c87dca19e92421884ce73ef6276c29 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n\n<p>画像回帰テストで、自動で変化したスタイルの部分を、色付き画像で表示してくれるところの図。</p>\n\n<p>Vue.jsとかフロントエンドのコンポーネント管理はCSSの影響範囲を指定できる <code>scoped</code> があったりして、他のコンポーネントに影響を与えないように作られていますよね。だけど、それだけ綺麗に管理したとしてもどうしても意図せずCSSが崩れたりするときがあると思います。</p>\n\n<p>そこで、毎回目視チェックしなくていいように <strong>画像回帰テスト</strong> という分野で <strong>機械にやらせよう</strong> と、CIで自動的にスタイルのチェックを発火させる内容になります。とても興味深く発表を聞かせていただきました。画像回帰テストを入れるにあたって、Storybookやプライベートレポジトリでモジュール配布しないといけなかったりとか、さまざまな躓きポイントがまとまっているので、ぜひ資料を読んでみてほしいです。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\"><div class=\"highlight\"><pre><code>// Vueのscoped CSSの書き方の例\n<span class=\"nt\">&lt;</span><span class=\"k\">style</span> <span class=\"na\">scoped</span><span class=\"nt\">&gt;</span>\n<span class=\"nc\">.example</span> <span class=\"p\">{</span>\n  <span class=\"nl\">color</span><span class=\"p\">:</span> <span class=\"no\">red</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">style</span><span class=\"nt\">&gt;</span>\n</code></pre></div></div>\n\n<h3>\n<span id=\"2-vuex-ormの紹介\" class=\"fragment\"></span><a href=\"#2-vuex-orm%E3%81%AE%E7%B4%B9%E4%BB%8B\"><i class=\"fa fa-link\"></i></a>2. Vuex-ORMの紹介</h3>\n\n<p>Slide is <a href=\"https://www.slideshare.net/ShoichiYashiro/vuex-orm-156257976\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.slideshare.net/ShoichiYashiro/vuex-orm-156257976</a><br>\nSlide Qiita版 <a href=\"https://qiita.com/YaCpotato/items/b51384652659a400a2b9\" id=\"reference-1f24b0809a2f840b188a\">DBをフロントに持てる！Vuex-ORM環境構築と動作確認</a><br>\nPresenter is <a href=\"/YaCpotato\" class=\"user-mention js-hovercard\" title=\"YaCpotato\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"YaCpotato\">@YaCpotato</a>  (間違いとかあったら編集リクエストとかコメントください <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"> )</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">10ページ目がポイント！</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/00a49dfd010ce292e26c98cc6a314d8c1566afaf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f66643535656332322d616432632d336130652d313238302d6163373562323235346566632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ffd55ec22-ad2c-3a0e-1280-ac75b2254efc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1f5913fd6b7fba2f8c2760207c88a96d\" alt=\"Screenshot from 2019-07-19 22-46-13.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/fd55ec22-ad2c-3a0e-1280-ac75b2254efc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Ffd55ec22-ad2c-3a0e-1280-ac75b2254efc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=af3c68e4cf6ebe1628a6fd16c7556db1 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n\n<p>複数のUserがいて、複数のTodosが紐付いている場合のデータ構造って複雑だよねってことを表している図。</p>\n\n<p>Vue.jsでデータを持たせるVuexをORM(Object-relational mapping)、要するにRailsのActive Record、LaravelのEloquent的にデータを扱うことができるよって話。<a href=\"https://github.com/vuex-orm/vuex-orm\" rel=\"nofollow noopener\" target=\"_blank\">vuex-orm/vuex-orm</a> はStarが1250なので、使っている人は普通にいそうな雰囲気ですね（長いものには巻かれるタイプです）。</p>\n\n<p>以下の様なJSONデータを取得するとき、 <code>User.find(1).with('todos').get()</code> みたいに書くと（デタラメに書いてるので雰囲気だけ味わって… <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"> ）UserのID=1に紐付いているtodosも一緒に引っ張ってこれるので、バックエンド側のORMに慣れている人はドキュメントで文法みながら書くと、比較的簡単にためせるんじゃないかなと思いました。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">data</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n<span class=\"na\">users</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n  <span class=\"p\">{</span><span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">佐藤</span><span class=\"dl\">'</span><span class=\"p\">},</span>\n  <span class=\"p\">{</span><span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">田中</span><span class=\"dl\">'</span><span class=\"p\">}</span>\n<span class=\"p\">],</span>\n<span class=\"na\">todos</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n  <span class=\"p\">{</span><span class=\"na\">user_id</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"na\">task</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">トイレ掃除</span><span class=\"dl\">'</span><span class=\"p\">},</span>\n  <span class=\"p\">{</span><span class=\"na\">user_id</span><span class=\"p\">:</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"na\">task</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">お風呂掃除</span><span class=\"dl\">'</span><span class=\"p\">},</span>\n  <span class=\"p\">{</span><span class=\"na\">user_id</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"na\">task</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">大掃除</span><span class=\"dl\">'</span><span class=\"p\">},</span>\n<span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"c1\">// たぶん普通に書くとこんな感じ？</span>\n<span class=\"kd\">const</span> <span class=\"nx\">userId</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n<span class=\"kd\">const</span> <span class=\"nx\">user</span> <span class=\"o\">=</span> <span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">users</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"nx\">x</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">x</span><span class=\"p\">.</span><span class=\"nx\">id</span> <span class=\"o\">===</span> <span class=\"nx\">userId</span><span class=\"p\">);</span>\n<span class=\"kd\">const</span> <span class=\"nx\">todos</span> <span class=\"o\">=</span> <span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">todos</span><span class=\"p\">.</span><span class=\"nx\">filter</span><span class=\"p\">(</span><span class=\"nx\">x</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">x</span><span class=\"p\">.</span><span class=\"nx\">user_id</span> <span class=\"o\">===</span> <span class=\"nx\">userId</span><span class=\"p\">);</span>\n\n<span class=\"c1\">// たしかにこんな感じのがシンプルかもしれない</span>\n<span class=\"kd\">const</span> <span class=\"nx\">user</span> <span class=\"o\">=</span> <span class=\"nx\">User</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">).</span><span class=\"kd\">with</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">todos</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"kd\">get</span><span class=\"p\">()</span>\n<span class=\"kd\">const</span> <span class=\"nx\">todos</span> <span class=\"o\">=</span> <span class=\"nx\">user</span><span class=\"p\">.</span><span class=\"nx\">todos</span> <span class=\"c1\">// constで取り出さなくてももちろん良い</span>\n</code></pre></div></div>\n\n<h3>\n<span id=\"3-laravel--aws-で-cicdしてみた話\" class=\"fragment\"></span><a href=\"#3-laravel--aws-%E3%81%A7-cicd%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F%E8%A9%B1\"><i class=\"fa fa-link\"></i></a>3. Laravel + AWS で CI/CDしてみた話</h3>\n\n<p>Slide is <a href=\"https://slides.com/koichiminamijima/laravelaws20190718\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://slides.com/koichiminamijima/laravelaws20190718</a><br>\nPresenter is <a href=\"/ikegam1\" class=\"user-mention js-hovercard\" title=\"ikegam1\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"ikegam1\">@ikegam1</a> (間違いとかあったら編集リクエストとかコメントください <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"> )</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">\n<a href=\"https://slides.com/koichiminamijima/laravelaws20190718/#/11\" rel=\"nofollow noopener\" target=\"_blank\">ここ</a>がポイント！</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/e1cf22e91f4b843ec0aa36eb8ca2dae07843dfc8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f35623430653939642d393263382d393236392d626635312d6231363364653035373963362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F5b40e99d-92c8-9269-bf51-b163de0579c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=da44fe8bbb4e10e24af5ec02be8d71b4\" alt=\"Screenshot from 2019-07-19 23-12-30.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/5b40e99d-92c8-9269-bf51-b163de0579c6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F5b40e99d-92c8-9269-bf51-b163de0579c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7d54599a3ab81f7a21224a518bdd4f7d 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n\n<p>CI/CDをほぼすべてAWSプラットフォームに乗せられるということを表している図。</p>\n\n<p>レイヤーとしては、CircleCIとかGitLabCIとかそんなところ。例えばReactのコードをwebpackでビルドしてAWSのS3に乗せて、CDN的に配布するみたいな処理をしているときに、すべてAWSプラットフォームに乗っかっているととても管理が便利そうだなと思いました。いま例にあげたのは知っている会社の実例でCircleCI使ってやってた。そんな時はこの <code>CodePipeline</code> で実装してみるのもありだなと思ったです。</p>\n\n<p>CIは知っていたけど、CI/CDという言葉に馴染みがなく、勉強になりました。感謝<img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"></p>\n\n<blockquote>\n<p>「CI」とは「Continuous Integration（継続的インテグレーション）」の略で、ソフトウェア開発におけるビルドやテストを自動化し、継続的に行うアプローチのことです。</p>\n\n<p>「CD」とは「Continuous Delivery（継続的デリバリー）」の略で、CIによってテストされたコードのマージや、本番環境向けのビルドの作成を自動的に行い、本番環境にデプロイが可能な状態を整えるプロセスのことです。</p>\n\n<p>また「CD」は「Continuous Deployment（継続的デプロイ）」の略として使われることもあります。継続的デプロイは継続的デリバリーとよく似た概念ですが、継続的デリバリーがデプロイ可能な状態を準備するだけなのに対し、継続的デプロイは実際に本番環境へのデプロイまでを行う点が異なります。</p>\n\n<p>このようなビルド、テスト、デプロイを自動化し、継続的に行う手法のことを、あわせて「CI/CD」と呼びます。</p>\n\n<p>byhttps://pfs.nifcloud.com/navi/words/ci_cd.htm</p>\n</blockquote>\n\n<h3>\n<span id=\"4-vuejsでformをatomic-designしてみた時のコンポーネント間のデータのやりとり\" class=\"fragment\"></span><a href=\"#4-vuejs%E3%81%A6%E3%82%99form%E3%82%92atomic-design%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F%E6%99%82%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%9B%E3%82%9A%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E9%96%93%E3%81%AE%E3%83%86%E3%82%99%E3%83%BC%E3%82%BF%E3%81%AE%E3%82%84%E3%82%8A%E3%81%A8%E3%82%8A\"><i class=\"fa fa-link\"></i></a>　4. Vue.jsでFormをAtomic Designしてみた時のコンポーネント間のデータのやりとり</h3>\n\n<p>Slide is <a href=\"https://www.slideshare.net/ohashiyuta/vuejsformatomic-design-156241493\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.slideshare.net/ohashiyuta/vuejsformatomic-design-156241493</a><br>\nPresenter is <a href=\"/blue_goheimochi\" class=\"user-mention js-hovercard\" title=\"blue_goheimochi\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"blue_goheimochi\">@blue_goheimochi</a> (間違いとかあったら編集リクエストとかコメントください <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"> )</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">ここは15ページだよ！</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/975dd4e4ea55589448e17e7589400ea8b174fad5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62393666643135642d643435332d353462632d376464652d3834343363646363663061622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb96fd15d-d453-54bc-7dde-8443cdccf0ab.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=326af19548497f029c15af5c8fe4b333\" alt=\"Screenshot from 2019-07-19 23-32-22.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b96fd15d-d453-54bc-7dde-8443cdccf0ab.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb96fd15d-d453-54bc-7dde-8443cdccf0ab.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1975d0ccf546fbe096b6bec68dbd4e0b 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n\n<p>フォームだと、どこがAtomic Designに適応しているか考えてみている。</p>\n\n<p>設計を学んだらすぐに自分のコードに落とし込んで考えようって思えた発表でした。実際のVue.jsのコードを見せながら、発表者さんが考えるAtomicデザインと実際のコードの落とし所とかが聞けました。</p>\n\n<blockquote>\n<p>実際に手を動かしたほうが理解がすすむ at 70page</p>\n</blockquote>\n\n<p>自分で学んだ後に実際のコードに落とし込んだことがないかたはぜひ読んでもらいたい資料になります。。！</p>\n\n<h3>\n<span id=\"5-laravelにイベントディスカバリーが実装されたので試してみる\" class=\"fragment\"></span><a href=\"#5-laravel%E3%81%AB%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%83%87%E3%82%A3%E3%82%B9%E3%82%AB%E3%83%90%E3%83%AA%E3%83%BC%E3%81%8C%E5%AE%9F%E8%A3%85%E3%81%95%E3%82%8C%E3%81%9F%E3%81%AE%E3%81%A7%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>5. Laravelにイベントディスカバリーが実装されたので試してみる</h3>\n\n<p>Qiita is <a href=\"https://qiita.com/niisan-tokyo/items/95338bc8e7a3353d7b9b\" class=\"autolink\" id=\"reference-6f55a3e649d73b685c9d\">https://qiita.com/niisan-tokyo/items/95338bc8e7a3353d7b9b</a><br>\nPresenter is <a href=\"/niisan-tokyo\" class=\"user-mention js-hovercard\" title=\"niisan-tokyo\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"niisan-tokyo\">@niisan-tokyo</a> (間違いとかあったら編集リクエストとかコメントください <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"> )</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">イベントのリスナーにフルパスで毎回書いていくの面倒だよねって話</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/a3ba45af71b97d4a1237e3ecbdf354a8fce967c9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f32636533376364322d366437612d643139662d643962362d6134663665366236646232622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2ce37cd2-6d7a-d19f-d9b6-a4f6e6b6db2b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f1b440450433a77ecb5c7da47328d4f8\" alt=\"Screenshot from 2019-07-19 23-42-26.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2ce37cd2-6d7a-d19f-d9b6-a4f6e6b6db2b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F2ce37cd2-6d7a-d19f-d9b6-a4f6e6b6db2b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=14ce74cae45234905bd483a72c762250 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n\n<p>Laravel5.8.9からイベントディスカバリーはEventServiceProviderを使わないで済むいい感じの仕組みができたって話です。パッチバージョンでいれる小さな変化なのかな、これって正直みんな思ったはず？</p>\n\n<p>既存とのEventServiceProviderとかそんなに相性がよくないので、比較的新しめの5.8.9以降で作られたプロジェクトはこの機能を使いまくる方向に倒してもいいかもしれない。正直インパクトがない変更ですが、Laravelのトレンド追っているかたはさくっと使ってみてキャッチアップしておくのもいいかもしれない。(?)</p>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code>php artisan make:event DiscoveryEvent\nphp artisan make:listener DiscoveryEventListener <span class=\"nt\">--event</span> DiscoveryEvent\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"php\">\n<div class=\"code-lang\"><span class=\"bold\">app/Listeners/DiscoveryEventListener.php</span></div>\n<div class=\"highlight\"><pre><code>    <span class=\"k\">public</span> <span class=\"k\">function</span> <span class=\"n\">handle</span><span class=\"p\">(</span><span class=\"kt\">DiscoveryEvent</span> <span class=\"nv\">$event</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span>\n        <span class=\"err\">\\</span><span class=\"nc\">Log</span><span class=\"o\">::</span><span class=\"nf\">debug</span><span class=\"p\">(</span><span class=\"s1\">'聞き届けました！'</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n</code></pre></div>\n</div>\n\n<h3>\n<span id=\"6-phpunit--openapi-validator-でスキーマが正実装が追従にする\" class=\"fragment\"></span><a href=\"#6-phpunit--openapi-validator-%E3%81%A7%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E3%81%8C%E6%AD%A3%E5%AE%9F%E8%A3%85%E3%81%8C%E8%BF%BD%E5%BE%93%E3%81%AB%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>6. PHPUnit + openapi-validator で「スキーマが正、実装が追従」にする</h3>\n\n<p>Qiita is <a href=\"https://qiita.com/kon_shou/items/6e51c5dfe55c834b99c1\" class=\"autolink\" id=\"reference-c974b734b75c1b6fd79b\">https://qiita.com/kon_shou/items/6e51c5dfe55c834b99c1</a><br>\nPresenter is <a href=\"/kon_shou\" class=\"user-mention js-hovercard\" title=\"kon_shou\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"kon_shou\">@kon_shou</a>  (間違いとかあったら編集リクエストとかコメントください <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"> )</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">スキーマに沿った実装しないとPHPUnitが落ちるところ p13</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/97d6428ee315b12a242fe59d6f34c45007fe4c11/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62343239636430382d656334382d333465322d323939352d3232623431376535383635342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb429cd08-ec48-34e2-2995-22b417e58654.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b69f6b1e62ce74d596f4c14266d1aa8d\" alt=\"Screenshot from 2019-07-22 13-33-30.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b429cd08-ec48-34e2-2995-22b417e58654.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb429cd08-ec48-34e2-2995-22b417e58654.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ec193292ee04a2dbccab3bb82e64b531 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n\n<p>スキーマの実装はとても辛い。。。とても辛いみたいですが、一度Yamlで実装すると、ドキュメントのビルドも一瞬、PHPUnitによってリファクタリングもとても信頼性高く行えると思います。</p>\n\n<p>今回はSwaggerでスキーマ書いて、PHPUnitでそのスキーマを呼び出して、とかそういうところをどう実装したらいいか書かれているので、API開発しているところは検討の余地があるのではないでしょうか。</p>\n\n<p>yamlはこんな感じ。</p>\n\n<div class=\"code-frame\" data-lang=\"yaml\"><div class=\"highlight\"><pre><code><span class=\"na\">openapi</span><span class=\"pi\">:</span> <span class=\"s\">3.0.2</span>\n<span class=\"na\">info</span><span class=\"pi\">:</span>\n  <span class=\"na\">title</span><span class=\"pi\">:</span> <span class=\"s\">蔵書管理システムAPIドキュメント</span>\n  <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">蔵書管理システムのAPIドキュメントです</span>\n  <span class=\"na\">version</span><span class=\"pi\">:</span> <span class=\"s\">1.0.0</span>\n<span class=\"na\">servers</span><span class=\"pi\">:</span>\n  <span class=\"pi\">-</span> <span class=\"na\">url</span><span class=\"pi\">:</span> <span class=\"s\">https://example.com/api</span>\n    <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"s\">本番環境</span>\n<span class=\"na\">paths</span><span class=\"pi\">:</span>\n  <span class=\"s\">/books</span><span class=\"pi\">:</span>\n    <span class=\"na\">get</span><span class=\"pi\">:</span>\n      <span class=\"na\">summary</span><span class=\"pi\">:</span> <span class=\"s\">本の一覧</span>\n      <span class=\"na\">description</span><span class=\"pi\">:</span> <span class=\"pi\">|</span>\n        <span class=\"s\">登録してある本の一覧を取得できます</span>\n      <span class=\"na\">operationId</span><span class=\"pi\">:</span> <span class=\"s\">getBooks</span>\n</code></pre></div></div>\n\n<h3>\n<span id=\"7-masaakikunsanによるvuefesの話\" class=\"fragment\"></span><a href=\"#7-masaakikunsan%E3%81%AB%E3%82%88%E3%82%8Bvuefes%E3%81%AE%E8%A9%B1\"><i class=\"fa fa-link\"></i></a>7. masaakikunsanによるVueFesの話(?)</h3>\n\n<p>VueFes detail is <a href=\"https://vuefes.jp/2019/sessions/masaakikunsan/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://vuefes.jp/2019/sessions/masaakikunsan/</a><br>\nPresenter is <a href=\"/masaakikunsan\" class=\"user-mention js-hovercard\" title=\"masaakikunsan\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"masaakikunsan\">@masaakikunsan</a></p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">VueFesの発表内容</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\"><a href=\"https://camo.qiitausercontent.com/d3b0db93e3e73c3d78177d03de78c2a2db2d834d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62323037326130382d303331612d313335662d323461302d6235306365383562356537622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb2072a08-031a-135f-24a0-b50ce85b5e7b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=79b3ad8c606460e17aba716198a8fa4d\" alt=\"Screenshot from 2019-07-19 23-55-07.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b2072a08-031a-135f-24a0-b50ce85b5e7b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb2072a08-031a-135f-24a0-b50ce85b5e7b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=970837765727013a85b15bf37bf90165 1x\" loading=\"lazy\"></a></td>\n</tr>\n</tbody>\n</table>\n\n<p>LT枠が一つ突如あいたので、さくっとNuxtでSlack通知アプリケーション作る挑戦をされていました。<br>\nさくっと簡単なアーキテクチャを説明された後に、今年のVueFesで Nuxt.js + TypeScriptの開発を発表するということでしたので、要期待ですね！ <img alt=\":tada:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f389.png\" title=\":tada:\" width=\"20\" loading=\"lazy\"> </p>\n\n<h2>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h2>\n\n<p>ブログ枠でした。</p>\n\n<p>.</p>\n","body":"# Laravel/Vue.js勉強会#10\n\n## はじめに\n\nこの記事は 先日の [Laravel/Vue.js勉強会](https://laravue.connpass.com/event/122581/) に行ってきた感想・ポエムになります（ブログ枠）。基本的に資料は[コンパス](https://laravue.connpass.com/event/122581/presentation/) にまとまっていますが、それぞれ独断と偏見で紹介していきたいと思います。発表者さんの資料を最後まで読んで欲しいなと思い、そこを目指して紹介できればと思います。主催ROXXさんの[ブログ](https://techblog.scouter.co.jp/entry/2019/07/22/120000)にも内容よくまとまってます。。\n\n## 6人分のLT紹介\n\n### 1. Storybookを用いたVue.js共通コンポーネント開発との戦い / stores-fights-storybook\n\nSlide is https://speakerdeck.com/howdy39/stores-fights-storybook\nPresenter is @howdy39 (間違いとかあったら編集リクエストとかコメントください :pray: )\n\n| [ここ](https://speakerdeck.com/howdy39/stores-fights-storybook?slide=16) がポイント！|\n|:--:|\n|![Screenshot from 2019-07-19 22-22-48.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/6f4b6e48-98a7-0956-e60b-d28e2b6b34b8.png)|\n\n画像回帰テストで、自動で変化したスタイルの部分を、色付き画像で表示してくれるところの図。\n\nVue.jsとかフロントエンドのコンポーネント管理はCSSの影響範囲を指定できる `scoped` があったりして、他のコンポーネントに影響を与えないように作られていますよね。だけど、それだけ綺麗に管理したとしてもどうしても意図せずCSSが崩れたりするときがあると思います。\n\nそこで、毎回目視チェックしなくていいように **画像回帰テスト** という分野で **機械にやらせよう** と、CIで自動的にスタイルのチェックを発火させる内容になります。とても興味深く発表を聞かせていただきました。画像回帰テストを入れるにあたって、Storybookやプライベートレポジトリでモジュール配布しないといけなかったりとか、さまざまな躓きポイントがまとまっているので、ぜひ資料を読んでみてほしいです。\n\n```vue\n// Vueのscoped CSSの書き方の例\n<style scoped>\n.example {\n  color: red;\n}\n</style>\n```\n\n### 2. Vuex-ORMの紹介\n\nSlide is https://www.slideshare.net/ShoichiYashiro/vuex-orm-156257976\nSlide Qiita版 [DBをフロントに持てる！Vuex-ORM環境構築と動作確認](https://qiita.com/YaCpotato/items/b51384652659a400a2b9)\nPresenter is @YaCpotato  (間違いとかあったら編集リクエストとかコメントください :pray: )\n\n\n| 10ページ目がポイント！|\n|:--:|\n|![Screenshot from 2019-07-19 22-46-13.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/fd55ec22-ad2c-3a0e-1280-ac75b2254efc.png)|\n\n複数のUserがいて、複数のTodosが紐付いている場合のデータ構造って複雑だよねってことを表している図。\n\nVue.jsでデータを持たせるVuexをORM(Object-relational mapping)、要するにRailsのActive Record、LaravelのEloquent的にデータを扱うことができるよって話。[vuex-orm/vuex-orm](https://github.com/vuex-orm/vuex-orm) はStarが1250なので、使っている人は普通にいそうな雰囲気ですね（長いものには巻かれるタイプです）。\n\n以下の様なJSONデータを取得するとき、 `User.find(1).with('todos').get()` みたいに書くと（デタラメに書いてるので雰囲気だけ味わって… :pray: ）UserのID=1に紐付いているtodosも一緒に引っ張ってこれるので、バックエンド側のORMに慣れている人はドキュメントで文法みながら書くと、比較的簡単にためせるんじゃないかなと思いました。\n\n```js\nconst data = {\nusers: [\n  {id: 1, name: '佐藤'},\n  {id: 2, name: '田中'}\n],\ntodos: [\n  {user_id: 1, task: 'トイレ掃除'},\n  {user_id: 2, task: 'お風呂掃除'},\n  {user_id: 1, task: '大掃除'},\n]\n}\n```\n\n```js\n// たぶん普通に書くとこんな感じ？\nconst userId = 1;\nconst user = data.users.find(x => x.id === userId);\nconst todos = data.todos.filter(x => x.user_id === userId);\n\n// たしかにこんな感じのがシンプルかもしれない\nconst user = User.find(1).with('todos').get()\nconst todos = user.todos // constで取り出さなくてももちろん良い\n```\n\n### 3. Laravel + AWS で CI/CDしてみた話\n\nSlide is https://slides.com/koichiminamijima/laravelaws20190718\nPresenter is @ikegam1 (間違いとかあったら編集リクエストとかコメントください :pray: )\n\n| [ここ](https://slides.com/koichiminamijima/laravelaws20190718/#/11)がポイント！|\n|:--:|\n|![Screenshot from 2019-07-19 23-12-30.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/5b40e99d-92c8-9269-bf51-b163de0579c6.png)|\n\nCI/CDをほぼすべてAWSプラットフォームに乗せられるということを表している図。\n\nレイヤーとしては、CircleCIとかGitLabCIとかそんなところ。例えばReactのコードをwebpackでビルドしてAWSのS3に乗せて、CDN的に配布するみたいな処理をしているときに、すべてAWSプラットフォームに乗っかっているととても管理が便利そうだなと思いました。いま例にあげたのは知っている会社の実例でCircleCI使ってやってた。そんな時はこの `CodePipeline` で実装してみるのもありだなと思ったです。\n\nCIは知っていたけど、CI/CDという言葉に馴染みがなく、勉強になりました。感謝:pray:\n\n> 「CI」とは「Continuous Integration（継続的インテグレーション）」の略で、ソフトウェア開発におけるビルドやテストを自動化し、継続的に行うアプローチのことです。\n\n> 「CD」とは「Continuous Delivery（継続的デリバリー）」の略で、CIによってテストされたコードのマージや、本番環境向けのビルドの作成を自動的に行い、本番環境にデプロイが可能な状態を整えるプロセスのことです。\n\n> また「CD」は「Continuous Deployment（継続的デプロイ）」の略として使われることもあります。継続的デプロイは継続的デリバリーとよく似た概念ですが、継続的デリバリーがデプロイ可能な状態を準備するだけなのに対し、継続的デプロイは実際に本番環境へのデプロイまでを行う点が異なります。\n\n> このようなビルド、テスト、デプロイを自動化し、継続的に行う手法のことを、あわせて「CI/CD」と呼びます。\n\n> byhttps://pfs.nifcloud.com/navi/words/ci_cd.htm\n\n###　4. Vue.jsでFormをAtomic Designしてみた時のコンポーネント間のデータのやりとり\n\nSlide is https://www.slideshare.net/ohashiyuta/vuejsformatomic-design-156241493\nPresenter is @blue_goheimochi (間違いとかあったら編集リクエストとかコメントください :pray: )\n\n| ここは15ページだよ！|\n|:--:|\n|![Screenshot from 2019-07-19 23-32-22.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b96fd15d-d453-54bc-7dde-8443cdccf0ab.png)|\n\nフォームだと、どこがAtomic Designに適応しているか考えてみている。\n\n設計を学んだらすぐに自分のコードに落とし込んで考えようって思えた発表でした。実際のVue.jsのコードを見せながら、発表者さんが考えるAtomicデザインと実際のコードの落とし所とかが聞けました。\n\n> 実際に手を動かしたほうが理解がすすむ at 70page\n\n自分で学んだ後に実際のコードに落とし込んだことがないかたはぜひ読んでもらいたい資料になります。。！\n\n### 5. Laravelにイベントディスカバリーが実装されたので試してみる\n\nQiita is https://qiita.com/niisan-tokyo/items/95338bc8e7a3353d7b9b\nPresenter is @niisan-tokyo (間違いとかあったら編集リクエストとかコメントください :pray: )\n\n| イベントのリスナーにフルパスで毎回書いていくの面倒だよねって話 |\n|:--:|\n|![Screenshot from 2019-07-19 23-42-26.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/2ce37cd2-6d7a-d19f-d9b6-a4f6e6b6db2b.png)|\n\nLaravel5.8.9からイベントディスカバリーはEventServiceProviderを使わないで済むいい感じの仕組みができたって話です。パッチバージョンでいれる小さな変化なのかな、これって正直みんな思ったはず？\n\n既存とのEventServiceProviderとかそんなに相性がよくないので、比較的新しめの5.8.9以降で作られたプロジェクトはこの機能を使いまくる方向に倒してもいいかもしれない。正直インパクトがない変更ですが、Laravelのトレンド追っているかたはさくっと使ってみてキャッチアップしておくのもいいかもしれない。(?)\n\n```bash\nphp artisan make:event DiscoveryEvent\nphp artisan make:listener DiscoveryEventListener --event DiscoveryEvent\n```\n\n```app/Listeners/DiscoveryEventListener.php\n    public function handle(DiscoveryEvent $event)\n    {\n        \\Log::debug('聞き届けました！')\n    }\n```\n\n### 6. PHPUnit + openapi-validator で「スキーマが正、実装が追従」にする\n\n\nQiita is https://qiita.com/kon_shou/items/6e51c5dfe55c834b99c1\nPresenter is @kon_shou  (間違いとかあったら編集リクエストとかコメントください :pray: )\n\n| スキーマに沿った実装しないとPHPUnitが落ちるところ p13 |\n|:--:|\n|![Screenshot from 2019-07-22 13-33-30.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b429cd08-ec48-34e2-2995-22b417e58654.png)|\n\nスキーマの実装はとても辛い。。。とても辛いみたいですが、一度Yamlで実装すると、ドキュメントのビルドも一瞬、PHPUnitによってリファクタリングもとても信頼性高く行えると思います。\n\n今回はSwaggerでスキーマ書いて、PHPUnitでそのスキーマを呼び出して、とかそういうところをどう実装したらいいか書かれているので、API開発しているところは検討の余地があるのではないでしょうか。\n\nyamlはこんな感じ。\n\n```yaml\nopenapi: 3.0.2\ninfo:\n  title: 蔵書管理システムAPIドキュメント\n  description: 蔵書管理システムのAPIドキュメントです\n  version: 1.0.0\nservers:\n  - url: https://example.com/api\n    description: 本番環境\npaths:\n  /books:\n    get:\n      summary: 本の一覧\n      description: |\n        登録してある本の一覧を取得できます\n      operationId: getBooks\n```\n\n### 7. masaakikunsanによるVueFesの話(?)\n\nVueFes detail is https://vuefes.jp/2019/sessions/masaakikunsan/\nPresenter is @masaakikunsan\n\n| VueFesの発表内容 |\n|:--:|\n|![Screenshot from 2019-07-19 23-55-07.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b2072a08-031a-135f-24a0-b50ce85b5e7b.png)|\n\nLT枠が一つ突如あいたので、さくっとNuxtでSlack通知アプリケーション作る挑戦をされていました。\nさくっと簡単なアーキテクチャを説明された後に、今年のVueFesで Nuxt.js + TypeScriptの開発を発表するということでしたので、要期待ですね！ :tada: \n\n## 最後に\n\nブログ枠でした。\n\n.\n","coediting":false,"comments_count":0,"created_at":"2019-07-22T13:49:34+09:00","group":null,"id":"9464777f1221e0f9d5e9","likes_count":7,"private":false,"reactions_count":0,"stocks_count":3,"tags":[{"name":"PHP","versions":[]},{"name":"JavaScript","versions":[]},{"name":"Laravel","versions":[]},{"name":"Vue.js","versions":[]},{"name":"laravue","versions":[]}],"title":"【Laravel/Vue.js勉強会#10】スライドのまとめと所感","updated_at":"2021-10-06T21:02:29+09:00","url":"https://qiita.com/ykhirao/items/9464777f1221e0f9d5e9","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"google-apps-scriptの開発をローカルで行うためにwebpackによる自作テンプレート作成をしてみる\" class=\"fragment\"></span><a href=\"#google-apps-script%E3%81%AE%E9%96%8B%E7%99%BA%E3%82%92%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%A7%E8%A1%8C%E3%81%86%E3%81%9F%E3%82%81%E3%81%ABwebpack%E3%81%AB%E3%82%88%E3%82%8B%E8%87%AA%E4%BD%9C%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E4%BD%9C%E6%88%90%E3%82%92%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Google Apps Scriptの開発をローカルで行うためにWebpackによる自作テンプレート作成をしてみる</h1>\n\n<p>今回はWebpackを使った自作テンプレート作成をやったことない人向けのチュートリアルになります。<br>\nちゃんと調べて真面目な記事のつもりですが、Webpack歴1週間くらいの人間が書いているので間違ってそうなところは編集リクエストお願いします。。。<img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"></p>\n\n<h2>\n<span id=\"想定している記事の読者層\" class=\"fragment\"></span><a href=\"#%E6%83%B3%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E8%A8%98%E4%BA%8B%E3%81%AE%E8%AA%AD%E8%80%85%E5%B1%A4\"><i class=\"fa fa-link\"></i></a>想定している記事の読者層</h2>\n\n<p>GoogleAppsScriptはとても便利なスクリプトの実行環境なので、Qiitaの記事でも人気で本日付けで1713の記事が公開されていますね。</p>\n\n<p>とても便利なので<strong>Webからさくっと作成して</strong>、そのまま放置している人も多いと思います。またプロダクトとして公開していたり、<strong>社内BotでSlack通知させていたり</strong>と、結構がっつり使っているのにGit管理されていないであったり、<strong>社内の誰からもレビュー受けていない状態</strong>になっていませんか？</p>\n\n<p>であるので以下のような考えを持つかたはこの記事が参考になるかと思います。</p>\n\n<ul>\n<li>\n<strong>ウェブ上でGAS</strong>を書いたことがある人 &amp;&amp; <strong>プロダクトで使っている</strong>\n</li>\n<li>\n<strong>GitHub/GitLabでコードを管理したい</strong>、レビューしてもらいたい</li>\n<li>どうせなら<strong>npmモジュール</strong>使ったり<strong>ES6</strong>とかTypescriptで書きたい（GASはES５までの構文のみ）</li>\n</ul>\n\n<p>また自分はVue-cliとかでなんかいい感じにWebpackとかBabelがコンパイルしてくれるのでしっかり自分で定義とかしたことなかったので、そのあたりをテンプレート作成を通して学んでいきたいと思います。</p>\n\n<p>なので、以下のような人が読むと、Webpac筋のレベルがあがるのではないでしょうか。</p>\n\n<ul>\n<li>Vue.js/Reactとか使っているときに<strong>Webpackを使っているはず</strong>だけど、設定したことない</li>\n<li>\n<strong>babel?トランスパイル？？</strong>なにそれ食べれるの。</li>\n</ul>\n\n<h2>\n<span id=\"参考にさせてもらった記事\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83%E3%81%AB%E3%81%95%E3%81%9B%E3%81%A6%E3%82%82%E3%82%89%E3%81%A3%E3%81%9F%E8%A8%98%E4%BA%8B\"><i class=\"fa fa-link\"></i></a>参考にさせてもらった記事</h2>\n\n<h4>\n<span id=\"google-apps-script-のモダンな開発環境を求めて\" class=\"fragment\"></span><a href=\"#google-apps-script-%E3%81%AE%E3%83%A2%E3%83%80%E3%83%B3%E3%81%AA%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%82%92%E6%B1%82%E3%82%81%E3%81%A6\"><i class=\"fa fa-link\"></i></a><a href=\"https://kenchan0130.github.io/post/2018-12-03-1\" rel=\"nofollow noopener\" target=\"_blank\">Google Apps Script のモダンな開発環境を求めて</a>\n</h4>\n\n<p>こちらの記事は2018年末におけるGAS開発のいろんなものを丁寧にまとめてくださっているので、３往復くらい読ませていただきました。</p>\n\n<h4>\n<span id=\"google-apps-script-をローカル環境で快適に開発するためのテンプレートを作りました---qiita\" class=\"fragment\"></span><a href=\"#google-apps-script-%E3%82%92%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E7%92%B0%E5%A2%83%E3%81%A7%E5%BF%AB%E9%81%A9%E3%81%AB%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AE%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%82%92%E4%BD%9C%E3%82%8A%E3%81%BE%E3%81%97%E3%81%9F---qiita\"><i class=\"fa fa-link\"></i></a><a href=\"https://qiita.com/howdy39/items/0e799a9bfc1d3bccf6e5\" id=\"reference-047d83ddeafc31825c61\">Google Apps Script をローカル環境で快適に開発するためのテンプレートを作りました - Qiita</a>\n</h4>\n\n<p>今回作ろうと思ったテンプレートの一番参考になった記事です。</p>\n\n<p>2018/03/28 - gas-clasp-starter という Google Apps Script を ローカル環境で開発するためのテンプレートを作りました。 2018年に登場した、google/clasp をベースに webpack, TypeScript, TSLint, Prettier, Jest を利用したテンプレートになっています。</p>\n\n<h2>\n<span id=\"開発\" class=\"fragment\"></span><a href=\"#%E9%96%8B%E7%99%BA\"><i class=\"fa fa-link\"></i></a>開発</h2>\n\n<h3>\n<span id=\"グローバルに必要なパッケージ\" class=\"fragment\"></span><a href=\"#%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8\"><i class=\"fa fa-link\"></i></a>グローバルに必要なパッケージ</h3>\n\n<p>今回コードはyarnのサンプルなのでnpmでやるかたは適宜読み替えてください。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>node <span class=\"nt\">-v</span>\n<span class=\"go\">v12.4.0\n</span><span class=\"gp\">$</span><span class=\"w\"> </span>npm <span class=\"nt\">-v</span>\n<span class=\"go\">6.9.0\n</span><span class=\"gp\">$</span><span class=\"w\"> </span>yarn <span class=\"nt\">-v</span>\n<span class=\"go\">1.16.0\n</span><span class=\"gp\">$</span><span class=\"w\"> </span>clasp <span class=\"nt\">-v</span>\n<span class=\"go\">2.1.0\n</span></code></pre></div></div>\n\n<p>webpack-cliと、claspはGoogleが提供しているGAS用のSDK的なものなのでインストールとログインしておく。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">npm i @webpack-cli/init -g\nnpm i @google/clasp -g\nclasp login\n</span></code></pre></div></div>\n\n<h3>\n<span id=\"webpack設定\" class=\"fragment\"></span><a href=\"#webpack%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>Webpack設定</h3>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>mkdir qiita-gas-template\ncd qiita-gas-template/\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">yarn add gas-webpack-plugin webpack webpack-cli @webpack-cli/init --dev\nnpx webpack-cli init\n</span><span class=\"gp\">#</span><span class=\"w\"> </span>A name parameter is required to create a storage\n</code></pre></div></div>\n\n<p><code>npx</code> は <code>./node_modules/webpack-cli/bin/cli.js</code> 的なパスをわざわざ叩かなくても <code>npx webpack-cli</code> だけで実行できる魔法のスクリプトです。気になるかたは調べてみて。</p>\n\n<p>nameエラー出るので <code>package.json</code> に <code>\"name\": \"qiita-gas-template\"</code> を追加修正します。</p>\n\n<div class=\"code-frame\" data-lang=\"json\">\n<div class=\"code-lang\"><span class=\"bold\">package.json</span></div>\n<div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"qiita-gas-template\"</span><span class=\"p\">,</span><span class=\"w\"> \n  </span><span class=\"nl\">\"devDependencies\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n</span></code></pre></div>\n</div>\n\n<p>もう一度 <code>webpack-cli</code> で初期化します。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">npx webpack-cli init\n\nℹ INFO  For more information and a detailed description of each question, have a look at: https://github.com/webpack/webpack-cli/blob/master/INIT.md\nℹ INFO  Alternatively, run \"webpack(-cli) --help\" for usage info\n\n? Will your application have multiple bundles? No\n? Which will be your application entry point? src/index\n? In which folder do you want to store your generated bundles? dist\n? Will you use one of the below JS solutions? ES6\n? Will you use one of the below CSS solutions? No\n conflict package.json\n? Overwrite package.json? overwrite\n</span></code></pre></div></div>\n\n<p>選択肢は適当に必要なものを選んでください。Typescript使いたい人はここでES6じゃなくてTS<br>\nがあるはず。</p>\n\n<p>initのときいろいろハマったので、ハマった人はこのあたり読むといいかも<br>\n<a href=\"https://github.com/webpack/webpack-cli/blob/master/INIT.md\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/webpack/webpack-cli/blob/master/INIT.md</a></p>\n\n<p>次に <code>package.json</code> を確認して、実行コマンドを確かめます。</p>\n\n<div class=\"code-frame\" data-lang=\"json\">\n<div class=\"code-lang\"><span class=\"bold\">package.json</span></div>\n<div class=\"highlight\"><pre><code><span class=\"w\">  </span><span class=\"nl\">\"scripts\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"build\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"webpack\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"start\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"webpack-dev-server\"</span><span class=\"w\">\n</span></code></pre></div>\n</div>\n\n<p><code>yarn build</code> でコンパイルしてくれそうですね。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>yarn build\n<span class=\"gp\">#</span><span class=\"w\"> </span>index.html\n<span class=\"gp\">#</span><span class=\"w\"> </span>main.xxxx.js\n</code></pre></div></div>\n\n<p><code>? In which folder do you want to store your generated bundles? dist</code> 先程 <code>dist</code> というディレクトリをコンパイル先に指定したので確認してみます。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>tree <span class=\"nt\">-L</span> 2 dist\n<span class=\"go\">dist\n├── index.html\n└── main.55d8ca80f289d8387835.js\n</span></code></pre></div></div>\n\n<p><code>index.js</code> が作られてほしかったのに違う感じになったので一旦削除する。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">rm -fr dist/\n</span></code></pre></div></div>\n\n<p>index.jsが作られないのでwebpackの設定を確認する。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">webpack.config.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"c1\">// html系のプラグインはいらないので</span>\n<span class=\"c1\">// 代わりに最初にyarnで追加したGAS用のwebpackプラグインを入れる</span>\n<span class=\"kd\">const</span> <span class=\"nx\">HtmlWebpackPlugin</span> <span class=\"o\">=</span> <span class=\"nx\">require</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">html-webpack-plugin</span><span class=\"dl\">'</span><span class=\"p\">);</span> <span class=\"c1\">// 削除</span>\n<span class=\"nl\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"k\">new</span> <span class=\"nx\">webpack</span><span class=\"p\">.</span><span class=\"nx\">ProgressPlugin</span><span class=\"p\">(),</span> <span class=\"k\">new</span> <span class=\"nx\">HtmlWebpackPlugin</span><span class=\"p\">()],</span> <span class=\"c1\">// HtmlWebpackPluginだけ削除</span>\n<span class=\"c1\">// それぞれの行を以下の用に書き換える</span>\n<span class=\"kd\">const</span> <span class=\"nx\">GasWebpackPlugin</span> <span class=\"o\">=</span> <span class=\"nx\">require</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">gas-webpack-plugin</span><span class=\"dl\">'</span><span class=\"p\">);</span> <span class=\"c1\">// 追加</span>\n<span class=\"nl\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"k\">new</span> <span class=\"nx\">webpack</span><span class=\"p\">.</span><span class=\"nx\">ProgressPlugin</span><span class=\"p\">(),</span> <span class=\"k\">new</span> <span class=\"nx\">GasWebpackPlugin</span><span class=\"p\">()],</span> <span class=\"c1\">// GasWebpackPluginを追加。</span>\n\n<span class=\"nx\">output</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n  <span class=\"nl\">filename</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">index.js</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"c1\">// ここをindex.jsに書き換える</span>\n  <span class=\"nx\">path</span><span class=\"p\">:</span> <span class=\"nx\">path</span><span class=\"p\">.</span><span class=\"nx\">resolve</span><span class=\"p\">(</span><span class=\"nx\">__dirname</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">dist</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n<span class=\"p\">},</span>\n</code></pre></div>\n</div>\n\n<p>最終的には以下のような感じになっていると思う。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">webpack.config.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">path</span> <span class=\"o\">=</span> <span class=\"nx\">require</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">path</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n<span class=\"kd\">const</span> <span class=\"nx\">webpack</span> <span class=\"o\">=</span> <span class=\"nx\">require</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">webpack</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n<span class=\"kd\">const</span> <span class=\"nx\">GasWebpackPlugin</span> <span class=\"o\">=</span> <span class=\"nx\">require</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">gas-webpack-plugin</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n<span class=\"nx\">module</span><span class=\"p\">.</span><span class=\"nx\">exports</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"na\">mode</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">development</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n    <span class=\"na\">entry</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">./src/index.js</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n\n    <span class=\"na\">output</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">filename</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">index.js</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n        <span class=\"na\">path</span><span class=\"p\">:</span> <span class=\"nx\">path</span><span class=\"p\">.</span><span class=\"nx\">resolve</span><span class=\"p\">(</span><span class=\"nx\">__dirname</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">dist</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n    <span class=\"p\">},</span>\n\n    <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"k\">new</span> <span class=\"nx\">webpack</span><span class=\"p\">.</span><span class=\"nx\">ProgressPlugin</span><span class=\"p\">(),</span> <span class=\"k\">new</span> <span class=\"nx\">GasWebpackPlugin</span><span class=\"p\">()],</span>\n\n</code></pre></div>\n</div>\n\n<p>コンパイルが成功するか確認する。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>yarn build\n<span class=\"gp\">$</span><span class=\"w\"> </span>tree <span class=\"nt\">-L</span> 2 dist\n<span class=\"go\">dist\n└── index.js\n</span></code></pre></div></div>\n\n<p><code>dist/index.js</code> が作られてそうです！</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">src/index.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"c1\">// dist/index.jsじゃないよ！ src/index.jsだよ！</span>\n<span class=\"nb\">global</span><span class=\"p\">.</span><span class=\"nx\">doGet</span> <span class=\"o\">=</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"k\">return</span> <span class=\"nx\">HtmlService</span><span class=\"p\">.</span><span class=\"nx\">createHtmlOutput</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">&lt;h1&gt;Getのサンプル&lt;/h1&gt;</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n</div>\n\n<p>と書き換える。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">yarn build\n</span></code></pre></div></div>\n\n<p>コンパイルすると</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">dist/index.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"c1\">// (いろいろ長いのでこのあたりまで省略)</span>\n<span class=\"nb\">eval</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">global.doGet = function () {</span><span class=\"se\">\\n</span><span class=\"s2\">  return HtmlService.createHtmlOutput(</span><span class=\"se\">\\\"</span><span class=\"s2\">&lt;h1&gt;Getのサンプル&lt;/h1&gt;</span><span class=\"se\">\\\"</span><span class=\"s2\">);</span><span class=\"se\">\\n</span><span class=\"s2\">};</span><span class=\"se\">\\n\\n</span><span class=\"s2\">//# sourceURL=webpack:///./src/index.js?</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n</code></pre></div>\n</div>\n\n<p><code>() =&gt; {}</code> が <code>function(){}</code> に変換されているので問題なさそうですが、全部evalの中で見にくいですね。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">webpack.config.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">entry</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">./src/index.js</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n<span class=\"nx\">devtool</span><span class=\"p\">:</span> <span class=\"kc\">false</span><span class=\"p\">,</span> <span class=\"c1\">// ここの行を追加する</span>\n</code></pre></div>\n</div>\n\n<p>ちょっと今回は以上の設定を追加してみます。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">yarn build\n</span></code></pre></div></div>\n\n<p>webpackのその他の記述がたくさんあるので、必要なところだけ見ると</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">dist/index.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"c1\">// (略)</span>\n\n<span class=\"cm\">/* WEBPACK VAR INJECTION */</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nb\">global</span><span class=\"p\">)</span> <span class=\"p\">{</span><span class=\"nb\">global</span><span class=\"p\">.</span><span class=\"nx\">doGet</span> <span class=\"o\">=</span> <span class=\"kd\">function</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"k\">return</span> <span class=\"nx\">HtmlService</span><span class=\"p\">.</span><span class=\"nx\">createHtmlOutput</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">&lt;h1&gt;Getのサンプル&lt;/h1&gt;</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n<span class=\"p\">};</span>\n\n<span class=\"c1\">// (略)</span>\n</code></pre></div>\n</div>\n\n<p>いい感じにコンパイルされてそうですね。</p>\n\n<h3>\n<span id=\"googleappsscriptの設定\" class=\"fragment\"></span><a href=\"#googleappsscript%E3%81%AE%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>GoogleAppsScriptの設定</h3>\n\n<p>次にGASアプリ作成する。standaloneを選ぶ。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">clasp create --rootDir dist\n</span><span class=\"gp\">#</span><span class=\"w\"> </span>loginから求められるかも。\n<span class=\"gp\">#</span><span class=\"w\"> </span>appsscript.jsonが作成される\n<span class=\"gp\">#</span><span class=\"w\"> </span>https://script.google.com/d/xxxxxx/edit という文字列が出力される\n<span class=\"gp\">#</span><span class=\"w\"> </span>こちらの画面からコードが編集できるようになる\n</code></pre></div></div>\n\n<p>間違えて <code>--rootDir dist</code> をつけ忘れたらclaspからpushするときにルートディレクトリをすべてpushしようとするので修正が必要です。 <code>.clasp.json</code> にrootのオプション <code>{\"rootDir\": \"dist\",\"scriptId\": \"xxx\"}</code> を追記して、 <code>appsscript.json</code> を <code>dist/</code> 以下に配置しなおします。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>clasp push\n<span class=\"gp\">&gt;</span><span class=\"w\"> </span>no such file or directory, open <span class=\"s1\">'dist/appsscript.json'</span>\n</code></pre></div></div>\n\n<p><code>dist/appsscript.json</code> がないって怒れれたので移動させる。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">mv appsscript.json dist/appsscript.json\nclasp push\n</span></code></pre></div></div>\n\n<p><code>clasp push</code> 二回目以降は <code>? Manifest file has been updated. Do you want to push and overwrite? Yes</code> って聞かれるので上書きしたげる。</p>\n\n<p><a href=\"https://script.google.com/home\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://script.google.com/home</a> ここから確認するか<br>\n<a href=\"https://script.google.com/d/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://script.google.com/d/</a>&lt;.clasp.jsonのscriptIdをここにいれる&gt;</p>\n\n<p>どっちかから確認してみましょう</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f7a8a3923a8b5faf077031968664e1c52707cb30/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f31666466626161382d353961622d356466642d333437352d6137393364653239306133352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"681\" alt=\"スクリーンショット 2019-06-22 0.38.25.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F1fdfbaa8-59ab-5dfd-3475-a793de290a35.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a0f460e7e40020ebbb7af98e3aa59c28\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/1fdfbaa8-59ab-5dfd-3475-a793de290a35.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F1fdfbaa8-59ab-5dfd-3475-a793de290a35.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f98e751606f432e0947b8b8af578495c 1x\" loading=\"lazy\"></a></p>\n\n<p>アップロードされていたらOK◎</p>\n\n<p>公開&gt;ウェブアプリケーションとして導入&gt;導入</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/8fe37c10c3703c62435db791a828184901df5b5d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62393037313338322d373333312d376264612d373862332d6336666562636433303436342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"694\" alt=\"スクリーンショット 2019-06-22 0.32.47.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb9071382-7331-7bda-78b3-c6febcd30464.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=dd12735b5aa1a84abbf823db54079ddf\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b9071382-7331-7bda-78b3-c6febcd30464.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb9071382-7331-7bda-78b3-c6febcd30464.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=26d0bb6b0ab3a7475a7ef29b76c8687a 1x\" loading=\"lazy\"></a></p>\n\n<p>で 表示される <code>https://script.google.com/macros/s/xx_それっぽいコード_xx/exec</code> にアクセスすると。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/a3d9d470f5e0a12bffb71ba8b6f2d34c48d7f646/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39346337333839382d646131662d643733372d656638332d3432323136376332656266372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"740\" alt=\"スクリーンショット 2019-06-22 0.38.14.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F94c73898-da1f-d737-ef83-422167c2ebf7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2e8dc29fe4c21b9d60c3faba6623d9e9\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/94c73898-da1f-d737-ef83-422167c2ebf7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F94c73898-da1f-d737-ef83-422167c2ebf7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=56eb2786a72d0a67063967e6081ed6cd 1x\" loading=\"lazy\"></a></p>\n\n<p>と表示されてたらOKです！！！</p>\n\n<h3>\n<span id=\"テンプレート化する\" class=\"fragment\"></span><a href=\"#%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E5%8C%96%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>テンプレート化する</h3>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">rm .clasp.json\nrm -rf dist/\nrm -rf node_modules/\n</span></code></pre></div></div>\n\n<p>gitignoreを追加しとく</p>\n\n<p><code>vim .gitignore</code></p>\n\n<div class=\"code-frame\" data-lang=\"gitignore\"><div class=\"highlight\"><pre><code>/node_modules\n/test/js\n/test/browsertest/js\n/test/fixtures/temp-cache-fixture\n/benchmark/js\n/benchmark/fixtures\n/examples/**/dist\n/coverage\n/dist\n.DS_Store\n*.log\n.idea\n.vscode\n.eslintcache\npackage-lock.json\n\n# 参考 https://github.com/webpack/webpack/blob/master/.gitignore\n# distも保存しないほうがいいと思うので追加\n</code></pre></div></div>\n\n<p>テンプレートを含む <code>gas-dev</code> みたいなルートディレクトリに <code>qiita-gas-template</code> をいれて、それをコピーして使い回せば完成です。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>tree <span class=\"nt\">-L</span> 1 \n<span class=\"c\">.\n</span><span class=\"go\">├── gas-dir\n└── qiita-gas-template\n</span></code></pre></div></div>\n\n<p>以降はこのディレクトリをコピペしてそのディレクトリで以下のコマンドを実行して、GASを作りまくる感じです。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">cp -r qiita-gas-template gas-dir\ncd gas-dir\nyarn\nclasp create --rootDir dist\nyarn build\nclasp push\n// https://script.google.com/home\n</span></code></pre></div></div>\n\n<p>以上、テンプレート作成でした。</p>\n\n<p>あとはGitHub/GitLabのプライベートレポジトリとかでレビューしてもらったりいろいろやってみてください。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>clasp pull                                                                                                                                           <span class=\"o\">(</span>git<span class=\"o\">)</span>-[master]\n<span class=\"go\">Could not find script.\nDid you provide the correct scriptId?\nAre you logged in to the correct account with the script?\n</span></code></pre></div></div>\n\n<p>共同編集者（GASに権限のないアカウント）がpullしようとするとエラーがでるので、GAS画面上から共有して編集権限を与えてあげてください。<br>\n（Git管理を至上として、 <code>clasp pull</code> は禁止にしたほうがいいと思いますが）</p>\n\n<p><code>yarn</code> して <code>yarn deploy</code> をすれば、別の人も開発に加われると思います。</p>\n\n<h3>\n<span id=\"もっといいテンプレートを使う\" class=\"fragment\"></span><a href=\"#%E3%82%82%E3%81%A3%E3%81%A8%E3%81%84%E3%81%84%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%82%92%E4%BD%BF%E3%81%86\"><i class=\"fa fa-link\"></i></a>もっといいテンプレートを使う</h3>\n\n<p><a href=\"https://qiita.com/howdy39/items/0e799a9bfc1d3bccf6e5\">Google Apps Script をローカル環境で快適に開発するためのテンプレートを作りました - Qiita</a></p>\n\n<p>最初の方に紹介したテンプレートのほうが出来がいいのでこちらを使うことを推奨します。<br>\nいまWebpack周りを解説したので多分コード読めるようになっていると思います。</p>\n\n<p>具体的にはTypescriptを導入しているんですよね。</p>\n\n<div class=\"code-frame\" data-lang=\"json\">\n<div class=\"code-lang\"><span class=\"bold\">package.json</span></div>\n<div class=\"highlight\"><pre><code><span class=\"w\">  </span><span class=\"nl\">\"devDependencies\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"@types/google-apps-script\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"0.0.53\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"@types/jest\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"24.0.13\"</span><span class=\"p\">,</span><span class=\"w\">\n</span></code></pre></div>\n</div>\n\n<p>なので <code>Logger.lo</code> とかまで打つと、VSCodeとかだとタイプヒンティングでGAS上で開発するときに必要なGASのAPIが表示されたり、かなりローカルの開発効率があがります。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/97eeb9db52ad1c8c0bc595c82c3ea576c463ad3c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f62393034343232642d663863312d303864642d313633322d3839306332386561643139392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"602\" alt=\"スクリーンショット 2019-06-22 0.53.05.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb904422d-f8c1-08dd-1632-890c28ead199.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=664d2314e8da911fdc63d215ca2a0b6e\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b904422d-f8c1-08dd-1632-890c28ead199.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fb904422d-f8c1-08dd-1632-890c28ead199.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=69ed0d3edb0fed138e70c0e194bbd4cb 1x\" loading=\"lazy\"></a></p>\n\n<p>今回私が作ったテンプレートでも、以下のような感じでごにょっとpackegeとか追加してあげると、タイプヒンティング自体は動くようになるので、（たぶん、、）ちょっとやってみるといいかもしれません。howdy39さんのコードとか読んでみるといいかも。。。（力つきた。）</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">yarn add --dev typescript @types/google-apps-script ts-loader\ntouch tsconfig.json\nmv src/index.js src/index.ts\n</span></code></pre></div></div>\n\n<h2>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h2>\n\n<p>今回はGASをローカルで開発する方法とGit管理しようぜって話と、テンプレート作ってみようぜ！って話をすべて込めてみました。最後まで読んでいただきありがとうございました！</p>\n\n<p>.</p>\n","body":"# Google Apps Scriptの開発をローカルで行うためにWebpackによる自作テンプレート作成をしてみる\n\n今回はWebpackを使った自作テンプレート作成をやったことない人向けのチュートリアルになります。\nちゃんと調べて真面目な記事のつもりですが、Webpack歴1週間くらいの人間が書いているので間違ってそうなところは編集リクエストお願いします。。。:pray:\n\n## 想定している記事の読者層\n\nGoogleAppsScriptはとても便利なスクリプトの実行環境なので、Qiitaの記事でも人気で本日付けで1713の記事が公開されていますね。\n\nとても便利なので**Webからさくっと作成して**、そのまま放置している人も多いと思います。またプロダクトとして公開していたり、**社内BotでSlack通知させていたり**と、結構がっつり使っているのにGit管理されていないであったり、**社内の誰からもレビュー受けていない状態**になっていませんか？\n\nであるので以下のような考えを持つかたはこの記事が参考になるかと思います。\n\n- **ウェブ上でGAS**を書いたことがある人 && **プロダクトで使っている**\n- **GitHub/GitLabでコードを管理したい**、レビューしてもらいたい\n- どうせなら**npmモジュール**使ったり**ES6**とかTypescriptで書きたい（GASはES５までの構文のみ）\n\nまた自分はVue-cliとかでなんかいい感じにWebpackとかBabelがコンパイルしてくれるのでしっかり自分で定義とかしたことなかったので、そのあたりをテンプレート作成を通して学んでいきたいと思います。\n\nなので、以下のような人が読むと、Webpac筋のレベルがあがるのではないでしょうか。\n\n- Vue.js/Reactとか使っているときに**Webpackを使っているはず**だけど、設定したことない\n- **babel?トランスパイル？？**なにそれ食べれるの。\n\n## 参考にさせてもらった記事\n\n#### [Google Apps Script のモダンな開発環境を求めて](https://kenchan0130.github.io/post/2018-12-03-1)\n\nこちらの記事は2018年末におけるGAS開発のいろんなものを丁寧にまとめてくださっているので、３往復くらい読ませていただきました。\n\n#### [Google Apps Script をローカル環境で快適に開発するためのテンプレートを作りました - Qiita](https://qiita.com/howdy39/items/0e799a9bfc1d3bccf6e5)\n\n今回作ろうと思ったテンプレートの一番参考になった記事です。\n\n2018/03/28 - gas-clasp-starter という Google Apps Script を ローカル環境で開発するためのテンプレートを作りました。 2018年に登場した、google/clasp をベースに webpack, TypeScript, TSLint, Prettier, Jest を利用したテンプレートになっています。\n\n## 開発\n### グローバルに必要なパッケージ\n\n今回コードはyarnのサンプルなのでnpmでやるかたは適宜読み替えてください。\n\n```shell-session\n$ node -v\nv12.4.0\n$ npm -v\n6.9.0\n$ yarn -v\n1.16.0\n$ clasp -v\n2.1.0\n```\n\nwebpack-cliと、claspはGoogleが提供しているGAS用のSDK的なものなのでインストールとログインしておく。\n\n```shell-session\nnpm i @webpack-cli/init -g\nnpm i @google/clasp -g\nclasp login\n```\n\n### Webpack設定\n\n```\nmkdir qiita-gas-template\ncd qiita-gas-template/\n```\n\n```shell-session\nyarn add gas-webpack-plugin webpack webpack-cli @webpack-cli/init --dev\nnpx webpack-cli init\n# A name parameter is required to create a storage\n```\n\n`npx` は `./node_modules/webpack-cli/bin/cli.js` 的なパスをわざわざ叩かなくても `npx webpack-cli` だけで実行できる魔法のスクリプトです。気になるかたは調べてみて。\n\nnameエラー出るので `package.json` に `\"name\": \"qiita-gas-template\"` を追加修正します。\n\n```package.json\n{\n  \"name\": \"qiita-gas-template\", \n  \"devDependencies\": {\n```\n\nもう一度 `webpack-cli` で初期化します。\n\n```shell-session\nnpx webpack-cli init\n\nℹ INFO  For more information and a detailed description of each question, have a look at: https://github.com/webpack/webpack-cli/blob/master/INIT.md\nℹ INFO  Alternatively, run \"webpack(-cli) --help\" for usage info\n\n? Will your application have multiple bundles? No\n? Which will be your application entry point? src/index\n? In which folder do you want to store your generated bundles? dist\n? Will you use one of the below JS solutions? ES6\n? Will you use one of the below CSS solutions? No\n conflict package.json\n? Overwrite package.json? overwrite\n```\n\n選択肢は適当に必要なものを選んでください。Typescript使いたい人はここでES6じゃなくてTS\nがあるはず。\n\ninitのときいろいろハマったので、ハマった人はこのあたり読むといいかも\nhttps://github.com/webpack/webpack-cli/blob/master/INIT.md\n\n次に `package.json` を確認して、実行コマンドを確かめます。\n\n```package.json\n  \"scripts\": {\n    \"build\": \"webpack\",\n    \"start\": \"webpack-dev-server\"\n```\n\n`yarn build` でコンパイルしてくれそうですね。\n\n```shell-session\n$ yarn build\n# index.html\n# main.xxxx.js\n```\n\n`? In which folder do you want to store your generated bundles? dist` 先程 `dist` というディレクトリをコンパイル先に指定したので確認してみます。\n\n\n```shell-session\n$ tree -L 2 dist\ndist\n├── index.html\n└── main.55d8ca80f289d8387835.js\n```\n\n`index.js` が作られてほしかったのに違う感じになったので一旦削除する。\n\n```shell-session\nrm -fr dist/\n```\n\nindex.jsが作られないのでwebpackの設定を確認する。\n\n```webpack.config.js\n// html系のプラグインはいらないので\n// 代わりに最初にyarnで追加したGAS用のwebpackプラグインを入れる\nconst HtmlWebpackPlugin = require('html-webpack-plugin'); // 削除\nplugins: [new webpack.ProgressPlugin(), new HtmlWebpackPlugin()], // HtmlWebpackPluginだけ削除\n// それぞれの行を以下の用に書き換える\nconst GasWebpackPlugin = require('gas-webpack-plugin'); // 追加\nplugins: [new webpack.ProgressPlugin(), new GasWebpackPlugin()], // GasWebpackPluginを追加。\n\noutput: {\n  filename: 'index.js', // ここをindex.jsに書き換える\n  path: path.resolve(__dirname, 'dist')\n},\n```\n\n最終的には以下のような感じになっていると思う。\n\n```webpack.config.js\nconst path = require('path');\nconst webpack = require('webpack');\nconst GasWebpackPlugin = require('gas-webpack-plugin');\nmodule.exports = {\n\tmode: 'development',\n\tentry: './src/index.js',\n\n\toutput: {\n\t\tfilename: 'index.js',\n\t\tpath: path.resolve(__dirname, 'dist')\n\t},\n\n\tplugins: [new webpack.ProgressPlugin(), new GasWebpackPlugin()],\n\n```\n\nコンパイルが成功するか確認する。\n\n```shell-session\n$ yarn build\n$ tree -L 2 dist\ndist\n└── index.js\n```\n\n`dist/index.js` が作られてそうです！\n\n```src/index.js\n// dist/index.jsじゃないよ！ src/index.jsだよ！\nglobal.doGet = () => {\n  return HtmlService.createHtmlOutput(\"<h1>Getのサンプル</h1>\");\n}\n```\n\nと書き換える。\n\n```shell-session\nyarn build\n```\n\nコンパイルすると\n\n```dist/index.js\n// (いろいろ長いのでこのあたりまで省略)\neval(\"global.doGet = function () {\\n  return HtmlService.createHtmlOutput(\\\"<h1>Getのサンプル</h1>\\\");\\n};\\n\\n//# sourceURL=webpack:///./src/index.js?\");\n```\n\n`() => {}` が `function(){}` に変換されているので問題なさそうですが、全部evalの中で見にくいですね。\n\n```webpack.config.js\nentry: './src/index.js',\ndevtool: false, // ここの行を追加する\n```\n\nちょっと今回は以上の設定を追加してみます。\n\n```shell-session\nyarn build\n```\n\nwebpackのその他の記述がたくさんあるので、必要なところだけ見ると\n\n```dist/index.js\n// (略)\n\n/* WEBPACK VAR INJECTION */(function(global) {global.doGet = function () {\n  return HtmlService.createHtmlOutput(\"<h1>Getのサンプル</h1>\");\n};\n\n// (略)\n```\n\nいい感じにコンパイルされてそうですね。\n\n### GoogleAppsScriptの設定\n\n次にGASアプリ作成する。standaloneを選ぶ。\n\n```shell-session\nclasp create --rootDir dist\n# loginから求められるかも。\n# appsscript.jsonが作成される\n# https://script.google.com/d/xxxxxx/edit という文字列が出力される\n# こちらの画面からコードが編集できるようになる\n```\n\n間違えて `--rootDir dist` をつけ忘れたらclaspからpushするときにルートディレクトリをすべてpushしようとするので修正が必要です。 `.clasp.json` にrootのオプション `{\"rootDir\": \"dist\",\"scriptId\": \"xxx\"}` を追記して、 `appsscript.json` を `dist/` 以下に配置しなおします。\n\n```shell-session\n$ clasp push\n> no such file or directory, open 'dist/appsscript.json'\n```\n\n`dist/appsscript.json` がないって怒れれたので移動させる。\n\n```shell-session\nmv appsscript.json dist/appsscript.json\nclasp push\n```\n\n`clasp push` 二回目以降は `? Manifest file has been updated. Do you want to push and overwrite? Yes` って聞かれるので上書きしたげる。\n\nhttps://script.google.com/home ここから確認するか\nhttps://script.google.com/d/<.clasp.jsonのscriptIdをここにいれる>\n\nどっちかから確認してみましょう\n\n<img width=\"681\" alt=\"スクリーンショット 2019-06-22 0.38.25.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/1fdfbaa8-59ab-5dfd-3475-a793de290a35.png\">\n\nアップロードされていたらOK◎\n\n公開>ウェブアプリケーションとして導入>導入\n\n<img width=\"694\" alt=\"スクリーンショット 2019-06-22 0.32.47.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b9071382-7331-7bda-78b3-c6febcd30464.png\">\n\nで 表示される `https://script.google.com/macros/s/xx_それっぽいコード_xx/exec` にアクセスすると。\n\n<img width=\"740\" alt=\"スクリーンショット 2019-06-22 0.38.14.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/94c73898-da1f-d737-ef83-422167c2ebf7.png\">\n\nと表示されてたらOKです！！！\n\n### テンプレート化する\n\n```shell-session\nrm .clasp.json\nrm -rf dist/\nrm -rf node_modules/\n```\n\ngitignoreを追加しとく\n\n`vim .gitignore`\n\n```.gitignore\n/node_modules\n/test/js\n/test/browsertest/js\n/test/fixtures/temp-cache-fixture\n/benchmark/js\n/benchmark/fixtures\n/examples/**/dist\n/coverage\n/dist\n.DS_Store\n*.log\n.idea\n.vscode\n.eslintcache\npackage-lock.json\n\n# 参考 https://github.com/webpack/webpack/blob/master/.gitignore\n# distも保存しないほうがいいと思うので追加\n```\n\nテンプレートを含む `gas-dev` みたいなルートディレクトリに `qiita-gas-template` をいれて、それをコピーして使い回せば完成です。\n\n```shell-session\n$ tree -L 1 \n.\n├── gas-dir\n└── qiita-gas-template\n```\n\n以降はこのディレクトリをコピペしてそのディレクトリで以下のコマンドを実行して、GASを作りまくる感じです。\n\n```shell-session\ncp -r qiita-gas-template gas-dir\ncd gas-dir\nyarn\nclasp create --rootDir dist\nyarn build\nclasp push\n// https://script.google.com/home\n```\n\n以上、テンプレート作成でした。\n\nあとはGitHub/GitLabのプライベートレポジトリとかでレビューしてもらったりいろいろやってみてください。\n\n```shell-session\n$ clasp pull                                                                                                                                           (git)-[master]\nCould not find script.\nDid you provide the correct scriptId?\nAre you logged in to the correct account with the script?\n```\n\n共同編集者（GASに権限のないアカウント）がpullしようとするとエラーがでるので、GAS画面上から共有して編集権限を与えてあげてください。\n（Git管理を至上として、 `clasp pull` は禁止にしたほうがいいと思いますが）\n\n`yarn` して `yarn deploy` をすれば、別の人も開発に加われると思います。\n\n### もっといいテンプレートを使う\n\n[Google Apps Script をローカル環境で快適に開発するためのテンプレートを作りました - Qiita](https://qiita.com/howdy39/items/0e799a9bfc1d3bccf6e5)\n\n最初の方に紹介したテンプレートのほうが出来がいいのでこちらを使うことを推奨します。\nいまWebpack周りを解説したので多分コード読めるようになっていると思います。\n\n具体的にはTypescriptを導入しているんですよね。\n\n```package.json\n  \"devDependencies\": {\n    \"@types/google-apps-script\": \"0.0.53\",\n    \"@types/jest\": \"24.0.13\",\n```\n\nなので `Logger.lo` とかまで打つと、VSCodeとかだとタイプヒンティングでGAS上で開発するときに必要なGASのAPIが表示されたり、かなりローカルの開発効率があがります。\n\n<img width=\"602\" alt=\"スクリーンショット 2019-06-22 0.53.05.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/b904422d-f8c1-08dd-1632-890c28ead199.png\">\n\n今回私が作ったテンプレートでも、以下のような感じでごにょっとpackegeとか追加してあげると、タイプヒンティング自体は動くようになるので、（たぶん、、）ちょっとやってみるといいかもしれません。howdy39さんのコードとか読んでみるといいかも。。。（力つきた。）\n\n```shell-session\nyarn add --dev typescript @types/google-apps-script ts-loader\ntouch tsconfig.json\nmv src/index.js src/index.ts\n```\n\n\n## 最後に\n\n今回はGASをローカルで開発する方法とGit管理しようぜって話と、テンプレート作ってみようぜ！って話をすべて込めてみました。最後まで読んでいただきありがとうございました！\n\n\n.\n","coediting":false,"comments_count":2,"created_at":"2019-06-24T10:24:02+09:00","group":null,"id":"9de38a012b5f3f3e81f6","likes_count":64,"private":false,"reactions_count":0,"stocks_count":51,"tags":[{"name":"JavaScript","versions":[]},{"name":"Git","versions":[]},{"name":"GoogleAppsScript","versions":[]},{"name":"webpack","versions":[]},{"name":"babel","versions":[]}],"title":"【GAS】webpackでテンプレートを作成してGit/Local開発しよう","updated_at":"2019-06-24T11:03:15+09:00","url":"https://qiita.com/ykhirao/items/9de38a012b5f3f3e81f6","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"pͪoͣnͬpͣoͥnͭpͣa͡inͥの作り方\" class=\"fragment\"></span><a href=\"#p%CD%AAo%CD%A3n%CD%ACp%CD%A3o%CD%A5n%CD%ADp%CD%A3a%CD%A1in%CD%A5%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9\"><i class=\"fa fa-link\"></i></a>pͪoͣnͬpͣoͥnͭpͣa͡inͥの作り方</h1>\n\n<p>ぽんぽんぺいんを簡単に作るサイトを作ったのでよかったら使ってみてください。</p>\n\n<p><a href=\"https://ykhirao.github.io/qiita/ponponpain/dist/\" rel=\"nofollow noopener\" target=\"_blank\">【ここをクリック】</a></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/55df2b2ef9f3c920aa21586604d5e894e242be87/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39373231353061392d636336312d333438362d636563382d3465373363393863343838622e676966\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F972150a9-cc61-3486-cec8-4e73c98c488b.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=243ad7a5d56a444866488090c2eea737\" alt=\"タイトルなし.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/972150a9-cc61-3486-cec8-4e73c98c488b.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F972150a9-cc61-3486-cec8-4e73c98c488b.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c324be1fc1374428b58aaeebec65c70d 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"ponponpainharaita-iとは\" class=\"fragment\"></span><a href=\"#ponponpainharaita-i%E3%81%A8%E3%81%AF\"><i class=\"fa fa-link\"></i></a>ponponpain(haraita-i)とは</h2>\n\n<p>画像でいうとこんなやつのこと。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/9bebe63881bb3b54e33c716b43cf9adf97447251/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f64656535343166332d383837662d316161652d393738632d3163663039326637303339382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"380\" alt=\"スクリーンショット 2019-04-25 2.28.11.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fdee541f3-887f-1aae-978c-1cf092f70398.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6697438a7374f66735ba3117d1e92582\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/dee541f3-887f-1aae-978c-1cf092f70398.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2Fdee541f3-887f-1aae-978c-1cf092f70398.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=681c1c0c901371d3743877584911ecd9 1x\" loading=\"lazy\"></a></p>\n\n<p>今回参考にさせていただきましたが、以下のサイトによくまとまっていると思います。</p>\n\n<ul>\n<li><a href=\"http://mylog.jp/post/bu-si-yi-nawen-zi-phoanrpaointpaaini\" rel=\"nofollow noopener\" target=\"_blank\">不思議な文字 pͪoͣnͬpͣoͥnͭpͣa͡inͥ | bison's brain at postachio</a></li>\n<li><a href=\"https://www.wdic.org/w/WDIC/%E3%81%BD%E3%82%93%E3%81%BD%E3%82%93%E3%81%BA%E3%81%84%E3%82%93\" rel=\"nofollow noopener\" target=\"_blank\">ぽんぽんぺいん ‐ 通信用語の基礎知識</a></li>\n</ul>\n\n<p>まあ要するに、不思議な上付き文字を組み合わせて、文字に副題（ルビ）をふろうって感じの遊びのことで、昔流行ったみたいです。</p>\n\n<p>今回はクリックだけで上付き文字を加えられるサイトを作ったのでぜひみんなに遊んでほしいなと思っています。</p>\n\n<h2>\n<span id=\"投稿について\" class=\"fragment\"></span><a href=\"#%E6%8A%95%E7%A8%BF%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a>投稿について</h2>\n\n<p>UbuntuのChromeだと綺麗に表示されないのですが、Twitterだといい感じになるみたいです。</p>\n\n<p>傑作ができたら、 <code>#pͪoͣnͬpͣoͥnͭpͣa͡inͥを支える技術</code> とかハッシュタグつけてツイートしてくれるか、Qiitaにコメントいただけると全部見ます！！！</p>\n\n<p>私が作ったのは ponponpain(moudameda)です。電車の中で、この文字を見ていただけると幸いです。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/8206fb3c6e7566ee05152a485054efa338aef800/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f33356538623366382d623130632d393432322d316134312d6466353631616331386432632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"393\" alt=\"スクリーンショット 2019-04-25 2.27.05.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F35e8b3f8-b10c-9422-1a41-df561ac18d2c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1bd6f8c5322fd63db7d5fd318cf412b4\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/35e8b3f8-b10c-9422-1a41-df561ac18d2c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F35e8b3f8-b10c-9422-1a41-df561ac18d2c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=88cf9ddeacd4802ec33e6222ae7cc696 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"使い方\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\"><i class=\"fa fa-link\"></i></a>使い方</h2>\n\n<p>そんなに難しくないので、こちらの画像を見ていただけるとなんとなくわかるかと思います。もしくは既出のGIF動画を見てからお使いください。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/4da94d3b0c7b5038cfc83b4bb34a78c89dc175d1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3131323932392f39666665663834662d363366612d366366362d353537632d3366323136343435613437362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1262\" alt=\"スクリーンショット 2019-04-25 1.09.26.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9ffef84f-63fa-6cf6-557c-3f216445a476.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a430a1b8b0e8dad1ebb415627297a291\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9ffef84f-63fa-6cf6-557c-3f216445a476.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F112929%2F9ffef84f-63fa-6cf6-557c-3f216445a476.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=75eeb02be9f307b02fd44689c84e19de 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"おわり\" class=\"fragment\"></span><a href=\"#%E3%81%8A%E3%82%8F%E3%82%8A\"><i class=\"fa fa-link\"></i></a>おわり</h2>\n\n<p>たくさん、遊んでいただけると幸いです！！！</p>\n\n<hr>\n\n<p>以下は、ちょっとだけ、真面目な話するよ、読む人は優しい心を持ってみてね！！</p>\n\n<hr>\n\n<h2>\n<span id=\"真面目な話\" class=\"fragment\"></span><a href=\"#%E7%9C%9F%E9%9D%A2%E7%9B%AE%E3%81%AA%E8%A9%B1\"><i class=\"fa fa-link\"></i></a>真面目な話</h2>\n\n<p>この上付きの文字は <code>ダイアクリティカルマーク</code> というみたいで、日本語の <code>ﾊﾟ</code> の <code>̊</code> とかそういうもんだと考えればなんとなく文字コードが別にあっても不思議ではないのではないでしょうか。</p>\n\n<ul>\n<li><a href=\"https://ja.wikipedia.org/wiki/%E3%83%80%E3%82%A4%E3%82%A2%E3%82%AF%E3%83%AA%E3%83%86%E3%82%A3%E3%82%AB%E3%83%AB%E3%83%9E%E3%83%BC%E3%82%AF\" rel=\"nofollow noopener\" target=\"_blank\">wiki/ダイアクリティカルマーク</a></li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"javascript\"><div class=\"highlight\"><pre><code><span class=\"c1\">// Chromeのコンソールで以下のコードを入力してください</span>\n<span class=\"s2\">` </span><span class=\"p\">${</span><span class=\"nb\">String</span><span class=\"p\">.</span><span class=\"nx\">fromCharCode</span><span class=\"p\">(</span><span class=\"mi\">867</span><span class=\"p\">)}</span><span class=\"s2\"> `</span> <span class=\"c1\">// 見やすい様に半角スペースいれている</span>\n<span class=\"c1\">//   ͣ がでてきます。</span>\n</code></pre></div></div>\n\n<p>ダイアクリティカルマークは番号でいうと <code>768 ~ 879</code> HEXでいうと <code>0x300 ~ 0x36F</code> が該当するみたいです。</p>\n\n<p>逆向きの変換は <code>'A'.codePointAt(0);</code> みたいなStringのAPIを使えば、 <code>A</code> の文字コード。</p>\n\n<p><code>pͪoͣnͬpͣoͥnͭpͣa͡inͥ</code> の文字コードはというと</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\"><div class=\"highlight\"><pre><code><span class=\"dl\">\"</span><span class=\"s2\">pͪoͣnͬpͣoͥnͭpͣa͡inͥ</span><span class=\"dl\">\"</span><span class=\"p\">.</span><span class=\"nx\">codePointAt</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"c1\">// 112 普通のpが一文字目</span>\n<span class=\"dl\">\"</span><span class=\"s2\">pͪoͣnͬpͣoͥnͭpͣa͡inͥ</span><span class=\"dl\">\"</span><span class=\"p\">.</span><span class=\"nx\">codePointAt</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"c1\">// 874 上付きのhが二文字目にきます</span>\n<span class=\"c1\">// 気になる人はChromeのコンソールに右の値を入れましょう ` ${String.fromCharCode(874)} `</span>\n<span class=\"c1\">//  ͪ がでてきます</span>\n</code></pre></div></div>\n\n<p>てな感じになります。</p>\n\n<p>javascriptでいい感じに扱いやすくしたのは <a href=\"https://github.com/ykhirao/qiita/blob/master/ponponpain/src/assets/codes.js\" rel=\"nofollow noopener\" target=\"_blank\">GitHub</a> に乗せているので良かったら使ってください。↓以下のようなコードになります。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">codes</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n  <span class=\"p\">{</span> <span class=\"dl\">\"</span><span class=\"s2\">id</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"mi\">768</span><span class=\"p\">,</span> <span class=\"dl\">\"</span><span class=\"s2\">hex</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">0x300</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"dl\">\"</span><span class=\"s2\">val</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">̀</span><span class=\"dl\">\"</span> <span class=\"p\">},</span>\n  <span class=\"p\">{</span> <span class=\"dl\">\"</span><span class=\"s2\">id</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"mi\">769</span><span class=\"p\">,</span> <span class=\"dl\">\"</span><span class=\"s2\">hex</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">0x301</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"dl\">\"</span><span class=\"s2\">val</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">́</span><span class=\"dl\">\"</span> <span class=\"p\">},</span>\n  <span class=\"p\">{</span> <span class=\"dl\">\"</span><span class=\"s2\">id</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"mi\">770</span><span class=\"p\">,</span> <span class=\"dl\">\"</span><span class=\"s2\">hex</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">0x302</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"dl\">\"</span><span class=\"s2\">val</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">̂</span><span class=\"dl\">\"</span> <span class=\"p\">},</span>\n  <span class=\"c1\">// ryaku</span>\n<span class=\"p\">]</span>\n</code></pre></div></div>\n\n<p>またフロントエンドの実装はVue.jsでサクッとやったので、参考にする奇特な方がいたらこちらをどうぞ！！<br>\n<a href=\"https://github.com/ykhirao/qiita/blob/master/ponponpain/src/components/DraggableText.vue\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/ykhirao/qiita/blob/master/ponponpain/src/components/DraggableText.vue</a> このあたり。</p>\n\n<p>右から左に文字列を読むアラビア語などのために <code>U+202E</code>という制御コードがあったり、UnicodeがーーとかSJISがーーーとか、正直難しい世界ですよね。</p>\n\n<p>なんで今回文字コードを追ってみようと思ったかというと、弊社でよく文字コードを見る機会があって、具体的には日本郵便とかに出す送り状を印刷している部分がWindows上のC#で書かれたアプリケーションでやっていて、WinのMS系のフォントにない文字コードのものは文字化けして大変なことになるんです。</p>\n\n<p>文字コードの深淵を覗く時、文字コードの深淵もまたあなたを覗いているとニーチェが言ったとか（言ってない）ありますけど、今回いろいろ調べたので少しだけ文字コードと仲良くなれた気がします。</p>\n\n<p>以上。ありがとうございました。</p>\n\n<p>.</p>\n","body":"# pͪoͣnͬpͣoͥnͭpͣa͡inͥの作り方\n\nぽんぽんぺいんを簡単に作るサイトを作ったのでよかったら使ってみてください。\n\n[【ここをクリック】](https://ykhirao.github.io/qiita/ponponpain/dist/)\n\n![タイトルなし.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/972150a9-cc61-3486-cec8-4e73c98c488b.gif)\n\n## ponponpain(haraita-i)とは\n\n画像でいうとこんなやつのこと。\n\n<img width=\"380\" alt=\"スクリーンショット 2019-04-25 2.28.11.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/dee541f3-887f-1aae-978c-1cf092f70398.png\">\n\n今回参考にさせていただきましたが、以下のサイトによくまとまっていると思います。\n\n- [不思議な文字 pͪoͣnͬpͣoͥnͭpͣa͡inͥ | bison's brain at postachio](http://mylog.jp/post/bu-si-yi-nawen-zi-phoanrpaointpaaini)\n- [ぽんぽんぺいん ‐ 通信用語の基礎知識](https://www.wdic.org/w/WDIC/%E3%81%BD%E3%82%93%E3%81%BD%E3%82%93%E3%81%BA%E3%81%84%E3%82%93)\n\nまあ要するに、不思議な上付き文字を組み合わせて、文字に副題（ルビ）をふろうって感じの遊びのことで、昔流行ったみたいです。\n\n今回はクリックだけで上付き文字を加えられるサイトを作ったのでぜひみんなに遊んでほしいなと思っています。\n\n## 投稿について\n\nUbuntuのChromeだと綺麗に表示されないのですが、Twitterだといい感じになるみたいです。\n\n傑作ができたら、 `#pͪoͣnͬpͣoͥnͭpͣa͡inͥを支える技術` とかハッシュタグつけてツイートしてくれるか、Qiitaにコメントいただけると全部見ます！！！\n\n私が作ったのは ponponpain(moudameda)です。電車の中で、この文字を見ていただけると幸いです。\n\n<img width=\"393\" alt=\"スクリーンショット 2019-04-25 2.27.05.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/35e8b3f8-b10c-9422-1a41-df561ac18d2c.png\">\n\n## 使い方\nそんなに難しくないので、こちらの画像を見ていただけるとなんとなくわかるかと思います。もしくは既出のGIF動画を見てからお使いください。\n\n<img width=\"1262\" alt=\"スクリーンショット 2019-04-25 1.09.26.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/9ffef84f-63fa-6cf6-557c-3f216445a476.png\">\n\n\n## おわり\n\nたくさん、遊んでいただけると幸いです！！！\n\n\n---\n\n以下は、ちょっとだけ、真面目な話するよ、読む人は優しい心を持ってみてね！！\n\n---\n\n## 真面目な話\n\nこの上付きの文字は `ダイアクリティカルマーク` というみたいで、日本語の `ﾊﾟ` の `̊` とかそういうもんだと考えればなんとなく文字コードが別にあっても不思議ではないのではないでしょうか。\n\n- [wiki/ダイアクリティカルマーク](https://ja.wikipedia.org/wiki/%E3%83%80%E3%82%A4%E3%82%A2%E3%82%AF%E3%83%AA%E3%83%86%E3%82%A3%E3%82%AB%E3%83%AB%E3%83%9E%E3%83%BC%E3%82%AF)\n\n```javascript\n// Chromeのコンソールで以下のコードを入力してください\n` ${String.fromCharCode(867)} ` // 見やすい様に半角スペースいれている\n//   ͣ がでてきます。\n```\n\nダイアクリティカルマークは番号でいうと `768 ~ 879` HEXでいうと `0x300 ~ 0x36F` が該当するみたいです。\n\n逆向きの変換は `'A'.codePointAt(0);` みたいなStringのAPIを使えば、 `A` の文字コード。\n\n`pͪoͣnͬpͣoͥnͭpͣa͡inͥ` の文字コードはというと\n\n```javascript\n\"pͪoͣnͬpͣoͥnͭpͣa͡inͥ\".codePointAt(0) // 112 普通のpが一文字目\n\"pͪoͣnͬpͣoͥnͭpͣa͡inͥ\".codePointAt(1) // 874 上付きのhが二文字目にきます\n// 気になる人はChromeのコンソールに右の値を入れましょう ` ${String.fromCharCode(874)} `\n//  ͪ がでてきます\n```\n\nてな感じになります。\n\njavascriptでいい感じに扱いやすくしたのは [GitHub](https://github.com/ykhirao/qiita/blob/master/ponponpain/src/assets/codes.js\n) に乗せているので良かったら使ってください。↓以下のようなコードになります。\n\n```js\nconst codes = [\n  { \"id\": 768, \"hex\": \"0x300\", \"val\": \"̀\" },\n  { \"id\": 769, \"hex\": \"0x301\", \"val\": \"́\" },\n  { \"id\": 770, \"hex\": \"0x302\", \"val\": \"̂\" },\n  // ryaku\n]\n```\n\nまたフロントエンドの実装はVue.jsでサクッとやったので、参考にする奇特な方がいたらこちらをどうぞ！！\nhttps://github.com/ykhirao/qiita/blob/master/ponponpain/src/components/DraggableText.vue このあたり。\n\n右から左に文字列を読むアラビア語などのために `U+202E`という制御コードがあったり、UnicodeがーーとかSJISがーーーとか、正直難しい世界ですよね。\n\nなんで今回文字コードを追ってみようと思ったかというと、弊社でよく文字コードを見る機会があって、具体的には日本郵便とかに出す送り状を印刷している部分がWindows上のC#で書かれたアプリケーションでやっていて、WinのMS系のフォントにない文字コードのものは文字化けして大変なことになるんです。\n\n文字コードの深淵を覗く時、文字コードの深淵もまたあなたを覗いているとニーチェが言ったとか（言ってない）ありますけど、今回いろいろ調べたので少しだけ文字コードと仲良くなれた気がします。\n\n以上。ありがとうございました。\n\n\n.\n","coediting":false,"comments_count":9,"created_at":"2019-04-25T11:07:49+09:00","group":null,"id":"9ca1fbd294883e06dbd6","likes_count":706,"private":false,"reactions_count":0,"stocks_count":400,"tags":[{"name":"JavaScript","versions":[]},{"name":"ネタ","versions":[]},{"name":"Vue.js","versions":[]}],"title":"pͪoͣnͬpͣoͥnͭpͣa͡inͥを支える技術","updated_at":"2020-10-20T13:43:57+09:00","url":"https://qiita.com/ykhirao/items/9ca1fbd294883e06dbd6","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p>本記事は<a href=\"https://qiita.com/advent-calendar/2018/openlogi\">OPENLOGI AdventCalendar</a> 15日目の記事です。</p>\n\n<h2>\n<span id=\"問題提起\" class=\"fragment\"></span><a href=\"#%E5%95%8F%E9%A1%8C%E6%8F%90%E8%B5%B7\"><i class=\"fa fa-link\"></i></a>問題提起</h2>\n\n<p>JSDOMの中で <strong>ピンク</strong> という色はどういう扱いを受けているか知っていますか？</p>\n\n<p><details><br>\ncolorのピンクはjsdomの中だとレンダーされなく、存在が消されています！<br>\nと思っていたのですが実装が変わったみたいです。<br>\nピンクはちゃんとレンダーされます。<br>\n<summary>答えだけ知りたいって方はこちらをクリックで <img alt=\":pray:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f64f.png\" title=\":pray:\" width=\"20\" loading=\"lazy\"></summary></details></p>\n\n<p>Vue.jsのコード例ですが触ったことないひともなんとなくわかるかと思う簡単な例にしてます。。<br>\nそれでは実際にコードを追ってみましょう。！！！</p>\n\n<h2>\n<span id=\"実コードみせる\" class=\"fragment\"></span><a href=\"#%E5%AE%9F%E3%82%B3%E3%83%BC%E3%83%89%E3%81%BF%E3%81%9B%E3%82%8B\"><i class=\"fa fa-link\"></i></a>実コードみせる</h2>\n\n<h3>\n<span id=\"ブラウザ編\" class=\"fragment\"></span><a href=\"#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E7%B7%A8\"><i class=\"fa fa-link\"></i></a>ブラウザ編</h3>\n\n<p>こちらのコードを実際にWeb上でレンダーするとどうなるか見ていきたいと思います。</p>\n\n<p>Greeting.vue</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;template&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>\n    color: <span class=\"nt\">&lt;span</span> <span class=\"na\">:style=</span><span class=\"s\">\"{ color: color }\"</span><span class=\"nt\">&gt;</span>{{ color }}<span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/template&gt;</span>\n\n<span class=\"nt\">&lt;script&gt;</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">Greeting</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"na\">props</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">color</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">String</span><span class=\"p\">,</span>\n      <span class=\"na\">default</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">blue</span><span class=\"dl\">\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">};</span>\n<span class=\"nt\">&lt;/script&gt;</span>\n\n</code></pre></div></div>\n\n<p>吐き出されるHTML</p>\n\n<div class=\"code-frame\" data-lang=\"HTML\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div&gt;</span>color: <span class=\"nt\">&lt;span</span> <span class=\"na\">style=</span><span class=\"s\">\"color: blue;\"</span><span class=\"nt\">&gt;</span>blue<span class=\"nt\">&lt;/span&gt;&lt;/div&gt;</span>\n</code></pre></div></div>\n\n<p>画面で見るとこんな感じ</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/d9094635d17d7ff50739e2545040a17dd69ca760/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34353966383062622d396238332d346430632d393166322d3265313839633835353335362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"451\" alt=\"スクリーンショット 2018-12-18 23.36.40.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F459f80bb-9b83-4d0c-91f2-2e189c855356.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d8cda6598a1985faa855ed617367ce5c\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/459f80bb-9b83-4d0c-91f2-2e189c855356.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F459f80bb-9b83-4d0c-91f2-2e189c855356.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f1eabd2503790223e92b69161acb944d 1x\" loading=\"lazy\"></a></p>\n\n<p>CodeSandboxで実際に触ってみる場合はこちら。 <br>\n<a href=\"https://codesandbox.io/s/7w1kz03o8x\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcodesandbox.io%2Fstatic%2Fimg%2Fplay-codesandbox.svg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=526b28505f6e4bb0243c164fb3253c6f\" alt=\"Edit Vue Template\" data-canonical-src=\"https://codesandbox.io/static/img/play-codesandbox.svg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcodesandbox.io%2Fstatic%2Fimg%2Fplay-codesandbox.svg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b5efbb51ff9effbad6a4700c5e6ca1b9 1x\" loading=\"lazy\"></a></p>\n\n<h3>\n<span id=\"nodejs編\" class=\"fragment\"></span><a href=\"#nodejs%E7%B7%A8\"><i class=\"fa fa-link\"></i></a>node.js編</h3>\n\n<p>（（今年の八月くらいまでは））例えばVue-test-utilsとかブラウザに依存しない環境で</p>\n\n<div class=\"code-frame\" data-lang=\"HTML\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;Greeting</span> <span class=\"na\">:color=</span><span class=\"s\">\"pink\"</span><span class=\"nt\">&gt;</span>\nをレンダーすると\n<span class=\"nt\">&lt;div&gt;</span>color: <span class=\"nt\">&lt;span</span> <span class=\"na\">style</span><span class=\"nt\">&gt;</span>pink<span class=\"nt\">&lt;/span&gt;&lt;/div&gt;</span>\nってなりました。\n</code></pre></div></div>\n\n<p>要するにピンクがスタイルとして認識されてなかったです。</p>\n\n<h2>\n<span id=\"仮想domのなかでどういう実装になっているか\" class=\"fragment\"></span><a href=\"#%E4%BB%AE%E6%83%B3dom%E3%81%AE%E3%81%AA%E3%81%8B%E3%81%A7%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E5%AE%9F%E8%A3%85%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B\"><i class=\"fa fa-link\"></i></a>仮想DOMのなかでどういう実装になっているか</h2>\n\n<p>JSDOMのなかでのカラーレンダリングとかはchad3814/CSSStyleDeclarationというライブラリに依存していました。</p>\n\n<p>そのなかの <a href=\"https://github.com/chad3814/CSSStyleDeclaration/blob/5c51d1657f8b693d46744e05239c24ae03be57e5/lib/parsers.js#L100-L116\" rel=\"nofollow noopener\" target=\"_blank\">ここらへん</a></p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">maroon</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">red</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">orange</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">yellow</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">olive</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">purple</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">fuchsia</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">white</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">lime</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">green</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">navy</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">blue</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">aqua</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">teal</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">black</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">silver</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n    <span class=\"k\">case</span> <span class=\"dl\">'</span><span class=\"s1\">gray</span><span class=\"dl\">'</span><span class=\"p\">:</span>\n</code></pre></div></div>\n\n<p>この色しか使えなかったのです。ピンクはありませんね。もしピンクをどうしてもVue-test-utilsのテストで使いたいならこのライブラリをフォークして <code>cace pink</code> を追加すると大丈夫な仕様になっていました。</p>\n\n<p><a href=\"https://github.com/jsdom/jsdom/issues/1965\" rel=\"nofollow noopener\" target=\"_blank\">このあたり</a>にとても詳しくかかれていますが、「JSDOMはpinkプロパティをセットできねーぜ」ってイシューが建てられていました。</p>\n\n<ul>\n<li>JSDOM doesn't retrieve the \"*style.backgroundColor = 'pink'\" property set on a table row #1965</li>\n</ul>\n\n<h2>\n<span id=\"書き換えてみる\" class=\"fragment\"></span><a href=\"#%E6%9B%B8%E3%81%8D%E6%8F%9B%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>書き換えてみる</h2>\n\n<p>node_modules/からCSSStyleDeclarationの部分を書き換えるとレンダリングされました。</p>\n\n<h2>\n<span id=\"jsdomのイシュー読んでみた\" class=\"fragment\"></span><a href=\"#jsdom%E3%81%AE%E3%82%A4%E3%82%B7%E3%83%A5%E3%83%BC%E8%AA%AD%E3%82%93%E3%81%A7%E3%81%BF%E3%81%9F\"><i class=\"fa fa-link\"></i></a>jsdomのイシュー読んでみた</h2>\n\n<p><a href=\"https://github.com/jsdom/jsdom/issues/1965\" rel=\"nofollow noopener\" target=\"_blank\">このあたり</a>のイシューを読んでみた</p>\n\n<blockquote>\n<p>We don't support getting the style property as JS properties on style for now. You would have to use tr.style.getPropertyValue(). I believe @Zirro is working on a rewrite of the entire CSSOM support in jsdom, though, which should bring support for this feature.</p>\n</blockquote>\n\n<p>ZirroさんのJSDOMのCSS部分の書き換えが終わり無事にピンクが使えるようになりました。</p>\n\n<h2>\n<span id=\"終わりに\" class=\"fragment\"></span><a href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>終わりに</h2>\n\n<p>今回「JSDOMだとピンクが使えないよ！」って話を書こうとしたらまさかのすでに対応済みでかなり焦りました。内容の薄い感じになりましたが、ライブラリの実装とかイシューとか少しおってみたので楽しかったです。</p>\n","body":"本記事は[OPENLOGI AdventCalendar](https://qiita.com/advent-calendar/2018/openlogi) 15日目の記事です。\n\n## 問題提起\n\nJSDOMの中で **ピンク** という色はどういう扱いを受けているか知っていますか？\n\n<details>\ncolorのピンクはjsdomの中だとレンダーされなく、存在が消されています！\nと思っていたのですが実装が変わったみたいです。\nピンクはちゃんとレンダーされます。\n<summary>答えだけ知りたいって方はこちらをクリックで :pray:</summary>\n\nVue.jsのコード例ですが触ったことないひともなんとなくわかるかと思う簡単な例にしてます。。\nそれでは実際にコードを追ってみましょう。！！！\n\n## 実コードみせる\n\n\n### ブラウザ編\n\nこちらのコードを実際にWeb上でレンダーするとどうなるか見ていきたいと思います。\n\nGreeting.vue\n\n```html\n<template>\n  <div>\n    color: <span :style=\"{ color: color }\">{{ color }}</span>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Greeting\",\n  props: {\n    color: {\n      type: String,\n      default: \"blue\"\n    }\n  }\n};\n</script>\n\n```\n\n吐き出されるHTML\n\n```HTML\n<div>color: <span style=\"color: blue;\">blue</span></div>\n```\n\n画面で見るとこんな感じ\n\n<img width=\"451\" alt=\"スクリーンショット 2018-12-18 23.36.40.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/459f80bb-9b83-4d0c-91f2-2e189c855356.png\">\n\nCodeSandboxで実際に触ってみる場合はこちら。 \n[![Edit Vue Template](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/7w1kz03o8x)\n\n### node.js編\n\n（（今年の八月くらいまでは））例えばVue-test-utilsとかブラウザに依存しない環境で\n\n```HTML\n<Greeting :color=\"pink\">\nをレンダーすると\n<div>color: <span style>pink</span></div>\nってなりました。\n```\n\n要するにピンクがスタイルとして認識されてなかったです。\n\n## 仮想DOMのなかでどういう実装になっているか\n\nJSDOMのなかでのカラーレンダリングとかはchad3814/CSSStyleDeclarationというライブラリに依存していました。\n\nそのなかの [ここらへん](https://github.com/chad3814/CSSStyleDeclaration/blob/5c51d1657f8b693d46744e05239c24ae03be57e5/lib/parsers.js#L100-L116)\n\n```js\n    case 'maroon':\n    case 'red':\n    case 'orange':\n    case 'yellow':\n    case 'olive':\n    case 'purple':\n    case 'fuchsia':\n    case 'white':\n    case 'lime':\n    case 'green':\n    case 'navy':\n    case 'blue':\n    case 'aqua':\n    case 'teal':\n    case 'black':\n    case 'silver':\n    case 'gray':\n```\n\nこの色しか使えなかったのです。ピンクはありませんね。もしピンクをどうしてもVue-test-utilsのテストで使いたいならこのライブラリをフォークして `cace pink` を追加すると大丈夫な仕様になっていました。\n\n[このあたり](https://github.com/jsdom/jsdom/issues/1965)にとても詳しくかかれていますが、「JSDOMはpinkプロパティをセットできねーぜ」ってイシューが建てられていました。\n\n- JSDOM doesn't retrieve the \"*style.backgroundColor = 'pink'\" property set on a table row #1965\n\n## 書き換えてみる\n\nnode_modules/からCSSStyleDeclarationの部分を書き換えるとレンダリングされました。\n\n## jsdomのイシュー読んでみた\n\n[このあたり](https://github.com/jsdom/jsdom/issues/1965)のイシューを読んでみた\n\n> We don't support getting the style property as JS properties on style for now. You would have to use tr.style.getPropertyValue(). I believe @Zirro is working on a rewrite of the entire CSSOM support in jsdom, though, which should bring support for this feature.\n\nZirroさんのJSDOMのCSS部分の書き換えが終わり無事にピンクが使えるようになりました。\n\n## 終わりに\n\n今回「JSDOMだとピンクが使えないよ！」って話を書こうとしたらまさかのすでに対応済みでかなり焦りました。内容の薄い感じになりましたが、ライブラリの実装とかイシューとか少しおってみたので楽しかったです。\n\n","coediting":false,"comments_count":0,"created_at":"2018-12-20T00:32:33+09:00","group":null,"id":"72f3a374882fa2a61576","likes_count":9,"private":false,"reactions_count":0,"stocks_count":2,"tags":[{"name":"JavaScript","versions":[]},{"name":"jsdom","versions":[]},{"name":"Vue.js","versions":[]},{"name":"仮想DOM","versions":[]}],"title":"JSDOMからピンクを探せ！！","updated_at":"2018-12-20T00:32:33+09:00","url":"https://qiita.com/ykhirao/items/72f3a374882fa2a61576","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p>本記事は<a href=\"https://qiita.com/advent-calendar/2018/openlogi\">OPENLOGI AdventCalendar</a> 5日目の記事です。</p>\n\n<p>8月からオープンロジ社に入社したエンジニアの <a href=\"/ykhirao\" class=\"user-mention js-hovercard\" title=\"ykhirao\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"ykhirao\">@ykhirao</a> です。<br>\n前職までRails＋Vueだったので、現職のReact+Laravel or Vue/Nuxt+Laravelに慣れるのに必死です。</p>\n\n<p>優秀な<a href=\"https://qiita.com/organizations/openlogi/members\">メンバー</a>が20人くらいいてかなり相談しやすい環境なので助かっています。</p>\n\n<p>さて本題、</p>\n\n<h1>\n<span id=\"ブラウザ上でコードを試すコードサンドボックス系まとめ\" class=\"fragment\"></span><a href=\"#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E4%B8%8A%E3%81%A7%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%A9%A6%E3%81%99%E3%82%B3%E3%83%BC%E3%83%89%E3%82%B5%E3%83%B3%E3%83%89%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E7%B3%BB%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>ブラウザ上でコードを試すコードサンドボックス系まとめ</h1>\n\n<h2>\n<span id=\"問題\" class=\"fragment\"></span><a href=\"#%E5%95%8F%E9%A1%8C\"><i class=\"fa fa-link\"></i></a>問題</h2>\n\n<p>この時期、アドベントカレンダーの検証用に、たくさんnode環境を作らないといけないじゃないですか。</p>\n\n<p>その上で</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>Fryday, November 30th\nMunetaka [10:58 AM]\n\nvueをsfcでブラウザのみで動かす方法ってあるんすか \nアドベントカレンダーの記事のリソース検証すんのに、わざわざnode環境作るのめんどい :thinking: \n</code></pre></div></div>\n\n<p>Slackでこんな発言を観測したので、環境構築いらずに始めれるサービスを並べてみようと思います。</p>\n\n<p><code>めんどい</code> : 怠惰はエンジニアに欠かせない資質のひとつなので彼はいいエンジニアですね。</p>\n\n<h2>\n<span id=\"jsfiddle\" class=\"fragment\"></span><a href=\"#jsfiddle\"><i class=\"fa fa-link\"></i></a>JSFiddle</h2>\n\n<p><a href=\"https://camo.qiitausercontent.com/4376686c54624e4f77eec39d6b09fb0a4726fd8a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f39336463653435652d616137342d623932612d623935622d6631303338333838343435612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F93dce45e-aa74-b92a-b95b-f1038388445a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=554510f2774219701a5a754d621e079b\" alt=\"Screenshot from 2018-12-05 13-21-23.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/93dce45e-aa74-b92a-b95b-f1038388445a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F93dce45e-aa74-b92a-b95b-f1038388445a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3e9ab4b47c4583931c9791bdff918c07 1x\" loading=\"lazy\"></a></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f37f04a1b03f3b33012ce559c59cc5ffe30c81a3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65316563343465392d366461382d373663352d633032312d3533646439396335363939352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe1ec44e9-6da8-76c5-c021-53dd99c56995.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7f2d76d7f9c2939216f1a67c79e09adb\" alt=\"Screenshot from 2018-12-05 13-21-47.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e1ec44e9-6da8-76c5-c021-53dd99c56995.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe1ec44e9-6da8-76c5-c021-53dd99c56995.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3b59671e8580ca219e42c3a487cfcc77 1x\" loading=\"lazy\"></a></p>\n\n<p>一瞬でVue.js環境作成できました。</p>\n\n<h2>\n<span id=\"codepen\" class=\"fragment\"></span><a href=\"#codepen\"><i class=\"fa fa-link\"></i></a>CodePen</h2>\n\n<p><a href=\"https://camo.qiitausercontent.com/4fafe9c7302700242ffdf171f0d0a9d2536ace35/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f61663037323539652d396261372d633536392d316231372d3138626330616432303933372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Faf07259e-9ba7-c569-1b17-18bc0ad20937.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d30cecf3e7c35de6cefb1e721be48d7a\" alt=\"Screenshot from 2018-12-05 13-28-01.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/af07259e-9ba7-c569-1b17-18bc0ad20937.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Faf07259e-9ba7-c569-1b17-18bc0ad20937.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=590522da4073e68a15aca9f34c723122 1x\" loading=\"lazy\"></a></p>\n\n<p>html, css, jsのサンプルコードを共有するにはいい感じのサービスかと思います。</p>\n\n<h2>\n<span id=\"codesandbox\" class=\"fragment\"></span><a href=\"#codesandbox\"><i class=\"fa fa-link\"></i></a>CodeSandbox</h2>\n\n<p><a href=\"https://camo.qiitausercontent.com/2c385a535dc5eecbeb79dc1a3f902823010a5542/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34323763383065632d386666342d303536652d653465622d3361386365333435316533322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F427c80ec-8ff4-056e-e4eb-3a8ce3451e32.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0b17811ef1f891bb6a097e3ed9cfda90\" alt=\"Screenshot from 2018-12-05 13-29-02.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/427c80ec-8ff4-056e-e4eb-3a8ce3451e32.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F427c80ec-8ff4-056e-e4eb-3a8ce3451e32.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=433b45d633c6cc31e3767173239bd9dd 1x\" loading=\"lazy\"></a></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/0c250d30139232385ce5403c4b9fa8a7e2189527/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f38313439393230352d343761362d313839382d346532322d6630646464383265623636362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F81499205-47a6-1898-4e22-f0ddd82eb666.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=68f198b5d6efb2477a7ac48e4e03d6e2\" alt=\"Screenshot from 2018-12-05 13-29-13.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/81499205-47a6-1898-4e22-f0ddd82eb666.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F81499205-47a6-1898-4e22-f0ddd82eb666.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=843840b244713471fce72b9009ac1739 1x\" loading=\"lazy\"></a></p>\n\n<p>こちらもJSFiddleと同じでテンプレートから選択してすぐにVueファイルが作成されました。</p>\n\n<p>例えば<a href=\"https://codesandbox.io/s/6lm4248qjr\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a>はVue-test-utilsのチームが使っているコードサンドボックスで、何か問題があるとこのテンプレートで問題を再現してからIsuue立てたりしています。すでにJest+Vue-test-utilsでのテストが書かれているので、試したい方はぜひ使ってみてください。</p>\n\n<p><qiita-embed-ogp src=\"https://codesandbox.io/s/6lm4248qjr\"></qiita-embed-ogp></p>\n\n<h2>\n<span id=\"playcode\" class=\"fragment\"></span><a href=\"#playcode\"><i class=\"fa fa-link\"></i></a>PLAYCODE</h2>\n\n<p><a href=\"https://camo.qiitausercontent.com/4a1f7fab512eda5f8245d21be58880e35600a533/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f30356130623235322d666230352d623462332d636535662d6366653338356234306437662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F05a0b252-fb05-b4b3-ce5f-cfe385b40d7f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9bf1c52c2c03b5c3c5757048a5dac68b\" alt=\"Screenshot from 2018-12-05 13-31-36.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/05a0b252-fb05-b4b3-ce5f-cfe385b40d7f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F05a0b252-fb05-b4b3-ce5f-cfe385b40d7f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=421cb51f731b223f01ad07218d0188b7 1x\" loading=\"lazy\"></a></p>\n\n<p>Vue系のプラグインを入れることもできます。テンプレート選択式ではないです。</p>\n\n<h2>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h2>\n\n<p>作ってから気づいたのですが2017年度版はpaizaさんがまとめてくれてました。<a href=\"https://paiza.hatenablog.com/entry/2017/01/30/%E3%80%902017%E5%B9%B4%E7%89%88%E3%80%91%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E4%B8%8A%E3%81%A7%E4%BD%BF%E3%81%88%E3%82%8BJavaScript%E9%96%8B%E7%99%BA%EF%BC%86%E5%AE%9F%E8%A1%8C%E7%92%B0%E5%A2%83Web\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a></p>\n\n<p>.</p>\n","body":"本記事は[OPENLOGI AdventCalendar](https://qiita.com/advent-calendar/2018/openlogi) 5日目の記事です。\n\n8月からオープンロジ社に入社したエンジニアの @ykhirao です。\n前職までRails＋Vueだったので、現職のReact+Laravel or Vue/Nuxt+Laravelに慣れるのに必死です。\n\n優秀な[メンバー](https://qiita.com/organizations/openlogi/members)が20人くらいいてかなり相談しやすい環境なので助かっています。\n\nさて本題、\n\n# ブラウザ上でコードを試すコードサンドボックス系まとめ\n\n## 問題\n\nこの時期、アドベントカレンダーの検証用に、たくさんnode環境を作らないといけないじゃないですか。\n\nその上で\n\n```\nFryday, November 30th\nMunetaka [10:58 AM]\n\nvueをsfcでブラウザのみで動かす方法ってあるんすか \nアドベントカレンダーの記事のリソース検証すんのに、わざわざnode環境作るのめんどい :thinking: \n```\n\nSlackでこんな発言を観測したので、環境構築いらずに始めれるサービスを並べてみようと思います。\n\n`めんどい` : 怠惰はエンジニアに欠かせない資質のひとつなので彼はいいエンジニアですね。\n\n## JSFiddle\n\n![Screenshot from 2018-12-05 13-21-23.png](https://qiita-image-store.s3.amazonaws.com/0/112929/93dce45e-aa74-b92a-b95b-f1038388445a.png)\n\n![Screenshot from 2018-12-05 13-21-47.png](https://qiita-image-store.s3.amazonaws.com/0/112929/e1ec44e9-6da8-76c5-c021-53dd99c56995.png)\n\n一瞬でVue.js環境作成できました。\n\n## CodePen\n\n![Screenshot from 2018-12-05 13-28-01.png](https://qiita-image-store.s3.amazonaws.com/0/112929/af07259e-9ba7-c569-1b17-18bc0ad20937.png)\n\nhtml, css, jsのサンプルコードを共有するにはいい感じのサービスかと思います。\n\n## CodeSandbox\n\n![Screenshot from 2018-12-05 13-29-02.png](https://qiita-image-store.s3.amazonaws.com/0/112929/427c80ec-8ff4-056e-e4eb-3a8ce3451e32.png)\n\n![Screenshot from 2018-12-05 13-29-13.png](https://qiita-image-store.s3.amazonaws.com/0/112929/81499205-47a6-1898-4e22-f0ddd82eb666.png)\n\nこちらもJSFiddleと同じでテンプレートから選択してすぐにVueファイルが作成されました。\n\n例えば[こちら](https://codesandbox.io/s/6lm4248qjr)はVue-test-utilsのチームが使っているコードサンドボックスで、何か問題があるとこのテンプレートで問題を再現してからIsuue立てたりしています。すでにJest+Vue-test-utilsでのテストが書かれているので、試したい方はぜひ使ってみてください。\n\nhttps://codesandbox.io/s/6lm4248qjr\n\n\n## PLAYCODE\n\n![Screenshot from 2018-12-05 13-31-36.png](https://qiita-image-store.s3.amazonaws.com/0/112929/05a0b252-fb05-b4b3-ce5f-cfe385b40d7f.png)\n\nVue系のプラグインを入れることもできます。テンプレート選択式ではないです。\n\n## 最後に\n\n作ってから気づいたのですが2017年度版はpaizaさんがまとめてくれてました。[こちら](https://paiza.hatenablog.com/entry/2017/01/30/%E3%80%902017%E5%B9%B4%E7%89%88%E3%80%91%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E4%B8%8A%E3%81%A7%E4%BD%BF%E3%81%88%E3%82%8BJavaScript%E9%96%8B%E7%99%BA%EF%BC%86%E5%AE%9F%E8%A1%8C%E7%92%B0%E5%A2%83Web)\n\n\n\n\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2018-12-05T13:37:35+09:00","group":null,"id":"b3c3f3a8d810685e09fe","likes_count":21,"private":false,"reactions_count":0,"stocks_count":15,"tags":[{"name":"Python","versions":[]},{"name":"JavaScript","versions":[]}],"title":"ブラウザ上でコードを試すコードサンドボックス系サイトまとめ","updated_at":"2021-10-06T21:02:31+09:00","url":"https://qiita.com/ykhirao/items/b3c3f3a8d810685e09fe","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p>はじめに。こちらは <a href=\"https://qiita.com/advent-calendar/2018/vuejs-2\">アドベントカレンダー</a> <code>Vue.js #2 Advent Calendar 2018</code> 3日目の記事になります。</p>\n\n<h1>\n<span id=\"2018年vueのテストまとめ-vue-test-utils\" class=\"fragment\"></span><a href=\"#2018%E5%B9%B4vue%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88%E3%81%BE%E3%81%A8%E3%82%81-vue-test-utils\"><i class=\"fa fa-link\"></i></a>2018年　Vueのテストまとめ （Vue-test-utils）</h1>\n\n<p>こんにちは。世界。</p>\n\n<p>今回は今年のVueのテスト関連について、自分がTwitterとか勉強会で観測したことをだらだらと述べるだけの会です。</p>\n\n<p>この記事についてなにか意見があるようでしたらコメント欄なり、編集リクエストをいただけると対応させていただきます。有名なWeb文章からの引用させていただきます。</p>\n\n<blockquote>\n<p>この問題について自分が唯一無二の権威だと主張するつもりもありません。気にくわなければ、自分なりのヤツをどうぞ。</p>\n\n<p>by ハッカーになろう (How To Become A Hacker）<br>\n<a href=\"https://cruel.org/freeware/hacker.html#skills1\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://cruel.org/freeware/hacker.html#skills1</a></p>\n</blockquote>\n\n<p>ブコメなどで辛辣なコメントされると全力で辛いので易しめにお願いいたします( ；∀；)</p>\n\n<h2>\n<span id=\"vue-test-utilsとの出会い\" class=\"fragment\"></span><a href=\"#vue-test-utils%E3%81%A8%E3%81%AE%E5%87%BA%E4%BC%9A%E3%81%84\"><i class=\"fa fa-link\"></i></a>Vue-test-utilsとの出会い</h2>\n\n<p>ときは2018年1月、私は彼にあってしまった。そう <a href=\"/webpack_master\" class=\"user-mention js-hovercard\" title=\"webpack_master\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"webpack_master\">@webpack_master</a> である。オーストラリア人の彼を元弊社（当時branuという会社でCMSをVueとRailsで作っていた）に引き込んできて今までのVueCDN環境からWebpack環境へと移行した。それが彼のWebpack力によっていろいろと環境の再構築などが進み <code>NO TEST, NO MERGE!!!</code> という号令のもと、プルリクエストへのレビューも激しいものになっていったのである…（ 訳注 NO TEST, NO MERGE はまじで言ってた ）そこから私のテスト人生は始まったのである。。。</p>\n\n<p>※　このエピソード自体は特に重要ではありませんが、テストを日常的に書いているひとからするとテストのないコードをマージすることはありえないことだと考えていることを身にしみて感じたということと、日本で彼が一チームにテスト文化を広げ、さらにテストを書くためのWebページを作ったりしているので、このエピソードを書きました。</p>\n\n<h2>\n<span id=\"vue公式\" class=\"fragment\"></span><a href=\"#vue%E5%85%AC%E5%BC%8F\"><i class=\"fa fa-link\"></i></a>Vue公式</h2>\n\n<h3>\n<span id=\"cookbook\" class=\"fragment\"></span><a href=\"#cookbook\"><i class=\"fa fa-link\"></i></a><a href=\"https://jp.vuejs.org/v2/cookbook/\" rel=\"nofollow noopener\" target=\"_blank\">Cookbook</a>\n</h3>\n\n<p>Vue公式サイトのCookbookは「リファレンスはわかったけど、実際どう書いたらいいの…？」的な話をわからやすく実例が乗った形で掲載している箇所になります。GitHubのイシューで今なおたくさんあがっているので、英語読めるかたは<a href=\"https://github.com/vuejs/vuejs.org/issues?q=is%3Aissue+is%3Aopen+label%3Acookbook\" rel=\"nofollow noopener\" target=\"_blank\">これ#cookbook</a>を参考にいろいろ見てみると面白いかもしれません。</p>\n\n<p>ここでもテストの仕方についてかかれています。</p>\n\n<p><qiita-embed-ogp src=\"https://jp.vuejs.org/v2/cookbook/unit-testing-vue-components.html\"></qiita-embed-ogp></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/fb1532301f4610ebd55bde03817ccb4141ed1e16/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f38643537386562632d393339392d303432632d333638662d3266666334323636323531662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1187\" alt=\"スクリーンショット 2018-12-03 1.17.00.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F8d578ebc-9399-042c-368f-2ffc4266251f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cffe10c99b3562fd6e7e875b9a33b415\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/8d578ebc-9399-042c-368f-2ffc4266251f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F8d578ebc-9399-042c-368f-2ffc4266251f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=71fd0edce1674b858adb32bf46fa20dc 1x\" loading=\"lazy\"></a></p>\n\n<p>この記事は <a href=\"/webpack_master\" class=\"user-mention js-hovercard\" title=\"webpack_master\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"webpack_master\">@webpack_master</a> が書いたCookbookで、テストのやり方についてみんなにもっと知ってほしいという思いから作られたと伺いました。<a href=\"https://github.com/vuejs/vuejs.org/pull/1369\" rel=\"nofollow noopener\" target=\"_blank\">このPR</a>でサラさんとかからレビューもらってとても勉強になったと言ってました。Cookbookは「こんな記事あるとVueへの理解広がるんじゃない？」って思ったら気軽にGitHubにイシュー作ってコアチームの意見もらいつつPR作ってって感じで増殖していっている（観測上）感じがしますので、ぜひ日本メンバーもCookbook作成に挑戦してほしいなあ…（他人事）</p>\n\n<p>またこの記事を日本語訳したのは私ですが　<a href=\"/potato4d\" class=\"user-mention js-hovercard\" title=\"potato4d\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"potato4d\">@potato4d</a>さん <a href=\"/re-fort\" class=\"user-mention js-hovercard\" title=\"re-fort\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"re-fort\">@re-fort</a> さん監訳ありがとうございました…！！！（本当に頭があがりません） 書いた本人を横において訳してたけど、英語と日本語が１００%訳せない表現とかがあって、日本語訳ってとても難しいのがわかりました。いつもVue.js-jpチームいつも本当にありがとうございます…！！！</p>\n\n<h3>\n<span id=\"vue-test-utils公式ページ\" class=\"fragment\"></span><a href=\"#vue-test-utils%E5%85%AC%E5%BC%8F%E3%83%9A%E3%83%BC%E3%82%B8\"><i class=\"fa fa-link\"></i></a>Vue-test-utils公式ページ</h3>\n\n<p><qiita-embed-ogp src=\"https://vue-test-utils.vuejs.org/ja/\"></qiita-embed-ogp></p>\n\n<p>こちらはVue-test-utilsの公式ホームページです。Vueのテストを始めるときは必ずお世話になると思います。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/ab537acb3590fca81cca1368947e10bfa6d894e5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f61373762333762372d633636302d346137622d323131662d6232633331613235633764302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1137\" alt=\"スクリーンショット 2018-12-03 1.29.45.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fa77b37b7-c660-4a7b-211f-b2c31a25c7d0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6a90f171da265d41b196f3e152615d90\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/a77b37b7-c660-4a7b-211f-b2c31a25c7d0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fa77b37b7-c660-4a7b-211f-b2c31a25c7d0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=869bb396bbd9da12a763a3f6be2753c1 1x\" loading=\"lazy\"></a></p>\n\n<p>またこのページをメインで日本語翻訳してたかたがチームを外れてしまったと、Vue-fesのときにEddが言っていました。（日本語に訳してくれる精力的な方を募集しているみたいです）</p>\n\n<h2>\n<span id=\"vue-testing-handbook\" class=\"fragment\"></span><a href=\"#vue-testing-handbook\"><i class=\"fa fa-link\"></i></a>vue-testing-handbook</h2>\n\n<p><qiita-embed-ogp src=\"https://lmiller1990.github.io/vue-testing-handbook/\"></qiita-embed-ogp></p>\n\n<p>こちらは <a href=\"/webpack_master\" class=\"user-mention js-hovercard\" title=\"webpack_master\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"webpack_master\">@webpack_master</a> が作ったVueのテストをどう書いたらいいかのTipsが乗っているWebページになります。めっちゃ本格的に作られていますし、自分も記事書かせてもらっているし、レビューもさせてもらってます。イメージはVue-tesu-utils公式ページのCookbook(hundbook)版みたいな立ち位置だと思っています。どうやってテスト書いたらいいのかな〜って迷っているかたはぜひ参考にしてみてください。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/ab2eee3c8dd1b897ebbb781052f593b832712a4c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65323035363932352d356334322d333831312d613330392d6335326631326562653864622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1397\" alt=\"スクリーンショット 2018-12-03 1.07.12.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe2056925-5c42-3811-a309-c52f12ebe8db.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5353aafff9f3885a5aa884e855a92f08\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e2056925-5c42-3811-a309-c52f12ebe8db.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe2056925-5c42-3811-a309-c52f12ebe8db.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=51b628a011d6054fc40dc9a0b011bdee 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"イベント関連\" class=\"fragment\"></span><a href=\"#%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E9%96%A2%E9%80%A3\"><i class=\"fa fa-link\"></i></a>イベント関連</h2>\n\n<h3>\n<span id=\"vue-meetup-6\" class=\"fragment\"></span><a href=\"#vue-meetup-6\"><i class=\"fa fa-link\"></i></a><a href=\"https://vuejs-meetup.connpass.com/event/69761/presentation/\" rel=\"nofollow noopener\" target=\"_blank\">Vue-meetup 6</a>\n</h3>\n\n<p>2017/12/13（水） 18:30〜<br>\n去年の年末 <a href=\"/webpack_master\" class=\"user-mention js-hovercard\" title=\"webpack_master\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"webpack_master\">@webpack_master</a> がVSCodeを使いながらVue-test-utilsを実演したのを覚えているかたは多少いるのでは…？<br>\nMeetupではこのころからテスト関連もちょいちょい発表されるようになってきたような。日本のVue界隈でテストの文化を発表してくれてありがとう！！！</p>\n\n<h3>\n<span id=\"vue-meetup-7\" class=\"fragment\"></span><a href=\"#vue-meetup-7\"><i class=\"fa fa-link\"></i></a><a href=\"https://vuejs-meetup.connpass.com/event/82065/presentation/\" rel=\"nofollow noopener\" target=\"_blank\">Vue-meetup 7</a>\n</h3>\n\n<p>2018/05/23（水） 19:00〜</p>\n\n<ul>\n<li><a href=\"https://speakerdeck.com/haribote/svg-makes-your-components-to-testable\" rel=\"nofollow noopener\" target=\"_blank\">SVG makes your components to testable</a></li>\n</ul>\n\n<p>この会ではVueのSVGコンポーネントをどうやってテストするかという内容の発表をはりぼてさんがしていたイメージです。このときはJestのSnapshotテストを使ってテストしようぜって流れになったと思います。詳しくはスライドで…！</p>\n\n<p>（当時は[Are you testing?] への質問に対して１割弱のひとが手をあげてました）</p>\n\n<h3>\n<span id=\"まぼろしのjs勉強会-5-型とテスト\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%BC%E3%82%8D%E3%81%97%E3%81%AEjs%E5%8B%89%E5%BC%B7%E4%BC%9A-5-%E5%9E%8B%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88\"><i class=\"fa fa-link\"></i></a><a href=\"https://maboroshi.connpass.com/event/93959/presentation/\" rel=\"nofollow noopener\" target=\"_blank\">まぼろしのJS勉強会 #5 「型とテスト」</a>\n</h3>\n\n<p>2018/08/03（金） 19:00〜</p>\n\n<p>前述のはりぼてさん運営のイベントで各自LTをやったのだけどかなりよかったです。（そして私を含めてみんな資料を公開していないだと…？？）</p>\n\n<ul>\n<li><a href=\"https://paper.dropbox.com/doc/--AJSmTDURDh_Dav6FYKC4EjW1AQ-S5VGlHnMn8lWxlVBDtCLh\" rel=\"nofollow noopener\" target=\"_blank\">『人民の人民による人民のための型とテスト』 by KIMURA Tetsuro</a></li>\n<li>『Vue-test-utilsのTipsとTDD』 by YUKI</li>\n<li>『Vueのコンポーネントテストについて：ロジック・UIのテストをちゃんと分けること』 by Lachlan</li>\n<li>『なぜテストするのか』 by かひろ</li>\n<li><a href=\"https://speakerdeck.com/takefumiyoshii/inferred-types-for-flux\" rel=\"nofollow noopener\" target=\"_blank\">『Inferred Types for Flux - 推論型武装 2018 -』 by takepepe</a></li>\n<li>『E2Eのなにか』 by いそだ</li>\n</ul>\n\n<p>内容は激アツで私はVueのTDDに関するプレゼン(<a href=\"https://qiita.com/ykhirao/items/becd9be857dbe6804314\" id=\"reference-a94905f9bc06a85bce6b\">以前のQiita記事</a>)をやりました。テスト会なのに６人くらい集まってかなり楽しかったです。</p>\n\n<p>また <a href=\"/takepepe\" class=\"user-mention js-hovercard\" title=\"takepepe\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"takepepe\">@takepepe</a> さんのプレゼンを少し見せると「型で担保できるところは型で担保しようぜ！！！」って話がありました。手動でテスト書くのもいいけど、Typescriptでしっかり型つけたら便利だという、そんな話。プレゼンは<a href=\"https://speakerdeck.com/takefumiyoshii/inferred-types-for-flux\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/17adbfe71d027de0268f4c10211e02a08b723593/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f33666531343739612d636465352d343662322d363863372d6361306263313136643434342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"400\" alt=\"スクリーンショット 2018-12-03 3.03.36.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F3fe1479a-cde5-46b2-68c7-ca0bc116d444.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d845ddf69f0b97e8d5c972dc64fda903\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/3fe1479a-cde5-46b2-68c7-ca0bc116d444.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F3fe1479a-cde5-46b2-68c7-ca0bc116d444.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1c6acf47ae3c5d3ce3bc685046487e17 1x\" loading=\"lazy\"></a></p>\n\n<p><a href=\"/haribote\" class=\"user-mention js-hovercard\" title=\"haribote\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"haribote\">@haribote</a> さんのプレゼンも少し考えさせられる内容で、Rspecなどで使われる「spec」とは本来「仕様」という意味で、つまりspecテスト・テストとは仕様を書くことなんじゃないか、そういうこと考えました。プレゼンは<a href=\"https://paper.dropbox.com/doc/--AS_ST4stA_CAJ2ASZ%7EIEQ8okAg-S5VGlHnMn8lWxlVBDtCLh\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a></p>\n\n<p>まぼろし勉強会は少人数で全員LT必須の勉強会で、議論も活発でとても有意義な時間を過ごせる会ですので興味あるかたはぜひにも！！！</p>\n\n<p>このときに <code>ロジックはTypescriptでしっかり守り、UIはJestのSnapshotでテストするのが最強じゃね？</code> って思いました（小並感）</p>\n\n<h3>\n<span id=\"技術書典-5\" class=\"fragment\"></span><a href=\"#%E6%8A%80%E8%A1%93%E6%9B%B8%E5%85%B8-5\"><i class=\"fa fa-link\"></i></a>技術書典 5</h3>\n\n<p>2018.10.08</p>\n\n<p><a href=\"/Takepepe\" class=\"user-mention js-hovercard\" title=\"Takepepe\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"Takepepe\">@Takepepe</a> さんが　<code>TypeScript3.1 推論型の活用と合成</code> って本を出していた。<a href=\"https://techbookfest.org/event/tbf05/circle/49200001\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a></p>\n\n<p>（このあたりテスト本観測さぼってたのでなにかあれば編集リクエストください）</p>\n\n<h3>\n<span id=\"jslounge\" class=\"fragment\"></span><a href=\"#jslounge\"><i class=\"fa fa-link\"></i></a>JSLounge</h3>\n\n<p>Vue.js-jpコアメンバーのpotato4dさんなどが主催しているイベントがこちら。<br>\n有料のイベントですが、テスト関連のキャッチアップはこういうハンズオンから始めるのもいいかもしれません。<br>\n少し古いイベントですが、こういうのを主催しているみたいです<br>\n<a href=\"https://jslounge.connpass.com/event/89536/\" rel=\"nofollow noopener\" target=\"_blank\">JSLounge「Vue Test Utils + JestによるSPAのユニットテスト」ハンズオン</a></p>\n\n<h3>\n<span id=\"vue-fes\" class=\"fragment\"></span><a href=\"#vue-fes\"><i class=\"fa fa-link\"></i></a><a href=\"https://vuefes.jp/time-table/\" rel=\"nofollow noopener\" target=\"_blank\">Vue-fes</a>\n</h3>\n\n<ul>\n<li><a href=\"https://vuefes.jp/speakers/eddyerburgh/\" rel=\"nofollow noopener\" target=\"_blank\">Unit testing a Vuex store by Edd</a></li>\n</ul>\n\n<p>Vue-test-utilsのメインメンテナーのEddによるプレゼン。</p>\n\n<ul>\n<li><a href=\"https://vuefes.jp/speakers/tsuchikazu/\" rel=\"nofollow noopener\" target=\"_blank\">1年間単体テストを書き続けた現場から送る Vue Component のテスト by 土屋さん</a></li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/3f5e647776d2454eca9cb1eee9dd373e6a72e287/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f63313031663331342d383336642d363261642d646466362d3965306531363562383661332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc101f314-836d-62ad-ddf6-9e0e165b86a3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=85c174c062af280a91a87e58714fa692\" alt=\"Screenshot from 2018-12-03 11-29-24.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/c101f314-836d-62ad-ddf6-9e0e165b86a3.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc101f314-836d-62ad-ddf6-9e0e165b86a3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=978697b5cdcf4f6d2dbee984f8be405c 1x\" loading=\"lazy\"></a></p>\n\n<p>こんな感じで <code>結局テストってなに使えばいいんだよ…jest?mocha?</code> ってものまとめられていて、とてもいい資料でした。<a href=\"https://speakerdeck.com/tsuchikazu/vue-component-test?slide=27\" rel=\"nofollow noopener\" target=\"_blank\">27ページ</a>感謝。絶対読んだほうがいいです。</p>\n\n<h2>\n<span id=\"twitter観測事例\" class=\"fragment\"></span><a href=\"#twitter%E8%A6%B3%E6%B8%AC%E4%BA%8B%E4%BE%8B\"><i class=\"fa fa-link\"></i></a>Twitter観測事例</h2>\n\n<h3>\n<span id=\"tddほんとにやるの\" class=\"fragment\"></span><a href=\"#tdd%E3%81%BB%E3%82%93%E3%81%A8%E3%81%AB%E3%82%84%E3%82%8B%E3%81%AE\"><i class=\"fa fa-link\"></i></a>TDDほんとにやるの…？</h3>\n\n<p>フロントエンド開発でのTDDってほんとにできるの？って疑問があると思いますが、いい感じの答えを <a href=\"/kotamat\" class=\"user-mention js-hovercard\" title=\"kotamat\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"kotamat\">@kotamat</a> さんが書いていたので</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>1. ざっと実装する\n2. ざっとテスト書く\n3. テスト通るまで修正する\n4. テストを細かく書く\n5. テスト通るまで修正する\nが今のところ一番早く実装できる。\n最初をテストから始めるのは、だいぶ実装に自信ないと逆に時間かかると思う。\n</code></pre></div></div>\n\n<p><qiita-embed-tweet src=\"https://twitter.com/kotamats/status/1034083793064288257\"></qiita-embed-tweet></p>\n\n<p>フロントエンド開発でテストするなら、これが一番なんじゃないかなと思う。。</p>\n\n<h2>\n<span id=\"qiita記事とアカウント情報\" class=\"fragment\"></span><a href=\"#qiita%E8%A8%98%E4%BA%8B%E3%81%A8%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E6%83%85%E5%A0%B1\"><i class=\"fa fa-link\"></i></a>Qiita記事とアカウント情報</h2>\n\n<ul>\n<li><a href=\"https://qiita.com/ykhirao/items/becd9be857dbe6804314\">【Vue.js】いつから「フロントエンド開発でTDDができない」と錯覚していた？ - Qiita</a></li>\n</ul>\n\n<p>こちら私の記事ですが</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/85bff57e445fdd85820e41f62824b2d8e9d635d2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f35653663666432662d633939642d333561612d623634302d3934336661386462323062342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"500\" alt=\"スクリーンショット 2018-12-03 1.17.00.png\" src=\"https://camo.qiitausercontent.com/85bff57e445fdd85820e41f62824b2d8e9d635d2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f35653663666432662d633939642d333561612d623634302d3934336661386462323062342e706e67\" loading=\"lazy\"></a></p>\n\n<p>こういうコンポーネントのときはどうテスト（TDD）書いて行くのか、的な内容をまとめています。</p>\n\n<p><a href=\"/webpack_master\" class=\"user-mention js-hovercard\" title=\"webpack_master\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"webpack_master\">@webpack_master</a> もう日本にいないので日本語記事増えることはない気がしますが。<br>\n<a href=\"/superyusuke\" class=\"user-mention js-hovercard\" title=\"superyusuke\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"superyusuke\">@superyusuke</a> vue-testing-handbookの訳してくれたりしている方で、Qiita投稿されていたりするので、ぜひフォローとかしておいたほうがいいかもしれません。テスト力とか高めのお方。<br>\n<a href=\"/ykhirao\" class=\"user-mention js-hovercard\" title=\"ykhirao\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"ykhirao\">@ykhirao</a> 私ですが、たまーーーにテスト関連Qiita記事投稿するかもれません。</p>\n\n<p>その他…、 #vue-test-utils 関連投稿しているかたは編集リクエストで自己申告ください。</p>\n\n<h2>\n<span id=\"これで君もテスト書いたことあるって言える\" class=\"fragment\"></span><a href=\"#%E3%81%93%E3%82%8C%E3%81%A7%E5%90%9B%E3%82%82%E3%83%86%E3%82%B9%E3%83%88%E6%9B%B8%E3%81%84%E3%81%9F%E3%81%93%E3%81%A8%E3%81%82%E3%82%8B%E3%81%A3%E3%81%A6%E8%A8%80%E3%81%88%E3%82%8B\"><i class=\"fa fa-link\"></i></a>これで君もテスト書いたことあるって言える！！</h2>\n\n<p>こちらVue-test-utilsのチームがよく使っているCodeSandbox（ブラウザ上でVueコード書ける！！！）のテンプレートになります。</p>\n\n<p><a href=\"https://codesandbox.io/s/6lm4248qjr\" rel=\"nofollow noopener\" target=\"_blank\">Vue Template - CodeSandbox</a></p>\n\n<p>HelloWorld.spec.jsのdescribeの下にテストを追記してみましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">HelloWorld.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">describe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">HelloWorld</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">test</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">my test</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">);</span>\n  <span class=\"p\">});</span>\n</code></pre></div>\n</div>\n\n<p><a href=\"https://camo.qiitausercontent.com/0eba2612ca1e052f0cc6fa02e1dd8cfc32cd7682/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f63666137623231612d326135352d376235312d323866352d3865333361333265306230642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fcfa7b21a-2a55-7b51-28f5-8e33a32e0b0d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=21d6752fba04fccd494e4ad73710eae9\" alt=\"Screenshot from 2018-12-03 11-21-35.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/cfa7b21a-2a55-7b51-28f5-8e33a32e0b0d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fcfa7b21a-2a55-7b51-28f5-8e33a32e0b0d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=399e346a1f7d42474865b052e6bb4b43 1x\" loading=\"lazy\"></a></p>\n\n<p>失敗するテストがかけたはずです！！！</p>\n\n<p><code>expect(1).toBe(1);</code> って書き直してテスト終了です。Vue-test-utilsの体験をぜひしていってください。</p>\n\n<h2>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>　最後に</h2>\n\n<p>だらだらと個人的に参加したイベントとか読んだ資料とかをまとめただけになります。<br>\n色んな所に情報はあるので参考にして、また機会あればみなさんもテスト書いてみてください。</p>\n\n<h2>\n<span id=\"昨日と明日\" class=\"fragment\"></span><a href=\"#%E6%98%A8%E6%97%A5%E3%81%A8%E6%98%8E%E6%97%A5\"><i class=\"fa fa-link\"></i></a>昨日と明日</h2>\n\n<p>昨日は <a href=\"/miyanokomiya\" class=\"user-mention js-hovercard\" title=\"miyanokomiya\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"miyanokomiya\">@miyanokomiya</a> さんの記事の <code>アドカレのためにVueとSVGなGIFメーカーをElectron環境で開発した</code> です。<br>\nWebアプリだけでGif作成できるの…？？？</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/e6ff55dc2ae05b6db7d9e23cda328331a1f5e652/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f36653534393432382d663733622d363761622d626266652d6462306164663032376666302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"400\" alt=\"スクリーンショット 2018-12-03 0.35.07.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6e549428-f73b-67ab-bbfe-db0adf027ff0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=dfa3d7c681774cff4f25ccc89a0b8144\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6e549428-f73b-67ab-bbfe-db0adf027ff0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6e549428-f73b-67ab-bbfe-db0adf027ff0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=06293e19f13a70c2270fa1714dd995fe 1x\" loading=\"lazy\"></a></p>\n\n<p>自分のフィルム写真突っ込んでいろいろしてみましたが、とても面白そうでした！！！続きは<a href=\"https://qiita.com/miyanokomiya/items/9e6ada8953b17b331c34\">Webで</a></p>\n\n<p>明日は <a href=\"/omiend\" class=\"user-mention js-hovercard\" title=\"omiend\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"omiend\">@omiend</a> さんの <code>Vue.jsの仮想DOMのレンダリング処理はどのようにして動いているのか</code> ですが楽しみですね！！！</p>\n\n<p>.</p>\n","body":"はじめに。こちらは [アドベントカレンダー](https://qiita.com/advent-calendar/2018/vuejs-2) `Vue.js #2 Advent Calendar 2018` 3日目の記事になります。\n\n# 2018年　Vueのテストまとめ （Vue-test-utils）\n\nこんにちは。世界。\n\n今回は今年のVueのテスト関連について、自分がTwitterとか勉強会で観測したことをだらだらと述べるだけの会です。\n\nこの記事についてなにか意見があるようでしたらコメント欄なり、編集リクエストをいただけると対応させていただきます。有名なWeb文章からの引用させていただきます。\n\n> この問題について自分が唯一無二の権威だと主張するつもりもありません。気にくわなければ、自分なりのヤツをどうぞ。\n> \n> by ハッカーになろう (How To Become A Hacker）\n> https://cruel.org/freeware/hacker.html#skills1\n\nブコメなどで辛辣なコメントされると全力で辛いので易しめにお願いいたします( ；∀；)\n\n## Vue-test-utilsとの出会い\n\nときは2018年1月、私は彼にあってしまった。そう @webpack_master である。オーストラリア人の彼を元弊社（当時branuという会社でCMSをVueとRailsで作っていた）に引き込んできて今までのVueCDN環境からWebpack環境へと移行した。それが彼のWebpack力によっていろいろと環境の再構築などが進み `NO TEST, NO MERGE!!!` という号令のもと、プルリクエストへのレビューも激しいものになっていったのである…（ 訳注 NO TEST, NO MERGE はまじで言ってた ）そこから私のテスト人生は始まったのである。。。\n\n※　このエピソード自体は特に重要ではありませんが、テストを日常的に書いているひとからするとテストのないコードをマージすることはありえないことだと考えていることを身にしみて感じたということと、日本で彼が一チームにテスト文化を広げ、さらにテストを書くためのWebページを作ったりしているので、このエピソードを書きました。\n\n## Vue公式\n\n### [Cookbook](https://jp.vuejs.org/v2/cookbook/)\nVue公式サイトのCookbookは「リファレンスはわかったけど、実際どう書いたらいいの…？」的な話をわからやすく実例が乗った形で掲載している箇所になります。GitHubのイシューで今なおたくさんあがっているので、英語読めるかたは[これ#cookbook](https://github.com/vuejs/vuejs.org/issues?q=is%3Aissue+is%3Aopen+label%3Acookbook)を参考にいろいろ見てみると面白いかもしれません。\n\nここでもテストの仕方についてかかれています。\n\nhttps://jp.vuejs.org/v2/cookbook/unit-testing-vue-components.html\n\n<img width=\"1187\" alt=\"スクリーンショット 2018-12-03 1.17.00.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/8d578ebc-9399-042c-368f-2ffc4266251f.png\">\n\nこの記事は @webpack_master が書いたCookbookで、テストのやり方についてみんなにもっと知ってほしいという思いから作られたと伺いました。[このPR](https://github.com/vuejs/vuejs.org/pull/1369)でサラさんとかからレビューもらってとても勉強になったと言ってました。Cookbookは「こんな記事あるとVueへの理解広がるんじゃない？」って思ったら気軽にGitHubにイシュー作ってコアチームの意見もらいつつPR作ってって感じで増殖していっている（観測上）感じがしますので、ぜひ日本メンバーもCookbook作成に挑戦してほしいなあ…（他人事）\n\nまたこの記事を日本語訳したのは私ですが　@potato4dさん @re-fort さん監訳ありがとうございました…！！！（本当に頭があがりません） 書いた本人を横において訳してたけど、英語と日本語が１００%訳せない表現とかがあって、日本語訳ってとても難しいのがわかりました。いつもVue.js-jpチームいつも本当にありがとうございます…！！！\n\n### Vue-test-utils公式ページ\n\nhttps://vue-test-utils.vuejs.org/ja/\n\nこちらはVue-test-utilsの公式ホームページです。Vueのテストを始めるときは必ずお世話になると思います。\n\n<img width=\"1137\" alt=\"スクリーンショット 2018-12-03 1.29.45.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/a77b37b7-c660-4a7b-211f-b2c31a25c7d0.png\">\n\nまたこのページをメインで日本語翻訳してたかたがチームを外れてしまったと、Vue-fesのときにEddが言っていました。（日本語に訳してくれる精力的な方を募集しているみたいです）\n\n## vue-testing-handbook\n\nhttps://lmiller1990.github.io/vue-testing-handbook/\n\nこちらは @webpack_master が作ったVueのテストをどう書いたらいいかのTipsが乗っているWebページになります。めっちゃ本格的に作られていますし、自分も記事書かせてもらっているし、レビューもさせてもらってます。イメージはVue-tesu-utils公式ページのCookbook(hundbook)版みたいな立ち位置だと思っています。どうやってテスト書いたらいいのかな〜って迷っているかたはぜひ参考にしてみてください。\n\n<img width=\"1397\" alt=\"スクリーンショット 2018-12-03 1.07.12.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e2056925-5c42-3811-a309-c52f12ebe8db.png\">\n\n## イベント関連\n\n### [Vue-meetup 6](https://vuejs-meetup.connpass.com/event/69761/presentation/)\n2017/12/13（水） 18:30〜\n去年の年末 @webpack_master がVSCodeを使いながらVue-test-utilsを実演したのを覚えているかたは多少いるのでは…？\nMeetupではこのころからテスト関連もちょいちょい発表されるようになってきたような。日本のVue界隈でテストの文化を発表してくれてありがとう！！！\n\n### [Vue-meetup 7](https://vuejs-meetup.connpass.com/event/82065/presentation/)\n\n2018/05/23（水） 19:00〜\n\n- [SVG makes your components to testable](https://speakerdeck.com/haribote/svg-makes-your-components-to-testable)\n\nこの会ではVueのSVGコンポーネントをどうやってテストするかという内容の発表をはりぼてさんがしていたイメージです。このときはJestのSnapshotテストを使ってテストしようぜって流れになったと思います。詳しくはスライドで…！\n\n（当時は[Are you testing?] への質問に対して１割弱のひとが手をあげてました）\n\n### [まぼろしのJS勉強会 #5 「型とテスト」](https://maboroshi.connpass.com/event/93959/presentation/)\n\n2018/08/03（金） 19:00〜\n\n前述のはりぼてさん運営のイベントで各自LTをやったのだけどかなりよかったです。（そして私を含めてみんな資料を公開していないだと…？？）\n\n- [『人民の人民による人民のための型とテスト』 by KIMURA Tetsuro](https://paper.dropbox.com/doc/--AJSmTDURDh_Dav6FYKC4EjW1AQ-S5VGlHnMn8lWxlVBDtCLh)\n- 『Vue-test-utilsのTipsとTDD』 by YUKI\n- 『Vueのコンポーネントテストについて：ロジック・UIのテストをちゃんと分けること』 by Lachlan\n- 『なぜテストするのか』 by かひろ\n- [『Inferred Types for Flux - 推論型武装 2018 -』 by takepepe](https://speakerdeck.com/takefumiyoshii/inferred-types-for-flux)\n- 『E2Eのなにか』 by いそだ\n\n内容は激アツで私はVueのTDDに関するプレゼン([以前のQiita記事](https://qiita.com/ykhirao/items/becd9be857dbe6804314))をやりました。テスト会なのに６人くらい集まってかなり楽しかったです。\n\nまた @takepepe さんのプレゼンを少し見せると「型で担保できるところは型で担保しようぜ！！！」って話がありました。手動でテスト書くのもいいけど、Typescriptでしっかり型つけたら便利だという、そんな話。プレゼンは[こちら](https://speakerdeck.com/takefumiyoshii/inferred-types-for-flux)\n\n<img width=\"400\" alt=\"スクリーンショット 2018-12-03 3.03.36.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/3fe1479a-cde5-46b2-68c7-ca0bc116d444.png\">\n\n@haribote さんのプレゼンも少し考えさせられる内容で、Rspecなどで使われる「spec」とは本来「仕様」という意味で、つまりspecテスト・テストとは仕様を書くことなんじゃないか、そういうこと考えました。プレゼンは[こちら](https://paper.dropbox.com/doc/--AS_ST4stA_CAJ2ASZ~IEQ8okAg-S5VGlHnMn8lWxlVBDtCLh)\n\nまぼろし勉強会は少人数で全員LT必須の勉強会で、議論も活発でとても有意義な時間を過ごせる会ですので興味あるかたはぜひにも！！！\n\nこのときに `ロジックはTypescriptでしっかり守り、UIはJestのSnapshotでテストするのが最強じゃね？` って思いました（小並感）\n\n### 技術書典 5\n\n2018.10.08\n\n@Takepepe さんが　`TypeScript3.1 推論型の活用と合成` って本を出していた。[こちら](https://techbookfest.org/event/tbf05/circle/49200001)\n\n\n（このあたりテスト本観測さぼってたのでなにかあれば編集リクエストください）\n\n### JSLounge\n\nVue.js-jpコアメンバーのpotato4dさんなどが主催しているイベントがこちら。\n有料のイベントですが、テスト関連のキャッチアップはこういうハンズオンから始めるのもいいかもしれません。\n少し古いイベントですが、こういうのを主催しているみたいです\n[JSLounge「Vue Test Utils + JestによるSPAのユニットテスト」ハンズオン](https://jslounge.connpass.com/event/89536/)\n\n\n### [Vue-fes](https://vuefes.jp/time-table/)\n\n- [Unit testing a Vuex store by Edd](https://vuefes.jp/speakers/eddyerburgh/)\n\nVue-test-utilsのメインメンテナーのEddによるプレゼン。\n\n- [1年間単体テストを書き続けた現場から送る Vue Component のテスト by 土屋さん](https://vuefes.jp/speakers/tsuchikazu/)\n\n\n![Screenshot from 2018-12-03 11-29-24.png](https://qiita-image-store.s3.amazonaws.com/0/112929/c101f314-836d-62ad-ddf6-9e0e165b86a3.png)\n\nこんな感じで `結局テストってなに使えばいいんだよ…jest?mocha?` ってものまとめられていて、とてもいい資料でした。[27ページ](https://speakerdeck.com/tsuchikazu/vue-component-test?slide=27)感謝。絶対読んだほうがいいです。\n  \n\n## Twitter観測事例\n\n### TDDほんとにやるの…？\nフロントエンド開発でのTDDってほんとにできるの？って疑問があると思いますが、いい感じの答えを @kotamat さんが書いていたので\n\n```\n1. ざっと実装する\n2. ざっとテスト書く\n3. テスト通るまで修正する\n4. テストを細かく書く\n5. テスト通るまで修正する\nが今のところ一番早く実装できる。\n最初をテストから始めるのは、だいぶ実装に自信ないと逆に時間かかると思う。\n```\n\nhttps://twitter.com/kotamats/status/1034083793064288257\n\nフロントエンド開発でテストするなら、これが一番なんじゃないかなと思う。。\n\n## Qiita記事とアカウント情報\n\n- [【Vue.js】いつから「フロントエンド開発でTDDができない」と錯覚していた？ - Qiita](https://qiita.com/ykhirao/items/becd9be857dbe6804314)\n\nこちら私の記事ですが\n\n<img width=\"500\" alt=\"スクリーンショット 2018-12-03 1.17.00.png\" src=\"https://camo.qiitausercontent.com/85bff57e445fdd85820e41f62824b2d8e9d635d2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f35653663666432662d633939642d333561612d623634302d3934336661386462323062342e706e67\">\n\nこういうコンポーネントのときはどうテスト（TDD）書いて行くのか、的な内容をまとめています。\n\n@webpack_master もう日本にいないので日本語記事増えることはない気がしますが。\n@superyusuke vue-testing-handbookの訳してくれたりしている方で、Qiita投稿されていたりするので、ぜひフォローとかしておいたほうがいいかもしれません。テスト力とか高めのお方。\n@ykhirao 私ですが、たまーーーにテスト関連Qiita記事投稿するかもれません。\n\nその他…、 #vue-test-utils 関連投稿しているかたは編集リクエストで自己申告ください。\n\n## これで君もテスト書いたことあるって言える！！\n\nこちらVue-test-utilsのチームがよく使っているCodeSandbox（ブラウザ上でVueコード書ける！！！）のテンプレートになります。\n\n[Vue Template - CodeSandbox](https://codesandbox.io/s/6lm4248qjr)\n\nHelloWorld.spec.jsのdescribeの下にテストを追記してみましょう。\n\n```HelloWorld.spec.js\ndescribe(\"HelloWorld\", () => {\n  test(\"my test\", () => {\n    expect(1).toBe(2);\n  });\n```\n\n![Screenshot from 2018-12-03 11-21-35.png](https://qiita-image-store.s3.amazonaws.com/0/112929/cfa7b21a-2a55-7b51-28f5-8e33a32e0b0d.png)\n\n失敗するテストがかけたはずです！！！\n\n`expect(1).toBe(1);` って書き直してテスト終了です。Vue-test-utilsの体験をぜひしていってください。\n\n\n##　最後に\n\nだらだらと個人的に参加したイベントとか読んだ資料とかをまとめただけになります。\n色んな所に情報はあるので参考にして、また機会あればみなさんもテスト書いてみてください。\n\n## 昨日と明日\n\n昨日は @miyanokomiya さんの記事の `アドカレのためにVueとSVG\bなGIFメーカーをElectron環境で開発した` です。\nWebアプリだけでGif作成できるの…？？？\n\n<img width=\"400\" alt=\"スクリーンショット 2018-12-03 0.35.07.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6e549428-f73b-67ab-bbfe-db0adf027ff0.png\">\n\n自分のフィルム写真突っ込んでいろいろしてみましたが、とても面白そうでした！！！続きは[Webで](https://qiita.com/miyanokomiya/items/9e6ada8953b17b331c34)\n\n明日は @omiend さんの `Vue.jsの仮想DOMのレンダリング処理はどのようにして動いているのか` ですが楽しみですね！！！\n\n\n\n\n\n\n.\n","coediting":false,"comments_count":6,"created_at":"2018-12-03T11:33:51+09:00","group":null,"id":"129e05f25c203cd0fde3","likes_count":96,"private":false,"reactions_count":0,"stocks_count":80,"tags":[{"name":"JavaScript","versions":[]},{"name":"TypeScript","versions":[]},{"name":"jsdom","versions":[]},{"name":"Vue.js","versions":[]},{"name":"vue-test-utils","versions":[]}],"title":"【2018年】Vueのテスト関連まとめ【非公式】","updated_at":"2018-12-03T11:33:51+09:00","url":"https://qiita.com/ykhirao/items/129e05f25c203cd0fde3","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"githubのレビューでコード提案をする便利機能を試してみた\" class=\"fragment\"></span><a href=\"#github%E3%81%AE%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E3%81%A7%E3%82%B3%E3%83%BC%E3%83%89%E6%8F%90%E6%A1%88%E3%82%92%E3%81%99%E3%82%8B%E4%BE%BF%E5%88%A9%E6%A9%9F%E8%83%BD%E3%82%92%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F\"><i class=\"fa fa-link\"></i></a>GitHubのレビューでコード提案をする便利機能を試してみた</h1>\n\n<h2>\n<span id=\"new-suggest-specific-code-changes-that-the-pull-request-author-can-immediately-commit-you-will-be-attributed-in-the-commit\" class=\"fragment\"></span><a href=\"#new-suggest-specific-code-changes-that-the-pull-request-author-can-immediately-commit-you-will-be-attributed-in-the-commit\"><i class=\"fa fa-link\"></i></a>New! Suggest specific code changes that the pull request author can immediately commit. You will be attributed in the commit.</h2>\n\n<p>今日PRをレビューしていると以下のメッセージが出たので新機能を使ってみた記事です。内容は薄いです。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/7cdf106492c4fa9f5cd76b3c2c92b0ac33d3d8cf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f63343834613532362d383166362d373738612d316633622d3339346363313465626666312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc484a526-81f6-778a-1f3b-394cc14ebff1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5ecde5e1fd40b0db1d0bdebc902a9e7b\" alt=\"Screenshot from 2018-10-17 11-00-47.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/c484a526-81f6-778a-1f3b-394cc14ebff1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc484a526-81f6-778a-1f3b-394cc14ebff1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9acbfa39256a245eada5b1030db32fb6 1x\" loading=\"lazy\"></a></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/0041cf3969cc5704139361a80445c32a18a0e9c6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f62393437333431362d336662642d323161632d303138622d6230623161666339666436612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fb9473416-3fbd-21ac-018b-b0b1afc9fd6a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3921ec8d8572bfdaa895daaa001fa3dd\" alt=\"Screenshot from 2018-10-17 11-17-03.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/b9473416-3fbd-21ac-018b-b0b1afc9fd6a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fb9473416-3fbd-21ac-018b-b0b1afc9fd6a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8337841b26684ba3886da81d53c8ada0 1x\" loading=\"lazy\"></a></p>\n\n<p>PRの作成者がその変更を受け入れる <code>Apply suggestion</code> とコミットメッセージが聞かれるので <code>Commit changes</code> でコミットしましょう。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/996cce9850fa39f955be7d41039613012d1434b5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34326636323234642d623733302d623539312d653034302d3338656238373535343133642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F42f6224d-b730-b591-e040-38eb8755413d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f87efb143ac94a6c4c7bb39a6a327112\" alt=\"Screenshot from 2018-10-17 11-19-12.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/42f6224d-b730-b591-e040-38eb8755413d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F42f6224d-b730-b591-e040-38eb8755413d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=330475d071c7bad5e76621e57cef83d3 1x\" loading=\"lazy\"></a></p>\n\n<p>コミットされておしまい。</p>\n","body":"# GitHubのレビューでコード提案をする便利機能を試してみた\n\n## New! Suggest specific code changes that the pull request author can immediately commit. You will be attributed in the commit.\n\n今日PRをレビューしていると以下のメッセージが出たので新機能を使ってみた記事です。内容は薄いです。\n\n![Screenshot from 2018-10-17 11-00-47.png](https://qiita-image-store.s3.amazonaws.com/0/112929/c484a526-81f6-778a-1f3b-394cc14ebff1.png)\n\n\n![Screenshot from 2018-10-17 11-17-03.png](https://qiita-image-store.s3.amazonaws.com/0/112929/b9473416-3fbd-21ac-018b-b0b1afc9fd6a.png)\n\nPRの作成者がその変更を受け入れる `Apply suggestion` とコミットメッセージが聞かれるので `Commit changes` でコミットしましょう。\n\n![Screenshot from 2018-10-17 11-19-12.png](https://qiita-image-store.s3.amazonaws.com/0/112929/42f6224d-b730-b591-e040-38eb8755413d.png)\n\nコミットされておしまい。\n","coediting":false,"comments_count":0,"created_at":"2018-10-17T11:21:30+09:00","group":null,"id":"5a854bb2548763a2196b","likes_count":17,"private":false,"reactions_count":0,"stocks_count":8,"tags":[{"name":"Git","versions":[]},{"name":"GitHub","versions":[]},{"name":"pr","versions":[]}],"title":"GitHubのレビューでコード提案をする便利機能を試してみた","updated_at":"2018-10-17T11:21:30+09:00","url":"https://qiita.com/ykhirao/items/5a854bb2548763a2196b","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"vue-test-utilsのpropsdataの基本的な使い方\" class=\"fragment\"></span><a href=\"#vue-test-utils%E3%81%AEpropsdata%E3%81%AE%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9\"><i class=\"fa fa-link\"></i></a>Vue-test-utilsのpropsDataの基本的な使い方</h1>\n\n<p>最新版は<a href=\"https://lmiller1990.github.io/vue-testing-handbook/ja/components-with-props.html\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a>で、Vue.jsのテストの書き方についてのハンドブックを公開させてもらっています。</p>\n\n<p>この記事を読むと</p>\n\n<ul>\n<li>テスト時にコンポーネントをwrapするときの引数の <code>propsData</code> に詳しくなる</li>\n<li>テストの実践的なリファクタリングが学べる</li>\n</ul>\n\n<p>弊社では、テストのリファクタリングは <code>factory関数</code> というものを作成して行っているので、興味あるかたはぜひ使ってみてください。</p>\n\n<h2>\n<span id=\"propsdataの基本的な使い方\" class=\"fragment\"></span><a href=\"#propsdata%E3%81%AE%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9\"><i class=\"fa fa-link\"></i></a>propsDataの基本的な使い方</h2>\n\n<p><code>propsData</code> は基本的に <code>mount</code> や <code>shallowMount</code> とともに使うことができ、 <code>propsData</code> は親コンポーネントから <code>props</code> として渡されたものとしてテストで使用できます。</p>\n\n<p>第二引数のオブジェクトの中に書くことができますが、基本的な書き方は次の通りです。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">Foo</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n  <span class=\"na\">propsData</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">foo</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">bar</span><span class=\"dl\">'</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">})</span>\n</code></pre></div></div>\n\n<h2>\n<span id=\"コンポーネントの作成とテスト\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88\"><i class=\"fa fa-link\"></i></a>コンポーネントの作成とテスト</h2>\n\n<h3>\n<span id=\"submitbuttonvue\" class=\"fragment\"></span><a href=\"#submitbuttonvue\"><i class=\"fa fa-link\"></i></a>SubmitButton.vue</h3>\n\n<p>2つの <code>props</code> を持つ簡単なコンポーネントを作成する。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;template&gt;</span>\n<span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;span</span> <span class=\"na\">v-if=</span><span class=\"s\">\"isAdmin\"</span><span class=\"nt\">&gt;</span>管理者権限を実行する<span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;span</span> <span class=\"na\">v-else</span><span class=\"nt\">&gt;</span>権限がありません<span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;button&gt;</span>\n    {{ msg }}\n  <span class=\"nt\">&lt;/button&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/template&gt;</span>\n\n<span class=\"nt\">&lt;script&gt;</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">SubmitButton</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n\n  <span class=\"na\">props</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">msg</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">String</span><span class=\"p\">,</span>\n      <span class=\"na\">required</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">},</span>\n    <span class=\"na\">isAdmin</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">Boolean</span><span class=\"p\">,</span>\n      <span class=\"na\">default</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/script&gt;</span>\n</code></pre></div></div>\n\n<h3>\n<span id=\"最初のテスト\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%88%9D%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88\"><i class=\"fa fa-link\"></i></a>最初のテスト</h3>\n\n<p>権限がない状態でのメッセージを検証していく。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">shallowMount</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">@vue/test-utils</span><span class=\"dl\">'</span>\n<span class=\"k\">import</span> <span class=\"nx\">SubmitButton</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">@/components/SubmitButton.vue</span><span class=\"dl\">'</span>\n\n<span class=\"nx\">describe</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">SubmitButton.vue</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">権限がない状態のメッセージを表示する</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">msg</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">送信する</span><span class=\"dl\">\"</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">SubmitButton</span><span class=\"p\">,{</span>\n      <span class=\"na\">propsData</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">msg</span><span class=\"p\">:</span> <span class=\"nx\">msg</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">})</span>\n\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">html</span><span class=\"p\">())</span>\n\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">span</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">text</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">権限がありません</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">button</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">text</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">送信する</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">})</span>\n</code></pre></div></div>\n\n<p>テスト結果</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>PASS  tests/unit/SubmitButton.spec.js\n  SubmitButton.vue\n    ✓ 権限がない状態のメッセージを表示する (15ms)\n</code></pre></div></div>\n\n<p>console.logの出力結果</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;span&gt;</span>権限がありません<span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;button&gt;</span>\n    送信する\n  <span class=\"nt\">&lt;/button&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div></div>\n\n<p><code>props</code> で渡された <code>msg</code> がきちんと描画されていることがわかります。</p>\n\n<h3>\n<span id=\"2つ目のテスト\" class=\"fragment\"></span><a href=\"#2%E3%81%A4%E7%9B%AE%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88\"><i class=\"fa fa-link\"></i></a>2つ目のテスト</h3>\n\n<p>権限がある状態 ( <code>isAdmin</code> が true ) でのメッセージを検証していく。</p>\n\n<p>SubmitButton.spec.js</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">shallowMount</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">@vue/test-utils</span><span class=\"dl\">'</span>\n<span class=\"k\">import</span> <span class=\"nx\">SubmitButton</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">@/components/SubmitButton.vue</span><span class=\"dl\">'</span>\n\n<span class=\"nx\">describe</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">SubmitButton.vue</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">権限がある状態のメッセージを表示する</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">msg</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">送信する</span><span class=\"dl\">\"</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">isAdmin</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">SubmitButton</span><span class=\"p\">,{</span>\n      <span class=\"na\">propsData</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nx\">msg</span><span class=\"p\">,</span>\n        <span class=\"nx\">isAdmin</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">})</span>\n\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">span</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">text</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">管理者権限を実行する</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">button</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">text</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">送信する</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">})</span>\n</code></pre></div></div>\n\n<p>テスト結果</p>\n\n<div class=\"code-frame\" data-lang=\"shell\"><div class=\"highlight\"><pre><code>PASS  tests/unit/SubmitButton.spec.js\n  SubmitButton.vue\n    ✓ 権限がある状態のメッセージを表示する <span class=\"o\">(</span>4ms<span class=\"o\">)</span>\n</code></pre></div></div>\n\n<p>console.logの出力結果</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;span&gt;</span>管理者権限を実行する<span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;button&gt;</span>\n    送信する\n  <span class=\"nt\">&lt;/button&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div></div>\n\n<p><code>props</code> で渡された <code>isAdmin</code> によって <code>&lt;span&gt;</code> の中がきちんと描画されていることがわかります。</p>\n\n<h2>\n<span id=\"テストのリファクタリング\" class=\"fragment\"></span><a href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0\"><i class=\"fa fa-link\"></i></a>テストのリファクタリング</h2>\n\n<p><code>Don't repeat yourself</code> の原則に従って従ってテストをリファクタリングしていきましょう。テストがPassしているのでリファクタリングも怖くありません。</p>\n\n<h3>\n<span id=\"factory関数\" class=\"fragment\"></span><a href=\"#factory%E9%96%A2%E6%95%B0\"><i class=\"fa fa-link\"></i></a>factory関数</h3>\n\n<p>テストの度に <code>shallowMount</code> を呼び出し同じような <code>propsData</code> を渡しているので、factory関数でリファクタリングしたいと思います。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">msg</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">送信する</span><span class=\"dl\">\"</span>\n<span class=\"kd\">const</span> <span class=\"nx\">factory</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nx\">propsData</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"k\">return</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">SubmitButton</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n    <span class=\"na\">propsData</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"nx\">msg</span><span class=\"p\">,</span>\n      <span class=\"p\">...</span><span class=\"nx\">propsData</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>呼び出すたびに <code>shallowMount</code> で wrap してくれる factory 関数ができました。これを使ってテストをDRYにしていきましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>  <span class=\"nx\">describe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">管理者あり</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span><span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">メッセージを表示する</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n      <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">factory</span><span class=\"p\">()</span>\n\n      <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">span</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">text</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">権限がありません</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n      <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">button</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">text</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">送信する</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n    <span class=\"p\">})</span>\n  <span class=\"p\">})</span>\n\n  <span class=\"nx\">describe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">管理者なし</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span><span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">メッセージを表示する</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n      <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">factory</span><span class=\"p\">({</span><span class=\"na\">isAdmin</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">})</span>\n\n      <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">span</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">text</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">管理者権限を実行する</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n      <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">button</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">text</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">送信する</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n    <span class=\"p\">})</span>\n  <span class=\"p\">})</span>\n</code></pre></div></div>\n\n<p>さてテストを見ていきたいと思います。まだテストはGreenでPASSしています。</p>\n\n<div class=\"code-frame\" data-lang=\"shell\"><div class=\"highlight\"><pre><code>PASS  tests/unit/SubmitButton.spec.js\n  SubmitButton.vue\n    リファクタリング\n      管理者あり\n        ✓ メッセージを表示する <span class=\"o\">(</span>5ms<span class=\"o\">)</span>\n      管理者なし\n        ✓ メッセージを表示する <span class=\"o\">(</span>2ms<span class=\"o\">)</span>\n</code></pre></div></div>\n\n<p>テストがあることで、変更やリファクタリングが怖くなくなりました。</p>\n\n<h2>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n\n<ul>\n<li>\n<code>propsData</code> はコンポーネントをマウントするときに引数として渡し、 <code>props</code> として利用できる</li>\n<li>factory関数を定義することでテストがDRYにかける</li>\n<li>\n<code>propsData</code> を使わずに <a href=\"https://vue-test-utils.vuejs.org/ja/api/wrapper-array/#setprops-props\" rel=\"nofollow noopener\" target=\"_blank\"><code>setProps</code></a> を使えばプロパティを強制的に更新することもできる</li>\n</ul>\n","body":"# Vue-test-utilsのpropsDataの基本的な使い方\n\n最新版は[こちら](https://lmiller1990.github.io/vue-testing-handbook/ja/components-with-props.html)で、Vue.jsのテストの書き方についてのハンドブックを公開させてもらっています。\n\nこの記事を読むと\n\n- テスト時にコンポーネントをwrapするときの引数の `propsData` に詳しくなる\n- テストの実践的なリファクタリングが学べる\n\n弊社では、テストのリファクタリングは `factory関数` というものを作成して行っているので、興味あるかたはぜひ使ってみてください。\n\n## propsDataの基本的な使い方\n\n`propsData` は基本的に `mount` や `shallowMount` とともに使うことができ、 `propsData` は親コンポーネントから `props` として渡されたものとしてテストで使用できます。\n\n第二引数のオブジェクトの中に書くことができますが、基本的な書き方は次の通りです。\n\n```js\nconst wrapper = shallowMount(Foo, {\n  propsData: {\n    foo: 'bar'\n  }\n})\n```\n\n## コンポーネントの作成とテスト\n\n### SubmitButton.vue\n\n2つの `props` を持つ簡単なコンポーネントを作成する。\n\n```html\n<template>\n<div>\n  <span v-if=\"isAdmin\">管理者権限を実行する</span>\n  <span v-else>権限がありません</span>\n  <button>\n    {{ msg }}\n  </button>\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"SubmitButton\",\n\n  props: {\n    msg: {\n      type: String,\n      required: true\n    },\n    isAdmin: {\n      type: Boolean,\n      default: false\n    }\n  }\n}\n</script>\n```\n\n### 最初のテスト\n\n\b権限がない状態でのメッセージを検証していく。\n\n```js\nimport { shallowMount } from '@vue/test-utils'\nimport SubmitButton from '@/components/SubmitButton.vue'\n\ndescribe('SubmitButton.vue', () => {\n  it('権限がない状態のメッセージを表示する', () => {\n    const msg = \"送信する\"\n    const wrapper = shallowMount(SubmitButton,{\n      propsData: {\n        msg: msg\n      }\n    })\n\n    console.log(wrapper.html())\n\n    expect(wrapper.find(\"span\").text()).toBe(\"権限がありません\")\n    expect(wrapper.find(\"button\").text()).toBe(\"送信する\")\n  })\n})\n```\n\nテスト結果\n\n```\nPASS  tests/unit/SubmitButton.spec.js\n  SubmitButton.vue\n    ✓ 権限がない状態のメッセージを表示する (15ms)\n```\n\nconsole.logの出力結果\n\n```html\n<div>\n  <span>権限がありません</span>\n  <button>\n    送信する\n  </button>\n</div>\n```\n\n`props` で渡された `msg` がきちんと描画されていることがわかります。\n\n### 2つ目のテスト\n\n権限がある状態 ( `isAdmin` が true ) でのメッセージを検証していく。\n\nSubmitButton.spec.js\n\n```js\nimport { shallowMount } from '@vue/test-utils'\nimport SubmitButton from '@/components/SubmitButton.vue'\n\ndescribe('SubmitButton.vue', () => {\n  it('権限がある状態のメッセージを表示する', () => {\n    const msg = \"送信する\"\n    const isAdmin = true\n    const wrapper = shallowMount(SubmitButton,{\n      propsData: {\n        msg,\n        isAdmin\n      }\n    })\n\n    expect(wrapper.find(\"span\").text()).toBe(\"管理者権限を実行する\")\n    expect(wrapper.find(\"button\").text()).toBe(\"送信する\")\n  })\n})\n```\n\nテスト結果\n\n```shell\nPASS  tests/unit/SubmitButton.spec.js\n  SubmitButton.vue\n    ✓ 権限がある状態のメッセージを表示する (4ms)\n```\n\nconsole.logの出力結果\n\n```html\n<div>\n  <span>管理者権限を実行する</span>\n  <button>\n    送信する\n  </button>\n</div>\n```\n\n`props` で渡された `isAdmin` によって `<span>` の中がきちんと描画されていることがわかります。\n\n## テストのリファクタリング\n\n`Don't repeat yourself` の原則に従って従ってテストをリファクタリングしていきましょう。テストがPassしているのでリファクタリングも怖くありません。\n\n### factory関数\n\nテストの度に `shallowMount` を呼び出し\b同じような `propsData` を渡しているので、factory関数でリファクタリングしたいと思います。\n\n```js\nconst msg = \"送信する\"\nconst factory = (propsData) => {\n  return shallowMount(SubmitButton, {\n    propsData: {\n      msg,\n      ...propsData\n    }\n  })\n}\n```\n\n呼び出すたびに `shallowMount` で wrap してくれる factory 関数ができました。これを使ってテストをDRYにしていきましょう。\n\n```js\n  describe(\"管理者あり\", ()=> {\n    it(\"メッセージを表示する\", () => {\n      const wrapper = factory()\n\n      expect(wrapper.find(\"span\").text()).toBe(\"権限がありません\")\n      expect(wrapper.find(\"button\").text()).toBe(\"送信する\")\n    })\n  })\n\n  describe(\"管理者なし\", ()=> {\n    it(\"メッセージを表示する\", () => {\n      const wrapper = factory({isAdmin: true})\n\n      expect(wrapper.find(\"span\").text()).toBe(\"管理者権限を実行する\")\n      expect(wrapper.find(\"button\").text()).toBe(\"送信する\")\n    })\n  })\n```\n\nさてテストを見ていきたいと思います。まだテストはGreenでPASSしています。\n\n```shell\nPASS  tests/unit/SubmitButton.spec.js\n  SubmitButton.vue\n    リファクタリング\n      管理者あり\n        ✓ メッセージを表示する (5ms)\n      管理者なし\n        ✓ メッセージを表示する (2ms)\n```\n\nテストがあることで、変更やリファクタリングが怖くなくなりました。\n\n## まとめ\n\n- `propsData` は\u001dコンポーネントを\bマウントするときに引数として渡し、 `props` として利用できる\n- factory関数を定義することでテストがDRYにかける\n- `propsData` を使わずに [`setProps`](https://vue-test-utils.vuejs.org/ja/api/wrapper-array/#setprops-props) を使えばプロパティを強制的に更新することもできる\n","coediting":false,"comments_count":0,"created_at":"2018-07-19T23:32:25+09:00","group":null,"id":"43397531e58664ef4645","likes_count":7,"private":false,"reactions_count":0,"stocks_count":9,"tags":[{"name":"JavaScript","versions":[]},{"name":"TDD","versions":[]},{"name":"Vue.js","versions":[]},{"name":"vue-test-utils","versions":[]}],"title":"Vue-test-utilsのpropsDataの基本的な使い方","updated_at":"2018-07-20T14:02:07+09:00","url":"https://qiita.com/ykhirao/items/43397531e58664ef4645","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"vue-test-utilsのshallowmountとmountの違いについて\" class=\"fragment\"></span><a href=\"#vue-test-utils%E3%81%AEshallowmount%E3%81%A8mount%E3%81%AE%E9%81%95%E3%81%84%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a>Vue-test-utilsのshallowMountとmountの違いについて</h1>\n\n<p>この記事では Vue-test-utils の <code>shallowMount</code> と <code>mount</code> の違いについてをメインに記事にしていきます。また <code>shallowMount</code> + <code>stubs</code> についても書いていきたいと思います。 <code>Component.methods</code> とコンポーネントから直接 <code>methods</code> を呼び出す方法もあるのでよかったら見ていってください。</p>\n\n<ul>\n<li><code>mount</code></li>\n<li><code>shallowMount</code></li>\n<li><code>shallowMount + stubs</code></li>\n<li><code>TodoContainer.methods</code></li>\n</ul>\n\n<p>このあたりでを書いていきたいと思います。</p>\n\n<p>個人的には「Vue-test-utils」には、Vue.jsのコンポーネントとかをいい感じにwrapしてくれて、jestとかのテストランナーに乗せれるようにしてくれるいい感じのヤツという認識があります。（訂正とか正確な表現があればコメント欄なりPRお願いします。）</p>\n\n<p>Vue-test-utilsがどんなものか、どういう感じで誕生したかは、以下の記事に詳しいかと思います。 <a href=\"https://qiita.com/re-fort/items/63bef6778bf3d3939815\" id=\"reference-9b98871f22795d5e56b6\">vue-test-utilsを使用してテストを書いてみた(Vue.js)</a></p>\n\n<p>ドキュメントは <a href=\"https://vue-test-utils.vuejs.org/ja/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://vue-test-utils.vuejs.org/ja/</a> こちらになります。今回の内容は、ドキュメントに書いてあることがほとんどなので、私の記事からテストに入った方もぜひドキュメントを読んでみてください。このドキュメントは長くないので流し読みなら1時間もあれば読めると思います。</p>\n\n<h2>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h2>\n\n<p>こんにちは。僕です。</p>\n\n<p>前回は <a href=\"https://qiita.com/ykhirao/items/becd9be857dbe6804314\" id=\"reference-01d39c889864b022bf46\">【Vue.js】いつから「フロントエンド開発でTDDができない」と錯覚していた？</a> ※1 という記事を書かせていただきました。。フロントエンド界隈ってまったくテストが盛り上がっていなくて、ましてや「弊社TDDやってます」なんという声とかはほとんどあがっていない状況です。（私はそう感じているという主観的な意見ですが。）</p>\n\n<p>※1 タイトルの元ネタ BLEACHの藍染惣右介のセリフより</p>\n\n<p>「フロントエンドのテストって難しくないよ！！」とか「フロントエンドのロジック部分はTDDできるよ！！」って伝えたくて記事を書かせていただきました。基本的にVueのテストについての記事はQiitaに書いていくので、QiitaかTwitterをフォローしてくれると情報が早いかと思います。</p>\n\n<h2>\n<span id=\"本文\" class=\"fragment\"></span><a href=\"#%E6%9C%AC%E6%96%87\"><i class=\"fa fa-link\"></i></a>本文</h2>\n\n<h3>\n<span id=\"前回のコンポーネントの復習\" class=\"fragment\"></span><a href=\"#%E5%89%8D%E5%9B%9E%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E5%BE%A9%E7%BF%92\"><i class=\"fa fa-link\"></i></a>前回のコンポーネントの復習</h3>\n\n<p>前回の <a href=\"https://qiita.com/ykhirao/items/becd9be857dbe6804314\">記事</a> を読んでいないかたはぜひ読んできてください。同じコンポーネントを使うことにします。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/0ee3eb29716b7ab791d1027846efc697224fcd1d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f61633235363134362d373838302d633835662d383264392d3464376538303731316130642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"643\" alt=\"スクリーンショット 2018-06-24 0.21.35のコピー3.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fac256146-7880-c85f-82d9-4d7e80711a0d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=84cd2a1a16ae95fc5e449e45853bbff3\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/ac256146-7880-c85f-82d9-4d7e80711a0d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fac256146-7880-c85f-82d9-4d7e80711a0d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fe0e9354e8c365223739ac0218691e4c 1x\" loading=\"lazy\"></a></p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>$ git clone https://github.com/ykhirao/vue-todos.git\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoContainer.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;NewTodo</span>\n    <span class=\"err\">@</span><span class=\"na\">createTodo=</span><span class=\"s\">\"addTodo\"</span>\n  <span class=\"nt\">&gt;&lt;/NewTodo&gt;</span>\n  <span class=\"nt\">&lt;TodoItem</span>\n    <span class=\"na\">v-for=</span><span class=\"s\">\"todo in todos\"</span>\n    <span class=\"na\">:id=</span><span class=\"s\">\"todo.id\"</span>\n    <span class=\"na\">:key=</span><span class=\"s\">\"todo.id\"</span>\n    <span class=\"na\">:text=</span><span class=\"s\">\"todo.text\"</span>\n    <span class=\"na\">:checked=</span><span class=\"s\">\"todo.checked\"</span>\n    <span class=\"err\">@</span><span class=\"na\">toggleChecked=</span><span class=\"s\">\"toggleChecked\"</span>\n  <span class=\"nt\">&gt;&lt;/TodoItem&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">import</span> <span class=\"nx\">NewTodo</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">@/components/NewTodo.vue</span><span class=\"dl\">\"</span>\n<span class=\"k\">import</span> <span class=\"nx\">TodoItem</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">@/components/TodoItem.vue</span><span class=\"dl\">'</span>\n\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">todo-container</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"na\">components</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">NewTodo</span><span class=\"p\">,</span>\n    <span class=\"nx\">TodoItem</span>\n  <span class=\"p\">},</span>\n  <span class=\"nx\">data</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"p\">{</span>\n      <span class=\"na\">todos</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">},</span>\n  <span class=\"na\">methods</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">addTodo</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">todos</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">({</span><span class=\"nx\">text</span><span class=\"p\">,</span> <span class=\"na\">checked</span><span class=\"p\">:</span><span class=\"kc\">false</span><span class=\"p\">,</span> <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">todos</span><span class=\"p\">.</span><span class=\"nx\">length</span> <span class=\"o\">+</span> <span class=\"mi\">1</span> <span class=\"p\">})</span>\n    <span class=\"p\">},</span>\n    <span class=\"nx\">toggleChecked</span><span class=\"p\">(</span><span class=\"nx\">id</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"kd\">const</span> <span class=\"nx\">todo</span> <span class=\"o\">=</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">todos</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"nx\">x</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">x</span><span class=\"p\">.</span><span class=\"nx\">id</span> <span class=\"o\">===</span> <span class=\"nx\">id</span><span class=\"p\">)</span>\n      <span class=\"nx\">todo</span><span class=\"p\">.</span><span class=\"nx\">checked</span> <span class=\"o\">=</span> <span class=\"o\">!</span><span class=\"nx\">todo</span><span class=\"p\">.</span><span class=\"nx\">checked</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoItem.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;input</span>\n    <span class=\"na\">type=</span><span class=\"s\">\"radio\"</span>\n    <span class=\"na\">class=</span><span class=\"s\">\"radio\"</span>\n    <span class=\"na\">:checked=</span><span class=\"s\">\"checked\"</span>\n    <span class=\"err\">@</span><span class=\"na\">click=</span><span class=\"s\">\"toggleChecked\"</span>\n  <span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;span&gt;</span><span class=\"si\">{{</span><span class=\"nx\">text</span><span class=\"si\">}}</span><span class=\"nt\">&lt;/span&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n\n<span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">todo-item</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"na\">props</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">String</span><span class=\"p\">,</span>\n      <span class=\"na\">required</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">},</span>\n    <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">Boolean</span><span class=\"p\">,</span>\n      <span class=\"na\">required</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">},</span>\n    <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">Number</span><span class=\"p\">,</span>\n      <span class=\"na\">required</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">},</span>\n  <span class=\"na\">methods</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">toggleChecked</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">$emit</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">toggleChecked</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">id</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/NewTodo.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>\n    <span class=\"nt\">&lt;input</span>\n      <span class=\"na\">class=</span><span class=\"s\">\"new\"</span>\n      <span class=\"na\">v-model=</span><span class=\"s\">\"text\"</span>\n      <span class=\"err\">@</span><span class=\"na\">keyup.enter=</span><span class=\"s\">\"submit\"</span>\n    <span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n\n<span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">new-todo</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"nx\">data</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"p\">{</span>\n      <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">},</span>\n   <span class=\"na\">methods</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">submit</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">$emit</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">createTodo</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">text</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span> \n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n\n</code></pre></div>\n</div>\n\n<h3>\n<span id=\"htmlの比較\" class=\"fragment\"></span><a href=\"#html%E3%81%AE%E6%AF%94%E8%BC%83\"><i class=\"fa fa-link\"></i></a>htmlの比較</h3>\n\n<p>さて</p>\n\n<h4>\n<span id=\"html-methodについて\" class=\"fragment\"></span><a href=\"#html-method%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a>html methodについて</h4>\n\n<h4>\n<span id=\"shallowmountのhtml\" class=\"fragment\"></span><a href=\"#shallowmount%E3%81%AEhtml\"><i class=\"fa fa-link\"></i></a>shallowMountのhtml()</h4>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoContainer.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">it</span><span class=\"p\">.</span><span class=\"nx\">only</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">toggleChecked</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">TodoContainer</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n    <span class=\"nx\">data</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n      <span class=\"k\">return</span> <span class=\"p\">{</span>\n        <span class=\"na\">todos</span><span class=\"p\">:</span> <span class=\"p\">[{</span> <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"kc\">true</span> <span class=\"p\">}]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">})</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">html</span><span class=\"p\">())</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">console.log.html</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;new-todo-stub&gt;&lt;/new-todo-stub&gt;</span>\n  <span class=\"nt\">&lt;todo-item-stub&gt;&lt;/todo-item-stub&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div>\n</div>\n\n<h4>\n<span id=\"mountのhtml\" class=\"fragment\"></span><a href=\"#mount%E3%81%AEhtml\"><i class=\"fa fa-link\"></i></a>mountのhtml()</h4>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoContainer.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">it</span><span class=\"p\">.</span><span class=\"nx\">only</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">toggleChecked</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">mount</span><span class=\"p\">(</span><span class=\"nx\">TodoContainer</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n    <span class=\"nx\">data</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n      <span class=\"k\">return</span> <span class=\"p\">{</span>\n        <span class=\"na\">todos</span><span class=\"p\">:</span> <span class=\"p\">[{</span> <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"kc\">true</span> <span class=\"p\">}]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">})</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">html</span><span class=\"p\">())</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">console.log.html</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>\n    <span class=\"nt\">&lt;input</span> <span class=\"na\">class=</span><span class=\"s\">\"new\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>\n    <span class=\"nt\">&lt;input</span> <span class=\"na\">type=</span><span class=\"s\">\"radio\"</span> <span class=\"na\">class=</span><span class=\"s\">\"radio\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;span&gt;</span>text<span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div>\n</div>\n\n<p><qiita-embed-ogp src=\"https://github.com/vuejs/vue-test-utils/issues/773\"></qiita-embed-ogp></p>\n\n<h4>\n<span id=\"結論\" class=\"fragment\"></span><a href=\"#%E7%B5%90%E8%AB%96\"><i class=\"fa fa-link\"></i></a>結論</h4>\n\n<p><code>mount</code> の方はコンポーネントすべてをレンダリングしてくれるのですごく便利だったりします。<br>\nただ大規模なコンポーネントになるとstubで表示してくれる <code>shallowMount</code> の方が便利だったりします。</p>\n\n<p>また<code>shallowMount</code> + <code>stub</code> という書き方もあるので、それも紹介します。</p>\n\n<h3>\n<span id=\"shallowmountのhtml--stubで書く方法\" class=\"fragment\"></span><a href=\"#shallowmount%E3%81%AEhtml--stub%E3%81%A7%E6%9B%B8%E3%81%8F%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>shallowMountのhtml + stubで書く方法</h3>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">shallowMount + stubs</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">TodoContainer</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n      <span class=\"na\">stubs</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">NewTodo</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">&lt;div&gt;NewTodo&lt;/div&gt;</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n        <span class=\"na\">TodoItem</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">&lt;div data-test='todo' :id='id' /&gt;</span><span class=\"dl\">\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">})</span>\n    <span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">setData</span><span class=\"p\">({</span>\n      <span class=\"na\">todos</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n          <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n          <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">})</span>\n\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">html</span><span class=\"p\">())</span>\n  <span class=\"p\">})</span>\n</code></pre></div></div>\n\n<p>以下のように出力されます。特にコンポーネントをレンダリングする必要ないときは自分は <code>&lt;div&gt;NewTodo&lt;/div&gt;</code> もしくは <code>&lt;div /&gt;</code> でstub を作ったりします。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>NewTodo<span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;div</span> <span class=\"na\">data-test=</span><span class=\"s\">\"todo\"</span> <span class=\"na\">id=</span><span class=\"s\">\"1\"</span><span class=\"nt\">&gt;&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div></div>\n\n<p>また <code>&lt;div data-test=\"todo\" id=\"1\"&gt;</code> みたいに <code>:id=\"id\"</code> みたいなv-bindもきちんとレンダリングされるのである程度しっかりした検証もできます。</p>\n\n<h3>\n<span id=\"wrapしない方法\" class=\"fragment\"></span><a href=\"#wrap%E3%81%97%E3%81%AA%E3%81%84%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>Wrapしない方法</h3>\n\n<p>実はwrapしなくてもテストがかけたりします。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>  <span class=\"k\">import</span> <span class=\"nx\">TodoContainer</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">@/components/TodoContainer.vue</span><span class=\"dl\">\"</span>\n\n  <span class=\"nx\">it</span><span class=\"p\">.</span><span class=\"nx\">only</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">Methodsのテスト</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">TodoContainer</span><span class=\"p\">.</span><span class=\"nx\">methods</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n</code></pre></div></div>\n\n<p>import したコンポーネントから <code>methods</code> でアクセスできます。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code>{\n  addTodo: [Function: addTodo],\n  toggleChecked: [Function: toggleChecked]\n}\n</code></pre></div></div>\n\n<p>メソッドの検証でwrapが必要ないときに使ったりします。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>  <span class=\"nx\">methods</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">addTodo</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">todos</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">({</span><span class=\"nx\">text</span><span class=\"p\">,</span> <span class=\"na\">checked</span><span class=\"p\">:</span><span class=\"kc\">false</span><span class=\"p\">,</span> <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">todos</span><span class=\"p\">.</span><span class=\"nx\">length</span> <span class=\"o\">+</span> <span class=\"mi\">1</span> <span class=\"p\">})</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"nx\">it</span><span class=\"p\">.</span><span class=\"nx\">only</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">Methodsのテスト</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">TodoContainer</span><span class=\"p\">.</span><span class=\"nx\">methods</span><span class=\"p\">)</span>\n<span class=\"c1\">//    { addTodo: [Function: addTodo],</span>\n<span class=\"c1\">//      toggleChecked: [Function: toggleChecked] }</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">localThis</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"na\">todos</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">localThis</span><span class=\"p\">)</span>\n  <span class=\"c1\">// { todos: [] }</span>\n\n  <span class=\"nx\">TodoContainer</span><span class=\"p\">.</span><span class=\"nx\">methods</span><span class=\"p\">.</span><span class=\"nx\">addTodo</span><span class=\"p\">.</span><span class=\"nx\">call</span><span class=\"p\">(</span><span class=\"nx\">localThis</span><span class=\"p\">,</span> <span class=\"dl\">\"</span><span class=\"s2\">test</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">localThis</span><span class=\"p\">)</span>\n  <span class=\"c1\">// { todos: [ { text: 'test', checked: false, id: 1 } ] }</span>\n<span class=\"p\">})</span>\n</code></pre></div></div>\n\n<p><code>addTodo</code> を呼び出したときに <code>this</code> のスコープが変わるので、 <code>call</code> でテストように <code>this</code> を渡してあげていますが、それ以外は難しい処理をしていないと思います。</p>\n\n<p>このやり方は結構特殊であまり記事はないので <code>console.log</code> しまくって <code>あ、これでアクセスできるんだ</code> 的にやっていってほしいのですが <code>もしcreated, mountedで重い処理がある場合、マウントせずにメソッドを呼び出したい時</code> であれば使えばいいと思います。</p>\n\n<p>他の例はまだ作成中ですが <a href=\"https://lmiller1990.github.io/vue-testing-handbook/ja/testing-emitted-events.html\" rel=\"nofollow noopener\" target=\"_blank\">vue-testing-handbook # testing-emitted-events</a> を見ていただけるといいかと思います。</p>\n\n<h3>\n<span id=\"余談\" class=\"fragment\"></span><a href=\"#%E4%BD%99%E8%AB%87\"><i class=\"fa fa-link\"></i></a>余談</h3>\n\n<h4>\n<span id=\"bind系メソッドがhtmlレンダリングされない件\" class=\"fragment\"></span><a href=\"#bind%E7%B3%BB%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%8Chtml%E3%83%AC%E3%83%B3%E3%83%80%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84%E4%BB%B6\"><i class=\"fa fa-link\"></i></a>bind系メソッドがhtmlレンダリングされない件</h4>\n\n<p>現状Vue-test-utilsのhtml()メソッドで<code>:bind</code>系の要素が上手くレンダリングされないみたいです。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoContainer.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">it</span><span class=\"p\">.</span><span class=\"nx\">only</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">toggleChecked</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">mount</span><span class=\"p\">(</span><span class=\"nx\">TodoContainer</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n    <span class=\"nx\">data</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n      <span class=\"k\">return</span> <span class=\"p\">{</span>\n        <span class=\"na\">todos</span><span class=\"p\">:</span> <span class=\"p\">[{</span> <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"kc\">true</span> <span class=\"p\">}]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">})</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">html</span><span class=\"p\">())</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">console.log.html</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>\n    <span class=\"nt\">&lt;input</span> <span class=\"na\">class=</span><span class=\"s\">\"new\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>\n    <span class=\"nt\">&lt;input</span> <span class=\"na\">type=</span><span class=\"s\">\"radio\"</span> <span class=\"na\">class=</span><span class=\"s\">\"radio\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"c\">&lt;!-- \n    本当はこっちになってほしい。\n    &lt;input type=\"radio\" class=\"radio\" checked=\"true\"&gt;\n    --&gt;</span>\n    <span class=\"nt\">&lt;span&gt;</span>text<span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div>\n</div>\n\n<p><a href=\"https://github.com/vuejs/vue-test-utils/issues/773\" rel=\"nofollow noopener\" target=\"_blank\">Vue-test-utilsのIssue</a> に記載しておきましたので、そのうち修正されるかもしれません。そのうち。また仮にこのfeatureがマージされると <code>snapshot-test</code> がたくさん更新されるはずなので、その時はsnapshotだけのPR作らないとね、という話で盛り上がりました。</p>\n\n<h2>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n\n<ul>\n<li>\n<code>mount</code> は子コンポーネントの html をマウントしてくれる</li>\n<li>\n<code>shallowMount</code> は子コンポーネントの html をマウントしない</li>\n<li>\n<code>shallowMount + stubs</code> は子コンポーネントの html をstubでマウントできる</li>\n<li>\n<code>TodoContainer.methods</code> でメソッドだけのテストは意外に便利</li>\n</ul>\n\n<h2>\n<span id=\"終わりに\" class=\"fragment\"></span><a href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>終わりに</h2>\n\n<p>いい感じにwrapできるようになりましたか？いい感じにwrapができるようになればVue-test-utilsマスターになれると思いますよ◎</p>\n","body":"# Vue-test-utilsのshallowMountとmountの違いについて\n\nこの記事では Vue-test-utils の `shallowMount` と `mount` の違いについてをメインに記事にしていきます。また `shallowMount` + `stubs` についても書いていきたいと思います。 `Component.methods` とコンポーネントから直接 `methods` を呼び出す方法もあるのでよかったら見ていってください。\n\n- `mount`\n- `shallowMount`\n- `shallowMount + stubs`\n- `TodoContainer.methods`\n\nこのあたりでを書いていきたいと思います。\n\n個人的には「Vue-test-utils」には、Vue.jsのコンポーネントとかをいい感じにwrapしてくれて、jestとかのテストランナーに乗せれるようにしてくれるいい感じのヤツという認識があります。（訂正とか正確な表現があればコメント欄なりPRお願いします。）\n\nVue-test-utilsがどんなものか、どういう感じで誕生したかは、以下の記事に詳しいかと思います。 [vue-test-utilsを使用してテストを書いてみた(Vue.js)](https://qiita.com/re-fort/items/63bef6778bf3d3939815)\n\nドキュメントは https://vue-test-utils.vuejs.org/ja/ こちらになります。今回の内容は、ドキュメントに書いてあることがほとんどなので、私の記事からテストに入った方もぜひドキュメントを読んでみてください。このドキュメントは長くないので流し読みなら1時間もあれば読めると思います。\n\n## はじめに\n\nこんにちは。僕です。\n\n前回は [【Vue.js】いつから「フロントエンド開発でTDDができない」と錯覚していた？](https://qiita.com/ykhirao/items/becd9be857dbe6804314) ※1 という記事を書かせていただきました。。フロントエンド界隈ってまったくテストが盛り上がっていなくて、ましてや「弊社TDDやってます」なんという声とかはほとんどあがっていない状況です。（私はそう感じているという主観的な意見ですが。）\n\n※1 タイトルの元ネタ BLEACHの藍染惣右介のセリフより\n\n「フロントエンドのテストって難しくないよ！！」とか「フロントエンドのロジック部分はTDDできるよ！！」って伝えたくて記事を書かせていただきました。基本的にVueのテストについての記事はQiitaに書いていくので、QiitaかTwitterをフォローしてくれると情報が早いかと思います。\n\n## 本文\n\n### 前回のコンポーネントの復習\n\n前回の [記事](https://qiita.com/ykhirao/items/becd9be857dbe6804314) を読んでいないかたはぜひ読んできてください。同じコンポーネントを使うことにします。\n\n<img width=\"643\" alt=\"スクリーンショット 2018-06-24 0.21.35のコピー3.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/ac256146-7880-c85f-82d9-4d7e80711a0d.png\">\n\n```\n$ git clone https://github.com/ykhirao/vue-todos.git\n```\n\n```src/components/TodoContainer.vue\n<template>\n<div>\n  <NewTodo\n    @createTodo=\"addTodo\"\n  ></NewTodo>\n  <TodoItem\n    v-for=\"todo in todos\"\n    :id=\"todo.id\"\n    :key=\"todo.id\"\n    :text=\"todo.text\"\n    :checked=\"todo.checked\"\n    @toggleChecked=\"toggleChecked\"\n  ></TodoItem>\n</div>\n</template>\n<script>\nimport NewTodo from \"@/components/NewTodo.vue\"\nimport TodoItem from '@/components/TodoItem.vue'\n\nexport default {\n  name: \"todo-container\",\n  components: {\n    NewTodo,\n    TodoItem\n  },\n  data() {\n    return {\n      todos: []\n    }\n  },\n  methods: {\n    addTodo(text) {\n      this.todos.push({text, checked:false, id: this.todos.length + 1 })\n    },\n    toggleChecked(id) {\n      const todo = this.todos.find(x => x.id === id)\n      todo.checked = !todo.checked\n    }\n  }\n}\n</script>\n\n```\n\n```src/components/TodoItem.vue\n<template>\n<div>\n  <input\n    type=\"radio\"\n    class=\"radio\"\n    :checked=\"checked\"\n    @click=\"toggleChecked\"\n  >\n  <span>{{text}}</span>\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"todo-item\",\n  props: {\n    text: {\n      type: String,\n      required: true\n    },\n    checked: {\n      type: Boolean,\n      required: true\n    },\n    id: {\n      type: Number,\n      required: true\n    }\n  },\n  methods: {\n    toggleChecked() {\n      this.$emit(\"toggleChecked\", this.id)\n    }\n  }\n}\n</script>\n\n```\n\n```src/components/NewTodo.vue\n<template>\n  <div>\n    <input\n      class=\"new\"\n      v-model=\"text\"\n      @keyup.enter=\"submit\"\n    >\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"new-todo\",\n  data() {\n    return {\n      text: \"\"\n    }\n  },\n   methods: {\n    submit() {\n      this.$emit(\"createTodo\", this.text)\n    }\n  } \n}\n</script>\n\n```\n\n### htmlの比較\n\nさて\n\n#### html methodについて\n\n#### shallowMountのhtml()\n\n```tests/unit/TodoContainer.spec.js\nit.only(\"toggleChecked\", () => {\n  const wrapper = shallowMount(TodoContainer, {\n    data() {\n      return {\n        todos: [{ id: 1, text: \"text\", checked: true }]\n      }\n    }\n  })\n  console.log(wrapper.html())\n})\n```\n\n```console.log.html\n<div>\n  <new-todo-stub></new-todo-stub>\n  <todo-item-stub></todo-item-stub>\n</div>\n```\n\n#### mountのhtml()\n\n```tests/unit/TodoContainer.spec.js\nit.only(\"toggleChecked\", () => {\n  const wrapper = mount(TodoContainer, {\n    data() {\n      return {\n        todos: [{ id: 1, text: \"text\", checked: true }]\n      }\n    }\n  })\n  console.log(wrapper.html())\n})\n```\n\n```console.log.html\n<div>\n  <div>\n    <input class=\"new\">\n  </div>\n  <div>\n    <input type=\"radio\" class=\"radio\">\n    <span>text</span>\n  </div>\n</div>\n```\n\nhttps://github.com/vuejs/vue-test-utils/issues/773\n\n#### 結論\n\n`mount` の方はコンポーネントすべてをレンダリングしてくれるのですごく便利だったりします。\nただ大規模なコンポーネントになるとstubで表示してくれる `shallowMount` の方が便利だったりします。\n\nまた`shallowMount` + `stub` という書き方もあるので、それも紹介します。\n\n### shallowMountのhtml + stubで書く方法\n\n```js\n  it(\"shallowMount + stubs\", () => {\n    const wrapper = shallowMount(TodoContainer, {\n      stubs: {\n        NewTodo: \"<div>NewTodo</div>\",\n        TodoItem: \"<div data-test='todo' :id='id' />\"\n      }\n    })\n    wrapper.setData({\n      todos: [\n        {\n          id: 1,\n          text: \"text\",\n          checked: false\n        }\n      ]\n    })\n\n    console.log(wrapper.html())\n  })\n```\n\n以下のように出力されます。特にコンポーネントをレンダリングする必要ないときは自分は `<div>NewTodo</div>` もしくは `<div />` でstub を作ったりします。\n\n```html\n<div>\n  <div>NewTodo</div>\n  <div data-test=\"todo\" id=\"1\"></div>\n</div>\n```\n\nまた `<div data-test=\"todo\" id=\"1\">` みたいに `:id=\"id\"` みたいなv-bindもきちんとレンダリングされるのである程度しっかりした検証もできます。\n\n### Wrapしない方法\n\n実はwrapしなくてもテストがかけたりします。\n\n```js\n  import TodoContainer from \"@/components/TodoContainer.vue\"\n\n  it.only(\"Methodsのテスト\", () => {\n    console.log(TodoContainer.methods)\n  })\n```\n\nimport したコンポーネントから `methods` でアクセスできます。\n\n```html\n{\n  addTodo: [Function: addTodo],\n  toggleChecked: [Function: toggleChecked]\n}\n```\n\nメソッドの検証でwrapが必要ないときに使ったりします。\n\n```js\n  methods: {\n    addTodo(text) {\n      this.todos.push({text, checked:false, id: this.todos.length + 1 })\n    }\n  }\n```\n\n```js\nit.only(\"Methodsのテスト\", () => {\n  console.log(TodoContainer.methods)\n//    { addTodo: [Function: addTodo],\n//      toggleChecked: [Function: toggleChecked] }\n  const localThis = {\n    todos: []\n  }\n\n  console.log(localThis)\n  // { todos: [] }\n\n  TodoContainer.methods.addTodo.call(localThis, \"test\")\n\n  console.log(localThis)\n  // { todos: [ { text: 'test', checked: false, id: 1 } ] }\n})\n```\n\n`addTodo ` を呼び出したときに `this` のスコープが変わるので、 `call` でテストように `this` を渡してあげていますが、それ以外は難しい処理をしていないと思います。\n\nこのやり方は結構特殊であまり記事はないので `console.log` しまくって `あ、これでアクセスできるんだ` 的にやっていってほしいのですが `もしcreated, mountedで重い処理がある場合、マウントせずにメソッドを呼び出したい時` であれば使えばいいと思います。\n\n他の例はまだ作成中ですが [vue-testing-handbook # testing-emitted-events](https://lmiller1990.github.io/vue-testing-handbook/ja/testing-emitted-events.html) を見ていただけるといいかと思います。\n\n### 余談\n#### bind系メソッドがhtmlレンダリングされない件\n\n現状Vue-test-utilsのhtml()メソッドで`:bind`系の要素が上手くレンダリングされないみたいです。\n\n```tests/unit/TodoContainer.spec.js\nit.only(\"toggleChecked\", () => {\n  const wrapper = mount(TodoContainer, {\n    data() {\n      return {\n        todos: [{ id: 1, text: \"text\", checked: true }]\n      }\n    }\n  })\n  console.log(wrapper.html())\n})\n```\n\n```console.log.html\n<div>\n  <div>\n    <input class=\"new\">\n  </div>\n  <div>\n    <input type=\"radio\" class=\"radio\">\n    <!-- \n    本当はこっちになってほしい。\n    <input type=\"radio\" class=\"radio\" checked=\"true\">\n    -->\n    <span>text</span>\n  </div>\n</div>\n```\n\n[Vue-test-utilsのIssue](https://github.com/vuejs/vue-test-utils/issues/773) に記載しておきましたので、そのうち修正されるかもしれません。そのうち。また仮にこのfeatureがマージされると `snapshot-test` がたくさん更新されるはずなので、その時はsnapshotだけのPR作らないとね、という話で盛り上がりました。\n\n## まとめ\n\n- `mount` は子コンポーネントの html をマウントしてくれる\n- `shallowMount` は子コンポーネントの html をマウントしない\n- `shallowMount + stubs` は子コンポーネントの html をstubでマウントできる\n- `TodoContainer.methods` でメソッドだけのテストは意外に便利\n\n## 終わりに\n\nいい感じにwrapできるようになりましたか？いい感じにwrapができるようになればVue-test-utilsマスターになれると思いますよ◎\n","coediting":false,"comments_count":0,"created_at":"2018-07-12T09:56:45+09:00","group":null,"id":"8e8a9547a693c677813c","likes_count":98,"private":false,"reactions_count":0,"stocks_count":79,"tags":[{"name":"JavaScript","versions":[]},{"name":"Vue.js","versions":[]},{"name":"Jest","versions":[]},{"name":"vue-test-utils","versions":[]}],"title":"Vue.jsのテストでコンポーネントをいい感じにwrapする方法","updated_at":"2018-07-12T11:51:56+09:00","url":"https://qiita.com/ykhirao/items/8e8a9547a693c677813c","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"vuejsのコンポーネント開発をtddでやってみる\" class=\"fragment\"></span><a href=\"#vuejs%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E9%96%8B%E7%99%BA%E3%82%92tdd%E3%81%A7%E3%82%84%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Vue.jsのコンポーネント開発をTDDでやってみる</h1>\n\n<p>※ TDD (test-driven development): テスト駆動開発<br>\n※ テスト駆動開発は文化です。チームの「状況」「納期」「スキルレベル」、その他いろんな要因が絡んできた結果、そのチームが導入するかどうか決めたらいいと思います。<br>\n※ 例えがいいかはわかりませんが、私は「早起き」と「テスト」は同じようなものだと思っています。「早起き」は健康にいいよねって誰でも言うと思うけど、実際に万人がやっているかどうかは別じゃないですか。それと同じで「テストすること」も絶対いいことだと私は思っていますが、やるかどうかはチームの置かれている状況によって決まります。この記事は、その「テストを導入するかどうか」という意思決定の一助にでもなれればいいなと思います。</p>\n\n<h2>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h2>\n\n<p>こんにちは。ぼくです。</p>\n\n<p>今回はVue.jsでTODOアプリを作ってみようと思います。その時の条件は</p>\n\n<ul>\n<li>TDDで開発して、</li>\n<li>ブラウザは最後まで見ない</li>\n</ul>\n\n<p>です。普通にチュートリアルな感じなので、ざっくりコード眺めていけるかと思いますし、スクショ多めでいくので、自分でやらなくてもなんとなく追体験ができるようにしています。よかったら自分でもやってみてください。</p>\n\n<p>またテストが分かるかたは、このTodoアプリを参考に、ハンズオンとか開いてくれたりするとうれしかったりします。Vue-meetupでもテストを書いている割合が圧倒的に少なかったので、テストユーザー増やしていきましょう〜〜</p>\n\n<h2>\n<span id=\"コンポーネント作成\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>コンポーネント作成</h2>\n\n<h3>\n<span id=\"目標物の確認\" class=\"fragment\"></span><a href=\"#%E7%9B%AE%E6%A8%99%E7%89%A9%E3%81%AE%E7%A2%BA%E8%AA%8D\"><i class=\"fa fa-link\"></i></a>目標物の確認</h3>\n\n<p>今回作成するものは<a href=\"https://jp.vuejs.org/v2/examples/todomvc.html\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a>の TODOアプリ です。</p>\n\n<p>いろんなフレームワークでTODOアプリのサンプルは<a href=\"http://todomvc.com/\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a>をみるとたくさん載っていて、</p>\n\n<ul>\n<li>Backbone.js</li>\n<li>AngularJS</li>\n<li>Ember.js</li>\n<li>KnockoutJS</li>\n<li>( etc )</li>\n</ul>\n\n<p>などたくさんサンプルがあるので、フレームワーク選定の時にお使いください。</p>\n\n<h3>\n<span id=\"目標物の設計を分解して考える\" class=\"fragment\"></span><a href=\"#%E7%9B%AE%E6%A8%99%E7%89%A9%E3%81%AE%E8%A8%AD%E8%A8%88%E3%82%92%E5%88%86%E8%A7%A3%E3%81%97%E3%81%A6%E8%80%83%E3%81%88%E3%82%8B\"><i class=\"fa fa-link\"></i></a>目標物の設計を分解して考える</h3>\n\n<p>責務の分解をします。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/85bff57e445fdd85820e41f62824b2d8e9d635d2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f35653663666432662d633939642d333561612d623634302d3934336661386462323062342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"643\" alt=\"スクリーンショット 2018-06-24 0.21.35のコピー.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F5e6cfd2f-c99d-35aa-b640-943fa8db20b4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fb618036a0a93311d8198fded5d469d1\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/5e6cfd2f-c99d-35aa-b640-943fa8db20b4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F5e6cfd2f-c99d-35aa-b640-943fa8db20b4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6bf0647e09ae0b7d4556edb007a722b2 1x\" loading=\"lazy\"></a></p>\n\n<p>今回は、コンポーネント構成を以下のようにする。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>- TodoContainer.vue\n    - NewTodo.vue\n    - TodoItem.vue\n</code></pre></div></div>\n\n<ul>\n<li>TodoContainer.vue\n\n<ul>\n<li>todoのリストを管理するコンポーネント</li>\n</ul>\n</li>\n<li>NewTodo.vue\n\n<ul>\n<li>新しいTodoリストのテキストを親のコンポーネントにemitする</li>\n</ul>\n</li>\n<li>TodoItem.vue\n\n<ul>\n<li>親のコンポーネントからtodoリストのpropsをもらってレンダリングする</li>\n</ul>\n</li>\n</ul>\n\n<h3>\n<span id=\"環境構築\" class=\"fragment\"></span><a href=\"#%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89\"><i class=\"fa fa-link\"></i></a>環境構築</h3>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>vue <span class=\"nt\">-v</span>\n<span class=\"go\">3\n</span><span class=\"gp\">$</span><span class=\"w\"> </span>vue create vue-todo\n<span class=\"go\">1. manually select features\n2. ---\n◉ Babel\n◉ Unit Testing\n3. Jest\n4. In package.json(どっちでもいい)\n5. N\n6. yarn\n</span></code></pre></div></div>\n\n<p>もしくは</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>git clone git@github.com:ykhirao/vue-todos.git\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">cd </span>vue-todos\n<span class=\"gp\">$</span><span class=\"w\"> </span>git checkout 9b2b09d5081 <span class=\"nt\">-b</span> practice\n</code></pre></div></div>\n\n<p>ではじめのコミットを<code>checkout</code>してやってください。</p>\n\n<h3>\n<span id=\"入力から作ってみる-newtodovue\" class=\"fragment\"></span><a href=\"#%E5%85%A5%E5%8A%9B%E3%81%8B%E3%82%89%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B-newtodovue\"><i class=\"fa fa-link\"></i></a>入力から作ってみる NewTodo.vue</h3>\n\n<p>ここのインプットフォームから作っていきたいと思いますが、このコンポーネントは</p>\n\n<ul>\n<li>v-modelでinputのデータを管理する</li>\n<li>エンターが押されると親コンポーネントにそのテキストをemitする</li>\n</ul>\n\n<p>という責務にしましょう。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/29c1a81a0690034c921d005ac7ac6cc1c0bec449/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65633835316439362d633164622d303333622d653839632d3563363135373732623531352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"648\" alt=\"スクリーンショット 2018-06-24 0.51.29.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fec851d96-c1db-033b-e89c-5c615772b515.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=402460f2eacac3bf22b9137c2942bcaa\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/ec851d96-c1db-033b-e89c-5c615772b515.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fec851d96-c1db-033b-e89c-5c615772b515.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a19c90c9d91541191b25d355c0147b7f 1x\" loading=\"lazy\"></a></p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">touch </span>src/components/NewTodo.vue\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">touch </span>tests/unit/NewTodo.spec.js\n</code></pre></div></div>\n\n<ol>\n<li>期待する結果をexpectで書く\n\n<ul>\n<li>今回はインプットタグがレンダーされているかだけを検証する</li>\n<li>基本的にコンポーネントは <code>wrapper</code> という変数にshallowMountでラップする </li>\n<li>イコール文: expect(1).toBe(1)</li>\n<li>これが基本の形なので覚えてください。</li>\n</ul>\n</li>\n</ol>\n\n<p>shallowMount のAPIは<a href=\"https://vue-test-utils.vuejs.org/ja/api/shallowMount.html\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a></p>\n\n<p>他にも <code>mount</code> というものでラップできるけど、弊社だと基本的には早いから <code>shallowMount</code> を使います。 またstubを作りまくれば<code>shallowMount</code>だけでもかけますが、 <code>mount</code>を使ったほうが楽になるパターンもあったり結構深いテーマなので、両者の使い分けは後日Qiitaに書きます！！！</p>\n\n<h4>\n<span id=\"テスト1-単純なレンダリングテストを書いて適切なhtml構造を作る\" class=\"fragment\"></span><a href=\"#%E3%83%86%E3%82%B9%E3%83%881-%E5%8D%98%E7%B4%94%E3%81%AA%E3%83%AC%E3%83%B3%E3%83%80%E3%83%AA%E3%83%B3%E3%82%B0%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E6%9B%B8%E3%81%84%E3%81%A6%E9%81%A9%E5%88%87%E3%81%AAhtml%E6%A7%8B%E9%80%A0%E3%82%92%E4%BD%9C%E3%82%8B\"><i class=\"fa fa-link\"></i></a>テスト1 単純なレンダリングテストを書いて、適切なhtml構造を作る</h4>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">NewTodo.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">shallowMount</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">@vue/test-utils</span><span class=\"dl\">'</span>\n<span class=\"k\">import</span> <span class=\"nx\">NewTodo</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">@/components/NewTodo.vue</span><span class=\"dl\">\"</span>\n\n<span class=\"nx\">describe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">NewTodo.vue</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">インプットタグをレンダリングする</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">NewTodo</span><span class=\"p\">)</span>\n\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">input.new</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">exists</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"kc\">true</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p>テストコードを簡単に説明すると <code>newってclassがついたinputタグが存在する？</code> ってテストです。</p>\n\n<ul>\n<li>\n<code>find = document.querySelector</code> みたいなものです。 <a href=\"https://vue-test-utils.vuejs.org/ja/api/#%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%BF\" rel=\"nofollow noopener\" target=\"_blank\">find api</a>\n</li>\n<li>\n<a href=\"https://vue-test-utils.vuejs.org/ja/api/wrapper/exists.html\" rel=\"nofollow noopener\" target=\"_blank\">exists api</a> 存在するか</li>\n<li>toBe(true) 判定式</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/eeb27250e6d25ee2ada2a4d7123e0379459719bf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f63623735653133662d336530382d336330622d323134662d3931663033653966323162642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1677\" alt=\"スクリーンショット 2018-06-24 1.13.32.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fcb75e13f-3e08-3c0b-214f-91f03e9f21bd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6d321320c97667c548c6104d6ce3613f\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/cb75e13f-3e08-3c0b-214f-91f03e9f21bd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fcb75e13f-3e08-3c0b-214f-91f03e9f21bd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ce876aeb6bef236f782bc1190cfb46da 1x\" loading=\"lazy\"></a></p>\n\n<p>エラー文はこちら。</p>\n\n<blockquote>\n<p>[Vue warn]: Failed to mount component: template or render function not defined.</p>\n</blockquote>\n\n<p>そもそもテンプレートがないみたいなので作りにいきましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/NewTodo.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>test<span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n</code></pre></div>\n</div>\n\n<p>次はマウントコンポーネントのエラーが無くなり単純な失敗みたいです。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/18f131b9a3d4a079d07db6500a32fda26fcbbd7f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34636161336234352d303633312d396430342d396631332d6561376665633439623661652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"513\" alt=\"スクリーンショット 2018-06-24 1.16.55.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F4caa3b45-0631-9d04-9f13-ea7fec49b6ae.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5edea5c8c724f888f23c4a1d6c1f763e\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/4caa3b45-0631-9d04-9f13-ea7fec49b6ae.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F4caa3b45-0631-9d04-9f13-ea7fec49b6ae.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7fa8d34e0e55502dcbf4de341be7051d 1x\" loading=\"lazy\"></a></p>\n\n<p>次は <code>&lt;input&gt;</code> を作ってみましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/NewTodo.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>\n    <span class=\"nt\">&lt;input</span> <span class=\"na\">class=</span><span class=\"s\">\"new\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n</code></pre></div>\n</div>\n\n<p><a href=\"https://camo.qiitausercontent.com/76114c919c0a9576c1448ded8644244873a42bea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f37393239656164372d393063662d333261662d323132612d3933643338323534626438632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"401\" alt=\"スクリーンショット 2018-06-24 1.18.03.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F7929ead7-90cf-32af-212a-93d38254bd8c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=170434e04b90135f3b7b6082a06359b5\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/7929ead7-90cf-32af-212a-93d38254bd8c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F7929ead7-90cf-32af-212a-93d38254bd8c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=12e5db882c54b132af47453113bacaa8 1x\" loading=\"lazy\"></a></p>\n\n<p>パスしました！！！！</p>\n\n<h4>\n<span id=\"テスト2-clickイベントを拾い新しいタグをemitする\" class=\"fragment\"></span><a href=\"#%E3%83%86%E3%82%B9%E3%83%882-click%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%82%92%E6%8B%BE%E3%81%84%E6%96%B0%E3%81%97%E3%81%84%E3%82%BF%E3%82%B0%E3%82%92emit%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>テスト2 clickイベントを拾い、新しいタグをemitする</h4>\n\n<p>とりあえずクリックイベントを発火させて、emitも検知できればいいかなと思います。</p>\n\n<p>この段階で作り始めたときはしっかり設計できてなかった、以下のことを再定義します</p>\n\n<ul>\n<li>.vueファイルのdataに { text: \"text\" } というオブジェクトを持たせる</li>\n<li>それを <code>createTodo</code>という名前でemitします。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">NewTodo.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">新しいタグをemitする</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">NewTodo</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">setData</span><span class=\"p\">({</span><span class=\"nx\">text</span><span class=\"p\">})</span>\n  <span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">.new</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">trigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">keyup.enter</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">emitted</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">createTodo</span><span class=\"dl\">\"</span><span class=\"p\">)).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p>今回は、 <code>shallowMount</code> でコンポーネントをラップして、 <code>find</code> でinputタグを見つけ出し、 <code>trigger</code> でイベントを発火させて、本当にemitするかどうかというテストになります。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>yarn <span class=\"nb\">test</span> <span class=\"nt\">--watch</span>\n</code></pre></div></div>\n\n<p>うーんテストが失敗しています。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/dee27d4bd446d7a3a1b8bc19d6f85332c0c28ace/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f61663137643166652d386361622d323339632d353135322d3664663631653839316466312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"654\" alt=\"スクリーンショット 2018-06-25 0.07.31.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Faf17d1fe-8cab-239c-5152-6df61e891df1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5d8f7854148fb8897b733a06678c71b9\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/af17d1fe-8cab-239c-5152-6df61e891df1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Faf17d1fe-8cab-239c-5152-6df61e891df1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=95099f153fc6b757bad7cd0d0edb57bd 1x\" loading=\"lazy\"></a></p>\n\n<p>たぶん<code>createTodo</code>がemitされていませんね！作りにいきましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/NewTodo.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>\n    <span class=\"nt\">&lt;input</span>\n      <span class=\"na\">class=</span><span class=\"s\">\"new\"</span>\n      <span class=\"err\">@</span><span class=\"na\">keyup.enter=</span><span class=\"s\">\"submit\"</span>\n    <span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n\n<span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n   <span class=\"na\">methods</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">submit</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">$emit</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">createTodo</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"dl\">\"</span><span class=\"s2\">ここにsubmitされるテキストが入るよ！</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span> \n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n</code></pre></div>\n</div>\n\n<p>こんな感じで <code>input</code> に <code>keyup.enter</code> エンターイベントが発火したときに <code>submit</code> というメソッドが呼ばれるように修正しました。このときのテストを以下のように修正して <code>wrapper.emitted(\"createTodo\")</code> がどういう値になるか見てみましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">NewTodo.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">新しいタグをemitする</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">NewTodo</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">setData</span><span class=\"p\">({</span><span class=\"nx\">text</span><span class=\"p\">})</span>\n  <span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">.new</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">trigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">keyup.enter</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">emitted</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">createTodo</span><span class=\"dl\">\"</span><span class=\"p\">))</span>\n  <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">emitted</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">createTodo</span><span class=\"dl\">\"</span><span class=\"p\">)).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">console.log tests/unit/NewTodo.spec.js:18\n  [ [ 'ここにsubmitれるテキストが入るよ！' ] ]\n</span></code></pre></div></div>\n\n<p>これで <code>wrapper.emitted(\"createTodo\")[0][0]</code> に emitされるテキストが入ることがわかりました。のでテストを修正します。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">NewTodo.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">新しいタグをemitする</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">NewTodo</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">setData</span><span class=\"p\">({</span><span class=\"nx\">text</span><span class=\"p\">})</span>\n  <span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">.new</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">trigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">keyup.enter</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">emitted</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">createTodo</span><span class=\"dl\">\"</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p>また２つのエラーがでてきました。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/037b92d50bbad198889e4d873a6cd1edb0ee0458/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f32613830376634642d636330332d373931322d336234392d3666346661376362326335632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"991\" alt=\"スクリーンショット 2018-06-25 0.17.58.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F2a807f4d-cc03-7912-3b49-6f4fa7cb2c5c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7cbe05cc844d7f1928dea80890610f6b\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/2a807f4d-cc03-7912-3b49-6f4fa7cb2c5c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F2a807f4d-cc03-7912-3b49-6f4fa7cb2c5c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=be65c595b295a8d292fef866fc6e953e 1x\" loading=\"lazy\"></a></p>\n\n<p>2つのエラーは</p>\n\n<ul>\n<li>単純にexpect().toBe() が失敗していますが、これは後に解決させます。</li>\n<li>もう一つは <code>wrapper.setData({text})</code> というところでコンポーネントにdataを定義していないので怒られていると思われます。作りにいきましょう。 <a href=\"https://vue-test-utils.vuejs.org/ja/api/wrapper-array/#setdata-data\" rel=\"nofollow noopener\" target=\"_blank\">setData api</a>\n</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/NewTodo.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;div&gt;</span>\n    <span class=\"nt\">&lt;input</span>\n      <span class=\"na\">class=</span><span class=\"s\">\"new\"</span>\n      <span class=\"na\">v-model=</span><span class=\"s\">\"text\"</span> <span class=\"err\">//</span> <span class=\"err\">1.</span> <span class=\"na\">ここ追加</span><span class=\"err\">！！</span>\n      <span class=\"err\">@</span><span class=\"na\">keyup.enter=</span><span class=\"s\">\"submit\"</span>\n    <span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n\n<span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"nx\">data</span><span class=\"p\">()</span> <span class=\"p\">{</span> <span class=\"c1\">// 2. ここ追加！！</span>\n    <span class=\"k\">return</span> <span class=\"p\">{</span>\n      <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">},</span>\n   <span class=\"na\">methods</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">submit</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">$emit</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">createTodo</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">text</span><span class=\"p\">)</span> <span class=\"c1\">// 3. ここ追加！！</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span> \n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n</code></pre></div>\n</div>\n\n<p>修正箇所は3箇所です。</p>\n\n<ol>\n<li>v-modelに dataのtextをいれた</li>\n<li>.vueファイルにdata関数をもたせた</li>\n<li>emitの第二引数に textのデータをもたせた。</li>\n</ol>\n\n<p>以上！！</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/b24e00e655e08edb774c71fc2a4ddfb68bf9a722/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f38353734656464322d386361382d303537312d613035642d6435393732373839383963622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"379\" alt=\"スクリーンショット 2018-06-25 0.24.15.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F8574edd2-8ca8-0571-a05d-d597278989cb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=950a7e96ce91d728a709e8c302ebd972\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/8574edd2-8ca8-0571-a05d-d597278989cb.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F8574edd2-8ca8-0571-a05d-d597278989cb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=39599e99fc0bb6455566b28d42e1a40d 1x\" loading=\"lazy\"></a></p>\n\n<p>テストがパスしました〜！！！！！</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>yarn <span class=\"nb\">test</span> <span class=\"nt\">--watch</span>\n</code></pre></div></div>\n\n<p>こちらはgitで差分があるファイルだけホッとリロードでテストしてくれるので、完成したこのコンポーネントはもうコミットしておきます。</p>\n\n<h3>\n<span id=\"コンテイナーを作る\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%B3%E3%83%86%E3%82%A4%E3%83%8A%E3%83%BC%E3%82%92%E4%BD%9C%E3%82%8B\"><i class=\"fa fa-link\"></i></a>コンテイナーを作る</h3>\n\n<p>再度こちらの図になります。今回は <code>TodoContainer.vue</code> を作っていきます。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/85bff57e445fdd85820e41f62824b2d8e9d635d2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f35653663666432662d633939642d333561612d623634302d3934336661386462323062342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"643\" alt=\"スクリーンショット 2018-06-24 0.21.35のコピー.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F5e6cfd2f-c99d-35aa-b640-943fa8db20b4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fb618036a0a93311d8198fded5d469d1\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/5e6cfd2f-c99d-35aa-b640-943fa8db20b4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F5e6cfd2f-c99d-35aa-b640-943fa8db20b4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6bf0647e09ae0b7d4556edb007a722b2 1x\" loading=\"lazy\"></a></p>\n\n<p>まずはテストから。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">touch </span>tests/unit/TodoContainer.spec.js\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">touch </span>src/components/TodoContainer.vue\n</code></pre></div></div>\n\n<p>よし！！次のテストは <code>TodoContainer.vue</code> をレンダーしたら <code>NewTodo.vue</code> もレンダーされるかチェックしようではないか。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoContainer.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">shallowMount</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">@vue/test-utils</span><span class=\"dl\">'</span>\n<span class=\"k\">import</span> <span class=\"nx\">TodoContainer</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">@/components/TodoContainer.vue</span><span class=\"dl\">\"</span>\n<span class=\"k\">import</span> <span class=\"nx\">NewTodo</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">@/components/NewTodo.vue</span><span class=\"dl\">\"</span>\n\n<span class=\"nx\">describe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">TodoContainer.vue</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">formをレンダー</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">TodoContainer</span><span class=\"p\">)</span>\n\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"nx\">NewTodo</span><span class=\"p\">).</span><span class=\"nx\">exists</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"kc\">true</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p>ポイントは <code>find(NewTodo)</code> でVueコンポーネントを簡単に探せるところです。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/c9f59128f7adf55ffcb8ba03bc7c1a4e502bb7a3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f36636633303932322d656366342d373337352d643338332d3236383766663239353030632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"616\" alt=\"スクリーンショット 2018-06-25 0.40.06.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6cf30922-ecf4-7375-d383-2687ff29500c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a0a36d30763956267afa57f1083199a3\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6cf30922-ecf4-7375-d383-2687ff29500c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6cf30922-ecf4-7375-d383-2687ff29500c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ad495cc68eac452813c586aa85d9f2c1 1x\" loading=\"lazy\"></a></p>\n\n<p>もちろん失敗します〜〜のでエラーを見て直して行きましょう。先程みたやつですね！！テンプレートないよってやつです。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoContainer.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n</code></pre></div>\n</div>\n\n<p>ん？なんかこれだけでもテストがパスしちゃいました。。。とりあえず進めると</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoContainer.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;NewTodo&gt;&lt;/NewTodo&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n</code></pre></div>\n</div>\n\n<p><code>コンポーネント登録しろよ〜〜</code> って感じで怒られました。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/2d0170d88922d5f43e17c15de2139c89eb9381e4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f64333732303637322d363430332d386138622d633663632d6432636430353032326239352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"662\" alt=\"スクリーンショット 2018-06-25 0.47.53.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fd3720672-6403-8a8b-c6cc-d2cd05022b95.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0fd575f009476558bf47cb1e08b685aa\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/d3720672-6403-8a8b-c6cc-d2cd05022b95.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fd3720672-6403-8a8b-c6cc-d2cd05022b95.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f4aa6d9322ee0480a9f31b7812eda492 1x\" loading=\"lazy\"></a></p>\n\n<p>コンポーネントをインポートして登録します。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoContainer.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;NewTodo&gt;&lt;/NewTodo&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">import</span> <span class=\"nx\">NewTodo</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">@/components/NewTodo.vue</span><span class=\"dl\">\"</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">components</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">NewTodo</span>\n  <span class=\"p\">},</span>\n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n\n</code></pre></div>\n</div>\n\n<p>はい完了。</p>\n\n<p><code>For recursive components, make sure to provide the \"name\" option.</code>が気になったので、ちょっと <code>NewTodo.vue</code>に戻って</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">NewTodo.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">new-todo</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"c1\">// こちら追加</span>\n  <span class=\"nx\">data</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"p\">{</span>\n      <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">},</span>\n</code></pre></div>\n</div>\n\n<p>に戻って<code>nameオプションつけろ</code> って感じで怒られましたところを追加しました。</p>\n\n<p>そうすると</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoContainer.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"nx\">NewTodo</span><span class=\"p\">).</span><span class=\"nx\">exists</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"kc\">true</span><span class=\"p\">)</span>\n</code></pre></div>\n</div>\n\n<p>がきちんと働くようになってコンポーネントを見つけ出してくれるみたいです。 nameオプションは必ずつけましょう。またnameオプションは <code>ケバブ-ケース</code> にすることとVueがいい感じに解釈してくれます。 html5では要素の大文字と小文字区別しないから <code>&lt;NewTodo&gt;</code> と  とかが同じと解釈されるので、そのあたりのことを丸めるための処理。（かな）</p>\n\n<p>次は子コンポーネントからemitされた値を [ todos ]というデータに追加するところを作ろうかと思います。テストでまた新しい概念が追加されるので頑張って覚えてください。むしろ覚えようとせずに「ふ〜〜んそんなものあるんだ〜〜」くらいがいいかもです。</p>\n\n<p>今回やること</p>\n\n<ul>\n<li>\n<code>createTodo</code> としてemitされた<code>text</code> を<code>addTodo</code> というメソッドで追加する</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoContainer.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"nx\">TodoContainer</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">@/components/TodoContainer.vue</span><span class=\"dl\">\"</span>\n\n<span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">todoを追加する</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">localThis</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"na\">todos</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"nx\">TodoContainer</span><span class=\"p\">.</span><span class=\"nx\">methods</span><span class=\"p\">.</span><span class=\"nx\">addTodo</span><span class=\"p\">.</span><span class=\"nx\">call</span><span class=\"p\">(</span><span class=\"nx\">localThis</span><span class=\"p\">,</span> <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">localThis</span><span class=\"p\">.</span><span class=\"nx\">todos</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]).</span><span class=\"nx\">toEqual</span><span class=\"p\">({</span>\n    <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n    <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p>今回は <code>localThis</code> という概念がでてきます。後 <code>call</code> めっちゃ重要な概念だから <del>調べて</del> 簡単に書きます。</p>\n\n<p><code>import TodoContainer</code> インポートしたコンポーネントは <code>TodoContainer.methods.addTodo</code> という形でコンポーネントメソッドを使うことができます。</p>\n\n<p>ただこのときコンポーネントメソッドの <code>this.todos</code> が呼び出す文脈によって変わります。これを解消するのが <code>call</code> です。それでは見ていきましょう。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/e831d085624c5a5da854e69f00c6c1fd4ea46fd2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f37373230383237622d316538662d393431342d303234302d3334646661666639356365392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"500\" alt=\"スクリーンショット 2018-06-25 1.13.55.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F7720827b-1e8f-9414-0240-34dfaff95ce9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3e0df3f0b59332c0bce6386a5edc9b07\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/7720827b-1e8f-9414-0240-34dfaff95ce9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F7720827b-1e8f-9414-0240-34dfaff95ce9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1d811e0c966431da05f774be6a41c1e7 1x\" loading=\"lazy\"></a></p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">chrome's.console.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">getText</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"k\">return</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">text</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n<span class=\"kd\">const</span> <span class=\"nx\">localThis</span> <span class=\"o\">=</span> <span class=\"p\">{</span> <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">localThisのテスト</span><span class=\"dl\">\"</span><span class=\"p\">}</span>\n\n<span class=\"nx\">getText</span><span class=\"p\">()</span>\n\n<span class=\"nx\">getText</span><span class=\"p\">.</span><span class=\"nx\">call</span><span class=\"p\">(</span><span class=\"nx\">localThis</span><span class=\"p\">)</span>\n</code></pre></div>\n</div>\n\n<p><code>call</code> に引数を渡すことで擬似的に <code>this</code> を書き換えことができます。</p>\n\n<p>ちなみに</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">chrome's.console.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">getText</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n<span class=\"kd\">const</span> <span class=\"nx\">localThis</span> <span class=\"o\">=</span> <span class=\"p\">{</span> <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">localThisのテスト</span><span class=\"dl\">\"</span><span class=\"p\">}</span>\n\n<span class=\"nx\">getText</span><span class=\"p\">()</span>\n\n<span class=\"nx\">getText</span><span class=\"p\">.</span><span class=\"nx\">call</span><span class=\"p\">(</span><span class=\"nx\">localThis</span><span class=\"p\">)</span>\n</code></pre></div>\n</div>\n\n<p>chromeの開発者ツールでの <code>this</code> は <code>window</code> になります。今回は <code>spec.js</code> ではchromeは使わないのでまた別の <code>this</code> になることでしょう。node?</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/d3b691b180a305aae50e42b33c238d175aae4542/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f39616330356666332d383138342d616366642d326231372d3537623333353733366231622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"525\" alt=\"スクリーンショット 2018-06-25 1.16.42.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F9ac05ff3-8184-acfd-2b17-57b335736b1b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=005348616319850a194d5c78e878a837\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/9ac05ff3-8184-acfd-2b17-57b335736b1b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F9ac05ff3-8184-acfd-2b17-57b335736b1b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=581656d7acae56d3c9a30b61b719ff1d 1x\" loading=\"lazy\"></a></p>\n\n<p>テストに戻ります</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>expect(localThis.todos[0]).toEqual({})\n</code></pre></div></div>\n\n<p>オブジェクトの検証は<code>toEqual</code>を使います。</p>\n\n<ul>\n<li><code>toBe ===</code></li>\n<li>\n<code>toEqual ==</code> </li>\n</ul>\n\n<p>みたいな感じです。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f2ba72d0beafe7bc19d3425dafbd75fb40a755b8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65306364386166362d383765322d303363612d393639622d3430656634336230313534322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"553\" alt=\"スクリーンショット 2018-06-25 1.23.04.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe0cd8af6-87e2-03ca-969b-40ef43b01542.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bdb352f714a30e15a99f61f1cd8d52e9\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e0cd8af6-87e2-03ca-969b-40ef43b01542.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe0cd8af6-87e2-03ca-969b-40ef43b01542.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9690fc460b0f48ece6f7671a8023c8ac 1x\" loading=\"lazy\"></a></p>\n\n<p>とりあえずなんかエラーでているので</p>\n\n<ul>\n<li>dataに todosを作る</li>\n<li>methodsにaddTodoを作る</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoContainer.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;NewTodo</span>\n    <span class=\"err\">@</span><span class=\"na\">createTodo=</span><span class=\"s\">\"addTodo\"</span> <span class=\"err\">//</span> <span class=\"na\">追加</span>\n  <span class=\"nt\">&gt;&lt;/NewTodo&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">import</span> <span class=\"nx\">NewTodo</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">@/components/NewTodo.vue</span><span class=\"dl\">\"</span>\n\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">todo-container</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"na\">components</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">NewTodo</span>\n  <span class=\"p\">},</span>\n  <span class=\"nx\">data</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"p\">{</span>\n      <span class=\"na\">todos</span><span class=\"p\">:</span> <span class=\"p\">[]</span> <span class=\"c1\">// 追加</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">},</span>\n  <span class=\"na\">methods</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">addTodo</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"c1\">// 追加</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">todos</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">({</span><span class=\"nx\">text</span><span class=\"p\">,</span> <span class=\"na\">checked</span><span class=\"p\">:</span><span class=\"kc\">false</span><span class=\"p\">,</span> <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">todos</span><span class=\"p\">.</span><span class=\"nx\">length</span> <span class=\"o\">+</span> <span class=\"mi\">1</span> <span class=\"p\">})</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n\n</code></pre></div>\n</div>\n\n<p>addTodoについて</p>\n\n<ul>\n<li>Vueのオブサーバー壊さないために<code>push</code> で追加しています。</li>\n<li>暫定的に<code>id</code> は配列の数で適当にやってます。</li>\n<li>またcheckedは最初はtodoは完了していないはずなので <code>false</code> からスタートさせています</li>\n</ul>\n\n<p>とりあえずコンテナーは一旦作れたので次は子コンポーネントに移ります。</p>\n\n<h3>\n<span id=\"todolistを作る\" class=\"fragment\"></span><a href=\"#todolist%E3%82%92%E4%BD%9C%E3%82%8B\"><i class=\"fa fa-link\"></i></a>todolistを作る</h3>\n\n<p>ここを作ります〜〜</p>\n\n<p><code>todos</code> から一つだけ <code>todo</code> をもらって</p>\n\n<ul>\n<li>テキストをレンダーする</li>\n<li>チェックボックスレンダーする</li>\n<li>チェックボックスにクリックイベント持たせて、親コンポーネントのメソッドをemitして、<code>Todo</code>から完了と非完了を入れ替える</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/730bfdb84bdf3787f48df7f6365b8dec19bf24f8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f66633230393861632d303038332d326130632d616266392d3135663434626538373531332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"648\" alt=\"スクリーンショット 2018-06-24 0.51.29のコピー2.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Ffc2098ac-0083-2a0c-abf9-15f44be87513.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5f43c1daecfc046d8add594c7b464ece\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/fc2098ac-0083-2a0c-abf9-15f44be87513.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Ffc2098ac-0083-2a0c-abf9-15f44be87513.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f4ca4a5e3490dc7a2757a9d1f148b515 1x\" loading=\"lazy\"></a></p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">\n</span><span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">touch </span>src/components/TodoItem.vue\n<span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">touch </span>tests/unit/TodoItem.spec.js\n</code></pre></div></div>\n\n<p>テスト書きましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoItem.spec.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">shallowMount</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">@vue/test-utils</span><span class=\"dl\">'</span>\n<span class=\"k\">import</span> <span class=\"nx\">TodoItem</span> <span class=\"k\">from</span> <span class=\"dl\">\"</span><span class=\"s2\">@/components/TodoItem.vue</span><span class=\"dl\">\"</span>\n\n<span class=\"nx\">describe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">todo-item.vue</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">id</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">renders text</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">最初の文字</span><span class=\"dl\">\"</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">TodoItem</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n      <span class=\"na\">propsData</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nx\">id</span><span class=\"p\">,</span>\n        <span class=\"nx\">text</span><span class=\"p\">,</span>\n        <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">})</span>\n\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">span</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">text</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span>\n\n    <span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">setProps</span><span class=\"p\">({</span> <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">二番目の文字</span><span class=\"dl\">\"</span> <span class=\"p\">})</span>\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">span</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">text</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">二番目の文字</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p>ここで出てくる新しい概念は <code>shallowMount</code> の第二引数です。 <code>propsData</code> という場所に <code>todo</code>一つだけわたします。こうすることで todoitemに <code>todo</code> の中身が渡っていきます。<code>テンプレートがないよ</code> ってエラーが出てきたので作ります。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoItem.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;span&gt;</span><span class=\"si\">{{</span><span class=\"nx\">text</span><span class=\"si\">}}</span><span class=\"nt\">&lt;/span&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n\n<span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">todo-item</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"na\">props</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">String</span><span class=\"p\">,</span>\n      <span class=\"na\">required</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n\n</code></pre></div>\n</div>\n\n<p>いい感じ。テストパスしました。テスト追加する〜</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoItem.spec.js</span></div>\n<div class=\"highlight\"><pre><code>  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">renders radio</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">text1</span><span class=\"dl\">\"</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">TodoItem</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n      <span class=\"na\">propsData</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nx\">id</span><span class=\"p\">,</span>\n        <span class=\"nx\">text</span><span class=\"p\">,</span>\n        <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">})</span>\n\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">.radio:checked</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">exists</span><span class=\"p\">()).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"kc\">true</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p>propsとして <code>checked</code> が渡ってきたらラジオボタンがちゃんとレンダリングされて、しかもcheckedがつくかチェックします。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/0a1b2d4f10271e73a90a7f9d62362c6022a21232/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f38346163336634392d353137322d356630642d303332322d3666386137343039306631392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"579\" alt=\"スクリーンショット 2018-06-25 1.54.34.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F84ac3f49-5172-5f0d-0322-6f8a74090f19.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ca0e8a160a27dc691d945a435101a03b\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/84ac3f49-5172-5f0d-0322-6f8a74090f19.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F84ac3f49-5172-5f0d-0322-6f8a74090f19.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=36ddd752dae966dae0c72f0a39dfcdbc 1x\" loading=\"lazy\"></a></p>\n\n<p>まあ存在しないって怒られました。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoItem.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;input</span>\n    <span class=\"na\">type=</span><span class=\"s\">\"radio\"</span>\n    <span class=\"na\">class=</span><span class=\"s\">\"radio\"</span>\n  <span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;span&gt;</span><span class=\"si\">{{</span><span class=\"nx\">text</span><span class=\"si\">}}</span><span class=\"nt\">&lt;/span&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n</code></pre></div>\n</div>\n\n<blockquote>\n<p>Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.</p>\n</blockquote>\n\n<p><a href=\"https://camo.qiitausercontent.com/3f572501f2df6796b9f070b2970457ef3df6045b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f38343365323063632d643062652d626437372d333263352d3437316336346639393466652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"655\" alt=\"スクリーンショット 2018-06-25 1.55.54.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F843e20cc-d0be-bd77-32c5-471c64f994fe.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e5a9184d34802349da38119b794ff40d\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/843e20cc-d0be-bd77-32c5-471c64f994fe.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F843e20cc-d0be-bd77-32c5-471c64f994fe.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b99ddbceaeb8281c41a6e00578f2fe22 1x\" loading=\"lazy\"></a></p>\n\n<p>コンポーネントは 要素、つまり<code>&lt;div&gt;</code> で囲ってあげればよさそうね！</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoItem.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;input</span>\n    <span class=\"na\">type=</span><span class=\"s\">\"radio\"</span>\n    <span class=\"na\">class=</span><span class=\"s\">\"radio\"</span>\n    <span class=\"na\">:checked=</span><span class=\"s\">\"checked\"</span> <span class=\"err\">//</span><span class=\"na\">追加</span>\n  <span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;span&gt;</span><span class=\"si\">{{</span><span class=\"nx\">text</span><span class=\"si\">}}</span><span class=\"nt\">&lt;/span&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n\n<span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">todo-item</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"na\">props</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">String</span><span class=\"p\">,</span>\n      <span class=\"na\">required</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">},</span>\n    <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"c1\">//追加</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">Boolean</span><span class=\"p\">,</span>\n      <span class=\"na\">required</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n\n</code></pre></div>\n</div>\n\n<p>これでテストがパスするはずです。</p>\n\n<p>ポイントは</p>\n\n<ul>\n<li>propsとして <code>checked</code> を受け取るところ</li>\n<li>\n<code>:checked=\"checked\"</code> でcheckedの値をhtmlにバインドしてあげるところ</li>\n</ul>\n\n<p>です。！</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoItem.spec.js</span></div>\n<div class=\"highlight\"><pre><code>    <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">TodoItem</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n      <span class=\"na\">propsData</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nx\">id</span><span class=\"p\">,</span>\n        <span class=\"nx\">text</span><span class=\"p\">,</span>\n        <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"kc\">false</span> <span class=\"c1\">// 追加</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p>自分はcheckedがfalseのときも一応チェックしていましたがそれはお好みにまかせます。</p>\n\n<p>次は</p>\n\n<ul>\n<li>ラジオボタンをクリックしたら親コンポーネントにemitする</li>\n<li>親コンポーネントのtodosが書き換わったらpropsとして渡されて自動にチェックボックスのチェックも書き換わる</li>\n</ul>\n\n<p>ということで親コンポーネントにemitするところまで書きましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoItem.spec.js</span></div>\n<div class=\"highlight\"><pre><code>  <span class=\"kd\">const</span> <span class=\"nx\">id</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n\n  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">emit event when I click radio</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">text1</span><span class=\"dl\">\"</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">wrapper</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">TodoItem</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n      <span class=\"na\">propsData</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nx\">id</span><span class=\"p\">,</span>\n        <span class=\"nx\">text</span><span class=\"p\">,</span>\n        <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">})</span>\n\n    <span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">.radio</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">trigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">click</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">wrapper</span><span class=\"p\">.</span><span class=\"nx\">emitted</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">toggleChecked</span><span class=\"dl\">\"</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"nx\">id</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p>既存の知識だけでもうこのテストは理解できると思います。ラジオボタンのクリックイベントでテキストをemitするメソッドを発火させます。渡すのは<code>todo</code>の<code>id</code>にしましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoItem.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;input</span>\n    <span class=\"na\">type=</span><span class=\"s\">\"radio\"</span>\n    <span class=\"na\">class=</span><span class=\"s\">\"radio\"</span>\n    <span class=\"na\">:checked=</span><span class=\"s\">\"checked\"</span>\n    <span class=\"err\">@</span><span class=\"na\">click=</span><span class=\"s\">\"toggleChecked\"</span>\n  <span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;span&gt;</span><span class=\"si\">{{</span><span class=\"nx\">text</span><span class=\"si\">}}</span><span class=\"nt\">&lt;/span&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n\n<span class=\"nt\">&lt;</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">{</span>\n  <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">todo-item</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n  <span class=\"na\">props</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">String</span><span class=\"p\">,</span>\n      <span class=\"na\">required</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">},</span>\n    <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">Boolean</span><span class=\"p\">,</span>\n      <span class=\"na\">required</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">},</span>\n    <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">type</span><span class=\"p\">:</span> <span class=\"nb\">Number</span><span class=\"p\">,</span>\n      <span class=\"na\">required</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">},</span>\n  <span class=\"na\">methods</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">toggleChecked</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">$emit</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">toggleChecked</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">id</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">script</span><span class=\"nt\">&gt;</span>\n\n</code></pre></div>\n</div>\n\n<p>完成形。</p>\n\n<h3>\n<span id=\"親コンテナーに戻る\" class=\"fragment\"></span><a href=\"#%E8%A6%AA%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%83%BC%E3%81%AB%E6%88%BB%E3%82%8B\"><i class=\"fa fa-link\"></i></a>親コンテナーに戻る</h3>\n\n<p>最初の図間違っていたので修正しました。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/25562220238455cfea56aaa9606801bd8ae49057/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f38653062643234322d666133332d306231392d366333652d6132666465313466393964342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"643\" alt=\"スクリーンショット 2018-06-24 0.21.35のコピー3.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F8e0bd242-fa33-0b19-6c3e-a2fde14f99d4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f06402c46e127bc756a03c9a0c3a03f4\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/8e0bd242-fa33-0b19-6c3e-a2fde14f99d4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F8e0bd242-fa33-0b19-6c3e-a2fde14f99d4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b760a1f810ab87fc83f495040bf40565 1x\" loading=\"lazy\"></a></p>\n\n<p>こんな感じでいきましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">tests/unit/TodoContainer.spec.js</span></div>\n<div class=\"highlight\"><pre><code>  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">toggleChecked</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">localThis</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n      <span class=\"na\">todos</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"na\">id</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n          <span class=\"na\">text</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n          <span class=\"na\">checked</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"nx\">TodoContainer</span><span class=\"p\">.</span><span class=\"nx\">methods</span><span class=\"p\">.</span><span class=\"nx\">toggleChecked</span><span class=\"p\">.</span><span class=\"nx\">call</span><span class=\"p\">(</span><span class=\"nx\">localThis</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">localThis</span><span class=\"p\">.</span><span class=\"nx\">todos</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">checked</span><span class=\"p\">).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"kc\">false</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p><code>todos</code>からidでfindして、チェックをいれたり外したりする関数を作ります。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoContainer.vue</span></div>\n<div class=\"highlight\"><pre><code>    toggleChecked(id) {\n      const todo = this.todos.find(x =&gt; x.id === id)\n      todo.checked = !todo.checked\n    }\n</code></pre></div>\n</div>\n\n<p>メソッドに追加したらpassしました。</p>\n\n<div class=\"code-frame\" data-lang=\"vue\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/TodoContainer.vue</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;div&gt;</span>\n  <span class=\"nt\">&lt;NewTodo</span>\n    <span class=\"err\">@</span><span class=\"na\">createTodo=</span><span class=\"s\">\"addTodo\"</span>\n  <span class=\"nt\">&gt;&lt;/NewTodo&gt;</span>\n  <span class=\"nt\">&lt;TodoItem</span>\n    <span class=\"na\">v-for=</span><span class=\"s\">\"todo in todos\"</span>\n    <span class=\"na\">:id=</span><span class=\"s\">\"todo.id\"</span>\n    <span class=\"na\">:key=</span><span class=\"s\">\"todo.id\"</span>\n    <span class=\"na\">:text=</span><span class=\"s\">\"todo.text\"</span>\n    <span class=\"na\">:checked=</span><span class=\"s\">\"todo.checked\"</span>\n    <span class=\"err\">@</span><span class=\"na\">toggleChecked=</span><span class=\"s\">\"toggleChecked\"</span>\n  <span class=\"nt\">&gt;&lt;/TodoItem&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/</span><span class=\"k\">template</span><span class=\"nt\">&gt;</span>\n\n</code></pre></div>\n</div>\n\n<h3>\n<span id=\"結合するブラウザテスト\" class=\"fragment\"></span><a href=\"#%E7%B5%90%E5%90%88%E3%81%99%E3%82%8B%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%86%E3%82%B9%E3%83%88\"><i class=\"fa fa-link\"></i></a>結合する、ブラウザテスト</h3>\n\n<p>最終的に少し修正しました。コンポーネントに登録してなくてエラーでたのが2箇所。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/ef1722b775c601f04aaeb49c4859286622e1b3a3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f36623334383630372d656461332d343266392d653333312d3161353062303464363136362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"917\" alt=\"スクリーンショット 2018-06-25 3.33.01.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6b348607-eda3-42f9-e331-1a50b04d6166.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6ed017c29ede7bf77b043d235a77bff3\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6b348607-eda3-42f9-e331-1a50b04d6166.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6b348607-eda3-42f9-e331-1a50b04d6166.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d8ae8d5b7f79d2c9d1743d85f413cf9d 1x\" loading=\"lazy\"></a></p>\n\n<p>これで最終的にブラウザは1度しか見ずに簡単なTODOアプリが作れました！</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f455642c587fdddc94038e01d4fe09d15b1324a5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f37393535623336322d303732642d653966392d353261642d3330373564613631653463362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"647\" alt=\"スクリーンショット 2018-06-25 3.31.29.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F7955b362-072d-e9f9-52ad-3075da61e4c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=00a21827e4f712b5020ec0e97a143c95\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/7955b362-072d-e9f9-52ad-3075da61e4c6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F7955b362-072d-e9f9-52ad-3075da61e4c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=77850732e78f2c4c1061fd106578552c 1x\" loading=\"lazy\"></a></p>\n\n<h3>\n<span id=\"作ってみた結論\" class=\"fragment\"></span><a href=\"#%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F%E7%B5%90%E8%AB%96\"><i class=\"fa fa-link\"></i></a>作ってみた結論</h3>\n\n<p>結論として言いたいのは</p>\n\n<ul>\n<li>簡単な内部ロジックで構成されているコンポーネント開発だと簡単にTDDできるよ</li>\n<li>私の経験だと3ヶ月くらいずっとテスト書き続けていたら、TDDできるようになると思う</li>\n<li>StorybookでHot-reloadで開発してもいいと思うけどな！</li>\n<li>これは得意な人がつきっきりで、チュートリアルな形ならやれるものであって、決してVue-test-utils初心者の方ができるものではない気がしてきました。。。</li>\n</ul>\n\n<p>です。</p>\n\n<h2>\n<span id=\"参考資料\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99\"><i class=\"fa fa-link\"></i></a>参考資料</h2>\n\n<ul>\n<li><a href=\"https://qiita.com/k-okina/items/06366888409e73dfe70f\" id=\"reference-665742965523c498a2bb\">2018年Vue.jsとVuexを使ってる人に提案するコンポーネントの分類と設計パターン</a></li>\n<li><a href=\"https://qiita.com/k-okina/items/42ab777f8c53726def17\" id=\"reference-8ef2336099197ba9e89b\">2018年今更主張する、フロントエンドでなぜテストをするのか</a></li>\n</ul>\n\n<h2>\n<span id=\"おわりに\" class=\"fragment\"></span><a href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>おわりに</h2>\n\n<p>いかがでしたか？開発終了まで一度もブラウザを見ずに開発できました。黒い画面(vim)好きなかたはぜひ。<br>\n<code>TDDやれ</code>って言いたいわけじゃないですが、ロジック層だとTDDやってもいいと思うけど、それよりもまずは簡単なところからでもいいからテストを書いていって、Vue-test-utilsのAPI覚えて、テストに慣れていってください。チームがテストに関して成熟してきたかなと思ったらTDDやってもいいかもしれませんが、はじめにも言いましたが <code>自分のチーム</code> で決めたらいいと思います。</p>\n\n<p>少しでもテスト書く人が増えますように！！！！！！！</p>\n\n<h2>\n<span id=\"thx\" class=\"fragment\"></span><a href=\"#thx\"><i class=\"fa fa-link\"></i></a>Thx</h2>\n\n<p>編集リクエストありがとうございます！！</p>\n\n<ul>\n<li><a href=\"/yamap_55\" class=\"user-mention js-hovercard\" title=\"yamap_55\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"yamap_55\">@yamap_55</a></li>\n<li><a href=\"/khsk\" class=\"user-mention js-hovercard\" title=\"khsk\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"khsk\">@khsk</a></li>\n</ul>\n","body":"# Vue.jsのコンポーネント開発をTDDでやってみる\n\n※ TDD (test-driven development): テスト駆動開発\n※ テスト駆動開発は文化です。チームの「状況」「納期」「スキルレベル」、その他いろんな要因が絡んできた結果、そのチームが導入するかどうか決めたらいいと思います。\n※ 例えがいいかはわかりませんが、私は「早起き」と「テスト」は同じようなものだと思っています。「早起き」は健康にいいよねって誰でも言うと思うけど、実際に万人がやっているかどうかは別じゃないですか。それと同じで「テストすること」も絶対いいことだと私は思っていますが、やるかどうかはチームの置かれている状況によって決まります。この記事は、その「テストを導入するかどうか」という意思決定の一助にでもなれればいいなと思います。\n\n## はじめに\n\nこんにちは。ぼくです。\n\n今回はVue.jsでTODOアプリを作ってみようと思います。その時の条件は\n\n- TDDで開発して、\n- ブラウザは最後まで見ない\n\nです。普通にチュートリアルな感じなので、ざっくりコード眺めていけるかと思いますし、スクショ多めでいくので、自分でやらなくてもなんとなく追体験ができるようにしています。よかったら自分でもやってみてください。\n\nまたテストが分かるかたは、このTodoアプリを参考に、ハンズオンとか開いてくれたりするとうれしかったりします。Vue-meetupでもテストを書いている割合が圧倒的に少なかったので、テストユーザー増やしていきましょう〜〜\n\n## コンポーネント作成\n\n### 目標物の確認\n\n今回作成するものは[こちら](https://jp.vuejs.org/v2/examples/todomvc.html)の TODOアプリ です。\n\nいろんなフレームワークでTODOアプリのサンプルは[こちら](http://todomvc.com/)をみるとたくさん載っていて、\n\n- Backbone.js\n- AngularJS\n- Ember.js\n- KnockoutJS\n- ( etc )\n\nなどたくさんサンプルがあるので、フレームワーク選定の時にお使いください。\n\n### 目標物の設計を分解して考える\n\n責務の分解をします。\n\n<img width=\"643\" alt=\"スクリーンショット 2018-06-24 0.21.35のコピー.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/5e6cfd2f-c99d-35aa-b640-943fa8db20b4.png\">\n\n今回は、コンポーネント構成を以下のようにする。\n\n```\n- TodoContainer.vue\n    - NewTodo.vue\n    - TodoItem.vue\n```\n\n- TodoContainer.vue\n    - todoのリストを管理するコンポーネント\n- NewTodo.vue\n    - 新しいTodoリストのテキストを親のコンポーネントにemitする\n- TodoItem.vue\n    - 親のコンポーネントからtodoリストのpropsをもらってレンダリングする\n\n### 環境構築\n\n```shell-session\n$ vue -v\n3\n$ vue create vue-todo\n1. manually select features\n2. ---\n◉ Babel\n◉ Unit Testing\n3. Jest\n4. In package.json(どっちでもいい)\n5. N\n6. yarn\n```\n\nもしくは\n\n```shell-session\n$ git clone git@github.com:ykhirao/vue-todos.git\n$ cd vue-todos\n$ git checkout 9b2b09d5081 -b practice\n```\n\nではじめのコミットを`checkout`してやってください。\n\n### 入力から作ってみる NewTodo.vue\n\nここのインプットフォームから作っていきたいと思いますが、このコンポーネントは\n\n- v-modelでinputのデータを管理する\n- エンターが押されると親コンポーネントにそのテキストをemitする\n\nという責務にしましょう。\n\n<img width=\"648\" alt=\"スクリーンショット 2018-06-24 0.51.29.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/ec851d96-c1db-033b-e89c-5c615772b515.png\">\n\n```shell-session\n$ touch src/components/NewTodo.vue\n$ touch tests/unit/NewTodo.spec.js\n```\n\n1. 期待する結果をexpectで書く\n  - 今回はインプットタグがレンダーされているかだけを検証する\n  - 基本的にコンポーネントは `wrapper` という変数にshallowMountでラップする \n  - イコール文: expect(1).toBe(1)\n  - これが基本の形なので覚えてください。\n\nshallowMount のAPIは[こちら](https://vue-test-utils.vuejs.org/ja/api/shallowMount.html)\n\n他にも `mount` というものでラップできるけど、弊社だと基本的には早いから `shallowMount` を使います。 またstubを作りまくれば`shallowMount`だけでもかけますが、 `mount`を使ったほうが楽になるパターンもあったり結構深いテーマなので、両者の使い分けは後日Qiitaに書きます！！！\n\n#### テスト1 単純なレンダリングテストを書いて、適切なhtml構造を作る\n\n```NewTodo.spec.js\nimport { shallowMount } from '@vue/test-utils'\nimport NewTodo from \"@/components/NewTodo.vue\"\n\ndescribe(\"NewTodo.vue\", () => {\n  it(\"インプットタグをレンダリングする\", () => {\n    const wrapper = shallowMount(NewTodo)\n\n    expect(wrapper.find(\"input.new\").exists()).toBe(true)\n  })\n})\n```\n\nテストコードを簡単に説明すると `newってclassがついたinputタグが存在する？` ってテストです。\n\n- `find = document.querySelector` みたいなものです。 [find api](https://vue-test-utils.vuejs.org/ja/api/#%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%BF)\n- [exists api](https://vue-test-utils.vuejs.org/ja/api/wrapper/exists.html) 存在するか\n- toBe(true) 判定式\n\n\n<img width=\"1677\" alt=\"スクリーンショット 2018-06-24 1.13.32.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/cb75e13f-3e08-3c0b-214f-91f03e9f21bd.png\">\n\nエラー文はこちら。\n\n> [Vue warn]: Failed to mount component: template or render function not defined.\n\nそもそもテンプレートがないみたいなので作りにいきましょう。\n\n```src/components/NewTodo.vue\n<template>\n  <div>test</div>\n</template>\n```\n\n次はマウントコンポーネントのエラーが無くなり単純な失敗みたいです。\n\n<img width=\"513\" alt=\"スクリーンショット 2018-06-24 1.16.55.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/4caa3b45-0631-9d04-9f13-ea7fec49b6ae.png\">\n\n次は `<input>` を作ってみましょう。\n\n```src/components/NewTodo.vue\n<template>\n  <div>\n    <input class=\"new\">\n  </div>\n</template>\n```\n\n<img width=\"401\" alt=\"スクリーンショット 2018-06-24 1.18.03.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/7929ead7-90cf-32af-212a-93d38254bd8c.png\">\n\nパスしました！！！！\n\n#### テスト2 clickイベントを拾い、新しいタグをemitする\n\nとりあえずクリックイベントを発火させて、emitも検知できればいいかなと思います。\n\nこの段階で作り始めたときはしっかり設計できてなかった、以下のことを再定義します\n\n- .vueファイルのdataに { text: \"text\" } というオブジェクトを持たせる\n- それを `createTodo`という名前でemitします。\n\n```NewTodo.spec.js\nit(\"新しいタグをemitする\", () => {\n  const text = \"text\"\n  const wrapper = shallowMount(NewTodo)\n\n  wrapper.setData({text})\n  wrapper.find(\".new\").trigger(\"keyup.enter\")\n\n  expect(wrapper.emitted(\"createTodo\")).toBe(text)\n})\n```\n\n今回は、 `shallowMount` でコンポーネントをラップして、 `find` でinputタグを見つけ出し、 `trigger` でイベントを発火させて、本当にemitするかどうかというテストになります。\n\n```shell-session\n$ yarn test --watch\n```\n\nうーんテストが失敗しています。\n\n<img width=\"654\" alt=\"スクリーンショット 2018-06-25 0.07.31.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/af17d1fe-8cab-239c-5152-6df61e891df1.png\">\n\nたぶん`createTodo`がemitされていませんね！作りにいきましょう。\n\n```src/components/NewTodo.vue\n<template>\n  <div>\n    <input\n      class=\"new\"\n      @keyup.enter=\"submit\"\n    >\n  </div>\n</template>\n\n<script>\nexport default {\n   methods: {\n    submit() {\n      this.$emit(\"createTodo\", \"ここにsubmitされるテキストが入るよ！\")\n    }\n  } \n}\n</script>\n```\n\n\nこんな感じで `input` に `keyup.enter` エンターイベントが発火したときに `submit` というメソッドが呼ばれるように修正しました。このときのテストを以下のように修正して `wrapper.emitted(\"createTodo\")` がどういう値になるか見てみましょう。\n\n```NewTodo.spec.js\nit(\"新しいタグをemitする\", () => {\n  const text = \"text\"\n  const wrapper = shallowMount(NewTodo)\n\n  wrapper.setData({text})\n  wrapper.find(\".new\").trigger(\"keyup.enter\")\n\n  console.log(wrapper.emitted(\"createTodo\"))\n  expect(wrapper.emitted(\"createTodo\")).toBe(text)\n})\n```\n\n```shell-session\nconsole.log tests/unit/NewTodo.spec.js:18\n  [ [ 'ここにsubmitれるテキストが入るよ！' ] ]\n```\n\nこれで `wrapper.emitted(\"createTodo\")[0][0]` に emitされるテキストが入ることがわかりました。のでテストを修正します。\n\n```NewTodo.spec.js\nit(\"新しいタグをemitする\", () => {\n  const text = \"text\"\n  const wrapper = shallowMount(NewTodo)\n\n  wrapper.setData({text})\n  wrapper.find(\".new\").trigger(\"keyup.enter\")\n\n  expect(wrapper.emitted(\"createTodo\")[0][0]).toBe(text)\n})\n```\n\nまた２つのエラーがでてきました。\n\n<img width=\"991\" alt=\"スクリーンショット 2018-06-25 0.17.58.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/2a807f4d-cc03-7912-3b49-6f4fa7cb2c5c.png\">\n\n2つのエラーは\n\n- 単純にexpect().toBe() が失敗していますが、これは後に解決させます。\n- もう一つは `wrapper.setData({text})` というところでコンポーネントにdataを定義していないので怒られていると思われます。作りにいきましょう。 [setData api](https://vue-test-utils.vuejs.org/ja/api/wrapper-array/#setdata-data)\n\n```src/components/NewTodo.vue\n<template>\n  <div>\n    <input\n      class=\"new\"\n      v-model=\"text\" // 1. ここ追加！！\n      @keyup.enter=\"submit\"\n    >\n  </div>\n</template>\n\n<script>\nexport default {\n  data() { // 2. ここ追加！！\n    return {\n      text: \"\"\n    }\n  },\n   methods: {\n    submit() {\n      this.$emit(\"createTodo\", this.text) // 3. ここ追加！！\n    }\n  } \n}\n</script>\n```\n\n修正箇所は3箇所です。\n\n1. v-modelに dataのtextをいれた\n2. .vueファイルにdata関数をもたせた\n3. emitの第二引数に textのデータをもたせた。\n\n以上！！\n\n<img width=\"379\" alt=\"スクリーンショット 2018-06-25 0.24.15.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/8574edd2-8ca8-0571-a05d-d597278989cb.png\">\n\nテストがパスしました〜！！！！！\n\n```shell-session\n$ yarn test --watch\n```\n\nこちらはgitで差分があるファイルだけホッとリロードでテストしてくれるので、完成したこのコンポーネントはもうコミットしておきます。\n\n\n### コンテイナーを作る\n\n再度こちらの図になります。今回は `TodoContainer.vue` を作っていきます。\n\n<img width=\"643\" alt=\"スクリーンショット 2018-06-24 0.21.35のコピー.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/5e6cfd2f-c99d-35aa-b640-943fa8db20b4.png\">\n\nまずはテストから。\n\n```shell-session\n$ touch tests/unit/TodoContainer.spec.js\n$ touch src/components/TodoContainer.vue\n```\n\nよし！！次のテストは `TodoContainer.vue` をレンダーしたら `NewTodo.vue` もレンダーされるかチェックしようではないか。\n\n```tests/unit/TodoContainer.spec.js\nimport { shallowMount } from '@vue/test-utils'\nimport TodoContainer from \"@/components/TodoContainer.vue\"\nimport NewTodo from \"@/components/NewTodo.vue\"\n\ndescribe(\"TodoContainer.vue\", () => {\n  it(\"formをレンダー\", () => {\n    const wrapper = shallowMount(TodoContainer)\n\n    expect(wrapper.find(NewTodo).exists()).toBe(true)\n  })\n})\n```\n\nポイントは `find(NewTodo)` でVueコンポーネントを簡単に探せるところです。\n\n<img width=\"616\" alt=\"スクリーンショット 2018-06-25 0.40.06.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6cf30922-ecf4-7375-d383-2687ff29500c.png\">\n\nもちろん失敗します〜〜のでエラーを見て直して行きましょう。先程みたやつですね！！テンプレートないよってやつです。\n\n```src/components/TodoContainer.vue\n<template>\n</template>\n```\n\nん？なんかこれだけでもテストがパスしちゃいました。。。とりあえず進めると\n\n```src/components/TodoContainer.vue\n<template>\n  <NewTodo></NewTodo>\n</template>\n```\n\n`コンポーネント登録しろよ〜〜` って感じで怒られました。\n\n<img width=\"662\" alt=\"スクリーンショット 2018-06-25 0.47.53.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/d3720672-6403-8a8b-c6cc-d2cd05022b95.png\">\n\nコンポーネントをインポートして登録します。\n\n```src/components/TodoContainer.vue\n<template>\n  <NewTodo></NewTodo>\n</template>\n<script>\nimport NewTodo from \"@/components/NewTodo.vue\"\nexport default {\n  components: {\n    NewTodo\n  },\n}\n</script>\n\n```\n\nはい完了。\n\n`For recursive components, make sure to provide the \"name\" option.`が気になったので、ちょっと `NewTodo.vue`に戻って\n\n```NewTodo.vue\n<script>\nexport default {\n  name: \"new-todo\", // こちら追加\n  data() {\n    return {\n      text: \"\"\n    }\n  },\n```\n\nに戻って`nameオプションつけろ` って感じで怒られましたところを追加しました。\n\nそうすると\n\n```tests/unit/TodoContainer.spec.js\nexpect(wrapper.find(NewTodo).exists()).toBe(true)\n```\n\nがきちんと働くようになってコンポーネントを見つけ出してくれるみたいです。 nameオプションは必ずつけましょう。またnameオプションは `ケバブ-ケース` にすることとVueがいい感じに解釈してくれます。 html5では要素の大文字と小文字区別しないから `<NewTodo>` と <newtodo> とかが同じと解釈されるので、そのあたりのことを丸めるための処理。（かな）\n\n次は子コンポーネントからemitされた値を [ todos ]というデータに追加するところを作ろうかと思います。テストでまた新しい概念が追加されるので頑張って覚えてください。むしろ覚えようとせずに「ふ〜〜んそんなものあるんだ〜〜」くらいがいいかもです。\n\n今回やること\n\n- `createTodo` としてemitされた`text` を`addTodo` というメソッドで追加する\n\n```tests/unit/TodoContainer.spec.js\nimport TodoContainer from \"@/components/TodoContainer.vue\"\n\nit(\"todoを追加する\", () => {\n  const localThis = {\n    todos: []\n  }\n\n  TodoContainer.methods.addTodo.call(localThis, \"text\")\n\n  expect(localThis.todos[0]).toEqual({\n    id: 1,\n    text: \"text\",\n    checked: false\n  })\n})\n```\n\n今回は `localThis` という概念がでてきます。後 `call` めっちゃ重要な概念だから ~~調べて~~ 簡単に書きます。\n\n`import TodoContainer` インポートしたコンポーネントは `TodoContainer.methods.addTodo` という形でコンポーネントメソッドを使うことができます。\n\nただこのときコンポーネントメソッドの `this.todos` が呼び出す文脈によって変わります。これを解消するのが `call` です。それでは見ていきましょう。\n\n\n<img width=\"500\" alt=\"スクリーンショット 2018-06-25 1.13.55.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/7720827b-1e8f-9414-0240-34dfaff95ce9.png\">\n\n```chrome's.console.js\nfunction getText () {\n  return(this.text)\n}\nconst localThis = { text: \"localThisのテスト\"}\n\ngetText()\n\ngetText.call(localThis)\n```\n\n`call` に引数を渡すことで擬似的に `this` を書き換えことができます。\n\nちなみに\n\n```chrome's.console.js\nfunction getText () {\n  console.log(this)\n}\nconst localThis = { text: \"localThisのテスト\"}\n\ngetText()\n\ngetText.call(localThis)\n```\n\nchromeの開発者ツールでの `this` は `window` になります。今回は `spec.js` ではchromeは使わないのでまた別の `this` になることでしょう。node?\n\n<img width=\"525\" alt=\"スクリーンショット 2018-06-25 1.16.42.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/9ac05ff3-8184-acfd-2b17-57b335736b1b.png\">\n\nテストに戻ります\n\n```\nexpect(localThis.todos[0]).toEqual({})\n```\n\nオブジェクトの検証は`toEqual`を使います。\n\n- `toBe ===`\n- `toEqual ==` \n\nみたいな感じです。\n\n<img width=\"553\" alt=\"スクリーンショット 2018-06-25 1.23.04.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e0cd8af6-87e2-03ca-969b-40ef43b01542.png\">\n\nとりあえずなんかエラーでているので\n\n- dataに todosを作る\n- methodsにaddTodoを作る\n\n```src/components/TodoContainer.vue\n<template>\n  <NewTodo\n    @createTodo=\"addTodo\" // 追加\n  ></NewTodo>\n</template>\n<script>\nimport NewTodo from \"@/components/NewTodo.vue\"\n\nexport default {\n  name: \"todo-container\",\n  components: {\n    NewTodo\n  },\n  data() {\n    return {\n      todos: [] // 追加\n    }\n  },\n  methods: {\n    addTodo(text) { // 追加\n      this.todos.push({text, checked:false, id: this.todos.length + 1 })\n    },\n  }\n}\n</script>\n\n```\n\naddTodoについて\n\n- Vueのオブサーバー壊さないために`push` で追加しています。\n- 暫定的に`id` は配列の数で適当にやってます。\n- またcheckedは最初はtodoは完了していないはずなので `false` からスタートさせています\n\nとりあえずコンテナーは一旦作れたので次は子コンポーネントに移ります。\n\n### todolistを作る\n\nここを作ります〜〜\n\n`todos` から一つだけ `todo` をもらって\n\n- テキストをレンダーする\n- チェックボックスレンダーする\n- チェックボックスにクリックイベント持たせて、親コンポーネントのメソッドをemitして、`Todo`から完了と非完了を入れ替える\n\n<img width=\"648\" alt=\"スクリーンショット 2018-06-24 0.51.29のコピー2.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/fc2098ac-0083-2a0c-abf9-15f44be87513.png\">\n\n\n```shell-session\n\n$ touch src/components/TodoItem.vue\n$ touch tests/unit/TodoItem.spec.js\n```\n\nテスト書きましょう。\n\n```tests/unit/TodoItem.spec.js\nimport { shallowMount } from '@vue/test-utils'\nimport TodoItem from \"@/components/TodoItem.vue\"\n\ndescribe(\"todo-item.vue\", () => {\n  const id = 1\n  it(\"renders text\", () => {\n    const text = \"最初の文字\"\n    const wrapper = shallowMount(TodoItem, {\n      propsData: {\n        id,\n        text,\n        checked: true\n      }\n    })\n\n    expect(wrapper.find(\"span\").text()).toBe(text)\n\n    wrapper.setProps({ text: \"二番目の文字\" })\n    expect(wrapper.find(\"span\").text()).toBe(\"二番目の文字\")\n  })\n})\n```\n\nここで出てくる新しい概念は `shallowMount` の第二引数です。 `propsData` という場所に `todo`一つだけわたします。こうすることで todoitemに `todo` の中身が渡っていきます。`テンプレートがないよ` ってエラーが出てきたので作ります。\n\n\n```src/components/TodoItem.vue\n<template>\n  <span>{{text}}</span>\n</template>\n\n<script>\nexport default {\n  name: \"todo-item\",\n  props: {\n    text: {\n      type: String,\n      required: true\n    }\n  }\n}\n</script>\n\n```\n\nいい感じ。テストパスしました。テスト追加する〜\n\n```tests/unit/TodoItem.spec.js\n  it(\"renders radio\", () => {\n    const text = \"text1\"\n    const wrapper = shallowMount(TodoItem, {\n      propsData: {\n        id,\n        text,\n        checked: true\n      }\n    })\n\n    expect(wrapper.find(\".radio:checked\").exists()).toBe(true)\n  })\n```\n\npropsとして `checked` が渡ってきたらラジオボタンがちゃんとレンダリングされて、しかもcheckedがつくかチェックします。\n\n<img width=\"579\" alt=\"スクリーンショット 2018-06-25 1.54.34.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/84ac3f49-5172-5f0d-0322-6f8a74090f19.png\">\n\nまあ存在しないって怒られました。\n\n```src/components/TodoItem.vue\n<template>\n  <input\n    type=\"radio\"\n    class=\"radio\"\n  >\n  <span>{{text}}</span>\n</template>\n```\n\n> Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.\n\n<img width=\"655\" alt=\"スクリーンショット 2018-06-25 1.55.54.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/843e20cc-d0be-bd77-32c5-471c64f994fe.png\">\n\nコンポーネントは<root> 要素、つまり`<div>` で囲ってあげればよさそうね！\n\n```src/components/TodoItem.vue\n<template>\n<div>\n  <input\n    type=\"radio\"\n    class=\"radio\"\n    :checked=\"checked\" //追加\n  >\n  <span>{{text}}</span>\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"todo-item\",\n  props: {\n    text: {\n      type: String,\n      required: true\n    },\n    checked: { //追加\n      type: Boolean,\n      required: true\n    }\n  }\n}\n</script>\n\n```\n\nこれでテストがパスするはずです。\n\nポイントは\n\n- propsとして `checked` を受け取るところ\n- `:checked=\"checked\"` でcheckedの値をhtmlにバインドしてあげるところ\n\nです。！\n\n```tests/unit/TodoItem.spec.js\n    const wrapper = shallowMount(TodoItem, {\n      propsData: {\n        id,\n        text,\n        checked: false // 追加\n      }\n    })\n```\n\n自分はcheckedがfalseのときも一応チェックしていましたがそれはお好みにまかせます。\n\n\n次は\n\n- ラジオボタンをクリックしたら親コンポーネントにemitする\n- 親コンポーネントのtodosが書き換わったらpropsとして渡されて自動にチェックボックスのチェックも書き換わる\n\nということで親コンポーネントにemitするところまで書きましょう。\n\n```tests/unit/TodoItem.spec.js\n  const id = 1\n\n  it(\"emit event when I click radio\", () => {\n    const text = \"text1\"\n    const wrapper = shallowMount(TodoItem, {\n      propsData: {\n        id,\n        text,\n        checked: false\n      }\n    })\n\n    wrapper.find(\".radio\").trigger(\"click\")\n\n    expect(wrapper.emitted(\"toggleChecked\")[0][0]).toBe(id)\n  })\n```\n\n既存の知識だけでもうこのテストは理解できると思います。ラジオボタンのクリックイベントでテキストをemitするメソッドを発火させます。渡すのは`todo`の`id`にしましょう。\n\n```src/components/TodoItem.vue\n<template>\n<div>\n  <input\n    type=\"radio\"\n    class=\"radio\"\n    :checked=\"checked\"\n    @click=\"toggleChecked\"\n  >\n  <span>{{text}}</span>\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"todo-item\",\n  props: {\n    text: {\n      type: String,\n      required: true\n    },\n    checked: {\n      type: Boolean,\n      required: true\n    },\n    id: {\n      type: Number,\n      required: true\n    }\n  },\n  methods: {\n    toggleChecked() {\n      this.$emit(\"toggleChecked\", this.id)\n    }\n  }\n}\n</script>\n\n```\n\n完成形。\n\n### 親コンテナーに戻る\n\n最初の図間違っていたので修正しました。\n\n<img width=\"643\" alt=\"スクリーンショット 2018-06-24 0.21.35のコピー3.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/8e0bd242-fa33-0b19-6c3e-a2fde14f99d4.png\">\n\nこんな感じでいきましょう。\n\n```tests/unit/TodoContainer.spec.js\n  it(\"toggleChecked\", () => {\n    const localThis = {\n      todos: [\n        {\n          id: 1,\n          text: \"text\",\n          checked: true\n        }\n      ]\n    }\n\n    TodoContainer.methods.toggleChecked.call(localThis, 1)\n\n    expect(localThis.todos[0].checked).toBe(false)\n  })\n```\n\n`todos`からidでfindして、チェックをいれたり外したりする関数を作ります。\n\n```src/components/TodoContainer.vue\n    toggleChecked(id) {\n      const todo = this.todos.find(x => x.id === id)\n      todo.checked = !todo.checked\n    }\n```\n\nメソッドに追加したらpassしました。\n\n```src/components/TodoContainer.vue\n<template>\n<div>\n  <NewTodo\n    @createTodo=\"addTodo\"\n  ></NewTodo>\n  <TodoItem\n    v-for=\"todo in todos\"\n    :id=\"todo.id\"\n    :key=\"todo.id\"\n    :text=\"todo.text\"\n    :checked=\"todo.checked\"\n    @toggleChecked=\"toggleChecked\"\n  ></TodoItem>\n</div>\n</template>\n\n```\n\n### 結合する、ブラウザテスト\n\n最終的に少し修正しました。コンポーネントに登録してなくてエラーでたのが2箇所。\n\n<img width=\"917\" alt=\"スクリーンショット 2018-06-25 3.33.01.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6b348607-eda3-42f9-e331-1a50b04d6166.png\">\n\nこれで最終的にブラウザは1度しか見ずに簡単なTODOアプリが作れました！\n\n<img width=\"647\" alt=\"スクリーンショット 2018-06-25 3.31.29.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/7955b362-072d-e9f9-52ad-3075da61e4c6.png\">\n\n\n### 作ってみた結論\n\n結論として言いたいのは\n\n- 簡単な内部ロジックで構成されているコンポーネント開発だと簡単にTDDできるよ\n- 私の経験だと3ヶ月くらいずっとテスト書き続けていたら、TDDできるようになると思う\n- StorybookでHot-reloadで開発してもいいと思うけどな！\n- これは得意な人がつきっきりで、チュートリアルな形ならやれるものであって、決してVue-test-utils初心者の方ができるものではない気がしてきました。。。\n\nです。\n\n## 参考資料\n\n- [2018年Vue.jsとVuexを使ってる人に提案するコンポーネントの分類と設計パターン](https://qiita.com/k-okina/items/06366888409e73dfe70f)\n- [2018年今更主張する、フロントエンドでなぜテストをするのか](https://qiita.com/k-okina/items/42ab777f8c53726def17)\n\n## おわりに\n\nいかがでしたか？開発終了まで一度もブラウザを見ずに開発できました。黒い画面(vim)好きなかたはぜひ。\n`TDDやれ`って言いたいわけじゃないですが、ロジック層だとTDDやってもいいと思うけど、それよりもまずは簡単なところからでもいいからテストを書いていって、Vue-test-utilsのAPI覚えて、テストに慣れていってください。チームがテストに関して成熟してきたかなと思ったらTDDやってもいいかもしれませんが、はじめにも言いましたが `自分のチーム` で決めたらいいと思います。\n\n少しでもテスト書く人が増えますように！！！！！！！\n\n## Thx\n\n編集リクエストありがとうございます！！\n\n- @yamap_55\n- @khsk\n","coediting":false,"comments_count":6,"created_at":"2018-06-25T08:56:37+09:00","group":null,"id":"becd9be857dbe6804314","likes_count":456,"private":false,"reactions_count":0,"stocks_count":450,"tags":[{"name":"JavaScript","versions":[]},{"name":"TDD","versions":[]},{"name":"Vue.js","versions":[]},{"name":"フロントエンド","versions":[]},{"name":"vue-test-utils","versions":[]}],"title":"【Vue.js】いつから「フロントエンド開発でTDDができない」と錯覚していた？","updated_at":"2018-06-27T23:47:26+09:00","url":"https://qiita.com/ykhirao/items/becd9be857dbe6804314","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"rspecのdescribeとitを自作してみる\" class=\"fragment\"></span><a href=\"#rspec%E3%81%AEdescribe%E3%81%A8it%E3%82%92%E8%87%AA%E4%BD%9C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>rspecのdescribeとitを自作してみる</h1>\n\n<h2>\n<span id=\"読書コード対象者\" class=\"fragment\"></span><a href=\"#%E8%AA%AD%E6%9B%B8%E3%82%B3%E3%83%BC%E3%83%89%E5%AF%BE%E8%B1%A1%E8%80%85\"><i class=\"fa fa-link\"></i></a>読書コード対象者</h2>\n\n<p>Rubyのコード少しでも読める方なら最後まで読了できるかと思います。</p>\n\n<ul>\n<li>Rubyの引数について詳しくなります。</li>\n<li>GrapeというAPIを簡単に作れるOSSのソースコードを少しだけ一緒に読んで行きたいと思うので毎日使っているコードが親近感でます</li>\n</ul>\n\n<p>最終的には、下記の文法が何しているかわかります。</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"n\">describe</span> <span class=\"s2\">\"RspecでこちらのコードがRuby内部でどういう文法で動いているか\"</span> <span class=\"k\">do</span>\n\n  <span class=\"nb\">puts</span> <span class=\"s2\">\"分かるようになります\"</span>\n\n<span class=\"k\">end</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Status</span> <span class=\"o\">&lt;</span> <span class=\"no\">Grape</span><span class=\"o\">::</span><span class=\"no\">Entity</span>\n    <span class=\"c1\"># またGrapeのこのあたりのコードにも詳しくなります</span>\n    <span class=\"n\">expose</span> <span class=\"ss\">:style</span>\n    <span class=\"n\">expose</span> <span class=\"ss\">:html</span><span class=\"p\">,</span> <span class=\"ss\">documentation: </span><span class=\"p\">{</span> <span class=\"ss\">type: </span><span class=\"no\">String</span><span class=\"p\">,</span> <span class=\"ss\">desc: </span><span class=\"s1\">'html'</span> <span class=\"p\">}</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">f</span><span class=\"o\">|</span>\n        <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">body</span>\n    <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>またこの <code>do end</code> や <code>{ }</code> みたいな<code>ブロック</code>と呼ばれるものへの理解が少し広がるかと思います。</p>\n\n<h2>\n<span id=\"背景\" class=\"fragment\"></span><a href=\"#%E8%83%8C%E6%99%AF\"><i class=\"fa fa-link\"></i></a>背景</h2>\n\n<p>こんにちは僕です。この話は、Vue.jsからAPIを叩こう思い、Rails側にGrapeによるAPIを作っていたことから始まります。そのときに <code>Grapeエラーでるよ〜〜あああああ〜〜</code> って思いソースコードまで追ってみたのでその時の話を順番にしていきます。（ ドキュメント見てから実装開始しろってツッコミはなしで ）</p>\n\n<h2>\n<span id=\"grapeのコードを追ってみる\" class=\"fragment\"></span><a href=\"#grape%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%BF%BD%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Grapeのコードを追ってみる</h2>\n\n<h3>\n<span id=\"entityのサンプル\" class=\"fragment\"></span><a href=\"#entity%E3%81%AE%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB\"><i class=\"fa fa-link\"></i></a>Entityのサンプル</h3>\n\n<p><a href=\"https://github.com/ruby-grape/grape-entity\" rel=\"nofollow noopener\" target=\"_blank\">Grape::EntityのGitHub</a></p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"k\">class</span> <span class=\"nc\">Status</span> <span class=\"o\">&lt;</span> <span class=\"no\">Grape</span><span class=\"o\">::</span><span class=\"no\">Entity</span>\n    <span class=\"n\">expose</span> <span class=\"ss\">:style</span>\n    <span class=\"n\">expose</span> <span class=\"ss\">:html</span><span class=\"p\">,</span> <span class=\"ss\">documentation: </span><span class=\"p\">{</span> <span class=\"ss\">type: </span><span class=\"no\">String</span><span class=\"p\">,</span> <span class=\"ss\">desc: </span><span class=\"s1\">'html'</span> <span class=\"p\">}</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">f</span><span class=\"o\">|</span>\n        <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">body</span>\n    <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>と書いておくと</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"n\">present</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"ss\">with: </span><span class=\"no\">Status</span>\n</code></pre></div></div>\n\n<p>みたいな感じでJSONの返却をぬるっとやってくれるのがGrapeです。</p>\n\n<p>今回はこの <code>expose</code> の引数に何を渡せばいいのか全くわからなかったので、そのあたりのコードを追っていきます。</p>\n\n<h3>\n<span id=\"rubyの引数の振り返り\" class=\"fragment\"></span><a href=\"#ruby%E3%81%AE%E5%BC%95%E6%95%B0%E3%81%AE%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A\"><i class=\"fa fa-link\"></i></a>Rubyの引数の振り返り</h3>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code>\n<span class=\"k\">def</span> <span class=\"nf\">x1</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">)</span>\n    <span class=\"nb\">puts</span> <span class=\"n\">text</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">x2</span> <span class=\"n\">text</span>\n    <span class=\"nb\">puts</span> <span class=\"n\">text</span>\n<span class=\"k\">end</span>\n\n<span class=\"n\">x1</span><span class=\"p\">(</span><span class=\"s2\">\"it calls x1\"</span><span class=\"p\">)</span> <span class=\"c1\"># it calls x1</span>\n<span class=\"n\">x2</span> <span class=\"s2\">\"it calls x2\"</span>  <span class=\"c1\"># it calls x2</span>\n\n</code></pre></div></div>\n\n<p>おもむろにTerminalでirbと打つとRubyが対話モードで使えるので（MacUser）上のコードは適当に自分で流し込んで試してください。！！</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>irb\n<span class=\"gp\">$</span><span class=\"w\"> </span>irb<span class=\"o\">(</span>main<span class=\"o\">)</span>:001:0&gt;\n</code></pre></div></div>\n\n<p><a href=\"https://camo.qiitausercontent.com/876982e5f3a76c4196709e9487b7c1552dde0648/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f33386235386439382d356331382d376566322d343264642d3438373132353662626135382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"634\" alt=\"スクリーンショット 2018-06-21 0.43.36.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F38b58d98-5c18-7ef2-42dd-4871256bba58.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fe89cf9c4ddd34c666f0ceb15b200683\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/38b58d98-5c18-7ef2-42dd-4871256bba58.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F38b58d98-5c18-7ef2-42dd-4871256bba58.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f5f30adb661e7be21b2d69f902b2f8d9 1x\" loading=\"lazy\"></a></p>\n\n<p>こんな感じでRubyは <code>()</code> が省略できたりします。</p>\n\n<p>参考: <a href=\"http://i.loveruby.net/ja/ruby/codingstyle.html\" rel=\"nofollow noopener\" target=\"_blank\">Ruby のコーディングスタイル</a></p>\n\n<h3>\n<span id=\"grapeの-expose-の使い方をもう一度見る\" class=\"fragment\"></span><a href=\"#grape%E3%81%AE-expose-%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9%E3%82%92%E3%82%82%E3%81%86%E4%B8%80%E5%BA%A6%E8%A6%8B%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Grapeの <code>expose</code> の使い方をもう一度見る</h3>\n\n<p>前回はRubyの()の省略について学んだので次のコードも理解できるはずです。</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"n\">expose</span> <span class=\"ss\">:user_name</span>\n</code></pre></div></div>\n\n<p>つまり <code>expose</code> はメソッドで、引数に <code>:user_name</code> というシンボルを渡している、という風に見えて来ましたね。（間違ってたら偉い人が教えてくれるのでコメント欄参照！！）</p>\n\n<p>ここまでで、ちょっとRubyに詳しくなった気がします。</p>\n\n<p>なので次は <code>expose</code> というメソッドを見に行きます。</p>\n\n<h3>\n<span id=\"grapeの-expose-のソースコードを見る\" class=\"fragment\"></span><a href=\"#grape%E3%81%AE-expose-%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%A6%8B%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Grapeの <code>expose</code> のソースコードを見る</h3>\n\n<p>ソースコードはこちら <a href=\"https://github.com/ruby-grape/grape-entity/blob/master/lib/grape_entity/entity.rb\" rel=\"nofollow noopener\" target=\"_blank\">lib/grape_entity/entity.rb</a></p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nc\">self</span><span class=\"o\">.</span><span class=\"nf\">expose</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">&amp;</span><span class=\"n\">block</span><span class=\"p\">)</span>\n    <span class=\"n\">options</span> <span class=\"o\">=</span> <span class=\"n\">merge_options</span><span class=\"p\">(</span><span class=\"n\">args</span><span class=\"p\">.</span><span class=\"nf\">last</span><span class=\"p\">.</span><span class=\"nf\">is_a?</span><span class=\"p\">(</span><span class=\"no\">Hash</span><span class=\"p\">)</span> <span class=\"p\">?</span> <span class=\"n\">args</span><span class=\"p\">.</span><span class=\"nf\">pop</span> <span class=\"p\">:</span> <span class=\"p\">{})</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">args</span><span class=\"p\">.</span><span class=\"nf\">size</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1</span>\n        <span class=\"k\">raise</span> <span class=\"no\">ArgumentError</span><span class=\"p\">,</span> <span class=\"s1\">'You may not use the :as option on multi-attribute exposures.'</span> <span class=\"k\">if</span> <span class=\"n\">options</span><span class=\"p\">[</span><span class=\"ss\">:as</span><span class=\"p\">]</span>\n        <span class=\"k\">raise</span> <span class=\"no\">ArgumentError</span><span class=\"p\">,</span> <span class=\"s1\">'You may not use the :expose_nil on multi-attribute exposures.'</span> <span class=\"k\">if</span> <span class=\"n\">options</span><span class=\"p\">.</span><span class=\"nf\">key?</span><span class=\"p\">(</span><span class=\"ss\">:expose_nil</span><span class=\"p\">)</span>\n        <span class=\"k\">raise</span> <span class=\"no\">ArgumentError</span><span class=\"p\">,</span> <span class=\"s1\">'You may not use block-setting on multi-attribute exposures.'</span> <span class=\"k\">if</span> <span class=\"nb\">block_given?</span>\n    <span class=\"k\">end</span>\n\n    <span class=\"k\">raise</span> <span class=\"no\">ArgumentError</span><span class=\"p\">,</span> <span class=\"s1\">'You may not use block-setting when also using format_with'</span> <span class=\"k\">if</span> <span class=\"nb\">block_given?</span> <span class=\"o\">&amp;&amp;</span> <span class=\"n\">options</span><span class=\"p\">[</span><span class=\"ss\">:format_with</span><span class=\"p\">].</span><span class=\"nf\">respond_to?</span><span class=\"p\">(</span><span class=\"ss\">:call</span><span class=\"p\">)</span>\n\n    <span class=\"k\">if</span> <span class=\"nb\">block_given?</span>\n        <span class=\"k\">if</span> <span class=\"n\">block</span><span class=\"p\">.</span><span class=\"nf\">parameters</span><span class=\"p\">.</span><span class=\"nf\">any?</span>\n            <span class=\"n\">options</span><span class=\"p\">[</span><span class=\"ss\">:proc</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">block</span>\n        <span class=\"k\">else</span>\n            <span class=\"n\">options</span><span class=\"p\">[</span><span class=\"ss\">:nesting</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n        <span class=\"k\">end</span>\n    <span class=\"k\">end</span>\n\n    <span class=\"vi\">@documentation</span> <span class=\"o\">=</span> <span class=\"kp\">nil</span>\n    <span class=\"vi\">@nesting_stack</span> <span class=\"o\">||=</span> <span class=\"p\">[]</span>\n    <span class=\"n\">args</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"p\">{</span> <span class=\"o\">|</span><span class=\"n\">attribute</span><span class=\"o\">|</span> <span class=\"n\">build_exposure_for_attribute</span><span class=\"p\">(</span><span class=\"n\">attribute</span><span class=\"p\">,</span> <span class=\"vi\">@nesting_stack</span><span class=\"p\">,</span> <span class=\"n\">options</span><span class=\"p\">,</span> <span class=\"n\">block</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>20行くらいなのでみんなすぐ理解できますよね（ちなみに私理解できなかったのでこの記事書きながら理解しています）</p>\n\n<h3>\n<span id=\"grapeの-expose-のソースコードを適当に理解する\" class=\"fragment\"></span><a href=\"#grape%E3%81%AE-expose-%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E9%81%A9%E5%BD%93%E3%81%AB%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Grapeの <code>expose</code> のソースコードを適当に理解する</h3>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nc\">self</span><span class=\"o\">.</span><span class=\"nf\">expose</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">&amp;</span><span class=\"n\">block</span><span class=\"p\">)</span>\n    <span class=\"n\">options</span> <span class=\"o\">=</span> <span class=\"s2\">\"引数の *args からオプションをいい感じに整形する\"</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">args</span><span class=\"p\">.</span><span class=\"nf\">size</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1</span>\n        <span class=\"s2\">\"問題あったらエラーだす\"</span>\n    <span class=\"k\">end</span>\n\n    <span class=\"k\">raise</span> <span class=\"no\">ArgumentError</span><span class=\"p\">,</span> <span class=\"s1\">'問題ないよね…？'</span>\n\n    <span class=\"k\">if</span> <span class=\"nb\">block_given?</span>\n        <span class=\"s2\">\"引数として &amp;block が渡されてるとごにょごにょ\"</span>\n    <span class=\"k\">end</span>\n\n    <span class=\"vi\">@documentation</span> <span class=\"o\">=</span> <span class=\"kp\">nil</span>\n    <span class=\"vi\">@nesting_stack</span> <span class=\"o\">||=</span> <span class=\"p\">[]</span>\n    <span class=\"n\">args</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"p\">{</span> <span class=\"o\">|</span><span class=\"n\">attribute</span><span class=\"o\">|</span> <span class=\"s2\">\"いい感じにゴニョゴニョしてデータ作り出す\"</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>正直なんかよくわからないけど <code>def self.expose(*args, &amp;block)</code> これの <code>*args</code> は <code>引数はたくさん渡せるよ！</code>で、 最後の <code>&amp;block</code> は <code>引数の最後にブロック渡せるぜ！！！！</code> って意味だと思ったらいいと思います。（強引） </p>\n\n<p>※ブロックとは <code>do end</code> とか <code>{}</code> のことで、ブロックが引数として渡されたのを判定するのは Rubyの <code>block_given?</code> というメソッドが使えます。</p>\n\n<h3>\n<span id=\"grapeの-expose-の使い方をもう一度見る3度目\" class=\"fragment\"></span><a href=\"#grape%E3%81%AE-expose-%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9%E3%82%92%E3%82%82%E3%81%86%E4%B8%80%E5%BA%A6%E8%A6%8B%E3%82%8B3%E5%BA%A6%E7%9B%AE\"><i class=\"fa fa-link\"></i></a>Grapeの <code>expose</code> の使い方をもう一度見る（3度目）</h3>\n\n<p>なので、こちらももう読めるようになったはずです。。</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"n\">expose</span> <span class=\"ss\">:html</span><span class=\"p\">,</span> <span class=\"ss\">documentation: </span><span class=\"p\">{</span> <span class=\"ss\">type: </span><span class=\"no\">String</span><span class=\"p\">,</span> <span class=\"ss\">desc: </span><span class=\"s1\">'html'</span> <span class=\"p\">}</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">f</span><span class=\"o\">|</span>\n    <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">body</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>exposeというメソッドの引数は</p>\n\n<ol>\n<li><code>:html</code></li>\n<li><code>documentation: { type: String, desc: 'html' })</code></li>\n<li><code>do |f| f.body; end</code></li>\n</ol>\n\n<p>の３つで、最後の3つ目はブロック要素として認識されています。</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nc\">self</span><span class=\"o\">.</span><span class=\"nf\">expose</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">&amp;</span><span class=\"n\">block</span><span class=\"p\">)</span>\n    <span class=\"n\">options</span> <span class=\"o\">=</span> <span class=\"n\">merge_options</span><span class=\"p\">(</span><span class=\"n\">args</span><span class=\"p\">.</span><span class=\"nf\">last</span><span class=\"p\">.</span><span class=\"nf\">is_a?</span><span class=\"p\">(</span><span class=\"no\">Hash</span><span class=\"p\">)</span> <span class=\"p\">?</span> <span class=\"n\">args</span><span class=\"p\">.</span><span class=\"nf\">pop</span> <span class=\"p\">:</span> <span class=\"p\">{})</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>そして、もう一度exposeメソッドを見ると、1と2は(*args)に入って、3のブロックは(&amp;block)に入っていくことがわかります。</p>\n\n<p><code>args.last.is_a?(Hash)</code> は <code>*args の最後がハッシュなら</code> という意味ですが、おそらくですが、この <code>*args</code> の最後には <code>documentation</code> のドキュメントをいれないとエラー起きるような気がします（今回はそこは追わない）</p>\n\n<h3>\n<span id=\"ブロックが渡されたか判断する-block\" class=\"fragment\"></span><a href=\"#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%8C%E6%B8%A1%E3%81%95%E3%82%8C%E3%81%9F%E3%81%8B%E5%88%A4%E6%96%AD%E3%81%99%E3%82%8B-block\"><i class=\"fa fa-link\"></i></a>ブロックが渡されたか判断する (&amp;block)</h3>\n\n<p>Rubyのメソッドに<code>block_given?</code>で渡されたかチェックできます。</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nc\">self</span><span class=\"o\">.</span><span class=\"nf\">expose</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">&amp;</span><span class=\"n\">block</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"nb\">block_given?</span>\n        <span class=\"s2\">\"引数として &amp;block が渡されてるとごにょごにょ\"</span>\n    <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>なのでexposeには２つの書き方があります。</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"k\">class</span> <span class=\"nc\">Status</span> <span class=\"o\">&lt;</span> <span class=\"no\">Grape</span><span class=\"o\">::</span><span class=\"no\">Entity</span>\n    <span class=\"n\">expose</span> <span class=\"ss\">:style</span>\n    <span class=\"n\">expose</span> <span class=\"ss\">:html</span><span class=\"p\">,</span> <span class=\"ss\">documentation: </span><span class=\"p\">{</span> <span class=\"ss\">type: </span><span class=\"no\">String</span><span class=\"p\">,</span> <span class=\"ss\">desc: </span><span class=\"s1\">'html'</span> <span class=\"p\">}</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">f</span><span class=\"o\">|</span>\n        <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">body</span>\n    <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><code>do; end;</code>をつける書き方、何もつけない書き方、どちらも文法的に正しくなるように <code>expose</code> は設計されています。</p>\n\n<p>普段なんとなく使っているコードをしっかり追ってみましたが、個人的にはRubyをちゃんと知らなくなんとなく使っているのはエンジニアとして成長するためにもだめだなあと思いました。</p>\n\n<p><a href=\"https://docs.ruby-lang.org/ja/latest/method/Kernel/m/block_given=3f.html\" rel=\"nofollow noopener\" target=\"_blank\">block_given? のドキュメント</a></p>\n\n<h2>\n<span id=\"rspecのコードは追わないが作ってみる\" class=\"fragment\"></span><a href=\"#rspec%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AF%E8%BF%BD%E3%82%8F%E3%81%AA%E3%81%84%E3%81%8C%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Rspecのコードは追わないが作ってみる</h2>\n\n<h3>\n<span id=\"rspec序文\" class=\"fragment\"></span><a href=\"#rspec%E5%BA%8F%E6%96%87\"><i class=\"fa fa-link\"></i></a>Rspec序文</h3>\n\n<p>ここまでで <code>expose</code> のコードを読んでrubyの使い方への理解が深まったと思います。</p>\n\n<p>次は本題ですが Rspecの <code>describe</code> を自分で書いてみようと思います。</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"n\">describe</span> <span class=\"s2\">\"xxxをテストする\"</span> <span class=\"k\">do</span>\n  <span class=\"nb\">puts</span> <span class=\"s2\">\"これで合ってるかな…\"</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>ここまで読んだ読者はもうわかると思いますが、<code>describe</code> というメソッドは引数は <code>（text, block）</code> テキストとブロックだと判断がつきます。</p>\n\n<h3>\n<span id=\"rspec作成編\" class=\"fragment\"></span><a href=\"#rspec%E4%BD%9C%E6%88%90%E7%B7%A8\"><i class=\"fa fa-link\"></i></a>Rspec作成編</h3>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"c1\"># encoding: utf-8</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">describe</span><span class=\"p\">(</span><span class=\"n\">msg</span><span class=\"p\">,</span> <span class=\"o\">&amp;</span><span class=\"n\">block</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"nb\">block_given?</span>\n        <span class=\"n\">block</span><span class=\"p\">.</span><span class=\"nf\">call</span>\n    <span class=\"k\">else</span>\n        <span class=\"nb\">puts</span> <span class=\"n\">msg</span>\n    <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"nb\">puts</span> <span class=\"s2\">\"~~~~~~~~~~~~~~~~~~~~~~~~~~\"</span>\n\n<span class=\"n\">describe</span> <span class=\"s2\">\"こちらテストですよ！！！！！！\"</span>\n\n\n<span class=\"nb\">puts</span> <span class=\"s2\">\"~~~~~~~~~~~~~~~~~~~~~~~~~~\"</span>\n\n<span class=\"n\">describe</span> <span class=\"s2\">\"こちらテストです\"</span> <span class=\"k\">do</span>\n  <span class=\"nb\">puts</span> <span class=\"s2\">\"ブロック渡したらどうなるかテスト\"</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># 返ってくる値</span>\n<span class=\"c1\">#</span>\n<span class=\"c1\"># ~~~~~~~~~~~~~~~~~~~~~~~~~~</span>\n<span class=\"c1\"># こちらテストですよ！！！！！！</span>\n<span class=\"c1\"># ~~~~~~~~~~~~~~~~~~~~~~~~~~</span>\n<span class=\"c1\"># ブロック渡したらどうなるかテスト</span>\n\n</code></pre></div></div>\n\n<p>今回作成した <code>describe</code> はブロックを渡したかどうかで処理を分岐させてみました。</p>\n\n<ol>\n<li>\n<p>ブロックを渡した場合</p>\n\n<ul>\n<li> <code>block_given?</code> が <code>true</code> になる</li>\n<li>\n<code>block.call</code>を実行させる</li>\n</ul>\n</li>\n<li>\n<p>ブロックを渡さない場合</p>\n\n<ul>\n<li> ただ第一引数で渡したmsgをputsするだけになります。</li>\n</ul>\n</li>\n</ol>\n\n<p><a href=\"https://paiza.io/projects/e/KB5pPxfpANaqrggZbqLTLQ\" rel=\"nofollow noopener\" target=\"_blank\">Paiza.ioでの動作サンプル</a></p>\n\n<p>ここまで自分で作れるようになったら、Rubyの引数マスターだと思います</p>\n\n<h3>\n<span id=\"blockcall\" class=\"fragment\"></span><a href=\"#blockcall\"><i class=\"fa fa-link\"></i></a>block.call</h3>\n\n<p>渡したブロックを実行させられます。</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\"><div class=\"highlight\"><pre><code><span class=\"n\">block</span><span class=\"p\">.</span><span class=\"nf\">call</span>\n</code></pre></div></div>\n\n<h3>\n<span id=\"rspecのソースコードについて\" class=\"fragment\"></span><a href=\"#rspec%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a>Rspecのソースコードについて</h3>\n\n<p>たぶんレポジトリは<a href=\"https://github.com/rspec/rspec-rails/\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a>ですが <code>describe</code> とかどこで実装されているか正直読んでないです。分かる方は記事を書いてくれると楽しんで読みたいと思うのでコメント欄でお願いします〜〜</p>\n\n<h2>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h2>\n\n<p>自分が普段使っているソースコードを、気になったところだけでもいいので読んで見る。これだけでもOSS使ってるっぽいし（形から入る人）、ドキュメントにしっかりかかれていないこともなんとなく分かるのがすごくいいですね。（今回は <code>expose</code> の最後の引数はdocumentじゃね？って考えれたこととか）</p>\n\n<p>Ruby詳しいですとは口がさけても言えないので詳しい方PRとかコメント欄でご指導いただけると幸いです。最後まで読んでいただきありがとうございました〜！！</p>\n","body":"# rspecのdescribeとitを自作してみる\n\n## 読書コード対象者\n\nRubyのコード少しでも読める方なら最後まで読了できるかと思います。\n\n- Rubyの引数について詳しくなります。\n- GrapeというAPIを簡単に作れるOSSのソースコードを少しだけ一緒に読んで行きたいと思うので毎日使っているコードが親近感でます\n\n最終的には、下記の文法が何しているかわかります。\n\n```ruby\ndescribe \"RspecでこちらのコードがRuby内部でどういう文法で動いているか\" do\n\n  puts \"分かるようになります\"\n\nend\n\nclass Status < Grape::Entity\n    # またGrapeのこのあたりのコードにも詳しくなります\n    expose :style\n    expose :html, documentation: { type: String, desc: 'html' } do |f|\n        f.body\n    end\nend\n```\n\nまたこの `do end` や `{ }` みたいな`ブロック`と呼ばれるものへの理解が少し広がるかと思います。\n\n## 背景\n\nこんにちは僕です。この話は、Vue.jsからAPIを叩こう思い、Rails側にGrapeによるAPIを作っていたことから始まります。そのときに `Grapeエラーでるよ〜〜あああああ〜〜` って思いソースコードまで追ってみたのでその時の話を順番にしていきます。（ ドキュメント見てから実装開始しろってツッコミはなしで ）\n\n## Grapeのコードを追ってみる\n\n### Entityのサンプル\n\n[Grape::EntityのGitHub](https://github.com/ruby-grape/grape-entity)\n\n```ruby\nclass Status < Grape::Entity\n    expose :style\n    expose :html, documentation: { type: String, desc: 'html' } do |f|\n        f.body\n    end\nend\n```\n\nと書いておくと\n\n```ruby\npresent s, with: Status\n```\n\nみたいな感じでJSONの返却をぬるっとやってくれるのがGrapeです。\n\n今回はこの `expose` の引数に何を渡せばいいのか全くわからなかったので、そのあたりのコードを追っていきます。\n\n### Rubyの引数の振り返り\n\n```ruby\n\ndef x1(text)\n    puts text\nend\n\ndef x2 text\n    puts text\nend\n\nx1(\"it calls x1\") # it calls x1\nx2 \"it calls x2\"  # it calls x2\n\n```\n\nおもむろにTerminalでirbと打つとRubyが対話モードで使えるので（MacUser）上のコードは適当に自分で流し込んで試してください。！！\n\n```shell-session\n$ irb\n$ irb(main):001:0>\n```\n\n<img width=\"634\" alt=\"スクリーンショット 2018-06-21 0.43.36.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/38b58d98-5c18-7ef2-42dd-4871256bba58.png\">\n\nこんな感じでRubyは `()` が省略できたりします。\n\n参考: [Ruby のコーディングスタイル](http://i.loveruby.net/ja/ruby/codingstyle.html)\n\n### Grapeの `expose` の使い方をもう一度見る\n\n前回はRubyの()の省略について学んだので次のコードも理解できるはずです。\n\n```ruby\nexpose :user_name\n```\n\nつまり `expose` はメソッドで、引数に `:user_name` というシンボルを渡している、という風に見えて来ましたね。（間違ってたら偉い人が教えてくれるのでコメント欄参照！！）\n\nここまでで、ちょっとRubyに詳しくなった気がします。\n\nなので次は `expose` というメソッドを見に行きます。\n\n### Grapeの `expose` のソースコードを見る\n\nソースコードはこちら [lib/grape_entity/entity.rb](https://github.com/ruby-grape/grape-entity/blob/master/lib/grape_entity/entity.rb)\n\n```ruby\ndef self.expose(*args, &block)\n    options = merge_options(args.last.is_a?(Hash) ? args.pop : {})\n\n    if args.size > 1\n        raise ArgumentError, 'You may not use the :as option on multi-attribute exposures.' if options[:as]\n        raise ArgumentError, 'You may not use the :expose_nil on multi-attribute exposures.' if options.key?(:expose_nil)\n        raise ArgumentError, 'You may not use block-setting on multi-attribute exposures.' if block_given?\n    end\n\n    raise ArgumentError, 'You may not use block-setting when also using format_with' if block_given? && options[:format_with].respond_to?(:call)\n\n    if block_given?\n        if block.parameters.any?\n            options[:proc] = block\n        else\n            options[:nesting] = true\n        end\n    end\n\n    @documentation = nil\n    @nesting_stack ||= []\n    args.each { |attribute| build_exposure_for_attribute(attribute, @nesting_stack, options, block) }\nend\n```\n\n20行くらいなのでみんなすぐ理解できますよね（ちなみに私理解できなかったのでこの記事書きながら理解しています）\n\n### Grapeの `expose` のソースコードを適当に理解する\n\n```ruby\ndef self.expose(*args, &block)\n    options = \"引数の *args からオプションをいい感じに整形する\"\n\n    if args.size > 1\n        \"問題あったらエラーだす\"\n    end\n\n    raise ArgumentError, '問題ないよね…？'\n\n    if block_given?\n        \"引数として &block が渡されてるとごにょごにょ\"\n    end\n\n    @documentation = nil\n    @nesting_stack ||= []\n    args.each { |attribute| \"いい感じにゴニョゴニョしてデータ作り出す\" }\nend\n```\n\n正直なんかよくわからないけど `def self.expose(*args, &block)` これの `*args` は `引数はたくさん渡せるよ！`で、 最後の `&block` は `引数の最後にブロック渡せるぜ！！！！` って意味だと思ったらいいと思います。（強引） \n\n※ブロックとは `do end` とか `{}` のことで、ブロックが引数として渡されたのを判定するのは Rubyの `block_given?` というメソッドが使えます。\n\n### Grapeの `expose` の使い方をもう一度見る（3度目）\n\nなので、こちらももう読めるようになったはずです。。\n\n```ruby\nexpose :html, documentation: { type: String, desc: 'html' } do |f|\n    f.body\nend\n```\n\nexposeというメソッドの引数は\n\n1. `:html`\n2. `documentation: { type: String, desc: 'html' })`\n3. `do |f| f.body; end`\n\nの３つで、最後の3つ目はブロック要素として認識されています。\n\n\n```ruby\ndef self.expose(*args, &block)\n    options = merge_options(args.last.is_a?(Hash) ? args.pop : {})\nend\n```\n\nそして、もう一度exposeメソッドを見ると、1と2は(*args)に入って、3のブロックは(&block)に入っていくことがわかります。\n\n`args.last.is_a?(Hash)` は `*args の最後がハッシュなら` という意味ですが、おそらくですが、この `*args` の最後には `documentation` のドキュメントをいれないとエラー起きるような気がします（今回はそこは追わない）\n\n### ブロックが渡されたか判断する (&block)\n\nRubyのメソッドに`block_given?`で渡されたかチェックできます。\n\n```ruby\ndef self.expose(*args, &block)\n    if block_given?\n        \"引数として &block が渡されてるとごにょごにょ\"\n    end\nend\n```\n\nなのでexposeには２つの書き方があります。\n\n```ruby\nclass Status < Grape::Entity\n    expose :style\n    expose :html, documentation: { type: String, desc: 'html' } do |f|\n        f.body\n    end\nend\n```\n\n`do; end;`をつける書き方、何もつけない書き方、どちらも文法的に正しくなるように `expose` は設計されています。\n\n普段なんとなく使っているコードをしっかり追ってみましたが、個人的にはRubyをちゃんと知らなくなんとなく使っているのはエンジニアとして成長するためにもだめだなあと思いました。\n\n[block_given? のドキュメント](https://docs.ruby-lang.org/ja/latest/method/Kernel/m/block_given=3f.html)\n\n\n## Rspecのコードは追わないが作ってみる\n\n### Rspec序文\n\nここまでで `expose` のコードを読んでrubyの使い方への理解が深まったと思います。\n\n次は本題ですが Rspecの `describe` を自分で書いてみようと思います。\n\n```ruby\ndescribe \"xxxをテストする\" do\n  puts \"これで合ってるかな…\"\nend\n```\n\nここまで読んだ読者はもうわかると思いますが、`describe` というメソッドは引数は `（text, block）` テキストとブロックだと判断がつきます。\n\n### Rspec作成編\n\n```ruby\n# encoding: utf-8\n\ndef describe(msg, &block)\n    if block_given?\n        block.call\n    else\n        puts msg\n    end\nend\n\nputs \"~~~~~~~~~~~~~~~~~~~~~~~~~~\"\n\ndescribe \"こちらテストですよ！！！！！！\"\n\n\nputs \"~~~~~~~~~~~~~~~~~~~~~~~~~~\"\n\ndescribe \"こちらテストです\" do\n  puts \"ブロック渡したらどうなるかテスト\"\nend\n\n# 返ってくる値\n#\n# ~~~~~~~~~~~~~~~~~~~~~~~~~~\n# こちらテストですよ！！！！！！\n# ~~~~~~~~~~~~~~~~~~~~~~~~~~\n# ブロック渡したらどうなるかテスト\n\n```\n\n今回作成した `describe` はブロックを渡したかどうかで処理を分岐させてみました。\n\n1. ブロックを渡した場合\n    -  `block_given?` が `true` になる\n    - `block.call`を実行させる\n\n2.  ブロックを渡さない場合\n    -  ただ第一引数で渡したmsgをputsするだけになります。\n\n[Paiza.ioでの動作サンプル](https://paiza.io/projects/e/KB5pPxfpANaqrggZbqLTLQ)\n\nここまで自分で作れるようになったら、Rubyの引数マスターだと思います\n\n### block.call\n\n渡したブロックを実行させられます。\n\n```ruby\nblock.call\n```\n\n### Rspecのソースコードについて\n\nたぶんレポジトリは[こちら](https://github.com/rspec/rspec-rails/)ですが `describe` とかどこで実装されているか正直読んでないです。分かる方は記事を書いてくれると楽しんで読みたいと思うのでコメント欄でお願いします〜〜\n\n## 最後に\n\n自分が普段使っているソースコードを、気になったところだけでもいいので読んで見る。これだけでもOSS使ってるっぽいし（形から入る人）、ドキュメントにしっかりかかれていないこともなんとなく分かるのがすごくいいですね。（今回は `expose` の最後の引数はdocumentじゃね？って考えれたこととか）\n\nRuby詳しいですとは口がさけても言えないので詳しい方PRとかコメント欄でご指導いただけると幸いです。最後まで読んでいただきありがとうございました〜！！\n","coediting":false,"comments_count":2,"created_at":"2018-06-21T09:57:25+09:00","group":null,"id":"b13334dc90df2e2c8c14","likes_count":4,"private":false,"reactions_count":0,"stocks_count":1,"tags":[{"name":"Ruby","versions":[]},{"name":"Rails","versions":[]}],"title":"rspecのdescribeとitを自作する / ついでにGrapeのexposeのソースコードを読む","updated_at":"2019-03-23T13:35:08+09:00","url":"https://qiita.com/ykhirao/items/b13334dc90df2e2c8c14","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"画像から日本の伝統色を取り出してみる\" class=\"fragment\"></span><a href=\"#%E7%94%BB%E5%83%8F%E3%81%8B%E3%82%89%E6%97%A5%E6%9C%AC%E3%81%AE%E4%BC%9D%E7%B5%B1%E8%89%B2%E3%82%92%E5%8F%96%E3%82%8A%E5%87%BA%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>画像から日本の伝統色を取り出してみる</h1>\n\n<h2>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h2>\n\n<p>こんにちわ、僕です。</p>\n\n<p>今回は画像の中で専有している色を取り出す既存の <code>rgbaster.js</code> と、今回自分が作った <code>traditionalColors.js</code> を組み合わせてWebアプリを作ってみます。</p>\n\n<h2>\n<span id=\"成果物\" class=\"fragment\"></span><a href=\"#%E6%88%90%E6%9E%9C%E7%89%A9\"><i class=\"fa fa-link\"></i></a>成果物</h2>\n\n<p>イメージは以下にスクリーンショットを貼り付けましたが、画像の中の専有している色に近い「日本の伝統色」を返すという感じのWebアプリです。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/c9443d17f82b3e0d7ba9e172596f758be3c38ef0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65376230336633322d623739642d363762362d646530352d6130643933656335636531322e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1188\" alt=\"スクリーンショット 2018-05-25 23.02.17.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe7b03f32-b79d-67b6-de05-a0d93ec5ce12.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=426f11cc660079fff8500c65b1fe46f6\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e7b03f32-b79d-67b6-de05-a0d93ec5ce12.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe7b03f32-b79d-67b6-de05-a0d93ec5ce12.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8ac1a5ed6d35d95c998610eda7431794 1x\" loading=\"lazy\"></a></p>\n\n<p>実際に動作する環境はこちらの<a href=\"https://ykhirao.github.io/traditional-color/\" rel=\"nofollow noopener\" target=\"_blank\">GitHub.io</a>からどうぞ！！</p>\n\n<p>「ファイルを選択」をクリックして適当な画像をブラウザにあげてみてください。そうするとJS/Canvasがごりごり動き出して色を判定してくれるはずです。</p>\n\n<h2>\n<span id=\"成果物2\" class=\"fragment\"></span><a href=\"#%E6%88%90%E6%9E%9C%E7%89%A92\"><i class=\"fa fa-link\"></i></a>成果物2</h2>\n\n<p>イメージは以下にスクリーンショットを貼り付けましたがカラーピッカーを立ち上げて色を入力すると伝統色を返すWebアプリです。どうぞ遊んでみてください。 <a href=\"https://ykhirao.github.io/traditional-color/src/index.html\" rel=\"nofollow noopener\" target=\"_blank\">GitHub.io</a> クリックできるのは上のほうのカラーピッカーだけです！</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/7f666dd8bafaf5c952df14be3c00c5b9e54a3e3b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f64313666323437342d383963662d333562302d666339652d3230646335393362386437322e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"681\" alt=\"スクリーンショット 2018-05-26 0.20.00.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fd16f2474-89cf-35b0-fc9e-20dc593b8d72.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bc5b297633926bf04df246ef2c007c4a\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/d16f2474-89cf-35b0-fc9e-20dc593b8d72.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fd16f2474-89cf-35b0-fc9e-20dc593b8d72.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2d8c2343a16ba5a71a4b39ef0120d3fa 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"コード的な話\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E7%9A%84%E3%81%AA%E8%A9%B1\"><i class=\"fa fa-link\"></i></a>コード的な話</h2>\n\n<p>コードは <a href=\"https://github.com/ykhirao/traditional-color/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/ykhirao/traditional-color/</a> です。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">traditionalColor.js</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"p\">;(</span><span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nb\">window</span><span class=\"p\">,</span> <span class=\"kc\">undefined</span><span class=\"p\">){</span>\n  <span class=\"dl\">\"</span><span class=\"s2\">use strict</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n\n  <span class=\"kd\">class</span> <span class=\"nx\">TraditionalColors</span> <span class=\"p\">{</span>\n    <span class=\"kd\">constructor</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n      <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">TraditionalColors is roaded !!!</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">colors</span> <span class=\"o\">=</span> <span class=\"p\">[]</span> <span class=\"c1\">// 本当はここに伝統色のJSONが入っている</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"nx\">distance3D</span><span class=\"p\">(</span><span class=\"nx\">a</span><span class=\"p\">,</span> <span class=\"nx\">b</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"k\">return</span> <span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nx\">sqrt</span><span class=\"p\">((</span><span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nx\">pow</span><span class=\"p\">((</span><span class=\"nx\">a</span><span class=\"p\">.</span><span class=\"nx\">r</span> <span class=\"o\">-</span> <span class=\"nx\">b</span><span class=\"p\">.</span><span class=\"nx\">r</span><span class=\"p\">),</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nx\">pow</span><span class=\"p\">((</span><span class=\"nx\">a</span><span class=\"p\">.</span><span class=\"nx\">g</span> <span class=\"o\">-</span> <span class=\"nx\">b</span><span class=\"p\">.</span><span class=\"nx\">g</span><span class=\"p\">),</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nx\">pow</span><span class=\"p\">((</span><span class=\"nx\">a</span><span class=\"p\">.</span><span class=\"nx\">b</span> <span class=\"o\">-</span> <span class=\"nx\">b</span><span class=\"p\">.</span><span class=\"nx\">b</span><span class=\"p\">),</span> <span class=\"mi\">2</span><span class=\"p\">)));</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"nx\">regExpToRgb</span><span class=\"p\">(</span><span class=\"nx\">result</span><span class=\"p\">,</span> <span class=\"nx\">decimal</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"kd\">const</span> <span class=\"nx\">r</span> <span class=\"o\">=</span> <span class=\"nb\">parseInt</span><span class=\"p\">(</span><span class=\"nx\">result</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"nx\">decimal</span><span class=\"p\">)</span>\n      <span class=\"kd\">const</span> <span class=\"nx\">g</span> <span class=\"o\">=</span> <span class=\"nb\">parseInt</span><span class=\"p\">(</span><span class=\"nx\">result</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"nx\">decimal</span><span class=\"p\">)</span>\n      <span class=\"kd\">const</span> <span class=\"nx\">b</span> <span class=\"o\">=</span> <span class=\"nb\">parseInt</span><span class=\"p\">(</span><span class=\"nx\">result</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"nx\">decimal</span><span class=\"p\">)</span>\n      <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"nx\">r</span><span class=\"p\">,</span> <span class=\"nx\">g</span><span class=\"p\">,</span> <span class=\"nx\">b</span><span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"nx\">rgbStrToObj</span><span class=\"p\">(</span><span class=\"nx\">str</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"c1\">// from text \"rgb(4,8,16)\" to obj { r: 4, g: 8, a:16 }</span>\n      <span class=\"kd\">var</span> <span class=\"nx\">result</span> <span class=\"o\">=</span> <span class=\"sr\">/</span><span class=\"se\">([</span><span class=\"sr\">0-9</span><span class=\"se\">]{1,3})</span><span class=\"sr\">,</span><span class=\"se\">([</span><span class=\"sr\">0-9</span><span class=\"se\">]{1,3})</span><span class=\"sr\">,</span><span class=\"se\">([</span><span class=\"sr\">0-9</span><span class=\"se\">]{1,3})</span><span class=\"sr\">/i</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"nx\">str</span><span class=\"p\">);</span>\n      <span class=\"k\">return</span> <span class=\"nx\">result</span> <span class=\"p\">?</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">regExpToRgb</span><span class=\"p\">(</span><span class=\"nx\">result</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"nx\">hexToRgbObj</span><span class=\"p\">(</span><span class=\"nx\">str</span><span class=\"p\">){</span>\n      <span class=\"c1\">// \"#1234aa\" to { r: 12, g: 34, a: aa }</span>\n      <span class=\"kd\">var</span> <span class=\"nx\">result</span> <span class=\"o\">=</span> <span class=\"sr\">/</span><span class=\"se\">([</span><span class=\"sr\">a-zA-Z0-9</span><span class=\"se\">]{2})([</span><span class=\"sr\">a-zA-Z0-9</span><span class=\"se\">]{2})([</span><span class=\"sr\">a-zA-Z0-9</span><span class=\"se\">]{2})</span><span class=\"sr\">/i</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"nx\">str</span><span class=\"p\">);</span>\n      <span class=\"k\">return</span> <span class=\"nx\">result</span> <span class=\"p\">?</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">regExpToRgb</span><span class=\"p\">(</span><span class=\"nx\">result</span><span class=\"p\">,</span> <span class=\"mi\">16</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"nx\">getNearColor</span><span class=\"p\">(</span><span class=\"nx\">rgb</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"kd\">let</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span>\n        <span class=\"nx\">approximationIndex</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span>\n        <span class=\"nx\">minDiff</span> <span class=\"o\">=</span> <span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nx\">abs</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">distance3D</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">colors</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">rgb</span><span class=\"p\">,</span> <span class=\"nx\">rgb</span><span class=\"p\">)),</span>\n        <span class=\"nx\">diff</span><span class=\"p\">;</span>\n\n      <span class=\"k\">while</span> <span class=\"p\">(</span><span class=\"o\">++</span><span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">colors</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"nx\">diff</span> <span class=\"o\">=</span> <span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nx\">abs</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">distance3D</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">colors</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">rgb</span><span class=\"p\">,</span> <span class=\"nx\">rgb</span><span class=\"p\">));</span>\n\n        <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">diff</span> <span class=\"o\">&lt;</span> <span class=\"nx\">minDiff</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n          <span class=\"nx\">minDiff</span> <span class=\"o\">=</span> <span class=\"nx\">diff</span><span class=\"p\">;</span>\n          <span class=\"nx\">approximationIndex</span> <span class=\"o\">=</span> <span class=\"nx\">i</span><span class=\"p\">;</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">}</span>\n      <span class=\"k\">return</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">colors</span><span class=\"p\">[</span><span class=\"nx\">approximationIndex</span><span class=\"p\">];</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"nb\">window</span><span class=\"p\">.</span><span class=\"nx\">TraditionalColors</span> <span class=\"o\">=</span> <span class=\"nb\">window</span><span class=\"p\">.</span><span class=\"nx\">TraditionalColors</span> <span class=\"o\">||</span> <span class=\"nx\">TraditionalColors</span><span class=\"p\">;</span>\n<span class=\"p\">})(</span><span class=\"nb\">window</span><span class=\"p\">);</span>\n</code></pre></div>\n</div>\n\n<p>以上がtraditionalColors.jsですが、見てわかるように大したことはしていません。すべての伝統色との距離測って近いのを返却しているだけです。</p>\n\n<p>使い方は</p>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">index.html</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"./traditionalColors.js\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span> |\n<span class=\"nt\">&lt;script&gt;</span>\n  <span class=\"kd\">const</span> <span class=\"nx\">tc</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">window</span><span class=\"p\">.</span><span class=\"nx\">TraditionalColors</span><span class=\"p\">();</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">tc</span><span class=\"p\">.</span><span class=\"nx\">getNearColor</span><span class=\"p\">({</span><span class=\"na\">r</span><span class=\"p\">:</span> <span class=\"mi\">14</span><span class=\"p\">,</span> <span class=\"na\">g</span><span class=\"p\">:</span> <span class=\"mi\">12</span><span class=\"p\">,</span> <span class=\"na\">b</span><span class=\"p\">:</span> <span class=\"mi\">243</span><span class=\"p\">}))</span>\n<span class=\"nt\">&lt;/script&gt;</span>\n</code></pre></div>\n</div>\n\n<p>的な感じで、インスタンス変数を作ってメソッドを呼びせばいろいろ使えます。さくっと簡単なお遊びで作ったのですが、写真が趣味な人からすると結構楽しかったりします。</p>\n\n<h2>\n<span id=\"終わりに\" class=\"fragment\"></span><a href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>終わりに</h2>\n\n<p>rgbaster.js のソースコードを読むのは簡単でしたのでぜひ読んでみるといいかと思います。canvasの使い方も学べました。</p>\n\n<h2>\n<span id=\"参考\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83\"><i class=\"fa fa-link\"></i></a>参考</h2>\n\n<p><a href=\"http://liginc.co.jp/web/js/other-js/130257\" rel=\"nofollow noopener\" target=\"_blank\">rgbaster.jsを使って画像の色を抽出してみよう | 株式会社LIG</a></p>\n","body":"# 画像から日本の伝統色を取り出してみる\n\n## はじめに\n\nこんにちわ、僕です。\n\n今回は画像の中で専有している色を取り出す既存の `rgbaster.js` と、今回自分が作った `traditionalColors.js` を組み合わせてWebアプリを作ってみます。\n\n## 成果物\n\nイメージは以下にスクリーンショットを貼り付けましたが、画像の中の専有している色に近い「日本の伝統色」を返すという感じのWebアプリです。\n\n<img width=\"1188\" alt=\"スクリーンショット 2018-05-25 23.02.17.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e7b03f32-b79d-67b6-de05-a0d93ec5ce12.jpeg\">\n\n実際に動作する環境はこちらの[GitHub.io](https://ykhirao.github.io/traditional-color/)からどうぞ！！\n\n「ファイルを選択」をクリックして適当な画像をブラウザにあげてみてください。そうするとJS/Canvasがごりごり動き出して色を判定してくれるはずです。\n\n## 成果物2\n\nイメージは以下にスクリーンショットを貼り付けましたがカラーピッカーを立ち上げて色を入力すると伝統色を返すWebアプリです。どうぞ遊んでみてください。 [GitHub.io](https://ykhirao.github.io/traditional-color/src/index.html) クリックできるのは上のほうのカラーピッカーだけです！\n\n<img width=\"681\" alt=\"スクリーンショット 2018-05-26 0.20.00.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/d16f2474-89cf-35b0-fc9e-20dc593b8d72.jpeg\">\n\n## コード的な話\n\nコードは https://github.com/ykhirao/traditional-color/ です。\n\n```traditionalColor.js\n\n;(function(window, undefined){\n  \"use strict\";\n\n  class TraditionalColors {\n    constructor() {\n      console.log(\"TraditionalColors is roaded !!!\");\n      this.colors = [] // 本当はここに伝統色のJSONが入っている\n    }\n\n    distance3D(a, b) {\n      return Math.sqrt((Math.pow((a.r - b.r), 2) + Math.pow((a.g - b.g), 2) + Math.pow((a.b - b.b), 2)));\n    }\n\n    regExpToRgb(result, decimal=10) {\n      const r = parseInt(result[1], decimal)\n      const g = parseInt(result[2], decimal)\n      const b = parseInt(result[3], decimal)\n      return {r, g, b}\n    }\n\n    rgbStrToObj(str) {\n      // from text \"rgb(4,8,16)\" to obj { r: 4, g: 8, a:16 }\n      var result = /([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3})/i.exec(str);\n      return result ? this.regExpToRgb(result) : null;\n    }\n\n    hexToRgbObj(str){\n      // \"#1234aa\" to { r: 12, g: 34, a: aa }\n      var result = /([a-zA-Z0-9]{2})([a-zA-Z0-9]{2})([a-zA-Z0-9]{2})/i.exec(str);\n      return result ? this.regExpToRgb(result, 16) : null;\n    }\n\n    getNearColor(rgb) {\n      let i = 0,\n        approximationIndex = 0,\n        minDiff = Math.abs(this.distance3D(this.colors[0].rgb, rgb)),\n        diff;\n\n      while (++i < this.colors.length) {\n        diff = Math.abs(this.distance3D(this.colors[i].rgb, rgb));\n\n        if (diff < minDiff) {\n          minDiff = diff;\n          approximationIndex = i;\n        }\n      }\n      return this.colors[approximationIndex];\n    }\n  }\n\n  window.TraditionalColors = window.TraditionalColors || TraditionalColors;\n})(window);\n```\n\n以上がtraditionalColors.jsですが、見てわかるように大したことはしていません。すべての伝統色との距離測って近いのを返却しているだけです。\n\n使い方は\n\n```index.html\n<script src=\"./traditionalColors.js\"></script> |\n<script>\n  const tc = new window.TraditionalColors();\n  console.log(tc.getNearColor({r: 14, g: 12, b: 243}))\n</script>\n```\n\n的な感じで、インスタンス変数を作ってメソッドを呼びせばいろいろ使えます。さくっと簡単なお遊びで作ったのですが、写真が趣味な人からすると結構楽しかったりします。\n\n## 終わりに\n\nrgbaster.js のソースコードを読むのは簡単でしたのでぜひ読んでみるといいかと思います。canvasの使い方も学べました。\n\n## 参考\n\n[rgbaster.jsを使って画像の色を抽出してみよう | 株式会社LIG](http://liginc.co.jp/web/js/other-js/130257)\n","coediting":false,"comments_count":0,"created_at":"2018-05-28T09:59:14+09:00","group":null,"id":"58f7aa3888ada78c1a4c","likes_count":13,"private":false,"reactions_count":0,"stocks_count":6,"tags":[{"name":"JavaScript","versions":[]},{"name":"JSON","versions":[]},{"name":"canvas","versions":[]}],"title":"画像から日本の伝統色を取り出してみるライブラリ作った","updated_at":"2018-05-28T09:59:29+09:00","url":"https://qiita.com/ykhirao/items/58f7aa3888ada78c1a4c","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"vue-meetupでテスト書いている人が少なかったのでオレオレテストを晒してみる-part-1\" class=\"fragment\"></span><a href=\"#vue-meetup%E3%81%A7%E3%83%86%E3%82%B9%E3%83%88%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%84%E3%82%8B%E4%BA%BA%E3%81%8C%E5%B0%91%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%AE%E3%81%A7%E3%82%AA%E3%83%AC%E3%82%AA%E3%83%AC%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E6%99%92%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B-part-1\"><i class=\"fa fa-link\"></i></a>Vue meetupでテスト書いている人が少なかったのでオレオレテストを晒してみる Part. 1</h1>\n\n<p><a href=\"http://blog.hde.co.jp/entry/2018/03/05/130121\" rel=\"nofollow noopener\" target=\"_blank\">Vue.js ではじめるシングルページアプリケーションの開発 - HDE BLOG</a></p>\n\n<p>みなさん Vue.js Tokyo v-meetup #7 お疲れ様でした！！kazuponさんを始めスタッフのおかげで、100人くらいの募集に300人近くの募集が来て、当日は98%(くらい?)の参加率という異例の盛り上がりを見せているVue.js界隈でしたね！！！</p>\n\n<p>当日の様子はkazuponさんがとぅぎゃったー(?)でまとめているので楽しそうな雰囲気が伝わるかと思います。</p>\n\n<blockquote class=\"twitter-tweet\">\n<p>「Vue.js v-meetup #7 のTweets まとめ」をトゥギャりました。 <a href=\"https://t.co/pBeur6B9z1\" rel=\"nofollow noopener\" target=\"_blank\">https://t.co/pBeur6B9z1</a></p>— 🐤kazupon🐤 (@kazu_pon) <a href=\"https://twitter.com/kazu_pon/status/999449269722468352?ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\">2018年5月24日</a>\n</blockquote>\n\n<script async src=\"https://platform.twitter.com/widgets.js\"></script>\n\n<p>テストユーザーとして個人的に一番大好きなLTははりぼてさんのSnapshotによるSVGのテスト [SVG makes your components to testable ] です！！！（私のアイコンはAutocordに対して、はりぼてさんはハッセルで好感度Maxでした）</p>\n\n<p>ただそのときのLTで「私テストやってます」って自信持って手をあげている人が少なかったのが印象的でした😇</p>\n\n<p>なのでVueで簡単なテストのサンプルを書いていくので時間ある方はちょっとずつテストいれていきましょう！！！</p>\n\n<blockquote>\n<p>twadaがよく引用するやつを引用しておく（二重引用）</p>\n\n<p>テストを書く時間がないのではなく、テストを書かないから時間がなくなるのです。 </p>\n\n<p>by <a href=\"https://twitter.com/jwgrenning\" rel=\"nofollow noopener\" target=\"_blank\">James Grenning(@jwgrenning) | Twitter</a></p>\n</blockquote>\n\n<h2>\n<span id=\"環境とアプリの構築\" class=\"fragment\"></span><a href=\"#%E7%92%B0%E5%A2%83%E3%81%A8%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E6%A7%8B%E7%AF%89\"><i class=\"fa fa-link\"></i></a>環境とアプリの構築</h2>\n\n<p>とりあえずこの段階で必要なものは</p>\n\n<ul>\n<li>node</li>\n<li>npm</li>\n<li>vue-cli\n\n<ul>\n<li><code>sudo npm install -g vue-cli</code></li>\n</ul>\n</li>\n</ul>\n\n<p>とします。</p>\n\n<p>バージョン確認（なかったら必要に応じてインストールしてください。）</p>\n\n<div class=\"code-frame\" data-lang=\"console\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>node <span class=\"nt\">-v</span>\n<span class=\"go\">v10.1.0\n</span><span class=\"gp\">$</span><span class=\"w\"> </span>npm <span class=\"nt\">-v</span>\n<span class=\"go\">5.6.0\n</span><span class=\"gp\">$</span><span class=\"w\"> </span>vue <span class=\"nt\">-V</span>\n<span class=\"go\">2.9.3\n</span></code></pre></div></div>\n\n<p>次はVueアプリの作成</p>\n\n<div class=\"code-frame\" data-lang=\"console\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>vue init webpack-simple vue-test-sample\n<span class=\"gp\">#</span><span class=\"w\"> </span>この後とりあえず全部Enterでもいいかと思います。\n</code></pre></div></div>\n\n<p><code>To get started:</code> とメッセージが出てくるので、その指示に従って以下のコマンドを打ちます。</p>\n\n<div class=\"code-frame\" data-lang=\"console\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span><span class=\"nb\">cd </span>vue-test-sample\n<span class=\"gp\">$</span><span class=\"w\"> </span>npm <span class=\"nb\">install</span>\n<span class=\"gp\">$</span><span class=\"w\"> </span>npm run dev\n</code></pre></div></div>\n\n<p><a href=\"https://camo.qiitausercontent.com/4d8a26a86ba05344228f1cc3d3e6576fc3a8dbb3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65316237346161392d336564332d373266322d356331622d3061356136313434646462342e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1131\" alt=\"スクリーンショット 2018-05-25 0.04.10.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe1b74aa9-3ed3-72f2-5c1b-0a5a6144ddb4.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=de5edb4799d0d660269cfcb65c65e2bd\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e1b74aa9-3ed3-72f2-5c1b-0a5a6144ddb4.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe1b74aa9-3ed3-72f2-5c1b-0a5a6144ddb4.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=618d3157b2e907401c1c8108a7459c8d 1x\" loading=\"lazy\"></a></p>\n\n<p>サンプルアプリケーションが立ち上がりましたのですぐに <code>vue-test-utils</code> と <code>jest</code> とかの必要なパッケージを入れましょう！</p>\n\n<p>この<a href=\"https://vue-test-utils.vuejs.org/ja/guides/#jest-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%9F%E5%8D%98%E4%B8%80%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88\" rel=\"nofollow noopener\" target=\"_blank\">Jest を使用した単一ファイルコンポーネントのテスト</a>を見ながらやるといれれます。</p>\n\n<div class=\"code-frame\" data-lang=\"shell\"><div class=\"highlight\"><pre><code>npm <span class=\"nb\">install</span> <span class=\"nt\">--save-dev</span> jest @vue/test-utils vue-jest babel-jest jest-serializer-vue\n</code></pre></div></div>\n\n<p>vue-test-utilsのドキュメント <a href=\"https://vue-test-utils.vuejs.org/ja/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://vue-test-utils.vuejs.org/ja/</a></p>\n\n<blockquote>\n<p>Jestは、テスト対象のコードのすぐ隣に<strong>tests</strong>ディレクトリを作成することを推奨していますが、適切にテストを構造化することは自由です。 Jestがスナップショットテストを実行するテストファイルの隣に<strong>snapshots</strong>ディレクトリを作成することに注意してください。</p>\n</blockquote>\n\n<p><code>App.vue</code> をテストする場合は同じ階層に <code>__tests__</code> というフォルダを作ってそこにテストを入れるのが一般的です。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>$ tree\n├── package-lock.json\n├── package.json\n├── src\n│   ├── App.vue\n│   ├── __tests__\n│   ├── assets\n│   └── main.js\n└── webpack.config.js\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>$ cd src\n$ tree -L 2\n.\n├── App.vue\n├── __tests__\n│   └── App.test.js\n\n</code></pre></div></div>\n\n<p>こんな感じで <code>App.test.js</code> ファイルを作成します。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">App.test.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">describe</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">Counter</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n\n  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">run test !!!!!!!!!</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">).</span><span class=\"nx\">toBe</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p>ここでgitの差分だけHot reloadでテストしてくれるやり方を紹介すると</p>\n\n<div class=\"code-frame\" data-lang=\"console\"><div class=\"highlight\"><pre><code><span class=\"gp\">$</span><span class=\"w\"> </span>git add <span class=\"nb\">.</span>\n<span class=\"gp\">$</span><span class=\"w\"> </span>git commit <span class=\"nt\">-m</span> <span class=\"s2\">\"Init vue-test-app\"</span>\n<span class=\"gp\">#</span><span class=\"w\"> </span>App.test.jsファイルを編集する <span class=\"o\">(</span>空白文字とかでもよし<span class=\"o\">)</span>\n<span class=\"gp\">$</span><span class=\"w\"> </span>yarn jest <span class=\"nt\">--watch</span>\n<span class=\"gp\">#</span><span class=\"w\"> </span>npmだと <span class=\"nt\">--watch</span>が動かないキガスル\n</code></pre></div></div>\n\n<p>最初は <code>› Press Enter to trigger a test run.</code> と出てるので<code>Enter</code>を押してあげてください。そうするとこんな感じで差分があるファイルだけ永遠とテストしてくれるので便利です。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/b5af18b77e7d044e46a94da4ec0579bebf6b484b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f37643961663837662d653036652d343836622d333364612d6438306265313666663161372e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"787\" alt=\"スクリーンショット 2018-05-25 1.51.06.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F7d9af87f-e06e-486b-33da-d80be16ff1a7.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8ad6510e2a3a944db1039d01e2534335\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/7d9af87f-e06e-486b-33da-d80be16ff1a7.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F7d9af87f-e06e-486b-33da-d80be16ff1a7.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bc64df1ddb98e92bb7f81e08560c75ac 1x\" loading=\"lazy\"></a></p>\n\n<p>とりあえず一旦ここまでにしますがテスト導入お疲れ様でした〜！！！！</p>\n\n<p>少しずつテスト増やしていけるチーム作っていきたいですね〜！！</p>\n\n<h2>\n<span id=\"snapshotテストを追加してみるマークアップを保存して差分を見れくれる\" class=\"fragment\"></span><a href=\"#snapshot%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B%E3%83%9E%E3%83%BC%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97%E3%82%92%E4%BF%9D%E5%AD%98%E3%81%97%E3%81%A6%E5%B7%AE%E5%88%86%E3%82%92%E8%A6%8B%E3%82%8C%E3%81%8F%E3%82%8C%E3%82%8B\"><i class=\"fa fa-link\"></i></a>snapshotテストを追加してみる（マークアップを保存して差分を見れくれる）</h2>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">App.test.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">shallowMount</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">@vue/test-utils</span><span class=\"dl\">'</span>\n<span class=\"k\">import</span> <span class=\"nx\">App</span> <span class=\"k\">from</span> <span class=\"dl\">'</span><span class=\"s1\">../App.vue</span><span class=\"dl\">'</span>\n\n<span class=\"nx\">describe</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">App.vue</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">it</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">renders the correct markup</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">app</span> <span class=\"o\">=</span> <span class=\"nx\">shallowMount</span><span class=\"p\">(</span><span class=\"nx\">App</span><span class=\"p\">)</span>\n\n    <span class=\"nx\">expect</span><span class=\"p\">(</span><span class=\"nx\">app</span><span class=\"p\">).</span><span class=\"nx\">toMatchSnapshot</span><span class=\"p\">()</span> <span class=\"c1\">// これだけでスナップショットが作成されます！！！簡単！！</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">})</span>\n</code></pre></div>\n</div>\n\n<p><code>__snapshots__</code> フォルダが作成されています。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">yk:vue-test-sample yk$</span><span class=\"w\"> </span><span class=\"nb\">cd </span>src/\n<span class=\"gp\">yk:src yk$</span><span class=\"w\"> </span>tree <span class=\"nt\">-L</span> 2\n<span class=\"c\">.\n</span><span class=\"go\">├── App.vue\n├── __tests__\n│   ├── App.test.js\n│   └── __snapshots__\n├── assets\n│   └── logo.png\n└── main.js\n\n</span></code></pre></div></div>\n\n<p>これをしておくと</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/ae05aa1c1e88b7f003c2281e3b591775f57eb503/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f36396264663438302d316433642d393839342d373837662d3363333764366435616161642e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1061\" alt=\"スクリーンショット 2018-05-25 2.08.30.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F69bdf480-1d3d-9894-787f-3c37d6d5aaad.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ce0cf925cc5ef3b8c1ece5d399c1383c\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/69bdf480-1d3d-9894-787f-3c37d6d5aaad.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F69bdf480-1d3d-9894-787f-3c37d6d5aaad.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=beb507f5bc185acadf79bb44b412ea83 1x\" loading=\"lazy\"></a></p>\n\n<p>予期せぬときに <code>文字を赤色にしちゃった</code> 的な意図せぬ変更が検知できます。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;li&gt;&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"https://vuejs.org\"</span> <span class=\"na\">style=</span><span class=\"s\">\"color:red;\"</span> <span class=\"na\">target=</span><span class=\"s\">\"_blank\"</span><span class=\"nt\">&gt;</span>Core Docs<span class=\"nt\">&lt;/a&gt;&lt;/li&gt;</span>\n</code></pre></div></div>\n\n<p><code>style=\"color:red;\"</code>に反応して</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/35319b8ffa2dc3e7ac705f5614643c64ece15d0b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65323631393064662d343537622d393733342d333561342d6561363764313562633433322e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"420\" alt=\"スクリーンショット 2018-05-25 2.11.07.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe26190df-457b-9734-35a4-ea67d15bc432.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=aa13fd3809c2a42982ef0e89a56506aa\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e26190df-457b-9734-35a4-ea67d15bc432.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe26190df-457b-9734-35a4-ea67d15bc432.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=32fd6328d6ac0bb260a3c64355aa951e 1x\" loading=\"lazy\"></a></p>\n\n<p>差分を検知して <code>色が赤になってるけど大丈夫？</code> って聞いてくれます！便利！！</p>\n\n<p>もちろんマークアップの上書きも簡単で</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\"> › 1 snapshot test failed in 1 test suite. Inspect your code changes or press `u` to update them.\n</span></code></pre></div></div>\n\n<p>言葉の通り <code>u</code> を押すだけです。そしたらAll green testになります〜</p>\n\n<h2>\n<span id=\"スナップショットを導入するとき弊社の場合\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%83%8A%E3%83%83%E3%83%97%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%E3%82%92%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E5%BC%8A%E7%A4%BE%E3%81%AE%E5%A0%B4%E5%90%88\"><i class=\"fa fa-link\"></i></a>スナップショットを導入するとき（弊社の場合）</h2>\n\n<p>参考になるかまったくわからないのですが（macのプレビューでやっつけで作った図）</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/d43a47a569b9ee69b88144f447a57632207e22fb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f32653331343038312d343935382d623062382d653937382d3037386664633130333064622e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1061\" alt=\"スクリーンショット 2018-05-25 2.08.30.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F2e314081-4958-b0b8-e978-078fdc1030db.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=87869ec5747a589d3f3aa1dce93d3eec\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/2e314081-4958-b0b8-e978-078fdc1030db.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F2e314081-4958-b0b8-e978-078fdc1030db.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=21d99593c1014262421ef5bdbd0defbb 1x\" loading=\"lazy\"></a></p>\n\n<ul>\n<li>componentsをまとめているcontainer的な要素はsnapshot取らなかったりします\n\n<ul>\n<li>代わりにロジックのテストはしっかり書きます</li>\n</ul>\n</li>\n<li>containerの中の更に小さいcomponentsはpropsを渡す、もしくはemitするだけの構成にして、Snapshotメインのテストを書いたりします\n\n<ul>\n<li>親からのpropsは<code>propsData</code>的なので簡単にstubsを作れるので楽です〜</li>\n</ul>\n</li>\n</ul>\n\n<p>弊社はロジック層とビュー層を意識的に分けてテストしていますが、他にも会社やチームで最適なテストの書き方を見つけるといいかと思います。Rspecとかの歴史にくらべてフロントエンドのテストはまだ歴史も浅く、ベスト・プラクティスが少なめ（ベタープラクティス?）なので、良い書き方・知恵があれば、みなさんQiitaとかに投稿して知見ためていきましょう〜〜</p>\n\n<h2>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n\n<ul>\n<li>vue-test-utils使ってみよう！！</li>\n<li>Snapshotはマークアップの意図しない変更をキャッチしてくれるよ！！</li>\n<li>テストは文化である。文化は時間をかけて醸造していくものである。</li>\n</ul>\n\n<p>以上。読んでくれてありがとうございました〜〜！！！</p>\n\n<p>p.s. 最近Meetupのときつぶやきたいがためにツイッターを始めたのでフォローしろください（ <a href=\"https://twitter.com/yk_hirao\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://twitter.com/yk_hirao</a> ）</p>\n","body":"# Vue meetupでテスト書いている人が少なかったのでオレオレテストを晒してみる Part. 1\n\n[Vue.js ではじめるシングルページアプリケーションの開発 - HDE BLOG](http://blog.hde.co.jp/entry/2018/03/05/130121)\n\nみなさん Vue.js Tokyo v-meetup #7 お疲れ様でした！！kazuponさんを始めスタッフのおかげで、100人くらいの募集に300人近くの募集が来て、当日は98%(くらい?)の参加率という異例の盛り上がりを見せているVue.js界隈でしたね！！！\n\n当日の様子はkazuponさんがとぅぎゃったー(?)でまとめているので楽しそうな雰囲気が伝わるかと思います。\n\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">「Vue.js v-meetup #7 のTweets まとめ」をトゥギャりました。 <a href=\"https://t.co/pBeur6B9z1\">https://t.co/pBeur6B9z1</a></p>&mdash; 🐤kazupon🐤 (@kazu_pon) <a href=\"https://twitter.com/kazu_pon/status/999449269722468352?ref_src=twsrc%5Etfw\">2018年5月24日</a></blockquote>\n<script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n\nテストユーザーとして個人的に一番大好きなLTははりぼてさんのSnapshotによるSVGのテスト [SVG makes your components to testable ] です！！！（私のアイコンはAutocordに対して、はりぼてさんはハッセルで好感度Maxでした）\n\nただそのときのLTで「私テストやってます」って自信持って手をあげている人が少なかったのが印象的でした😇\n\nなのでVueで簡単なテストのサンプルを書いていくので時間ある方はちょっとずつテストいれていきましょう！！！\n\n> twadaがよく引用するやつを引用しておく（二重引用）\n> \n> テストを書く時間がないのではなく、テストを書かないから時間がなくなるのです。 \n> \n> by [James Grenning(@jwgrenning) | Twitter](https://twitter.com/jwgrenning)\n\n## 環境とアプリの構築\n\nとりあえずこの段階で必要なものは\n\n- node\n- npm\n- vue-cli\n  - `sudo npm install -g vue-cli`\n\nとします。\n\nバージョン確認（なかったら必要に応じてインストールしてください。）\n\n```console\n$ node -v\nv10.1.0\n$ npm -v\n5.6.0\n$ vue -V\n2.9.3\n```\n\n次はVueアプリの作成\n\n```console\n$ vue init webpack-simple vue-test-sample\n# この後とりあえず全部Enterでもいいかと思います。\n```\n\n`To get started:` とメッセージが出てくるので、その指示に従って以下のコマンドを打ちます。\n\n```console\n$ cd vue-test-sample\n$ npm install\n$ npm run dev\n```\n\n<img width=\"1131\" alt=\"スクリーンショット 2018-05-25 0.04.10.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e1b74aa9-3ed3-72f2-5c1b-0a5a6144ddb4.jpeg\">\n\nサンプルアプリケーションが立ち上がりましたのですぐに `vue-test-utils` と `jest` とかの必要なパッケージを入れましょう！\n\nこの[Jest を使用した単一ファイルコンポーネントのテスト](https://vue-test-utils.vuejs.org/ja/guides/#jest-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%9F%E5%8D%98%E4%B8%80%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88)を見ながらやるといれれます。\n\n```shell\nnpm install --save-dev jest @vue/test-utils vue-jest babel-jest jest-serializer-vue\n```\n\nvue-test-utilsのドキュメント https://vue-test-utils.vuejs.org/ja/\n\n> Jestは、テスト対象のコードのすぐ隣に__tests__ディレクトリを作成することを推奨していますが、適切にテストを構造化することは自由です。 Jestがスナップショットテストを実行するテストファイルの隣に__snapshots__ディレクトリを作成することに注意してください。\n\n`App.vue` をテストする場合は同じ階層に `__tests__` というフォルダを作ってそこにテストを入れるのが一般的です。\n\n```\n$ tree\n├── package-lock.json\n├── package.json\n├── src\n│   ├── App.vue\n│   ├── __tests__\n│   ├── assets\n│   └── main.js\n└── webpack.config.js\n```\n\n```\n$ cd src\n$ tree -L 2\n.\n├── App.vue\n├── __tests__\n│   └── App.test.js\n\n```\n\nこんな感じで `App.test.js` ファイルを作成します。\n\n```App.test.js\ndescribe('Counter', () => {\n\n  it('run test !!!!!!!!!', () => {\n    expect(1).toBe(1)\n  })\n})\n```\n\nここでgitの差分だけHot reloadでテストしてくれるやり方を紹介すると\n\n```console\n$ git add .\n$ git commit -m \"Init vue-test-app\"\n# App.test.jsファイルを編集する (空白文字とかでもよし)\n$ yarn jest --watch\n# npmだと --watchが動かないキガスル\n```\n\n最初は `› Press Enter to trigger a test run.` と出てるので`Enter`を押してあげてください。そうするとこんな感じで差分があるファイルだけ永遠とテストしてくれるので便利です。\n\n<img width=\"787\" alt=\"スクリーンショット 2018-05-25 1.51.06.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/7d9af87f-e06e-486b-33da-d80be16ff1a7.jpeg\">\n\n\nとりあえず一旦ここまでにしますがテスト導入お疲れ様でした〜！！！！\n\n少しずつテスト増やしていけるチーム作っていきたいですね〜！！\n\n## snapshotテストを追加してみる（マークアップを保存して差分を見れくれる）\n\n```App.test.js\nimport { shallowMount } from '@vue/test-utils'\nimport App from '../App.vue'\n\ndescribe('App.vue', () => {\n  it('renders the correct markup', () => {\n    const app = shallowMount(App)\n\n    expect(app).toMatchSnapshot() // これだけでスナップショットが作成されます！！！簡単！！\n  })\n})\n```\n\n`__snapshots__` フォルダが作成されています。\n\n```shell-session\nyk:vue-test-sample yk$ cd src/\nyk:src yk$ tree -L 2\n.\n├── App.vue\n├── __tests__\n│   ├── App.test.js\n│   └── __snapshots__\n├── assets\n│   └── logo.png\n└── main.js\n\n```\n\nこれをしておくと\n\n<img width=\"1061\" alt=\"スクリーンショット 2018-05-25 2.08.30.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/69bdf480-1d3d-9894-787f-3c37d6d5aaad.jpeg\">\n\n予期せぬときに `文字を赤色にしちゃった` 的な意図せぬ変更が検知できます。\n\n```html\n<li><a href=\"https://vuejs.org\" style=\"color:red;\" target=\"_blank\">Core Docs</a></li>\n```\n\n`style=\"color:red;\"`に反応して\n\n<img width=\"420\" alt=\"スクリーンショット 2018-05-25 2.11.07.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e26190df-457b-9734-35a4-ea67d15bc432.jpeg\">\n\n差分を検知して `色が赤になってるけど大丈夫？` って聞いてくれます！便利！！\n\nもちろんマークアップの上書きも簡単で\n\n```shell-session\n › 1 snapshot test failed in 1 test suite. Inspect your code changes or press `u` to update them.\n```\n\n言葉の通り `u` を押すだけです。そしたらAll green testになります〜\n\n## スナップショットを導入するとき（弊社の場合）\n\n参考になるかまったくわからないのですが（macのプレビューでやっつけで作った図）\n\n<img width=\"1061\" alt=\"スクリーンショット 2018-05-25 2.08.30.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/2e314081-4958-b0b8-e978-078fdc1030db.jpeg\">\n\n- componentsをまとめているcontainer的な要素はsnapshot取らなかったりします\n  - 代わりにロジックのテストはしっかり書きます\n- containerの中の更に小さいcomponentsはpropsを渡す、もしくはemitするだけの構成にして、Snapshotメインのテストを書いたりします\n    - 親からのpropsは`propsData`的なので簡単にstubsを作れるので楽です〜\n\n弊社はロジック層とビュー層を意識的に分けてテストしていますが、他にも会社やチームで最適なテストの書き方を見つけるといいかと思います。Rspecとかの歴史にくらべてフロントエンドのテストはまだ歴史も浅く、ベスト・プラクティスが少なめ（ベタープラクティス?）なので、良い書き方・知恵があれば、みなさんQiitaとかに投稿して知見ためていきましょう〜〜\n\n## まとめ\n\n- vue-test-utils使ってみよう！！\n- Snapshotはマークアップの意図しない変更をキャッチしてくれるよ！！\n- テストは文化である。文化は時間をかけて醸造していくものである。\n\n以上。読んでくれてありがとうございました〜〜！！！\n\np.s. 最近Meetupのときつぶやきたいがためにツイッターを始めたのでフォローしろください（ https://twitter.com/yk_hirao ）\n\n","coediting":false,"comments_count":0,"created_at":"2018-05-25T10:03:59+09:00","group":null,"id":"adf22bfc068cea933eed","likes_count":110,"private":false,"reactions_count":0,"stocks_count":100,"tags":[{"name":"JavaScript","versions":[]},{"name":"テスト","versions":[]},{"name":"Vue.js","versions":[]},{"name":"vue-cli","versions":[]},{"name":"vue-test-utils","versions":[]}],"title":"Vue meetupでテスト書いている人が少なかったのでオレオレテストを晒してみる Part. 1","updated_at":"2019-05-10T13:02:00+09:00","url":"https://qiita.com/ykhirao/items/adf22bfc068cea933eed","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h2>\n<span id=\"はとても安心する\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%A8%E3%81%A6%E3%82%82%E5%AE%89%E5%BF%83%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>$はとても安心する</h2>\n\n<p>今回は<code>$はとても安心する</code>を主題に執筆を開始しますが、そのなぜ安心するかというのは主に</p>\n\n<ul>\n<li>長期間のjQuery使用による <del>刷り込み</del> 慣れ</li>\n</ul>\n\n<p>だとは思います。<br>\n今回はVannila JSで<code>$</code>を素敵に扱っていきたいと思います。</p>\n\n<h2>\n<span id=\"やり方\" class=\"fragment\"></span><a href=\"#%E3%82%84%E3%82%8A%E6%96%B9\"><i class=\"fa fa-link\"></i></a>やり方</h2>\n\n<p>Mac をお使いの皆様は <code>⌘ + ⌥ + I</code> (コマンド　&amp;&amp; オプション &amp;&amp; アイ) をおもむろに打ち込み開発者ツールを開いてください。</p>\n\n<p>次に以下のスクリプトを流し込んでください。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">const</span> <span class=\"nx\">$</span> <span class=\"o\">=</span> <span class=\"nx\">identifier</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">identifier</span><span class=\"p\">.</span><span class=\"nx\">substr</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">===</span> <span class=\"dl\">'</span><span class=\"s1\">#</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">getElementById</span><span class=\"p\">(</span><span class=\"nx\">identifier</span><span class=\"p\">.</span><span class=\"nx\">substr</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">))</span>\n  <span class=\"k\">else</span> \n    <span class=\"k\">return</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">querySelectorAll</span><span class=\"p\">(</span><span class=\"nx\">identifier</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>もしES6対応していない環境をお使いのみなさまは、</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">var</span> <span class=\"nx\">$</span> <span class=\"o\">=</span> <span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nx\">identifier</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">identifier</span><span class=\"p\">.</span><span class=\"nx\">substr</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">===</span> <span class=\"dl\">'</span><span class=\"s1\">#</span><span class=\"dl\">'</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">getElementById</span><span class=\"p\">(</span><span class=\"nx\">identifier</span><span class=\"p\">.</span><span class=\"nx\">substr</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">));</span>\n  <span class=\"k\">else</span>\n    <span class=\"k\">return</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">querySelectorAll</span><span class=\"p\">(</span><span class=\"nx\">identifier</span><span class=\"p\">);</span>\n<span class=\"p\">};</span>\n</code></pre></div></div>\n\n<p>こんな感じでいいと思います。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">h1</span><span class=\"dl\">\"</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">innerText</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">jQuery最高！！！！</span><span class=\"dl\">\"</span>\n</code></pre></div></div>\n\n<p>いかがでしょうか。これでjQueryで作られている環境に<code>jQueryっぽい何か</code>の導入ができました。社内からjQueryを撲滅するためにこっそり新機能のページはES6で置き換えるのもいいかもしれませんね！！！</p>\n\n<blockquote>\n<p>VanillaJS の公式ドキュメント <a href=\"http://vanilla-js.com/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://vanilla-js.com/</a></p>\n</blockquote>\n\n<p>それではよいJSライフを！！</p>\n","body":"## $はとても安心する\n\n今回は`$はとても安心する`を主題に執筆を開始しますが、そのなぜ安心するかというのは主に\n\n- 長期間のjQuery使用による ~~刷り込み~~ 慣れ\n\nだとは思います。\n今回はVannila JSで`$`を素敵に扱っていきたいと思います。\n\n## やり方\n\nMac をお使いの皆様は `⌘ + ⌥ + I` (コマンド　&& オプション && アイ) をおもむろに打ち込み開発者ツールを開いてください。\n\n次に以下のスクリプトを流し込んでください。\n\n```js\nconst $ = identifier => {\n  if (identifier.substr(0,1) === '#')\n    return document.getElementById(identifier.substr(1))\n  else \n    return document.querySelectorAll(identifier)\n}\n```\n\nもしES6対応していない環境をお使いのみなさまは、\n\n```js\nvar $ = function(identifier) {\n  if (identifier.substr(0, 1) === '#')\n    return document.getElementById(identifier.substr(1));\n  else\n    return document.querySelectorAll(identifier);\n};\n```\n\nこんな感じでいいと思います。\n\n```js\n$(\"h1\")[0].innerText = \"jQuery最高！！！！\"\n```\n\nいかがでしょうか。これでjQueryで作られている環境に`jQueryっぽい何か`の導入ができました。社内からjQueryを撲滅するためにこっそり新機能のページはES6で置き換えるのもいいかもしれませんね！！！\n\n> VanillaJS の公式ドキュメント http://vanilla-js.com/\n\n\nそれではよいJSライフを！！\n","coediting":false,"comments_count":0,"created_at":"2018-05-21T10:23:59+09:00","group":null,"id":"b35054a3f80573929dbe","likes_count":5,"private":false,"reactions_count":0,"stocks_count":2,"tags":[{"name":"JavaScript","versions":[]},{"name":"jQuery","versions":[]},{"name":"VanillaJS","versions":[]}],"title":"jQueryの$ってDOM扱ってるっぽくて安心するのでVannila JSに導入する","updated_at":"2018-05-21T13:33:48+09:00","url":"https://qiita.com/ykhirao/items/b35054a3f80573929dbe","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"rails-erbの-の意味\" class=\"fragment\"></span><a href=\"#rails-erb%E3%81%AE-%E3%81%AE%E6%84%8F%E5%91%B3\"><i class=\"fa fa-link\"></i></a>Rails erbの<code>&lt;%%= %&gt;</code>の意味</h1>\n\n<blockquote>\n<p>「eRuby テンプレートを生成するための eRuby テンプレート」を記述するのに使う <br>\nby @scivola さん</p>\n</blockquote>\n\n<p>って感じみたいです！</p>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><code><span class=\"nv\">$ </span>bin/rails c\n<span class=\"o\">[</span>1] pry<span class=\"o\">(</span>main<span class=\"o\">)&gt;</span> ERB.new<span class=\"o\">(</span><span class=\"s2\">\"&lt;%%= 'hoge' %&gt;\"</span><span class=\"o\">)</span>.result\n<span class=\"o\">=&gt;</span> <span class=\"s2\">\"&lt;%= 'hoge' %&gt;\"</span>\n<span class=\"o\">[</span>2] pry<span class=\"o\">(</span>main<span class=\"o\">)&gt;</span> ERB.new<span class=\"o\">(</span><span class=\"s2\">\"&lt;%= 'hoge' %&gt;\"</span><span class=\"o\">)</span>.result\n<span class=\"o\">=&gt;</span> <span class=\"s2\">\"hoge\"</span>\n</code></pre></div></div>\n\n<p><code>&lt;%%= %&gt;</code>はerbを一度展開しても、erbファイルが壊れないようにするためだったみたいです。弊社の開発ではCMSで、設定ファイルをユーザーごとのDBに一度いれたりしているので（適当な理解）何度か展開するみたいです〜</p>\n\n<p><del>詳しい方はコメント欄にコメントください</del></p>\n\n<p>scivolaさんがいい感じにまとめてくれたので引用しました！！！！</p>\n\n<p>以下の内容はポエムです。</p>\n\n<h2>\n<span id=\"2週間前くらいにこんなくだりがありました\" class=\"fragment\"></span><a href=\"#2%E9%80%B1%E9%96%93%E5%89%8D%E3%81%8F%E3%82%89%E3%81%84%E3%81%AB%E3%81%93%E3%82%93%E3%81%AA%E3%81%8F%E3%81%A0%E3%82%8A%E3%81%8C%E3%81%82%E3%82%8A%E3%81%BE%E3%81%97%E3%81%9F\"><i class=\"fa fa-link\"></i></a>2週間前くらいにこんなくだりがありました。</h2>\n\n<blockquote>\n<p>私の<code>コピペ</code>が発掘される</p>\n</blockquote>\n\n<p>ことの発端はこうです。 </p>\n\n<p>私が意味を知らずに使っていた <code>&lt;%%= %&gt;</code> というイディオムを、別の人がPR出したときに話題になりました。。。</p>\n\n<p>（意味わからずコピペしてたのは私だけで、PR出した人は知ってた）</p>\n\n<p>「ふ〜ん。調べても出てこないし、なんかわかんないけど動いてるからこうしておかなきゃ。」</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/b8e66cdee59de8d61fb665f1682421d5aff85fb1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f32323638303536362d353364392d653532642d393566342d3037663339376236613336322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"760\" alt=\"スクリーンショット 2018-05-19 1.20.16.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F22680566-53d9-e52d-95f4-07f397b6a362.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7b9a62d382c9c346537e3254d3fc6e6d\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/22680566-53d9-e52d-95f4-07f397b6a362.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F22680566-53d9-e52d-95f4-07f397b6a362.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=21b3d5cc5bfd1e8ff769e68f4cc42024 1x\" loading=\"lazy\"></a></p>\n\n<p>で、今回やっとちゃんと調べました〜〜（エンジニアの風下）</p>\n\n<h2>\n<span id=\"参考資料\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99\"><i class=\"fa fa-link\"></i></a>参考資料</h2>\n\n<p>この記事を書いていたら <a href=\"https://qiita.com/oieioi/items/2ec856e61af20ffcc51b\" id=\"reference-497dc0c62f8b32078891\">erb に Lodash.js (or Underscode.js) の _.template を書くときのエスケープ - Qiita</a> すでに投稿されてたのでこちら参考にするといいかもです！</p>\n\n<p>こちらの<code>&lt;%%= %&gt;</code>が書かれた公式っぽいところはこちらが詳しいみたいです。 <a href=\"https://magazine.rubyist.net/articles/0017/0017-BundledLibraries.html\" rel=\"nofollow noopener\" target=\"_blank\">標準添付ライブラリ紹介 【第 10 回】 ERB</a></p>\n\n<h2>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h2>\n\n<p>普段はコピペしてないですよ（？）</p>\n","body":"# Rails erbの`<%%= %>`の意味\n\n\n\n> 「eRuby テンプレートを生成するための eRuby テンプレート」を記述するのに使う \n> by @scivola さん\n\nって感じみたいです！\n\n```bash\n$ bin/rails c\n[1] pry(main)> ERB.new(\"<%%= 'hoge' %>\").result\n=> \"<%= 'hoge' %>\"\n[2] pry(main)> ERB.new(\"<%= 'hoge' %>\").result\n=> \"hoge\"\n```\n\n`<%%= %>`はerbを一度展開しても、erbファイルが壊れないようにするためだったみたいです。弊社の開発ではCMSで、設定ファイルをユーザーごとのDBに一度いれたりしているので（適当な理解）何度か展開するみたいです〜\n\n~~詳しい方はコメント欄にコメントください~~\n\nscivolaさんがいい感じにまとめてくれたので引用しました！！！！\n\n以下の内容はポエムです。\n\n## 2週間前くらいにこんなくだりがありました。\n\n> 私の`コピペ`が発掘される\n\nことの発端はこうです。 \n\n私が意味を知らずに使っていた `<%%= %>` というイディオムを、別の人がPR出したときに話題になりました。。。\n\n（意味わからずコピペしてたのは私だけで、PR出した人は知ってた）\n\n「ふ〜ん。調べても出てこないし、なんかわかんないけど動いてるからこうしておかなきゃ。」\n\n<img width=\"760\" alt=\"スクリーンショット 2018-05-19 1.20.16.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/22680566-53d9-e52d-95f4-07f397b6a362.png\">\n\nで、今回やっとちゃんと調べました〜〜（エンジニアの風下）\n\n## 参考資料\n\nこの記事を書いていたら [erb に Lodash.js (or Underscode.js) の _.template を書くときのエスケープ - Qiita](https://qiita.com/oieioi/items/2ec856e61af20ffcc51b) すでに投稿されてたのでこちら参考にするといいかもです！\n\nこちらの`<%%= %>`が書かれた公式っぽいところはこちらが詳しいみたいです。 [標準添付ライブラリ紹介 【第 10 回】 ERB](https://magazine.rubyist.net/articles/0017/0017-BundledLibraries.html)\n\n## 最後に\n\n普段はコピペしてないですよ（？）\n","coediting":false,"comments_count":1,"created_at":"2018-05-21T08:57:47+09:00","group":null,"id":"7ff9ce515a82a6dd24ea","likes_count":3,"private":false,"reactions_count":0,"stocks_count":1,"tags":[{"name":"Ruby","versions":[]},{"name":"Rails","versions":[]},{"name":"erb","versions":[]}],"title":"Rails-erbに<%%= %>こういう書き方あるみたい","updated_at":"2018-05-22T02:22:27+09:00","url":"https://qiita.com/ykhirao/items/7ff9ce515a82a6dd24ea","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"jsonを返す無料apiを3分で作る方法\" class=\"fragment\"></span><a href=\"#json%E3%82%92%E8%BF%94%E3%81%99%E7%84%A1%E6%96%99api%E3%82%923%E5%88%86%E3%81%A7%E4%BD%9C%E3%82%8B%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>JSONを返す無料APIを3分で作る方法</h1>\n\n<h2>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h2>\n\n<p>この記事の読書対象者は以下のようなエンジニアです。</p>\n\n<ul>\n<li>Ajaxで叩くAPIを用意してあげようとしている新人教育中の優しい先輩</li>\n<li>なんかのサンプルアプリを作っているときのモックとして</li>\n</ul>\n\n<h2>\n<span id=\"api作成\" class=\"fragment\"></span><a href=\"#api%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>API作成</h2>\n\n<ul>\n<li>実際に通信する\n\n<ul>\n<li>Google Apps Script (GAS)で作成する</li>\n<li>MyJson (既存のWebサービス)でJsonを登録する</li>\n</ul>\n</li>\n<li>ローカルサーバーを立てる\n\n<ul>\n<li>json-server（npmで導入する）</li>\n</ul>\n</li>\n</ul>\n\n<h3>\n<span id=\"google-apps-scriptgasを使う\" class=\"fragment\"></span><a href=\"#google-apps-scriptgas%E3%82%92%E4%BD%BF%E3%81%86\"><i class=\"fa fa-link\"></i></a>Google Apps Script(GAS)を使う</h3>\n\n<p>以下のコードをGASに貼り付けて、「公開」「ウェブアプリケーションとして導入」を押して発行されたURLを叩くと文字列のJSONが返ってくる。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">doGet</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">return</span> <span class=\"nx\">ContentService</span><span class=\"p\">.</span><span class=\"nx\">createTextOutput</span><span class=\"p\">(</span><span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nx\">stringify</span><span class=\"p\">({</span><span class=\"dl\">'</span><span class=\"s1\">name</span><span class=\"dl\">'</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">Qiita</span><span class=\"dl\">'</span><span class=\"p\">}))</span>\n    <span class=\"p\">.</span><span class=\"nx\">setMimeType</span><span class=\"p\">(</span><span class=\"nx\">ContentService</span><span class=\"p\">.</span><span class=\"nx\">MimeType</span><span class=\"p\">.</span><span class=\"nx\">JSON</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p><a href=\"https://camo.qiitausercontent.com/10ada0fa694393dc7ed87f86622a66b57b2601e4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f32346136366337342d363837612d623138612d303137662d3561613539643065373362362e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F24a66c74-687a-b18a-017f-5aa59d0e73b6.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2d52715e9c82d9c03c396c7d3b6be25e\" alt=\"スクリーンショット\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/24a66c74-687a-b18a-017f-5aa59d0e73b6.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F24a66c74-687a-b18a-017f-5aa59d0e73b6.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=85f86a6e8f2cf6c538526c30a9cb2bcc 1x\" loading=\"lazy\"></a></p>\n\n<p>参考： <a href=\"https://developers.google.com/apps-script/guides/content#serving_json_from_scripts\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://developers.google.com/apps-script/guides/content#serving_json_from_scripts</a></p>\n\n<p>GetメソッドにtokenをつけてたらJsonを返すとかそういう処理もできるのでオススメ！</p>\n\n<h3>\n<span id=\"json-okibaというwebサービスを使う\" class=\"fragment\"></span><a href=\"#json-okiba%E3%81%A8%E3%81%84%E3%81%86web%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%82%92%E4%BD%BF%E3%81%86\"><i class=\"fa fa-link\"></i></a>Json okibaというWebサービスを使う</h3>\n\n<p>日本語で使えるサイトです。保存する前に動的にで正しいJSON形式かチェックしてくれます。<a href=\"https://json.okiba.me/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://json.okiba.me/</a></p>\n\n<div class=\"code-frame\" data-lang=\"shell\"><div class=\"highlight\"><pre><code>curl https://jsondata.okiba.me/v1/json/z9Hu6180423002129\n<span class=\"c\"># {</span>\n<span class=\"c\"># \"name\": \"ジェイソン\",</span>\n<span class=\"c\"># \"movie\": \"13日の金曜日\"</span>\n<span class=\"c\"># }</span>\n</code></pre></div></div>\n\n<p>情報ありがとうございます <a href=\"/imai\" class=\"user-mention js-hovercard\" title=\"imai\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"imai\">@imai</a> さん</p>\n\n<h3>\n<span id=\"localにjson-serverを立てて使う\" class=\"fragment\"></span><a href=\"#local%E3%81%ABjson-server%E3%82%92%E7%AB%8B%E3%81%A6%E3%81%A6%E4%BD%BF%E3%81%86\"><i class=\"fa fa-link\"></i></a>localに<a href=\"https://github.com/typicode/json-server\" rel=\"nofollow noopener\" target=\"_blank\">json-server</a>を立てて使う</h3>\n\n<p>Node.js等を使える人はjson-serverがおすすめみたいです！</p>\n\n<p>参考：<a href=\"https://qiita.com/futoase/items/2859a60c8b240da70572\" id=\"reference-efbc2bde0ad5d33e4eaf\">JSON Serverを使って手っ取り早くWebAPIのモックアップを作る</a></p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>npm install -g json-server\n</code></pre></div></div>\n\n<p>npmインストールとか必要だけどAPIモックにするのにはすごく便利なのでオススメ！</p>\n\n<h3>\n<span id=\"api-gatewayのmockを使う\" class=\"fragment\"></span><a href=\"#api-gateway%E3%81%AEmock%E3%82%92%E4%BD%BF%E3%81%86\"><i class=\"fa fa-link\"></i></a>API GatewayのMockを使う</h3>\n\n<p>awsサービス使っている方は楽</p>\n\n<h3>\n<span id=\"その他\" class=\"fragment\"></span><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\"><i class=\"fa fa-link\"></i></a>その他</h3>\n\n<p>Gistを使ってもいけた。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">var</span> <span class=\"nx\">url</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">https://api.github.com/gists/3137d994d72040d00a84f422349757d4</span><span class=\"dl\">'</span><span class=\"p\">;</span>\n\n<span class=\"nx\">fetch</span><span class=\"p\">(</span> <span class=\"nx\">url</span> <span class=\"p\">)</span>\n<span class=\"p\">.</span><span class=\"nx\">then</span><span class=\"p\">(</span> <span class=\"kd\">function</span><span class=\"p\">(</span> <span class=\"nx\">data</span> <span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">return</span> <span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">json</span><span class=\"p\">();</span>\n<span class=\"p\">})</span>\n<span class=\"p\">.</span><span class=\"nx\">then</span><span class=\"p\">(</span> <span class=\"kd\">function</span><span class=\"p\">(</span> <span class=\"nx\">json</span> <span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span> <span class=\"nx\">json</span><span class=\"p\">.</span><span class=\"nx\">files</span><span class=\"p\">[</span><span class=\"dl\">'</span><span class=\"s1\">sample.json</span><span class=\"dl\">'</span><span class=\"p\">].</span><span class=\"nx\">content</span> <span class=\"p\">);</span>\n<span class=\"p\">})</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"shell\"><div class=\"highlight\"><pre><code><span class=\"c\"># json</span>\ncurl https://api.github.com/gists/3137d994d72040d00a84f422349757d4\n</code></pre></div></div>\n\n<p>お手軽ではないです。</p>\n\n<h2>\n<span id=\"終わりに\" class=\"fragment\"></span><a href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>終わりに</h2>\n\n<p>AjaxとかAPIとかよくわかってなかった時期がありました。それくらいのレベルの人に教えるときに先輩エンジニアが「API作っといたのでこれ自由に叩いていいよ」って感じの世界素敵ですね！！</p>\n\n<p>それでは素敵なAPIライフを！！</p>\n","body":"# JSONを返す無料APIを3分で作る方法\n\n## はじめに\n\nこの記事の読書対象者は以下のようなエンジニアです。\n\n* Ajaxで叩くAPIを用意してあげようとしている新人教育中の優しい先輩\n* なんかのサンプルアプリを作っているときのモックとして\n\n## API作成\n\n* 実際に通信する\n  * Google Apps Script (GAS)で作成する\n  * MyJson (既存のWebサービス)でJsonを登録する\n* ローカルサーバーを立てる\n  * json-server（npmで導入する）\n\n### Google Apps Script(GAS)を使う\n\n以下のコードをGASに貼り付けて、「公開」「ウェブアプリケーションとして導入」を押して発行されたURLを叩くと文字列のJSONが返ってくる。\n\n```js\nfunction doGet(e) {\n  return ContentService.createTextOutput(JSON.stringify({'name': 'Qiita'}))\n    .setMimeType(ContentService.MimeType.JSON);\n}\n```\n\n![スクリーンショット](https://qiita-image-store.s3.amazonaws.com/0/112929/24a66c74-687a-b18a-017f-5aa59d0e73b6.jpeg)\n\n参考： <https://developers.google.com/apps-script/guides/content#serving_json_from_scripts>\n\nGetメソッドにtokenをつけてたらJsonを返すとかそういう処理もできるのでオススメ！\n\n### Json okibaというWebサービスを使う\n\n日本語で使えるサイトです。保存する前に動的にで正しいJSON形式かチェックしてくれます。<https://json.okiba.me/>\n\n```shell\ncurl https://jsondata.okiba.me/v1/json/z9Hu6180423002129\n# {\n# \"name\": \"ジェイソン\",\n# \"movie\": \"13日の金曜日\"\n# }\n```\n\n情報ありがとうございます @imai さん\n\n### localに[json-server](https://github.com/typicode/json-server)を立てて使う\n\nNode.js等を使える人はjson-serverがおすすめみたいです！\n\n参考：[JSON Serverを使って手っ取り早くWebAPIのモックアップを作る](https://qiita.com/futoase/items/2859a60c8b240da70572)\n\n```\nnpm install -g json-server\n```\n\nnpmインストールとか必要だけどAPIモックにするのにはすごく便利なのでオススメ！\n\n### API GatewayのMockを使う\n\nawsサービス使っている方は楽\n\n### その他\n\nGistを使ってもいけた。\n\n```js\nvar url = 'https://api.github.com/gists/3137d994d72040d00a84f422349757d4';\n\nfetch( url )\n.then( function( data ) {\n  return data.json();\n})\n.then( function( json ) {\n  console.log( json.files['sample.json'].content );\n})\n```\n\n```shell\n# json\ncurl https://api.github.com/gists/3137d994d72040d00a84f422349757d4\n```\n\nお手軽ではないです。\n\n## 終わりに\n\nAjaxとかAPIとかよくわかってなかった時期がありました。それくらいのレベルの人に教えるときに先輩エンジニアが「API作っといたのでこれ自由に叩いていいよ」って感じの世界素敵ですね！！\n\nそれでは素敵なAPIライフを！！\n","coediting":false,"comments_count":5,"created_at":"2018-03-05T02:36:35+09:00","group":null,"id":"a41322085ab55837b88e","likes_count":634,"private":false,"reactions_count":0,"stocks_count":682,"tags":[{"name":"JavaScript","versions":[]},{"name":"API","versions":[]},{"name":"GoogleAppsScript","versions":[]},{"name":"JSON","versions":[]}],"title":"JSONを返す無料APIを3分で作る方法","updated_at":"2021-05-19T17:39:35+09:00","url":"https://qiita.com/ykhirao/items/a41322085ab55837b88e","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:62\">\n<span id=\"vuejsでクリックイベントを複数持たせる方法\" class=\"fragment\"></span><a href=\"#vuejs%E3%81%A7%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%82%92%E8%A4%87%E6%95%B0%E6%8C%81%E3%81%9F%E3%81%9B%E3%82%8B%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>Vue.jsでクリックイベントを複数持たせる方法</h1>\n<p data-sourcepos=\"3:1-3:66\">単純にクリックイベントに２つ書けばいけます。</p>\n<div class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"5:1-8:3\"><div class=\"highlight\"><pre><code><span class=\"nx\">v</span><span class=\"o\">-</span><span class=\"nx\">on</span><span class=\"p\">:</span><span class=\"nx\">click</span><span class=\"o\">=</span><span class=\"dl\">\"</span><span class=\"s2\">click_1(); click_2()</span><span class=\"dl\">\"</span>\n<span class=\"p\">@</span><span class=\"nd\">click</span><span class=\"o\">=</span><span class=\"dl\">\"</span><span class=\"s2\">click_1(); click_2()</span><span class=\"dl\">\"</span>\n</code></pre></div></div>\n<p data-sourcepos=\"10:1-10:108\">あんまり使わないとは思いますが、検索で出てこなかったので書いておきます。</p>\n<h1 data-sourcepos=\"12:1-12:11\">\n<span id=\"その他\" class=\"fragment\"></span><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\"><i class=\"fa fa-link\"></i></a>その他</h1>\n<h2 data-sourcepos=\"14:1-14:21\">\n<span id=\"動作サンプル\" class=\"fragment\"></span><a href=\"#%E5%8B%95%E4%BD%9C%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB\"><i class=\"fa fa-link\"></i></a>動作サンプル</h2>\n<p data-sourcepos=\"15:1-15:44\"><iframe id=\"qiita-embed-content__967127904a1483f98ad5f0ba7499e7c5\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__967127904a1483f98ad5f0ba7499e7c5\" data-content=\"https%3A%2F%2Fykhirao.github.io%2Fqiita%2Fclick_vuejs%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\">\n</iframe>\n</p>\n<h2 data-sourcepos=\"17:1-17:21\">\n<span id=\"ソースコード\" class=\"fragment\"></span><a href=\"#%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>ソースコード</h2>\n<p data-sourcepos=\"19:1-19:80\"><a href=\"https://github.com/ykhirao/qiita/blob/master/click_vuejs/index.html\" rel=\"nofollow noopener\" target=\"_blank\">最新版</a></p>\n<div class=\"code-frame\" data-lang=\"html\" data-sourcepos=\"21:1-68:3\"><div class=\"highlight\"><pre><code><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"nt\">&lt;html</span> <span class=\"na\">lang=</span><span class=\"s\">\"ja\"</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;head&gt;</span>\n  <span class=\"nt\">&lt;meta</span> <span class=\"na\">charset=</span><span class=\"s\">\"UTF-8\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;meta</span> <span class=\"na\">name=</span><span class=\"s\">\"viewport\"</span> <span class=\"na\">content=</span><span class=\"s\">\"width=device-width, initial-scale=1.0\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;meta</span> <span class=\"na\">http-equiv=</span><span class=\"s\">\"X-UA-Compatible\"</span> <span class=\"na\">content=</span><span class=\"s\">\"ie=edge\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"https://unpkg.com/vue@2.5.3/dist/vue.js\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n  <span class=\"nt\">&lt;title&gt;</span>Vue.js<span class=\"nt\">&lt;/title&gt;</span>\n  <span class=\"nt\">&lt;style&gt;</span>\n    <span class=\"nt\">p</span> <span class=\"p\">{</span>\n      <span class=\"nl\">padding</span><span class=\"p\">:</span> <span class=\"m\">2em</span><span class=\"p\">;</span>\n      <span class=\"nl\">width</span><span class=\"p\">:</span> <span class=\"m\">200px</span><span class=\"p\">;</span>\n      <span class=\"nl\">border</span><span class=\"p\">:</span> <span class=\"nb\">solid</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"nt\">p</span><span class=\"nd\">:hover</span> <span class=\"p\">{</span>\n      <span class=\"nl\">border-color</span><span class=\"p\">:</span> <span class=\"m\">#6C9BD2</span><span class=\"p\">;</span>\n      <span class=\"nl\">color</span><span class=\"p\">:</span> <span class=\"m\">#6C9BD2</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n  <span class=\"nt\">&lt;/style&gt;</span>\n<span class=\"nt\">&lt;/head&gt;</span>\n<span class=\"nt\">&lt;body&gt;</span>\n  <span class=\"nt\">&lt;div</span> <span class=\"na\">id=</span><span class=\"s\">'demo'</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;p</span> <span class=\"na\">v-on:click=</span><span class=\"s\">\"click_1(); click_2()\"</span><span class=\"nt\">&gt;</span>クリックイベントはこちら<span class=\"nt\">&lt;/p&gt;</span>\n    <span class=\"nt\">&lt;ul</span> <span class=\"na\">v-for=</span><span class=\"s\">\"text in list\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;li&gt;</span>{{text}}<span class=\"nt\">&lt;/li&gt;</span>\n    <span class=\"nt\">&lt;/ul&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;script&gt;</span>\n    <span class=\"k\">new</span> <span class=\"nc\">Vue</span><span class=\"p\">({</span>\n      <span class=\"na\">el</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">#demo</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n      <span class=\"na\">data</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">list</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n      <span class=\"p\">},</span>\n      <span class=\"na\">methods</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">click_1</span><span class=\"p\">:</span> <span class=\"kd\">function</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n          <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">list</span><span class=\"p\">.</span><span class=\"nf\">push</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">by click 1</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n        <span class=\"p\">},</span>\n        <span class=\"na\">click_2</span><span class=\"p\">:</span> <span class=\"kd\">function</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n          <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">list</span><span class=\"p\">.</span><span class=\"nf\">push</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">by click 2</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">})</span>\n  <span class=\"nt\">&lt;/script&gt;</span>\n<span class=\"nt\">&lt;/body&gt;</span>\n<span class=\"nt\">&lt;/html&gt;</span>\n\n</code></pre></div></div>\n","body":"# Vue.jsでクリックイベントを複数持たせる方法\n\n単純にクリックイベントに２つ書けばいけます。\n\n```javascript\nv-on:click=\"click_1(); click_2()\"\n@click=\"click_1(); click_2()\"\n```\n\nあんまり使わないとは思いますが、検索で出てこなかったので書いておきます。\n\n# その他\n\n## 動作サンプル\nhttps://ykhirao.github.io/qiita/click_vuejs/\n\n## ソースコード\n\n[最新版](https://github.com/ykhirao/qiita/blob/master/click_vuejs/index.html)\n\n```html\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <script src=\"https://unpkg.com/vue@2.5.3/dist/vue.js\"></script>\n  <title>Vue.js</title>\n  <style>\n    p {\n      padding: 2em;\n      width: 200px;\n      border: solid;\n    }\n    p:hover {\n      border-color: #6C9BD2;\n      color: #6C9BD2;\n    }\n  </style>\n</head>\n<body>\n  <div id='demo'>\n    <p v-on:click=\"click_1(); click_2()\">クリックイベントはこちら</p>\n    <ul v-for=\"text in list\">\n      <li>{{text}}</li>\n    </ul>\n  </div>\n  <script>\n    new Vue({\n      el: '#demo',\n      data: {\n        list: []\n      },\n      methods: {\n        click_1: function() {\n          this.list.push(\"by click 1\")\n        },\n        click_2: function() {\n          this.list.push(\"by click 2\")\n        }\n      }\n    })\n  </script>\n</body>\n</html>\n\n```\n\n\n\n","coediting":false,"comments_count":0,"created_at":"2018-02-27T11:28:30+09:00","group":null,"id":"1ff89bd157bc9480d899","likes_count":82,"private":false,"reactions_count":0,"stocks_count":49,"tags":[{"name":"JavaScript","versions":[]},{"name":"Vue.js","versions":[]}],"title":"Vue.jsでクリックイベントを２つ持たせる方法","updated_at":"2022-12-27T18:14:09+09:00","url":"https://qiita.com/ykhirao/items/1ff89bd157bc9480d899","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"v-forをnestするために\" class=\"fragment\"></span><a href=\"#v-for%E3%82%92nest%E3%81%99%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>v-forをnestするために</h1>\n\n<p>おつかれさまです。先日のVue.js meetup#6はお疲れ様でした。ピンクの髪色のイケメンさんすごく楽しかったです。<img alt=\":grinning:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f600.png\" title=\":grinning:\" width=\"20\" loading=\"lazy\"><br>\n記事に間違いがあればPRでもください〜〜〜！！！</p>\n\n<p>Vue.js アドベントカレンダー2 15日目の記事です。<br>\n<a href=\"https://qiita.com/advent-calendar/2017/vue2\" class=\"autolink\">https://qiita.com/advent-calendar/2017/vue2</a></p>\n\n<h2>\n<span id=\"やりたいこと\" class=\"fragment\"></span><a href=\"#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8\"><i class=\"fa fa-link\"></i></a>やりたいこと</h2>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code>\n<span class=\"nt\">&lt;div</span> <span class=\"na\">v-for</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;div</span> <span class=\"na\">v-for</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">v-for</span><span class=\"nt\">&gt;</span>\n      v-forをネストしてデータをすべて出力したい。\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n\n</code></pre></div></div>\n\n<h2>\n<span id=\"今回扱うデータ\" class=\"fragment\"></span><a href=\"#%E4%BB%8A%E5%9B%9E%E6%89%B1%E3%81%86%E3%83%87%E3%83%BC%E3%82%BF\"><i class=\"fa fa-link\"></i></a>今回扱うデータ</h2>\n\n<p>ブログのカテゴリごとに記事を出力する。</p>\n\n<blockquote>\n<p>データ：カテゴリ(数：0以上)ごとにブログ(数：0~3)をもたせています。<br>\nブログにはタイトルと画像URLを持たせています。</p>\n</blockquote>\n\n<p><a href=\"https://camo.qiitausercontent.com/2e10ec70db6c02fa1567d0c51a983ecd5430c3ec/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f796b686972616f2f71696974612f6d61737465722f765f666f725f6e6573742f6173736574732f7373253230323031372d31322d313125323031372e34312e35322e6a7067\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fraw.githubusercontent.com%2Fykhirao%2Fqiita%2Fmaster%2Fv_for_nest%2Fassets%2Fss%25202017-12-11%252017.41.52.jpg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=53531786b02bcb7e09edf3289f4f4c43\" alt=\"img\" data-canonical-src=\"https://raw.githubusercontent.com/ykhirao/qiita/master/v_for_nest/assets/ss%202017-12-11%2017.41.52.jpg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fraw.githubusercontent.com%2Fykhirao%2Fqiita%2Fmaster%2Fv_for_nest%2Fassets%2Fss%25202017-12-11%252017.41.52.jpg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=66607fc737b0eb9dae6cabff5cae443a 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"v-forをnestするには同じ名前を使うだけ\" class=\"fragment\"></span><a href=\"#v-for%E3%82%92nest%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF%E5%90%8C%E3%81%98%E5%90%8D%E5%89%8D%E3%82%92%E4%BD%BF%E3%81%86%E3%81%A0%E3%81%91\"><i class=\"fa fa-link\"></i></a>v-forをnestするには同じ名前を使うだけ</h2>\n\n<p>同じ変数名を使ってやればデータにアクセスできるです。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div</span> <span class=\"na\">v-for=</span><span class=\"s\">'category in categories'</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;div</span> <span class=\"na\">v-for=</span><span class=\"s\">'blog in category.blogs'</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;div&gt;</span>{{blog.title}}<span class=\"nt\">&lt;/div&gt;</span>\n    <span class=\"nt\">&lt;div&gt;</span>{{blog.text}}<span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div></div>\n\n<h2>\n<span id=\"完成形\" class=\"fragment\"></span><a href=\"#%E5%AE%8C%E6%88%90%E5%BD%A2\"><i class=\"fa fa-link\"></i></a>完成形</h2>\n\n<p><a href=\"https://jsfiddle.net/de6ohg2z/\" rel=\"nofollow noopener\" target=\"_blank\">JSFiddle</a> においてあるので動作はそちらを確認ください。</p>\n\n<blockquote>\n<p>データ：カテゴリ(複数、0~)ごとにブログ(複数、0~3)をもたせています。</p>\n</blockquote>\n\n<ul>\n<li>カテゴリ1\n\n<ul>\n<li>タイトル1 - <a href=\"https://goo.gl/hvjbc4\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://goo.gl/hvjbc4</a>\n</li>\n<li>タイトル2 - <a href=\"https://goo.gl/hvjbc4\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://goo.gl/hvjbc4</a>\n</li>\n<li>タイトル3 - <a href=\"https://goo.gl/hvjbc4\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://goo.gl/hvjbc4</a>\n</li>\n</ul>\n</li>\n<li>カテゴリ2(ブログ記事がなければカテゴリも非表示)</li>\n<li>カテゴリ3\n\n<ul>\n<li>タイトル1 - <a href=\"https://goo.gl/hvjbc4\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://goo.gl/hvjbc4</a>\n</li>\n<li>タイトル2 - <a href=\"https://goo.gl/hvjbc4\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://goo.gl/hvjbc4</a>\n</li>\n</ul>\n</li>\n</ul>\n\n<p>こんな感じになるはずです。</p>\n\n<h2>\n<span id=\"コード\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>コード</h2>\n\n<p>htmlとJSは以下にも書いているのでそちらでも確認できます。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"https://unpkg.com/vue@2.5.3/dist/vue.js\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n\n<span class=\"nt\">&lt;div</span> <span class=\"na\">id=</span><span class=\"s\">'demo'</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;template</span> <span class=\"na\">v-for=</span><span class=\"s\">'category in categories'</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">v-if=</span><span class=\"s\">\"category.blogs.length &gt; 0\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;h2&gt;</span>{{category.name}}<span class=\"nt\">&lt;/h2&gt;</span>\n      <span class=\"nt\">&lt;ul&gt;</span>\n        <span class=\"nt\">&lt;li</span> <span class=\"na\">v-for=</span><span class=\"s\">'blog in category.blogs'</span><span class=\"nt\">&gt;</span>{{blog.title}} - {{blog.img}}<span class=\"nt\">&lt;/li&gt;</span>\n      <span class=\"nt\">&lt;/ul&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/template&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"javascript\"><div class=\"highlight\"><pre><code><span class=\"k\">new</span> <span class=\"nx\">Vue</span><span class=\"p\">({</span>\n  <span class=\"na\">el</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">#demo</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n  <span class=\"na\">data</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">categories</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n      <span class=\"p\">{</span> \n        <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">カテゴリ1</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n        <span class=\"na\">blogs</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">title</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">タイトル1</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n            <span class=\"na\">img</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">https://goo.gl/hvjbc4</span><span class=\"dl\">'</span>\n          <span class=\"p\">},</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">title</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">タイトル2</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n            <span class=\"na\">img</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">https://goo.gl/hvjbc4</span><span class=\"dl\">'</span>\n          <span class=\"p\">},</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">title</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">タイトル3</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n            <span class=\"na\">img</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">https://goo.gl/hvjbc4</span><span class=\"dl\">'</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">},</span>\n      <span class=\"p\">{</span> \n        <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">カテゴリ2</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n        <span class=\"na\">blogs</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n      <span class=\"p\">},</span>\n      <span class=\"p\">{</span> \n        <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">カテゴリ3</span><span class=\"dl\">'</span><span class=\"p\">,</span>\n        <span class=\"na\">blogs</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">title</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">タイトル1</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n            <span class=\"na\">img</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">https://goo.gl/hvjbc4</span><span class=\"dl\">'</span>\n          <span class=\"p\">},</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">title</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">タイトル2</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n            <span class=\"na\">img</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">https://goo.gl/hvjbc4</span><span class=\"dl\">'</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">]</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">})</span>\n</code></pre></div></div>\n\n<h1>\n<span id=\"いろいろ試した話\" class=\"fragment\"></span><a href=\"#%E3%81%84%E3%82%8D%E3%81%84%E3%82%8D%E8%A9%A6%E3%81%97%E3%81%9F%E8%A9%B1\"><i class=\"fa fa-link\"></i></a>いろいろ試した話</h1>\n\n<p>弊社ではCMSを開発しているのですが、そこでかなりの時間ハマってしまったので共有しておこうと思い記事を書かせていただきました。</p>\n\n<p>普段は、CMS( <a href=\"https://start.eat.auto/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://start.eat.auto/</a> )の機能開発をしていて、Vue.js, jQuery, Ruby on Railsとかを使っているWebエンジニア1年目のペーペーです。これ以下はだらだらと書くので読む必要はないと思います！</p>\n\n<h2>\n<span id=\"検索編1--v-for-ネスト-でぐぐった\" class=\"fragment\"></span><a href=\"#%E6%A4%9C%E7%B4%A2%E7%B7%A81--v-for-%E3%83%8D%E3%82%B9%E3%83%88-%E3%81%A7%E3%81%90%E3%81%90%E3%81%A3%E3%81%9F\"><i class=\"fa fa-link\"></i></a>検索編1 [ v-for ネスト ]でぐぐった</h2>\n\n<p>私のドハマリ日のまずはじめはGoogle先生に頼ろうとして、日本語での検索からスタートしました。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">var</span> <span class=\"nx\">doc</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">querySelectorAll</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">h3 &gt; a</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n<span class=\"kd\">var</span> <span class=\"nx\">tmp</span> <span class=\"o\">=</span> <span class=\"dl\">\"\"</span><span class=\"p\">;</span>\n<span class=\"nx\">doc</span><span class=\"p\">.</span><span class=\"nx\">forEach</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nx\">val</span><span class=\"p\">,</span><span class=\"nx\">index</span><span class=\"p\">){</span>\n   <span class=\"c1\">// tmp += index + '. ' + val.innerHTML + \"\\n\";</span>\n   <span class=\"nx\">tmp</span> <span class=\"o\">+=</span> <span class=\"s2\">`</span><span class=\"p\">${</span><span class=\"nx\">index</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">}</span><span class=\"s2\">. </span><span class=\"p\">${</span><span class=\"nx\">val</span><span class=\"p\">.</span><span class=\"nx\">innerHTML</span><span class=\"p\">}</span><span class=\"s2\"> \\n`</span><span class=\"p\">;</span>\n<span class=\"p\">});</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">tmp</span><span class=\"p\">);</span>\n</code></pre></div></div>\n\n<ol>\n<li>リストレンダリング — Vue.js </li>\n<li>体で覚えるVue.js - v-repeatネスト編 〜 JSおくのほそ道 #027 - Qiita </li>\n<li>vue.js - Nested arrays of objects and v-for - Stack Overflow </li>\n<li>Vue.jsの入れ子のComponentで {{ Hoge.fuga }} を渡したいだけの人生 </li>\n<li>【Vue.js】v-forでリスト表示してみる – Snaplog </li>\n<li>Vue.js で el がネストしてる場合の処理 · GitHub </li>\n<li>Vue.jsでv-repeatをネストするには - console.lealog(); </li>\n<li>v-forとv-ifでリストレンダリング制御したいと思っていた俺がアホだった </li>\n<li>Vue.js で文字やリストを動的に表示する | Cubix </li>\n<li>Vue.jsメモ </li>\n</ol>\n\n<p>唯一それっぽい記事がでてきたのは<a href=\"https://qiita.com/hosomichi/items/6f22ebd15bcc0afe1ab0\" id=\"reference-f7d3e15d50059aa0a459\">体で覚えるVue.js - v-repeatネスト編 〜 JSおくのほそ道 #027 - Qiita</a>でしたがv-repeatのネストでvue.jsのversion0.12の環境ではこれが正解みたいです。</p>\n\n<p>そう。日本語で情報がまったく出てこなかったのです。<br>\nこれは同じところにハマるひとのためにもQiitaに書かなきゃねと思って今回の記事を書いてます〜</p>\n\n<h2>\n<span id=\"公式ドキュメントを漁る\" class=\"fragment\"></span><a href=\"#%E5%85%AC%E5%BC%8F%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%92%E6%BC%81%E3%82%8B\"><i class=\"fa fa-link\"></i></a>公式ドキュメントを漁る</h2>\n\n<p>ここからが長かったのですが、公式ドキュメントを読みこんだり、v-repeatは本当に動かないのかなと試したり、配列のlengthを取得してぐるぐるしようとしたりしてました。</p>\n\n<p>公式ドキュメントの読みこみついでにタイポ修正の <a href=\"https://github.com/vuejs/jp.vuejs.org/pull/333\" rel=\"nofollow noopener\" target=\"_blank\">PR</a> を、前職の同僚 <a href=\"https://qiita.com/re-fort\">@ re-fort</a> に手伝ってもらいながら出したりしました。初めてのOSS系のPRで緊張しながら出したら1分ほどで <a href=\"https://qiita.com/kazupon\">@ kazupon</a> さんにマージされたので「平日の昼間にはやっ」と思ったのですが、こちらも仕事中にPR出したのでそんなものかもしれないですね。</p>\n\n<h2>\n<span id=\"検索編2--v-for-nest-でぐぐった\" class=\"fragment\"></span><a href=\"#%E6%A4%9C%E7%B4%A2%E7%B7%A82--v-for-nest-%E3%81%A7%E3%81%90%E3%81%90%E3%81%A3%E3%81%9F\"><i class=\"fa fa-link\"></i></a>検索編2 [ v-for nest ]でぐぐった</h2>\n\n<ol>\n<li>vue.js - Nested arrays of objects and v-for - Stack Overflow </li>\n<li>vuejs2 - Vue.js v-for nested in Table - Stack Overflow </li>\n<li>リストレンダリング — Vue.js </li>\n<li>Nested v-for question - Laracasts </li>\n<li>v-forとv-ifでリストレンダリング制御したいと思っていた俺がアホだった。 - Qiita </li>\n<li>Vue.jsの入れ子のComponentで {{ Hoge.fuga }} を渡したいだけの人生 </li>\n<li>体で覚えるVue.js - v-repeatネスト編 〜 JSおくのほそ道 #027 - Qiita </li>\n<li>Vue.jsでv-repeatをネストするには - console.lealog(); </li>\n<li>v-ref inside v-for is not defined · Issue #2044 · vuejs/vue · GitHub </li>\n<li>How do I create a nested v-for · Issue #3465 · vuejs/vue · GitHub </li>\n</ol>\n\n<p>日本語は10件に出てこなかったのに、英語だと一番上にでてきた。。<br>\nありがとうStack Overflow。</p>\n\n<p><a href=\"https://stackoverflow.com/questions/37534249/nested-arrays-of-objects-and-v-for\" rel=\"nofollow noopener\" target=\"_blank\">Nested arrays of objects and v-for</a></p>\n\n<p>これが今回の教訓ですね。英語で調べたら一発ででてきました。<br><br>\n最初から英語で検索すればよかったと思います。英語嫌いなひともぜひ調べ物は英語で。</p>\n\n<p>調べ物は</p>\n\n<ol>\n<li>日本語で検索する</li>\n<li>ドキュメント読む</li>\n<li>英語で検索する</li>\n</ol>\n\n<p>の３つをちゃんと全部やりましょう。</p>\n\n<h2>\n<span id=\"最終的な微修正\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E7%B5%82%E7%9A%84%E3%81%AA%E5%BE%AE%E4%BF%AE%E6%AD%A3\"><i class=\"fa fa-link\"></i></a>最終的な微修正</h2>\n\n<p>v-forでネストできるとわかったあとはまあ問題もなく順調にコーディングが終わり、最終的には以下のような感じに落ち着きました。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div</span> <span class=\"na\">id=</span><span class=\"s\">'demo'</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;div</span> <span class=\"na\">v-for=</span><span class=\"s\">'category in categories'</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;h2&gt;</span>{{ category.name }}<span class=\"nt\">&lt;/h2&gt;</span>\n    <span class=\"nt\">&lt;ul</span> <span class=\"na\">v-for=</span><span class=\"s\">'blog in category.blogs'</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;li&gt;</span>{{blog.title}} - {{blog.img}}<span class=\"nt\">&lt;/li&gt;</span>\n    <span class=\"nt\">&lt;/ul&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div></div>\n\n<p>上記のように書くとブログを持っていないカテゴリも表示してしまうので<code>&lt;template&gt;</code>と<code>v-if</code>でなんとなく制御してみました。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"https://unpkg.com/vue@2.5.3/dist/vue.js\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n\n<span class=\"nt\">&lt;div</span> <span class=\"na\">id=</span><span class=\"s\">'demo'</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;template</span> <span class=\"na\">v-for=</span><span class=\"s\">'category in categories'</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">v-if=</span><span class=\"s\">\"category.blogs.length &gt; 0\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;h2&gt;</span>{{category.name}}<span class=\"nt\">&lt;/h2&gt;</span>\n      <span class=\"nt\">&lt;ul&gt;</span>\n        <span class=\"nt\">&lt;li</span> <span class=\"na\">v-for=</span><span class=\"s\">'blog in category.blogs'</span><span class=\"nt\">&gt;</span>{{blog.title}} - {{blog.img}}<span class=\"nt\">&lt;/li&gt;</span>\n      <span class=\"nt\">&lt;/ul&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/template&gt;</span>\n<span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div></div>\n\n<h2>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n\n<ol>\n<li>v-forはネストできる</li>\n<li>検索はちゃんと英語でも調べる</li>\n</ol>\n","body":"# v-forをnestするために\n\nおつかれさまです。先日のVue.js meetup#6はお疲れ様でした。ピンクの髪色のイケメンさんすごく楽しかったです。:grinning:\n記事に間違いがあればPRでもください〜〜〜！！！\n\nVue.js アドベントカレンダー2 15日目の記事です。\nhttps://qiita.com/advent-calendar/2017/vue2\n\n## やりたいこと\n\n```html\n\n<div v-for>\n  <div v-for>\n    <div v-for>\n      v-forをネストしてデータをすべて出力したい。\n    </div>\n  </div>\n</div>\n\n````\n\n## 今回扱うデータ\n\nブログのカテゴリごとに記事を出力する。\n\n> データ：カテゴリ(数：0以上)ごとにブログ(数：0~3)をもたせています。\n> ブログにはタイトルと画像URLを持たせています。\n\n![img](https://raw.githubusercontent.com/ykhirao/qiita/master/v_for_nest/assets/ss%202017-12-11%2017.41.52.jpg)\n\n## v-forをnestするには同じ名前を使うだけ\n\n同じ変数名を使ってやればデータにアクセスできるです。\n\n```html\n<div v-for='category in categories'>\n  <div v-for='blog in category.blogs'>\n    <div>{{blog.title}}</div>\n    <div>{{blog.text}}</div>\n  </div>\n</div>\n```\n\n## 完成形\n \n [JSFiddle](https://jsfiddle.net/de6ohg2z/) においてあるので動作はそちらを確認ください。\n \n> データ：カテゴリ(複数、0~)ごとにブログ(複数、0~3)をもたせています。\n\n- カテゴリ1\n  - タイトル1 - https://goo.gl/hvjbc4\n  - タイトル2 - https://goo.gl/hvjbc4\n  - タイトル3 - https://goo.gl/hvjbc4\n- カテゴリ2(ブログ記事がなければカテゴリも非表示)\n- カテゴリ3\n  - タイトル1 - https://goo.gl/hvjbc4\n  - タイトル2 - https://goo.gl/hvjbc4\n\nこんな感じになるはずです。\n\n## コード\n\nhtmlとJSは以下にも書いているのでそちらでも確認できます。\n\n```html\n<script src=\"https://unpkg.com/vue@2.5.3/dist/vue.js\"></script>\n\n<div id='demo'>\n  <template v-for='category in categories'>\n    <div v-if=\"category.blogs.length > 0\">\n      <h2>{{category.name}}</h2>\n      <ul>\n        <li v-for='blog in category.blogs'>{{blog.title}} - {{blog.img}}</li>\n      </ul>\n    </div>\n  </template>\n</div>\n```\n\n```javascript\nnew Vue({\n  el: '#demo',\n  data: {\n    categories: [\n      { \n        name: 'カテゴリ1',\n        blogs: [\n          {\n            title: \"タイトル1\",\n            img: 'https://goo.gl/hvjbc4'\n          },\n          {\n            title: \"タイトル2\",\n            img: 'https://goo.gl/hvjbc4'\n          },\n          {\n            title: \"タイトル3\",\n            img: 'https://goo.gl/hvjbc4'\n          }\n        ]\n      },\n      { \n        name: 'カテゴリ2',\n        blogs: []\n      },\n      { \n        name: 'カテゴリ3',\n        blogs: [\n          {\n            title: \"タイトル1\",\n            img: 'https://goo.gl/hvjbc4'\n          },\n          {\n            title: \"タイトル2\",\n            img: 'https://goo.gl/hvjbc4'\n          }\n        ]\n      }\n    ]\n  }\n})\n```\n\n\n# いろいろ試した話\n\n弊社ではCMSを開発しているのですが、そこでかなりの時間ハマってしまったので共有しておこうと思い記事を書かせていただきました。\n\n普段は、CMS( https://start.eat.auto/ )の機能開発をしていて、Vue.js, jQuery, Ruby on Railsとかを使っているWebエンジニア1年目のペーペーです。これ以下はだらだらと書くので読む必要はないと思います！\n\n## 検索編1 [ v-for ネスト ]でぐぐった\n\n私のドハマリ日のまずはじめはGoogle先生に頼ろうとして、日本語での検索からスタートしました。\n\n```js\nvar doc = document.querySelectorAll('h3 > a');\nvar tmp = \"\";\ndoc.forEach(function(val,index){\n   // tmp += index + '. ' + val.innerHTML + \"\\n\";\n   tmp += `${index+1}. ${val.innerHTML} \\n`;\n});\nconsole.log(tmp);\n```\n\n1. リストレンダリング — Vue.js \n1. 体で覚えるVue.js - v-repeatネスト編 〜 JSおくのほそ道 #027 - Qiita \n1. vue.js - Nested arrays of objects and v-for - Stack Overflow \n1. Vue.jsの入れ子のComponentで {{ Hoge.fuga }} を渡したいだけの人生 \n1. 【Vue.js】v-forでリスト表示してみる – Snaplog \n1. Vue.js で el がネストしてる場合の処理 · GitHub \n1. Vue.jsでv-repeatをネストするには - console.lealog(); \n1. v-forとv-ifでリストレンダリング制御したいと思っていた俺がアホだった \n1. Vue.js で文字やリストを動的に表示する | Cubix \n1. Vue.jsメモ \n\n唯一それっぽい記事がでてきたのは[体で覚えるVue.js - v-repeatネスト編 〜 JSおくのほそ道 #027 - Qiita](https://qiita.com/hosomichi/items/6f22ebd15bcc0afe1ab0)でしたがv-repeatのネストでvue.jsのversion0.12の環境ではこれが正解みたいです。\n\nそう。日本語で情報がまったく出てこなかったのです。\nこれは同じところにハマるひとのためにもQiitaに書かなきゃねと思って今回の記事を書いてます〜\n\n## 公式ドキュメントを漁る\n\nここからが長かったのですが、公式ドキュメントを読みこんだり、v-repeatは本当に動かないのかなと試したり、配列のlengthを取得してぐるぐるしようとしたりしてました。\n\n公式ドキュメントの読みこみついでにタイポ修正の [PR](https://github.com/vuejs/jp.vuejs.org/pull/333) を、前職の同僚 [@ re-fort](https://qiita.com/re-fort) に手伝ってもらいながら出したりしました。初めてのOSS系のPRで緊張しながら出したら1分ほどで [@ kazupon](https://qiita.com/kazupon) さんにマージされたので「平日の昼間にはやっ」と思ったのですが、こちらも仕事中にPR出したのでそんなものかもしれないですね。\n\n## 検索編2 [ v-for nest ]でぐぐった\n\n1. vue.js - Nested arrays of objects and v-for - Stack Overflow \n1. vuejs2 - Vue.js v-for nested in Table - Stack Overflow \n1. リストレンダリング — Vue.js \n1. Nested v-for question - Laracasts \n1. v-forとv-ifでリストレンダリング制御したいと思っていた俺がアホだった。 - Qiita \n1. Vue.jsの入れ子のComponentで {{ Hoge.fuga }} を渡したいだけの人生 \n1. 体で覚えるVue.js - v-repeatネスト編 〜 JSおくのほそ道 #027 - Qiita \n1. Vue.jsでv-repeatをネストするには - console.lealog(); \n1. v-ref inside v-for is not defined · Issue #2044 · vuejs/vue · GitHub \n1. How do I create a nested v-for · Issue #3465 · vuejs/vue · GitHub \n\n日本語は10件に出てこなかったのに、英語だと一番上にでてきた。。\nありがとうStack Overflow。\n\n[Nested arrays of objects and v-for](https://stackoverflow.com/questions/37534249/nested-arrays-of-objects-and-v-for)\n\nこれが今回の教訓ですね。英語で調べたら一発ででてきました。  \n最初から英語で検索すればよかったと思います。英語嫌いなひともぜひ調べ物は英語で。\n\n調べ物は\n\n1. 日本語で検索する\n1. ドキュメント読む\n1. 英語で検索する\n\nの３つをちゃんと全部やりましょう。\n\n## 最終的な微修正\n\nv-forでネストできるとわかったあとはまあ問題もなく順調にコーディングが終わり、最終的には以下のような感じに落ち着きました。\n\n```html\n<div id='demo'>\n  <div v-for='category in categories'>\n    <h2>{{ category.name }}</h2>\n    <ul v-for='blog in category.blogs'>\n      <li>{{blog.title}} - {{blog.img}}</li>\n    </ul>\n  </div>\n</div>\n```\n\n上記のように書くとブログを持っていないカテゴリも表示してしまうので`<template>`と`v-if`でなんとなく制御してみました。\n\n```html\n<script src=\"https://unpkg.com/vue@2.5.3/dist/vue.js\"></script>\n\n<div id='demo'>\n  <template v-for='category in categories'>\n    <div v-if=\"category.blogs.length > 0\">\n      <h2>{{category.name}}</h2>\n      <ul>\n        <li v-for='blog in category.blogs'>{{blog.title}} - {{blog.img}}</li>\n      </ul>\n    </div>\n  </template>\n</div>\n```\n\n## まとめ\n1. v-forはネストできる\n1. 検索はちゃんと英語でも調べる\n\n\n\n\n","coediting":false,"comments_count":0,"created_at":"2017-12-11T12:34:57+09:00","group":null,"id":"cf05e949e14aaac7f757","likes_count":64,"private":false,"reactions_count":0,"stocks_count":56,"tags":[{"name":"JavaScript","versions":[]},{"name":"Vue.js","versions":[]},{"name":"フロントエンド","versions":[]}],"title":"Vue.jsでv-forをネストする","updated_at":"2018-06-19T18:47:25+09:00","url":"https://qiita.com/ykhirao/items/cf05e949e14aaac7f757","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>一昨日に公開されたPaizaのまさとらんさんの記事を見て、土曜日にさっさと作ってみたやっつけWebアプリケーションですので温かい目でみてくださると嬉しいです。<br>\nMavoライブラリは、GitHubをJSONファイルの保管庫として使えるので、それが以前から作りたかったYouTube保管庫にぴったりだったので作ってみました。<br>\n編集リクエストとかコメント大歓迎なので間違ってるところあればツッコミいただけると助かります。</p>\n\n<h1>\n<span id=\"参考\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83\"><i class=\"fa fa-link\"></i></a>参考</h1>\n\n<h3>\n<span id=\"まさとらんさんの記事\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%95%E3%81%A8%E3%82%89%E3%82%93%E3%81%95%E3%82%93%E3%81%AE%E8%A8%98%E4%BA%8B\"><i class=\"fa fa-link\"></i></a>まさとらんさんの記事</h3>\n\n<blockquote>\n<p>いつもながら自分が知らないライブラリの記事の使い方をわかりやすく書いていただけています<br>\nこちらを読んでから私の記事を読んでくださると理解しやすいかと思います<br>\n<a href=\"http://paiza.hatenablog.com/entry/2017/07/13/%EF%BB%BFHTML%E3%83%BBCSS%E3%81%A0%E3%81%91%E3%81%A7Web%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E9%96%8B%E7%99%BA%E3%81%A7%E3%81%8D%E3%82%8B%E3%80%8CMavo%E3%80%8D%E3%81%A7GitHub%E3%82%92%E3%83%87%E3%83%BC\" rel=\"nofollow noopener\" target=\"_blank\">HTML・CSSだけでWebアプリを開発できる「Mavo」でGitHubをデータベース代わりにしてみた！</a></p>\n</blockquote>\n\n<h3>\n<span id=\"公式ライブラリ\" class=\"fragment\"></span><a href=\"#%E5%85%AC%E5%BC%8F%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA\"><i class=\"fa fa-link\"></i></a>公式ライブラリ</h3>\n\n<blockquote>\n<p><a href=\"https://mavo.io/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://mavo.io/</a></p>\n</blockquote>\n\n<h3>\n<span id=\"私が作成したアプリケーション\" class=\"fragment\"></span><a href=\"#%E7%A7%81%E3%81%8C%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\"><i class=\"fa fa-link\"></i></a>私が作成したアプリケーション</h3>\n\n<blockquote>\n<p><a href=\"https://ykhirao.github.io/qiita/mavo/\" rel=\"nofollow noopener\" target=\"_blank\">GitHub.io</a></p>\n</blockquote>\n\n<h4>\n<span id=\"スクリーンショット\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88\"><i class=\"fa fa-link\"></i></a>スクリーンショット</h4>\n\n<p><a href=\"https://camo.qiitausercontent.com/88e34156ce8128e3ee3e5f270999bdd25804c290/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f62333435666538662d323861632d303933342d643436632d6563343036353561316139662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1592\" alt=\"スクリーンショット 2017-07-16 0.25.02.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fb345fe8f-28ac-0934-d46c-ec40655a1a9f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c5a20c3a74d95f12c283c837a5c7dc08\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/b345fe8f-28ac-0934-d46c-ec40655a1a9f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fb345fe8f-28ac-0934-d46c-ec40655a1a9f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=523efc5314e755bff4196d73f677b285 1x\" loading=\"lazy\"></a></p>\n\n<h4>\n<span id=\"使い方とか\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9%E3%81%A8%E3%81%8B\"><i class=\"fa fa-link\"></i></a>使い方とか</h4>\n\n<ul>\n<li>YouTubeをiframeで表示しているだけのWebサイト</li>\n<li>曲の追加などはWeb上でできて、GitHubにリンクデータなどが保存できる</li>\n<li>私みたいに同じ曲をずっとループ再生してる人には便利</li>\n<li>SAVEを押すと、JSONがみなさんのローカルに保存される設定にしているので好きにいじってください</li>\n</ul>\n\n<h1>\n<span id=\"使用技術\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E7%94%A8%E6%8A%80%E8%A1%93\"><i class=\"fa fa-link\"></i></a>使用技術</h1>\n\n<ul>\n<li>HTML &amp; CSS</li>\n<li>\n<a href=\"http://getskeleton.com/\" rel=\"nofollow noopener\" target=\"_blank\">Skeleton</a>: Bootstrapみたいなやつ</li>\n<li>Mavo</li>\n<li>jQuery</li>\n</ul>\n\n<p>くらいなのでソースコードは読めると思います。</p>\n\n<p>Mavo: <code>mv-storage</code>みたいなところ<br>\nSkeleton: <code>&lt;div class=\"row one column\"&gt;</code>みたいなところ</p>\n\n<h1>\n<span id=\"ソースコード全文\" class=\"fragment\"></span><a href=\"#%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E5%85%A8%E6%96%87\"><i class=\"fa fa-link\"></i></a>ソースコード全文</h1>\n\n<p><a href=\"https://github.com/ykhirao/qiita/blob/master/mavo/index.html\" rel=\"nofollow noopener\" target=\"_blank\">GitHub</a>を確認ください。</p>\n\n<p>以下、わかりやすくコードを改変したバージョンです。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"nt\">&lt;html</span> <span class=\"na\">lang=</span><span class=\"s\">\"ja\"</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;head&gt;</span>\n  <span class=\"nt\">&lt;meta</span> <span class=\"na\">charset=</span><span class=\"s\">\"utf-8\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;title&gt;</span>Mavo :)<span class=\"nt\">&lt;/title&gt;</span>\n\n  <span class=\"c\">&lt;!-- skeleton --&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">href=</span><span class=\"s\">\"../css/skeleton.css\"</span><span class=\"nt\">&gt;</span>\n\n  <span class=\"c\">&lt;!-- mavo --&gt;</span>\n  <span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"https://get.mavo.io/mavo.min.js\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">href=</span><span class=\"s\">\"https://get.mavo.io/mavo.css\"</span><span class=\"nt\">/&gt;</span>\n\n<span class=\"nt\">&lt;/head&gt;</span>\n<span class=\"nt\">&lt;body&gt;</span>\n\n  <span class=\"c\">&lt;!-- mv-appでひとつのアプリが始まる --&gt;</span>\n  <span class=\"nt\">&lt;div</span> <span class=\"na\">mv-app=</span><span class=\"s\">\"youtube-qiita\"</span> <span class=\"na\">mv-init=</span><span class=\"s\">\"https://github.com/ykhirao/data\"</span> <span class=\"na\">mv-storage=</span><span class=\"s\">\"local\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"container\"</span><span class=\"nt\">&gt;</span>\n\n      <span class=\"c\">&lt;!-- ボタン --&gt;</span>\n      <span class=\"nt\">&lt;button</span> <span class=\"na\">type=</span><span class=\"s\">\"button\"</span> <span class=\"na\">id=</span><span class=\"s\">\"video_row\"</span> <span class=\"na\">class=</span><span class=\"s\">\"button button-primary\"</span><span class=\"nt\">&gt;</span>Close All Video<span class=\"nt\">&lt;/button&gt;</span>\n\n      <span class=\"c\">&lt;!-- mv-multipleが複数要素の設定画面 --&gt;</span>\n      <span class=\"nt\">&lt;div</span> <span class=\"na\">property=</span><span class=\"s\">\"youtube\"</span> <span class=\"na\">mv-multiple</span><span class=\"nt\">&gt;</span>\n\n        <span class=\"c\">&lt;!-- 設定画面 --&gt;</span>\n        <span class=\"nt\">&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"three columns\"</span> <span class=\"na\">property=</span><span class=\"s\">\"title\"</span><span class=\"nt\">&gt;</span>title<span class=\"nt\">&lt;/span&gt;</span>\n        <span class=\"nt\">&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"three columns\"</span> <span class=\"na\">property=</span><span class=\"s\">\"author\"</span><span class=\"nt\">&gt;</span>author<span class=\"nt\">&lt;/span&gt;</span>\n        <span class=\"nt\">&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"six columns\"</span> <span class=\"na\">property=</span><span class=\"s\">\"details\"</span><span class=\"nt\">&gt;</span>details<span class=\"nt\">&lt;/span&gt;</span>\n        <span class=\"nt\">&lt;button</span> <span class=\"na\">type=</span><span class=\"s\">\"button\"</span> <span class=\"na\">class=</span><span class=\"s\">\"three columns\"</span> <span class=\"na\">onclick=</span><span class=\"s\">\"video_open(this)\"</span> <span class=\"na\">data-url=</span><span class=\"s\">\"[url]\"</span><span class=\"nt\">&gt;</span>Open <span class=\"err\">&amp;</span> Set Video<span class=\"nt\">&lt;/button&gt;</span>\n        <span class=\"nt\">&lt;button</span> <span class=\"na\">type=</span><span class=\"s\">\"button\"</span> <span class=\"na\">class=</span><span class=\"s\">\"three columns\"</span> <span class=\"na\">onclick=</span><span class=\"s\">\"video_close(this)\"</span> <span class=\"na\">data-url=</span><span class=\"s\">\"[url]\"</span><span class=\"nt\">&gt;</span>Close Video<span class=\"nt\">&lt;/button&gt;</span>\n        <span class=\"nt\">&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"six columns\"</span> <span class=\"na\">property=</span><span class=\"s\">\"url\"</span><span class=\"nt\">&gt;</span>https://www.youtube.com/<span class=\"nt\">&lt;/span&gt;</span>\n\n        <span class=\"c\">&lt;!-- Video --&gt;</span>\n        <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"row video_row\"</span> <span class=\"na\">style=</span><span class=\"s\">\"display: none;\"</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;iframe</span> <span class=\"na\">width=</span><span class=\"s\">\"560\"</span> <span class=\"na\">height=</span><span class=\"s\">\"315\"</span> <span class=\"na\">frameborder=</span><span class=\"s\">\"0\"</span> <span class=\"na\">allowfullscreen</span><span class=\"nt\">&gt;&lt;/iframe&gt;</span>\n        <span class=\"nt\">&lt;/div&gt;</span>\n\n      <span class=\"nt\">&lt;/div&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n\n  <span class=\"nt\">&lt;script&gt;</span>\n    <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#video_row</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">click</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(){</span>\n      <span class=\"kd\">let</span> <span class=\"nx\">klass</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">).</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">id</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n      <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">.</span><span class=\"dl\">'</span> <span class=\"o\">+</span> <span class=\"nx\">klass</span><span class=\"p\">).</span><span class=\"nx\">hide</span><span class=\"p\">();</span>\n    <span class=\"p\">});</span>\n\n    <span class=\"kd\">function</span> <span class=\"nx\">close_all_video</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">){</span>\n      <span class=\"kd\">let</span> <span class=\"nx\">klass</span> <span class=\"o\">=</span> <span class=\"nx\">target</span><span class=\"p\">.</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">id</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n      <span class=\"k\">if</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">.</span><span class=\"nx\">hasClass</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">button-primary</span><span class=\"dl\">\"</span><span class=\"p\">)){</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">.</span><span class=\"dl\">'</span> <span class=\"o\">+</span> <span class=\"nx\">klass</span><span class=\"p\">).</span><span class=\"nx\">show</span><span class=\"p\">();</span>\n      <span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"p\">{</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">.</span><span class=\"dl\">'</span> <span class=\"o\">+</span> <span class=\"nx\">klass</span><span class=\"p\">).</span><span class=\"nx\">hide</span><span class=\"p\">();</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"kd\">function</span> <span class=\"nx\">video_open</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">){</span>\n      <span class=\"c1\">// URL取得</span>\n      <span class=\"kd\">let</span> <span class=\"nx\">url</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">).</span><span class=\"nx\">data</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">url</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n      <span class=\"nx\">url</span> <span class=\"o\">=</span> <span class=\"nx\">set_embed_url</span><span class=\"p\">(</span><span class=\"nx\">url</span><span class=\"p\">);</span>\n\n      <span class=\"c1\">// Videoのshow()とsrc設定</span>\n      <span class=\"kd\">let</span> <span class=\"nx\">video_target</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">).</span><span class=\"nx\">parent</span><span class=\"p\">().</span><span class=\"nx\">parent</span><span class=\"p\">().</span><span class=\"nx\">next</span><span class=\"p\">();</span>\n      <span class=\"nx\">video_target</span><span class=\"p\">.</span><span class=\"nx\">show</span><span class=\"p\">();</span>\n      <span class=\"nx\">video_target</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">iframe</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">src</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"nx\">url</span><span class=\"p\">);</span>\n      <span class=\"c1\">// set_iframe_src(video_target, url);</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"kd\">function</span> <span class=\"nx\">set_iframe_src</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">,</span> <span class=\"nx\">url</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"kd\">let</span> <span class=\"nx\">iframe</span> <span class=\"o\">=</span> <span class=\"nx\">target</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">iframe</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n      <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">iframe</span><span class=\"p\">.</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">src</span><span class=\"dl\">'</span><span class=\"p\">)</span> <span class=\"o\">!==</span> <span class=\"nx\">url</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"nx\">iframe</span><span class=\"p\">.</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">src</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"nx\">url</span><span class=\"p\">)</span>\n      <span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"k\">if</span><span class=\"p\">(</span> <span class=\"k\">typeof</span> <span class=\"nx\">iframe</span><span class=\"p\">.</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">src</span><span class=\"dl\">'</span><span class=\"p\">)</span> <span class=\"o\">===</span> <span class=\"dl\">'</span><span class=\"s1\">undefined</span><span class=\"dl\">'</span> <span class=\"o\">||</span> <span class=\"nx\">iframe</span><span class=\"p\">.</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">src</span><span class=\"dl\">'</span><span class=\"p\">)</span> <span class=\"o\">===</span> <span class=\"kc\">false</span> <span class=\"p\">){</span>\n        <span class=\"nx\">iframe</span><span class=\"p\">.</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">src</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"nx\">url</span><span class=\"p\">)</span>\n      <span class=\"p\">}</span>\n      <span class=\"k\">return</span> <span class=\"kc\">false</span><span class=\"p\">;</span> <span class=\"c1\">// 設定されていたら更新なし</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"c1\">// iframeのsrcを\"\"にして強制終了</span>\n    <span class=\"kd\">function</span> <span class=\"nx\">video_close</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"kd\">let</span> <span class=\"nx\">video_target</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">).</span><span class=\"nx\">parent</span><span class=\"p\">().</span><span class=\"nx\">parent</span><span class=\"p\">().</span><span class=\"nx\">next</span><span class=\"p\">();</span>\n      <span class=\"nx\">video_target</span><span class=\"p\">.</span><span class=\"nx\">hide</span><span class=\"p\">();</span>\n      <span class=\"nx\">video_target</span><span class=\"p\">.</span><span class=\"nx\">find</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">iframe</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">src</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"dl\">\"\"</span><span class=\"p\">);</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"cm\">/*\n    * From: https://www.youtube.com/watch?v=video_id\n    * To: https://www.youtube.com/embed/video_id\n    */</span>\n    <span class=\"kd\">function</span> <span class=\"nx\">set_embed_url</span><span class=\"p\">(</span><span class=\"nx\">url</span><span class=\"p\">){</span>\n      <span class=\"k\">if</span> <span class=\"p\">(</span> <span class=\"nx\">url</span><span class=\"p\">.</span><span class=\"nx\">indexOf</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">embed</span><span class=\"dl\">'</span><span class=\"p\">)</span> <span class=\"o\">!=</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">return</span> <span class=\"nx\">url</span><span class=\"p\">;</span>\n      <span class=\"kd\">let</span> <span class=\"nx\">arr</span> <span class=\"o\">=</span> <span class=\"nx\">url</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">?v=</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n      <span class=\"nx\">url</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">https://www.youtube.com/embed/</span><span class=\"dl\">'</span> <span class=\"o\">+</span> <span class=\"nx\">arr</span><span class=\"p\">[</span><span class=\"nx\">arr</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">];</span>\n      <span class=\"k\">return</span> <span class=\"nx\">url</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n  <span class=\"nt\">&lt;/script&gt;</span>\n<span class=\"nt\">&lt;/body&gt;</span>\n<span class=\"nt\">&lt;/html&gt;</span>\n\n</code></pre></div></div>\n\n<h1>\n<span id=\"ソースコード解説\" class=\"fragment\"></span><a href=\"#%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E8%A7%A3%E8%AA%AC\"><i class=\"fa fa-link\"></i></a>ソースコード解説</h1>\n\n<h2>\n<span id=\"ライブラリの読み込み\" class=\"fragment\"></span><a href=\"#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF\"><i class=\"fa fa-link\"></i></a>ライブラリの読み込み</h2>\n\n<p>ただ読み込むだけですぐ使えます。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code>  <span class=\"c\">&lt;!-- skeleton --&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">href=</span><span class=\"s\">\"../css/skeleton.css\"</span><span class=\"nt\">&gt;</span>\n\n  <span class=\"c\">&lt;!-- mavo --&gt;</span>\n  <span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"https://get.mavo.io/mavo.min.js\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">href=</span><span class=\"s\">\"https://get.mavo.io/mavo.css\"</span><span class=\"nt\">/&gt;</span>\n</code></pre></div></div>\n\n<h2>\n<span id=\"mavoアプリの作成\" class=\"fragment\"></span><a href=\"#mavo%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>Mavoアプリの作成</h2>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div</span> <span class=\"na\">mv-app=</span><span class=\"s\">\"youtube-qiita\"</span> <span class=\"na\">mv-init=</span><span class=\"s\">\"https://github.com/ykhirao/data\"</span> <span class=\"na\">mv-storage=</span><span class=\"s\">\"local\"</span><span class=\"nt\">&gt;</span>\n</code></pre></div></div>\n\n<h3>\n<span id=\"アプリ名\" class=\"fragment\"></span><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E5%90%8D\"><i class=\"fa fa-link\"></i></a>アプリ名</h3>\n\n<p><code>mv-app=\"youtube-qiita\"</code>がアプリの名前になります。<br>\n個々の名前で<code>youtube-qiita.json</code>みたいにGitHubにデータが保存されます。</p>\n\n<h3>\n<span id=\"データの保存先\" class=\"fragment\"></span><a href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E4%BF%9D%E5%AD%98%E5%85%88\"><i class=\"fa fa-link\"></i></a>データの保存先</h3>\n\n<p>基本的には<code>mv-storage</code>だけの設定で大丈夫です。</p>\n\n<ul>\n<li>GitHub管理</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div</span> <span class=\"na\">mv-app=</span><span class=\"s\">\"youtube-qiita\"</span> <span class=\"na\">mv-storage=</span><span class=\"s\">\"https://github.com/ykhirao/data\"</span><span class=\"nt\">&gt;</span>\n</code></pre></div></div>\n\n<ul>\n<li>local管理</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div</span> <span class=\"na\">mv-app=</span><span class=\"s\">\"youtube-qiita\"</span> <span class=\"na\">mv-storage=</span><span class=\"s\">\"local\"</span><span class=\"nt\">&gt;</span>\n</code></pre></div></div>\n\n<ul>\n<li>保存はローカル、データがなかったら最初だけGitHubから読み取る</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div</span> <span class=\"na\">mv-app=</span><span class=\"s\">\"youtube-qiita\"</span> <span class=\"na\">mv-init=</span><span class=\"s\">\"https://github.com/ykhirao/data\"</span> <span class=\"na\">mv-storage=</span><span class=\"s\">\"local\"</span><span class=\"nt\">&gt;</span>\n</code></pre></div></div>\n\n<p><a href=\"https://mavo.io/docs/storage/\" rel=\"nofollow noopener\" target=\"_blank\">詳しくはライブラリのStorageを参照</a></p>\n\n<h4>\n<span id=\"保存できる先\" class=\"fragment\"></span><a href=\"#%E4%BF%9D%E5%AD%98%E3%81%A7%E3%81%8D%E3%82%8B%E5%85%88\"><i class=\"fa fa-link\"></i></a>保存できる先</h4>\n\n<p>基本的にどのブランチだろうが、レポジトリの深いところでもいけそう</p>\n\n<blockquote>\n<p><a href=\"https://github.com/%5Busername%5D/%5Breponame%5D\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/[username]/[reponame]</a><br>\nMavo will create a file called [appname].json in that repository.<br>\n<a href=\"https://github.com/%5Busername%5D/%5Breponame%5D/%5Bfilename%5D\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/[username]/[reponame]/[filename]</a><br>\nMavo will assume a default branch of master<br>\n<a href=\"https://github.com/%5Busername%5D/%5Breponame%5D/blob/%5Bbranch%5D/%5Bfilename%5D\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/[username]/[reponame]/blob/[branch]/[filename]</a><br>\nThe URL Github gives you when using its file browser. As specific as it gets, Mavo makes no assumptions.<br>\n<a href=\"https://raw.githubusercontent.com/%5Busername%5D/%5Breponame%5D/%5Bbranch%5D/%5Bfilename%5D\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://raw.githubusercontent.com/[username]/[reponame]/[branch]/[filename]</a><br>\nThe URL that shows when you click the button Raw from the Github file browser.</p>\n</blockquote>\n\n<p>私はマスターブランチ以外はコンフリクトで失敗しています。</p>\n\n<h3>\n<span id=\"アプリのデータ構造\" class=\"fragment\"></span><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0\"><i class=\"fa fa-link\"></i></a>アプリのデータ構造</h3>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;div</span> <span class=\"na\">property=</span><span class=\"s\">\"youtube\"</span> <span class=\"na\">mv-multiple</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;span</span> <span class=\"na\">property=</span><span class=\"s\">\"title\"</span><span class=\"nt\">&gt;</span>title<span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;span</span> <span class=\"na\">property=</span><span class=\"s\">\"author\"</span><span class=\"nt\">&gt;</span>author<span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;span</span> <span class=\"na\">property=</span><span class=\"s\">\"details\"</span><span class=\"nt\">&gt;</span>details<span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;span</span> <span class=\"na\">property=</span><span class=\"s\">\"url\"</span><span class=\"nt\">&gt;</span>https://www.youtube.com/<span class=\"nt\">&lt;/span&gt;</span>\n</code></pre></div></div>\n\n<p>こういうデータ構造だと</p>\n\n<div class=\"code-frame\" data-lang=\"json\">\n<div class=\"code-lang\"><span class=\"bold\">youtube-qiita.json</span></div>\n<div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"youtube\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n    </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"title\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ハッピーエンド\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://www.youtube.com/watch?v=hzWDXge2ANM\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"author\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"back number\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"details\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Music Video\"</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">]</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div>\n</div>\n\n<p>こんな感じでデータが保存されます。</p>\n\n<h1>\n<span id=\"なにに使えるだろう\" class=\"fragment\"></span><a href=\"#%E3%81%AA%E3%81%AB%E3%81%AB%E4%BD%BF%E3%81%88%E3%82%8B%E3%81%A0%E3%82%8D%E3%81%86\"><i class=\"fa fa-link\"></i></a>なにに使えるだろう？</h1>\n\n<p>基本はテキストベースで<br>\n自分、もしくは身内だけのアプリとかには使えそうです。</p>\n\n<p>キャッシュと同じといえば同じだとは思いますが、<br>\nデータベースを使わなくてユーザーが自分で変更できるし、作ってて楽しかったです。</p>\n\n<h2>\n<span id=\"qiita-team的な何か\" class=\"fragment\"></span><a href=\"#qiita-team%E7%9A%84%E3%81%AA%E4%BD%95%E3%81%8B\"><i class=\"fa fa-link\"></i></a>Qiita Team的な何か</h2>\n\n<p>GitHubサインインしたら共同編集の非公開レポジトリでいろいろできそう。</p>\n\n<p>MarkdownプラグインがあるみたいなのでMDで書く社内知恵袋的なものが作れるかも<br>\n<a href=\"https://plugins.mavo.io/plugin/markdown\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://plugins.mavo.io/plugin/markdown</a></p>\n\n<h2>\n<span id=\"私が作ったような個人的なwebサイト\" class=\"fragment\"></span><a href=\"#%E7%A7%81%E3%81%8C%E4%BD%9C%E3%81%A3%E3%81%9F%E3%82%88%E3%81%86%E3%81%AA%E5%80%8B%E4%BA%BA%E7%9A%84%E3%81%AAweb%E3%82%B5%E3%82%A4%E3%83%88\"><i class=\"fa fa-link\"></i></a>私が作ったような個人的なWebサイト</h2>\n\n<p><a href=\"https://ykhirao.github.io/qiita/mavo/\" rel=\"nofollow noopener\" target=\"_blank\">GitHub.io</a><br>\n4時間くらいでささっと作りたいページ作れたので、そんなに学習コスト高くないと思います。<br>\nただjQueryと相性が悪い気がします。自分はmv-multipleで作ったところのDOM操作がうまく行かなかったです。</p>\n\n<h2>\n<span id=\"その他\" class=\"fragment\"></span><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\"><i class=\"fa fa-link\"></i></a>その他</h2>\n\n<p>誰かサーバーレスとかSPAっぽいサンプルアプリ作ってください…！！</p>\n\n<h1>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h1>\n\n<p>最後までお読みいただきありがとうございました！！！！</p>\n","body":"# はじめに\n\n一昨日に公開されたPaizaのまさとらんさんの記事を見て、土曜日にさっさと作ってみたやっつけWebアプリケーションですので温かい目でみてくださると嬉しいです。\nMavoライブラリは、GitHubをJSONファイルの保管庫として使えるので、それが以前から作りたかったYouTube保管庫にぴったりだったので作ってみました。\n編集リクエストとかコメント大歓迎なので間違ってるところあればツッコミいただけると助かります。\n\n# 参考\n\n### まさとらんさんの記事\n> いつもながら自分が知らないライブラリの記事の使い方をわかりやすく書いていただけています\n> こちらを読んでから私の記事を読んでくださると理解しやすいかと思います\n> [HTML・CSSだけでWebアプリを開発できる「Mavo」でGitHubをデータベース代わりにしてみた！](http://paiza.hatenablog.com/entry/2017/07/13/%EF%BB%BFHTML%E3%83%BBCSS%E3%81%A0%E3%81%91%E3%81%A7Web%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E9%96%8B%E7%99%BA%E3%81%A7%E3%81%8D%E3%82%8B%E3%80%8CMavo%E3%80%8D%E3%81%A7GitHub%E3%82%92%E3%83%87%E3%83%BC)\n\n### 公式ライブラリ\n> https://mavo.io/\n\n### 私が作成したアプリケーション\n> [GitHub.io](https://ykhirao.github.io/qiita/mavo/)\n\n#### スクリーンショット\n<img width=\"1592\" alt=\"スクリーンショット 2017-07-16 0.25.02.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/b345fe8f-28ac-0934-d46c-ec40655a1a9f.png\">\n\n#### 使い方とか\n- YouTubeをiframeで表示しているだけのWebサイト\n- 曲の追加などはWeb上でできて、GitHubにリンクデータなどが保存できる\n- 私みたいに同じ曲をずっとループ再生してる人には便利\n- SAVEを押すと、JSONがみなさんのローカルに保存される設定にしているので好きにいじってください\n\n# 使用技術\n- HTML & CSS\n- [Skeleton](http://getskeleton.com/): Bootstrapみたいなやつ\n- Mavo\n- jQuery\n\nくらいなのでソースコードは読めると思います。\n\nMavo: `mv-storage`みたいなところ\nSkeleton: `<div class=\"row one column\">`みたいなところ\n\n# ソースコード全文\n[GitHub](https://github.com/ykhirao/qiita/blob/master/mavo/index.html)を確認ください。\n\n以下、わかりやすくコードを改変したバージョンです。\n\n```html\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>Mavo :)</title>\n  \n  <!-- skeleton -->\n  <link rel=\"stylesheet\" href=\"../css/skeleton.css\">\n\n  <!-- mavo -->\n  <script src=\"https://get.mavo.io/mavo.min.js\"></script>\n  <link rel=\"stylesheet\" href=\"https://get.mavo.io/mavo.css\"/>\n\n</head>\n<body>\n\n  <!-- mv-appでひとつのアプリが始まる -->\n  <div mv-app=\"youtube-qiita\" mv-init=\"https://github.com/ykhirao/data\" mv-storage=\"local\">\n    <div class=\"container\">\n      \n      <!-- ボタン -->\n      <button type=\"button\" id=\"video_row\" class=\"button button-primary\">Close All Video</button>\n\n      <!-- mv-multipleが複数要素の設定画面 -->\n      <div property=\"youtube\" mv-multiple>\n        \n        <!-- 設定画面 -->\n        <span class=\"three columns\" property=\"title\">title</span>\n        <span class=\"three columns\" property=\"author\">author</span>\n        <span class=\"six columns\" property=\"details\">details</span>\n        <button type=\"button\" class=\"three columns\" onclick=\"video_open(this)\" data-url=\"[url]\">Open & Set Video</button>\n        <button type=\"button\" class=\"three columns\" onclick=\"video_close(this)\" data-url=\"[url]\">Close Video</button>\n        <span class=\"six columns\" property=\"url\">https://www.youtube.com/</span>\n\n        <!-- Video -->\n        <div class=\"row video_row\" style=\"display: none;\">\n          <iframe width=\"560\" height=\"315\" frameborder=\"0\" allowfullscreen></iframe>\n        </div>\n        \n      </div>\n    </div>\n  </div>\n\n  <script>\n    $('#video_row').click(function(){\n      let klass = $(this).attr(\"id\");\n      $('.' + klass).hide();\n    });\n\n    function close_all_video(target){\n      let klass = target.attr(\"id\");\n      if(target.hasClass(\"button-primary\")){\n        $('.' + klass).show();\n      } else {\n        $('.' + klass).hide();\n      }\n    }\n\n    function video_open(target){\n      // URL取得\n      let url = $(target).data('url');\n      url = set_embed_url(url);\n      \n      // Videoのshow()とsrc設定\n      let video_target = $(target).parent().parent().next();\n      video_target.show();\n      video_target.find('iframe').attr('src', url);\n      // set_iframe_src(video_target, url);\n    }\n\n    function set_iframe_src(target, url) {\n      let iframe = target.find('iframe');\n      if (iframe.attr('src') !== url) {\n        iframe.attr('src', url)\n      } else if( typeof iframe.attr('src') === 'undefined' || iframe.attr('src') === false ){\n        iframe.attr('src', url)\n      }\n      return false; // 設定されていたら更新なし\n    }\n\n    // iframeのsrcを\"\"にして強制終了\n    function video_close(target) {\n      let video_target = $(target).parent().parent().next();\n      video_target.hide();\n      video_target.find('iframe').attr('src', \"\");\n    }\n    \n    /*\n    * From: https://www.youtube.com/watch?v=video_id\n    * To: https://www.youtube.com/embed/video_id\n    */\n    function set_embed_url(url){\n      if ( url.indexOf('embed') != -1) return url;\n      let arr = url.split('?v=');\n      url = 'https://www.youtube.com/embed/' + arr[arr.length-1];\n      return url;\n    }\n\n  </script>\n</body>\n</html>\n\n```\n\n# ソースコード解説\n\n## ライブラリの読み込み\nただ読み込むだけですぐ使えます。\n\n```html\n  <!-- skeleton -->\n  <link rel=\"stylesheet\" href=\"../css/skeleton.css\">\n\n  <!-- mavo -->\n  <script src=\"https://get.mavo.io/mavo.min.js\"></script>\n  <link rel=\"stylesheet\" href=\"https://get.mavo.io/mavo.css\"/>\n```\n\n## Mavoアプリの作成\n\n```html\n<div mv-app=\"youtube-qiita\" mv-init=\"https://github.com/ykhirao/data\" mv-storage=\"local\">\n```\n\n### アプリ名\n`mv-app=\"youtube-qiita\"`がアプリの名前になります。\n個々の名前で`youtube-qiita.json`みたいにGitHubにデータが保存されます。\n\n### データの保存先\n\n基本的には`mv-storage`だけの設定で大丈夫です。\n\n- GitHub管理\n\n```html\n<div mv-app=\"youtube-qiita\" mv-storage=\"https://github.com/ykhirao/data\">\n```\n\n- local管理\n\n```html\n<div mv-app=\"youtube-qiita\" mv-storage=\"local\">\n```\n\n- 保存はローカル、データがなかったら最初だけGitHubから読み取る\n\n```html\n<div mv-app=\"youtube-qiita\" mv-init=\"https://github.com/ykhirao/data\" mv-storage=\"local\">\n```\n\n[詳しくはライブラリのStorageを参照](https://mavo.io/docs/storage/)\n\n#### 保存できる先\n\n基本的にどのブランチだろうが、レポジトリの深いところでもいけそう\n\n> https://github.com/[username]/[reponame]\nMavo will create a file called [appname].json in that repository.\nhttps://github.com/[username]/[reponame]/[filename]\nMavo will assume a default branch of master\nhttps://github.com/[username]/[reponame]/blob/[branch]/[filename]\nThe URL Github gives you when using its file browser. As specific as it gets, Mavo makes no assumptions.\nhttps://raw.githubusercontent.com/[username]/[reponame]/[branch]/[filename]\nThe URL that shows when you click the button Raw from the Github file browser.\n\n私はマスターブランチ以外はコンフリクトで失敗しています。\n\n\n### アプリのデータ構造\n\n\n```html\n<div property=\"youtube\" mv-multiple>\n  <span property=\"title\">title</span>\n  <span property=\"author\">author</span>\n  <span property=\"details\">details</span>\n  <span property=\"url\">https://www.youtube.com/</span>\n```\n\nこういうデータ構造だと\n\n```youtube-qiita.json\n{\n  \"youtube\": [\n    {\n      \"title\": \"ハッピーエンド\",\n      \"url\": \"https://www.youtube.com/watch?v=hzWDXge2ANM\",\n      \"author\": \"back number\",\n      \"details\": \"Music Video\"\n    }\n  ]\n}\n```\n\nこんな感じでデータが保存されます。\n\n# なにに使えるだろう？\n\n基本はテキストベースで\n自分、もしくは身内だけのアプリとかには使えそうです。\n\nキャッシュと同じといえば同じだとは思いますが、\nデータベースを使わなくてユーザーが自分で変更できるし、作ってて楽しかったです。\n\n## Qiita Team的な何か\n\nGitHubサインインしたら共同編集の非公開レポジトリでいろいろできそう。\n\nMarkdownプラグインがあるみたいなのでMDで書く社内知恵袋的なものが作れるかも\nhttps://plugins.mavo.io/plugin/markdown\n\n## 私が作ったような個人的なWebサイト\n\n[GitHub.io](https://ykhirao.github.io/qiita/mavo/)\n4時間くらいでささっと作りたいページ作れたので、そんなに学習コスト高くないと思います。\nただjQueryと相性が悪い気がします。自分はmv-multipleで作ったところのDOM操作がうまく行かなかったです。\n\n## その他\n誰かサーバーレスとかSPAっぽいサンプルアプリ作ってください…！！\n\n# 最後に\n\n最後までお読みいただきありがとうございました！！！！\n\n","coediting":false,"comments_count":0,"created_at":"2017-07-16T01:19:13+09:00","group":null,"id":"1e07a7b84ab605310bcb","likes_count":21,"private":false,"reactions_count":0,"stocks_count":12,"tags":[{"name":"JavaScript","versions":[]},{"name":"GitHub","versions":[]},{"name":"SPA","versions":[]},{"name":"GithubPages","versions":[]},{"name":"Mavo","versions":[]}],"title":"【Mavo】GitHubをDataのストレージ利用したWebアプリケーション","updated_at":"2018-03-06T00:11:06+09:00","url":"https://qiita.com/ykhirao/items/1e07a7b84ab605310bcb","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>昔フォームのTitleとCommentを2つくっつけてと依頼が来たことがありました。<br>\n（2つの入力欄を上下矢印だけで移動させたいというフォームです）<br>\nその時はJSよくわかんなかったのと、人日的にギリギリだったのでその実装は断ったのですが、<br>\nちょっと前にそういえばと思い出したので、昔技術的にも時間的にもできなかった壁を越えようかと思い実装しました。</p>\n\n<h1>\n<span id=\"完成形\" class=\"fragment\"></span><a href=\"#%E5%AE%8C%E6%88%90%E5%BD%A2\"><i class=\"fa fa-link\"></i></a>完成形</h1>\n\n<p>タイトルとコメント欄が薄い線で区切られていて、上下矢印を使うと行き来できるというUI・UXのフォームを作りました。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/3532f483019d0bcbc367d8f36e9a4281814726c8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f61313830323934342d353732352d613762662d363130372d3761623963306164616136622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fa1802944-5725-a7bf-6107-7ab9c0adaa6b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cbac59d47a875b3930f375aa8daa91d6\" alt=\"スクリーンショット 2017-06-20 13.36.28.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/a1802944-5725-a7bf-6107-7ab9c0adaa6b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fa1802944-5725-a7bf-6107-7ab9c0adaa6b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6cb8a4d8a0d2fceb920c8472555c21a0 1x\" loading=\"lazy\"></a></p>\n\n<p>完成形サンプルはこちら<a href=\"https://ykhirao.github.io/qiita/script/input2.html\" rel=\"nofollow noopener\" target=\"_blank\">GitHub.io</a>からどうぞ。</p>\n\n<h2>\n<span id=\"移動方法\" class=\"fragment\"></span><a href=\"#%E7%A7%BB%E5%8B%95%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>移動方法</h2>\n\n<h3>\n<span id=\"title--comment\" class=\"fragment\"></span><a href=\"#title--comment\"><i class=\"fa fa-link\"></i></a>title &gt; comment</h3>\n\n<ol>\n<li>Enter</li>\n<li>矢印下</li>\n</ol>\n\n<h3>\n<span id=\"comment--title\" class=\"fragment\"></span><a href=\"#comment--title\"><i class=\"fa fa-link\"></i></a>comment &gt; title</h3>\n\n<ul>\n<li>テキストエリアでカーソルが初めの文字　かつ　矢印上押下\n\n<ul>\n<li>(type=\"textarea\"で普通は上下キーが使えるので、矢印上キーの制御条件を追加した)</li>\n</ul>\n</li>\n</ul>\n\n<h1>\n<span id=\"コードの話\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E8%A9%B1\"><i class=\"fa fa-link\"></i></a>コードの話</h1>\n\n<p>全文は下に乗せています。</p>\n\n<h2>\n<span id=\"エンターの制御\" class=\"fragment\"></span><a href=\"#%E3%82%A8%E3%83%B3%E3%82%BF%E3%83%BC%E3%81%AE%E5%88%B6%E5%BE%A1\"><i class=\"fa fa-link\"></i></a>エンターの制御</h2>\n\n<p>タイトル入力欄での挙動は、エンターと↓でコメント入力欄へ移動する。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>\n<span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#title_area</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">keydown</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">if</span><span class=\"p\">(</span> <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">keyCode</span> <span class=\"o\">==</span> <span class=\"mi\">13</span> <span class=\"o\">||</span> <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">keyCode</span> <span class=\"o\">==</span> <span class=\"mi\">40</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">#comment_area</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">select</span><span class=\"p\">();</span>\n    <span class=\"k\">return</span> <span class=\"kc\">false</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">});</span>\n\n</code></pre></div></div>\n\n<h2>\n<span id=\"キャレットテキストボックス内のカーソルの制御\" class=\"fragment\"></span><a href=\"#%E3%82%AD%E3%83%A3%E3%83%AC%E3%83%83%E3%83%88%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E5%86%85%E3%81%AE%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E3%81%AE%E5%88%B6%E5%BE%A1\"><i class=\"fa fa-link\"></i></a>キャレット（テキストボックス内のカーソル）の制御</h2>\n\n<p>これキャレットっていいます。テキスト入力中に出てくる | 縦棒<br>\n前回これの名前が調べられなかったのもあって、調査できませんでした。<br>\nselectionStartでカーソルの位置を取得しています。</p>\n\n<p>コメント入力欄での挙動は、↑でタイトル入力欄へ移動する。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>\n<span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#comment_area</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">keydown</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">if</span><span class=\"p\">(</span> <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">keyCode</span> <span class=\"o\">==</span> <span class=\"mi\">38</span> <span class=\"o\">&amp;&amp;</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">selectionStart</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">#title_area</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">select</span><span class=\"p\">();</span>\n    <span class=\"k\">return</span> <span class=\"kc\">false</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">});</span>\n\n</code></pre></div></div>\n\n<h2>\n<span id=\"コード全文とリンク\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E5%85%A8%E6%96%87%E3%81%A8%E3%83%AA%E3%83%B3%E3%82%AF\"><i class=\"fa fa-link\"></i></a>コード全文とリンク</h2>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code>\n<span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"nt\">&lt;html</span> <span class=\"na\">lang=</span><span class=\"s\">\"ja\"</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;head&gt;</span>\n  <span class=\"nt\">&lt;meta</span> <span class=\"na\">charset=</span><span class=\"s\">\"UTF-8\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;meta</span> <span class=\"na\">name=</span><span class=\"s\">\"viewport\"</span> <span class=\"na\">content=</span><span class=\"s\">\"width=device-width, initial-scale=1.0\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;meta</span> <span class=\"na\">http-equiv=</span><span class=\"s\">\"X-UA-Compatible\"</span> <span class=\"na\">content=</span><span class=\"s\">\"ie=edge\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;title&gt;</span>Two Inputs<span class=\"nt\">&lt;/title&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"shortcut icon\"</span> <span class=\"na\">href=</span><span class=\"s\">\"https://avatars2.githubusercontent.com/u/25813519?v=3&amp;u=d753df8c82ccc1c536b10d3dc771ad0faaaa8b62&amp;s=400\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"c\">&lt;!-- min jQuery CDN --&gt;</span>\n  <span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"https://code.jquery.com/jquery-3.2.1.min.js\"</span> <span class=\"na\">integrity=</span><span class=\"s\">\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\"</span> <span class=\"na\">crossorigin=</span><span class=\"s\">\"anonymous\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n  <span class=\"c\">&lt;!-- Latest compiled and minified CSS --&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">href=</span><span class=\"s\">\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"</span> <span class=\"na\">integrity=</span><span class=\"s\">\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\"</span> <span class=\"na\">crossorigin=</span><span class=\"s\">\"anonymous\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"c\">&lt;!-- Optional theme --&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">href=</span><span class=\"s\">\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css\"</span> <span class=\"na\">integrity=</span><span class=\"s\">\"sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp\"</span> <span class=\"na\">crossorigin=</span><span class=\"s\">\"anonymous\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"c\">&lt;!-- Latest compiled and minified JavaScript --&gt;</span>\n  <span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"</span> <span class=\"na\">integrity=</span><span class=\"s\">\"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa\"</span> <span class=\"na\">crossorigin=</span><span class=\"s\">\"anonymous\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n  <span class=\"nt\">&lt;style&gt;</span>\n    <span class=\"nt\">ul</span> <span class=\"p\">{</span>\n      <span class=\"nl\">-webkit-padding-start</span><span class=\"p\">:</span> <span class=\"m\">0px</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"nt\">li</span> <span class=\"p\">{</span>\n      <span class=\"c\">/*background-color: #222222;*/</span>\n      <span class=\"nl\">margin-left</span><span class=\"p\">:</span> <span class=\"m\">20px</span><span class=\"p\">;</span>\n      <span class=\"nl\">display</span><span class=\"p\">:</span> <span class=\"n\">inline-block</span><span class=\"p\">;</span>\n      <span class=\"nl\">font-size</span><span class=\"p\">:</span> <span class=\"m\">14px</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"nt\">ul</span> <span class=\"o\">&gt;</span> <span class=\"nt\">li</span> <span class=\"o\">&gt;</span> <span class=\"nt\">span</span> <span class=\"p\">{</span>\n      <span class=\"nl\">margin-left</span><span class=\"p\">:</span> <span class=\"m\">15px</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n  <span class=\"nt\">&lt;/style&gt;</span>\n<span class=\"nt\">&lt;/head&gt;</span>\n<span class=\"nt\">&lt;body&gt;</span>\n  <span class=\"nt\">&lt;nav</span> <span class=\"na\">class=</span><span class=\"s\">\"navbar navbar-default navbar-static-top\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"container\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"container-fluid\"</span><span class=\"nt\">&gt;</span>\n        <span class=\"c\">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span>\n        <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"navbar-header\"</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;a</span> <span class=\"na\">class=</span><span class=\"s\">\"navbar-brand\"</span> <span class=\"na\">href=</span><span class=\"s\">\"#\"</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"glyphicon glyphicon-home\"</span> <span class=\"na\">aria-hidden=</span><span class=\"s\">\"true\"</span><span class=\"nt\">&gt;&lt;/span&gt;</span>\n          <span class=\"nt\">&lt;/a&gt;</span>\n        <span class=\"nt\">&lt;/div&gt;</span>\n      <span class=\"nt\">&lt;/div&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/nav&gt;</span>\n  <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"container\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"c\">&lt;!-- タイトルと本文の領域を分けない --&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"input-group\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"input-group-addon\"</span><span class=\"nt\">&gt;&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"glyphicon glyphicon-share-alt\"</span> <span class=\"na\">aria-hidden=</span><span class=\"s\">\"true\"</span> <span class=\"na\">id=</span><span class=\"s\">\"click_set_table\"</span><span class=\"nt\">&gt;&lt;/span&gt;&lt;/span&gt;</span>\n      <span class=\"nt\">&lt;input</span> <span class=\"na\">type=</span><span class=\"s\">\"textarea\"</span> <span class=\"na\">class=</span><span class=\"s\">\"form-control\"</span> <span class=\"na\">id=</span><span class=\"s\">\"title_area\"</span> <span class=\"na\">aria-label=</span><span class=\"s\">\"Amount (to the nearest dollar)\"</span> <span class=\"na\">placeholder=</span><span class=\"s\">\"title\"</span> <span class=\"na\">style=</span><span class=\"s\">\"border-bottom: 0px;\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;textarea</span> <span class=\"na\">class=</span><span class=\"s\">\"form-control\"</span> <span class=\"na\">rows=</span><span class=\"s\">\"5\"</span> <span class=\"na\">id=</span><span class=\"s\">\"comment_area\"</span> <span class=\"na\">style=</span><span class=\"s\">\"border-radius: 0px; border-top: 0px;\"</span> <span class=\"na\">placeholder=</span><span class=\"s\">\"comment\"</span> <span class=\"nt\">&gt;&lt;/textarea&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;script&gt;</span>\n    <span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(){</span>\n      <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#title_area</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">keydown</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"k\">if</span><span class=\"p\">(</span> <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">keyCode</span> <span class=\"o\">==</span> <span class=\"mi\">13</span> <span class=\"o\">||</span> <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">keyCode</span> <span class=\"o\">==</span> <span class=\"mi\">40</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n          <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">#comment_area</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">select</span><span class=\"p\">();</span>\n          <span class=\"k\">return</span> <span class=\"kc\">false</span><span class=\"p\">;</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">});</span>\n      <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#comment_area</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">keydown</span><span class=\"dl\">\"</span><span class=\"p\">,</span> <span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"k\">if</span><span class=\"p\">(</span> <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">keyCode</span> <span class=\"o\">==</span> <span class=\"mi\">38</span> <span class=\"o\">&amp;&amp;</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">selectionStart</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n          <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">#title_area</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">select</span><span class=\"p\">();</span>\n          <span class=\"k\">return</span> <span class=\"kc\">false</span><span class=\"p\">;</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">});</span>\n    <span class=\"p\">})();</span>\n  <span class=\"nt\">&lt;/script&gt;</span>\n<span class=\"nt\">&lt;/body&gt;</span>\n<span class=\"nt\">&lt;/html&gt;</span>\n</code></pre></div></div>\n\n<h1>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h1>\n\n<p>昔できなくて諦めた実装ができるようになって嬉しさを感じていながら、<br>\n上下ボタンだけで移動できるUI・UXがいいのかはわかんないですけど<br>\nまたユーザー次第だとは思いますが、面白い実装を試せて楽しかったです。</p>\n\n<p>何かあったら編集リクエストなげていただければ反映しますので、<br>\n最後まで見ていただきありがとうございます！</p>\n","body":"# はじめに\n\n昔フォームのTitleとCommentを2つくっつけてと依頼が来たことがありました。\n（2つの入力欄を上下矢印だけで移動させたいというフォームです）\nその時はJSよくわかんなかったのと、人日的にギリギリだったのでその実装は断ったのですが、\nちょっと前にそういえばと思い出したので、昔技術的にも時間的にもできなかった壁を越えようかと思い実装しました。\n\n# 完成形\nタイトルとコメント欄が薄い線で区切られていて、上下矢印を使うと行き来できるというUI・UXのフォームを作りました。\n\n![スクリーンショット 2017-06-20 13.36.28.png](https://qiita-image-store.s3.amazonaws.com/0/112929/a1802944-5725-a7bf-6107-7ab9c0adaa6b.png)\n\n完成形サンプルはこちら[GitHub.io](https://ykhirao.github.io/qiita/script/input2.html)からどうぞ。\n\n## 移動方法\n### title > comment \n1. Enter\n2. 矢印下\n\n\n### comment > title\n- テキストエリアでカーソルが初めの文字　かつ　矢印上押下\n    - (type=\"textarea\"で普通は上下キーが使えるので、矢印上キーの制御条件を追加した)\n\n# コードの話\n\n全文は下に乗せています。\n\n## エンターの制御\n\nタイトル入力欄での挙動は、エンターと↓でコメント入力欄へ移動する。\n\n```js\n\n$('#title_area').on(\"keydown\", function(e) {\n  if( e.keyCode == 13 || e.keyCode == 40) {\n    $(\"#comment_area\").select();\n    return false;\n  }\n});\n\n```\n\n\n## キャレット（テキストボックス内のカーソル）の制御\nこれキャレットっていいます。テキスト入力中に出てくる | 縦棒\n前回これの名前が調べられなかったのもあって、調査できませんでした。\nselectionStartでカーソルの位置を取得しています。\n\nコメント入力欄での挙動は、↑でタイトル入力欄へ移動する。\n\n```js\n\n$('#comment_area').on(\"keydown\", function(e) {\n  if( e.keyCode == 38 && this.selectionStart == 0) {\n    $(\"#title_area\").select();\n    return false;\n  }\n});\n\n```\n\n## コード全文とリンク\n\n```html\n\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Two Inputs</title>\n  <link rel=\"shortcut icon\" href=\"https://avatars2.githubusercontent.com/u/25813519?v=3&u=d753df8c82ccc1c536b10d3dc771ad0faaaa8b62&s=400\">\n  <!-- min jQuery CDN -->\n  <script src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n  <!-- Latest compiled and minified CSS -->\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\" crossorigin=\"anonymous\">\n  <!-- Optional theme -->\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css\" integrity=\"sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp\" crossorigin=\"anonymous\">\n  <!-- Latest compiled and minified JavaScript -->\n  <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\" integrity=\"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa\" crossorigin=\"anonymous\"></script>\n  <style>\n    ul {\n      -webkit-padding-start: 0px;\n    }\n    li {\n      /*background-color: #222222;*/\n      margin-left: 20px;\n      display: inline-block;\n      font-size: 14px;\n    }\n    ul > li > span {\n      margin-left: 15px;\n    }\n  </style>\n</head>\n<body>\n  <nav class=\"navbar navbar-default navbar-static-top\">\n    <div class=\"container\">\n      <div class=\"container-fluid\">\n        <!-- Brand and toggle get grouped for better mobile display -->\n        <div class=\"navbar-header\">\n          <a class=\"navbar-brand\" href=\"#\">\n            <span class=\"glyphicon glyphicon-home\" aria-hidden=\"true\"></span>\n          </a>\n        </div>\n      </div>\n    </div>\n  </nav>\n  <div class=\"container\">\n    <!-- タイトルと本文の領域を分けない -->\n    <div class=\"input-group\">\n      <span class=\"input-group-addon\"><span class=\"glyphicon glyphicon-share-alt\" aria-hidden=\"true\" id=\"click_set_table\"></span></span>\n      <input type=\"textarea\" class=\"form-control\" id=\"title_area\" aria-label=\"Amount (to the nearest dollar)\" placeholder=\"title\" style=\"border-bottom: 0px;\">\n      <textarea class=\"form-control\" rows=\"5\" id=\"comment_area\" style=\"border-radius: 0px; border-top: 0px;\" placeholder=\"comment\" ></textarea>\n    </div>\n  </div>\n  <script>\n    (function(){\n      $('#title_area').on(\"keydown\", function(e) {\n        if( e.keyCode == 13 || e.keyCode == 40) {\n          $(\"#comment_area\").select();\n          return false;\n        }\n      });\n      $('#comment_area').on(\"keydown\", function(e) {\n        if( e.keyCode == 38 && this.selectionStart == 0) {\n          $(\"#title_area\").select();\n          return false;\n        }\n      });\n    })();\n  </script>\n</body>\n</html>\n```\n\n\n# 最後に\n\n昔できなくて諦めた実装ができるようになって嬉しさを感じていながら、\n上下ボタンだけで移動できるUI・UXがいいのかはわかんないですけど\nまたユーザー次第だとは思いますが、面白い実装を試せて楽しかったです。\n\n何かあったら編集リクエストなげていただければ反映しますので、\n最後まで見ていただきありがとうございます！\n","coediting":false,"comments_count":0,"created_at":"2017-06-20T18:12:11+09:00","group":null,"id":"888d80e83fee9b97c2a6","likes_count":9,"private":false,"reactions_count":0,"stocks_count":13,"tags":[{"name":"HTML","versions":[]},{"name":"JavaScript","versions":[]},{"name":"jQuery","versions":[]}],"title":"フォームで2個のinputをくっつけるUIの話","updated_at":"2017-06-20T19:42:57+09:00","url":"https://qiita.com/ykhirao/items/888d80e83fee9b97c2a6","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>Markdownが大好きなのですが、Markdownで表をつくるのは嫌いです。<br>\nなのでTSVとかからMDに変換するツールを<br>\nGitHub.ioにhtmlファイルとして置いてきたのでぜひ使ってください。<br>\n改行とかはいってると駄目だし、結合とかされてる表だと駄目とか<br>\nいろいろありますが普通に使う分には使えると思います。</p>\n\n<h1>\n<span id=\"結果\" class=\"fragment\"></span><a href=\"#%E7%B5%90%E6%9E%9C\"><i class=\"fa fa-link\"></i></a>結果</h1>\n\n<p>エクセルからコピペするだけでMarkdownの表に変換してくれます。<br>\nJS使っているのでGitHubが落ちていない限りすぐ作れると思います。</p>\n\n<p>CSVかTSVかのデータを入力して<br>\n\"Create ✓\"か\"➜\"みたいなのを押すと変換してくれます。</p>\n\n<p><a href=\"https://ykhirao.github.io/qiita/script/index.html\" rel=\"nofollow noopener\" target=\"_blank\">GitHub.io</a>からどうぞ。</p>\n\n<p>サンプル画像<a href=\"https://camo.qiitausercontent.com/0ceb854308b50bc4ef80875b9d6d9cf9c4e87022/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34333665343935612d616535622d393936392d626665662d6237386466623733623465382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F436e495a-ae5b-9969-bfef-b78dfb73b4e8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=77afc2241880d3a47a2c360fdc86028e\" alt=\"スクリーンショット 2017-06-19 18.59.25.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/436e495a-ae5b-9969-bfef-b78dfb73b4e8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F436e495a-ae5b-9969-bfef-b78dfb73b4e8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5ccc940379b3e1d03d9c9e596b5fd744 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"データ\" class=\"fragment\"></span><a href=\"#%E3%83%87%E3%83%BC%E3%82%BF\"><i class=\"fa fa-link\"></i></a>データ</h2>\n\n<p><qiita-embed-ogp src=\"https://ja.wikipedia.org/wiki/NBA\"></qiita-embed-ogp></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/9469110eef4ab666bf41db3adc2e56d07425e9e5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f31393261623035312d633439332d366635312d346337312d3835613338333062616164662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F192ab051-c493-6f51-4c71-85a3830baadf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=30bec7a06433523a67f7307a9685930b\" alt=\"スクリーンショット 2017-06-19 19.14.01.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/192ab051-c493-6f51-4c71-85a3830baadf.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F192ab051-c493-6f51-4c71-85a3830baadf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=21bc832e758ca2b99bbc5258cafdd7be 1x\" loading=\"lazy\"></a></p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>地区  チーム   創設年   本拠地\nサウスウェスト   ダラス・マーベリックス DAL  Dallas Mavericks 1980    テキサス州ダラス アメリカン・エアラインズ・センター\n    ヒューストン・ロケッツ HOU  Houston Rockets  1967    テキサス州ヒューストン トヨタセンター\n    メンフィス・グリズリーズ MEM  Memphis Grizzlies 1995    テネシー州メンフィス フェデックス・フォーラム\n    ニューオーリンズ・ペリカンズ NOP  New Orleans Pelicans    1988    ルイジアナ州ニューオーリンズ スムージー・キング・センター\n</code></pre></div></div>\n\n<p>これがこうなるのでheadを入れ替えて</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>|head|head|head|head|\n|:-:|:-:|:-:|:-:|\n|地区|チーム|創設年|本拠地|\n|サウスウェスト|ダラス・マーベリックス DAL  Dallas Mavericks|1980|テキサス州ダラス アメリカン・エアラインズ・センター|\n||ヒューストン・ロケッツ HOU  Houston Rockets|1967|テキサス州ヒューストン トヨタセンター|\n||メンフィス・グリズリーズ MEM  Memphis Grizzlies|1995|テネシー州メンフィス フェデックス・フォーラム|\n||ニューオーリンズ・ペリカンズ NOP  New Orleans Pelicans|1988|ルイジアナ州ニューオーリンズ スムージー・キング・センター|\n\n# headを入れ替える\n|地区|チーム|創設年|本拠地|\n|:-:|:-:|:-:|:-:|\n|サウスウェスト|ダラス・マーベリックス DAL  Dallas Mavericks|1980|テキサス州ダラス アメリカン・エアラインズ・センター|\n||ヒューストン・ロケッツ HOU  Houston Rockets|1967|テキサス州ヒューストン トヨタセンター|\n||メンフィス・グリズリーズ MEM  Memphis Grizzlies|1995|テネシー州メンフィス フェデックス・フォーラム|\n||ニューオーリンズ・ペリカンズ NOP  New Orleans Pelicans|1988|ルイジアナ州ニューオーリンズ スムージー・キング・センター|\n</code></pre></div></div>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">地区</th>\n<th style=\"text-align: center\">チーム</th>\n<th style=\"text-align: center\">創設年</th>\n<th style=\"text-align: center\">本拠地</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">サウスウェスト</td>\n<td style=\"text-align: center\">ダラス・マーベリックス DAL  Dallas Mavericks</td>\n<td style=\"text-align: center\">1980</td>\n<td style=\"text-align: center\">テキサス州ダラス アメリカン・エアラインズ・センター</td>\n</tr>\n<tr>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\">ヒューストン・ロケッツ HOU  Houston Rockets</td>\n<td style=\"text-align: center\">1967</td>\n<td style=\"text-align: center\">テキサス州ヒューストン トヨタセンター</td>\n</tr>\n<tr>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\">メンフィス・グリズリーズ MEM  Memphis Grizzlies</td>\n<td style=\"text-align: center\">1995</td>\n<td style=\"text-align: center\">テネシー州メンフィス フェデックス・フォーラム</td>\n</tr>\n<tr>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\">ニューオーリンズ・ペリカンズ NOP  New Orleans Pelicans</td>\n<td style=\"text-align: center\">1988</td>\n<td style=\"text-align: center\">ルイジアナ州ニューオーリンズ スムージー・キング・センター</td>\n</tr>\n</tbody>\n</table>\n\n<p>こんな感じになります。</p>\n\n<h1>\n<span id=\"コード\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>コード</h1>\n\n<p>htmlファイル一つに収めてる件ときれいなコードじゃない件で<br>\nごめんなさいと言いたいですが、サンプル載せて置きます！！</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code>\n<span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"nt\">&lt;html</span> <span class=\"na\">lang=</span><span class=\"s\">\"ja\"</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;head&gt;</span>\n  <span class=\"nt\">&lt;meta</span> <span class=\"na\">charset=</span><span class=\"s\">\"UTF-8\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;meta</span> <span class=\"na\">name=</span><span class=\"s\">\"viewport\"</span> <span class=\"na\">content=</span><span class=\"s\">\"width=device-width, initial-scale=1.0\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;meta</span> <span class=\"na\">http-equiv=</span><span class=\"s\">\"X-UA-Compatible\"</span> <span class=\"na\">content=</span><span class=\"s\">\"ie=edge\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;title&gt;</span>Set Table<span class=\"nt\">&lt;/title&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"shortcut icon\"</span> <span class=\"na\">href=</span><span class=\"s\">\"https://avatars2.githubusercontent.com/u/25813519?v=3&amp;u=d753df8c82ccc1c536b10d3dc771ad0faaaa8b62&amp;s=400\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"c\">&lt;!-- min jQuery CDN --&gt;</span>\n  <span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"https://code.jquery.com/jquery-3.2.1.min.js\"</span> <span class=\"na\">integrity=</span><span class=\"s\">\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\"</span> <span class=\"na\">crossorigin=</span><span class=\"s\">\"anonymous\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n  <span class=\"c\">&lt;!-- Latest compiled and minified CSS --&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">href=</span><span class=\"s\">\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"</span> <span class=\"na\">integrity=</span><span class=\"s\">\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\"</span> <span class=\"na\">crossorigin=</span><span class=\"s\">\"anonymous\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"c\">&lt;!-- Optional theme --&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">href=</span><span class=\"s\">\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css\"</span> <span class=\"na\">integrity=</span><span class=\"s\">\"sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp\"</span> <span class=\"na\">crossorigin=</span><span class=\"s\">\"anonymous\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"c\">&lt;!-- Latest compiled and minified JavaScript --&gt;</span>\n  <span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"</span> <span class=\"na\">integrity=</span><span class=\"s\">\"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa\"</span> <span class=\"na\">crossorigin=</span><span class=\"s\">\"anonymous\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n  <span class=\"nt\">&lt;style&gt;</span>\n    <span class=\"nt\">ul</span> <span class=\"p\">{</span>\n      <span class=\"nl\">-webkit-padding-start</span><span class=\"p\">:</span> <span class=\"m\">0px</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"nt\">li</span> <span class=\"p\">{</span>\n      <span class=\"c\">/*background-color: #222222;*/</span>\n      <span class=\"nl\">margin-left</span><span class=\"p\">:</span> <span class=\"m\">20px</span><span class=\"p\">;</span>\n      <span class=\"nl\">display</span><span class=\"p\">:</span> <span class=\"n\">inline-block</span><span class=\"p\">;</span>\n      <span class=\"nl\">font-size</span><span class=\"p\">:</span> <span class=\"m\">14px</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"nt\">ul</span> <span class=\"o\">&gt;</span> <span class=\"nt\">li</span> <span class=\"o\">&gt;</span> <span class=\"nt\">span</span> <span class=\"p\">{</span>\n      <span class=\"nl\">margin-left</span><span class=\"p\">:</span> <span class=\"m\">15px</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n  <span class=\"nt\">&lt;/style&gt;</span>\n<span class=\"nt\">&lt;/head&gt;</span>\n<span class=\"nt\">&lt;body&gt;</span>\n  <span class=\"nt\">&lt;nav</span> <span class=\"na\">class=</span><span class=\"s\">\"navbar navbar-default navbar-static-top\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"container\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"container-fluid\"</span><span class=\"nt\">&gt;</span>\n        <span class=\"c\">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span>\n        <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"navbar-header\"</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;a</span> <span class=\"na\">class=</span><span class=\"s\">\"navbar-brand\"</span> <span class=\"na\">href=</span><span class=\"s\">\"#\"</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"glyphicon glyphicon-home\"</span> <span class=\"na\">aria-hidden=</span><span class=\"s\">\"true\"</span><span class=\"nt\">&gt;&lt;/span&gt;</span>\n          <span class=\"nt\">&lt;/a&gt;</span>\n        <span class=\"nt\">&lt;/div&gt;</span>\n      <span class=\"nt\">&lt;/div&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/nav&gt;</span>\n  <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"container\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"c\">&lt;!-- テーブル整形 --&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"input-group\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"input-group-addon\"</span><span class=\"nt\">&gt;&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"glyphicon glyphicon-circle-arrow-right create_table\"</span> <span class=\"na\">aria-hidden=</span><span class=\"s\">\"true\"</span> <span class=\"na\">id=</span><span class=\"s\">\"\"</span><span class=\"nt\">&gt;&lt;/span&gt;&lt;/span&gt;</span>\n      <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"form-control\"</span> <span class=\"na\">style=</span><span class=\"s\">\"border-bottom: 0px; height: 47px;\"</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"btn-group select_csv_tsv\"</span> <span class=\"na\">data-toggle=</span><span class=\"s\">\"buttons\"</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;label</span> <span class=\"na\">class=</span><span class=\"s\">\"btn btn-default check_btn active\"</span> <span class=\"na\">id=</span><span class=\"s\">\"csv_check\"</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;input</span> <span class=\"na\">type=</span><span class=\"s\">\"radio\"</span> <span class=\"na\">autocomplete=</span><span class=\"s\">\"off\"</span> <span class=\"na\">checked=</span><span class=\"s\">\"checked\"</span><span class=\"nt\">&gt;</span> CSV\n          <span class=\"nt\">&lt;/label&gt;</span>\n          <span class=\"nt\">&lt;label</span> <span class=\"na\">class=</span><span class=\"s\">\"btn btn-default check_btn\"</span> <span class=\"na\">id=</span><span class=\"s\">\"tsv_check\"</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;input</span> <span class=\"na\">type=</span><span class=\"s\">\"radio\"</span> <span class=\"na\">autocomplete=</span><span class=\"s\">\"off\"</span><span class=\"nt\">&gt;</span> TSV\n          <span class=\"nt\">&lt;/label&gt;</span>\n          <span class=\"nt\">&lt;label</span> <span class=\"na\">class=</span><span class=\"s\">\"btn btn-default\"</span> <span class=\"na\">id=</span><span class=\"s\">\"write_sample\"</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;span&gt;</span>Sample入力<span class=\"nt\">&lt;/span&gt;</span>\n          <span class=\"nt\">&lt;/label&gt;</span>\n          <span class=\"nt\">&lt;label</span> <span class=\"na\">class=</span><span class=\"s\">\"btn btn-default\"</span> <span class=\"na\">id=</span><span class=\"s\">\"delete_sample\"</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;span&gt;</span>Sample削除<span class=\"nt\">&lt;/span&gt;</span>\n          <span class=\"nt\">&lt;/label&gt;</span>\n          <span class=\"nt\">&lt;label</span> <span class=\"na\">class=</span><span class=\"s\">\"btn btn-default create_table\"</span> <span class=\"na\">id=</span><span class=\"s\">\"create_table\"</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;span&gt;</span>Create <span class=\"nt\">&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"glyphicon glyphicon-ok\"</span> <span class=\"na\">aria-hidden=</span><span class=\"s\">\"true\"</span><span class=\"nt\">&gt;&lt;/span&gt;&lt;/span&gt;</span>\n          <span class=\"nt\">&lt;/label&gt;</span>\n          <span class=\"nt\">&lt;label&gt;&lt;span</span> <span class=\"na\">class=</span><span class=\"s\">\"error\"</span><span class=\"nt\">&gt;&lt;/span&gt;&lt;/label&gt;</span>\n        <span class=\"nt\">&lt;/div&gt;</span>\n      <span class=\"nt\">&lt;/div&gt;</span>\n      <span class=\"nt\">&lt;textarea</span> <span class=\"na\">class=</span><span class=\"s\">\"form-control\"</span> <span class=\"na\">rows=</span><span class=\"s\">\"5\"</span> <span class=\"na\">id=</span><span class=\"s\">\"input_check\"</span> <span class=\"na\">style=</span><span class=\"s\">\"border-radius: 0px;\"</span> <span class=\"na\">placeholder=</span><span class=\"s\">\"input&amp;#13;&amp;#10;-----------&amp;#13;&amp;#10;sample1,sample2&amp;#13;&amp;#10;sample3,sample4\"</span> <span class=\"nt\">&gt;&lt;/textarea&gt;</span>\n      <span class=\"nt\">&lt;textarea</span> <span class=\"na\">class=</span><span class=\"s\">\"form-control\"</span> <span class=\"na\">rows=</span><span class=\"s\">\"8\"</span> <span class=\"na\">id=</span><span class=\"s\">\"output\"</span> <span class=\"na\">style=</span><span class=\"s\">\"border-radius: 0px; border-top: 0px;\"</span> <span class=\"na\">placeholder=</span><span class=\"s\">\"output&amp;#13;&amp;#10;-----------&amp;#13;&amp;#10;|head|head|&amp;#13;&amp;#10;|:-:|:-:|&amp;#13;&amp;#10;|sample1|sample2|&amp;#13;&amp;#10;|sample3|sample4|\"</span><span class=\"nt\">&gt;&lt;/textarea&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;script&gt;</span>\n    <span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(){</span>\n      <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#csv_check</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">click</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"kd\">function</span><span class=\"p\">(){</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#input_check</span><span class=\"dl\">'</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">placeholder</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">input</span><span class=\"se\">\\n</span><span class=\"s2\">-----------</span><span class=\"se\">\\n</span><span class=\"s2\">sample1,sample2</span><span class=\"se\">\\n</span><span class=\"s2\">sample3,sample4</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n      <span class=\"p\">});</span>\n      <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#tsv_check</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">click</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"kd\">function</span><span class=\"p\">(){</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#input_check</span><span class=\"dl\">'</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">placeholder</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">input</span><span class=\"se\">\\n</span><span class=\"s2\">-----------</span><span class=\"se\">\\n</span><span class=\"s2\">sample1 sample2</span><span class=\"se\">\\n</span><span class=\"s2\">sample3    sample4</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n      <span class=\"p\">});</span>\n      <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#write_sample</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">click</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"kd\">function</span><span class=\"p\">(){</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#tsv_check input</span><span class=\"dl\">'</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">click</span><span class=\"p\">();</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#input_check</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">val</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">sample1</span><span class=\"se\">\\t</span><span class=\"s2\">sample2</span><span class=\"se\">\\n</span><span class=\"s2\">sample3</span><span class=\"se\">\\t</span><span class=\"s2\">sample4</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n      <span class=\"p\">});</span>\n      <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#delete_sample</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">click</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"kd\">function</span><span class=\"p\">(){</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#input_check</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">val</span><span class=\"p\">(</span><span class=\"dl\">\"\"</span><span class=\"p\">);</span>\n      <span class=\"p\">});</span>\n      <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">.create_table</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">click</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"kd\">function</span><span class=\"p\">(){</span>\n        <span class=\"c1\">// Create head of a Table</span>\n        <span class=\"kd\">function</span> <span class=\"nx\">set_head</span><span class=\"p\">(</span><span class=\"nx\">num</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n          <span class=\"kd\">var</span> <span class=\"nx\">line1</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">|</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n          <span class=\"kd\">var</span> <span class=\"nx\">line2</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">|</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n          <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"nx\">num</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n            <span class=\"nx\">line1</span> <span class=\"o\">+=</span> <span class=\"dl\">\"</span><span class=\"s2\">head|</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n            <span class=\"nx\">line2</span> <span class=\"o\">+=</span> <span class=\"dl\">\"</span><span class=\"s2\">:-:|</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n          <span class=\"p\">}</span>\n          <span class=\"k\">return</span> <span class=\"nx\">line1</span> <span class=\"o\">+</span> <span class=\"dl\">\"</span><span class=\"se\">\\n</span><span class=\"dl\">\"</span> <span class=\"o\">+</span> <span class=\"nx\">line2</span> <span class=\"o\">+</span> <span class=\"dl\">\"</span><span class=\"se\">\\n</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n        <span class=\"p\">}</span>\n        <span class=\"c1\">// Create body of a Table</span>\n        <span class=\"kd\">function</span> <span class=\"nx\">set_body</span><span class=\"p\">(</span><span class=\"nx\">lines</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n          <span class=\"c1\">// 配列からbodyを作る</span>\n          <span class=\"kd\">function</span> <span class=\"nx\">set_line</span><span class=\"p\">(</span><span class=\"nx\">arr</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n            <span class=\"kd\">var</span> <span class=\"nx\">line</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">|</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n            <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"nx\">arr</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n              <span class=\"nx\">line</span> <span class=\"o\">+=</span> <span class=\"nx\">arr</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"dl\">\"</span><span class=\"s2\">|</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n            <span class=\"p\">}</span>\n            <span class=\"k\">return</span> <span class=\"nx\">line</span> <span class=\"o\">+</span> <span class=\"dl\">\"</span><span class=\"se\">\\n</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n          <span class=\"p\">}</span>\n          <span class=\"kd\">var</span> <span class=\"nx\">body</span> <span class=\"o\">=</span> <span class=\"dl\">\"\"</span>\n          <span class=\"k\">for</span><span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"nx\">lines</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n            <span class=\"nx\">line</span> <span class=\"o\">=</span> <span class=\"nx\">lines</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">]</span>\n            <span class=\"nx\">line_split</span> <span class=\"o\">=</span> <span class=\"nx\">line</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"nx\">separate</span><span class=\"p\">);</span>\n            <span class=\"nx\">body</span> <span class=\"o\">+=</span> <span class=\"nx\">set_line</span><span class=\"p\">(</span><span class=\"nx\">line_split</span><span class=\"p\">);</span>\n          <span class=\"p\">}</span>\n          <span class=\"k\">return</span> <span class=\"nx\">body</span><span class=\"p\">;</span>\n        <span class=\"p\">}</span>\n        <span class=\"c1\">// Select a Separate symbol</span>\n        <span class=\"kd\">var</span> <span class=\"nx\">idname</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">csv_check</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">.select_csv_tsv label</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">each</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(){</span>\n          <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">).</span><span class=\"nx\">hasClass</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">active</span><span class=\"dl\">\"</span><span class=\"p\">))</span> <span class=\"p\">{</span>\n            <span class=\"nx\">idname</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">).</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">id</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">});</span>\n        <span class=\"kd\">var</span> <span class=\"nx\">separate</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"se\">\\t</span><span class=\"dl\">\"</span><span class=\"p\">;</span>\n        <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">idname</span> <span class=\"o\">==</span> <span class=\"dl\">\"</span><span class=\"s2\">csv_check</span><span class=\"dl\">\"</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"nx\">separate</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">,</span><span class=\"dl\">\"</span><span class=\"p\">;</span> <span class=\"p\">}</span>\n        <span class=\"c1\">// Check input text</span>\n        <span class=\"kd\">var</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#input_check</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">val</span><span class=\"p\">();</span>\n        <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">.</span><span class=\"nx\">trim</span><span class=\"p\">().</span><span class=\"nx\">length</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"k\">return</span><span class=\"p\">;</span> <span class=\"p\">}</span>\n        <span class=\"kd\">var</span> <span class=\"nx\">lines</span> <span class=\"o\">=</span> <span class=\"nx\">text</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"se\">\\n</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n        <span class=\"kd\">var</span> <span class=\"nx\">width</span> <span class=\"o\">=</span> <span class=\"nx\">lines</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"nx\">separate</span><span class=\"p\">).</span><span class=\"nx\">length</span><span class=\"p\">;</span>\n        <span class=\"c1\">// Create text for output</span>\n        <span class=\"kd\">var</span> <span class=\"nx\">output</span> <span class=\"o\">=</span> <span class=\"nx\">set_head</span><span class=\"p\">(</span><span class=\"nx\">width</span><span class=\"p\">);</span>\n        <span class=\"nx\">output</span> <span class=\"o\">+=</span> <span class=\"nx\">set_body</span><span class=\"p\">(</span><span class=\"nx\">lines</span><span class=\"p\">);</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">#output</span><span class=\"dl\">'</span><span class=\"p\">).</span><span class=\"nx\">val</span><span class=\"p\">(</span><span class=\"nx\">output</span><span class=\"p\">);</span>\n      <span class=\"p\">});</span>\n    <span class=\"p\">})();</span>\n  <span class=\"nt\">&lt;/script&gt;</span>\n<span class=\"nt\">&lt;/body&gt;</span>\n<span class=\"nt\">&lt;/html&gt;</span>\n\n\n</code></pre></div></div>\n","body":"# はじめに\n\nMarkdownが大好きなのですが、Markdownで表をつくるのは嫌いです。\nなのでTSVとかからMDに変換するツールを\nGitHub.ioにhtmlファイルとして置いてきたのでぜひ使ってください。\n改行とかはいってると駄目だし、結合とかされてる表だと駄目とか\nいろいろありますが普通に使う分には使えると思います。\n\n# 結果\nエクセルからコピペするだけでMarkdownの表に変換してくれます。\nJS使っているのでGitHubが落ちていない限りすぐ作れると思います。\n\nCSVかTSVかのデータを入力して\n\"Create ✓\"か\"➜\"みたいなのを押すと変換してくれます。\n\n\n[GitHub.io](https://ykhirao.github.io/qiita/script/index.html)からどうぞ。\n\nサンプル画像![スクリーンショット 2017-06-19 18.59.25.png](https://qiita-image-store.s3.amazonaws.com/0/112929/436e495a-ae5b-9969-bfef-b78dfb73b4e8.png)\n\n\n\n## データ\nhttps://ja.wikipedia.org/wiki/NBA\n\n![スクリーンショット 2017-06-19 19.14.01.png](https://qiita-image-store.s3.amazonaws.com/0/112929/192ab051-c493-6f51-4c71-85a3830baadf.png)\n\n\n\n\n\n\n```\n地区\tチーム\t創設年\t本拠地\nサウスウェスト\tダラス・マーベリックス DAL  Dallas Mavericks\t1980\tテキサス州ダラス アメリカン・エアラインズ・センター\n\tヒューストン・ロケッツ HOU  Houston Rockets\t1967\tテキサス州ヒューストン トヨタセンター\n\tメンフィス・グリズリーズ MEM  Memphis Grizzlies\t1995\tテネシー州メンフィス フェデックス・フォーラム\n\tニューオーリンズ・ペリカンズ NOP  New Orleans Pelicans\t1988\tルイジアナ州ニューオーリンズ スムージー・キング・センター\n```\nこれがこうなるのでheadを入れ替えて\n\n```\n|head|head|head|head|\n|:-:|:-:|:-:|:-:|\n|地区|チーム|創設年|本拠地|\n|サウスウェスト|ダラス・マーベリックス DAL  Dallas Mavericks|1980|テキサス州ダラス アメリカン・エアラインズ・センター|\n||ヒューストン・ロケッツ HOU  Houston Rockets|1967|テキサス州ヒューストン トヨタセンター|\n||メンフィス・グリズリーズ MEM  Memphis Grizzlies|1995|テネシー州メンフィス フェデックス・フォーラム|\n||ニューオーリンズ・ペリカンズ NOP  New Orleans Pelicans|1988|ルイジアナ州ニューオーリンズ スムージー・キング・センター|\n\n# headを入れ替える\n|地区|チーム|創設年|本拠地|\n|:-:|:-:|:-:|:-:|\n|サウスウェスト|ダラス・マーベリックス DAL  Dallas Mavericks|1980|テキサス州ダラス アメリカン・エアラインズ・センター|\n||ヒューストン・ロケッツ HOU  Houston Rockets|1967|テキサス州ヒューストン トヨタセンター|\n||メンフィス・グリズリーズ MEM  Memphis Grizzlies|1995|テネシー州メンフィス フェデックス・フォーラム|\n||ニューオーリンズ・ペリカンズ NOP  New Orleans Pelicans|1988|ルイジアナ州ニューオーリンズ スムージー・キング・センター|\n```\n\n|地区|チーム|創設年|本拠地|\n|:-:|:-:|:-:|:-:|\n|サウスウェスト|ダラス・マーベリックス DAL  Dallas Mavericks|1980|テキサス州ダラス アメリカン・エアラインズ・センター|\n||ヒューストン・ロケッツ HOU  Houston Rockets|1967|テキサス州ヒューストン トヨタセンター|\n||メンフィス・グリズリーズ MEM  Memphis Grizzlies|1995|テネシー州メンフィス フェデックス・フォーラム|\n||ニューオーリンズ・ペリカンズ NOP  New Orleans Pelicans|1988|ルイジアナ州ニューオーリンズ スムージー・キング・センター|\n\n\nこんな感じになります。\n\n# コード\n\nhtmlファイル一つに収めてる件ときれいなコードじゃない件で\nごめんなさいと言いたいですが、サンプル載せて置きます！！\n\n```html\n\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Set Table</title>\n  <link rel=\"shortcut icon\" href=\"https://avatars2.githubusercontent.com/u/25813519?v=3&u=d753df8c82ccc1c536b10d3dc771ad0faaaa8b62&s=400\">\n  <!-- min jQuery CDN -->\n  <script src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n  <!-- Latest compiled and minified CSS -->\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\" crossorigin=\"anonymous\">\n  <!-- Optional theme -->\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css\" integrity=\"sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp\" crossorigin=\"anonymous\">\n  <!-- Latest compiled and minified JavaScript -->\n  <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\" integrity=\"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa\" crossorigin=\"anonymous\"></script>\n  <style>\n    ul {\n      -webkit-padding-start: 0px;\n    }\n    li {\n      /*background-color: #222222;*/\n      margin-left: 20px;\n      display: inline-block;\n      font-size: 14px;\n    }\n    ul > li > span {\n      margin-left: 15px;\n    }\n  </style>\n</head>\n<body>\n  <nav class=\"navbar navbar-default navbar-static-top\">\n    <div class=\"container\">\n      <div class=\"container-fluid\">\n        <!-- Brand and toggle get grouped for better mobile display -->\n        <div class=\"navbar-header\">\n          <a class=\"navbar-brand\" href=\"#\">\n            <span class=\"glyphicon glyphicon-home\" aria-hidden=\"true\"></span>\n          </a>\n        </div>\n      </div>\n    </div>\n  </nav>\n  <div class=\"container\">\n    <!-- テーブル整形 -->\n    <div class=\"input-group\">\n      <span class=\"input-group-addon\"><span class=\"glyphicon glyphicon-circle-arrow-right create_table\" aria-hidden=\"true\" id=\"\"></span></span>\n      <div class=\"form-control\" style=\"border-bottom: 0px; height: 47px;\">\n        <div class=\"btn-group select_csv_tsv\" data-toggle=\"buttons\">\n          <label class=\"btn btn-default check_btn active\" id=\"csv_check\">\n            <input type=\"radio\" autocomplete=\"off\" checked=\"checked\"> CSV\n          </label>\n          <label class=\"btn btn-default check_btn\" id=\"tsv_check\">\n            <input type=\"radio\" autocomplete=\"off\"> TSV\n          </label>\n          <label class=\"btn btn-default\" id=\"write_sample\">\n            <span>Sample入力</span>\n          </label>\n          <label class=\"btn btn-default\" id=\"delete_sample\">\n            <span>Sample削除</span>\n          </label>\n          <label class=\"btn btn-default create_table\" id=\"create_table\">\n            <span>Create <span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span></span>\n          </label>\n          <label><span class=\"error\"></span></label>\n        </div>\n      </div>\n      <textarea class=\"form-control\" rows=\"5\" id=\"input_check\" style=\"border-radius: 0px;\" placeholder=\"input&#13;&#10;-----------&#13;&#10;sample1,sample2&#13;&#10;sample3,sample4\" ></textarea>\n      <textarea class=\"form-control\" rows=\"8\" id=\"output\" style=\"border-radius: 0px; border-top: 0px;\" placeholder=\"output&#13;&#10;-----------&#13;&#10;|head|head|&#13;&#10;|:-:|:-:|&#13;&#10;|sample1|sample2|&#13;&#10;|sample3|sample4|\"></textarea>\n    </div>\n  </div>\n  <script>\n    (function(){\n      $('#csv_check').on('click', function(){\n        $('#input_check')[0].placeholder = \"input\\n-----------\\nsample1,sample2\\nsample3,sample4\";\n      });\n      $('#tsv_check').on('click', function(){\n        $('#input_check')[0].placeholder = \"input\\n-----------\\nsample1 sample2\\nsample3    sample4\";\n      });\n      $('#write_sample').on('click', function(){\n        $('#tsv_check input')[0].click();\n        $('#input_check').val(\"sample1\\tsample2\\nsample3\\tsample4\");\n      });\n      $('#delete_sample').on('click', function(){\n        $('#input_check').val(\"\");\n      });\n      $('.create_table').on('click', function(){\n        // Create head of a Table\n        function set_head(num) {\n          var line1 = \"|\";\n          var line2 = \"|\";\n          for (var i = 0; i < num; i++) {\n            line1 += \"head|\";\n            line2 += \":-:|\";\n          }\n          return line1 + \"\\n\" + line2 + \"\\n\";\n        }\n        // Create body of a Table\n        function set_body(lines) {\n          // 配列からbodyを作る\n          function set_line(arr) {\n            var line = \"|\";\n            for (var i = 0; i < arr.length; i++) {\n              line += arr[i] + \"|\";\n            }\n            return line + \"\\n\";\n          }\n          var body = \"\"\n          for(var i = 0; i < lines.length; i++) {\n            line = lines[i]\n            line_split = line.split(separate);\n            body += set_line(line_split);\n          }\n          return body;\n        }\n        // Select a Separate symbol\n        var idname = \"csv_check\";\n        $('.select_csv_tsv label').each(function(){\n          if ($(this).hasClass(\"active\")) {\n            idname = $(this).attr(\"id\");\n          }\n        });\n        var separate = \"\\t\";\n        if (idname == \"csv_check\") { separate = \",\"; }\n        // Check input text\n        var text = $('#input_check').val();\n        if (text.trim().length == 0) { return; }\n        var lines = text.split(\"\\n\");\n        var width = lines[0].split(separate).length;\n        // Create text for output\n        var output = set_head(width);\n        output += set_body(lines);\n        $('#output').val(output);\n      });\n    })();\n  </script>\n</body>\n</html>\n\n\n```\n\n\n","coediting":false,"comments_count":2,"created_at":"2017-06-19T19:27:37+09:00","group":null,"id":"03f1e886af5493755ae2","likes_count":31,"private":false,"reactions_count":0,"stocks_count":25,"tags":[{"name":"Qiita","versions":[]},{"name":"Markdown","versions":[]}],"title":"エクセルからのコピペでMarkdownの表作成(TSV or CSV to md)","updated_at":"2017-06-20T01:40:12+09:00","url":"https://qiita.com/ykhirao/items/03f1e886af5493755ae2","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>以前<a href=\"http://qiita.com/ykhirao/items/0d6b9f4a0cc626884dbb\" id=\"reference-c853bd6c40e8d1bde1a6\">Slack APIのTokenの取得・場所</a>という記事を書かせていただきました。<br>\nしかしながらこちらのトークンは以前は「Test Token」と表記されていたもので、今ではレガシーでかつ非推奨みたいですので、今回この記事を書かせていただきした。</p>\n\n<p>推奨Tokenも5分くらいで作成できますので、こちらを使用することをおすすめします！<br>\n慣れたら作成は1分以内でできるようになります。<br>\nスコープの選定も基本は<code>chat:write:bot</code>とかSend messages系が一番多いと思うのであまり迷わないと思います。</p>\n\n<h2>\n<span id=\"トークンの効力\" class=\"fragment\"></span><a href=\"#%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%81%AE%E5%8A%B9%E5%8A%9B\"><i class=\"fa fa-link\"></i></a>トークンの効力</h2>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">Tokenの種類</th>\n<th style=\"text-align: center\">操作対象</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">レガシー</td>\n<td style=\"text-align: center\">ほとんどの機能が使える1つのTokenを発行</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">今回</td>\n<td style=\"text-align: center\">必要な機能ごとのTokenを発行</td>\n</tr>\n</tbody>\n</table>\n\n<p>英語できる方はドキュメントからどうぞ <a href=\"https://api.slack.com/docs/oauth\" rel=\"nofollow noopener\" target=\"_blank\">Using OAuth 2.0</a></p>\n\n<h1>\n<span id=\"tokenについて\" class=\"fragment\"></span><a href=\"#token%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a>Tokenについて</h1>\n\n<p>Token作成には以下の2種類があるかと思っています。</p>\n\n<h2>\n<span id=\"1-redirectとresponseを利用した方法\" class=\"fragment\"></span><a href=\"#1-redirect%E3%81%A8response%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>1. RedirectとResponseを利用した方法</h2>\n\n<p>パラメーターを付けたGETでアクセスして、返ってきたJSONにアクセスTokenがついてくるパターンの方法です。</p>\n\n<ul>\n<li><a href=\"http://qiita.com/ysomei/items/88e0bebfd2cfb21fade4\" id=\"reference-6ea80ec2ee9758bb5542\">今更ですが、iOS Slack API を叩いてみた。</a></li>\n<li><a href=\"http://www.utali.io/entry/2016/10/03/004421\" rel=\"nofollow noopener\" target=\"_blank\">SlackでOAuthを利用して BOT投稿 するための アクセストークン を取得する方法</a></li>\n</ul>\n\n<p>今回は扱わないので、よくまとまっている上の記事などを参照されると理解しやすくなると思います。</p>\n\n<h2>\n<span id=\"2-guiで作成する方法\" class=\"fragment\"></span><a href=\"#2-gui%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>2. GUIで作成する方法</h2>\n\n<p>今回はこちらを私が書いていきますので、最後までよろしくお願いします。</p>\n\n<h1>\n<span id=\"tokenを作成する\" class=\"fragment\"></span><a href=\"#token%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Tokenを作成する</h1>\n\n<p>アプリを作成してSlackにインストールすれば使えるようになりますので、その手順を書いていきます。</p>\n\n<h2>\n<span id=\"1-アプリ作成\" class=\"fragment\"></span><a href=\"#1-%E3%82%A2%E3%83%97%E3%83%AA%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>1. アプリ作成</h2>\n\n<p>まずはここにアクセスして、　<a href=\"https://api.slack.com/apps\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://api.slack.com/apps</a></p>\n\n<p><strong>クリックする　/　入力する</strong><br>\n1. Create New App<br>\n2. App Name<br>\n3. Development Slack Team<br>\n4. Create App</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/cd90a4e98b4a3dbf4e8f4913cd8a76e281cb3382/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34363934356362642d336631322d393762372d346138332d3665613436356538396636382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F46945cbd-3f12-97b7-4a83-6ea465e89f68.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1e48679c5a1e6f6dacd377f35613f604\" alt=\"スクリーンショット 2017-06-14 11.01.04.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/46945cbd-3f12-97b7-4a83-6ea465e89f68.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F46945cbd-3f12-97b7-4a83-6ea465e89f68.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=764eb463af04e5d5f09e66ae679c85c1 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"2-スコープ設定\" class=\"fragment\"></span><a href=\"#2-%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%97%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>2. スコープ設定</h2>\n\n<p>まずはスコープの設定をしないとアプリをインストールできません。<br>\n今回のサンプルではチャンネルにメッセージを投稿するだけのスコープだけ設定します。<br>\nどのスコープでどういうことができるかは今回取り扱いませんので、<a href=\"https://api.slack.com/docs/oauth-scopes\" rel=\"nofollow noopener\" target=\"_blank\">ドキュメント</a>を参照ください。</p>\n\n<ul>\n<li>permission scopeをクリック</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/636fa99a47fe96c15f35b9d752f415d4b9ce419b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f64353938626131352d623966332d666166322d393935642d3138376565383961623439632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fd598ba15-b9f3-faf2-995d-187ee89ab49c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=455ef4c3f892a450302bb79ee82a4568\" alt=\"スクリーンショット 2017-06-14 16.25.27.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/d598ba15-b9f3-faf2-995d-187ee89ab49c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fd598ba15-b9f3-faf2-995d-187ee89ab49c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=95d02ff2ac6f6a4b92332843ce49a062 1x\" loading=\"lazy\"></a></p>\n\n<ul>\n<li>必要なscopeを選択 </li>\n<li>今回はSend messages as sample.</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/3a0c8665b725f7586863e5b42cc445ff0cab7403/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f37343936346330662d353461342d643662612d326435392d3864373964363131366463632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F74964c0f-54a4-d6ba-2d59-8d79d6116dcc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9f115e8db162adba6b63b3f70fa92c03\" alt=\"スクリーンショット 2017-06-14 16.28.57.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/74964c0f-54a4-d6ba-2d59-8d79d6116dcc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F74964c0f-54a4-d6ba-2d59-8d79d6116dcc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=908109b0d64bc627e1ee11fc13f4a381 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"3-slackにアプリをインストール\" class=\"fragment\"></span><a href=\"#3-slack%E3%81%AB%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"><i class=\"fa fa-link\"></i></a>3. Slackにアプリをインストール</h2>\n\n<p>ちゃんとScopeが設定されていると緑色になっている[Install App To Team]を押します。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/346027620a2538b0a3bff387ff47e35e5fda3d24/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34333962396365362d323663322d633061362d316138322d3932343962666536333739632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F439b9ce6-26c2-c0a6-1a82-9249bfe6379c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0df095e92606775e84dceb17c8f7411f\" alt=\"スクリーンショット 2017-06-14 16.31.12.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/439b9ce6-26c2-c0a6-1a82-9249bfe6379c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F439b9ce6-26c2-c0a6-1a82-9249bfe6379c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=40f8df5cca7e8f256160e0d5c3abde36 1x\" loading=\"lazy\"></a></p>\n\n<p>Team名を確認して間違いがなければ[Authorize]を押します。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f94a007494e39ad7265fd971d466699cc43396ae/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f31663834313432382d633465342d356137392d386235622d3532363461346564303439372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F1f841428-c4e4-5a79-8b5b-5264a4ed0497.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=26a41be1fda0b4b953319c26691abb3c\" alt=\"スクリーンショット 2017-06-14 16.32.04.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/1f841428-c4e4-5a79-8b5b-5264a4ed0497.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F1f841428-c4e4-5a79-8b5b-5264a4ed0497.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d534cce9714301a9096576b9601eb02e 1x\" loading=\"lazy\"></a></p>\n\n<p>リダイレクトされた先にTokenが書かれていますのでこれを普通のTokenとして使ってください。</p>\n\n<h2>\n<span id=\"4-tokenを探す\" class=\"fragment\"></span><a href=\"#4-token%E3%82%92%E6%8E%A2%E3%81%99\"><i class=\"fa fa-link\"></i></a>4. Tokenを探す</h2>\n\n<p>先のTokenを紛失したときの探し方。<br>\n<a href=\"https://api.slack.com/apps\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://api.slack.com/apps</a></p>\n\n<p>アプリを選ぶ。<br>\nsampleをクリック</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/694c25a7ee867332840eded4033449a414ff7a97/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34383237333635302d333236632d373934662d356363372d3531323265373336353333332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F48273650-326c-794f-5cc7-5122e7365333.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=20e2589c5694788f4bd5120fd1d81a9a\" alt=\"スクリーンショット 2017-06-14 16.35.27.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/48273650-326c-794f-5cc7-5122e7365333.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F48273650-326c-794f-5cc7-5122e7365333.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7dfdd38d72f068aad332ef1ecf478be7 1x\" loading=\"lazy\"></a></p>\n\n<p>[OAuth &amp; Permissions]をクリック<br>\n[OAuth Access Token]をコピー</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/9d626266e655b6ce1c516ec6ca4ea5dc7acbce9f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f36376161353038332d636266382d376665382d663431372d6263343865383530616433342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F67aa5083-cbf8-7fe8-f417-bc48e850ad34.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ff4fc136f4c1f130f0c698a56dadb848\" alt=\"スクリーンショット 2017-06-14 16.36.20.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/67aa5083-cbf8-7fe8-f417-bc48e850ad34.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F67aa5083-cbf8-7fe8-f417-bc48e850ad34.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b9960d30ff80fda6f8e01af26bafbba2 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"5-tokenが使えるかの実験\" class=\"fragment\"></span><a href=\"#5-token%E3%81%8C%E4%BD%BF%E3%81%88%E3%82%8B%E3%81%8B%E3%81%AE%E5%AE%9F%E9%A8%93\"><i class=\"fa fa-link\"></i></a>5. Tokenが使えるかの実験</h2>\n\n<p>httpを叩いてみる</p>\n\n<p>sampleのTokenですがこんな感じです。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code>https://slack.com/api/chat.postMessage?token=xoxo-xxx-xx-xx-xxxx<span class=\"err\">&amp;</span>channel=bot-test<span class=\"err\">&amp;</span>text=%22Hello%22\n</code></pre></div></div>\n\n<p>channelとTokenを変えると使えるはずです。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code># 成功\n{\"ok\":true,\"channel\":\"xxxxx\",\"ts\":\"xxxxx\",\"message\":{\"text\":\"\\\"Hello\\\"\",\"username\":\"sample\",\"bot_id\":\"xxxxx\",\"type\":\"message\",\"subtype\":\"bot_message\",\"ts\":\"xxxxx\"}}\n# 失敗\n{\"ok\":false,\"error\":\"token_revoked\"}\n</code></pre></div></div>\n\n<h1>\n<span id=\"残念な点\" class=\"fragment\"></span><a href=\"#%E6%AE%8B%E5%BF%B5%E3%81%AA%E7%82%B9\"><i class=\"fa fa-link\"></i></a>残念な点</h1>\n\n<p>機能ごとにAppsが増えていく（Freeプランだと10個まで）<br>\nなのでレガシートークンの方の「Slack API Tester」だけ使いたくなりますね。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/66482748b9069f4ed2a5960e57dda9e94b97fe0c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f64663663356561362d623063632d643830612d626130612d6330396164316135323630642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fdf6c5ea6-b0cc-d80a-ba0a-c09ad1a5260d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0293842fc27aacee1dd6dc4a27755b93\" alt=\"スクリーンショット 2017-06-14 12.16.58.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/df6c5ea6-b0cc-d80a-ba0a-c09ad1a5260d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fdf6c5ea6-b0cc-d80a-ba0a-c09ad1a5260d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4d08b7d1a670532e4734fff2c0cd4b09 1x\" loading=\"lazy\"></a></p>\n\n<p>管理場所は<a href=\"http://qiita.com/ykhirao/items/d825a1a124ee78b73576\" id=\"reference-5cc6599c7240f5d5e915\">Slackの外部Apps(Integrations)の場所・管理</a>を参考ください。</p>\n\n<p><a href=\"https://your_team_name.slack.com/apps/manage\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://your_team_name.slack.com/apps/manage</a> です。</p>\n\n<h1>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h1>\n\n<p>簡単なのでレガシートークンから置き換えて、新しいほうのトークンを是非使ってください。<br>\n間違いとかあったらコメント欄で優しく指摘くださるか、こっそりプルリクくれると喜びますm(__)m</p>\n\n<p>.</p>\n","body":"# はじめに\n\n以前[Slack APIのTokenの取得・場所](http://qiita.com/ykhirao/items/0d6b9f4a0cc626884dbb)という記事を書かせていただきました。\nしかしながらこちらのトークンは以前は「Test Token」と表記されていたもので、今ではレガシーでかつ非推奨みたいですので、今回この記事を書かせていただきした。\n\n推奨Tokenも5分くらいで作成できますので、こちらを使用することをおすすめします！\n慣れたら作成は1分以内でできるようになります。\nスコープの選定も基本は`chat:write:bot`とかSend messages系が一番多いと思うのであまり迷わないと思います。\n\n## トークンの効力\n\n| Tokenの種類 | 操作対象 |\n|:-:|:-:|\n| レガシー  | ほとんどの機能が使える1つのTokenを発行  |\n| 今回  | 必要な機能ごとのTokenを発行  |\n\n英語できる方はドキュメントからどうぞ [Using OAuth 2.0](https://api.slack.com/docs/oauth)\n\n# Tokenについて\n\nToken作成には以下の2種類があるかと思っています。\n\n## 1. RedirectとResponseを利用した方法\n\nパラメーターを付けたGETでアクセスして、返ってきたJSONにアクセスTokenがついてくるパターンの方法です。\n\n* [今更ですが、iOS Slack API を叩いてみた。](http://qiita.com/ysomei/items/88e0bebfd2cfb21fade4)\n* [SlackでOAuthを利用して BOT投稿 するための アクセストークン を取得する方法](http://www.utali.io/entry/2016/10/03/004421)\n\n今回は扱わないので、よくまとまっている上の記事などを参照されると理解しやすくなると思います。\n\n## 2. GUIで作成する方法\n\n今回はこちらを私が書いていきますので、最後までよろしくお願いします。\n\n# Tokenを作成する\n\nアプリを作成してSlackにインストールすれば使えるようになりますので、その手順を書いていきます。\n\n## 1. アプリ作成\n\nまずはここにアクセスして、　https://api.slack.com/apps\n\n**クリックする　/　入力する**\n1. Create New App\n2. App Name\n3. Development Slack Team\n4. Create App\n\n![スクリーンショット 2017-06-14 11.01.04.png](https://qiita-image-store.s3.amazonaws.com/0/112929/46945cbd-3f12-97b7-4a83-6ea465e89f68.png)\n\n## 2. スコープ設定\n\nまずはスコープの設定をしないとアプリをインストールできません。\n今回のサンプルではチャンネルにメッセージを投稿するだけのスコープだけ設定します。\nどのスコープでどういうことができるかは今回取り扱いませんので、[ドキュメント](https://api.slack.com/docs/oauth-scopes)を参照ください。\n\n* permission scopeをクリック\n\n![スクリーンショット 2017-06-14 16.25.27.png](https://qiita-image-store.s3.amazonaws.com/0/112929/d598ba15-b9f3-faf2-995d-187ee89ab49c.png)\n\n* 必要なscopeを選択 \n* 今回はSend messages as sample.\n\n![スクリーンショット 2017-06-14 16.28.57.png](https://qiita-image-store.s3.amazonaws.com/0/112929/74964c0f-54a4-d6ba-2d59-8d79d6116dcc.png)\n\n## 3. Slackにアプリをインストール\n\nちゃんとScopeが設定されていると緑色になっている[Install App To Team]を押します。\n\n![スクリーンショット 2017-06-14 16.31.12.png](https://qiita-image-store.s3.amazonaws.com/0/112929/439b9ce6-26c2-c0a6-1a82-9249bfe6379c.png)\n\nTeam名を確認して間違いがなければ[Authorize]を押します。\n\n![スクリーンショット 2017-06-14 16.32.04.png](https://qiita-image-store.s3.amazonaws.com/0/112929/1f841428-c4e4-5a79-8b5b-5264a4ed0497.png)\n\nリダイレクトされた先にTokenが書かれていますのでこれを普通のTokenとして使ってください。\n\n## 4. Tokenを探す\n\n先のTokenを紛失したときの探し方。\nhttps://api.slack.com/apps\n\nアプリを選ぶ。\nsampleをクリック\n\n![スクリーンショット 2017-06-14 16.35.27.png](https://qiita-image-store.s3.amazonaws.com/0/112929/48273650-326c-794f-5cc7-5122e7365333.png)\n\n[OAuth & Permissions]をクリック\n[OAuth Access Token]をコピー\n\n![スクリーンショット 2017-06-14 16.36.20.png](https://qiita-image-store.s3.amazonaws.com/0/112929/67aa5083-cbf8-7fe8-f417-bc48e850ad34.png)\n\n## 5. Tokenが使えるかの実験\n\nhttpを叩いてみる\n\nsampleのTokenですがこんな感じです。\n\n```html\nhttps://slack.com/api/chat.postMessage?token=xoxo-xxx-xx-xx-xxxx&channel=bot-test&text=%22Hello%22\n```\nchannelとTokenを変えると使えるはずです。\n\n```\n# 成功\n{\"ok\":true,\"channel\":\"xxxxx\",\"ts\":\"xxxxx\",\"message\":{\"text\":\"\\\"Hello\\\"\",\"username\":\"sample\",\"bot_id\":\"xxxxx\",\"type\":\"message\",\"subtype\":\"bot_message\",\"ts\":\"xxxxx\"}}\n# 失敗\n{\"ok\":false,\"error\":\"token_revoked\"}\n```\n\n\n# 残念な点\n\n機能ごとにAppsが増えていく（Freeプランだと10個まで）\nなのでレガシートークンの方の「Slack API Tester」だけ使いたくなりますね。\n\n![スクリーンショット 2017-06-14 12.16.58.png](https://qiita-image-store.s3.amazonaws.com/0/112929/df6c5ea6-b0cc-d80a-ba0a-c09ad1a5260d.png)\n\n管理場所は[Slackの外部Apps(Integrations)の場所・管理](http://qiita.com/ykhirao/items/d825a1a124ee78b73576)を参考ください。\n\nhttps://your_team_name.slack.com/apps/manage です。\n\n# 最後に\n簡単なのでレガシートークンから置き換えて、新しいほうのトークンを是非使ってください。\n間違いとかあったらコメント欄で優しく指摘くださるか、こっそりプルリクくれると喜びますm(__)m\n\n\n\n\n\n\n\n\n\n\n\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2017-06-14T17:25:03+09:00","group":null,"id":"3b19ee6a1458cfb4ba21","likes_count":483,"private":false,"reactions_count":0,"stocks_count":388,"tags":[{"name":"Slack","versions":[]}],"title":"Slack API 推奨Tokenについて","updated_at":"2019-05-17T11:12:46+09:00","url":"https://qiita.com/ykhirao/items/3b19ee6a1458cfb4ba21","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>Slackをフリープランで運用していると連携できるアプリの制限にひっかかると思います。<br>\nこのサービス・Integrationsが10個までの制限のため管理画面にたまに行きたくなるのですが、いつも迷子になるので投稿しておきます。</p>\n\n<h1>\n<span id=\"場所とスクリーンショット\" class=\"fragment\"></span><a href=\"#%E5%A0%B4%E6%89%80%E3%81%A8%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88\"><i class=\"fa fa-link\"></i></a>場所とスクリーンショット</h1>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">URL</th>\n<th style=\"text-align: center\"><a href=\"https://your_team_name.slack.com/apps/manage\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://your_team_name.slack.com/apps/manage</a></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">任意値</td>\n<td style=\"text-align: center\">your_team_name</td>\n</tr>\n</tbody>\n</table>\n\n<p>この画面が出てきたら正解。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/9ef44dbe9467fc9739a497462930bc9b0759dcd2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f35313665643936392d626233352d366637612d626231362d3965373262303364613534392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F516ed969-bb35-6f7a-bb16-9e72b03da549.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=66d271c74ad12cf4ceb9aadebae4a701\" alt=\"スクリーンショット 2017-06-13 17.26.05.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/516ed969-bb35-6f7a-bb16-9e72b03da549.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F516ed969-bb35-6f7a-bb16-9e72b03da549.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0cb0265a78d5cb18c689edda9bddbac8 1x\" loading=\"lazy\"></a></p>\n\n<h1>\n<span id=\"探し方\" class=\"fragment\"></span><a href=\"#%E6%8E%A2%E3%81%97%E6%96%B9\"><i class=\"fa fa-link\"></i></a>探し方</h1>\n\n<p>Web版Slackからの道筋を覚えるのがいいと思います。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/4cb897d4a45e5d027156e45122390e19c71cb7d0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34313766613330642d666530362d326661342d616336342d6539373666353039333638312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F417fa30d-fe06-2fa4-ac64-e976f5093681.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0032e3ec8c585bdf512959361039987a\" alt=\"スクリーンショット 2017-06-13 17.19.50.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/417fa30d-fe06-2fa4-ac64-e976f5093681.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F417fa30d-fe06-2fa4-ac64-e976f5093681.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ad0f5bcba742165d291be492ff077fb4 1x\" loading=\"lazy\"></a></p>\n\n<p>名前横の<code>∨</code>と<code>Apps &amp; Custom Integrations</code>をポチ</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/d0ed7512d6bac2224e38b2035e9e53d42cd90988/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f32626435326665302d666536642d323264652d323936342d3661373637326234616430662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F2bd52fe0-fe6d-22de-2964-6a7672b4ad0f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=82c43cad919f94a2f3f7259e503edb73\" alt=\"スクリーンショット 2017-06-13 17.24.38.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/2bd52fe0-fe6d-22de-2964-6a7672b4ad0f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F2bd52fe0-fe6d-22de-2964-6a7672b4ad0f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=782de322a139cb01a4ede57145caeb02 1x\" loading=\"lazy\"></a></p>\n\n<p><code>Manage</code>をポチで出てきます。</p>\n\n<h1>\n<span id=\"外部サービスの追加\" class=\"fragment\"></span><a href=\"#%E5%A4%96%E9%83%A8%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E8%BF%BD%E5%8A%A0\"><i class=\"fa fa-link\"></i></a>外部サービスの追加</h1>\n\n<p>どちらからでも探せます。<br>\n<a href=\"https://your_team_name.slack.com/apps/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://your_team_name.slack.com/apps/</a><br>\n<a href=\"https://your_team_name.slack.com/apps/manage\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://your_team_name.slack.com/apps/manage</a></p>\n\n<p>.</p>\n","body":"# はじめに\n\nSlackをフリープランで運用していると連携できるアプリの制限にひっかかると思います。\nこのサービス・Integrationsが10個までの制限のため管理画面にたまに行きたくなるのですが、いつも迷子になるので投稿しておきます。\n\n# 場所とスクリーンショット\n\n| URL | https://your_team_name.slack.com/apps/manage |\n|:-:|:-:|\n|任意値|your_team_name|\n\nこの画面が出てきたら正解。\n\n![スクリーンショット 2017-06-13 17.26.05.png](https://qiita-image-store.s3.amazonaws.com/0/112929/516ed969-bb35-6f7a-bb16-9e72b03da549.png)\n\n# 探し方\nWeb版Slackからの道筋を覚えるのがいいと思います。\n\n![スクリーンショット 2017-06-13 17.19.50.png](https://qiita-image-store.s3.amazonaws.com/0/112929/417fa30d-fe06-2fa4-ac64-e976f5093681.png)\n\n名前横の`∨`と`Apps & Custom Integrations`をポチ\n\n![スクリーンショット 2017-06-13 17.24.38.png](https://qiita-image-store.s3.amazonaws.com/0/112929/2bd52fe0-fe6d-22de-2964-6a7672b4ad0f.png)\n\n`Manage`をポチで出てきます。\n\n# 外部サービスの追加\n\nどちらからでも探せます。\nhttps://your_team_name.slack.com/apps/\nhttps://your_team_name.slack.com/apps/manage\n\n\n\n\n\n\n\n\n\n\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2017-06-13T17:39:30+09:00","group":null,"id":"d825a1a124ee78b73576","likes_count":3,"private":false,"reactions_count":0,"stocks_count":1,"tags":[{"name":"Slack","versions":[]}],"title":"Slackの外部Apps(Integrations)の場所・管理","updated_at":"2017-06-13T17:39:30+09:00","url":"https://qiita.com/ykhirao/items/d825a1a124ee78b73576","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>毎日30個くらいのWebサイトをチェックしているので、それをターミナルから操作するスクリプトを書きました。</p>\n\n<h1>\n<span id=\"かんたんなやり方\" class=\"fragment\"></span><a href=\"#%E3%81%8B%E3%82%93%E3%81%9F%E3%82%93%E3%81%AA%E3%82%84%E3%82%8A%E6%96%B9\"><i class=\"fa fa-link\"></i></a>かんたんなやり方</h1>\n\n<p>いつも同じページで、10ページくらいしかみない人</p>\n\n<blockquote>\n<ol>\n<li>フォルダーにブックマークする</li>\n<li>すべてのブックマークを開くを選ぶ</li>\n<li>すべてのリンクが同時に開きます</li>\n</ol>\n</blockquote>\n\n<p><a href=\"https://camo.qiitausercontent.com/c08f117ace57c83462b0c6ef1fd6c4339af2439c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f62373331336631342d386235372d643561642d306365322d6563373030393462663239622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"439\" alt=\"スクリーンショット 2017-04-15 15.03.32.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fb7313f14-8b57-d5ad-0ce2-ec70094bf29b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=60d248ed18befd7e6e4b50377072c058\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/b7313f14-8b57-d5ad-0ce2-ec70094bf29b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fb7313f14-8b57-d5ad-0ce2-ec70094bf29b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0bb725aad83a5750ee41c09af1106bd4 1x\" loading=\"lazy\"></a></p>\n\n<h1>\n<span id=\"今回のスクリプト\" class=\"fragment\"></span><a href=\"#%E4%BB%8A%E5%9B%9E%E3%81%AE%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88\"><i class=\"fa fa-link\"></i></a>今回のスクリプト</h1>\n\n<h2>\n<span id=\"仕様\" class=\"fragment\"></span><a href=\"#%E4%BB%95%E6%A7%98\"><i class=\"fa fa-link\"></i></a>仕様</h2>\n\n<ul>\n<li>たまに更新される</li>\n<li>テキストファイルでリンクが渡される</li>\n<li>5ページくらいずつ開きたい</li>\n<li>たまにhttpすらついてないやつが来る</li>\n<li>LINES_NUM = 2のとこをいじると、何ページずつ開くか選べる</li>\n</ul>\n\n<h2>\n<span id=\"コード\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>コード</h2>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code>\n<span class=\"c1\"># coding: utf-8\n</span>\n<span class=\"kn\">import</span> <span class=\"nn\">webbrowser</span>\n\n<span class=\"n\">LINES_NUM</span> <span class=\"o\">=</span> <span class=\"mi\">2</span>\n\n<span class=\"n\">urls</span> <span class=\"o\">=</span> <span class=\"s\">\"\"\"\nhttps://www.google.co.jp/\nhttps://github.com/\n\nqiita.com\n\"\"\"</span>\n\n<span class=\"n\">urls</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">url</span> <span class=\"k\">for</span> <span class=\"n\">url</span> <span class=\"ow\">in</span> <span class=\"n\">urls</span><span class=\"p\">.</span><span class=\"n\">split</span><span class=\"p\">(</span><span class=\"s\">\"</span><span class=\"se\">\\n</span><span class=\"s\">\"</span><span class=\"p\">)</span> <span class=\"k\">if</span> <span class=\"n\">url</span><span class=\"p\">]</span>\n\n<span class=\"k\">for</span> <span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"n\">url</span> <span class=\"ow\">in</span> <span class=\"nb\">enumerate</span><span class=\"p\">(</span><span class=\"n\">urls</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">):</span>\n\n    <span class=\"c1\"># correct url\n</span>    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">url</span><span class=\"p\">.</span><span class=\"n\">startswith</span><span class=\"p\">(</span><span class=\"s\">\"http\"</span><span class=\"p\">):</span>\n        <span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"s\">\"http://\"</span> <span class=\"o\">+</span> <span class=\"n\">url</span>\n\n    <span class=\"n\">webbrowser</span><span class=\"p\">.</span><span class=\"n\">open_new_tab</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># stop each line by standard input\n</span>    <span class=\"k\">if</span> <span class=\"n\">i</span> <span class=\"o\">%</span> <span class=\"n\">LINES_NUM</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n        <span class=\"nb\">raw_input</span><span class=\"p\">(</span><span class=\"s\">\"type something &gt;&gt; \"</span><span class=\"p\">)</span>\n\n</code></pre></div></div>\n\n<p>コメント欄でいい感じに直していただいたので感謝ですm(_)m</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/29de7c151b821fd9a74b72be97cd7f6594afe38c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65616134376239652d343536372d663038662d343630302d3561623838336235336635352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"651\" alt=\"スクリーンショット 2017-04-15 15.09.05.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Feaa47b9e-4567-f08f-4600-5ab883b53f55.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=947c9a4c496ca02fbfd1aa506f854dda\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/eaa47b9e-4567-f08f-4600-5ab883b53f55.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Feaa47b9e-4567-f08f-4600-5ab883b53f55.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=21adbabf3d2d6329933bef178d0cd64f 1x\" loading=\"lazy\"></a></p>\n\n<p>こんな感じで[type something &gt;&gt; ]とくるので適当にEnterを押してやると、次の指定行(LINES_NUM = 2)が読まれます。</p>\n\n<h1>\n<span id=\"参考\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83\"><i class=\"fa fa-link\"></i></a>参考</h1>\n\n<p>空行削除: <a href=\"http://haru.moo.jp/2015/07/%E3%83%AA%E3%82%B9%E3%83%88%E3%81%8B%E3%82%89%E7%A9%BA%E3%81%AE%E8%A6%81%E7%B4%A0%E3%82%92%E5%89%8A%E9%99%A4%E3%81%99%E3%82%8B/\" rel=\"nofollow noopener\" target=\"_blank\">リストから空の要素を削除する</a></p>\n","body":"# はじめに\n\n毎日30個くらいのWebサイトをチェックしているので、それをターミナルから操作するスクリプトを書きました。\n\n# かんたんなやり方\n\nいつも同じページで、10ページくらいしかみない人\n> 1. フォルダーにブックマークする\n1. すべてのブックマークを開くを選ぶ\n1. すべてのリンクが同時に開きます\n\n<img width=\"439\" alt=\"スクリーンショット 2017-04-15 15.03.32.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/b7313f14-8b57-d5ad-0ce2-ec70094bf29b.png\">\n\n\n# 今回のスクリプト\n\n## 仕様\n\n* たまに更新される\n* テキストファイルでリンクが渡される\n* 5ページくらいずつ開きたい\n* たまにhttpすらついてないやつが来る\n* LINES_NUM = 2のとこをいじると、何ページずつ開くか選べる\n\n## コード\n\n```python\n\n# coding: utf-8\n\nimport webbrowser\n\nLINES_NUM = 2\n\nurls = \"\"\"\nhttps://www.google.co.jp/\nhttps://github.com/\n\nqiita.com\n\"\"\"\n\nurls = [url for url in urls.split(\"\\n\") if url]\n\nfor i, url in enumerate(urls, 1):\n\n    # correct url\n    if not url.startswith(\"http\"):\n        url = \"http://\" + url\n\n    webbrowser.open_new_tab(url)\n\n    # stop each line by standard input\n    if i % LINES_NUM == 0:\n        raw_input(\"type something >> \")\n\n```\n\nコメント欄でいい感じに直していただいたので感謝ですm(_)m\n\n<img width=\"651\" alt=\"スクリーンショット 2017-04-15 15.09.05.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/eaa47b9e-4567-f08f-4600-5ab883b53f55.png\">\n\nこんな感じで[type something >> ]とくるので適当にEnterを押してやると、次の指定行(LINES_NUM = 2)が読まれます。\n\n\n# 参考\n空行削除: [リストから空の要素を削除する](http://haru.moo.jp/2015/07/%E3%83%AA%E3%82%B9%E3%83%88%E3%81%8B%E3%82%89%E7%A9%BA%E3%81%AE%E8%A6%81%E7%B4%A0%E3%82%92%E5%89%8A%E9%99%A4%E3%81%99%E3%82%8B/)\n\n\n\n\n\n\n\n\n","coediting":false,"comments_count":2,"created_at":"2017-04-15T15:20:29+09:00","group":null,"id":"33d74302cab604d8a163","likes_count":0,"private":false,"reactions_count":0,"stocks_count":4,"tags":[{"name":"Python","versions":[]}],"title":"毎日たくさんのWebサイトを定期的に見ている人へ送るスクリプト","updated_at":"2017-04-15T20:35:41+09:00","url":"https://qiita.com/ykhirao/items/33d74302cab604d8a163","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<h1 data-sourcepos=\"1:1-1:152\">\n<span id=\"バージョンごとのリリース情報バグフィックス期限セキュリティフィックス期限サポート期間のまとめ\" class=\"fragment\"></span><a href=\"#%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%81%94%E3%81%A8%E3%81%AE%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E6%83%85%E5%A0%B1%E3%83%90%E3%82%B0%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF%E3%82%B9%E6%9C%9F%E9%99%90%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF%E3%82%B9%E6%9C%9F%E9%99%90%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E6%9C%9F%E9%96%93%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>バージョンごとの、リリース情報、バグフィックス期限、セキュリティフィックス期限、サポート期間のまとめ</h1>\n<p data-sourcepos=\"3:1-3:106\">Laravelのリリース日とサポート期限とかそのあたりのデータをまとめています。</p>\n<table data-sourcepos=\"5:1-21:13\">\n<thead>\n<tr data-sourcepos=\"5:1-5:82\">\n<th style=\"text-align: center\" data-sourcepos=\"5:2-5:18\">バージョン</th>\n<th style=\"text-align: center\" data-sourcepos=\"5:20-5:36\">リリース日</th>\n<th style=\"text-align: center\" data-sourcepos=\"5:38-5:51\">バグ修正</th>\n<th style=\"text-align: center\" data-sourcepos=\"5:53-5:81\">セキュリティー修正</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"7:1-7:48\">\n<td style=\"text-align: center\" data-sourcepos=\"7:2-7:7\">5.0</td>\n<td style=\"text-align: center\" data-sourcepos=\"7:9-7:21\">2015/02/04</td>\n<td style=\"text-align: center\" data-sourcepos=\"7:23-7:34\">2015/08/04</td>\n<td style=\"text-align: center\" data-sourcepos=\"7:36-7:47\">2016/02/04</td>\n</tr>\n<tr data-sourcepos=\"8:1-8:54\">\n<td style=\"text-align: center\" data-sourcepos=\"8:2-8:12\">5.1(LTS)</td>\n<td style=\"text-align: center\" data-sourcepos=\"8:14-8:26\">2015/06/09</td>\n<td style=\"text-align: center\" data-sourcepos=\"8:28-8:40\">2017/06/09</td>\n<td style=\"text-align: center\" data-sourcepos=\"8:42-8:53\">2018/06/09</td>\n</tr>\n<tr data-sourcepos=\"9:1-9:50\">\n<td style=\"text-align: center\" data-sourcepos=\"9:2-9:7\">5.2</td>\n<td style=\"text-align: center\" data-sourcepos=\"9:9-9:21\">2015/12/21</td>\n<td style=\"text-align: center\" data-sourcepos=\"9:23-9:35\">2016/06/21</td>\n<td style=\"text-align: center\" data-sourcepos=\"9:37-9:49\">2016/12/21</td>\n</tr>\n<tr data-sourcepos=\"10:1-10:50\">\n<td style=\"text-align: center\" data-sourcepos=\"10:2-10:7\">5.3</td>\n<td style=\"text-align: center\" data-sourcepos=\"10:9-10:21\">2016/08/23</td>\n<td style=\"text-align: center\" data-sourcepos=\"10:23-10:35\">2017/02/23</td>\n<td style=\"text-align: center\" data-sourcepos=\"10:37-10:49\">2017/08/23</td>\n</tr>\n<tr data-sourcepos=\"11:1-11:50\">\n<td style=\"text-align: center\" data-sourcepos=\"11:2-11:7\">5.4</td>\n<td style=\"text-align: center\" data-sourcepos=\"11:9-11:21\">2017/01/24</td>\n<td style=\"text-align: center\" data-sourcepos=\"11:23-11:35\">2017/07/24</td>\n<td style=\"text-align: center\" data-sourcepos=\"11:37-11:49\">2018/01/24</td>\n</tr>\n<tr data-sourcepos=\"12:1-12:55\">\n<td style=\"text-align: center\" data-sourcepos=\"12:2-12:12\">5.5(LTS)</td>\n<td style=\"text-align: center\" data-sourcepos=\"12:14-12:26\">2017/08/30</td>\n<td style=\"text-align: center\" data-sourcepos=\"12:28-12:40\">2019/08/30</td>\n<td style=\"text-align: center\" data-sourcepos=\"12:42-12:54\">2020/08/30</td>\n</tr>\n<tr data-sourcepos=\"13:1-13:50\">\n<td style=\"text-align: center\" data-sourcepos=\"13:2-13:7\">5.6</td>\n<td style=\"text-align: center\" data-sourcepos=\"13:9-13:21\">2018/02/07</td>\n<td style=\"text-align: center\" data-sourcepos=\"13:23-13:35\">2018/08/07</td>\n<td style=\"text-align: center\" data-sourcepos=\"13:37-13:49\">2019/02/07</td>\n</tr>\n<tr data-sourcepos=\"14:1-14:43\">\n<td style=\"text-align: center\" data-sourcepos=\"14:2-14:6\">5.7</td>\n<td style=\"text-align: center\" data-sourcepos=\"14:8-14:18\">2018/09/4</td>\n<td style=\"text-align: center\" data-sourcepos=\"14:20-14:30\">2019/02/4</td>\n<td style=\"text-align: center\" data-sourcepos=\"14:32-14:42\">2019/09/4</td>\n</tr>\n<tr data-sourcepos=\"15:1-15:46\">\n<td style=\"text-align: center\" data-sourcepos=\"15:2-15:6\">5.8</td>\n<td style=\"text-align: center\" data-sourcepos=\"15:8-15:19\">2019/02/26</td>\n<td style=\"text-align: center\" data-sourcepos=\"15:21-15:32\">2019/08/26</td>\n<td style=\"text-align: center\" data-sourcepos=\"15:34-15:45\">2020/02/26</td>\n</tr>\n<tr data-sourcepos=\"16:1-16:51\">\n<td style=\"text-align: center\" data-sourcepos=\"16:2-16:11\">6.0(LTS)</td>\n<td style=\"text-align: center\" data-sourcepos=\"16:13-16:24\">2019/09/03</td>\n<td style=\"text-align: center\" data-sourcepos=\"16:26-16:37\">2021/09/03</td>\n<td style=\"text-align: center\" data-sourcepos=\"16:39-16:50\">2022/09/03</td>\n</tr>\n<tr data-sourcepos=\"17:1-17:12\">\n<td style=\"text-align: center\" data-sourcepos=\"17:2-17:2\">7</td>\n<td style=\"text-align: center\" data-sourcepos=\"17:4-17:9\">2020/3</td>\n<td style=\"text-align: center\" data-sourcepos=\"17:11-17:10\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"17:12-17:11\"></td>\n</tr>\n<tr data-sourcepos=\"18:1-18:12\">\n<td style=\"text-align: center\" data-sourcepos=\"18:2-18:2\">8</td>\n<td style=\"text-align: center\" data-sourcepos=\"18:4-18:9\">2020/9</td>\n<td style=\"text-align: center\" data-sourcepos=\"18:11-18:10\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"18:12-18:11\"></td>\n</tr>\n<tr data-sourcepos=\"19:1-19:12\">\n<td style=\"text-align: center\" data-sourcepos=\"19:2-19:2\">9</td>\n<td style=\"text-align: center\" data-sourcepos=\"19:4-19:9\">2022/2</td>\n<td style=\"text-align: center\" data-sourcepos=\"19:11-19:10\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"19:12-19:11\"></td>\n</tr>\n<tr data-sourcepos=\"20:1-20:13\">\n<td style=\"text-align: center\" data-sourcepos=\"20:2-20:3\">10</td>\n<td style=\"text-align: center\" data-sourcepos=\"20:5-20:10\">2023/2</td>\n<td style=\"text-align: center\" data-sourcepos=\"20:12-20:11\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"20:13-20:12\"></td>\n</tr>\n<tr data-sourcepos=\"21:1-21:13\">\n<td style=\"text-align: center\" data-sourcepos=\"21:2-21:3\">11</td>\n<td style=\"text-align: center\" data-sourcepos=\"21:5-21:10\">2024/1</td>\n<td style=\"text-align: center\" data-sourcepos=\"21:12-21:11\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"21:13-21:12\"></td>\n</tr>\n</tbody>\n</table>\n<p data-sourcepos=\"23:1-24:74\">公式情報 - <a href=\"https://laravel-news.com/laravel-release-process\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://laravel-news.com/laravel-release-process</a><br>\nWikipediaよくまとまってます <a href=\"https://ja.wikipedia.org/wiki/Laravel\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://ja.wikipedia.org/wiki/Laravel</a></p>\n<p data-sourcepos=\"26:1-26:50\"><strong>LTS</strong> (Long-term support): 長期サポート版</p>\n<ul data-sourcepos=\"28:1-30:0\">\n<li data-sourcepos=\"28:1-28:104\">Laravel5.1などのLTS版は2年の修正期間と、3年のセキュリティー修正期間がある</li>\n<li data-sourcepos=\"29:1-30:0\">それ以外の一般的なリリースは半年の修正期間と、1年のセキュリティー修正期間がある</li>\n</ul>\n<table data-sourcepos=\"31:1-34:30\">\n<thead>\n<tr data-sourcepos=\"31:1-31:56\">\n<th style=\"text-align: center\" data-sourcepos=\"31:2-31:10\">version</th>\n<th style=\"text-align: center\" data-sourcepos=\"31:12-31:25\">バグ修正</th>\n<th style=\"text-align: center\" data-sourcepos=\"31:27-31:55\">セキュリティー修正</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"33:1-33:43\">\n<td style=\"text-align: center\" data-sourcepos=\"33:2-33:26\">LTS(Long-term support)</td>\n<td style=\"text-align: center\" data-sourcepos=\"33:28-33:34\">2年</td>\n<td style=\"text-align: center\" data-sourcepos=\"33:36-33:42\">3年</td>\n</tr>\n<tr data-sourcepos=\"34:1-34:30\">\n<td style=\"text-align: center\" data-sourcepos=\"34:2-34:11\">General</td>\n<td style=\"text-align: center\" data-sourcepos=\"34:13-34:21\">半年</td>\n<td style=\"text-align: center\" data-sourcepos=\"34:23-34:29\">1年</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"37:1-37:65\">\n<span id=\"laravel58の次はlaravel60どっち使えばいいの\" class=\"fragment\"></span><a href=\"#laravel58%E3%81%AE%E6%AC%A1%E3%81%AFlaravel60%E3%81%A9%E3%81%A3%E3%81%A1%E4%BD%BF%E3%81%88%E3%81%B0%E3%81%84%E3%81%84%E3%81%AE\"><i class=\"fa fa-link\"></i></a>Laravel5.8の次はLaravel6.0..?どっち使えばいいの？</h2>\n<p data-sourcepos=\"39:1-39:54\">こちらの記事でよくまとまっています。</p>\n<p data-sourcepos=\"41:1-41:131\"><a href=\"https://qiita.com/willow710kut/items/ae3fc659a5c7215fc499\" id=\"reference-11e030a48bbc3e56669f\">Laravel6系で始めるか、Laravel5系を使うべきか迷う人へ</a></p>\n<p data-sourcepos=\"43:1-43:208\">最終的には各チームで判断してほしいですが、いま(2019-10-03)からプロジェクト始めるなら、Laravel5.8じゃなくてLTS版の6.0でいいのではないだろうかと思う。</p>\n<h2 data-sourcepos=\"46:1-46:57\">\n<span id=\"もう少し過去のバージョンのリリース日\" class=\"fragment\"></span><a href=\"#%E3%82%82%E3%81%86%E5%B0%91%E3%81%97%E9%81%8E%E5%8E%BB%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%81%AE%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E6%97%A5\"><i class=\"fa fa-link\"></i></a>もう少し過去のバージョンのリリース日</h2>\n<table data-sourcepos=\"48:1-59:38\">\n<thead>\n<tr data-sourcepos=\"48:1-48:35\">\n<th style=\"text-align: center\" data-sourcepos=\"48:2-48:10\">version</th>\n<th style=\"text-align: center\" data-sourcepos=\"48:12-48:25\">Release Date</th>\n<th style=\"text-align: center\" data-sourcepos=\"48:27-48:32\">Others</th>\n<th style=\"text-align: center\" data-sourcepos=\"48:34-48:34\">-</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"50:1-50:13\">\n<td style=\"text-align: center\" data-sourcepos=\"50:2-50:3\">V1</td>\n<td style=\"text-align: center\" data-sourcepos=\"50:5-50:12\">2011 / 6</td>\n<td style=\"text-align: center\" data-sourcepos=\"50:0-50:0\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"50:0-50:0\"></td>\n</tr>\n<tr data-sourcepos=\"51:1-51:13\">\n<td style=\"text-align: center\" data-sourcepos=\"51:2-51:3\">V2</td>\n<td style=\"text-align: center\" data-sourcepos=\"51:5-51:12\">2011 / 9</td>\n<td style=\"text-align: center\" data-sourcepos=\"51:0-51:0\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"51:0-51:0\"></td>\n</tr>\n<tr data-sourcepos=\"52:1-52:13\">\n<td style=\"text-align: center\" data-sourcepos=\"52:2-52:3\">v3</td>\n<td style=\"text-align: center\" data-sourcepos=\"52:5-52:12\">2012 / 2</td>\n<td style=\"text-align: center\" data-sourcepos=\"52:0-52:0\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"52:0-52:0\"></td>\n</tr>\n<tr data-sourcepos=\"53:1-53:13\">\n<td style=\"text-align: center\" data-sourcepos=\"53:2-53:3\">v4</td>\n<td style=\"text-align: center\" data-sourcepos=\"53:5-53:12\">2013 / 5</td>\n<td style=\"text-align: center\" data-sourcepos=\"53:0-53:0\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"53:0-53:0\"></td>\n</tr>\n<tr data-sourcepos=\"54:1-54:13\">\n<td style=\"text-align: center\" data-sourcepos=\"54:2-54:3\">v5</td>\n<td style=\"text-align: center\" data-sourcepos=\"54:5-54:12\">2015 / 2</td>\n<td style=\"text-align: center\" data-sourcepos=\"54:0-54:0\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"54:0-54:0\"></td>\n</tr>\n<tr data-sourcepos=\"55:1-55:19\">\n<td style=\"text-align: center\" data-sourcepos=\"55:2-55:5\">v5.1</td>\n<td style=\"text-align: center\" data-sourcepos=\"55:7-55:14\">2015 / 9</td>\n<td style=\"text-align: center\" data-sourcepos=\"55:16-55:18\">LTS</td>\n<td style=\"text-align: center\" data-sourcepos=\"55:0-55:0\"></td>\n</tr>\n<tr data-sourcepos=\"56:1-56:16\">\n<td style=\"text-align: center\" data-sourcepos=\"56:2-56:5\">v5.2</td>\n<td style=\"text-align: center\" data-sourcepos=\"56:7-56:15\">2015 / 12</td>\n<td style=\"text-align: center\" data-sourcepos=\"56:0-56:0\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"56:0-56:0\"></td>\n</tr>\n<tr data-sourcepos=\"57:1-57:15\">\n<td style=\"text-align: center\" data-sourcepos=\"57:2-57:5\">v5.3</td>\n<td style=\"text-align: center\" data-sourcepos=\"57:7-57:14\">2016 / 8</td>\n<td style=\"text-align: center\" data-sourcepos=\"57:0-57:0\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"57:0-57:0\"></td>\n</tr>\n<tr data-sourcepos=\"58:1-58:15\">\n<td style=\"text-align: center\" data-sourcepos=\"58:2-58:5\">v5.4</td>\n<td style=\"text-align: center\" data-sourcepos=\"58:7-58:14\">2017 / 1</td>\n<td style=\"text-align: center\" data-sourcepos=\"58:0-58:0\"></td>\n<td style=\"text-align: center\" data-sourcepos=\"58:0-58:0\"></td>\n</tr>\n<tr data-sourcepos=\"59:1-59:38\">\n<td style=\"text-align: center\" data-sourcepos=\"59:2-59:5\">v5.5</td>\n<td style=\"text-align: center\" data-sourcepos=\"59:7-59:14\">2017 / 7</td>\n<td style=\"text-align: center\" data-sourcepos=\"59:16-59:18\">LTS</td>\n<td style=\"text-align: center\" data-sourcepos=\"59:20-59:37\">リリース予定</td>\n</tr>\n</tbody>\n</table>\n<p data-sourcepos=\"61:1-61:68\"><a href=\"https://laravel-news.com/laravel-release-process\" rel=\"nofollow noopener\" target=\"_blank\">laravel-news.com</a></p>\n<h2 data-sourcepos=\"63:1-63:49\">\n<span id=\"laravelの公式ドキュメントとは\" class=\"fragment\"></span><a href=\"#laravel%E3%81%AE%E5%85%AC%E5%BC%8F%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%A8%E3%81%AF\"><i class=\"fa fa-link\"></i></a>Laravelの公式ドキュメントとは…？</h2>\n<p data-sourcepos=\"65:1-66:227\"><a href=\"https://github.com/laravel-ja/ja-docs-6.x\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://github.com/laravel-ja/ja-docs-6.x</a> のREADME.md などに書いていますが、基本的に英語のみです。<br>\nいつも「Laravel バリデーション」とかのGoogle検索で出てくるありがたい日本語訳は、有志による非公式訳ですので、上記GitHubレポを一読しておくといいかもしれません。</p>\n","body":"# バージョンごとの、リリース情報、バグフィックス期限、セキュリティフィックス期限、サポート期間のまとめ\n\nLaravelのリリース日とサポート期限とかそのあたりのデータをまとめています。\n\n| バージョン | リリース日 | バグ修正 | セキュリティー修正 |\n|:-:|:-:|:-:|:-:|\n| 5.0  | 2015/02/04  | 2015/08/04 | 2016/02/04 |\n| 5.1(LTS)  |  2015/06/09 |  2017/06/09 | 2018/06/09 |\n| 5.2  | 2015/12/21  | 2016/06/21  | 2016/12/21  |\n| 5.3  | 2016/08/23  | 2017/02/23  | 2017/08/23  |\n| 5.4  |  2017/01/24 | 2017/07/24  | 2018/01/24  |\n| 5.5(LTS)  | 2017/08/30  | 2019/08/30  | 2020/08/30  |\n| 5.6  | 2018/02/07  | 2018/08/07  | 2019/02/07  |\n| 5.7 | 2018/09/4 | 2019/02/4 | 2019/09/4 |\n| 5.8 | 2019/02/26 | 2019/08/26 | 2020/02/26 |\n| 6.0(LTS) | 2019/09/03 | 2021/09/03 | 2022/09/03 |\n|7|2020/3|||\n|8|2020/9|||\n|9|2022/2|||\n|10|2023/2|||\n|11|2024/1|||\n\n公式情報 - https://laravel-news.com/laravel-release-process\nWikipediaよくまとまってます https://ja.wikipedia.org/wiki/Laravel\n\n**LTS** (Long-term support): 長期サポート版\n\n* Laravel5.1などのLTS版は2年の修正期間と、3年のセキュリティー修正期間がある\n* それ以外の一般的なリリースは半年の修正期間と、1年のセキュリティー修正期間がある\n\n| version | バグ修正 | セキュリティー修正 |\n|:-:|:-:|:-:|\n| LTS(Long-term support)  | 2年  | 3年  |\n| General  | 半年  | 1年  |\n\n\n## Laravel5.8の次はLaravel6.0..?どっち使えばいいの？\n\nこちらの記事でよくまとまっています。\n\n[Laravel6系で始めるか、Laravel5系を使うべきか迷う人へ](https://qiita.com/willow710kut/items/ae3fc659a5c7215fc499)\n\n最終的には各チームで判断してほしいですが、いま(2019-10-03)からプロジェクト始めるなら、Laravel5.8じゃなくてLTS版の6.0でいいのではないだろうかと思う。\n\n\n## もう少し過去のバージョンのリリース日\n\n| version | Release Date |Others|-|\n|:-:|:-:|:-:|:-:|\n|V1|2011 / 6|\n|V2|2011 / 9|\n|v3|2012 / 2|\n|v4|2013 / 5|\n|v5|2015 / 2|\n|v5.1|2015 / 9|LTS|\n|v5.2|2015 / 12|\n|v5.3|2016 / 8|\n|v5.4|2017 / 1|\n|v5.5|2017 / 7|LTS|リリース予定|\n\n[laravel-news.com](https://laravel-news.com/laravel-release-process)\n\n## Laravelの公式ドキュメントとは…？\n\nhttps://github.com/laravel-ja/ja-docs-6.x のREADME.md などに書いていますが、基本的に英語のみです。\nいつも「Laravel バリデーション」とかのGoogle検索で出てくるありがたい日本語訳は、有志による非公式訳ですので、上記GitHubレポを一読しておくといいかもしれません。\n\n\n\n\n\n\n\n\n\n\n\n","coediting":false,"comments_count":0,"created_at":"2017-03-30T13:17:19+09:00","group":null,"id":"576a9eea735f91350072","likes_count":58,"private":false,"reactions_count":0,"stocks_count":45,"tags":[{"name":"PHP","versions":[]},{"name":"Laravel","versions":[]}],"title":"Laravelのリリース日と修正期間のまとめ","updated_at":"2023-03-09T15:27:30+09:00","url":"https://qiita.com/ykhirao/items/576a9eea735f91350072","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>　最近サーバレスアーキテクチャに興味を持っています。以下2エントリーはGoogle Apps ScriptでJava Scriptを使った時の記事ですが、今回はAWS上のLambdaを使って、サーバーレスでPythonコードを実行させることをやっていきたいと思います。記事の内容は、Pythonほぼ初めまして&amp;&amp;AWSほぼ初めましての人が、LambdaとDynamoDBでいろいろできるようになるまでの記録を書いていきます。<br>\n　また最初AWS分かんなさすぎて最初は絶望していたし、Lambdaはエラー出まくって初見殺しだし、Python興味はあるけど使ったこと少なめと、かなり初心者目線で記事を書いていきたいと思ってます。写真多め、初心者がわかる程度の内容を、ひとつずつ書いていく感じですので、PythonistとAWS上級者の方は新しいことはないかと思いますが、どうぞよろしくお願いします。</p>\n\n<p>この前書いた記事<br>\n- <a href=\"http://qiita.com/ykhirao/items/782e20ab0465533c48f6\" id=\"reference-15eb3319b9855f190901\">月末営業日にタスクをリマインドする</a><br>\n- <a href=\"http://qiita.com/ykhirao/items/09ebaedd0f6f0438f422\" id=\"reference-29cb99f0d0f1d9c020a7\">Googleカレンダー 自社版</a></p>\n\n<h2>\n<span id=\"前提\" class=\"fragment\"></span><a href=\"#%E5%89%8D%E6%8F%90\"><i class=\"fa fa-link\"></i></a>前提</h2>\n\n<p>AWS初めまして<br>\nPython歴2週間くらい<br>\nAWSサービス登録済、無料枠中</p>\n\n<h1>\n<span id=\"aws\" class=\"fragment\"></span><a href=\"#aws\"><i class=\"fa fa-link\"></i></a>AWS</h1>\n\n<p>自分の場合は、AWSのサービスの多さに混乱したので、どのサービスがどのサービスとつながってるのか、まず概要を勉強しました。下記あたりが参考になるかと思います。またKindleで無料の書籍とか探しました。「ってますが、自分で使いながら、この記事を見直しながらいろいろやってみました。</p>\n\n<p><a href=\"http://qiita.com/kohashi/items/1bb952313fb695f12577\" id=\"reference-a810c093d7c16de23cbb\">「AWS is 何」を3行でまとめてみるよ</a><br>\n<a href=\"http://qiita.com/chroju/items/c7ad918d79b0288bc490\" id=\"reference-4de5e496aa23f9a6e691\">AWS1年目無料期間でやったこととハマったこと</a></p>\n\n<h2>\n<span id=\"登録\" class=\"fragment\"></span><a href=\"#%E7%99%BB%E9%8C%B2\"><i class=\"fa fa-link\"></i></a>登録</h2>\n\n<p>登録済みと仮定しているのでAWS登録は別の記事を参照ください。</p>\n\n<h2>\n<span id=\"ロール作成\" class=\"fragment\"></span><a href=\"#%E3%83%AD%E3%83%BC%E3%83%AB%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>ロール作成</h2>\n\n<p>AWSロールがないといろいろ面倒なので、<br>\nS3,DynamoDB,Lambdaにフルアクセスできるロールを今回作ります。</p>\n\n<p><a href=\"https://us-west-2.console.aws.amazon.com/console/home\" rel=\"nofollow noopener\" target=\"_blank\">AWSサービス一覧</a>からIAM</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/d478dc689f9049446a3fd1a8af11c93c025f5f75/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f35623661336631392d313266332d633436392d393166362d3339653063646231313637662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F5b6a3f19-12f3-c469-91f6-39e0cdb1167f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e4b961b64587c0810a86846df96f11d0\" alt=\"スクリーンショット 2017-03-15 14.22.30.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/5b6a3f19-12f3-c469-91f6-39e0cdb1167f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F5b6a3f19-12f3-c469-91f6-39e0cdb1167f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=074871da599987ed70c01bd0bc104bda 1x\" loading=\"lazy\"></a></p>\n\n<p>ロール &gt;&gt; 新しいロールの作成</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/7d0f5639983c61e54bfb45e8e03497e817790046/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f39383039346133642d313166372d306563392d346362662d3837313966323536383836642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F98094a3d-11f7-0ec9-4cbf-8719f256886d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=35b619cd185f27cea0645be7fcb72091\" alt=\"スクリーンショット 2017-03-15 14.22.43.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/98094a3d-11f7-0ec9-4cbf-8719f256886d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F98094a3d-11f7-0ec9-4cbf-8719f256886d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=67bbcfca4a563c596b65fb677b7327de 1x\" loading=\"lazy\"></a></p>\n\n<p>ロールの名前<br>\n今回は[lambda_dynamo]</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f786709322318d70a43d2e84b16903fa683883d6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f39396331613762612d336663312d643266342d346362302d6632306532363565303965642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F99c1a7ba-3fc1-d2f4-4cb0-f20e265e09ed.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ee17c95f1db732281b3d80e25334d1de\" alt=\"スクリーンショット 2017-03-15 14.22.48.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/99c1a7ba-3fc1-d2f4-4cb0-f20e265e09ed.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F99c1a7ba-3fc1-d2f4-4cb0-f20e265e09ed.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e086ab5296990dcc8bab6573e8763df0 1x\" loading=\"lazy\"></a></p>\n\n<p>Amazon Lambda &gt;&gt; 選択</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/a0951796d2028065ce022f8ea5ab4812c50c30d3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f61306165633261632d376165312d383130392d653039662d6463366361653661316631392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fa0aec2ac-7ae1-8109-e09f-dc6cae6a1f19.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5a33f7a56ed4d320d7254e086c50bd9c\" alt=\"スクリーンショット 2017-03-15 14.27.00.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/a0aec2ac-7ae1-8109-e09f-dc6cae6a1f19.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fa0aec2ac-7ae1-8109-e09f-dc6cae6a1f19.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=99f96b6d1f4eb79fec81eb22c6a5b1e0 1x\" loading=\"lazy\"></a></p>\n\n<p>とりあえず今回はFullAccessを3つ付けます。<br>\nAWSLambdaFullAccess<br>\nAmazonS3FullAccess<br>\nAmazonDynamoDBFullAccess</p>\n\n<p>次のステップ</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/e44dca66ebdef7f5d59e2445e91e40a3598df78a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f63343631616263652d633964382d343265302d363066342d3062393663623932313035322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc461abce-c9d8-42e0-60f4-0b96cb921052.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=70d9c7a2a7da6bc586f5a295e2045c4d\" alt=\"スクリーンショット 2017-03-15 14.27.27.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/c461abce-c9d8-42e0-60f4-0b96cb921052.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc461abce-c9d8-42e0-60f4-0b96cb921052.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5c849347cde5bb68f001126ec9a0ef10 1x\" loading=\"lazy\"></a></p>\n\n<p>ロール &gt;&gt; lambda_dynamo<br>\nといいう項目が追加されてたらOkay。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/aedc22f12385f6a63d9e7ea54c9bb480596d41c5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f31626631346238332d633463622d346661612d346531382d3538373130646366616436642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F1bf14b83-c4cb-4faa-4e18-58710dcfad6d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=882f30b01fef07648b7197cd74f501c0\" alt=\"スクリーンショット 2017-03-15 14.33.21.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/1bf14b83-c4cb-4faa-4e18-58710dcfad6d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F1bf14b83-c4cb-4faa-4e18-58710dcfad6d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7910a61b731e3e145d21f8541947e6ac 1x\" loading=\"lazy\"></a></p>\n\n<h1>\n<span id=\"lambda\" class=\"fragment\"></span><a href=\"#lambda\"><i class=\"fa fa-link\"></i></a>Lambda</h1>\n\n<p>サーバーレスでスクリプト実行できるサービスです。便利。</p>\n\n<h2>\n<span id=\"料金体系\" class=\"fragment\"></span><a href=\"#%E6%96%99%E9%87%91%E4%BD%93%E7%B3%BB\"><i class=\"fa fa-link\"></i></a>料金体系</h2>\n\n<p>基本的にいくらテストに使っても大丈夫！<a href=\"https://aws.amazon.com/jp/lambda/pricing/\" rel=\"nofollow noopener\" target=\"_blank\">公式</a></p>\n\n<p>ラムダ無料枠</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">1ヶ月</th>\n<th style=\"text-align: center\">リクエスト</th>\n<th style=\"text-align: center\">コンピューティング時間 [GB*秒]</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\">1,000,000</td>\n<td style=\"text-align: center\">400,000</td>\n</tr>\n</tbody>\n</table>\n\n<p>リクエスト:関数全体に対する合計リクエスト数<br>\nコンピューティング時間: メモリ数と時間をかけたもの</p>\n\n<p>Lambdaの最小メモリが128MBなので1ヶ月3,200,000秒()使えば、400,000[GB*sec]に到達します。<br>\n<code>(128.0[MB] / 1024[MB/GB]) * 3200000[sec] = 400,000[GB*sec]</code><br>\nなので、888時間くらいスクリプト動いても大丈夫。どんどん使おう。<br>\n(時間の計算は一応自分でやってみてくださいね！)</p>\n\n<h2>\n<span id=\"テストコードを使ってみるpythonエラー\" class=\"fragment\"></span><a href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8Bpython%E3%82%A8%E3%83%A9%E3%83%BC\"><i class=\"fa fa-link\"></i></a>テストコードを使ってみる(Pythonエラー)</h2>\n\n<p><a href=\"https://us-west-2.console.aws.amazon.com/console/home\" rel=\"nofollow noopener\" target=\"_blank\">AWSサービス一覧</a>からLambda</p>\n\n<h3>\n<span id=\"最初の関数作成\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%88%9D%E3%81%AE%E9%96%A2%E6%95%B0%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>最初の関数作成</h3>\n\n<p>Lambda 関数の作成 &gt;&gt; lambda-canary</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/3ae46df63f007c68787e34b6ec0f494f18b567fe/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f63346538353566362d383161322d336564382d653039392d3163366533346364343364652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc4e855f6-81a2-3ed8-e099-1c6e34cd43de.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=74e03bf67beaf82c9a81db87766cd1b2\" alt=\"スクリーンショット 2017-03-15 14.52.52.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/c4e855f6-81a2-3ed8-e099-1c6e34cd43de.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc4e855f6-81a2-3ed8-e099-1c6e34cd43de.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2199b1f4443d0208c0eeb52986eb54ff 1x\" loading=\"lazy\"></a></p>\n\n<p>[ トリガーの設定 ] &gt;&gt; 削除 &gt;&gt; 次へ<br>\nここで何分ごとに一度スクリプトを実行とかいじれます。<br>\nが後でも設定できるので今回は削除します。</p>\n\n<p>[ 関数の設定 ]<br>\n名前をとりあえず[ sample ]にしました。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/a5f2a2336886a48ce83490a936c29f7ea332f0bc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f30613338636234652d326537312d366264622d363233302d6165626161646630643336392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F0a38cb4e-2e71-6bdb-6230-aebaadf0d369.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d5ffcfe2281a5b9d67e9cada65ab27a6\" alt=\"スクリーンショット 2017-03-15 14.57.34.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/0a38cb4e-2e71-6bdb-6230-aebaadf0d369.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F0a38cb4e-2e71-6bdb-6230-aebaadf0d369.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5d761e82c3f7423281919089a50b1d91 1x\" loading=\"lazy\"></a></p>\n\n<p>ロールを先程つくったロールにして関数作成します。<br>\nlambda_dynamo</p>\n\n<h3>\n<span id=\"最初のテスト\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%88%9D%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88\"><i class=\"fa fa-link\"></i></a>最初のテスト</h3>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code><span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"kn\">import</span> <span class=\"n\">print_function</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span>\n<span class=\"kn\">from</span> <span class=\"nn\">urllib2</span> <span class=\"kn\">import</span> <span class=\"n\">urlopen</span>\n\n<span class=\"n\">SITE</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"p\">.</span><span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s\">'site'</span><span class=\"p\">]</span>  <span class=\"c1\"># URL of the site to check, stored in the site environment variable\n</span><span class=\"n\">EXPECTED</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"p\">.</span><span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s\">'expected'</span><span class=\"p\">]</span>  <span class=\"c1\"># String expected to be on the page, stored in the expected environment variable\n</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">validate</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">EXPECTED</span> <span class=\"ow\">in</span> <span class=\"n\">res</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">lambda_handler</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Checking {} at {}...'</span><span class=\"p\">.</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"n\">SITE</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">[</span><span class=\"s\">'time'</span><span class=\"p\">]))</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">urlopen</span><span class=\"p\">(</span><span class=\"n\">SITE</span><span class=\"p\">).</span><span class=\"n\">read</span><span class=\"p\">()):</span>\n            <span class=\"k\">raise</span> <span class=\"nb\">Exception</span><span class=\"p\">(</span><span class=\"s\">'Validation failed'</span><span class=\"p\">)</span>\n    <span class=\"k\">except</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check failed!'</span><span class=\"p\">)</span>\n        <span class=\"k\">raise</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check passed!'</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">event</span><span class=\"p\">[</span><span class=\"s\">'time'</span><span class=\"p\">]</span>\n    <span class=\"k\">finally</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check complete at {}'</span><span class=\"p\">.</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">datetime</span><span class=\"p\">.</span><span class=\"n\">now</span><span class=\"p\">())))</span>\n\n</code></pre></div></div>\n\n<p><a href=\"https://camo.qiitausercontent.com/798384903299ef1fa7b4068224a31607e18a57f4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f35336335633537302d626434392d666239372d323838382d6162333461366437346632322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F53c5c570-bd49-fb97-2888-ab34a6d74f22.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=23c0527125220d9e19b41c95bf39c660\" alt=\"スクリーンショット 2017-03-15 15.06.42.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/53c5c570-bd49-fb97-2888-ab34a6d74f22.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F53c5c570-bd49-fb97-2888-ab34a6d74f22.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3d24836f995c008a193006df6bd1c2e5 1x\" loading=\"lazy\"></a></p>\n\n<p>はい出ましたエラー。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">    print('Checking {} at {}...'.format(SITE, event['time']))\nKeyError: 'time'\n</span></code></pre></div></div>\n\n<p>このエラーを解決する前にデフォルトで使用される変数を見ていきます。</p>\n\n<h3>\n<span id=\"デフォルトで使用される変数\" class=\"fragment\"></span><a href=\"#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%A7%E4%BD%BF%E7%94%A8%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%95%B0\"><i class=\"fa fa-link\"></i></a>デフォルトで使用される変数</h3>\n\n<ul>\n<li>event - testで設定したところとか、トリガー発生元のイベントデータ</li>\n<li>Context - <a href=\"https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/python-context-object.html#python-context-object-methods\" rel=\"nofollow noopener\" target=\"_blank\">Context オブジェクト (Python)</a>\n</li>\n<li>os.environ - コード自体を変更せずに、AWS上で環境変数を設定できる</li>\n</ul>\n\n<blockquote>\n<p>event &gt;&gt; AWS Lambda はこのパラメーターを使用してイベントデータをハンドラーに渡します。このパラメータは通常、Python の dict タイプです。また、list、str、int、float、または NoneType タイプを使用できます。</p>\n\n<p>context &gt;&gt; AWS Lambda はこのパラメーターを使用してランタイム情報をハンドラーに提供します。このパラメータは LambdaContext タイプになります。</p>\n</blockquote>\n\n<p>となってます。</p>\n\n<blockquote>\n<p>os.environで取れるところはこの環境変数</p>\n</blockquote>\n\n<p><a href=\"https://camo.qiitausercontent.com/95689abe5dd1748c5adb9e53fa14b92136de4c5f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f61333062643464372d383837622d613333392d313565352d3337346638306463383837382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fa30bd4d7-887b-a339-15e5-374f80dc8878.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2a913808b89626d055416e86855a946b\" alt=\"スクリーンショット 2017-03-15 15.15.28.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/a30bd4d7-887b-a339-15e5-374f80dc8878.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fa30bd4d7-887b-a339-15e5-374f80dc8878.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5868118c70f538db974c09311d0794df 1x\" loading=\"lazy\"></a></p>\n\n<h3>\n<span id=\"time-\" class=\"fragment\"></span><a href=\"#time-\"><i class=\"fa fa-link\"></i></a>time ?</h3>\n\n<p>さて先程のエラーを処理していきます。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f856a31a1ae93d9051c6d39a92ac9344eab0b908/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f64663438383730362d643331612d336132312d303832652d3966373934373962313064332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fdf488706-d31a-3a21-082e-9f79479b10d3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5618d54eef5fe276e1e767bedfef934d\" alt=\"スクリーンショット 2017-03-15 15.11.53.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/df488706-d31a-3a21-082e-9f79479b10d3.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fdf488706-d31a-3a21-082e-9f79479b10d3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f138d31554a85a88551bc2b8eef4425a 1x\" loading=\"lazy\"></a></p>\n\n<p>テストイベントの設定のtimeを追加します。</p>\n\n<div class=\"code-frame\" data-lang=\"json\"><div class=\"highlight\"><pre><code><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"key3\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"value3\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"key2\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"value2\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"key1\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"value1\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"time\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"now...!\"</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n\n<p>これでTimeの部分でエラーはでないと思います。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"gp\">START RequestId: a8708105-0948-11e7-b83e-b71ae2e4dbbe Version: $</span>LATEST\n<span class=\"go\">Checking https://www.amazon.com/ at now...!...\nCheck failed!\nCheck complete at 2017-03-15 06:28:53.016209\nHTTP Error 503: Service Unavailable: HTTPError\nTraceback (most recent call last):\n  (省略)\n  File \"/usr/lib64/python2.7/urllib2.py\", line 556, in http_error_default\n    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)\nHTTPError: HTTP Error 503: Service Unavailable\n\nEND RequestId: a8708105-0948-11e7-b83e-b71ae2e4dbbe\nREPORT RequestId: a8708105-0948-11e7-b83e-b71ae2e4dbbe  Duration: 348.59 ms Billed Duration: 400 ms     Memory Size: 128 MB Max Memory Used: 17 MB\n</span></code></pre></div></div>\n\n<p>まだエラーでるのでいろいろやっていきます。</p>\n\n<h3>\n<span id=\"except例外処理してるのになんでエラーでるねん\" class=\"fragment\"></span><a href=\"#except%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%81%97%E3%81%A6%E3%82%8B%E3%81%AE%E3%81%AB%E3%81%AA%E3%82%93%E3%81%A7%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%A7%E3%82%8B%E3%81%AD%E3%82%93\"><i class=\"fa fa-link\"></i></a>except例外処理してるのになんでエラーでるねん！</h3>\n\n<p>まずは赤い画面でるの嫌なので、urlのリクエスト失敗してもエラーをでなくします。</p>\n\n<div class=\"code-frame\" data-lang=\"py\"><div class=\"highlight\"><pre><code>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">urlopen</span><span class=\"p\">(</span><span class=\"n\">SITE</span><span class=\"p\">).</span><span class=\"n\">read</span><span class=\"p\">()):</span>\n            <span class=\"k\">raise</span> <span class=\"nb\">Exception</span><span class=\"p\">(</span><span class=\"s\">'Validation failed'</span><span class=\"p\">)</span>\n    <span class=\"k\">except</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check failed!'</span><span class=\"p\">)</span>\n        <span class=\"k\">raise</span>\n</code></pre></div></div>\n\n<p>Pythonの場合、最後にraiseをいれると、エラーをexceptでキャッチしたのをそのまま素のpython文にエラーを戻しちゃいます。これを書き換えます。</p>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code>\n<span class=\"k\">def</span> <span class=\"nf\">lambda_handler</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Checking {} at {}...'</span><span class=\"p\">.</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"n\">SITE</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">[</span><span class=\"s\">'time'</span><span class=\"p\">]))</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">urlopen</span><span class=\"p\">(</span><span class=\"n\">SITE</span><span class=\"p\">).</span><span class=\"n\">read</span><span class=\"p\">()):</span>\n            <span class=\"k\">raise</span> <span class=\"nb\">Exception</span><span class=\"p\">(</span><span class=\"s\">'Validation failed'</span><span class=\"p\">)</span>\n    <span class=\"k\">except</span> <span class=\"nb\">Exception</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check failed!'</span><span class=\"p\">)</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check passed!'</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">event</span><span class=\"p\">[</span><span class=\"s\">'time'</span><span class=\"p\">]</span>\n    <span class=\"k\">finally</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check complete at {}'</span><span class=\"p\">.</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">datetime</span><span class=\"p\">.</span><span class=\"n\">now</span><span class=\"p\">())))</span>\n\n</code></pre></div></div>\n\n<p>やっと緑チェックの成功がでました…！！！！</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/af18459ba5152d3e053b98285397b08abcf0fc7f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f30666239663033302d616638612d333264392d653734662d3236306364613761666534652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F0fb9f030-af8a-32d9-e74f-260cda7afe4e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f73a361299b5a88efacea511723b9c6d\" alt=\"スクリーンショット 2017-03-15 15.44.10.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/0fb9f030-af8a-32d9-e74f-260cda7afe4e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F0fb9f030-af8a-32d9-e74f-260cda7afe4e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8b6679debb1306f8e7d978d77ebfabb9 1x\" loading=\"lazy\"></a></p>\n\n<p><code>except Exception as e:</code>でエラーをキャッチして<br>\n<code>print(e)</code>でエラー出力して<br>\n<code>raise</code>削除して、とりあえずはエラーでなくしました。</p>\n\n<p>このあたりのpythonのエラーハンドリングかなり調べました。raise。。</p>\n\n<h3>\n<span id=\"http-error-503\" class=\"fragment\"></span><a href=\"#http-error-503\"><i class=\"fa fa-link\"></i></a>HTTP Error 503</h3>\n\n<p>エラーがまだ続いてるので<code>HTTP Error 503: Service Unavailable: HTTPError</code>の部分を見ていきます。<br>\nまた、Validation failedという文字がないので<code>validate(urlopen(SITE).read())</code>この部分で返ってきたエラーが上記のエラーだと判断していきます。</p>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nf\">validate</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">EXPECTED</span> <span class=\"ow\">in</span> <span class=\"n\">res</span>\n</code></pre></div></div>\n\n<p>こちらは <a href=\"https://www.amazon.com/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.amazon.com/</a> にアクセスして、返ってきたｈｔｍｌファイルの中に「Online Shopping」という文字があるかどうかの診断になります。</p>\n\n<p>とりあえずAmazonからGoogleへのアクセスへ、環境変数の変更をする<br>\n* <a href=\"https://www.google.co.jp/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.google.co.jp/</a><br>\n* Gmail</p>\n\n<p>そうすると</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">\nChecking https://www.google.co.jp/ at now...!...\nCheck passed!\nCheck complete at 2017-03-15 07:00:05.723916\n\n</span></code></pre></div></div>\n\n<p>やっとCheck passed!が出ました。</p>\n\n<blockquote>\n<p>503 Service Unavailable<br>\nサービス利用不可。サービスが一時的に過負荷やメンテナンスで使用不可能である。<br>\n例として、アクセスが殺到して処理不能に陥った場合に返される。</p>\n</blockquote>\n\n<p><a href=\"https://www.amazon.com/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.amazon.com/</a> <br>\nが落ちるわけないじゃーん。って心のそこから思って環境変数を返してチェックしてみることを失念してました。ただのGoogleサービスに変えたらうまくいきました。<br>\nLambdaからのアクセス拒否してるの？</p>\n\n<p>ハマったところです。</p>\n\n<h3>\n<span id=\"indent\" class=\"fragment\"></span><a href=\"#indent\"><i class=\"fa fa-link\"></i></a>indent</h3>\n\n<p>Pythonのエラーですがインデックスの数とかでも何回かエラー出しました。</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">Syntax error in module 'lambda_function': \nunexpected indent (lambda_function.py, line 30)\n</span></code></pre></div></div>\n\n<p>このあたり勉強したのですが、タブとスペース(4つ)の戦争ですね。<br>\n<a href=\"http://www.gizmodo.jp/2016/09/tab-vs-space.html\" rel=\"nofollow noopener\" target=\"_blank\">プログラミングのコードを書く時のタブvsスペース戦争がついに決着</a><br>\npythonはスペースで書くのが一般的だということが書かれてます。</p>\n\n<p>自分がローカルで編集してたファイルがtabで入っていて<br>\nAWS上で編集したコードはスペース4つで入ります。<br>\nこのindentエラーを見たくないのでスペース派に乗り換えました。</p>\n\n<h3>\n<span id=\"requests\" class=\"fragment\"></span><a href=\"#requests\"><i class=\"fa fa-link\"></i></a>Requests</h3>\n\n<p>urlopenをそのまま使ってもいいのですがrequestsを導入したいと思います。</p>\n\n<p><a href=\"http://d.hatena.ne.jp/yumimue/20071231/1199129495\" rel=\"nofollow noopener\" target=\"_blank\">python urllib2モジュール</a><br>\n<a href=\"http://requests-docs-ja.readthedocs.io/en/latest/\" rel=\"nofollow noopener\" target=\"_blank\">Requests: 人間のためのHTTP</a><br>\n<a href=\"https://gist.github.com/kennethreitz/973705\" rel=\"nofollow noopener\" target=\"_blank\">Requestsを使わずに同じ事をするためのコード</a></p>\n\n<p>slackとかにメッセージ送るのが簡単になります。</p>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">今のコード.py</span></div>\n<div class=\"highlight\"><pre><code><span class=\"c1\"># coding: utf-8\n</span><span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"kn\">import</span> <span class=\"n\">print_function</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n<span class=\"kn\">import</span> <span class=\"nn\">requests</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span>\n<span class=\"kn\">from</span> <span class=\"nn\">urllib2</span> <span class=\"kn\">import</span> <span class=\"n\">urlopen</span>\n\n<span class=\"n\">SITE</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"p\">.</span><span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s\">'site'</span><span class=\"p\">]</span>\n<span class=\"n\">EXPECTED</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"p\">.</span><span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s\">'expected'</span><span class=\"p\">]</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">validate</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">EXPECTED</span> <span class=\"ow\">in</span> <span class=\"n\">res</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">lambda_handler</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Checking {} at {}...'</span><span class=\"p\">.</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"n\">SITE</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">[</span><span class=\"s\">'time'</span><span class=\"p\">]))</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">urlopen</span><span class=\"p\">(</span><span class=\"n\">SITE</span><span class=\"p\">).</span><span class=\"n\">read</span><span class=\"p\">()):</span>\n            <span class=\"k\">raise</span> <span class=\"nb\">Exception</span><span class=\"p\">(</span><span class=\"s\">'Validation failed'</span><span class=\"p\">)</span>\n    <span class=\"k\">except</span> <span class=\"nb\">Exception</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check failed!'</span><span class=\"p\">)</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check passed!'</span><span class=\"p\">)</span>\n    <span class=\"k\">finally</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check complete at {}'</span><span class=\"p\">.</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">datetime</span><span class=\"p\">.</span><span class=\"n\">now</span><span class=\"p\">())))</span>\n        <span class=\"k\">return</span> <span class=\"s\">\"Finish\"</span>\n\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">Unable to import module 'lambda_function': No module named requests\n</span></code></pre></div></div>\n\n<p>requestsは外部モジュールなのでこんなエラーおきます。</p>\n\n<h2>\n<span id=\"外部モジュールの使用\" class=\"fragment\"></span><a href=\"#%E5%A4%96%E9%83%A8%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%AE%E4%BD%BF%E7%94%A8\"><i class=\"fa fa-link\"></i></a>外部モジュールの使用</h2>\n\n<p>requestsみたいなPython標準外のモジュールを入れるのにも一癖あったので書いていきます。</p>\n\n<ul>\n<li>lambda-uploaderを使ってリモート</li>\n<li>ローカルで自分でzipにかためてUP</li>\n</ul>\n\n<h3>\n<span id=\"lambda-uploader\" class=\"fragment\"></span><a href=\"#lambda-uploader\"><i class=\"fa fa-link\"></i></a>lambda-uploader</h3>\n\n<p>このあたりが参考になります。</p>\n\n<p><a href=\"http://qiita.com/Esfahan/items/08fa6af8811dada4cb2a\" id=\"reference-3d9aa0b1c65c395d42a4\">lambda-uploaderを使ってAWS Lambdaをリモートで開発、実行、デプロイする</a><br>\n<a href=\"http://dev.classmethod.jp/cloud/deploy-aws-lambda-python-with-lambda-uploader/\" rel=\"nofollow noopener\" target=\"_blank\">AWS Lambda Pythonをlambda-uploaderでデプロイ</a></p>\n\n<h3>\n<span id=\"自分のコードをzipアップロード\" class=\"fragment\"></span><a href=\"#%E8%87%AA%E5%88%86%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92zip%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>自分のコードをZIPアップロード</h3>\n\n<p>自分はこれで行いました。単発だとすぐできる。<br>\n<a href=\"http://qiita.com/Hironsan/items/0eb5578f3321c72637b4\" id=\"reference-4dd871d93361b26b3044\">【AWS】Lambdaでpipしたいと思ったときにすべきこと</a></p>\n\n<p>作業フォルダに<code>pip install requests -t .</code>して、それをzipで固めてアップする感じです。</p>\n\n<p>無事アップロードできたら、先程の<code>今のコード.py</code>からスタートします。</p>\n\n<h2>\n<span id=\"slack\" class=\"fragment\"></span><a href=\"#slack\"><i class=\"fa fa-link\"></i></a>Slack</h2>\n\n<p>import <br>\n* urllib2<br>\n* requests<br>\n* どっちでも可</p>\n\n<p>api<br>\n* Slack api(token取得してごにょごにょ xoxp-12131212こんなやつ)<br>\n* Webhook(urlだけ取ってくる)<br>\n* どっちでも可</p>\n\n<p>どの組み合わせを使っても良いのですが、今回は簡単なrequests * Webhookを使います。</p>\n\n<p>こちらWebhookのURL取得はこちらを参考に！<br>\n<a href=\"http://qiita.com/vmmhypervisor/items/18c99624a84df8b31008\" id=\"reference-a01b885ea53ea7354206\">SlackのWebhook URL取得手順</a></p>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nf\">send_slack</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">):</span>\n    <span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"s\">\"先程げっとしたURL\"</span>\n    <span class=\"n\">payload_dic</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"text\"</span><span class=\"p\">:</span><span class=\"n\">text</span><span class=\"p\">,</span>\n        <span class=\"s\">\"icon_emoji\"</span><span class=\"p\">:</span><span class=\"s\">':grin:'</span><span class=\"p\">,</span>\n        <span class=\"s\">\"channel\"</span><span class=\"p\">:</span><span class=\"s\">'bot-test2'</span><span class=\"p\">,</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"n\">r</span> <span class=\"o\">=</span> <span class=\"n\">requests</span><span class=\"p\">.</span><span class=\"n\">post</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">json</span><span class=\"p\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"n\">payload_dic</span><span class=\"p\">))</span>\n</code></pre></div></div>\n\n<p>たったこれだけでSlack送れます！</p>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code><span class=\"c1\"># coding: utf-8\n</span><span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"kn\">import</span> <span class=\"n\">print_function</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n<span class=\"kn\">import</span> <span class=\"nn\">requests</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span>\n<span class=\"kn\">from</span> <span class=\"nn\">urllib2</span> <span class=\"kn\">import</span> <span class=\"n\">urlopen</span>\n\n<span class=\"n\">SITE</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"p\">.</span><span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s\">'site'</span><span class=\"p\">]</span>\n<span class=\"n\">EXPECTED</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"p\">.</span><span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s\">'expected'</span><span class=\"p\">]</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">validate</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">EXPECTED</span> <span class=\"ow\">in</span> <span class=\"n\">res</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">web_check</span><span class=\"p\">():</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">urlopen</span><span class=\"p\">(</span><span class=\"n\">SITE</span><span class=\"p\">).</span><span class=\"n\">read</span><span class=\"p\">()):</span>\n            <span class=\"k\">raise</span> <span class=\"nb\">Exception</span><span class=\"p\">(</span><span class=\"s\">'Validation failed'</span><span class=\"p\">)</span>\n    <span class=\"k\">except</span> <span class=\"nb\">Exception</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check failed!'</span><span class=\"p\">)</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check passed!'</span><span class=\"p\">)</span>\n    <span class=\"k\">finally</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check complete at {}'</span><span class=\"p\">.</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">datetime</span><span class=\"p\">.</span><span class=\"n\">now</span><span class=\"p\">())))</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">lambda_handler</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Checking {} at {}...'</span><span class=\"p\">.</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"n\">SITE</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">[</span><span class=\"s\">'time'</span><span class=\"p\">]))</span>\n    <span class=\"c1\"># web_check()\n</span>    <span class=\"n\">send_slack</span><span class=\"p\">(</span><span class=\"s\">\"test\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"s\">\"success!\"</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">send_slack</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">):</span>\n    <span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"s\">\"こちら自分のURL\"</span>\n    <span class=\"n\">payload_dic</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"text\"</span><span class=\"p\">:</span><span class=\"n\">text</span><span class=\"p\">,</span>\n        <span class=\"s\">\"icon_emoji\"</span><span class=\"p\">:</span><span class=\"s\">':grin:'</span><span class=\"p\">,</span>\n        <span class=\"s\">\"channel\"</span><span class=\"p\">:</span><span class=\"s\">'bot-test2'</span><span class=\"p\">,</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"n\">r</span> <span class=\"o\">=</span> <span class=\"n\">requests</span><span class=\"p\">.</span><span class=\"n\">post</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">json</span><span class=\"p\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"n\">payload_dic</span><span class=\"p\">))</span>\n\n\n</code></pre></div></div>\n\n<p><code>def web_check():</code>に処理を移して置きました。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>def lambda_handler(event, context):\n    print('Checking {} at {}...'.format(SITE, event['time']))\n    # web_check()\n    send_slack(\"test\")\n    return \"success!\"\n</code></pre></div></div>\n\n<p>これで</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/23e831030b9e580f8597ad709ffcc8a2fbc4ccdc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f62336364323839302d303066332d356337642d306666322d3430313664393461613431372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"760\" alt=\"スクリーンショット 2017-03-15 16.55.31.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fb3cd2890-00f3-5c7d-0ff2-4016d94aa417.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=90e87855869ce070705fd203e3dc65fa\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/b3cd2890-00f3-5c7d-0ff2-4016d94aa417.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fb3cd2890-00f3-5c7d-0ff2-4016d94aa417.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b3ba890f1bfb02bae52cdce7568a3339 1x\" loading=\"lazy\"></a><br>\nSlack到着しました。</p>\n\n<p>Okay。<br>\n次はDynamoDBからデータを取ってきます。</p>\n\n<h1>\n<span id=\"dynamodb\" class=\"fragment\"></span><a href=\"#dynamodb\"><i class=\"fa fa-link\"></i></a>DynamoDB</h1>\n\n<h2>\n<span id=\"料金体系-1\" class=\"fragment\"></span><a href=\"#%E6%96%99%E9%87%91%E4%BD%93%E7%B3%BB-1\"><i class=\"fa fa-link\"></i></a>料金体系</h2>\n\n<p>AWS の無料利用枠の一部としてのDynamoDB無料枠</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">ストレージ</th>\n<th style=\"text-align: center\">書き込み容量</th>\n<th style=\"text-align: center\">書き込み容量</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">25GB</td>\n<td style=\"text-align: center\">25</td>\n<td style=\"text-align: center\">25</td>\n</tr>\n</tbody>\n</table>\n\n<blockquote>\n<p>1 つの容量のユニットで 1 秒あたりに 1 つのリクエストを処理します<br>\n1ユニットの書き込み容量: 最大1KBデータを1秒に1書き込み<br>\n1ユニットの読み込み容量: 最大4KBデータを1秒に1読み込み<br>\nDynamoDB ストリームからの 250 万回の読み込みリクエストを無料で利用できます。</p>\n</blockquote>\n\n<p>とりあえずデータベースを作る時に書き込み容量と読み込み容量を1にセットして使えば、無料枠だとお金かからないと思います。<br>\n今回は1分に1度くらいでもいいので、最小単位の1(1秒に1度アクセスできるレベル)を選びます。</p>\n\n<h2>\n<span id=\"作ってみる\" class=\"fragment\"></span><a href=\"#%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>作ってみる</h2>\n\n<p>とりあえず設定はこんな感じ。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/e8b3da60bed5d16323f30e1a45ce118e562363f5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f39383434363062372d386463352d633264352d333166342d6162356238303736373963302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F984460b7-8dc5-c2d5-31f4-ab5b807679c0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e09245884c341858e798a2bf449ae35e\" alt=\"スクリーンショット 2017-03-15 17.10.25.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/984460b7-8dc5-c2d5-31f4-ab5b807679c0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F984460b7-8dc5-c2d5-31f4-ab5b807679c0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=14ef6909a249447d1075862b99e22fe5 1x\" loading=\"lazy\"></a></p>\n\n<p>DynamoDBはハッシュ(言語によっては辞書型、連想配列など)のKeyでしかアクセスできません。今回はidをkeyとしてアクセスします。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/456ad6b5288496ab9ee9734b092f406a2a88f9aa/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f30613836313233372d646230662d333731652d343539362d3461643662633438386539342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F0a861237-db0f-371e-4596-4ad6bc488e94.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7148e5adb30fb0ae0ec2c07be4fbe5ec\" alt=\"スクリーンショット 2017-03-15 17.15.28.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/0a861237-db0f-371e-4596-4ad6bc488e94.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F0a861237-db0f-371e-4596-4ad6bc488e94.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9f21c61c847813fb1b3454885520e7be 1x\" loading=\"lazy\"></a></p>\n\n<div class=\"code-frame\" data-lang=\"json\"><div class=\"highlight\"><pre><code><span class=\"w\">\n</span><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"target\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Online Shopping\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://www.amazon.com/\"</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n\n</span><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"target\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Gmail\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://www.google.co.jp/\"</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n\n<p>urlからtargetを探すためのTableとして使います。</p>\n\n<h2>\n<span id=\"pythonコードから先程のデータを取ってみる\" class=\"fragment\"></span><a href=\"#python%E3%82%B3%E3%83%BC%E3%83%89%E3%81%8B%E3%82%89%E5%85%88%E7%A8%8B%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E5%8F%96%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>pythonコードから先程のデータを取ってみる</h2>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code><span class=\"c1\"># ２つ追加\n</span><span class=\"kn\">import</span> <span class=\"nn\">boto3</span>\n<span class=\"kn\">from</span> <span class=\"nn\">boto3.dynamodb.conditions</span> <span class=\"kn\">import</span> <span class=\"n\">Key</span><span class=\"p\">,</span> <span class=\"n\">Attr</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">get_urls</span><span class=\"p\">():</span>\n    <span class=\"n\">table</span>    <span class=\"o\">=</span> <span class=\"n\">dynamodb</span><span class=\"p\">.</span><span class=\"n\">Table</span><span class=\"p\">(</span><span class=\"s\">'sites'</span><span class=\"p\">)</span>\n    <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">table</span><span class=\"p\">.</span><span class=\"n\">scan</span><span class=\"p\">()</span>\n    <span class=\"n\">sites</span> <span class=\"o\">=</span> <span class=\"n\">response</span><span class=\"p\">[</span><span class=\"s\">\"Items\"</span><span class=\"p\">]</span>\n    <span class=\"k\">return</span> <span class=\"n\">sites</span>\n</code></pre></div></div>\n\n<p>機能を追加して、get_urls()でDynamoDBから取ってきたurlからtargetの文章があるかサーチしています。</p>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">現在の.py</span></div>\n<div class=\"highlight\"><pre><code><span class=\"c1\"># coding: utf-8\n</span><span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"kn\">import</span> <span class=\"n\">print_function</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n<span class=\"kn\">import</span> <span class=\"nn\">requests</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span>\n<span class=\"kn\">from</span> <span class=\"nn\">urllib2</span> <span class=\"kn\">import</span> <span class=\"n\">urlopen</span>\n<span class=\"kn\">import</span> <span class=\"nn\">boto3</span>\n<span class=\"kn\">from</span> <span class=\"nn\">boto3.dynamodb.conditions</span> <span class=\"kn\">import</span> <span class=\"n\">Key</span><span class=\"p\">,</span> <span class=\"n\">Attr</span>\n\n<span class=\"n\">dynamodb</span> <span class=\"o\">=</span> <span class=\"n\">boto3</span><span class=\"p\">.</span><span class=\"n\">resource</span><span class=\"p\">(</span><span class=\"s\">'dynamodb'</span><span class=\"p\">)</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">validate</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">,</span> <span class=\"n\">target</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">target</span> <span class=\"ow\">in</span> <span class=\"n\">res</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">web_check</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">target</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">\"Serching ... \"</span> <span class=\"o\">+</span> <span class=\"n\">target</span><span class=\"p\">)</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">urlopen</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">).</span><span class=\"n\">read</span><span class=\"p\">(),</span> <span class=\"n\">target</span><span class=\"p\">):</span>\n            <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">\"Find!\"</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">\"Not Find!\"</span><span class=\"p\">)</span>\n    <span class=\"k\">except</span> <span class=\"nb\">Exception</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Error'</span><span class=\"p\">)</span>\n        <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">get_urls</span><span class=\"p\">():</span>\n    <span class=\"n\">table</span>    <span class=\"o\">=</span> <span class=\"n\">dynamodb</span><span class=\"p\">.</span><span class=\"n\">Table</span><span class=\"p\">(</span><span class=\"s\">'sites'</span><span class=\"p\">)</span>\n    <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">table</span><span class=\"p\">.</span><span class=\"n\">scan</span><span class=\"p\">()</span>\n    <span class=\"n\">sites</span> <span class=\"o\">=</span> <span class=\"n\">response</span><span class=\"p\">[</span><span class=\"s\">\"Items\"</span><span class=\"p\">]</span>\n    <span class=\"k\">return</span> <span class=\"n\">sites</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">send_slack</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">):</span>\n    <span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"s\">\"https://hooks.slack.com/services/\"</span>\n    <span class=\"n\">payload_dic</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"text\"</span><span class=\"p\">:</span><span class=\"n\">text</span><span class=\"p\">,</span>\n        <span class=\"s\">\"icon_emoji\"</span><span class=\"p\">:</span><span class=\"s\">':grin:'</span><span class=\"p\">,</span>\n        <span class=\"s\">\"channel\"</span><span class=\"p\">:</span><span class=\"s\">'bot-test2'</span><span class=\"p\">,</span>\n    <span class=\"p\">}</span>\n    <span class=\"n\">r</span> <span class=\"o\">=</span> <span class=\"n\">requests</span><span class=\"p\">.</span><span class=\"n\">post</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">json</span><span class=\"p\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"n\">payload_dic</span><span class=\"p\">))</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">lambda_handler</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check start'</span><span class=\"p\">)</span>\n\n    <span class=\"n\">sites</span> <span class=\"o\">=</span> <span class=\"n\">get_urls</span><span class=\"p\">()</span>\n    <span class=\"k\">for</span> <span class=\"n\">site</span> <span class=\"ow\">in</span> <span class=\"n\">sites</span><span class=\"p\">:</span>\n        <span class=\"n\">web_check</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">site</span><span class=\"p\">[</span><span class=\"s\">\"url\"</span><span class=\"p\">]),</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">site</span><span class=\"p\">[</span><span class=\"s\">\"target\"</span><span class=\"p\">]))</span>\n\n    <span class=\"k\">return</span> <span class=\"s\">\"success!\"</span>\n\n\n</code></pre></div>\n</div>\n\n<p>出力結果</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">\nCheck start\nSerching ... 技術情報共有サービスです at https://qiita.com/\nFind!\nSerching ... Gmail at https://www.google.co.jp/\nFind!\nSerching ... Gmailですか？ at https://www.google.co.jp/\nNot Find!\nSerching ... Online Shopping at https://www.amazon.com/\nError\nHTTP Error 503: Service Unavailable\nEND RequestId: 3992d81e-095e-11e7-b30a-1ddc7da9e992\n</span></code></pre></div></div>\n\n<p>ここでもエラーおきました。Pythonつまづく！</p>\n\n<div class=\"code-frame\" data-lang=\"shell-session\"><div class=\"highlight\"><pre><code><span class=\"go\">\n'utf8' codec can't decode byte 0x90 in position 102: invalid start byte\n</span></code></pre></div></div>\n\n<p><a href=\"http://lab.hde.co.jp/2008/08/pythonunicodeencodeerror.html\" rel=\"nofollow noopener\" target=\"_blank\">PythonのUnicodeEncodeErrorを知る</a><br>\nここを参考にエラー解決しました。<br>\n<code>type(site[\"url\"])</code>したら<code>&lt;type 'unicode'&gt;</code>だったので、<br>\n<code>str(site[\"url\"])</code>をして<code>&lt;type 'str'&gt;</code>に変えました。</p>\n\n<h2>\n<span id=\"lambdaからdynamodb書き込み\" class=\"fragment\"></span><a href=\"#lambda%E3%81%8B%E3%82%89dynamodb%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%81%BF\"><i class=\"fa fa-link\"></i></a>LambdaからDynamoDB書き込み</h2>\n\n<p>sites_check1テーブルの追加</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/6b816960ceb961b453da976b4c20284f5e863ffc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65383039613561642d363565632d346639342d643262392d6136393933383065303439372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe809a5ad-65ec-4f94-d2b9-a699380e0497.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8cccb26f61719c7e881c7bb82bbe8891\" alt=\"スクリーンショット 2017-03-15 18.19.12.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e809a5ad-65ec-4f94-d2b9-a699380e0497.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe809a5ad-65ec-4f94-d2b9-a699380e0497.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6f962ba1e6c3ea97b4634855f0627e1f 1x\" loading=\"lazy\"></a></p>\n\n<p>追加</p>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code><span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span><span class=\"p\">,</span> <span class=\"n\">timedelta</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">insert</span><span class=\"p\">(</span><span class=\"n\">results</span><span class=\"p\">):</span>\n    <span class=\"n\">date</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"p\">.</span><span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">hours</span><span class=\"o\">=</span><span class=\"mi\">9</span><span class=\"p\">)</span>\n\n    <span class=\"nb\">id</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n    <span class=\"n\">table</span> <span class=\"o\">=</span> <span class=\"n\">dynamodb</span><span class=\"p\">.</span><span class=\"n\">Table</span><span class=\"p\">(</span><span class=\"s\">'sites_check'</span><span class=\"p\">)</span>\n    <span class=\"n\">table</span><span class=\"p\">.</span><span class=\"n\">put_item</span><span class=\"p\">(</span>\n        <span class=\"n\">Item</span><span class=\"o\">=</span><span class=\"p\">{</span>\n            <span class=\"s\">\"id\"</span><span class=\"p\">:</span> <span class=\"nb\">id</span><span class=\"p\">,</span>\n            <span class=\"s\">\"date\"</span><span class=\"p\">:</span> <span class=\"n\">date</span><span class=\"p\">.</span><span class=\"n\">strftime</span><span class=\"p\">(</span><span class=\"s\">\"%Y/%m/%d %H:%M\"</span><span class=\"p\">),</span>\n            <span class=\"s\">\"result\"</span><span class=\"p\">:</span> <span class=\"n\">results</span>\n       <span class=\"p\">}</span>\n    <span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>時間の増減を行うtimedeltaとかを追加しました。<br>\nDynamoDBのsitesテーブルにタイトル追加しました。<br>\n現在のコード</p>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code>\n<span class=\"c1\"># coding: utf-8\n</span><span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"kn\">import</span> <span class=\"n\">print_function</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n<span class=\"kn\">import</span> <span class=\"nn\">requests</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span><span class=\"p\">,</span> <span class=\"n\">timedelta</span>\n<span class=\"kn\">from</span> <span class=\"nn\">urllib2</span> <span class=\"kn\">import</span> <span class=\"n\">urlopen</span>\n<span class=\"kn\">import</span> <span class=\"nn\">boto3</span>\n<span class=\"kn\">from</span> <span class=\"nn\">boto3.dynamodb.conditions</span> <span class=\"kn\">import</span> <span class=\"n\">Key</span><span class=\"p\">,</span> <span class=\"n\">Attr</span>\n\n<span class=\"n\">dynamodb</span> <span class=\"o\">=</span> <span class=\"n\">boto3</span><span class=\"p\">.</span><span class=\"n\">resource</span><span class=\"p\">(</span><span class=\"s\">'dynamodb'</span><span class=\"p\">)</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">validate</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">,</span> <span class=\"n\">target</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">target</span> <span class=\"ow\">in</span> <span class=\"n\">res</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">web_check</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">target</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">\"Serching ... \"</span> <span class=\"o\">+</span> <span class=\"n\">target</span> <span class=\"o\">+</span> <span class=\"s\">\" at \"</span> <span class=\"o\">+</span> <span class=\"n\">url</span><span class=\"p\">)</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">urlopen</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">).</span><span class=\"n\">read</span><span class=\"p\">(),</span> <span class=\"n\">target</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"s\">\"Find!\"</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"s\">\"Not Find!\"</span>\n    <span class=\"k\">except</span> <span class=\"nb\">Exception</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">get_urls</span><span class=\"p\">():</span>\n    <span class=\"n\">table</span>    <span class=\"o\">=</span> <span class=\"n\">dynamodb</span><span class=\"p\">.</span><span class=\"n\">Table</span><span class=\"p\">(</span><span class=\"s\">'sites'</span><span class=\"p\">)</span>\n    <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">table</span><span class=\"p\">.</span><span class=\"n\">scan</span><span class=\"p\">()</span>\n    <span class=\"n\">sites</span> <span class=\"o\">=</span> <span class=\"n\">response</span><span class=\"p\">[</span><span class=\"s\">\"Items\"</span><span class=\"p\">]</span>\n    <span class=\"k\">return</span> <span class=\"n\">sites</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">send_slack</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">):</span>\n    <span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"s\">\"https://hooks.slack.com/\"</span>\n    <span class=\"n\">payload_dic</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"text\"</span><span class=\"p\">:</span><span class=\"n\">text</span><span class=\"p\">,</span>\n        <span class=\"s\">\"icon_emoji\"</span><span class=\"p\">:</span><span class=\"s\">':grin:'</span><span class=\"p\">,</span>\n        <span class=\"s\">\"channel\"</span><span class=\"p\">:</span><span class=\"s\">'bot-test2'</span><span class=\"p\">,</span>\n    <span class=\"p\">}</span>\n    <span class=\"n\">r</span> <span class=\"o\">=</span> <span class=\"n\">requests</span><span class=\"p\">.</span><span class=\"n\">post</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">json</span><span class=\"p\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"n\">payload_dic</span><span class=\"p\">))</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">insert</span><span class=\"p\">(</span><span class=\"n\">results</span><span class=\"p\">):</span>\n    <span class=\"n\">date</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"p\">.</span><span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">hours</span><span class=\"o\">=</span><span class=\"mi\">9</span><span class=\"p\">)</span>\n\n    <span class=\"nb\">id</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n    <span class=\"n\">table</span> <span class=\"o\">=</span> <span class=\"n\">dynamodb</span><span class=\"p\">.</span><span class=\"n\">Table</span><span class=\"p\">(</span><span class=\"s\">'sites_check'</span><span class=\"p\">)</span>\n    <span class=\"n\">table</span><span class=\"p\">.</span><span class=\"n\">put_item</span><span class=\"p\">(</span>\n        <span class=\"n\">Item</span><span class=\"o\">=</span><span class=\"p\">{</span>\n            <span class=\"s\">\"id\"</span><span class=\"p\">:</span> <span class=\"nb\">id</span><span class=\"p\">,</span>\n            <span class=\"s\">\"date\"</span><span class=\"p\">:</span> <span class=\"n\">date</span><span class=\"p\">.</span><span class=\"n\">strftime</span><span class=\"p\">(</span><span class=\"s\">\"%Y/%m/%d %H:%M\"</span><span class=\"p\">),</span>\n            <span class=\"s\">\"result\"</span><span class=\"p\">:</span> <span class=\"n\">results</span>\n       <span class=\"p\">}</span>\n    <span class=\"p\">)</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">lambda_handler</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check start'</span><span class=\"p\">)</span>\n\n    <span class=\"n\">results</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n    <span class=\"n\">sites</span> <span class=\"o\">=</span> <span class=\"n\">get_urls</span><span class=\"p\">()</span>\n    <span class=\"k\">for</span> <span class=\"n\">site</span> <span class=\"ow\">in</span> <span class=\"n\">sites</span><span class=\"p\">:</span>\n        <span class=\"n\">msg</span> <span class=\"o\">=</span> <span class=\"n\">web_check</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">site</span><span class=\"p\">[</span><span class=\"s\">\"url\"</span><span class=\"p\">]),</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">site</span><span class=\"p\">[</span><span class=\"s\">\"target\"</span><span class=\"p\">]))</span>\n        <span class=\"n\">results</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">site</span><span class=\"p\">[</span><span class=\"s\">\"title\"</span><span class=\"p\">])]</span> <span class=\"o\">=</span> <span class=\"n\">msg</span>\n\n    <span class=\"n\">insert</span><span class=\"p\">(</span><span class=\"n\">results</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"s\">\"success!\"</span>\n\n\n\n</code></pre></div></div>\n\n<p>データを挿入した結果がこちら。</p>\n\n<div class=\"code-frame\" data-lang=\"json\"><div class=\"highlight\"><pre><code><span class=\"w\">\n</span><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"date\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"2017/03/15 18:37\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"result\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"Amazon\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Find!\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"w\"> </span><span class=\"err\">なぜかFindとなってエラー起きず</span><span class=\"w\"> \n    </span><span class=\"nl\">\"Google\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Find!\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"Google-2\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Not Find!\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"Qiita\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Find!\"</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n\n</span><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"date\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"2017/03/15 18:48\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"result\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"Amazon\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"HTTP Error 503: Service Unavailable\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"w\"> </span><span class=\"err\">こちらでエラー起きたときにstr(e)にしました</span><span class=\"w\">\n    </span><span class=\"nl\">\"Google\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Find!\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"Google-2\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Not Find!\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"Qiita\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Find!\"</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n\n<p><code>str(e)</code>ってしないとeがstr型じゃないのでエラーが起きました。<br>\nPythonに慣れてきたので10分くらいで解決。<br>\njsonってコメントつけられないんですね。</p>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nf\">get_recent_codes</span><span class=\"p\">():</span>\n    <span class=\"n\">date</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"p\">.</span><span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">hours</span><span class=\"o\">=</span><span class=\"mi\">9</span><span class=\"p\">)</span>\n    <span class=\"n\">now</span> <span class=\"o\">=</span> <span class=\"n\">date</span><span class=\"p\">.</span><span class=\"n\">strftime</span><span class=\"p\">(</span><span class=\"s\">\"%Y/%m/%d %H:%M\"</span><span class=\"p\">)</span>\n    <span class=\"n\">last</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">date</span> <span class=\"o\">+</span> <span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">minutes</span><span class=\"o\">=-</span><span class=\"mi\">9</span><span class=\"p\">)).</span><span class=\"n\">strftime</span><span class=\"p\">(</span><span class=\"s\">\"%Y/%m/%d %H:%M\"</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># idが0かつ、１０分以内のデータを取ってくる感じのクエリ\n</span>    <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">table</span><span class=\"p\">.</span><span class=\"n\">query</span><span class=\"p\">(</span>\n        <span class=\"n\">KeyConditionExpression</span><span class=\"o\">=</span><span class=\"n\">Key</span><span class=\"p\">(</span><span class=\"s\">'id'</span><span class=\"p\">).</span><span class=\"n\">eq</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"o\">&amp;</span> <span class=\"n\">Key</span><span class=\"p\">(</span><span class=\"s\">'date'</span><span class=\"p\">).</span><span class=\"n\">between</span><span class=\"p\">(</span><span class=\"n\">last</span><span class=\"p\">,</span> <span class=\"n\">now</span><span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">response</span>\n</code></pre></div></div>\n\n<p><code>response['Count']</code>に取ってこれたクエリの数が入ります。<br>\n<code>response['Items']</code>に取ってこれたTableのデータがはいってます。<br>\nそれ以外のデータ必要な場合は適宜、Printしつつデータの取り出しをしてください。</p>\n\n<p>結果こんな感じ</p>\n\n<div class=\"code-frame\" data-lang=\"python\"><div class=\"highlight\"><pre><code><span class=\"c1\"># coding: utf-8\n</span><span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"kn\">import</span> <span class=\"n\">print_function</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n<span class=\"kn\">import</span> <span class=\"nn\">requests</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span><span class=\"p\">,</span> <span class=\"n\">timedelta</span>\n<span class=\"kn\">from</span> <span class=\"nn\">urllib2</span> <span class=\"kn\">import</span> <span class=\"n\">urlopen</span>\n<span class=\"kn\">import</span> <span class=\"nn\">boto3</span>\n<span class=\"kn\">from</span> <span class=\"nn\">boto3.dynamodb.conditions</span> <span class=\"kn\">import</span> <span class=\"n\">Key</span><span class=\"p\">,</span> <span class=\"n\">Attr</span>\n\n<span class=\"n\">dynamodb</span> <span class=\"o\">=</span> <span class=\"n\">boto3</span><span class=\"p\">.</span><span class=\"n\">resource</span><span class=\"p\">(</span><span class=\"s\">'dynamodb'</span><span class=\"p\">)</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">validate</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">,</span> <span class=\"n\">target</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">target</span> <span class=\"ow\">in</span> <span class=\"n\">res</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">web_check</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">target</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">\"Serching ... \"</span> <span class=\"o\">+</span> <span class=\"n\">target</span> <span class=\"o\">+</span> <span class=\"s\">\" at \"</span> <span class=\"o\">+</span> <span class=\"n\">url</span><span class=\"p\">)</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">urlopen</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">).</span><span class=\"n\">read</span><span class=\"p\">(),</span> <span class=\"n\">target</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"s\">\"Find!\"</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"s\">\"Not Find!\"</span>\n    <span class=\"k\">except</span> <span class=\"nb\">Exception</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">get_urls</span><span class=\"p\">():</span>\n    <span class=\"n\">table</span>    <span class=\"o\">=</span> <span class=\"n\">dynamodb</span><span class=\"p\">.</span><span class=\"n\">Table</span><span class=\"p\">(</span><span class=\"s\">'sites'</span><span class=\"p\">)</span>\n    <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">table</span><span class=\"p\">.</span><span class=\"n\">scan</span><span class=\"p\">()</span>\n    <span class=\"n\">sites</span> <span class=\"o\">=</span> <span class=\"n\">response</span><span class=\"p\">[</span><span class=\"s\">\"Items\"</span><span class=\"p\">]</span>\n    <span class=\"k\">return</span> <span class=\"n\">sites</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">send_slack</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">):</span>\n    <span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"s\">\"https://hooks.slack.com/\"</span>\n    <span class=\"n\">payload_dic</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"text\"</span><span class=\"p\">:</span><span class=\"n\">text</span><span class=\"p\">,</span>\n        <span class=\"s\">\"icon_emoji\"</span><span class=\"p\">:</span><span class=\"s\">':grin:'</span><span class=\"p\">,</span>\n        <span class=\"s\">\"channel\"</span><span class=\"p\">:</span><span class=\"s\">'bot-test2'</span><span class=\"p\">,</span>\n    <span class=\"p\">}</span>\n    <span class=\"n\">r</span> <span class=\"o\">=</span> <span class=\"n\">requests</span><span class=\"p\">.</span><span class=\"n\">post</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">json</span><span class=\"p\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"n\">payload_dic</span><span class=\"p\">))</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">insert</span><span class=\"p\">(</span><span class=\"n\">results</span><span class=\"p\">):</span>\n    <span class=\"n\">table</span> <span class=\"o\">=</span> <span class=\"n\">dynamodb</span><span class=\"p\">.</span><span class=\"n\">Table</span><span class=\"p\">(</span><span class=\"s\">'sites_check'</span><span class=\"p\">)</span>\n    <span class=\"n\">date</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"p\">.</span><span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">hours</span><span class=\"o\">=</span><span class=\"mi\">9</span><span class=\"p\">)</span>\n    <span class=\"nb\">id</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n    <span class=\"n\">table</span><span class=\"p\">.</span><span class=\"n\">put_item</span><span class=\"p\">(</span>\n        <span class=\"n\">Item</span><span class=\"o\">=</span><span class=\"p\">{</span>\n            <span class=\"s\">\"id\"</span><span class=\"p\">:</span> <span class=\"nb\">id</span><span class=\"p\">,</span>\n            <span class=\"s\">\"date\"</span><span class=\"p\">:</span> <span class=\"n\">date</span><span class=\"p\">.</span><span class=\"n\">strftime</span><span class=\"p\">(</span><span class=\"s\">\"%Y/%m/%d %H:%M\"</span><span class=\"p\">),</span>\n            <span class=\"s\">\"result\"</span><span class=\"p\">:</span> <span class=\"n\">results</span>\n       <span class=\"p\">}</span>\n    <span class=\"p\">)</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">get_recent_codes</span><span class=\"p\">():</span>\n    <span class=\"n\">table</span> <span class=\"o\">=</span> <span class=\"n\">dynamodb</span><span class=\"p\">.</span><span class=\"n\">Table</span><span class=\"p\">(</span><span class=\"s\">'sites_check'</span><span class=\"p\">)</span>\n\n    <span class=\"n\">date</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"p\">.</span><span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">hours</span><span class=\"o\">=</span><span class=\"mi\">9</span><span class=\"p\">)</span>\n    <span class=\"n\">now</span> <span class=\"o\">=</span> <span class=\"n\">date</span><span class=\"p\">.</span><span class=\"n\">strftime</span><span class=\"p\">(</span><span class=\"s\">\"%Y/%m/%d %H:%M\"</span><span class=\"p\">)</span>\n    <span class=\"n\">last</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">date</span> <span class=\"o\">+</span> <span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">minutes</span><span class=\"o\">=-</span><span class=\"mi\">9</span><span class=\"p\">)).</span><span class=\"n\">strftime</span><span class=\"p\">(</span><span class=\"s\">\"%Y/%m/%d %H:%M\"</span><span class=\"p\">)</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">last</span> <span class=\"o\">+</span> <span class=\"s\">\" から \"</span> <span class=\"o\">+</span> <span class=\"n\">now</span> <span class=\"o\">+</span> <span class=\"s\">\" までのチェック\"</span><span class=\"p\">)</span>\n\n    <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">table</span><span class=\"p\">.</span><span class=\"n\">query</span><span class=\"p\">(</span>\n        <span class=\"n\">KeyConditionExpression</span><span class=\"o\">=</span><span class=\"n\">Key</span><span class=\"p\">(</span><span class=\"s\">'id'</span><span class=\"p\">).</span><span class=\"n\">eq</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"o\">&amp;</span> <span class=\"n\">Key</span><span class=\"p\">(</span><span class=\"s\">'date'</span><span class=\"p\">).</span><span class=\"n\">between</span><span class=\"p\">(</span><span class=\"n\">last</span><span class=\"p\">,</span> <span class=\"n\">now</span><span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">response</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">lambda_handler</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">'Check start'</span><span class=\"p\">)</span>\n\n    <span class=\"n\">results</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n    <span class=\"n\">sites</span> <span class=\"o\">=</span> <span class=\"n\">get_urls</span><span class=\"p\">()</span>\n    <span class=\"k\">for</span> <span class=\"n\">site</span> <span class=\"ow\">in</span> <span class=\"n\">sites</span><span class=\"p\">:</span>\n        <span class=\"n\">msg</span> <span class=\"o\">=</span> <span class=\"n\">web_check</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">site</span><span class=\"p\">[</span><span class=\"s\">\"url\"</span><span class=\"p\">]),</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">site</span><span class=\"p\">[</span><span class=\"s\">\"target\"</span><span class=\"p\">]))</span>\n        <span class=\"n\">results</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">site</span><span class=\"p\">[</span><span class=\"s\">\"title\"</span><span class=\"p\">])]</span> <span class=\"o\">=</span> <span class=\"n\">msg</span>\n\n    <span class=\"n\">insert</span><span class=\"p\">(</span><span class=\"n\">results</span><span class=\"p\">)</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">get_recent_codes</span><span class=\"p\">())</span>\n    <span class=\"k\">return</span> <span class=\"s\">\"success!\"</span>\n\n\n\n</code></pre></div></div>\n\n<p>定期実行させたりいろいろできると思われます。</p>\n\n<h1>\n<span id=\"さいごに\" class=\"fragment\"></span><a href=\"#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB\"><i class=\"fa fa-link\"></i></a>さいごに</h1>\n\n<p>PythonとLambdaの素人なのでかなりエラーだしました。が、PythonとLambdaによるアーキテクトはかなり便利になると思うのでこれからも使っていきたいと思っています。</p>\n","body":"# はじめに\n\n　最近サーバレスアーキテクチャに興味を持っています。以下2エントリーはGoogle Apps ScriptでJava Scriptを使った時の記事ですが、今回はAWS上のLambdaを使って、サーバーレスでPythonコードを実行させることをやっていきたいと思います。記事の内容は、Pythonほぼ初めまして&&AWSほぼ初めましての人が、LambdaとDynamoDBでいろいろできるようになるまでの記録を書いていきます。\n　また最初AWS分かんなさすぎて最初は絶望していたし、Lambdaはエラー出まくって初見殺しだし、Python興味はあるけど使ったこと少なめと、かなり初心者目線で記事を書いていきたいと思ってます。写真多め、初心者がわかる程度の内容を、ひとつずつ書いていく感じですので、PythonistとAWS上級者の方は新しいことはないかと思いますが、どうぞよろしくお願いします。\n\nこの前書いた記事\n- [月末営業日にタスクをリマインドする](http://qiita.com/ykhirao/items/782e20ab0465533c48f6)\n- [Googleカレンダー 自社版](http://qiita.com/ykhirao/items/09ebaedd0f6f0438f422)\n\n\n## 前提\nAWS初めまして\nPython歴2週間くらい\nAWSサービス登録済、無料枠中\n\n# AWS\n自分の場合は、AWSのサービスの多さに混乱したので、どのサービスがどのサービスとつながってるのか、まず概要を勉強しました。下記あたりが参考になるかと思います。またKindleで無料の書籍とか探しました。「ってますが、自分で使いながら、この記事を見直しながらいろいろやってみました。\n\n[「AWS is 何」を3行でまとめてみるよ](http://qiita.com/kohashi/items/1bb952313fb695f12577)\n[AWS1年目無料期間でやったこととハマったこと](http://qiita.com/chroju/items/c7ad918d79b0288bc490)\n\n## 登録\n登録済みと仮定しているのでAWS登録は別の記事を参照ください。\n\n## ロール作成\n\nAWSロールがないといろいろ面倒なので、\nS3,DynamoDB,Lambdaにフルアクセスできるロールを今回作ります。\n\n[AWSサービス一覧](https://us-west-2.console.aws.amazon.com/console/home)からIAM\n\n![スクリーンショット 2017-03-15 14.22.30.png](https://qiita-image-store.s3.amazonaws.com/0/112929/5b6a3f19-12f3-c469-91f6-39e0cdb1167f.png)\n\nロール >> 新しいロールの作成\n\n![スクリーンショット 2017-03-15 14.22.43.png](https://qiita-image-store.s3.amazonaws.com/0/112929/98094a3d-11f7-0ec9-4cbf-8719f256886d.png)\n\nロールの名前\n今回は[lambda_dynamo]\n\n![スクリーンショット 2017-03-15 14.22.48.png](https://qiita-image-store.s3.amazonaws.com/0/112929/99c1a7ba-3fc1-d2f4-4cb0-f20e265e09ed.png)\n\nAmazon Lambda >> 選択\n\n![スクリーンショット 2017-03-15 14.27.00.png](https://qiita-image-store.s3.amazonaws.com/0/112929/a0aec2ac-7ae1-8109-e09f-dc6cae6a1f19.png)\n\nとりあえず今回はFullAccessを3つ付けます。\nAWSLambdaFullAccess\nAmazonS3FullAccess\nAmazonDynamoDBFullAccess\n\n次のステップ\n\n![スクリーンショット 2017-03-15 14.27.27.png](https://qiita-image-store.s3.amazonaws.com/0/112929/c461abce-c9d8-42e0-60f4-0b96cb921052.png)\n\n\nロール >> lambda_dynamo\nといいう項目が追加されてたらOkay。\n\n![スクリーンショット 2017-03-15 14.33.21.png](https://qiita-image-store.s3.amazonaws.com/0/112929/1bf14b83-c4cb-4faa-4e18-58710dcfad6d.png)\n\n\n\n# Lambda\n\nサーバーレスでスクリプト実行できるサービスです。便利。\n\n## 料金体系\n基本的にいくらテストに使っても大丈夫！[公式](https://aws.amazon.com/jp/lambda/pricing/)\n\nラムダ無料枠\n\n|1ヶ月| リクエスト | コンピューティング時間 [GB*秒] |\n|:-:|:-:|:-:|\n|| 1,000,000  | 400,000  |\n\nリクエスト:関数全体に対する合計リクエスト数\nコンピューティング時間: メモリ数と時間をかけたもの\n\nLambdaの最小メモリが128MBなので1ヶ月3,200,000秒()使えば、400,000[GB*sec]に到達します。\n`(128.0[MB] / 1024[MB/GB]) * 3200000[sec] = 400,000[GB*sec]`\nなので、888時間くらいスクリプト動いても大丈夫。どんどん使おう。\n(時間の計算は一応自分でやってみてくださいね！)\n\n## テストコードを使ってみる(Pythonエラー)\n[AWSサービス一覧](https://us-west-2.console.aws.amazon.com/console/home)からLambda\n\n### 最初の関数作成\n\nLambda 関数の作成 >> lambda-canary\n\n![スクリーンショット 2017-03-15 14.52.52.png](https://qiita-image-store.s3.amazonaws.com/0/112929/c4e855f6-81a2-3ed8-e099-1c6e34cd43de.png)\n\n[ トリガーの設定 ] >> 削除 >> 次へ\nここで何分ごとに一度スクリプトを実行とかいじれます。\nが後でも設定できるので今回は削除します。\n\n[ 関数の設定 ]\n名前をとりあえず[ sample ]にしました。\n\n![スクリーンショット 2017-03-15 14.57.34.png](https://qiita-image-store.s3.amazonaws.com/0/112929/0a38cb4e-2e71-6bdb-6230-aebaadf0d369.png)\n\nロールを先程つくったロールにして関数作成します。\nlambda_dynamo\n\n### 最初のテスト\n\n```python\nfrom __future__ import print_function\n\nimport os\nfrom datetime import datetime\nfrom urllib2 import urlopen\n\nSITE = os.environ['site']  # URL of the site to check, stored in the site environment variable\nEXPECTED = os.environ['expected']  # String expected to be on the page, stored in the expected environment variable\n\n\ndef validate(res):\n    return EXPECTED in res\n\n\ndef lambda_handler(event, context):\n    print('Checking {} at {}...'.format(SITE, event['time']))\n    try:\n        if not validate(urlopen(SITE).read()):\n            raise Exception('Validation failed')\n    except:\n        print('Check failed!')\n        raise\n    else:\n        print('Check passed!')\n        return event['time']\n    finally:\n        print('Check complete at {}'.format(str(datetime.now())))\n\n```\n\n![スクリーンショット 2017-03-15 15.06.42.png](https://qiita-image-store.s3.amazonaws.com/0/112929/53c5c570-bd49-fb97-2888-ab34a6d74f22.png)\n\nはい出ましたエラー。\n\n```shell-session\n    print('Checking {} at {}...'.format(SITE, event['time']))\nKeyError: 'time'\n```\n\nこのエラーを解決する前にデフォルトで使用される変数を見ていきます。\n\n### デフォルトで使用される変数\n* event - testで設定したところとか、トリガー発生元のイベントデータ\n* Context - [Context オブジェクト (Python)](https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/python-context-object.html#python-context-object-methods)\n* os.environ - コード自体を変更せずに、AWS上で環境変数を設定できる\n\n>event >> AWS Lambda はこのパラメーターを使用してイベントデータをハンドラーに渡します。このパラメータは通常、Python の dict タイプです。また、list、str、int、float、または NoneType タイプを使用できます。\n\n>context >> AWS Lambda はこのパラメーターを使用してランタイム情報をハンドラーに提供します。このパラメータは LambdaContext タイプになります。\n\nとなってます。\n\n> os.environで取れるところはこの環境変数\n\n![スクリーンショット 2017-03-15 15.15.28.png](https://qiita-image-store.s3.amazonaws.com/0/112929/a30bd4d7-887b-a339-15e5-374f80dc8878.png)\n\n### time ?\n\nさて先程のエラーを処理していきます。\n\n![スクリーンショット 2017-03-15 15.11.53.png](https://qiita-image-store.s3.amazonaws.com/0/112929/df488706-d31a-3a21-082e-9f79479b10d3.png)\n\nテストイベントの設定のtimeを追加します。\n\n```json\n{\n  \"key3\": \"value3\",\n  \"key2\": \"value2\",\n  \"key1\": \"value1\",\n  \"time\": \"now...!\"\n}\n```\n\nこれでTimeの部分でエラーはでないと思います。\n\n```shell-session\nSTART RequestId: a8708105-0948-11e7-b83e-b71ae2e4dbbe Version: $LATEST\nChecking https://www.amazon.com/ at now...!...\nCheck failed!\nCheck complete at 2017-03-15 06:28:53.016209\nHTTP Error 503: Service Unavailable: HTTPError\nTraceback (most recent call last):\n  (省略)\n  File \"/usr/lib64/python2.7/urllib2.py\", line 556, in http_error_default\n    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)\nHTTPError: HTTP Error 503: Service Unavailable\n\nEND RequestId: a8708105-0948-11e7-b83e-b71ae2e4dbbe\nREPORT RequestId: a8708105-0948-11e7-b83e-b71ae2e4dbbe\tDuration: 348.59 ms\tBilled Duration: 400 ms \tMemory Size: 128 MB\tMax Memory Used: 17 MB\n```\n\nまだエラーでるのでいろいろやっていきます。\n\n### except例外処理してるのになんでエラーでるねん！\n\nまずは赤い画面でるの嫌なので、urlのリクエスト失敗してもエラーをでなくします。\n\n```py\n\n    try:\n        if not validate(urlopen(SITE).read()):\n            raise Exception('Validation failed')\n    except:\n        print('Check failed!')\n        raise\n```\n\nPythonの場合、最後にraiseをいれると、エラーをexceptでキャッチしたのをそのまま素のpython文にエラーを戻しちゃいます。これを書き換えます。\n\n```python\n\ndef lambda_handler(event, context):\n    print('Checking {} at {}...'.format(SITE, event['time']))\n    try:\n        if not validate(urlopen(SITE).read()):\n            raise Exception('Validation failed')\n    except Exception as e:\n        print('Check failed!')\n        print(e)\n    else:\n        print('Check passed!')\n        return event['time']\n    finally:\n        print('Check complete at {}'.format(str(datetime.now())))\n\n```\n\nやっと緑チェックの成功がでました…！！！！\n\n![スクリーンショット 2017-03-15 15.44.10.png](https://qiita-image-store.s3.amazonaws.com/0/112929/0fb9f030-af8a-32d9-e74f-260cda7afe4e.png)\n\n`except Exception as e:`でエラーをキャッチして\n`print(e)`でエラー出力して\n`raise`削除して、とりあえずはエラーでなくしました。\n\nこのあたりのpythonのエラーハンドリングかなり調べました。raise。。\n\n\n### HTTP Error 503\n\n\nエラーがまだ続いてるので`HTTP Error 503: Service Unavailable: HTTPError`の部分を見ていきます。\nまた、Validation failedという文字がないので`validate(urlopen(SITE).read())`この部分で返ってきたエラーが上記のエラーだと判断していきます。\n\n```python\ndef validate(res):\n    return EXPECTED in res\n```\n\nこちらは https://www.amazon.com/ にアクセスして、返ってきたｈｔｍｌファイルの中に「Online Shopping」という文字があるかどうかの診断になります。\n\nとりあえずAmazonからGoogleへのアクセスへ、環境変数の変更をする\n* https://www.google.co.jp/\n* Gmail\n\nそうすると\n\n```shell-session\n\nChecking https://www.google.co.jp/ at now...!...\nCheck passed!\nCheck complete at 2017-03-15 07:00:05.723916\n\n```\n\nやっとCheck passed!が出ました。\n\n> 503 Service Unavailable\nサービス利用不可。サービスが一時的に過負荷やメンテナンスで使用不可能である。\n例として、アクセスが殺到して処理不能に陥った場合に返される。\n\n\nhttps://www.amazon.com/ \nが落ちるわけないじゃーん。って心のそこから思って環境変数を返してチェックしてみることを失念してました。ただのGoogleサービスに変えたらうまくいきました。\nLambdaからのアクセス拒否してるの？\n\nハマったところです。\n\n### indent\n\nPythonのエラーですがインデックスの数とかでも何回かエラー出しました。\n\n```shell-session\nSyntax error in module 'lambda_function': \nunexpected indent (lambda_function.py, line 30)\n```\n\nこのあたり勉強したのですが、タブとスペース(4つ)の戦争ですね。\n[プログラミングのコードを書く時のタブvsスペース戦争がついに決着](http://www.gizmodo.jp/2016/09/tab-vs-space.html)\npythonはスペースで書くのが一般的だということが書かれてます。\n\n自分がローカルで編集してたファイルがtabで入っていて\nAWS上で編集したコードはスペース4つで入ります。\nこのindentエラーを見たくないのでスペース派に乗り換えました。\n\n### Requests\n\nurlopenをそのまま使ってもいいのですがrequestsを導入したいと思います。\n\n[python urllib2モジュール](http://d.hatena.ne.jp/yumimue/20071231/1199129495)\n[Requests: 人間のためのHTTP](http://requests-docs-ja.readthedocs.io/en/latest/)\n[Requestsを使わずに同じ事をするためのコード](https://gist.github.com/kennethreitz/973705)\n\nslackとかにメッセージ送るのが簡単になります。\n\n```今のコード.py\n# coding: utf-8\nfrom __future__ import print_function\n\nimport os\nimport json\nimport requests\nfrom datetime import datetime\nfrom urllib2 import urlopen\n\nSITE = os.environ['site']\nEXPECTED = os.environ['expected']\n\ndef validate(res):\n    return EXPECTED in res\n\ndef lambda_handler(event, context):\n    print('Checking {} at {}...'.format(SITE, event['time']))\n    try:\n        if not validate(urlopen(SITE).read()):\n            raise Exception('Validation failed')\n    except Exception as e:\n        print('Check failed!')\n        print(e)\n    else:\n        print('Check passed!')\n    finally:\n        print('Check complete at {}'.format(str(datetime.now())))\n        return \"Finish\"\n\n```\n\n\n```shell-session\nUnable to import module 'lambda_function': No module named requests\n```\n\nrequestsは外部モジュールなのでこんなエラーおきます。\n\n\n## 外部モジュールの使用\nrequestsみたいなPython標準外のモジュールを入れるのにも一癖あったので書いていきます。\n\n* lambda-uploaderを使ってリモート\n* ローカルで自分でzipにかためてUP\n\n### lambda-uploader\nこのあたりが参考になります。\n\n[lambda-uploaderを使ってAWS Lambdaをリモートで開発、実行、デプロイする](http://qiita.com/Esfahan/items/08fa6af8811dada4cb2a)\n[AWS Lambda Pythonをlambda-uploaderでデプロイ](http://dev.classmethod.jp/cloud/deploy-aws-lambda-python-with-lambda-uploader/)\n\n### 自分のコードをZIPアップロード\n自分はこれで行いました。単発だとすぐできる。\n[【AWS】Lambdaでpipしたいと思ったときにすべきこと](http://qiita.com/Hironsan/items/0eb5578f3321c72637b4)\n\n作業フォルダに`pip install requests -t .`して、それをzipで固めてアップする感じです。\n\n無事アップロードできたら、先程の`今のコード.py`からスタートします。\n\n## Slack\n\nimport \n* urllib2\n* requests\n* どっちでも可\n\napi\n* Slack api(token取得してごにょごにょ xoxp-12131212こんなやつ)\n* Webhook(urlだけ取ってくる)\n* どっちでも可\n\nどの組み合わせを使っても良いのですが、今回は簡単なrequests * Webhookを使います。\n\nこちらWebhookのURL取得はこちらを参考に！\n[SlackのWebhook URL取得手順](http://qiita.com/vmmhypervisor/items/18c99624a84df8b31008)\n\n\n```python\ndef send_slack(text):\n    url = \"先程げっとしたURL\"\n    payload_dic = {\n        \"text\":text,\n        \"icon_emoji\":':grin:',\n        \"channel\":'bot-test2',\n    }\n\n    r = requests.post(url, data=json.dumps(payload_dic))\n```\n\nたったこれだけでSlack送れます！\n\n```python\n# coding: utf-8\nfrom __future__ import print_function\n\nimport os\nimport json\nimport requests\nfrom datetime import datetime\nfrom urllib2 import urlopen\n\nSITE = os.environ['site']\nEXPECTED = os.environ['expected']\n\ndef validate(res):\n    return EXPECTED in res\n\ndef web_check():\n    try:\n        if not validate(urlopen(SITE).read()):\n            raise Exception('Validation failed')\n    except Exception as e:\n        print('Check failed!')\n        print(e)\n    else:\n        print('Check passed!')\n    finally:\n        print('Check complete at {}'.format(str(datetime.now())))\n\ndef lambda_handler(event, context):\n    print('Checking {} at {}...'.format(SITE, event['time']))\n    # web_check()\n    send_slack(\"test\")\n    return \"success!\"\n\ndef send_slack(text):\n    url = \"こちら自分のURL\"\n    payload_dic = {\n        \"text\":text,\n        \"icon_emoji\":':grin:',\n        \"channel\":'bot-test2',\n    }\n\n    r = requests.post(url, data=json.dumps(payload_dic))\n\n\n```\n\n`def web_check():`に処理を移して置きました。\n\n\n```\ndef lambda_handler(event, context):\n    print('Checking {} at {}...'.format(SITE, event['time']))\n    # web_check()\n    send_slack(\"test\")\n    return \"success!\"\n```\n\nこれで\n\n<img width=\"760\" alt=\"スクリーンショット 2017-03-15 16.55.31.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/b3cd2890-00f3-5c7d-0ff2-4016d94aa417.png\">\nSlack到着しました。\n\nOkay。\n次はDynamoDBからデータを取ってきます。\n\n\n# DynamoDB\n\n## 料金体系\n\nAWS の無料利用枠の一部としてのDynamoDB無料枠\n\n|ストレージ| 書き込み容量 | 書き込み容量 |\n|:-:|:-:|:-:|\n|25GB| 25  | 25  |\n\n> 1 つの容量のユニットで 1 秒あたりに 1 つのリクエストを処理します\n1ユニットの書き込み容量: 最大1KBデータを1秒に1書き込み\n1ユニットの読み込み容量: 最大4KBデータを1秒に1読み込み\nDynamoDB ストリームからの 250 万回の読み込みリクエストを無料で利用できます。\n\nとりあえずデータベースを作る時に書き込み容量と読み込み容量を1にセットして使えば、無料枠だとお金かからないと思います。\n今回は1分に1度くらいでもいいので、最小単位の1(1秒に1度アクセスできるレベル)を選びます。\n\n## 作ってみる\n\nとりあえず設定はこんな感じ。\n\n![スクリーンショット 2017-03-15 17.10.25.png](https://qiita-image-store.s3.amazonaws.com/0/112929/984460b7-8dc5-c2d5-31f4-ab5b807679c0.png)\n\nDynamoDBはハッシュ(言語によっては辞書型、連想配列など)のKeyでしかアクセスできません。今回はidをkeyとしてアクセスします。\n\n![スクリーンショット 2017-03-15 17.15.28.png](https://qiita-image-store.s3.amazonaws.com/0/112929/0a861237-db0f-371e-4596-4ad6bc488e94.png)\n\n```json\n\n{\n  \"id\": 1,\n  \"target\": \"Online Shopping\",\n  \"url\": \"https://www.amazon.com/\"\n}\n\n{\n  \"id\": 2,\n  \"target\": \"Gmail\",\n  \"url\": \"https://www.google.co.jp/\"\n}\n```\n\nurlからtargetを探すためのTableとして使います。\n\n\n## pythonコードから先程のデータを取ってみる\n\n```python\n# ２つ追加\nimport boto3\nfrom boto3.dynamodb.conditions import Key, Attr\n\ndef get_urls():\n    table    = dynamodb.Table('sites')\n    response = table.scan()\n    sites = response[\"Items\"]\n    return sites\n```\n\n機能を追加して、get_urls()でDynamoDBから取ってきたurlからtargetの文章があるかサーチしています。\n\n```現在の.py\n# coding: utf-8\nfrom __future__ import print_function\n\nimport os\nimport json\nimport requests\nfrom datetime import datetime\nfrom urllib2 import urlopen\nimport boto3\nfrom boto3.dynamodb.conditions import Key, Attr\n\ndynamodb = boto3.resource('dynamodb')\n\ndef validate(res, target):\n    return target in res\n\ndef web_check(url, target):\n    print(\"Serching ... \" + target)\n    try:\n        if validate(urlopen(url).read(), target):\n            print(\"Find!\")\n        else:\n            print(\"Not Find!\")\n    except Exception as e:\n        print('Error')\n        print(e)\n\ndef get_urls():\n    table    = dynamodb.Table('sites')\n    response = table.scan()\n    sites = response[\"Items\"]\n    return sites\n\ndef send_slack(text):\n    url = \"https://hooks.slack.com/services/\"\n    payload_dic = {\n        \"text\":text,\n        \"icon_emoji\":':grin:',\n        \"channel\":'bot-test2',\n    }\n    r = requests.post(url, data=json.dumps(payload_dic))\n\ndef lambda_handler(event, context):\n    print('Check start')\n\n    sites = get_urls()\n    for site in sites:\n        web_check(str(site[\"url\"]), str(site[\"target\"]))\n    \n    return \"success!\"\n\n\n```\n\n出力結果\n\n```shell-session\n\nCheck start\nSerching ... 技術情報共有サービスです at https://qiita.com/\nFind!\nSerching ... Gmail at https://www.google.co.jp/\nFind!\nSerching ... Gmailですか？ at https://www.google.co.jp/\nNot Find!\nSerching ... Online Shopping at https://www.amazon.com/\nError\nHTTP Error 503: Service Unavailable\nEND RequestId: 3992d81e-095e-11e7-b30a-1ddc7da9e992\n```\n\nここでもエラーおきました。Pythonつまづく！\n\n```shell-session\n\n'utf8' codec can't decode byte 0x90 in position 102: invalid start byte\n```\n\n[PythonのUnicodeEncodeErrorを知る](http://lab.hde.co.jp/2008/08/pythonunicodeencodeerror.html)\nここを参考にエラー解決しました。\n`type(site[\"url\"])`したら`<type 'unicode'>`だったので、\n`str(site[\"url\"])`をして`<type 'str'>`に変えました。\n\n\n## LambdaからDynamoDB書き込み\n\nsites_check1テーブルの追加\n\n![スクリーンショット 2017-03-15 18.19.12.png](https://qiita-image-store.s3.amazonaws.com/0/112929/e809a5ad-65ec-4f94-d2b9-a699380e0497.png)\n\n\n追加\n\n```python\nfrom datetime import datetime, timedelta\n\ndef insert(results):\n    date = datetime.now() + timedelta(hours=9)\n\n    id = 0\n    table = dynamodb.Table('sites_check')\n    table.put_item(\n        Item={\n            \"id\": id,\n            \"date\": date.strftime(\"%Y/%m/%d %H:%M\"),\n            \"result\": results\n       }\n    )\n```\n\n時間の増減を行うtimedeltaとかを追加しました。\nDynamoDBのsitesテーブルにタイトル追加しました。\n現在のコード\n\n```python\n\n# coding: utf-8\nfrom __future__ import print_function\n\nimport os\nimport json\nimport requests\nfrom datetime import datetime, timedelta\nfrom urllib2 import urlopen\nimport boto3\nfrom boto3.dynamodb.conditions import Key, Attr\n\ndynamodb = boto3.resource('dynamodb')\n\ndef validate(res, target):\n    return target in res\n\ndef web_check(url, target):\n    print(\"Serching ... \" + target + \" at \" + url)\n    try:\n        if validate(urlopen(url).read(), target):\n            return \"Find!\"\n        else:\n            return \"Not Find!\"\n    except Exception as e:\n        return str(e)\n\ndef get_urls():\n    table    = dynamodb.Table('sites')\n    response = table.scan()\n    sites = response[\"Items\"]\n    return sites\n\ndef send_slack(text):\n    url = \"https://hooks.slack.com/\"\n    payload_dic = {\n        \"text\":text,\n        \"icon_emoji\":':grin:',\n        \"channel\":'bot-test2',\n    }\n    r = requests.post(url, data=json.dumps(payload_dic))\n\ndef insert(results):\n    date = datetime.now() + timedelta(hours=9)\n\n    id = 0\n    table = dynamodb.Table('sites_check')\n    table.put_item(\n        Item={\n            \"id\": id,\n            \"date\": date.strftime(\"%Y/%m/%d %H:%M\"),\n            \"result\": results\n       }\n    )\n\ndef lambda_handler(event, context):\n    print('Check start')\n\n    results = {}\n    sites = get_urls()\n    for site in sites:\n        msg = web_check(str(site[\"url\"]), str(site[\"target\"]))\n        results[str(site[\"title\"])] = msg\n    \n    insert(results)\n    return \"success!\"\n\n\n\n```\n\nデータを挿入した結果がこちら。\n\n```json\n\n{\n  \"date\": \"2017/03/15 18:37\",\n  \"id\": 0,\n  \"result\": {\n    \"Amazon\": \"Find!\", # なぜかFindとなってエラー起きず \n    \"Google\": \"Find!\",\n    \"Google-2\": \"Not Find!\",\n    \"Qiita\": \"Find!\"\n  }\n}\n\n{\n  \"date\": \"2017/03/15 18:48\",\n  \"id\": 0,\n  \"result\": {\n    \"Amazon\": \"HTTP Error 503: Service Unavailable\", # こちらでエラー起きたときにstr(e)にしました\n    \"Google\": \"Find!\",\n    \"Google-2\": \"Not Find!\",\n    \"Qiita\": \"Find!\"\n  }\n}\n```\n\n\n`str(e)`ってしないとeがstr型じゃないのでエラーが起きました。\nPythonに慣れてきたので10分くらいで解決。\njsonってコメントつけられないんですね。\n\n\n## \n\n```python\ndef get_recent_codes():\n    date = datetime.now() + timedelta(hours=9)\n    now = date.strftime(\"%Y/%m/%d %H:%M\")\n    last = (date + timedelta(minutes=-9)).strftime(\"%Y/%m/%d %H:%M\")\n\n    # idが0かつ、１０分以内のデータを取ってくる感じのクエリ\n    response = table.query(\n        KeyConditionExpression=Key('id').eq(0) & Key('date').between(last, now)\n    )\n\n    return response\n```\n\n`response['Count']`に取ってこれたクエリの数が入ります。\n`response['Items']`に取ってこれたTableのデータがはいってます。\nそれ以外のデータ必要な場合は適宜、Printしつつデータの取り出しをしてください。\n\n\n\n結果こんな感じ\n\n```python\n# coding: utf-8\nfrom __future__ import print_function\n\nimport os\nimport json\nimport requests\nfrom datetime import datetime, timedelta\nfrom urllib2 import urlopen\nimport boto3\nfrom boto3.dynamodb.conditions import Key, Attr\n\ndynamodb = boto3.resource('dynamodb')\n\ndef validate(res, target):\n    return target in res\n\ndef web_check(url, target):\n    print(\"Serching ... \" + target + \" at \" + url)\n    try:\n        if validate(urlopen(url).read(), target):\n            return \"Find!\"\n        else:\n            return \"Not Find!\"\n    except Exception as e:\n        return str(e)\n\ndef get_urls():\n    table    = dynamodb.Table('sites')\n    response = table.scan()\n    sites = response[\"Items\"]\n    return sites\n\ndef send_slack(text):\n    url = \"https://hooks.slack.com/\"\n    payload_dic = {\n        \"text\":text,\n        \"icon_emoji\":':grin:',\n        \"channel\":'bot-test2',\n    }\n    r = requests.post(url, data=json.dumps(payload_dic))\n\ndef insert(results):\n    table = dynamodb.Table('sites_check')\n    date = datetime.now() + timedelta(hours=9)\n    id = 0\n    table.put_item(\n        Item={\n            \"id\": id,\n            \"date\": date.strftime(\"%Y/%m/%d %H:%M\"),\n            \"result\": results\n       }\n    )\n\ndef get_recent_codes():\n    table = dynamodb.Table('sites_check')\n\n    date = datetime.now() + timedelta(hours=9)\n    now = date.strftime(\"%Y/%m/%d %H:%M\")\n    last = (date + timedelta(minutes=-9)).strftime(\"%Y/%m/%d %H:%M\")\n    print(last + \" から \" + now + \" までのチェック\")\n\n    response = table.query(\n        KeyConditionExpression=Key('id').eq(0) & Key('date').between(last, now)\n    )\n    \n    return response\n\ndef lambda_handler(event, context):\n    print('Check start')\n\n    results = {}\n    sites = get_urls()\n    for site in sites:\n        msg = web_check(str(site[\"url\"]), str(site[\"target\"]))\n        results[str(site[\"title\"])] = msg\n    \n    insert(results)\n    print(get_recent_codes())\n    return \"success!\"\n\n\n\n```\n\n定期実行させたりいろいろできると思われます。\n\n\n# さいごに\n\nPythonとLambdaの素人なのでかなりエラーだしました。が、PythonとLambdaによるアーキテクトはかなり便利になると思うのでこれからも使っていきたいと思っています。\n\n","coediting":false,"comments_count":0,"created_at":"2017-03-15T19:30:51+09:00","group":null,"id":"04a921f79574c46f61c0","likes_count":82,"private":false,"reactions_count":0,"stocks_count":66,"tags":[{"name":"Python","versions":[]},{"name":"AWS","versions":[]},{"name":"lambda","versions":[]}],"title":"[ AWS ] 初めてLambda-PythonとDynamoDBに触る人に参考になるかもな話","updated_at":"2019-09-12T14:23:37+09:00","url":"https://qiita.com/ykhirao/items/04a921f79574c46f61c0","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"python-ヒアドキュメント\" class=\"fragment\"></span><a href=\"#python-%E3%83%92%E3%82%A2%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88\"><i class=\"fa fa-link\"></i></a>Python ヒアドキュメント</h1>\n\n<p>Qiitaで<code>title:python title:ヒアドキュメント</code>で調べると1件だけで、あまりまとめられてなかったので記事書きます！<br>\n初めてPython使う人と、たまにPython使うひとがあれ書き方忘れたなって時みるようなレベル感で、つらつらとまとめられたらと思います。ツッコミとかあればコメント欄でお願いします。</p>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">version.py</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">python</span> <span class=\"o\">-</span><span class=\"n\">V</span>\n<span class=\"n\">Python</span> <span class=\"mf\">2.7</span><span class=\"p\">.</span><span class=\"mi\">13</span>\n</code></pre></div>\n</div>\n\n<p>最終目標物</p>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">matome.py</span></div>\n<div class=\"highlight\"><pre><code><span class=\"kn\">import</span> <span class=\"nn\">textwrap</span>\n<span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"n\">textwrap</span><span class=\"p\">.</span><span class=\"n\">dedent</span><span class=\"p\">(</span><span class=\"s\">'''\n  This is a {what}.\n  I'm from {where}.\n'''</span><span class=\"p\">).</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"n\">what</span><span class=\"o\">=</span><span class=\"s\">\"apple\"</span><span class=\"p\">,</span> <span class=\"n\">where</span><span class=\"o\">=</span><span class=\"s\">\"Chiba\"</span><span class=\"p\">).</span><span class=\"n\">strip</span><span class=\"p\">()</span>\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"p\">)</span>\n\n<span class=\"s\">\"\"\"\nThis is a apple.\nI'm from Chiba.\n\"\"\"</span>\n</code></pre></div>\n</div>\n\n<h2>\n<span id=\"内容\" class=\"fragment\"></span><a href=\"#%E5%86%85%E5%AE%B9\"><i class=\"fa fa-link\"></i></a>内容</h2>\n\n<ul>\n<li>ヒアドキュメントの使い方</li>\n<li>インデックス削除</li>\n<li>変数展開</li>\n</ul>\n\n<h2>\n<span id=\"ヒアドキュメントとは\" class=\"fragment\"></span><a href=\"#%E3%83%92%E3%82%A2%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%A8%E3%81%AF\"><i class=\"fa fa-link\"></i></a>ヒアドキュメントとは</h2>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>こういう\n改行\nが入った文章を扱いやすくするもの。\n</code></pre></div></div>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code><span class=\"c1\"># \\nが改行の意味\n</span>\n<span class=\"c1\"># こうやって\\nを大量に書かなくても\"×3で囲むと扱いやすくなる。\n</span><span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"s\">\"こういう</span><span class=\"se\">\\n</span><span class=\"s\">改行</span><span class=\"se\">\\n</span><span class=\"s\">が入った文章を扱いやすくするもの。\"</span>\n\n<span class=\"c1\"># こう書くのがヒアドキュメント(風)\n</span><span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"s\">\"\"\"\nこういう\n改行\nが入った文章を扱いやすくするもの。\n\"\"\"</span>\n</code></pre></div>\n</div>\n\n<p><a href=\"-----------------------------------------------------------------------\"></a></p>\n\n<h2>\n<span id=\"ヒアドキュメントと複数行コメント\" class=\"fragment\"></span><a href=\"#%E3%83%92%E3%82%A2%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%A8%E8%A4%87%E6%95%B0%E8%A1%8C%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88\"><i class=\"fa fa-link\"></i></a>ヒアドキュメントと複数行コメント</h2>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code><span class=\"c1\"># coding: utf-8\n</span>\n<span class=\"c1\"># 一行コメントは#を使って\n</span>\n<span class=\"s\">\"\"\"\n複数行コメントは\"×3です。\n\"\"\"</span>\n\n<span class=\"s\">'''\nこちらも複数行コメント\nです！！\n'''</span>\n\n<span class=\"n\">こんな感じでコメントアウトされてない部分は変な色になるので見分けてください</span><span class=\"err\">。</span>\n<span class=\"n\">ここエラー起こします</span><span class=\"err\">。</span>\n\n</code></pre></div>\n</div>\n\n<p>日本語扱うときは最初に<code># coding: utf-8</code>。</p>\n\n<p><a href=\"-----------------------------------------------------------------------\"></a></p>\n\n<h2>\n<span id=\"普通のヒアドキュメント\" class=\"fragment\"></span><a href=\"#%E6%99%AE%E9%80%9A%E3%81%AE%E3%83%92%E3%82%A2%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88\"><i class=\"fa fa-link\"></i></a>普通のヒアドキュメント</h2>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"c1\"># これが普通のヒアドキュメント\n</span>\n<span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"s\">'''This is a pen.\nI'm from Tokyo.'''</span>\n\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># 出力結果\n</span><span class=\"s\">\"\"\"\nThis is a pen.\nI'm from Tokyo.\n\"\"\"</span>\n\n</code></pre></div>\n</div>\n\n<p>上下比べてください。<br>\n次のように書く方が見通しがいいのですが前後に改行が足されるので、その修正をしていきます。</p>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"s\">'''\nThis is a pen.\nI'm from Tokyo.\n'''</span>\n\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># 出力結果\n</span>\n<span class=\"s\">\"\"\"\n\nThis is a pen.\nI'm from Tokyo.\n\n\"\"\"</span>\n\n<span class=\"c1\"># 上下に余白あいちゃった。\n</span>\n</code></pre></div>\n</div>\n\n<p><a href=\"-----------------------------------------------------------------------\"></a></p>\n\n<h1>\n<span id=\"上下の余白の消し方\" class=\"fragment\"></span><a href=\"#%E4%B8%8A%E4%B8%8B%E3%81%AE%E4%BD%99%E7%99%BD%E3%81%AE%E6%B6%88%E3%81%97%E6%96%B9\"><i class=\"fa fa-link\"></i></a>上下の余白の消し方</h1>\n\n<ul>\n<li>[1:-1]</li>\n<li>strip()</li>\n<li>バックスラッシュ\\</li>\n</ul>\n\n<p><a href=\"http://qiita.com/hoxo_m/items/23e45f5fe480bcb9a29c\" id=\"reference-4dd16a28931279d9eda7\">Python のヒアドキュメントを見やすくする小技</a><br>\nこちらの記事とコメント欄を参考にさせていただきました。</p>\n\n<h2>\n<span id=\"上下の余白の消し方-1-1\" class=\"fragment\"></span><a href=\"#%E4%B8%8A%E4%B8%8B%E3%81%AE%E4%BD%99%E7%99%BD%E3%81%AE%E6%B6%88%E3%81%97%E6%96%B9-1-1\"><i class=\"fa fa-link\"></i></a>上下の余白の消し方 [1:-1]</h2>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"s\">'''\nThis is a pen.\nI'm from Tokyo.\n'''</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># 出力結果\n</span><span class=\"s\">\"\"\"\nThis is a pen.\nI'm from Tokyo.\n\"\"\"</span>\n\n</code></pre></div>\n</div>\n\n<p>[1:-1]の使い方をみてみる。</p>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">\"test123456789\"</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">])</span>\n\n<span class=\"c1\"># 出力結果\n</span><span class=\"s\">\"\"\"\nest12345678\n\"\"\"</span>\n</code></pre></div>\n</div>\n\n<p><a href=\"-----------------------------------------------------------------------\"></a></p>\n\n<h2>\n<span id=\"上下の余白の消し方-strip\" class=\"fragment\"></span><a href=\"#%E4%B8%8A%E4%B8%8B%E3%81%AE%E4%BD%99%E7%99%BD%E3%81%AE%E6%B6%88%E3%81%97%E6%96%B9-strip\"><i class=\"fa fa-link\"></i></a>上下の余白の消し方 strip()</h2>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"s\">'''\nThis is a pen.\nI'm from Tokyo.\n'''</span><span class=\"p\">.</span><span class=\"n\">strip</span><span class=\"p\">()</span>\n\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># 出力\n</span><span class=\"n\">This</span> <span class=\"ow\">is</span> <span class=\"n\">a</span> <span class=\"n\">pen</span><span class=\"p\">.</span>\n<span class=\"n\">I</span><span class=\"s\">'m from Tokyo.\n</span></code></pre></div>\n</div>\n\n<p><code>strip()</code>は前後の空白文字を削除してくれます。<br>\n参考記事<a href=\"http://dackdive.hateblo.jp/entry/2015/02/13/174206\" rel=\"nofollow noopener\" target=\"_blank\">[python]strip()の引数を省略すると空白だけでなく改行も除去される</a></p>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">\"     space5     \"</span><span class=\"p\">.</span><span class=\"n\">strip</span><span class=\"p\">())</span>\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s\">\"     </span><span class=\"se\">\\n</span><span class=\"s\">space5</span><span class=\"se\">\\n</span><span class=\"s\">     \"</span><span class=\"p\">.</span><span class=\"n\">strip</span><span class=\"p\">())</span>\n\n<span class=\"c1\"># どちらも改行記号とスペースが削除されます。\n</span><span class=\"s\">\"\"\"\nspace5\n\"\"\"</span>\n\n</code></pre></div>\n</div>\n\n<p><a href=\"-----------------------------------------------------------------------\"></a></p>\n\n<h2>\n<span id=\"上下の余白の消し方-バックスラッシュ\" class=\"fragment\"></span><a href=\"#%E4%B8%8A%E4%B8%8B%E3%81%AE%E4%BD%99%E7%99%BD%E3%81%AE%E6%B6%88%E3%81%97%E6%96%B9-%E3%83%90%E3%83%83%E3%82%AF%E3%82%B9%E3%83%A9%E3%83%83%E3%82%B7%E3%83%A5\"><i class=\"fa fa-link\"></i></a>上下の余白の消し方 バックスラッシュ\\</h2>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"s\">'''</span><span class=\"se\">\\\n</span><span class=\"s\">This is a pen.\nI'm from Tokyo.</span><span class=\"se\">\\\n</span><span class=\"s\">'''</span>\n\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># 出力\n</span>\n<span class=\"s\">\"\"\"\nThis is a pen.\nI'm from Tokyo.\n\"\"\"</span>\n</code></pre></div>\n</div>\n\n<p>バックスラッシュ\\は、Pythonのコードの途中で改行したいときとか、長くなって読みやすさを重視したいときとかに使います。見た目は改行してるけど、pythonとしては改行を無視して読み込みをするやつです。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>print (\"te\\\nst\")\nprint \\\n  (\"test\")\n\n\"\"\"\ntest\ntest\n\"\"\"\n\n</code></pre></div></div>\n\n<h1>\n<span id=\"インデント削除\" class=\"fragment\"></span><a href=\"#%E3%82%A4%E3%83%B3%E3%83%87%E3%83%B3%E3%83%88%E5%89%8A%E9%99%A4\"><i class=\"fa fa-link\"></i></a>インデント削除</h1>\n\n<p>インデントがさがってるときのヒアドキュメントのインデント削除をみていきます。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>if True:\n    string = '''\n        This is a pen.\n        I'm from Tokyo.\n        '''.strip()\n    print(string)\n\n\"\"\"\n        This is a pen.\n        I'm from Tokyo.     \n\"\"\"\n\n</code></pre></div></div>\n\n<p><code>import textwrap</code><br>\nこのtextwrapというものをimportする。これが一番ラクです。</p>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"kn\">import</span> <span class=\"nn\">textwrap</span>\n\n<span class=\"k\">if</span> <span class=\"bp\">True</span><span class=\"p\">:</span>\n    <span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"s\">'''\n        This is a pen.\n        I'm from Tokyo.\n        '''</span>\n    <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"p\">)</span>\n\n<span class=\"k\">print</span> <span class=\"p\">(</span><span class=\"n\">textwrap</span><span class=\"p\">.</span><span class=\"n\">dedent</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"p\">).</span><span class=\"n\">strip</span><span class=\"p\">())</span>\n\n<span class=\"s\">\"\"\"\n--------\nThis is a pen.\nI'm from Tokyo.\n--------\n\"\"\"</span>\n\n</code></pre></div>\n</div>\n\n<p><code>textwrap.dedent(string)</code>が各行のインデントを削除してくれます。</p>\n\n<p><a href=\"-----------------------------------------------------------------------\"></a></p>\n\n<h1>\n<span id=\"変数展開\" class=\"fragment\"></span><a href=\"#%E5%A4%89%E6%95%B0%E5%B1%95%E9%96%8B\"><i class=\"fa fa-link\"></i></a>変数展開</h1>\n\n<p>すごく参考になるリンクはこちら。<br>\n<a href=\"http://sucrose.hatenablog.com/entry/2014/07/26/235459\" rel=\"nofollow noopener\" target=\"_blank\">Pythonで文字列中の変数展開をするときの書式について調べたのでメモ</a></p>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">sample.py</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"s\">'''\nThis is a {what}.\nI'm from {where}.\n'''</span><span class=\"p\">.</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"n\">what</span><span class=\"o\">=</span><span class=\"s\">\"apple\"</span><span class=\"p\">,</span> <span class=\"n\">where</span><span class=\"o\">=</span><span class=\"s\">\"Chiba\"</span><span class=\"p\">).</span><span class=\"n\">strip</span><span class=\"p\">()</span>\n\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"p\">)</span>\n\n<span class=\"s\">\"\"\"\n--------\nThis is a apple.\nI'm from Chiba.\n--------\n\"\"\"</span>\n</code></pre></div>\n</div>\n\n<p>{what}<br>\nwhat=\"apple\"<br>\n{}つけたり、whatと\"\"で囲まなかったりと、使うたびに調べそうな気がしてます。</p>\n\n<h1>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h1>\n\n<div class=\"code-frame\" data-lang=\"python\">\n<div class=\"code-lang\"><span class=\"bold\">matome.py</span></div>\n<div class=\"highlight\"><pre><code><span class=\"kn\">import</span> <span class=\"nn\">textwrap</span>\n<span class=\"n\">string</span> <span class=\"o\">=</span> <span class=\"n\">textwrap</span><span class=\"p\">.</span><span class=\"n\">dedent</span><span class=\"p\">(</span><span class=\"s\">'''\n  This is a {what}.\n  I'm from {where}.\n'''</span><span class=\"p\">).</span><span class=\"nb\">format</span><span class=\"p\">(</span><span class=\"n\">what</span><span class=\"o\">=</span><span class=\"s\">\"apple\"</span><span class=\"p\">,</span> <span class=\"n\">where</span><span class=\"o\">=</span><span class=\"s\">\"Chiba\"</span><span class=\"p\">).</span><span class=\"n\">strip</span><span class=\"p\">()</span>\n<span class=\"k\">print</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"p\">)</span>\n\n<span class=\"s\">\"\"\"\nThis is a apple.\nI'm from Chiba.\n\"\"\"</span>\n</code></pre></div>\n</div>\n\n<p>なんとなくヒアドキュメントで使いそうなものをつらつらと書いてきましたが、足りない部分とかもたくさんあると思いますが、参考になれば！</p>\n","body":"# Python ヒアドキュメント\n\nQiitaで`title:python title:ヒアドキュメント`で調べると1件だけで、あまりまとめられてなかったので記事書きます！\n初めてPython使う人と、たまにPython使うひとがあれ書き方忘れたなって時みるようなレベル感で、つらつらとまとめられたらと思います。ツッコミとかあればコメント欄でお願いします。\n\n```version.py\npython -V\nPython 2.7.13\n```\n\n最終目標物\n\n```matome.py\nimport textwrap\nstring = textwrap.dedent('''\n  This is a {what}.\n  I'm from {where}.\n''').format(what=\"apple\", where=\"Chiba\").strip()\nprint(string)\n\n\"\"\"\nThis is a apple.\nI'm from Chiba.\n\"\"\"\n```\n\n## 内容\n* ヒアドキュメントの使い方\n* インデックス削除\n* 変数展開\n\n## ヒアドキュメントとは\n\n```\nこういう\n改行\nが入った文章を扱いやすくするもの。\n```\n\n```sample.py\n# \\nが改行の意味\n\n# こうやって\\nを大量に書かなくても\"×3で囲むと扱いやすくなる。\nstring = \"こういう\\n改行\\nが入った文章を扱いやすくするもの。\"\n\n# こう書くのがヒアドキュメント(風)\nstring = \"\"\"\nこういう\n改行\nが入った文章を扱いやすくするもの。\n\"\"\"\n```\n\n[](-----------------------------------------------------------------------)\n\n## ヒアドキュメントと複数行コメント\n\n\n```sample.py\n# coding: utf-8\n\n# 一行コメントは#を使って\n\n\"\"\"\n複数行コメントは\"×3です。\n\"\"\"\n\n'''\nこちらも複数行コメント\nです！！\n'''\n\nこんな感じでコメントアウトされてない部分は変な色になるので見分けてください。\nここエラー起こします。\n\n```\n\n日本語扱うときは最初に`# coding: utf-8`。\n\n[](-----------------------------------------------------------------------)\n\n## 普通のヒアドキュメント\n\n```sample.py\n\n# これが普通のヒアドキュメント\n\nstring = '''This is a pen.\nI'm from Tokyo.'''\n\nprint(string)\n\n# 出力結果\n\"\"\"\nThis is a pen.\nI'm from Tokyo.\n\"\"\"\n\n```\n\n上下比べてください。\n次のように書く方が見通しがいいのですが前後に改行が足されるので、その修正をしていきます。\n\n```sample.py\n\nstring = '''\nThis is a pen.\nI'm from Tokyo.\n'''\n\nprint(string)\n\n# 出力結果\n\n\"\"\"\n\nThis is a pen.\nI'm from Tokyo.\n\n\"\"\"\n\n# 上下に余白あいちゃった。\n\n```\n\n[](-----------------------------------------------------------------------)\n\n# 上下の余白の消し方\n* [1:-1]\n* strip()\n* バックスラッシュ\\\n\n[Python のヒアドキュメントを見やすくする小技](http://qiita.com/hoxo_m/items/23e45f5fe480bcb9a29c)\nこちらの記事とコメント欄を参考にさせていただきました。\n\n## 上下の余白の消し方 [1:-1]\n```sample.py\n\nstring = '''\nThis is a pen.\nI'm from Tokyo.\n'''[1:-1]\n\nprint(string)\n\n# 出力結果\n\"\"\"\nThis is a pen.\nI'm from Tokyo.\n\"\"\"\n\n```\n\n[1:-1]の使い方をみてみる。\n\n```sample.py\n\nprint(\"test123456789\"[1:-1])\n\n# 出力結果\n\"\"\"\nest12345678\n\"\"\"\n```\n\n[](-----------------------------------------------------------------------)\n\n## 上下の余白の消し方 strip()\n\n```sample.py\n\nstring = '''\nThis is a pen.\nI'm from Tokyo.\n'''.strip()\n\nprint(string)\n\n# 出力\nThis is a pen.\nI'm from Tokyo.\n```\n\n`strip()`は前後の空白文字を削除してくれます。\n参考記事[[python]strip()の引数を省略すると空白だけでなく改行も除去される](http://dackdive.hateblo.jp/entry/2015/02/13/174206)\n\n```sample.py\n\nprint(\"     space5     \".strip())\nprint(\"     \\nspace5\\n     \".strip())\n\n# どちらも改行記号とスペースが削除されます。\n\"\"\"\nspace5\n\"\"\"\n\n```\n\n[](-----------------------------------------------------------------------)\n\n## 上下の余白の消し方 バックスラッシュ\\\n\n```sample.py\n\nstring = '''\\\nThis is a pen.\nI'm from Tokyo.\\\n'''\n\nprint(string)\n\n# 出力\n\n\"\"\"\nThis is a pen.\nI'm from Tokyo.\n\"\"\"\n```\n\nバックスラッシュ\\は、Pythonのコードの途中で改行したいときとか、長くなって読みやすさを重視したいときとかに使います。見た目は改行してるけど、pythonとしては改行を無視して読み込みをするやつです。\n\n```\nprint (\"te\\\nst\")\nprint \\\n  (\"test\")\n\n\"\"\"\ntest\ntest\n\"\"\"\n\n```\n\n\n# インデント削除\n\nインデントがさがってるときのヒアドキュメントのインデント削除をみていきます。\n\n```\nif True:\n    string = '''\n        This is a pen.\n        I'm from Tokyo.\n        '''.strip()\n    print(string)\n\n\"\"\"\n        This is a pen.\n        I'm from Tokyo.     \n\"\"\"\n\n```\n\n`import textwrap`\nこのtextwrapというものをimportする。これが一番ラクです。\n\n```sample.py\n\nimport textwrap\n\nif True:\n    string = '''\n        This is a pen.\n        I'm from Tokyo.\n        '''\n    print(string)\n\nprint (textwrap.dedent(string).strip())\n\n\"\"\"\n--------\nThis is a pen.\nI'm from Tokyo.\n--------\n\"\"\"\n\n```\n\n`textwrap.dedent(string)`が各行のインデントを削除してくれます。\n\n\n[](-----------------------------------------------------------------------)\n\n# 変数展開\n \nすごく参考になるリンクはこちら。\n[Pythonで文字列中の変数展開をするときの書式について調べたのでメモ](http://sucrose.hatenablog.com/entry/2014/07/26/235459)\n\n```sample.py\nstring = '''\nThis is a {what}.\nI'm from {where}.\n'''.format(what=\"apple\", where=\"Chiba\").strip()\n\nprint(string)\n\n\"\"\"\n--------\nThis is a apple.\nI'm from Chiba.\n--------\n\"\"\"\n```\n\n{what}\nwhat=\"apple\"\n{}つけたり、whatと\"\"で囲まなかったりと、使うたびに調べそうな気がしてます。\n\n\n# まとめ\n\n```matome.py\nimport textwrap\nstring = textwrap.dedent('''\n  This is a {what}.\n  I'm from {where}.\n''').format(what=\"apple\", where=\"Chiba\").strip()\nprint(string)\n\n\"\"\"\nThis is a apple.\nI'm from Chiba.\n\"\"\"\n```\n\nなんとなくヒアドキュメントで使いそうなものをつらつらと書いてきましたが、足りない部分とかもたくさんあると思いますが、参考になれば！\n\n","coediting":false,"comments_count":0,"created_at":"2017-03-09T09:10:19+09:00","group":null,"id":"c7cba73a3a563be5eac6","likes_count":117,"private":false,"reactions_count":0,"stocks_count":97,"tags":[{"name":"Python","versions":[]}],"title":"Pythonのヒアドキュメント","updated_at":"2017-05-30T17:42:30+09:00","url":"https://qiita.com/ykhirao/items/c7cba73a3a563be5eac6","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"月末って忙しいよね\" class=\"fragment\"></span><a href=\"#%E6%9C%88%E6%9C%AB%E3%81%A3%E3%81%A6%E5%BF%99%E3%81%97%E3%81%84%E3%82%88%E3%81%AD\"><i class=\"fa fa-link\"></i></a>月末って忙しいよね…</h1>\n\n<p>月末って報告書とか、領収証とか…なんかたくさん出さなきゃいけないものあるよね。センパイが「誰か作って」って言ってたのをGoogle apps scriptで作成しました。<br>\nGoogle apps script[GAS]触りだして4日目くらいですが、かなり便利なのでエンジニア以外のもっとたくさんの人に触れて欲しいなと思い、連日ですがGASの実用例をあげたいと思います。</p>\n\n<h1>\n<span id=\"完成品\" class=\"fragment\"></span><a href=\"#%E5%AE%8C%E6%88%90%E5%93%81\"><i class=\"fa fa-link\"></i></a>完成品</h1>\n\n<p>月末の営業日にSlack投げるだけのシンプルな実装です。<br>\nコピペすれば10分で実装いけるんじゃないかと！</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/b149deb75bd6943500f82a6c5d8d688217114df0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65366537633034382d336463642d303934382d306430642d3539376266313438616534642e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"555\" alt=\"スクリーンショット 2017-03-06 21.29.19.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe6e7c048-3dcd-0948-0d0d-597bf148ae4d.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=db2b6d3bde4acf38d998fc70597a61ff\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e6e7c048-3dcd-0948-0d0d-597bf148ae4d.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe6e7c048-3dcd-0948-0d0d-597bf148ae4d.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b80bcb2bc2bc1b56c1da86ddedf85763 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"完成までに使用するもの\" class=\"fragment\"></span><a href=\"#%E5%AE%8C%E6%88%90%E3%81%BE%E3%81%A7%E3%81%AB%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%82%82%E3%81%AE\"><i class=\"fa fa-link\"></i></a>完成までに使用するもの</h2>\n\n<p>Googleアカウント[Google Apps Script]<br>\nSlack</p>\n\n<h2>\n<span id=\"完成したら\" class=\"fragment\"></span><a href=\"#%E5%AE%8C%E6%88%90%E3%81%97%E3%81%9F%E3%82%89\"><i class=\"fa fa-link\"></i></a>完成したら</h2>\n\n<p>以下の2つもコード公開します<br>\n* 月初めの営業日になにかをする<br>\n* 月始めの第一金曜日になにかをする</p>\n\n<p>つまりこれを応用すれば、いつ何時でもSlackで自動チャットを飛ばせるようになる。</p>\n\n<h1>\n<span id=\"月末締め\" class=\"fragment\"></span><a href=\"#%E6%9C%88%E6%9C%AB%E7%B7%A0%E3%82%81\"><i class=\"fa fa-link\"></i></a>月末締め…！！</h1>\n\n<p>画像ありでどんどんいくよ〜〜</p>\n\n<h2>\n<span id=\"slack-tokenの取得\" class=\"fragment\"></span><a href=\"#slack-token%E3%81%AE%E5%8F%96%E5%BE%97\"><i class=\"fa fa-link\"></i></a>Slack Tokenの取得</h2>\n\n<p>ここを参考にしてみて！<br>\n<a href=\"http://qiita.com/ykhirao/items/0d6b9f4a0cc626884dbb\" class=\"autolink\" id=\"reference-a3696fbcff57fc2bef93\">http://qiita.com/ykhirao/items/0d6b9f4a0cc626884dbb</a></p>\n\n<p>xoxp-18127　こんな感じの長い数字。</p>\n\n<p>Slack持ってない人は<a href=\"http://qiita.com/saitotak/items/ac0eb7ddc0d8d83cbe91\" id=\"reference-c27f8c53fed184064594\">個人Slackのススメ</a>にしたがって導入をすすめます。</p>\n\n<h2>\n<span id=\"gasの導入\" class=\"fragment\"></span><a href=\"#gas%E3%81%AE%E5%B0%8E%E5%85%A5\"><i class=\"fa fa-link\"></i></a>GASの導入</h2>\n\n<p>Googleドライブにアクセス<br>\n<a href=\"https://drive.google.com/drive/my-drive\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://drive.google.com/drive/my-drive</a></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/1bb999134bf657ebc975ba39db895e0f36c15e55/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f66303630333130352d656232332d613763612d353362652d3865353933643130343531362e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1192\" alt=\"スクリーンショット 2017-03-06 21.59.16.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Ff0603105-eb23-a7ca-53be-8e593d104516.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3d95220c7d0ec307b0b324bb8d73aaab\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/f0603105-eb23-a7ca-53be-8e593d104516.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Ff0603105-eb23-a7ca-53be-8e593d104516.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=68314d0b8ed179a3da5a49d9d6b4f9b6 1x\" loading=\"lazy\"></a></p>\n\n<p><code>新規 &gt;&gt; その他 &gt;&gt; アプリを追加</code><br>\nから Google apps script を検索・追加</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/596401421f94304589195d90bbb93d19d32c5092/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f35663537396630642d326432342d333462362d383633342d6137663066343836393533372e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1196\" alt=\"スクリーンショット 2017-03-06 22.00.23.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F5f579f0d-2d24-34b6-8634-a7f0f4869537.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0027e01d18fcdad909aeda9c3be9d951\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/5f579f0d-2d24-34b6-8634-a7f0f4869537.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F5f579f0d-2d24-34b6-8634-a7f0f4869537.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3aa8708c5121478d83d7e4c59f2526c4 1x\" loading=\"lazy\"></a></p>\n\n<p>そうすると<code>新規 &gt;&gt; その他 &gt;&gt; Google apps script</code>を押してみてください。<br>\nGAS画面になると思います。</p>\n\n<h2>\n<span id=\"gasの編集\" class=\"fragment\"></span><a href=\"#gas%E3%81%AE%E7%B7%A8%E9%9B%86\"><i class=\"fa fa-link\"></i></a>GASの編集</h2>\n\n<p><a href=\"https://camo.qiitausercontent.com/ca5e3c94c0855ef18d78bc41926692f9d7dc8f04/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f66636661393739642d323635322d663739352d633562612d6362376465343063616230322e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"816\" alt=\"スクリーンショット 2017-03-06 22.23.56.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Ffcfa979d-2652-f795-c5ba-cb7de40cab02.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f194163c0f34c56245cc49838e67f960\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/fcfa979d-2652-f795-c5ba-cb7de40cab02.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Ffcfa979d-2652-f795-c5ba-cb7de40cab02.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6f030ab2a9355861517cfef200d34f54 1x\" loading=\"lazy\"></a></p>\n\n<p>メインの部分にこれを貼り付けてみよう！</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>\n<span class=\"cm\">/*\n  メインの処理\n  setTriggerDay() : 最終営業日(0時)に次の処理をする命令を出す。\n  setTriggerHoursLast() : 最終営業日の18時に次の命令を出す。\n  sendSlack() : slackにデータを投げる。\n\n  サブ的な処理\n  deleteTrigger() : 蓄積されている命令を削除する\n  lastBusinessDay() : 今月の最終営業日を求める\n  isHoliday() : 本日が[日本の祝日]かどうかチェック。土日は曜日で判定してるチェック\n  .getDay()　: Dateオブジェクトから曜日を求めるメソッド(0:日, 6:土曜日)\n*/</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">setTriggerDay</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>  \n  <span class=\"kd\">var</span> <span class=\"nx\">last</span> <span class=\"o\">=</span> <span class=\"nx\">lastBusinessDay</span><span class=\"p\">();</span>\n  <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">newTrigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">setTriggerHoursLast</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nx\">timeBased</span><span class=\"p\">()</span>\n    <span class=\"p\">.</span><span class=\"nx\">atDate</span><span class=\"p\">(</span><span class=\"nx\">last</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">last</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nx\">last</span><span class=\"p\">.</span><span class=\"nx\">getDate</span><span class=\"p\">())</span>\n    <span class=\"p\">.</span><span class=\"nx\">create</span><span class=\"p\">();</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">setTriggerHoursLast</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n  <span class=\"nx\">deleteTrigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">setTriggerHoursLast</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">newTrigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">sendSlack</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nx\">timeBased</span><span class=\"p\">()</span>\n    <span class=\"p\">.</span><span class=\"nx\">after</span><span class=\"p\">(</span> <span class=\"mi\">18</span> <span class=\"o\">*</span> <span class=\"mi\">60</span> <span class=\"o\">*</span> <span class=\"mi\">60</span> <span class=\"o\">*</span> <span class=\"mi\">1000</span> <span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nx\">create</span><span class=\"p\">();</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">sendSlack</span><span class=\"p\">()</span> \n<span class=\"p\">{</span>\n  <span class=\"nx\">deleteTrigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">sendSlack</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">options</span> <span class=\"o\">=</span> \n  <span class=\"p\">{</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">method</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">POST</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">payload</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> \n    <span class=\"p\">{</span>\n      <span class=\"dl\">\"</span><span class=\"s2\">token</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">********************</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n      <span class=\"dl\">\"</span><span class=\"s2\">channel</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">bot-test</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n      <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">領収書出しましたか？忘れてないよね。</span><span class=\"se\">\\</span><span class=\"s2\">ｎhttp://.../</span><span class=\"dl\">\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">url</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">https://slack.com/api/chat.postMessage</span><span class=\"dl\">\"</span>\n  <span class=\"nx\">UrlFetchApp</span><span class=\"p\">.</span><span class=\"nx\">fetch</span><span class=\"p\">(</span><span class=\"nx\">url</span><span class=\"p\">,</span> <span class=\"nx\">options</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">lastBusinessDay</span><span class=\"p\">()</span> \n<span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">today</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">();</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">lastDayOfThisMonth</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">day</span><span class=\"p\">;</span> <span class=\"c1\">// 0-&gt;日曜日</span>\n\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"mi\">30</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">day</span> <span class=\"o\">=</span> <span class=\"nx\">lastDayOfThisMonth</span><span class=\"p\">.</span><span class=\"nx\">getDay</span><span class=\"p\">();</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">day</span> <span class=\"o\">==</span> <span class=\"mi\">0</span> <span class=\"o\">||</span> <span class=\"nx\">day</span> <span class=\"o\">==</span> <span class=\"mi\">6</span> <span class=\"o\">||</span> <span class=\"nx\">isHoliday</span><span class=\"p\">(</span><span class=\"nx\">lastDayOfThisMonth</span><span class=\"p\">))</span> <span class=\"p\">{</span>\n      <span class=\"nx\">lastDayOfThisMonth</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span> <span class=\"o\">*</span> <span class=\"nx\">i</span><span class=\"p\">);</span>\n      <span class=\"k\">continue</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n  <span class=\"k\">return</span> <span class=\"nx\">lastDayOfThisMonth</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">deleteTrigger</span><span class=\"p\">(</span><span class=\"nx\">name</span><span class=\"p\">)</span> \n<span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">triggers</span> <span class=\"o\">=</span> <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">getProjectTriggers</span><span class=\"p\">();</span>\n  <span class=\"k\">for</span><span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"nx\">triggers</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">triggers</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">getHandlerFunction</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"nx\">name</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">deleteTrigger</span><span class=\"p\">(</span><span class=\"nx\">triggers</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">]);</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">isHoliday</span><span class=\"p\">(</span><span class=\"nx\">day</span><span class=\"p\">)</span> \n<span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">startDate</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">day</span><span class=\"p\">.</span><span class=\"nx\">setHours</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">));</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">endDate</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">day</span><span class=\"p\">.</span><span class=\"nx\">setHours</span><span class=\"p\">(</span><span class=\"mi\">23</span><span class=\"p\">,</span> <span class=\"mi\">59</span><span class=\"p\">,</span> <span class=\"mi\">59</span><span class=\"p\">));</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">cal</span> <span class=\"o\">=</span> <span class=\"nx\">CalendarApp</span><span class=\"p\">.</span><span class=\"nx\">getCalendarById</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">ja.japanese#holiday@group.v.calendar.google.com</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">holidays</span> <span class=\"o\">=</span>  <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">getEvents</span><span class=\"p\">(</span><span class=\"nx\">startDate</span><span class=\"p\">,</span> <span class=\"nx\">endDate</span><span class=\"p\">);</span>\n  <span class=\"k\">return</span> <span class=\"nx\">holidays</span><span class=\"p\">.</span><span class=\"nx\">length</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"c1\">// 祝日ならtrue</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n\n<p>sendSlackのここは個人設定に変えてください！</p>\n\n<ul>\n<li>\"token\": \"********************\",</li>\n<li>\"channel\": \"bot-test\",</li>\n<li>\"text\": \"領収書出しましたか？忘れてないよね。\\ｎhttp://.../\"</li>\n</ul>\n\n<h2>\n<span id=\"settriggerdayの実行と取り消しと毎月実行\" class=\"fragment\"></span><a href=\"#settriggerday%E3%81%AE%E5%AE%9F%E8%A1%8C%E3%81%A8%E5%8F%96%E3%82%8A%E6%B6%88%E3%81%97%E3%81%A8%E6%AF%8E%E6%9C%88%E5%AE%9F%E8%A1%8C\"><i class=\"fa fa-link\"></i></a>setTriggerDay()の実行と取り消しと毎月実行</h2>\n\n<p>実行 &gt;&gt; setTriggerDay<br>\nをおしてみよう。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/2943d9ffc3472a260a7b8b49cf1dd129d6215eaa/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f36656238366532392d613466392d346664302d653632642d3736613861663233336137322e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"527\" alt=\"スクリーンショット 2017-03-06 22.26.52.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6eb86e29-a4f9-4fd0-e62d-76a8af233a72.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=41f721b304f5cec115d59b983c938b0b\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6eb86e29-a4f9-4fd0-e62d-76a8af233a72.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6eb86e29-a4f9-4fd0-e62d-76a8af233a72.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e1491c09dfdf657c2ef3aff033538ed5 1x\" loading=\"lazy\"></a></p>\n\n<p>リソース &gt;&gt; 現在のプロジェクトのトリガー<br>\nここからトリガー（何時にあれを実行しなさい）を確認できます。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/3b08a873f77b7d6e66e6950e4b4d91c82fd6c443/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f64616566616139312d353166632d306662662d343035372d6233313663386265343562312e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"648\" alt=\"スクリーンショット 2017-03-06 22.27.40.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fdaefaa91-51fc-0fbf-4057-b316c8be45b1.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=962a2c45562cefc53b007fdfc8ff1fc8\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/daefaa91-51fc-0fbf-4057-b316c8be45b1.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fdaefaa91-51fc-0fbf-4057-b316c8be45b1.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2b7a193799802c5662a3b3b0c37d5e9e 1x\" loading=\"lazy\"></a></p>\n\n<p>ここで 2017/03/21 夜中丁度に setTriggerHoursLast が実行されるようになっていたら大丈夫。setTriggerHoursLastは18時間後にSlack送りなさいという命令です。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/7e6b6f79bffa7dac4f99d0ed7c62440e61ac39e6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f62623663663961322d616566372d373639632d633639622d6261346561613962336539382e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"838\" alt=\"スクリーンショット 2017-03-06 22.27.47.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fbb6cf9a2-aef7-769c-c69b-ba4eaa9b3e98.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=19baf0caf865485764a2109df380591b\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/bb6cf9a2-aef7-769c-c69b-ba4eaa9b3e98.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fbb6cf9a2-aef7-769c-c69b-ba4eaa9b3e98.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=230c496677d16423f56ac98744f89e3d 1x\" loading=\"lazy\"></a></p>\n\n<p>またついでにこの画面でsetTriggerDayを毎月1日6時くらいにセットします。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/03a0f1662ae9b4984279eca9bed6bfc52894518b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f33323838633963382d646561372d356264642d656566612d3433666337373335666366622e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"836\" alt=\"スクリーンショット 2017-03-06 22.37.18.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F3288c9c8-dea7-5bdd-eefa-43fc7735fcfb.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=617a1a8877077bb4ae243b8b31e33d37\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/3288c9c8-dea7-5bdd-eefa-43fc7735fcfb.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F3288c9c8-dea7-5bdd-eefa-43fc7735fcfb.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f2dd1d807c95f0919a362633f312b55c 1x\" loading=\"lazy\"></a></p>\n\n<p>そうすると毎月1日にsetTriggerDayが実行されて<br>\n-&gt; setTriggerDay :最終日に次を実行<br>\n-&gt; setTriggerHoursLast :18時に次を実行<br>\n-&gt; sendSlack :Slackを実行</p>\n\n<p>って感じで毎月、最終日トリガーを作成してくれます。</p>\n\n<h2>\n<span id=\"functionごとに見ていく\" class=\"fragment\"></span><a href=\"#function%E3%81%94%E3%81%A8%E3%81%AB%E8%A6%8B%E3%81%A6%E3%81%84%E3%81%8F\"><i class=\"fa fa-link\"></i></a>functionごとに見ていく</h2>\n\n<p>簡単にみていきます。</p>\n\n<h3>\n<span id=\"settriggerday\" class=\"fragment\"></span><a href=\"#settriggerday\"><i class=\"fa fa-link\"></i></a>setTriggerDay</h3>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">setTriggerDay</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>  \n  <span class=\"kd\">var</span> <span class=\"nx\">last</span> <span class=\"o\">=</span> <span class=\"nx\">lastBusinessDay</span><span class=\"p\">();</span>\n  <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">newTrigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">setTriggerHoursLast</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nx\">timeBased</span><span class=\"p\">()</span>\n    <span class=\"p\">.</span><span class=\"nx\">atDate</span><span class=\"p\">(</span><span class=\"nx\">last</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">last</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nx\">last</span><span class=\"p\">.</span><span class=\"nx\">getDate</span><span class=\"p\">())</span>\n    <span class=\"p\">.</span><span class=\"nx\">create</span><span class=\"p\">();</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>lastBusinessDay()で営業日最終日のDateオブジェクトを取ってきて<br>\n.atDate(last.getMonth()+1)としているところは、月は0月始まりとなっているからです。</p>\n\n<h3>\n<span id=\"settriggerhourslast\" class=\"fragment\"></span><a href=\"#settriggerhourslast\"><i class=\"fa fa-link\"></i></a>setTriggerHoursLast</h3>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">setTriggerHoursLast</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n  <span class=\"nx\">deleteTrigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">setTriggerHoursLast</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">newTrigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">sendSlack</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nx\">timeBased</span><span class=\"p\">()</span>\n    <span class=\"p\">.</span><span class=\"nx\">after</span><span class=\"p\">(</span> <span class=\"mi\">18</span> <span class=\"o\">*</span> <span class=\"mi\">60</span> <span class=\"o\">*</span> <span class=\"mi\">60</span> <span class=\"o\">*</span> <span class=\"mi\">1000</span> <span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nx\">create</span><span class=\"p\">();</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>.after( 18 * 60 * 60 * 1000 )でミリ秒後にトリガーをセットしてます。</p>\n\n<h3>\n<span id=\"sendslack\" class=\"fragment\"></span><a href=\"#sendslack\"><i class=\"fa fa-link\"></i></a>sendSlack</h3>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">sendSlack</span><span class=\"p\">()</span> \n<span class=\"p\">{</span>\n  <span class=\"nx\">deleteTrigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">sendSlack</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">options</span> <span class=\"o\">=</span> \n  <span class=\"p\">{</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">method</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">POST</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">payload</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> \n    <span class=\"p\">{</span>\n      <span class=\"dl\">\"</span><span class=\"s2\">token</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">********************</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n      <span class=\"dl\">\"</span><span class=\"s2\">channel</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">bot-test</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n      <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">領収書出しましたか？忘れてないよね。</span><span class=\"se\">\\</span><span class=\"s2\">ｎhttp://.../</span><span class=\"dl\">\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">url</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">https://slack.com/api/chat.postMessage</span><span class=\"dl\">\"</span>\n  <span class=\"nx\">UrlFetchApp</span><span class=\"p\">.</span><span class=\"nx\">fetch</span><span class=\"p\">(</span><span class=\"nx\">url</span><span class=\"p\">,</span> <span class=\"nx\">options</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>こういう書き方だと思っていただければ…<br>\n詳しくは公式ドキュメントで　<a href=\"https://api.slack.com/methods/chat.postMessage\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://api.slack.com/methods/chat.postMessage</a></p>\n\n<h3>\n<span id=\"lastbusinessday\" class=\"fragment\"></span><a href=\"#lastbusinessday\"><i class=\"fa fa-link\"></i></a>lastBusinessDay</h3>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">lastBusinessDay</span><span class=\"p\">()</span> \n<span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">today</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">();</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">lastDayOfThisMonth</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">day</span><span class=\"p\">;</span> <span class=\"c1\">// 0-&gt;日曜日</span>\n\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"mi\">30</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">day</span> <span class=\"o\">=</span> <span class=\"nx\">lastDayOfThisMonth</span><span class=\"p\">.</span><span class=\"nx\">getDay</span><span class=\"p\">();</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">day</span> <span class=\"o\">==</span> <span class=\"mi\">0</span> <span class=\"o\">||</span> <span class=\"nx\">day</span> <span class=\"o\">==</span> <span class=\"mi\">6</span> <span class=\"o\">||</span> <span class=\"nx\">isHoliday</span><span class=\"p\">(</span><span class=\"nx\">lastDayOfThisMonth</span><span class=\"p\">))</span> <span class=\"p\">{</span>\n      <span class=\"nx\">lastDayOfThisMonth</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span> <span class=\"o\">*</span> <span class=\"nx\">i</span><span class=\"p\">);</span>\n      <span class=\"k\">continue</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"k\">break</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n  <span class=\"k\">return</span> <span class=\"nx\">lastDayOfThisMonth</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>day == 0 || day == 6 || isHoliday(lastDayOfThisMonth)<br>\nここで土日もしくは祝日判定をしています。</p>\n\n<h3>\n<span id=\"deletetrigger\" class=\"fragment\"></span><a href=\"#deletetrigger\"><i class=\"fa fa-link\"></i></a>deleteTrigger</h3>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>\n<span class=\"kd\">function</span> <span class=\"nx\">deleteTrigger</span><span class=\"p\">(</span><span class=\"nx\">name</span><span class=\"p\">)</span> \n<span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">triggers</span> <span class=\"o\">=</span> <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">getProjectTriggers</span><span class=\"p\">();</span>\n  <span class=\"k\">for</span><span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"nx\">triggers</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">triggers</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">getHandlerFunction</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"nx\">name</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">deleteTrigger</span><span class=\"p\">(</span><span class=\"nx\">triggers</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">]);</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n\n<p>実は自分でセットしたtriggerってこんな感じで1分ごとにたまっていきます。<br>\n今回だと\"MAIAMAIN\"って名前のトリガーを全削除する機能になってます。<br>\n<a href=\"https://camo.qiitausercontent.com/18f33b9bf701e7e2189b93dcbdab932fc9b61457/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f61633666346337632d663134322d663463612d663764632d6639353038386263373131382e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"735\" alt=\"スクリーンショット 2017-03-06 23.14.29.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fac6f4c7c-f142-f4ca-f7dc-f95088bc7118.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=36fd1a6a74b29b8998d068ac6e5dbb5d\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/ac6f4c7c-f142-f4ca-f7dc-f95088bc7118.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fac6f4c7c-f142-f4ca-f7dc-f95088bc7118.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bcde38fa01a6d1b60bb0a3bef5ea1a2a 1x\" loading=\"lazy\"></a></p>\n\n<p>参考：　<a href=\"http://qiita.com/sumi-engraphia/items/465dd027e17f44da4d6a\" class=\"autolink\" id=\"reference-6cdb302138342d02b062\">http://qiita.com/sumi-engraphia/items/465dd027e17f44da4d6a</a></p>\n\n<h3>\n<span id=\"isholiday\" class=\"fragment\"></span><a href=\"#isholiday\"><i class=\"fa fa-link\"></i></a>isHoliday</h3>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>\n<span class=\"kd\">function</span> <span class=\"nx\">isHoliday</span><span class=\"p\">(</span><span class=\"nx\">day</span><span class=\"p\">)</span> \n<span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">startDate</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">day</span><span class=\"p\">.</span><span class=\"nx\">setHours</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">));</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">endDate</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">day</span><span class=\"p\">.</span><span class=\"nx\">setHours</span><span class=\"p\">(</span><span class=\"mi\">23</span><span class=\"p\">,</span> <span class=\"mi\">59</span><span class=\"p\">,</span> <span class=\"mi\">59</span><span class=\"p\">));</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">cal</span> <span class=\"o\">=</span> <span class=\"nx\">CalendarApp</span><span class=\"p\">.</span><span class=\"nx\">getCalendarById</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">ja.japanese#holiday@group.v.calendar.google.com</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">holidays</span> <span class=\"o\">=</span>  <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">getEvents</span><span class=\"p\">(</span><span class=\"nx\">startDate</span><span class=\"p\">,</span> <span class=\"nx\">endDate</span><span class=\"p\">);</span>\n  <span class=\"k\">return</span> <span class=\"nx\">holidays</span><span class=\"p\">.</span><span class=\"nx\">length</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"c1\">// 祝日ならtrue</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n\n<p>getCalendarByIdでGoogleの[日本の祝日]を取得してきてます。</p>\n\n<p>参考：　<a href=\"http://qiita.com/kamatama_41/items/be40e05524530920a9d9\" class=\"autolink\" id=\"reference-5a809bb3572c78f54395\">http://qiita.com/kamatama_41/items/be40e05524530920a9d9</a></p>\n\n<p>終わりました〜〜<br>\n次は月初めの営業日を取っていきます〜〜</p>\n\n<h1>\n<span id=\"月初めの営業日\" class=\"fragment\"></span><a href=\"#%E6%9C%88%E5%88%9D%E3%82%81%E3%81%AE%E5%96%B6%E6%A5%AD%E6%97%A5\"><i class=\"fa fa-link\"></i></a>月初めの営業日</h1>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>\n<span class=\"cm\">/*\n  メインの処理\n  setTriggerDay() : はじめの営業日(0時)に次の処理をする命令を出す。\n  setTriggerHoursFirst() : はじめの営業日の11時に次の命令を出す。\n  sendSlack() : slackにデータを投げる。\n\n  サブ的な処理\n  deleteTrigger() : 蓄積されている命令を削除する\n  firstNextBusinessDay() : 来月のはじめの営業日を求める\n  isHoliday() : 本日が[日本の祝日]かどうかチェック。土日は曜日で判定してるチェック\n  .getDay()　: Dateオブジェクトから曜日を求めるメソッド(0:日, 6:土曜日)\n*/</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">setTriggerDay2</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>  \n  <span class=\"kd\">var</span> <span class=\"nx\">first</span> <span class=\"o\">=</span> <span class=\"nx\">firstNextBusinessDay</span><span class=\"p\">();</span>\n  <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">newTrigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">setTriggerHoursFirst</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nx\">timeBased</span><span class=\"p\">()</span>\n    <span class=\"p\">.</span><span class=\"nx\">atDate</span><span class=\"p\">(</span><span class=\"nx\">first</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">first</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nx\">first</span><span class=\"p\">.</span><span class=\"nx\">getDate</span><span class=\"p\">())</span>\n    <span class=\"p\">.</span><span class=\"nx\">create</span><span class=\"p\">();</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">setTriggerHoursFirst</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">newTrigger</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">sendSlack</span><span class=\"dl\">\"</span><span class=\"p\">)</span>\n   <span class=\"p\">.</span><span class=\"nx\">timeBased</span><span class=\"p\">()</span>\n   <span class=\"p\">.</span><span class=\"nx\">after</span><span class=\"p\">(</span><span class=\"mi\">11</span> <span class=\"o\">*</span> <span class=\"mi\">60</span> <span class=\"o\">*</span> <span class=\"mi\">60</span> <span class=\"o\">*</span> <span class=\"mi\">1000</span><span class=\"p\">)</span>\n   <span class=\"p\">.</span><span class=\"nx\">create</span><span class=\"p\">();</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">sendSlack</span><span class=\"p\">()</span> \n<span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">options</span> <span class=\"o\">=</span> \n  <span class=\"p\">{</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">method</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">POST</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n    <span class=\"dl\">\"</span><span class=\"s2\">payload</span><span class=\"dl\">\"</span> <span class=\"p\">:</span> \n    <span class=\"p\">{</span>\n      <span class=\"dl\">\"</span><span class=\"s2\">token</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">********************</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n      <span class=\"dl\">\"</span><span class=\"s2\">channel</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">bot-test</span><span class=\"dl\">\"</span><span class=\"p\">,</span>\n      <span class=\"dl\">\"</span><span class=\"s2\">text</span><span class=\"dl\">\"</span><span class=\"p\">:</span> <span class=\"dl\">\"</span><span class=\"s2\">月が始まりました。</span><span class=\"dl\">\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">url</span> <span class=\"o\">=</span> <span class=\"dl\">\"</span><span class=\"s2\">https://slack.com/api/chat.postMessage</span><span class=\"dl\">\"</span>\n  <span class=\"nx\">UrlFetchApp</span><span class=\"p\">.</span><span class=\"nx\">fetch</span><span class=\"p\">(</span><span class=\"nx\">url</span><span class=\"p\">,</span> <span class=\"nx\">options</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">firstNextBusinessDay</span><span class=\"p\">()</span> \n<span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">today</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">();</span>  \n  <span class=\"kd\">var</span> <span class=\"nx\">firstDayOfNextMonth</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">day</span><span class=\"p\">;</span> <span class=\"c1\">// 0-&gt;日曜日</span>\n\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"mi\">32</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">day</span> <span class=\"o\">=</span> <span class=\"nx\">firstDayOfNextMonth</span><span class=\"p\">.</span><span class=\"nx\">getDay</span><span class=\"p\">();</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">day</span> <span class=\"o\">==</span> <span class=\"mi\">0</span> <span class=\"o\">||</span> <span class=\"nx\">day</span> <span class=\"o\">==</span> <span class=\"mi\">6</span> <span class=\"o\">||</span> <span class=\"nx\">isHoliday</span><span class=\"p\">(</span><span class=\"nx\">firstDayOfNextMonth</span><span class=\"p\">))</span> <span class=\"p\">{</span>\n      <span class=\"nx\">firstDayOfThisMonth</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">(),</span> <span class=\"nx\">i</span><span class=\"p\">);</span>\n      <span class=\"k\">continue</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n  <span class=\"k\">return</span> <span class=\"nx\">firstDayOfNextMonth</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">deleteTrigger</span><span class=\"p\">()</span> \n<span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">triggers</span> <span class=\"o\">=</span> <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">getProjectTriggers</span><span class=\"p\">();</span>\n  <span class=\"k\">for</span><span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"nx\">triggers</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">triggers</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">getHandlerFunction</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"dl\">\"</span><span class=\"s2\">main</span><span class=\"dl\">\"</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"nx\">ScriptApp</span><span class=\"p\">.</span><span class=\"nx\">deleteTrigger</span><span class=\"p\">(</span><span class=\"nx\">triggers</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">]);</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">isHoliday</span><span class=\"p\">(</span><span class=\"nx\">day</span><span class=\"p\">)</span> \n<span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">startDate</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">day</span><span class=\"p\">.</span><span class=\"nx\">setHours</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">));</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">endDate</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">day</span><span class=\"p\">.</span><span class=\"nx\">setHours</span><span class=\"p\">(</span><span class=\"mi\">23</span><span class=\"p\">,</span> <span class=\"mi\">59</span><span class=\"p\">,</span> <span class=\"mi\">59</span><span class=\"p\">));</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">cal</span> <span class=\"o\">=</span> <span class=\"nx\">CalendarApp</span><span class=\"p\">.</span><span class=\"nx\">getCalendarById</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">ja.japanese#holiday@group.v.calendar.google.com</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">holidays</span> <span class=\"o\">=</span>  <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">getEvents</span><span class=\"p\">(</span><span class=\"nx\">startDate</span><span class=\"p\">,</span> <span class=\"nx\">endDate</span><span class=\"p\">);</span>\n  <span class=\"k\">return</span> <span class=\"nx\">holidays</span><span class=\"p\">.</span><span class=\"nx\">length</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"c1\">// 祝日ならtrue</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n\n<h1>\n<span id=\"第一月曜日営業日\" class=\"fragment\"></span><a href=\"#%E7%AC%AC%E4%B8%80%E6%9C%88%E6%9B%9C%E6%97%A5%E5%96%B6%E6%A5%AD%E6%97%A5\"><i class=\"fa fa-link\"></i></a>第一月曜日営業日</h1>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>\n<span class=\"kd\">function</span> <span class=\"nx\">firstNextBusinessMonDay</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">today</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">();</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">firstDayOfNextMonth</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">day</span><span class=\"p\">;</span> <span class=\"c1\">// 0-&gt;日曜日</span>\n\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"mi\">32</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">day</span> <span class=\"o\">=</span> <span class=\"nx\">firstDayOfNextMonth</span><span class=\"p\">.</span><span class=\"nx\">getDay</span><span class=\"p\">();</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">day</span> <span class=\"o\">!=</span> <span class=\"mi\">1</span> <span class=\"o\">||</span> <span class=\"nx\">isHoliday</span><span class=\"p\">(</span><span class=\"nx\">firstDayOfNextMonth</span><span class=\"p\">))</span> <span class=\"p\">{</span>\n      <span class=\"nx\">firstDayOfThisMonth</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getFullYear</span><span class=\"p\">(),</span> <span class=\"nx\">today</span><span class=\"p\">.</span><span class=\"nx\">getMonth</span><span class=\"p\">(),</span> <span class=\"nx\">i</span><span class=\"p\">);</span>\n      <span class=\"k\">continue</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"k\">break</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n  <span class=\"k\">return</span> <span class=\"nx\">firstDayOfNextMonth</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n\n<p>ここだけ変えればいいかな、こんな感じ？<br>\n1日から探索して、月曜日以外もしくは祝日なら次の日にいく。</p>\n\n<p>以上です。</p>\n\n<h1>\n<span id=\"終わりに\" class=\"fragment\"></span><a href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>終わりに</h1>\n\n<p>重要なことはそのままおコピペしてなんかやらかしちゃったとか責任とれないんで(ミスあっても、Slackがあれるとか、もしくは通知されないとか？)自身の環境でデバックしてからお使いください！</p>\n\n<p>Google Apps Script楽しい！</p>\n\n<p>.</p>\n","body":"# 月末って忙しいよね…\n\n月末って報告書とか、領収証とか…なんかたくさん出さなきゃいけないものあるよね。センパイが「誰か作って」って言ってたのをGoogle apps scriptで作成しました。\nGoogle apps script[GAS]触りだして4日目くらいですが、かなり便利なのでエンジニア以外のもっとたくさんの人に触れて欲しいなと思い、連日ですがGASの実用例をあげたいと思います。\n\n# 完成品\n\n月末の営業日にSlack投げるだけのシンプルな実装です。\nコピペすれば10分で実装いけるんじゃないかと！\n\n<img width=\"555\" alt=\"スクリーンショット 2017-03-06 21.29.19.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e6e7c048-3dcd-0948-0d0d-597bf148ae4d.jpeg\">\n\n## 完成までに使用するもの\n\nGoogleアカウント[Google Apps Script]\nSlack\n\n## 完成したら\n\n以下の2つもコード公開します\n* 月初めの営業日になにかをする\n* 月始めの第一金曜日になにかをする\n\nつまりこれを応用すれば、いつ何時でもSlackで自動チャットを飛ばせるようになる。\n\n# 月末締め…！！\n\n画像ありでどんどんいくよ〜〜\n\n## Slack Tokenの取得\n\nここを参考にしてみて！\nhttp://qiita.com/ykhirao/items/0d6b9f4a0cc626884dbb\n\nxoxp-18127　こんな感じの長い数字。\n\nSlack持ってない人は[個人Slackのススメ](http://qiita.com/saitotak/items/ac0eb7ddc0d8d83cbe91)にしたがって導入をすすめます。\n\n## GASの導入\n\nGoogleドライブにアクセス\nhttps://drive.google.com/drive/my-drive\n\n<img width=\"1192\" alt=\"スクリーンショット 2017-03-06 21.59.16.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/f0603105-eb23-a7ca-53be-8e593d104516.jpeg\">\n\n`新規 >> その他 >> アプリを追加`\nから Google apps script を検索・追加\n\n<img width=\"1196\" alt=\"スクリーンショット 2017-03-06 22.00.23.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/5f579f0d-2d24-34b6-8634-a7f0f4869537.jpeg\">\n\nそうすると`新規 >> その他 >> Google apps script`を押してみてください。\nGAS画面になると思います。\n\n## GASの編集\n\n<img width=\"816\" alt=\"スクリーンショット 2017-03-06 22.23.56.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/fcfa979d-2652-f795-c5ba-cb7de40cab02.jpeg\">\n\nメインの部分にこれを貼り付けてみよう！\n\n```js\n\n/*\n  メインの処理\n  setTriggerDay() : 最終営業日(0時)に次の処理をする命令を出す。\n  setTriggerHoursLast() : 最終営業日の18時に次の命令を出す。\n  sendSlack() : slackにデータを投げる。\n\n  サブ的な処理\n  deleteTrigger() : 蓄積されている命令を削除する\n  lastBusinessDay() : 今月の最終営業日を求める\n  isHoliday() : 本日が[日本の祝日]かどうかチェック。土日は曜日で判定してるチェック\n  .getDay()　: Dateオブジェクトから曜日を求めるメソッド(0:日, 6:土曜日)\n*/\n\nfunction setTriggerDay()\n{  \n  var last = lastBusinessDay();\n  ScriptApp.newTrigger(\"setTriggerHoursLast\")\n    .timeBased()\n    .atDate(last.getFullYear(), last.getMonth()+1, last.getDate())\n    .create();\n}\n\nfunction setTriggerHoursLast()\n{\n  deleteTrigger(\"setTriggerHoursLast\");\n  ScriptApp.newTrigger(\"sendSlack\")\n    .timeBased()\n    .after( 18 * 60 * 60 * 1000 )\n    .create();\n}\n\nfunction sendSlack() \n{\n  deleteTrigger(\"sendSlack\");\n  var options = \n  {\n    \"method\" : \"POST\",\n    \"payload\" : \n    {\n      \"token\": \"********************\",\n      \"channel\": \"bot-test\",\n      \"text\": \"領収書出しましたか？忘れてないよね。\\ｎhttp://.../\"\n    }\n  }\n  var url = \"https://slack.com/api/chat.postMessage\"\n  UrlFetchApp.fetch(url, options);\n}\n\nfunction lastBusinessDay() \n{\n  var today = new Date();\n  \n  var lastDayOfThisMonth = new Date(today.getFullYear(), today.getMonth()+1, 0);\n  var day; // 0->日曜日\n  \n  for (var i = 0; i < 30; i++) {\n    day = lastDayOfThisMonth.getDay();\n    if (day == 0 || day == 6 || isHoliday(lastDayOfThisMonth)) {\n      lastDayOfThisMonth = new Date(today.getFullYear(), today.getMonth()+1, -1 * i);\n      continue;\n    }\n  }\n  return lastDayOfThisMonth;\n}\n\nfunction deleteTrigger(name) \n{\n  var triggers = ScriptApp.getProjectTriggers();\n  for(var i=0; i < triggers.length; i++) {\n    if (triggers[i].getHandlerFunction() == name) {\n      ScriptApp.deleteTrigger(triggers[i]);\n    }\n  }\n}\n\nfunction isHoliday(day) \n{\n  var startDate = new Date(day.setHours(0, 0, 0, 0));\n  var endDate = new Date(day.setHours(23, 59, 59));\n  var cal = CalendarApp.getCalendarById(\"ja.japanese#holiday@group.v.calendar.google.com\");\n  var holidays =  cal.getEvents(startDate, endDate);\n  return holidays.length != 0; // 祝日ならtrue\n}\n\n```\nsendSlackのここは個人設定に変えてください！\n\n- \"token\": \"********************\",\n- \"channel\": \"bot-test\",\n- \"text\": \"領収書出しましたか？忘れてないよね。\\ｎhttp://.../\"\n\n\n## setTriggerDay()の実行と取り消しと毎月実行\n実行 >> setTriggerDay\nをおしてみよう。\n\n<img width=\"527\" alt=\"スクリーンショット 2017-03-06 22.26.52.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6eb86e29-a4f9-4fd0-e62d-76a8af233a72.jpeg\">\n\nリソース >> 現在のプロジェクトのトリガー\nここからトリガー（何時にあれを実行しなさい）を確認できます。\n\n<img width=\"648\" alt=\"スクリーンショット 2017-03-06 22.27.40.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/daefaa91-51fc-0fbf-4057-b316c8be45b1.jpeg\">\n\nここで 2017/03/21 夜中丁度に setTriggerHoursLast が実行されるようになっていたら大丈夫。setTriggerHoursLastは18時間後にSlack送りなさいという命令です。\n\n<img width=\"838\" alt=\"スクリーンショット 2017-03-06 22.27.47.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/bb6cf9a2-aef7-769c-c69b-ba4eaa9b3e98.jpeg\">\n\nまたついでにこの画面でsetTriggerDayを毎月1日6時くらいにセットします。\n\n<img width=\"836\" alt=\"スクリーンショット 2017-03-06 22.37.18.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/3288c9c8-dea7-5bdd-eefa-43fc7735fcfb.jpeg\">\n\n\nそうすると毎月1日にsetTriggerDayが実行されて\n-> setTriggerDay :最終日に次を実行\n-> setTriggerHoursLast :18時に次を実行\n-> sendSlack :Slackを実行\n\nって感じで毎月、最終日トリガーを作成してくれます。\n\n## functionごとに見ていく\n\n簡単にみていきます。\n\n### setTriggerDay\n\n```js\nfunction setTriggerDay()\n{  \n  var last = lastBusinessDay();\n  ScriptApp.newTrigger(\"setTriggerHoursLast\")\n    .timeBased()\n    .atDate(last.getFullYear(), last.getMonth()+1, last.getDate())\n    .create();\n}\n```\n\nlastBusinessDay()で営業日最終日のDateオブジェクトを取ってきて\n.atDate(last.getMonth()+1)としているところは、月は0月始まりとなっているからです。\n\n### setTriggerHoursLast\n\n```js\nfunction setTriggerHoursLast()\n{\n  deleteTrigger(\"setTriggerHoursLast\");\n  ScriptApp.newTrigger(\"sendSlack\")\n    .timeBased()\n    .after( 18 * 60 * 60 * 1000 )\n    .create();\n}\n```\n.after( 18 * 60 * 60 * 1000 )でミリ秒後にトリガーをセットしてます。\n\n### sendSlack\n\n```js\nfunction sendSlack() \n{\n  deleteTrigger(\"sendSlack\");\n  var options = \n  {\n    \"method\" : \"POST\",\n    \"payload\" : \n    {\n      \"token\": \"********************\",\n      \"channel\": \"bot-test\",\n      \"text\": \"領収書出しましたか？忘れてないよね。\\ｎhttp://.../\"\n    }\n  }\n  var url = \"https://slack.com/api/chat.postMessage\"\n  UrlFetchApp.fetch(url, options);\n}\n```\n\nこういう書き方だと思っていただければ…\n詳しくは公式ドキュメントで　https://api.slack.com/methods/chat.postMessage\n\n### lastBusinessDay\n\n```js\nfunction lastBusinessDay() \n{\n  var today = new Date();\n  var lastDayOfThisMonth = new Date(today.getFullYear(), today.getMonth()+1, 0);\n  var day; // 0->日曜日\n\n  for (var i = 0; i < 30; i++) {\n    day = lastDayOfThisMonth.getDay();\n    if (day == 0 || day == 6 || isHoliday(lastDayOfThisMonth)) {\n      lastDayOfThisMonth = new Date(today.getFullYear(), today.getMonth()+1, -1 * i);\n      continue;\n    }\n    break;\n  }\n  return lastDayOfThisMonth;\n}\n```\n\nday == 0 || day == 6 || isHoliday(lastDayOfThisMonth)\nここで土日もしくは祝日判定をしています。\n\n### deleteTrigger\n\n```js\n\nfunction deleteTrigger(name) \n{\n  var triggers = ScriptApp.getProjectTriggers();\n  for(var i=0; i < triggers.length; i++) {\n    if (triggers[i].getHandlerFunction() == name) {\n      ScriptApp.deleteTrigger(triggers[i]);\n    }\n  }\n}\n\n```\n\n実は自分でセットしたtriggerってこんな感じで1分ごとにたまっていきます。\n今回だと\"MAIAMAIN\"って名前のトリガーを全削除する機能になってます。\n<img width=\"735\" alt=\"スクリーンショット 2017-03-06 23.14.29.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/ac6f4c7c-f142-f4ca-f7dc-f95088bc7118.jpeg\">\n\n参考：　http://qiita.com/sumi-engraphia/items/465dd027e17f44da4d6a\n\n### isHoliday\n\n```js\n\nfunction isHoliday(day) \n{\n  var startDate = new Date(day.setHours(0, 0, 0, 0));\n  var endDate = new Date(day.setHours(23, 59, 59));\n  var cal = CalendarApp.getCalendarById(\"ja.japanese#holiday@group.v.calendar.google.com\");\n  var holidays =  cal.getEvents(startDate, endDate);\n  return holidays.length != 0; // 祝日ならtrue\n}\n\n```\n\ngetCalendarByIdでGoogleの[日本の祝日]を取得してきてます。\n\n参考：　http://qiita.com/kamatama_41/items/be40e05524530920a9d9\n\n終わりました〜〜\n次は月初めの営業日を取っていきます〜〜\n\n# 月初めの営業日\n\n```js\n\n/*\n  メインの処理\n  setTriggerDay() : はじめの営業日(0時)に次の処理をする命令を出す。\n  setTriggerHoursFirst() : はじめの営業日の11時に次の命令を出す。\n  sendSlack() : slackにデータを投げる。\n\n  サブ的な処理\n  deleteTrigger() : 蓄積されている命令を削除する\n  firstNextBusinessDay() : 来月のはじめの営業日を求める\n  isHoliday() : 本日が[日本の祝日]かどうかチェック。土日は曜日で判定してるチェック\n  .getDay()　: Dateオブジェクトから曜日を求めるメソッド(0:日, 6:土曜日)\n*/\n\nfunction setTriggerDay2()\n{  \n  var first = firstNextBusinessDay();\n  ScriptApp.newTrigger(\"setTriggerHoursFirst\")\n    .timeBased()\n    .atDate(first.getFullYear(), first.getMonth()+1, first.getDate())\n    .create();\n}\n\nfunction setTriggerHoursFirst()\n{\n ScriptApp.newTrigger(\"sendSlack\")\n   .timeBased()\n   .after(11 * 60 * 60 * 1000)\n   .create();\n}\n\nfunction sendSlack() \n{\n  var options = \n  {\n    \"method\" : \"POST\",\n    \"payload\" : \n    {\n      \"token\": \"********************\",\n      \"channel\": \"bot-test\",\n      \"text\": \"月が始まりました。\"\n    }\n  }\n  var url = \"https://slack.com/api/chat.postMessage\"\n  UrlFetchApp.fetch(url, options);\n}\n\nfunction firstNextBusinessDay() \n{\n  var today = new Date();  \n  var firstDayOfNextMonth = new Date(today.getFullYear(), today.getMonth()+1, 1);\n  var day; // 0->日曜日\n  \n  for (var i = 2; i < 32; i++) {\n    day = firstDayOfNextMonth.getDay();\n    if (day == 0 || day == 6 || isHoliday(firstDayOfNextMonth)) {\n      firstDayOfThisMonth = new Date(today.getFullYear(), today.getMonth(), i);\n      continue;\n    }\n  }\n  return firstDayOfNextMonth;\n}\n\nfunction deleteTrigger() \n{\n  var triggers = ScriptApp.getProjectTriggers();\n  for(var i=0; i < triggers.length; i++) {\n    if (triggers[i].getHandlerFunction() == \"main\") {\n      ScriptApp.deleteTrigger(triggers[i]);\n    }\n  }\n}\n\nfunction isHoliday(day) \n{\n  var startDate = new Date(day.setHours(0, 0, 0, 0));\n  var endDate = new Date(day.setHours(23, 59, 59));\n  var cal = CalendarApp.getCalendarById(\"ja.japanese#holiday@group.v.calendar.google.com\");\n  var holidays =  cal.getEvents(startDate, endDate);\n  return holidays.length != 0; // 祝日ならtrue\n}\n\n```\n\n# 第一月曜日営業日\n\n```js\n\nfunction firstNextBusinessMonDay() {\n  var today = new Date();\n  \n  var firstDayOfNextMonth = new Date(today.getFullYear(), today.getMonth()+1, 1);\n  var day; // 0->日曜日\n  \n  for (var i = 2; i < 32; i++) {\n    day = firstDayOfNextMonth.getDay();\n    if (day != 1 || isHoliday(firstDayOfNextMonth)) {\n      firstDayOfThisMonth = new Date(today.getFullYear(), today.getMonth(), i);\n      continue;\n    }\n    break;\n  }\n  return firstDayOfNextMonth;\n}\n\n```\nここだけ変えればいいかな、こんな感じ？\n1日から探索して、月曜日以外もしくは祝日なら次の日にいく。\n\n\n以上です。\n\n\n# 終わりに\n\n重要なことはそのままおコピペしてなんかやらかしちゃったとか責任とれないんで(ミスあっても、Slackがあれるとか、もしくは通知されないとか？)自身の環境でデバックしてからお使いください！\n\nGoogle Apps Script楽しい！\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2017-03-06T23:34:54+09:00","group":null,"id":"782e20ab0465533c48f6","likes_count":43,"private":false,"reactions_count":0,"stocks_count":51,"tags":[{"name":"JavaScript","versions":[]},{"name":"Google","versions":[]},{"name":"GoogleAppsScript","versions":[]},{"name":"Slack","versions":[]}],"title":"月末営業日にタスクをリマインドする ~ 使うのはSlackとGoogleアカウントだけで10分くらいで実装できるよ ~","updated_at":"2017-03-06T23:39:17+09:00","url":"https://qiita.com/ykhirao/items/782e20ab0465533c48f6","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"<p>なんか公式のやり方があるっぽいのでメモがてら書いておく。</p>\n\n<p><qiita-embed-ogp src=\"https://cloud.google.com/blog/products/g-suite/g-suite-pro-tip-how-to-automatically-add-a-schedule-from-google-sheets-into-calendar\"></qiita-embed-ogp></p>\n\n<h1>\n<span id=\"google-apps-script-gas-ガチ勢3日目\" class=\"fragment\"></span><a href=\"#google-apps-script-gas-%E3%82%AC%E3%83%81%E5%8B%A23%E6%97%A5%E7%9B%AE\"><i class=\"fa fa-link\"></i></a>Google Apps Script [GAS] ガチ勢3日目</h1>\n\n<p>Google Apps Scriptすげえ！楽しい！ってなって3日目です。<br>\nこのScript便利だよ、自社のJavaScript書けるエンジニアさんの大切な時間を奪えば<del>なんだって</del>いろいろできるよって話をしていきます。</p>\n\n<h2>\n<span id=\"内容\" class=\"fragment\"></span><a href=\"#%E5%86%85%E5%AE%B9\"><i class=\"fa fa-link\"></i></a>内容</h2>\n\n<ul>\n<li>完成品の確認</li>\n<li>コピペ編</li>\n<li>コード編</li>\n</ul>\n\n<p>以上3つで構成しようと思っています。</p>\n\n<h1>\n<span id=\"完成品の確認\" class=\"fragment\"></span><a href=\"#%E5%AE%8C%E6%88%90%E5%93%81%E3%81%AE%E7%A2%BA%E8%AA%8D\"><i class=\"fa fa-link\"></i></a>完成品の確認</h1>\n\n<p>マイカレンダー &gt;&gt; [ ◯◯株式会社 ] これを作ります。<br>\n<a href=\"https://camo.qiitausercontent.com/0822b8ed4d102266c3f3e7122cbe824822eca0b1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f38646534633666372d613735382d663338322d373566652d6365363137383066373433372e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1293\" alt=\"スクリーンショット 2017-03-05 16.40.22.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F8de4c6f7-a758-f382-75fe-ce61780f7437.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f61d886b28aaebe30d00a04a6124159d\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/8de4c6f7-a758-f382-75fe-ce61780f7437.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F8de4c6f7-a758-f382-75fe-ce61780f7437.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=16c9270be1fa19fced7a0d13cc38125f 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"point\" class=\"fragment\"></span><a href=\"#point\"><i class=\"fa fa-link\"></i></a>POINT</h2>\n\n<p>Googleの[ 日本の祝日 ]を元として、自社だけの[ 創立記念日 ]とか[ <del>△休日出勤</del> ]<br>\nとか追加したカレンダーが作れます。<br>\n作るだけならコピペで10分くらいで作れるかと思います。<br>\n一度このスクリプトに慣れれば[声優さんイベントカレンダー]とか[アイドルライブカレンダー]とか[◯◯イベントカレンダー]とかをすぐ作れるようになれます。私、某J系アイドルのコンサート日程をGoogleマイカレンダーに登録しているんですけど、普段は非表示(今日は◯でライブか…いきたい！！ってならないように。)必要なときに表示にしています。</p>\n\n<h2>\n<span id=\"使用するサイト技術など\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%82%B5%E3%82%A4%E3%83%88%E6%8A%80%E8%A1%93%E3%81%AA%E3%81%A9\"><i class=\"fa fa-link\"></i></a>使用するサイト・技術など</h2>\n\n<ul>\n<li>Google Apps(スプレッドシート、カレンダー)を使うので、Googleアカウント</li>\n<li>Google Apps Script( ≒ JavaScript)</li>\n</ul>\n\n<h2>\n<span id=\"カレンダーを作成した後の発展先\" class=\"fragment\"></span><a href=\"#%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC%E3%82%92%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E5%BE%8C%E3%81%AE%E7%99%BA%E5%B1%95%E5%85%88\"><i class=\"fa fa-link\"></i></a>カレンダーを作成した後の発展先</h2>\n\n<p>後でQiita公開しようと思ってる記事</p>\n\n<blockquote>\n<p>自社の営業日だけSlackに投稿したりするボット作成<br>\nこれに似たのさっき公開しました<a href=\"http://qiita.com/ykhirao/items/782e20ab0465533c48f6\" id=\"reference-78379306d036844ceb7f\">最終営業日に月末の報告しっかりしろよってSlackに投げるやつ</a></p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">省略しまくってます.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">CalendarApp</span><span class=\"p\">.</span><span class=\"nx\">getCalendarById</span><span class=\"p\">();</span>\n<span class=\"nx\">holidays</span> <span class=\"o\">=</span> <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">getEvents</span><span class=\"p\">();</span>\n<span class=\"k\">return</span> <span class=\"nx\">holidays</span><span class=\"p\">.</span><span class=\"nx\">length</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n</code></pre></div>\n</div>\n\n<p>自社カレンダーがあるとこれくらいのコード量で、[ 自社が休みかどうか ]の営業日判定がすごくやりやすくなります。<br>\n詳しくはこちら<a href=\"http://qiita.com/kamatama_41/items/be40e05524530920a9d9\" id=\"reference-bd5c16f94b2d75f301f7\">GoogleAppsScriptで日本の祝日を取得する</a></p>\n\n<blockquote>\n<p>スクレイピングしてせっせとカレンダー作りまくる</p>\n</blockquote>\n\n<p>先程の[ <a href=\"https://calendar.google.com/calendar/embed?src=2mjt9uiftvsjtqrrt2tdtq89do%40group.calendar.google.com&amp;ctz=Asia/Tokyo\" rel=\"nofollow noopener\" target=\"_blank\">◯◯株式会社</a>のカレンダー ]<br>\n<a href=\"https://camo.qiitausercontent.com/608fcfa3e2e7e53fa0e3a14c99cedf1870c2aa77/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f33623836366239362d643435382d343034302d343264632d3465613830363237356365392e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"862\" alt=\"スクリーンショット 2017-03-05 17.47.10.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F3b866b96-d458-4040-42dc-4ea806275ce9.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1cf1484a195d46b29f6441df9c76f193\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/3b866b96-d458-4040-42dc-4ea806275ce9.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F3b866b96-d458-4040-42dc-4ea806275ce9.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=43297f119df8e716a11db16bc442cda3 1x\" loading=\"lazy\"></a></p>\n\n<p>実は一般公開も簡単で、趣味のイベント情報の管理人にもすぐなれます。画像右下の[ + Google Calendar ]からカレンダーの追加もすぐできます。趣味友のためにイベント情報ちょっとスクレイピングしてくるわ(どやっ)ってしてくれるといいですね。</p>\n\n<h1>\n<span id=\"コピペ編\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%94%E3%83%9A%E7%B7%A8\"><i class=\"fa fa-link\"></i></a>コピペ編</h1>\n\n<h2>\n<span id=\"スプレッドシート作成\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%83%97%E3%83%AC%E3%83%83%E3%83%89%E3%82%B7%E3%83%BC%E3%83%88%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>スプレッドシート作成</h2>\n\n<p><a href=\"https://drive.google.com/drive/my-drive\" rel=\"nofollow noopener\" target=\"_blank\">Google Drive</a>からスプレッドシートを作成してください。<br>\n<a href=\"https://camo.qiitausercontent.com/dfcbead064a43455153dbec243d65dba2468a63c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f63616363343762322d633834352d383232622d313965632d6261643762626238656531632e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1145\" alt=\"スクリーンショット 2017-03-05 17.54.17.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fcacc47b2-c845-822b-19ec-bad7bbb8ee1c.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a66dcccb71ee84479fc6ce79f3f6f201\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/cacc47b2-c845-822b-19ec-bad7bbb8ee1c.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fcacc47b2-c845-822b-19ec-bad7bbb8ee1c.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5a9d4689b5031085c3c243f63aba528a 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"表のスタイルをあわせる\" class=\"fragment\"></span><a href=\"#%E8%A1%A8%E3%81%AE%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%82%92%E3%81%82%E3%82%8F%E3%81%9B%E3%82%8B\"><i class=\"fa fa-link\"></i></a>表のスタイルをあわせる</h2>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">1</th>\n<th style=\"text-align: center\">2</th>\n<th style=\"text-align: center\">3</th>\n<th style=\"text-align: center\">4</th>\n<th style=\"text-align: center\">5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">Googleカレンダーからの取得</td>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\">手動追加</td>\n<td style=\"text-align: center\"></td>\n<td style=\"text-align: center\">カレンダーの名前</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">日付</td>\n<td style=\"text-align: center\">タイトル</td>\n<td style=\"text-align: center\">日付</td>\n<td style=\"text-align: center\">タイトル</td>\n<td style=\"text-align: center\">◯◯株式会社</td>\n</tr>\n</tbody>\n</table>\n\n<p>まずこちらをコピーして、[ 値のみ貼り付け ]をして、図のような形式にしてください。<br>\n<a href=\"https://camo.qiitausercontent.com/2a38e504df77c5d964f259e55bb6556766e683e4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65373035343735622d326637372d313837632d303764312d3266653565623638633839622e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"606\" alt=\"スクリーンショット 2017-03-05 18.01.38.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe705475b-2f77-187c-07d1-2fe5eb68c89b.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=691955625dc3d885b2b6a36ad9cd5c3f\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e705475b-2f77-187c-07d1-2fe5eb68c89b.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fe705475b-2f77-187c-07d1-2fe5eb68c89b.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2b98562c7d4263cd8a19840bf1973b9d 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"スクリプトエディタを開く\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%82%92%E9%96%8B%E3%81%8F\"><i class=\"fa fa-link\"></i></a>スクリプトエディタを開く</h2>\n\n<p>ツール &gt;&gt; スクリプトエディタ <br>\nこちらをクリック。<br>\n<a href=\"https://camo.qiitausercontent.com/623ac119c535fb6da789181161e400c291a7deb3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f36633466393530612d623038382d396262312d323631662d6663623163373335306434312e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"602\" alt=\"スクリーンショット 2017-03-05 18.04.38.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6c4f950a-b088-9bb1-261f-fcb1c7350d41.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=128dec1c20caecd178a9275f6286f947\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6c4f950a-b088-9bb1-261f-fcb1c7350d41.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6c4f950a-b088-9bb1-261f-fcb1c7350d41.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3cc39b4eab1bffec34968488afda0a52 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"スクリプトエディタにコードを貼り付ける\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%81%AB%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%B2%BC%E3%82%8A%E4%BB%98%E3%81%91%E3%82%8B\"><i class=\"fa fa-link\"></i></a>スクリプトエディタにコードを貼り付ける</h2>\n\n<p><a href=\"https://camo.qiitausercontent.com/d16a9d0ccd4f0e39000b4fe3e5b4f770d3872a7b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f63376464383364312d363239392d393062382d633337322d6662613538366265383535622e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"784\" alt=\"スクリーンショット 2017-03-05 18.08.15.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc7dd83d1-6299-90b8-c372-fba586be855b.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=93a7023c9448dc59dc316bbc34e94579\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/c7dd83d1-6299-90b8-c372-fba586be855b.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc7dd83d1-6299-90b8-c372-fba586be855b.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e41c5966cd0e14155a7f5e8ee29d823d 1x\" loading=\"lazy\"></a><br>\n1. 左上の名前変更<br>\n1. コード.gsに以下のコードをコピペ</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">createGoogleCalendar</span><span class=\"p\">(){</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">title</span><span class=\"p\">,</span> <span class=\"nx\">date</span><span class=\"p\">;</span>\n\n  <span class=\"c1\">// カレンダー名の取得</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">sheet</span> <span class=\"o\">=</span> <span class=\"nx\">SpreadsheetApp</span><span class=\"p\">.</span><span class=\"nx\">getActiveSheet</span><span class=\"p\">();</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">calendarName</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n\n  <span class=\"c1\">// カレンダーの作成と、オブジェクトcalの生成</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">cal</span> <span class=\"o\">=</span> <span class=\"nx\">CalendarApp</span><span class=\"p\">.</span><span class=\"nx\">createCalendar</span><span class=\"p\">(</span><span class=\"nx\">calendarName</span><span class=\"p\">);</span>\n\n  <span class=\"c1\">// Google[日本の祝日]の全日イベントの追加</span>\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getLastRow</span><span class=\"p\">();</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">title</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n    <span class=\"nx\">date</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n<span class=\"err\">　　　　　　　　</span><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">title</span><span class=\"o\">==</span><span class=\"dl\">\"\"</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">date</span> <span class=\"o\">==</span> <span class=\"dl\">\"\"</span><span class=\"p\">)</span> <span class=\"k\">break</span><span class=\"p\">;</span>\n    <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">createAllDayEvent</span><span class=\"p\">(</span><span class=\"nx\">title</span><span class=\"p\">,</span> <span class=\"nx\">date</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"c1\">// [手動追加]の全日イベントの追加</span>\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getLastRow</span><span class=\"p\">();</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">title</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n    <span class=\"nx\">date</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">title</span><span class=\"o\">==</span><span class=\"dl\">\"\"</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">date</span> <span class=\"o\">==</span> <span class=\"dl\">\"\"</span><span class=\"p\">)</span> <span class=\"k\">break</span><span class=\"p\">;</span>\n    <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">createAllDayEvent</span><span class=\"p\">(</span><span class=\"nx\">title</span><span class=\"p\">,</span> <span class=\"nx\">date</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>  \n<span class=\"p\">}</span>\n\n<span class=\"c1\">// Google[日本の祝日]の全日イベントからスプレッドシート作成</span>\n<span class=\"kd\">function</span> <span class=\"nx\">createByGoogleHoliday</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">start</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">end</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"mi\">2019</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">sheet</span> <span class=\"o\">=</span> <span class=\"nx\">SpreadsheetApp</span><span class=\"p\">.</span><span class=\"nx\">getActiveSheet</span><span class=\"p\">();</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">holidays</span> <span class=\"o\">=</span> <span class=\"nx\">getHoliday</span><span class=\"p\">(</span><span class=\"nx\">start</span><span class=\"p\">,</span> <span class=\"nx\">end</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">startRow</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">;</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">range</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">startRow</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nx\">holidays</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">,</span> <span class=\"nx\">holidays</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">length</span><span class=\"p\">);</span>\n  <span class=\"nx\">range</span><span class=\"p\">.</span><span class=\"nx\">setValues</span><span class=\"p\">(</span><span class=\"nx\">holidays</span><span class=\"p\">);</span>\n  <span class=\"nx\">range</span><span class=\"p\">.</span><span class=\"nx\">sort</span><span class=\"p\">([{</span><span class=\"na\">column</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"na\">ascending</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">}]);</span> <span class=\"c1\">// 昇順ソート</span>\n\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/**\n * startDate〜endDateまでの祝日をgoogleカレンダーの「日本の祝日」から取得\n * [日付,祝日名]の多次元配列にした上で返す\n */</span>\n<span class=\"kd\">function</span> <span class=\"nx\">getHoliday</span><span class=\"p\">(</span><span class=\"nx\">start</span><span class=\"p\">,</span> <span class=\"nx\">end</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">cal</span> <span class=\"o\">=</span> <span class=\"nx\">CalendarApp</span><span class=\"p\">.</span><span class=\"nx\">getCalendarById</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">ja.japanese#holiday@group.v.calendar.google.com</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">holidays</span> <span class=\"o\">=</span> <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">getEvents</span><span class=\"p\">(</span><span class=\"nx\">start</span><span class=\"p\">,</span> <span class=\"nx\">end</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">values</span> <span class=\"o\">=</span> <span class=\"p\">[];</span>\n\n  <span class=\"k\">for</span><span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"nx\">holidays</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">values</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"nx\">holidays</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">getStartTime</span><span class=\"p\">(),</span> <span class=\"nx\">holidays</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">getTitle</span><span class=\"p\">()];</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"cm\">/**\n   * 追加と削除機能あり\n   * values.push([new Date(\"2017/1/4\"), \"俺の日\"]);\n   * values = deleteHoliday(values, \"2017/1/4\");\n   */</span>\n\n  <span class=\"k\">return</span> <span class=\"nx\">values</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">deleteHoliday</span><span class=\"p\">(</span><span class=\"nx\">values</span><span class=\"p\">,</span> <span class=\"nx\">date</span><span class=\"p\">){</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">target</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">date</span><span class=\"p\">);</span>\n  <span class=\"nx\">values</span><span class=\"p\">.</span><span class=\"nx\">some</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nx\">v</span><span class=\"p\">,</span> <span class=\"nx\">i</span><span class=\"p\">){</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nb\">Date</span><span class=\"p\">.</span><span class=\"nx\">parse</span><span class=\"p\">(</span><span class=\"nx\">v</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span> <span class=\"o\">==</span> <span class=\"nb\">Date</span><span class=\"p\">.</span><span class=\"nx\">parse</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">))</span> <span class=\"nx\">values</span><span class=\"p\">.</span><span class=\"nx\">splice</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"p\">});</span>\n  <span class=\"k\">return</span> <span class=\"nx\">values</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n\n<p>今回は自動化はしていませんが、コードはこちらの記事[ <a href=\"http://qiita.com/ik-fib/items/6c35640954c2b04a9287\" id=\"reference-37a5adaecf3d739da032\">google spread sheetに自動更新される日本の祝日シートを作る</a> ]から3割くらいお借りしています。月に一度の自動更新で正確に祝日カレンダーをGoogleから同期させられる手法なのでぜひ読んでみてください。追加点は<code>コード内でイベントの追加と削除機能を実装</code>と<code>ソート機能</code>と<code>スプレッドシートからのカレンダー作成</code>です。</p>\n\n<h2>\n<span id=\"コードの実行\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E5%AE%9F%E8%A1%8C\"><i class=\"fa fa-link\"></i></a>コードの実行</h2>\n\n<p>実行 &gt;&gt; <code>createByGoogleHoliday</code></p>\n\n<p><a href=\"https://camo.qiitausercontent.com/5c4e088fddee9191aea8ab21a004ff7cd178cb1e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f64616161316165632d306630312d666537352d363664342d3335643933636238633865652e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"711\" alt=\"スクリーンショット 2017-03-05 18.21.25.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fdaaa1aec-0f01-fe75-66d4-35d93cb8c8ee.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0df1f4ab6da75be7d058e0fdddf387fb\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/daaa1aec-0f01-fe75-66d4-35d93cb8c8ee.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fdaaa1aec-0f01-fe75-66d4-35d93cb8c8ee.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=385abecb1900ec574d789edf9d174554 1x\" loading=\"lazy\"></a><br>\nこのスクリプトからスプレッドシートなどのGoogle Appsへのアクセス許可を聞かれるのでOKしてください。</p>\n\n<h2>\n<span id=\"スプレッドシートに戻ってみる\" class=\"fragment\"></span><a href=\"#%E3%82%B9%E3%83%97%E3%83%AC%E3%83%83%E3%83%89%E3%82%B7%E3%83%BC%E3%83%88%E3%81%AB%E6%88%BB%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\"><i class=\"fa fa-link\"></i></a>スプレッドシートに戻ってみる</h2>\n\n<p>こんな感じでGoogleカレンダーから取得できてると正解</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/0d65c0876be8fa53b336f7cdf8f865a5419bc9ad/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f30313434333937382d383266392d666163382d633935372d6465323136643535653562392e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"701\" alt=\"スクリーンショット 2017-03-05 18.24.17.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F01443978-82f9-fac8-c957-de216d55e5b9.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ab6ec77f3dc1e135f427186f061a98dd\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/01443978-82f9-fac8-c957-de216d55e5b9.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F01443978-82f9-fac8-c957-de216d55e5b9.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ff33bcac9771d08ae2e0f1233af84d1c 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"手作業入力\" class=\"fragment\"></span><a href=\"#%E6%89%8B%E4%BD%9C%E6%A5%AD%E5%85%A5%E5%8A%9B\"><i class=\"fa fa-link\"></i></a>手作業入力</h2>\n\n<ul>\n<li>手動追記 &gt;&gt; 日付とタイトル\n\n<ul>\n<li>一応どちらも入力してください</li>\n<li>空白行があるとそこで終了</li>\n</ul>\n</li>\n<li>カレンダーの名前 &gt;&gt; 私の会社\n\n<ul>\n<li>私の会社の部分がカレンダーのタイトルになります。</li>\n</ul>\n</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/a252e99a435415acb0f6ec9a42cb7b4381c7539a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f65633632376462372d613433662d316637612d356464382d3266663165653630313237312e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"670\" alt=\"スクリーンショット 2017-03-05 18.28.02.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fec627db7-a43f-1f7a-5dd8-2ff1ee601271.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f22a6bd58c75dbbd1306807c691dc836\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/ec627db7-a43f-1f7a-5dd8-2ff1ee601271.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fec627db7-a43f-1f7a-5dd8-2ff1ee601271.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d13c8ddd66fe8fed0b7479deb1acf462 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"script-edit\" class=\"fragment\"></span><a href=\"#script-edit\"><i class=\"fa fa-link\"></i></a>Script Edit</h2>\n\n<p>ツール &gt;&gt; スクリプトエディタ<br>\nからスクリプトエディタに戻って<br>\n実行 &gt;&gt; createGoogleCalendar</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/2a4153197d790cc09718800618aa450bf8f0be83/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f35396565623864322d336539322d366365312d633432332d6639613165666232343433372e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"699\" alt=\"スクリーンショット 2017-03-05 18.32.53.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F59eeb8d2-3e92-6ce1-c423-f9a1efb24437.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8d985d46070bfe2cd7b23eae078f9b5b\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/59eeb8d2-3e92-6ce1-c423-f9a1efb24437.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F59eeb8d2-3e92-6ce1-c423-f9a1efb24437.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=af1d42f66baa23979287a76cd39a656c 1x\" loading=\"lazy\"></a></p>\n\n<p>作成に時間はかかりますが、カレンダーができました！！！！</p>\n\n<h2>\n<span id=\"google-calendarを見る\" class=\"fragment\"></span><a href=\"#google-calendar%E3%82%92%E8%A6%8B%E3%82%8B\"><i class=\"fa fa-link\"></i></a>Google Calendarを見る</h2>\n\n<p><a href=\"https://camo.qiitausercontent.com/4916c97b1a1b1ffd3ac9989bd24fb252effeab07/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f39343836363936612d343463392d643262352d623963622d3731363631326130656364332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1369\" alt=\"スクリーンショット 2017-03-05 18.36.03.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F9486696a-44c9-d2b5-b9cb-716612a0ecd3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ecb263d78fca85990d165aa69c356428\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/9486696a-44c9-d2b5-b9cb-716612a0ecd3.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F9486696a-44c9-d2b5-b9cb-716612a0ecd3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ab4bf3281638fa1fddf400cab9e88659 1x\" loading=\"lazy\"></a></p>\n\n<p>これでカレンダーができました！！無事[ △休日出勤 ]も春分の日も出力されてるので作成ができました。<br>\n共有とか削除はカレンダー設定からいろいろいじれます。</p>\n\n<h2>\n<span id=\"蛇足ボタンの追加\" class=\"fragment\"></span><a href=\"#%E8%9B%87%E8%B6%B3%E3%83%9C%E3%82%BF%E3%83%B3%E3%81%AE%E8%BF%BD%E5%8A%A0\"><i class=\"fa fa-link\"></i></a>蛇足ボタンの追加</h2>\n\n<p>挿入 &gt;&gt; 図形描画<br>\n<a href=\"https://camo.qiitausercontent.com/dfe15c2306543345817cd4b3e3037181a5f1c2d2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f37656635396263362d623732332d653865612d373561312d3464373361393032643662312e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1213\" alt=\"スクリーンショット 2017-03-05 18.41.19.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F7ef59bc6-b723-e8ea-75a1-4d73a902d6b1.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1e59e1571ca0e077604080fc7f02edb7\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/7ef59bc6-b723-e8ea-75a1-4d73a902d6b1.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F7ef59bc6-b723-e8ea-75a1-4d73a902d6b1.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9787a1a46ba8a5c6abdf71242320a3d4 1x\" loading=\"lazy\"></a></p>\n\n<p>ここからボタン作成ができます。</p>\n\n<p>図形右クリック &gt;&gt; 右上のボタン &gt;&gt; スクリプトの割り当て<br>\n<a href=\"https://camo.qiitausercontent.com/06e5b926f0f321bc899ff11508fffcb23e333d15/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f33383931316134652d373631352d373333302d373464622d3531653732306265363563392e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"865\" alt=\"スクリーンショット 2017-03-05 18.42.43.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F38911a4e-7615-7330-74db-51e720be65c9.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6069726eda82b14ca97108ae068a0033\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/38911a4e-7615-7330-74db-51e720be65c9.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F38911a4e-7615-7330-74db-51e720be65c9.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ab8a8b87d5155b54d434e17314dfc052 1x\" loading=\"lazy\"></a></p>\n\n<p>ここで先程つくったスクリプトを割り当てられます。かっこいらない系。<br>\n[ createGoogleCalendar ]　<br>\n[ createByGoogleHoliday ]</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f381ab8149d898ec3ccd8c60fc8dc961768647bf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f33333864303862302d613361632d653130352d366361302d6330646466613935616162362e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"869\" alt=\"スクリーンショット 2017-03-05 18.45.05.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F338d08b0-a3ac-e105-6ca0-c0ddfa95aab6.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=89d4b478f6d5923c788d324a326acbe5\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/338d08b0-a3ac-e105-6ca0-c0ddfa95aab6.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F338d08b0-a3ac-e105-6ca0-c0ddfa95aab6.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=727580d2092223569f2b45c62475aee1 1x\" loading=\"lazy\"></a></p>\n\n<p>こうするとデータの更新とカレンダーの作成がワンクリックでできるようになります。</p>\n\n<h2>\n<span id=\"以上10分でできる専用カレンダーの作成方法でした\" class=\"fragment\"></span><a href=\"#%E4%BB%A5%E4%B8%8A10%E5%88%86%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E5%B0%82%E7%94%A8%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC%E3%81%AE%E4%BD%9C%E6%88%90%E6%96%B9%E6%B3%95%E3%81%A7%E3%81%97%E3%81%9F\"><i class=\"fa fa-link\"></i></a>以上、10分でできる専用カレンダーの作成方法でした。</h2>\n\n<p>次はこの自社カレンダーを使って、営業日だけ動くSlackボットの作成がしたい~<br>\nあ、Google Apps Scriptだと、コード10行くらいで定期実行してくれるbotが簡単につくれます。コード編終わって落ち着いたら記事書きます。</p>\n\n<hr>\n\n<h1>\n<span id=\"コード編\" class=\"fragment\"></span><a href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E7%B7%A8\"><i class=\"fa fa-link\"></i></a>コード編</h1>\n\n<p>簡単な解説とかいれていきます。私がGAS知ってからチュートリアル的なサンプル作りつつ、1日くらいで作れたので、ゆっくり丁寧にコードを読みといていけばすぐにGAS書けるようになると思います。</p>\n\n<h2>\n<span id=\"googleカレンダーから日本の祝日の取得方法\" class=\"fragment\"></span><a href=\"#google%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC%E3%81%8B%E3%82%89%E6%97%A5%E6%9C%AC%E3%81%AE%E7%A5%9D%E6%97%A5%E3%81%AE%E5%8F%96%E5%BE%97%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>Googleカレンダーから日本の祝日の取得方法</h2>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">コード.js</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"c1\">// Google[日本の祝日]の全日イベントからスプレッドシート作成</span>\n<span class=\"kd\">function</span> <span class=\"nx\">createByGoogleHoliday</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">start</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">end</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"mi\">2019</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">sheet</span> <span class=\"o\">=</span> <span class=\"nx\">SpreadsheetApp</span><span class=\"p\">.</span><span class=\"nx\">getActiveSheet</span><span class=\"p\">();</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">holidays</span> <span class=\"o\">=</span> <span class=\"nx\">getHoliday</span><span class=\"p\">(</span><span class=\"nx\">start</span><span class=\"p\">,</span> <span class=\"nx\">end</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">startRow</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">;</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">range</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">startRow</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nx\">holidays</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">,</span> <span class=\"nx\">holidays</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">length</span><span class=\"p\">);</span>\n  <span class=\"nx\">range</span><span class=\"p\">.</span><span class=\"nx\">setValues</span><span class=\"p\">(</span><span class=\"nx\">holidays</span><span class=\"p\">);</span>\n  <span class=\"nx\">range</span><span class=\"p\">.</span><span class=\"nx\">sort</span><span class=\"p\">([{</span><span class=\"na\">column</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"na\">ascending</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">}]);</span> <span class=\"c1\">// 昇順ソート</span>\n\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/**\n * startDate〜endDateまでの祝日をgoogleカレンダーの「日本の祝日」から取得\n * [日付,祝日名]の多次元配列にした上で返す\n */</span>\n<span class=\"kd\">function</span> <span class=\"nx\">getHoliday</span><span class=\"p\">(</span><span class=\"nx\">start</span><span class=\"p\">,</span> <span class=\"nx\">end</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">cal</span> <span class=\"o\">=</span> <span class=\"nx\">CalendarApp</span><span class=\"p\">.</span><span class=\"nx\">getCalendarById</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">ja.japanese#holiday@group.v.calendar.google.com</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">holidays</span> <span class=\"o\">=</span> <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">getEvents</span><span class=\"p\">(</span><span class=\"nx\">start</span><span class=\"p\">,</span> <span class=\"nx\">end</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">values</span> <span class=\"o\">=</span> <span class=\"p\">[];</span>\n\n  <span class=\"k\">for</span><span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"nx\">holidays</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">values</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"nx\">holidays</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">getStartTime</span><span class=\"p\">(),</span> <span class=\"nx\">holidays</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">getTitle</span><span class=\"p\">()];</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"cm\">/**\n   * 追加と削除機能あり\n   * values.push([new Date(\"2017/1/4\"), \"俺の日\"]);\n   * values = deleteHoliday(values, \"2017/1/4\");\n   */</span>\n\n  <span class=\"k\">return</span> <span class=\"nx\">values</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">deleteHoliday</span><span class=\"p\">(</span><span class=\"nx\">values</span><span class=\"p\">,</span> <span class=\"nx\">date</span><span class=\"p\">){</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">target</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">date</span><span class=\"p\">);</span>\n  <span class=\"nx\">values</span><span class=\"p\">.</span><span class=\"nx\">some</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nx\">v</span><span class=\"p\">,</span> <span class=\"nx\">i</span><span class=\"p\">){</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nb\">Date</span><span class=\"p\">.</span><span class=\"nx\">parse</span><span class=\"p\">(</span><span class=\"nx\">v</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span> <span class=\"o\">==</span> <span class=\"nb\">Date</span><span class=\"p\">.</span><span class=\"nx\">parse</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">))</span> <span class=\"nx\">values</span><span class=\"p\">.</span><span class=\"nx\">splice</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"p\">});</span>\n  <span class=\"k\">return</span> <span class=\"nx\">values</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n</code></pre></div>\n</div>\n\n<h3>\n<span id=\"function-createbygoogleholiday\" class=\"fragment\"></span><a href=\"#function-createbygoogleholiday\"><i class=\"fa fa-link\"></i></a><code>function createByGoogleHoliday()</code>\n</h3>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">var</span> <span class=\"nx\">start</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n<span class=\"kd\">var</span> <span class=\"nx\">end</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"mi\">2019</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n</code></pre></div></div>\n\n<p>Googleの日本の祝日だと2年分くらいしか取得することができないので、この期間で設定しています。<br>\nまたミリ秒までセットしている理由は、<code>deleteHoliday()</code>の部分でミリ秒まで同じなら削除をするみたいな判定しているからです。(ここ書き方わかんなくて適当に実装しました。アドバイスいただけたらうれしいです。)</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">var</span> <span class=\"nx\">sheet</span> <span class=\"o\">=</span> <span class=\"nx\">SpreadsheetApp</span><span class=\"p\">.</span><span class=\"nx\">getActiveSheet</span><span class=\"p\">();</span>\n</code></pre></div></div>\n\n<p>こちらスプレッドシート上のGASから操作しているので簡単にシートのオブジェクトがとれます。<br>\n別のGASからでも<code>SpreadsheetApp.openByUrl(SHEET_URL)</code>とかを使えばオブジェクトを取ってこれます。もしくはopenByIdとか。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">var</span> <span class=\"nx\">holidays</span> <span class=\"o\">=</span> <span class=\"nx\">getHoliday</span><span class=\"p\">(</span><span class=\"nx\">start</span><span class=\"p\">,</span> <span class=\"nx\">end</span><span class=\"p\">);</span>\n</code></pre></div></div>\n\n<p>後で書きますがgetHoliday関数で、ある期間の祝日を、日付とタイトルの配列として返します。<code>[[日付, タイトル], [日付2, タイトル2]]</code>こんな感じ。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">var</span> <span class=\"nx\">startRow</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">;</span>\n</code></pre></div></div>\n\n<p>今回は3行目からデータを挿入していくので。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">var</span> <span class=\"nx\">range</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">startRow</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nx\">holidays</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">,</span> <span class=\"nx\">holidays</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">length</span><span class=\"p\">);</span>\n<span class=\"nx\">range</span><span class=\"p\">.</span><span class=\"nx\">setValues</span><span class=\"p\">(</span><span class=\"nx\">holidays</span><span class=\"p\">);</span>\n<span class=\"nx\">range</span><span class=\"p\">.</span><span class=\"nx\">sort</span><span class=\"p\">([{</span><span class=\"na\">column</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"na\">ascending</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">}]);</span> <span class=\"c1\">// 昇順ソート</span>\n</code></pre></div></div>\n\n<p>まず範囲オブジェクトを作ります。配列の行列と範囲オブジェクトを対応させて、下の表の3行目(日付、タイトルの下)から、値をrange.setValues(holidays)で一気に入れます。</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">1</th>\n<th style=\"text-align: center\">2</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">Googleからの取得</td>\n<td style=\"text-align: center\"></td>\n</tr>\n<tr>\n<td style=\"text-align: center\">日付</td>\n<td style=\"text-align: center\">タイトル</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">day1</td>\n<td style=\"text-align: center\">title1</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">day2</td>\n<td style=\"text-align: center\">title2</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">day3</td>\n<td style=\"text-align: center\">title3</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">day4</td>\n<td style=\"text-align: center\">title4</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">day5</td>\n<td style=\"text-align: center\">title5</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">day6</td>\n<td style=\"text-align: center\">title6</td>\n</tr>\n</tbody>\n</table>\n\n<p>そして<code>range.sort([{column: 1, ascending: true}])</code>でソートしてます。(実は削除も追加もしなかったらもともと昇順です)<br>\ncolumn: で何列目を基準にするか<br>\nascending: trueが昇順、falseが降順</p>\n\n<h3>\n<span id=\"function-getholidaystart-end-\" class=\"fragment\"></span><a href=\"#function-getholidaystart-end-\"><i class=\"fa fa-link\"></i></a>function getHoliday(start, end) {}</h3>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">getHoliday</span><span class=\"p\">(</span><span class=\"nx\">start</span><span class=\"p\">,</span> <span class=\"nx\">end</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">cal</span> <span class=\"o\">=</span> <span class=\"nx\">CalendarApp</span><span class=\"p\">.</span><span class=\"nx\">getCalendarById</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">ja.japanese#holiday@group.v.calendar.google.com</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n\n  <span class=\"kd\">var</span> <span class=\"nx\">holidays</span> <span class=\"o\">=</span> <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">getEvents</span><span class=\"p\">(</span><span class=\"nx\">start</span><span class=\"p\">,</span> <span class=\"nx\">end</span><span class=\"p\">);</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">values</span> <span class=\"o\">=</span> <span class=\"p\">[];</span>\n\n  <span class=\"k\">for</span><span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;</span> <span class=\"nx\">holidays</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">;</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">values</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"nx\">holidays</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">getStartTime</span><span class=\"p\">(),</span> <span class=\"nx\">holidays</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">getTitle</span><span class=\"p\">()];</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"cm\">/**\n   * 追加と削除機能あり\n   * values.push([new Date(\"2017/1/4\"), \"俺の日\"]);\n   * values = deleteHoliday(values, \"2017/1/4\");\n   */</span>\n\n  <span class=\"k\">return</span> <span class=\"nx\">values</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<ul>\n<li>(start, end)で範囲指定する</li>\n<li>CalendarApp.getCalendarByIdで[日本の祝日]を取得</li>\n<li>cal.getEvents(start, end)で[ 日本の祝日 ]のイベント取得\n\n<ul>\n<li>単数データにすると</li>\n<li>.getStartTime()で始まる時間</li>\n<li>.getTitle()でタイトルを取得できるようになる</li>\n</ul>\n</li>\n<li>ここで追加したい時は配列にプッシュするだけ</li>\n<li>deleteHolidayは関数として実装</li>\n</ul>\n\n<h3>\n<span id=\"function-deleteholidayvalues-date\" class=\"fragment\"></span><a href=\"#function-deleteholidayvalues-date\"><i class=\"fa fa-link\"></i></a>function deleteHoliday(values, date){}</h3>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">deleteHoliday</span><span class=\"p\">(</span><span class=\"nx\">values</span><span class=\"p\">,</span> <span class=\"nx\">date</span><span class=\"p\">){</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">target</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nb\">Date</span><span class=\"p\">(</span><span class=\"nx\">date</span><span class=\"p\">);</span>\n  <span class=\"nx\">values</span><span class=\"p\">.</span><span class=\"nx\">some</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(</span><span class=\"nx\">v</span><span class=\"p\">,</span> <span class=\"nx\">i</span><span class=\"p\">){</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nb\">Date</span><span class=\"p\">.</span><span class=\"nx\">parse</span><span class=\"p\">(</span><span class=\"nx\">v</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span> <span class=\"o\">==</span> <span class=\"nb\">Date</span><span class=\"p\">.</span><span class=\"nx\">parse</span><span class=\"p\">(</span><span class=\"nx\">target</span><span class=\"p\">))</span> <span class=\"nx\">values</span><span class=\"p\">.</span><span class=\"nx\">splice</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"p\">});</span>\n  <span class=\"k\">return</span> <span class=\"nx\">values</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>詳細はJavaScriptのsomeを。<br>\ntargetに消したい日のDateオブジェクトを。<br>\nvaluesには[ 日本の祝日 ]データが入っているので、それをすべて検索<br>\n[ Dateオブジェクト, title ]という形式なのでv[0]<br>\nDate.parse()でDate型を変換して比較できるようにしている(もっと良い書き方あるはず)</p>\n\n<h3>\n<span id=\"function-creategooglecalendar\" class=\"fragment\"></span><a href=\"#function-creategooglecalendar\"><i class=\"fa fa-link\"></i></a>function createGoogleCalendar(){}</h3>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">function.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"kd\">function</span> <span class=\"nx\">createGoogleCalendar</span><span class=\"p\">(){</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">title</span><span class=\"p\">,</span> <span class=\"nx\">date</span><span class=\"p\">;</span>\n\n  <span class=\"c1\">// カレンダー名の取得</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">sheet</span> <span class=\"o\">=</span> <span class=\"nx\">SpreadsheetApp</span><span class=\"p\">.</span><span class=\"nx\">getActiveSheet</span><span class=\"p\">();</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">calendarName</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n\n  <span class=\"c1\">// カレンダーの作成と、オブジェクトcalの生成</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">cal</span> <span class=\"o\">=</span> <span class=\"nx\">CalendarApp</span><span class=\"p\">.</span><span class=\"nx\">createCalendar</span><span class=\"p\">(</span><span class=\"nx\">calendarName</span><span class=\"p\">);</span>\n\n  <span class=\"c1\">// Google[日本の祝日]の全日イベントの追加</span>\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getLastRow</span><span class=\"p\">();</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">title</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n    <span class=\"nx\">date</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n<span class=\"err\">　　</span><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">title</span><span class=\"o\">==</span><span class=\"dl\">\"\"</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">date</span> <span class=\"o\">==</span> <span class=\"dl\">\"\"</span><span class=\"p\">)</span> <span class=\"k\">break</span><span class=\"p\">;</span>\n    <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">createAllDayEvent</span><span class=\"p\">(</span><span class=\"nx\">title</span><span class=\"p\">,</span> <span class=\"nx\">date</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"c1\">// [手動追加]の全日イベントの追加</span>\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getLastRow</span><span class=\"p\">();</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">title</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n    <span class=\"nx\">date</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">title</span><span class=\"o\">==</span><span class=\"dl\">\"\"</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">date</span> <span class=\"o\">==</span> <span class=\"dl\">\"\"</span><span class=\"p\">)</span> <span class=\"k\">break</span><span class=\"p\">;</span>\n    <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">createAllDayEvent</span><span class=\"p\">(</span><span class=\"nx\">title</span><span class=\"p\">,</span> <span class=\"nx\">date</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>  \n<span class=\"p\">}</span>\n</code></pre></div>\n</div>\n\n<p>まずはこちら。</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code><span class=\"kd\">var</span> <span class=\"nx\">sheet</span> <span class=\"o\">=</span> <span class=\"nx\">SpreadsheetApp</span><span class=\"p\">.</span><span class=\"nx\">getActiveSheet</span><span class=\"p\">();</span>\n<span class=\"kd\">var</span> <span class=\"nx\">calendarName</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n<span class=\"kd\">var</span> <span class=\"nx\">cal</span> <span class=\"o\">=</span> <span class=\"nx\">CalendarApp</span><span class=\"p\">.</span><span class=\"nx\">createCalendar</span><span class=\"p\">(</span><span class=\"nx\">calendarName</span><span class=\"p\">);</span>\n</code></pre></div></div>\n\n<p>現在のアクティブシートからシートオブジェクトを作成して<br>\nカレンダー名を2行5列のとこから取得して、カレンダーを作成</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><code>  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kd\">var</span> <span class=\"nx\">i</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">;</span> <span class=\"nx\">i</span> <span class=\"o\">&lt;=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getLastRow</span><span class=\"p\">();</span> <span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">title</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n    <span class=\"nx\">date</span> <span class=\"o\">=</span> <span class=\"nx\">sheet</span><span class=\"p\">.</span><span class=\"nx\">getRange</span><span class=\"p\">(</span><span class=\"nx\">i</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">).</span><span class=\"nx\">getValue</span><span class=\"p\">();</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">title</span><span class=\"o\">==</span><span class=\"dl\">\"\"</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nx\">date</span> <span class=\"o\">==</span> <span class=\"dl\">\"\"</span><span class=\"p\">)</span> <span class=\"k\">break</span><span class=\"p\">;</span>\n    <span class=\"nx\">cal</span><span class=\"p\">.</span><span class=\"nx\">createAllDayEvent</span><span class=\"p\">(</span><span class=\"nx\">title</span><span class=\"p\">,</span> <span class=\"nx\">date</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>3行目からシートの最終行まで繰り返す処理<br>\nタイトルを2列目から<br>\n日付を1列目から所得して<br>\nもしどちらも空白ならfor文終了<br>\nタイトルと日付を使って全日イベントを作成。</p>\n\n<h1>\n<span id=\"google-apps-script\" class=\"fragment\"></span><a href=\"#google-apps-script\"><i class=\"fa fa-link\"></i></a>Google Apps Script</h1>\n\n<p>GASはいかがでしたか。かなり便利でいろんな機能が使えそうだと思ってます。</p>\n\n<p>シンタックスハイライト追加プルリクありがとうございます。追加しました！！</p>\n\n<p>.</p>\n","body":"\nなんか公式のやり方があるっぽいのでメモがてら書いておく。\n\nhttps://cloud.google.com/blog/products/g-suite/g-suite-pro-tip-how-to-automatically-add-a-schedule-from-google-sheets-into-calendar\n\n# Google Apps Script [GAS] ガチ勢3日目\nGoogle Apps Scriptすげえ！楽しい！ってなって3日目です。\nこのScript便利だよ、自社のJavaScript書けるエンジニアさんの大切な時間を奪えば~~なんだって~~いろいろできるよって話をしていきます。\n\n##内容\n* 完成品の確認\n* コピペ編\n* コード編\n\n以上3つで構成しようと思っています。\n\n# 完成品の確認\nマイカレンダー >> [ ◯◯株式会社 ] これを作ります。\n<img width=\"1293\" alt=\"スクリーンショット 2017-03-05 16.40.22.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/8de4c6f7-a758-f382-75fe-ce61780f7437.jpeg\">\n## POINT\nGoogleの[ 日本の祝日 ]を元として、自社だけの[ 創立記念日 ]とか[ ~~△休日出勤~~ ]\nとか追加したカレンダーが作れます。\n作るだけならコピペで10分くらいで作れるかと思います。\n一度このスクリプトに慣れれば[声優さんイベントカレンダー]とか[アイドルライブカレンダー]とか[◯◯イベントカレンダー]とかをすぐ作れるようになれます。私、某J系アイドルのコンサート日程をGoogleマイカレンダーに登録しているんですけど、普段は非表示(今日は◯でライブか…いきたい！！ってならないように。)必要なときに表示にしています。\n\n## 使用するサイト・技術など\n* Google Apps(スプレッドシート、カレンダー)を使うので、Googleアカウント\n* Google Apps Script( ≒ JavaScript)\n\n## カレンダーを作成した後の発展先\n後でQiita公開しようと思ってる記事\n> 自社の営業日だけSlackに投稿したりするボット作成\nこれに似たのさっき公開しました[最終営業日に月末の報告しっかりしろよってSlackに投げるやつ](http://qiita.com/ykhirao/items/782e20ab0465533c48f6)\n\n```省略しまくってます.js\nCalendarApp.getCalendarById();\nholidays = cal.getEvents();\nreturn holidays.length != 0;\n```\n自社カレンダーがあるとこれくらいのコード量で、[ 自社が休みかどうか ]の営業日判定がすごくやりやすくなります。\n詳しくはこちら[GoogleAppsScriptで日本の祝日を取得する](http://qiita.com/kamatama_41/items/be40e05524530920a9d9)\n\n> スクレイピングしてせっせとカレンダー作りまくる\n\n先程の[ [◯◯株式会社](https://calendar.google.com/calendar/embed?src=2mjt9uiftvsjtqrrt2tdtq89do%40group.calendar.google.com&ctz=Asia/Tokyo)のカレンダー ]\n<img width=\"862\" alt=\"スクリーンショット 2017-03-05 17.47.10.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/3b866b96-d458-4040-42dc-4ea806275ce9.jpeg\">\n\n実は一般公開も簡単で、趣味のイベント情報の管理人にもすぐなれます。画像右下の[ + Google Calendar ]からカレンダーの追加もすぐできます。趣味友のためにイベント情報ちょっとスクレイピングしてくるわ(どやっ)ってしてくれるといいですね。\n\n# コピペ編\n\n## スプレッドシート作成\n[Google Drive](https://drive.google.com/drive/my-drive)からスプレッドシートを作成してください。\n<img width=\"1145\" alt=\"スクリーンショット 2017-03-05 17.54.17.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/cacc47b2-c845-822b-19ec-bad7bbb8ee1c.jpeg\">\n\n## 表のスタイルをあわせる\n\n| 1 | 2 | 3 | 4 | 5 |\n|:-:|:-:|:-:|:-:|:-:|\n| Googleカレンダーからの取得 |  | 手動追加 |  | カレンダーの名前 |\n| 日付  |  タイトル | 日付  |  タイトル | ◯◯株式会社  |\nまずこちらをコピーして、[ 値のみ貼り付け ]をして、図のような形式にしてください。\n<img width=\"606\" alt=\"スクリーンショット 2017-03-05 18.01.38.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/e705475b-2f77-187c-07d1-2fe5eb68c89b.jpeg\">\n\n## スクリプトエディタを開く\nツール >> スクリプトエディタ \nこちらをクリック。\n<img width=\"602\" alt=\"スクリーンショット 2017-03-05 18.04.38.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6c4f950a-b088-9bb1-261f-fcb1c7350d41.jpeg\">\n\n## スクリプトエディタにコードを貼り付ける\n<img width=\"784\" alt=\"スクリーンショット 2017-03-05 18.08.15.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/c7dd83d1-6299-90b8-c372-fba586be855b.jpeg\">\n1. 左上の名前変更\n1. コード.gsに以下のコードをコピペ\n\n```js\nfunction createGoogleCalendar(){\n  var title, date;\n  \n  // カレンダー名の取得\n  var sheet = SpreadsheetApp.getActiveSheet();\n  var calendarName = sheet.getRange(2, 5).getValue();\n  \n  // カレンダーの作成と、オブジェクトcalの生成\n  var cal = CalendarApp.createCalendar(calendarName);\n  \n  // Google[日本の祝日]の全日イベントの追加\n  for (var i = 3; i <= sheet.getLastRow(); i++) {\n    title = sheet.getRange(i, 2).getValue();\n    date = sheet.getRange(i, 1).getValue();\n　　　　　　　　if (title==\"\" && date == \"\") break;\n    cal.createAllDayEvent(title, date);\n  }\n  \n  // [手動追加]の全日イベントの追加\n  for (var i = 3; i <= sheet.getLastRow(); i++) {\n    title = sheet.getRange(i, 4).getValue();\n    date = sheet.getRange(i, 3).getValue();\n    if (title==\"\" && date == \"\") break;\n    cal.createAllDayEvent(title, date);\n  }  \n}\n\n// Google[日本の祝日]の全日イベントからスプレッドシート作成\nfunction createByGoogleHoliday() {\n\n  var start = new Date(2017, 0, 1, 0, 0, 0, 0);\n  var end = new Date(2019, 0, 1, 0, 0, 0, 0);\n\n  var sheet = SpreadsheetApp.getActiveSheet();\n  var holidays = getHoliday(start, end);\n\n  var startRow = 3;\n\n  var range = sheet.getRange(startRow, 1, holidays.length, holidays[0].length);\n  range.setValues(holidays);\n  range.sort([{column: 1, ascending: true}]); // 昇順ソート\n  \n}\n\n/**\n * startDate〜endDateまでの祝日をgoogleカレンダーの「日本の祝日」から取得\n * [日付,祝日名]の多次元配列にした上で返す\n */\nfunction getHoliday(start, end) {\n  var cal = CalendarApp.getCalendarById(\"ja.japanese#holiday@group.v.calendar.google.com\");\n\n  var holidays = cal.getEvents(start, end);\n  var values = [];\n\n  for(var i = 0; i < holidays.length; i++) {\n    values[i] = [holidays[i].getStartTime(), holidays[i].getTitle()];\n  }\n  \n  /**\n   * 追加と削除機能あり\n   * values.push([new Date(\"2017/1/4\"), \"俺の日\"]);\n   * values = deleteHoliday(values, \"2017/1/4\");\n   */\n  \n  return values;\n}\n\nfunction deleteHoliday(values, date){\n  var target = new Date(date);\n  values.some(function(v, i){\n    if (Date.parse(v[0]) == Date.parse(target)) values.splice(i,1);\n  });\n  return values;\n}\n\n```\n\n今回は自動化はしていませんが、コードはこちらの記事[ [google spread sheetに自動更新される日本の祝日シートを作る](http://qiita.com/ik-fib/items/6c35640954c2b04a9287) \\]から3割くらいお借りしています。月に一度の自動更新で正確に祝日カレンダーをGoogleから同期させられる手法なのでぜひ読んでみてください。追加点は`コード内でイベントの追加と削除機能を実装`と`ソート機能`と`スプレッドシートからのカレンダー作成`です。\n\n## コードの実行\n実行 >> `createByGoogleHoliday`\n\n<img width=\"711\" alt=\"スクリーンショット 2017-03-05 18.21.25.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/daaa1aec-0f01-fe75-66d4-35d93cb8c8ee.jpeg\">\nこのスクリプトからスプレッドシートなどのGoogle Appsへのアクセス許可を聞かれるのでOKしてください。\n\n## スプレッドシートに戻ってみる\nこんな感じでGoogleカレンダーから取得できてると正解\n\n<img width=\"701\" alt=\"スクリーンショット 2017-03-05 18.24.17.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/01443978-82f9-fac8-c957-de216d55e5b9.jpeg\">\n\n## 手作業入力\n* 手動追記 >> 日付とタイトル\n    * 一応どちらも入力してください\n    * 空白行があるとそこで終了\n* カレンダーの名前 >> 私の会社\n    * 私の会社の部分がカレンダーのタイトルになります。\n\n<img width=\"670\" alt=\"スクリーンショット 2017-03-05 18.28.02.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/ec627db7-a43f-1f7a-5dd8-2ff1ee601271.jpeg\">\n\n## Script Edit\n\nツール >> スクリプトエディタ\nからスクリプトエディタに戻って\n実行 >> createGoogleCalendar\n\n<img width=\"699\" alt=\"スクリーンショット 2017-03-05 18.32.53.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/59eeb8d2-3e92-6ce1-c423-f9a1efb24437.jpeg\">\n\n作成に時間はかかりますが、カレンダーができました！！！！\n\n## Google Calendarを見る\n<img width=\"1369\" alt=\"スクリーンショット 2017-03-05 18.36.03.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/9486696a-44c9-d2b5-b9cb-716612a0ecd3.png\">\n\nこれでカレンダーができました！！無事[ △休日出勤 ]も春分の日も出力されてるので作成ができました。\n共有とか削除はカレンダー設定からいろいろいじれます。\n\n## 蛇足ボタンの追加\n挿入 >> 図形描画\n<img width=\"1213\" alt=\"スクリーンショット 2017-03-05 18.41.19.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/7ef59bc6-b723-e8ea-75a1-4d73a902d6b1.jpeg\">\n\nここからボタン作成ができます。\n\n図形右クリック >> 右上のボタン >> スクリプトの割り当て\n<img width=\"865\" alt=\"スクリーンショット 2017-03-05 18.42.43.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/38911a4e-7615-7330-74db-51e720be65c9.jpeg\">\n\nここで先程つくったスクリプトを割り当てられます。かっこいらない系。\n[ createGoogleCalendar ]　\n[ createByGoogleHoliday ]\n\n<img width=\"869\" alt=\"スクリーンショット 2017-03-05 18.45.05.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/338d08b0-a3ac-e105-6ca0-c0ddfa95aab6.jpeg\">\n\nこうするとデータの更新とカレンダーの作成がワンクリックでできるようになります。\n\n## 以上、10分でできる専用カレンダーの作成方法でした。\n\n次はこの自社カレンダーを使って、営業日だけ動くSlackボットの作成がしたい~\nあ、Google Apps Scriptだと、コード10行くらいで定期実行してくれるbotが簡単につくれます。コード編終わって落ち着いたら記事書きます。\n\n***\n# コード編\n簡単な解説とかいれていきます。私がGAS知ってからチュートリアル的なサンプル作りつつ、1日くらいで作れたので、ゆっくり丁寧にコードを読みといていけばすぐにGAS書けるようになると思います。\n\n## Googleカレンダーから日本の祝日の取得方法\n\n```コード.js\n\n// Google[日本の祝日]の全日イベントからスプレッドシート作成\nfunction createByGoogleHoliday() {\n\n  var start = new Date(2017, 0, 1, 0, 0, 0, 0);\n  var end = new Date(2019, 0, 1, 0, 0, 0, 0);\n\n  var sheet = SpreadsheetApp.getActiveSheet();\n  var holidays = getHoliday(start, end);\n\n  var startRow = 3;\n\n  var range = sheet.getRange(startRow, 1, holidays.length, holidays[0].length);\n  range.setValues(holidays);\n  range.sort([{column: 1, ascending: true}]); // 昇順ソート\n  \n}\n\n/**\n * startDate〜endDateまでの祝日をgoogleカレンダーの「日本の祝日」から取得\n * [日付,祝日名]の多次元配列にした上で返す\n */\nfunction getHoliday(start, end) {\n  var cal = CalendarApp.getCalendarById(\"ja.japanese#holiday@group.v.calendar.google.com\");\n\n  var holidays = cal.getEvents(start, end);\n  var values = [];\n\n  for(var i = 0; i < holidays.length; i++) {\n    values[i] = [holidays[i].getStartTime(), holidays[i].getTitle()];\n  }\n  \n  /**\n   * 追加と削除機能あり\n   * values.push([new Date(\"2017/1/4\"), \"俺の日\"]);\n   * values = deleteHoliday(values, \"2017/1/4\");\n   */\n  \n  return values;\n}\n\nfunction deleteHoliday(values, date){\n  var target = new Date(date);\n  values.some(function(v, i){\n    if (Date.parse(v[0]) == Date.parse(target)) values.splice(i,1);\n  });\n  return values;\n}\n\n```\n\n### `function createByGoogleHoliday()`\n\n```js\nvar start = new Date(2017, 0, 1, 0, 0, 0, 0);\nvar end = new Date(2019, 0, 1, 0, 0, 0, 0);\n```\n\nGoogleの日本の祝日だと2年分くらいしか取得することができないので、この期間で設定しています。\nまたミリ秒までセットしている理由は、`deleteHoliday()`の部分でミリ秒まで同じなら削除をするみたいな判定しているからです。(ここ書き方わかんなくて適当に実装しました。アドバイスいただけたらうれしいです。)\n\n```js\nvar sheet = SpreadsheetApp.getActiveSheet();\n```\n\nこちらスプレッドシート上のGASから操作しているので簡単にシートのオブジェクトがとれます。\n別のGASからでも`SpreadsheetApp.openByUrl(SHEET_URL)`とかを使えばオブジェクトを取ってこれます。もしくはopenByIdとか。\n\n```js\nvar holidays = getHoliday(start, end);\n```\n後で書きますがgetHoliday関数で、ある期間の祝日を、日付とタイトルの配列として返します。`[[日付, タイトル], [日付2, タイトル2]]`こんな感じ。\n\n```js\nvar startRow = 3;\n```\n\n今回は3行目からデータを挿入していくので。\n\n```js\nvar range = sheet.getRange(startRow, 1, holidays.length, holidays[0].length);\nrange.setValues(holidays);\nrange.sort([{column: 1, ascending: true}]); // 昇順ソート\n```\n\nまず範囲オブジェクトを作ります。配列の行列と範囲オブジェクトを対応させて、下の表の3行目(日付、タイトルの下)から、値をrange.setValues(holidays)で一気に入れます。\n\n| 1 | 2 |\n|:-:|:-:|\n| Googleからの取得  |  |\n| 日付  | タイトル  |\n| day1  |  title1 |\n| day2  |  title2 |\n| day3  |  title3 |\n| day4  |  title4 |\n| day5  |  title5 |\n| day6  |  title6 |\n\n\nそして`range.sort([{column: 1, ascending: true}])`でソートしてます。(実は削除も追加もしなかったらもともと昇順です)\ncolumn: で何列目を基準にするか\nascending: trueが昇順、falseが降順\n\n### function getHoliday(start, end) {}\n\n```js\nfunction getHoliday(start, end) {\n  var cal = CalendarApp.getCalendarById(\"ja.japanese#holiday@group.v.calendar.google.com\");\n\n  var holidays = cal.getEvents(start, end);\n  var values = [];\n\n  for(var i = 0; i < holidays.length; i++) {\n    values[i] = [holidays[i].getStartTime(), holidays[i].getTitle()];\n  }\n\n  /**\n   * 追加と削除機能あり\n   * values.push([new Date(\"2017/1/4\"), \"俺の日\"]);\n   * values = deleteHoliday(values, \"2017/1/4\");\n   */\n\n  return values;\n}\n```\n\n* (start, end)で範囲指定する\n* CalendarApp.getCalendarByIdで[日本の祝日]を取得\n* cal.getEvents(start, end)で[ 日本の祝日 ]のイベント取得\n    * 単数データにすると\n    * .getStartTime()で始まる時間\n    * .getTitle()でタイトルを取得できるようになる\n* ここで追加したい時は配列にプッシュするだけ\n* deleteHolidayは関数として実装\n\n\n### function deleteHoliday(values, date){}\n\n```js\nfunction deleteHoliday(values, date){\n  var target = new Date(date);\n  values.some(function(v, i){\n    if (Date.parse(v[0]) == Date.parse(target)) values.splice(i,1);\n  });\n  return values;\n}\n```\n\n詳細はJavaScriptのsomeを。\ntargetに消したい日のDateオブジェクトを。\nvaluesには[ 日本の祝日 ]データが入っているので、それをすべて検索\n[ Dateオブジェクト, title ]という形式なのでv[0]\nDate.parse()でDate型を変換して比較できるようにしている(もっと良い書き方あるはず)\n\n### function createGoogleCalendar(){}\n\n```function.js\nfunction createGoogleCalendar(){\n  var title, date;\n\n  // カレンダー名の取得\n  var sheet = SpreadsheetApp.getActiveSheet();\n  var calendarName = sheet.getRange(2, 5).getValue();\n\n  // カレンダーの作成と、オブジェクトcalの生成\n  var cal = CalendarApp.createCalendar(calendarName);\n\n  // Google[日本の祝日]の全日イベントの追加\n  for (var i = 3; i <= sheet.getLastRow(); i++) {\n    title = sheet.getRange(i, 2).getValue();\n    date = sheet.getRange(i, 1).getValue();\n　　if (title==\"\" && date == \"\") break;\n    cal.createAllDayEvent(title, date);\n  }\n\n  // [手動追加]の全日イベントの追加\n  for (var i = 3; i <= sheet.getLastRow(); i++) {\n    title = sheet.getRange(i, 4).getValue();\n    date = sheet.getRange(i, 3).getValue();\n    if (title==\"\" && date == \"\") break;\n    cal.createAllDayEvent(title, date);\n  }  \n}\n```\n\nまずはこちら。\n\n```js\nvar sheet = SpreadsheetApp.getActiveSheet();\nvar calendarName = sheet.getRange(2, 5).getValue();\nvar cal = CalendarApp.createCalendar(calendarName);\n```\n\n現在のアクティブシートからシートオブジェクトを作成して\nカレンダー名を2行5列のとこから取得して、カレンダーを作成\n\n```js\n  for (var i = 3; i <= sheet.getLastRow(); i++) {\n    title = sheet.getRange(i, 2).getValue();\n    date = sheet.getRange(i, 1).getValue();\n    if (title==\"\" && date == \"\") break;\n    cal.createAllDayEvent(title, date);\n  }\n```\n3行目からシートの最終行まで繰り返す処理\nタイトルを2列目から\n日付を1列目から所得して\nもしどちらも空白ならfor文終了\nタイトルと日付を使って全日イベントを作成。\n\n# Google Apps Script\n\nGASはいかがでしたか。かなり便利でいろんな機能が使えそうだと思ってます。\n\nシンタックスハイライト追加プルリクありがとうございます。追加しました！！\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2017-03-05T19:49:45+09:00","group":null,"id":"09ebaedd0f6f0438f422","likes_count":41,"private":false,"reactions_count":0,"stocks_count":65,"tags":[{"name":"HTML","versions":[]},{"name":"JavaScript","versions":[]},{"name":"GoogleAppsScript","versions":[]},{"name":"GAS","versions":[]},{"name":"Slack","versions":[]}],"title":"10分でできる ~ Googleカレンダー[ 自社版 ]を作ってみよう ~ [ Google Apps Script ]","updated_at":"2021-01-13T17:17:31+09:00","url":"https://qiita.com/ykhirao/items/09ebaedd0f6f0438f422","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"追記部分\" class=\"fragment\"></span><a href=\"#%E8%BF%BD%E8%A8%98%E9%83%A8%E5%88%86\"><i class=\"fa fa-link\"></i></a>追記部分</h1>\n\n<p>こちらの記事はレガシーなトークンを使っていますので、<br>\n<a href=\"http://qiita.com/ykhirao/items/3b19ee6a1458cfb4ba21\" id=\"reference-e203b4d0eed8b86ca9a0\">Slack API レガシーじゃないほうのTokenについて</a>に新しい記事を書きました。<br>\nこちらの記事のトークンは「Slackのほぼすべての機能を使えるToken」で、<br>\nここのTokenが流出すればチャンネルの削除とか好き放題できると思います。<br>\nリンク先は「必要な機能にしかアクセス権を与えないToken」になります。</p>\n\n<p>必要な方を選んでお使いください。</p>\n\n<h1>\n<span id=\"slack-api---tokenの場所と取得\" class=\"fragment\"></span><a href=\"#slack-api---token%E3%81%AE%E5%A0%B4%E6%89%80%E3%81%A8%E5%8F%96%E5%BE%97\"><i class=\"fa fa-link\"></i></a>Slack API - Tokenの場所と取得</h1>\n\n<p>作成済みの場合どこにあるかわからなくて<br>\n20分くらい迷ったので同じく迷う方いたらと思って、投稿しておきます。</p>\n\n<h2>\n<span id=\"token作成済\" class=\"fragment\"></span><a href=\"#token%E4%BD%9C%E6%88%90%E6%B8%88\"><i class=\"fa fa-link\"></i></a>token作成済</h2>\n\n<blockquote>\n<p><a href=\"https://api.slack.com\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://api.slack.com</a> &gt;&gt; Custom integrations &gt;&gt; legacy-tokens<br>\nつまりここ &gt;&gt; <a href=\"https://api.slack.com/custom-integrations/legacy-tokens\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://api.slack.com/custom-integrations/legacy-tokens</a></p>\n</blockquote>\n\n<p>チーム名とTokenは隠してますが、ここから再発行とチームすべてのTokenを確認することができます。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/5770689a032eb50e87888b1fba61a62dec591897/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f62383439323665362d316534352d396333622d393838342d3363363432653465323961362e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1040\" alt=\"スクリーンショット 2017-03-05 2.18.47.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fb84926e6-1e45-9c3b-9884-3c642e4e29a6.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2f0f549ab2229cbd7fb79151acee0565\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/b84926e6-1e45-9c3b-9884-3c642e4e29a6.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fb84926e6-1e45-9c3b-9884-3c642e4e29a6.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=da15923334dffa1ecb9a9f8a63455a27 1x\" loading=\"lazy\"></a></p>\n\n<h2>\n<span id=\"token未作成\" class=\"fragment\"></span><a href=\"#token%E6%9C%AA%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>token未作成</h2>\n\n<blockquote>\n<p><a href=\"https://api.slack.com/web\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://api.slack.com/web</a> &gt;&gt; WebAPI &gt;&gt; Authentication<br>\nここ &gt;&gt; <a href=\"https://api.slack.com/web\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://api.slack.com/web</a></p>\n</blockquote>\n\n<p>ここに未作成の場合は [ Create Token ]と出て来るはずなので、作成してみてください。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/ea668b6cf3d98cf63daab7f071cada4681088287/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f31303963353433302d376665632d633466382d616631632d3830333232386331653832342e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1031\" alt=\"スクリーンショット 2017-03-05 2.19.19.jpg\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F109c5430-7fec-c4f8-af1c-803228c1e824.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d7a396cdd2256ec27933c4e303e4ec51\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/109c5430-7fec-c4f8-af1c-803228c1e824.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F109c5430-7fec-c4f8-af1c-803228c1e824.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ab6d8df6ccdfe322654b2c2b525c8917 1x\" loading=\"lazy\"></a></p>\n","body":"# 追記部分\nこちらの記事はレガシーなトークンを使っていますので、\n[Slack API レガシーじゃないほうのTokenについて](http://qiita.com/ykhirao/items/3b19ee6a1458cfb4ba21)に新しい記事を書きました。\nこちらの記事のトークンは「Slackのほぼすべての機能を使えるToken」で、\nここのTokenが流出すればチャンネルの削除とか好き放題できると思います。\nリンク先は「必要な機能にしかアクセス権を与えないToken」になります。\n\n必要な方を選んでお使いください。\n\n# Slack API - Tokenの場所と取得\n作成済みの場合どこにあるかわからなくて\n20分くらい迷ったので同じく迷う方いたらと思って、投稿しておきます。\n\n## token作成済\n> https://api.slack.com >> Custom integrations >> legacy-tokens\nつまりここ >> https://api.slack.com/custom-integrations/legacy-tokens\n\nチーム名とTokenは隠してますが、ここから再発行とチームすべてのTokenを確認することができます。\n\n\n<img width=\"1040\" alt=\"スクリーンショット 2017-03-05 2.18.47.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/b84926e6-1e45-9c3b-9884-3c642e4e29a6.jpeg\">\n\n\n## token未作成\n> https://api.slack.com/web >> WebAPI >> Authentication\nここ >> https://api.slack.com/web\n\nここに未作成の場合は [ Create Token ]と出て来るはずなので、作成してみてください。\n\n<img width=\"1031\" alt=\"スクリーンショット 2017-03-05 2.19.19.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/109c5430-7fec-c4f8-af1c-803228c1e824.jpeg\">\n\n","coediting":false,"comments_count":1,"created_at":"2017-03-05T02:36:04+09:00","group":null,"id":"0d6b9f4a0cc626884dbb","likes_count":188,"private":false,"reactions_count":0,"stocks_count":164,"tags":[{"name":"API","versions":[]},{"name":"GoogleAppsScript","versions":[]},{"name":"Slack","versions":[]},{"name":"slackapi","versions":[]}],"title":"Slack APIのTokenの取得・場所（Legacy tokens）","updated_at":"2021-10-06T21:02:14+09:00","url":"https://qiita.com/ykhirao/items/0d6b9f4a0cc626884dbb","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"最初に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%88%9D%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最初に</h1>\n\n<ul>\n<li>最近ドットインストールのマイナーな動画を見るのにはまっています。</li>\n<li>聞いたことあるけどどんな技術だっけ</li>\n<li>そんなレッスンを私的にまとめました</li>\n<li>全部は載せてません(phpとかjsとかいっぱいあったりするから)</li>\n<li>蛇足解説とかいれます</li>\n<li>\n<code>dotinstall</code> <code>wikipedia</code> <code>me</code>と引用元はいれます</li>\n</ul>\n\n<h4>\n<span id=\"個人的におすすめ\" class=\"fragment\"></span><a href=\"#%E5%80%8B%E4%BA%BA%E7%9A%84%E3%81%AB%E3%81%8A%E3%81%99%E3%81%99%E3%82%81\"><i class=\"fa fa-link\"></i></a>個人的におすすめ</h4>\n\n<ul>\n<li>jekyll -&gt; Markdown記法でのブログ構築などが楽</li>\n<li>Atom -&gt; Dotinstall拡張があって動画見ながらコーディングできるってよ</li>\n</ul>\n\n<h2>\n<span id=\"html入門\" class=\"fragment\"></span><a href=\"#html%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>HTML入門</h2>\n\n<blockquote>\n<p>ホームページやウェブサービスの画面を作る際に必要な、構造的な文書を書く方法について学びます。 <code>dotinstall</code><br>\nウェブ上の文書を記述するためのマークアップ言語である。文章の中に記述することでさまざまな機能を記述設定することができる。 <code>wikipedia</code><br>\nいわゆるホームページの文章の中がこれです！ <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"css入門\" class=\"fragment\"></span><a href=\"#css%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>CSS入門</h2>\n\n<blockquote>\n<p>ホームページの見た目を制御することができるCSSについて基本的な使い方を学んでいきます。 <code>dotinstall</code><br>\nHTML、XMLの表示レイアウトなどの修飾を指定するのための仕様。 <code>wikipedia</code><br>\nHPの色などのスタイルを決める部分。この部分は大きい文字でとか目立たせたいから赤色とか設定する。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"css3入門\" class=\"fragment\"></span><a href=\"#css3%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>CSS3入門</h2>\n\n<blockquote>\n<p>ウェブページの見た目を規定するCSSの最新バージョンであるCSS3について学んでいきます。 <code>dotinstall</code><br>\nHTML や XML の要素をどのように修飾（表示）するかを指示する、W3Cによる仕様の一つ。 <code>wikipedia</code><br>\ncssの進化版。できることが増えた。HTML5+CSS3ができたらホームページは作れる！ <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"javascript入門\" class=\"fragment\"></span><a href=\"#javascript%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>JavaScript入門</h2>\n\n<blockquote>\n<p>主にブラウザに実装されているJavaScriptについて、基本的な使い方を学んでいきます。 <code>dotinstall</code><br>\nJavaScriptとは、プログラミング言語のひとつである。実行環境が主にウェブブラウザに実装され、動的なウェブサイト構築や、リッチインターネットアプリケーションなど高度なユーザインタフェースの開発に用いられる。 <code>wikipedia</code><br>\nHPのクリックしたら画面の色が変わったりとか、メニューが飛び出てきたとか、そういう動きをつけるのに便利！ <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"jquery入門\" class=\"fragment\"></span><a href=\"#jquery%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>jQuery入門</h2>\n\n<blockquote>\n<p>JavaScriptをより簡単に扱うためのライブラリであるjQueryについて、その基本的な使い方を学びます。 <code>dotinstall</code><br>\nウェブブラウザ用のJavaScriptコードをより容易に記述できるようにするために設計された軽量なJavaScriptライブラリである。 <code>wikipedia</code><br>\njavascriptよりコードを書く量が減って便利。すごく。 <code>me</code></p>\n</blockquote>\n\n<h3>\n<span id=\"ここまで私見\" class=\"fragment\"></span><a href=\"#%E3%81%93%E3%81%93%E3%81%BE%E3%81%A7%E7%A7%81%E8%A6%8B\"><i class=\"fa fa-link\"></i></a>ここまで私見</h3>\n\n<p>HTML5 + CSS3 + JavaScript(jQuery)ができたらフロントエンドエンジニアにレベルアップ。フロントはだいたいなんでもできる。その先はphpも覚えてバックエンドも少しかじるか、JavaScript系(react, Angular.js, Node.js)と発展系はたくさんあるので勉強にことかかない。HTMLとCSSとレスポンシブデザイン(現在パソコンとスマホのアクセス数が同じくらいになってるので、モバイルファースト、はやり)を極めてもいい。全サイトの25%を占めるとかいう噂のWordPressができるようになってもいい。勉強の毎日。</p>\n\n<h2>\n<span id=\"bootstrap-30入門\" class=\"fragment\"></span><a href=\"#bootstrap-30%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Bootstrap 3.0入門</h2>\n\n<blockquote>\n<p>モダンなサイトが簡単に作れるCSSフレームワーク、Bootstrapについて基本的な使い方を見ていきます。 <code>dotinstall</code><br>\n ウェブサイトやWebアプリケーションを作成するフロントエンドWebアプリケーションフレームワークである。 <code>wikipedia</code><br>\ncssとか書かなくても、クラスを'btn'ってやったりすると、あら不思議、きれいなほんとと色とスタイルに整えてくれる！(難点はbootstrapを使うとみんな同じデザインっぽくみえる。短期間でぱぱっとサイト作りたいときとかよい。) <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"flexbox入門\" class=\"fragment\"></span><a href=\"#flexbox%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Flexbox入門</h2>\n\n<blockquote>\n<p>複雑なレイアウトをシンプルに記述できるCSSFlexibleBoxLayoutについて見ていきます。 <code>dotinstall</code><br>\nなかった。。。 <code>wikipedia</code><br>\nレスポンシブとの親和性も高いということもあって、早めに使いこなせるようになっておくといいでしょう！ <code>lig</code><br>\nボックスがBootstrapのカラムに似た印象を感じた。固定幅(200px)と可変幅(auto, flex: 1;)のボックスが横並びになるのいい！これ知らなかったからwebkitのcalcで(100%-200px)とか書いてた。World Wide Web Consortium (W3C) がだしてるっぽい、ようするにWeb標準? <code>me</code></p>\n</blockquote>\n\n<h3>\n<span id=\"ここまで私見-1\" class=\"fragment\"></span><a href=\"#%E3%81%93%E3%81%93%E3%81%BE%E3%81%A7%E7%A7%81%E8%A6%8B-1\"><i class=\"fa fa-link\"></i></a>ここまで私見</h3>\n\n<p>レスポンシブデザインにする技術は少しずつ楽になってきてるのかな？<br>\nFlexboxなんてSCSSみたいなもんだと思ってました。</p>\n\n<h2>\n<span id=\"cloud9入門\" class=\"fragment\"></span><a href=\"#cloud9%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Cloud9入門</h2>\n\n<blockquote>\n<p>ブラウザ上の統合開発環境であるCloud9について基本的な使い方を見ていきます。 <code>dotinstall</code><br>\n ... <code>wikipedia</code><br>\nこれも便利。開発環境を自分のMacにいれなくていい。Webで完結する。気に入らなければレポジトリを削除とか。うん。Railsチュートリアルで使われてるやつですね！html, node.js, php+apache, python, Django, c++, wordpress, ruby on rails, blank, Harvard's CS50 いっぱい動く<code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"さくらのvps入門\" class=\"fragment\"></span><a href=\"#%E3%81%95%E3%81%8F%E3%82%89%E3%81%AEvps%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>さくらのVPS入門</h2>\n\n<blockquote>\n<p>さくらインターネット株式会社が提供する「さくらのVPS」の設定方法について解説していきます。 <code>dotinstall</code><br>\nさくらのVPS（仮想専用サーバー）です、最近だとDocker用のもある。たのしそう。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"amazon-web-services入門\" class=\"fragment\"></span><a href=\"#amazon-web-services%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Amazon Web Services入門</h2>\n\n<blockquote>\n<p>Amazonが提供する各種クラウドサービスについてその使い方を説明していきます。 <code>dotinstall</code><br>\nAmazon.comにより提供されているクラウドコンピューティングサービス（ウェブサービス）である。 <code>wikipedia</code><br>\n言わずと知れたAmazon系、アマゾンが営業利益の半分を叩き出すほど<code>techcrunch</code> の人気のwebまわりのなんでも置けるところ。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"heroku入門\" class=\"fragment\"></span><a href=\"#heroku%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Heroku入門</h2>\n\n<blockquote>\n<p>代表的なPaaSであるHerokuについて、その基本的な使い方を学びます。 <code>dotinstall</code><br>\n初期はRubyによるウェブアプリケーションフレームワークRuby on Railsのみのサポートであったが、Java、Node.js、Scala、Clojure、Python、PHPなど複数のプログラミング言語をサポートするようになった。 <code>wikipedia</code><br>\nRailsを本番サーバーにいれる前にぽいっていれてるイメージあったけど、、なんならヘロクに置きっぱのhtmlがまだ動いてるし、トラフィック少ないなら放置でもいいのかも(だめかな) <code>me</code></p>\n</blockquote>\n\n<h3>\n<span id=\"ここまで私見-2\" class=\"fragment\"></span><a href=\"#%E3%81%93%E3%81%93%E3%81%BE%E3%81%A7%E7%A7%81%E8%A6%8B-2\"><i class=\"fa fa-link\"></i></a>ここまで私見</h3>\n\n<p>Cloud9使えばほんとにローカルを汚さずにいろいろできるから便利だし、Herokuも基本無料で使えるし、このあたりのクラウド系のサービスは要チェックです。</p>\n\n<h2>\n<span id=\"php入門\" class=\"fragment\"></span><a href=\"#php%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>PHP入門</h2>\n\n<blockquote>\n<p>高度なウェブアプリケーションを作ることができるPHPについて学んでいきます。 <code>dotinstall</code><br>\n動的にHTMLデータを生成することによって、動的なウェブページを実現することを主な目的としたプログラミング言語、 <code>wikipedia</code><br>\nwebサイトで一番再発実績があるのはphpってphpレシピに書いてたきがする。Java&amp;SurvletとかRailsとかで書くよりもシンプルで規約すくなくて書きやすい気がする。JavaみたいにフォワードとかJavaBeansObjectとかにしなくてなんとなくぽいってデータを渡せるイメージ。その分F5攻撃とか、アクセスルートのトークンチェックとかいろいろ開発のやり方とかあるから、勉強していくと素敵。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"cakephp3入門\" class=\"fragment\"></span><a href=\"#cakephp3%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>CakePHP3入門</h2>\n\n<blockquote>\n<p>PHPのWebアプリケーションフレームワークであるCakePHPについて学んでいきます。 <code>dotinstall</code><br>\nPHPで書かれたオープンソースのWebアプリケーションフレームワークである。先行するRuby on Railsの概念の多くを取り入れており、Rails流の高速開発とPHPの機動性を兼ね備えたフレームワークと言われている。 <code>wikipedia</code><br>\nケーキの管理画面のイメージ。Googleトレンドでみると、cakephpより9倍ららべる(次の項目)のが人気。日本だとCakeのが3倍人気！！まだ使われてサイトが多いっぽいと予想。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"laravel5入門\" class=\"fragment\"></span><a href=\"#laravel5%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Laravel5入門</h2>\n\n<blockquote>\n<p>PHPのWebアプリケーションフレームワークであるLaravelについて学んでいきます。 <code>dotinstall</code><br>\n無料・オープンソースのPHPで書かれたWebアプリケーションフレームワークである。 <code>wikipedia</code><br>\n2013年phpの人気フレームワーク1位(25.85%)、次に人気なのはPhalcon(16.73%) <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"ruby入門\" class=\"fragment\"></span><a href=\"#ruby%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Ruby入門</h2>\n\n<blockquote>\n<p>オブジェクト指向スクリプト言語で定評のあるRubyの基礎を学んでいきます。 <code>dotinstall</code><br>\nまつもとゆきひろ（通称 Matz）により開発されたオブジェクト指向スクリプト言語であり、スクリプト言語が用いられてきた領域でのオブジェクト指向プログラミングを実現する。 また日本で開発されたプログラミング言語としては初めて国際電気標準会議で国際規格に認証された事例となった。 <code>wikipedia</code><br>\n私もよく使う言語。書きやすい、たのしい。あと1年後には、rubyからデータサイエンス系のライブラリ(Python)が扱えるようになるというカンファレンスからの噂？ <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"rspec入門\" class=\"fragment\"></span><a href=\"#rspec%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>RSpec入門</h2>\n\n<blockquote>\n<p>BDDのためのテストフレームワークであるRSpecについて、その使い方を学んでいきます。 <code>dotinstall</code><br>\nビヘイビア駆動開発 (振舞駆動開発; behavior driven development; BDD)とは、プログラム開発手法の一種で、テスト駆動開発(TDD)から派生した物である。 <code>wikipedia</code><br>\nBDDの方のフレームワーク。使ったことない。railsチュートリアルのTDDに苦しめられた。。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"active-record入門\" class=\"fragment\"></span><a href=\"#active-record%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Active Record入門</h2>\n\n<blockquote>\n<p>RubyonRailsの一部として開発されているORマッパーであるActiveRecordについて見ていきます。 <code>dotinstall</code><br>\nActive Recordはデータベースからデータを読み出すためのアプローチである。 <code>wikipedia</code><br>\nDBアクセスはSQL書くっていうより、オブジェクトから操作できる。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"ruby-on-rails-4入門\" class=\"fragment\"></span><a href=\"#ruby-on-rails-4%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Ruby on Rails 4入門</h2>\n\n<blockquote>\n<p>代表的なWebアプリケーションフレームワークであるRubyonRailsについて、その概念と使い方を説明していきます。 <code>dotinstall</code><br>\nRuby on Rails（ルビーオンレイルズ）は、オープンソースのWebアプリケーションフレームワークである。RoRまたは単にRailsと呼ばれる。その名にも示されているようにRubyで書かれている。またModel View Controller（MVC）アーキテクチャに基づいて構築されている。 <code>wikipedia</code><br>\nむつかしい。ruby系のwebアプリケーションを作るなら。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"sinatra入門\" class=\"fragment\"></span><a href=\"#sinatra%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Sinatra入門</h2>\n\n<blockquote>\n<p>Rubyで軽量アプリケーションを作成する際に便利なフレームワーク、Sinatraについて学んでいきます。 <code>dotinstall</code><br>\nRubyで作成されたオープンソースのWebアプリケーションフレームワークである。2007年に公開された。Model View Controller（MVC）には基づかない設計で作成されており、小さく、柔軟性があるプログラミングが可能となるよう意識されている。 <code>wikipedia</code><br>\nrails使わないけどrubyのフレームワークだよ！AppleとかGitHubとかHerokuとかが使ってるよ！ <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"nodejs入門\" class=\"fragment\"></span><a href=\"#nodejs%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Node.js入門</h2>\n\n<blockquote>\n<p>大量のアクセスを高速にさばくことができるNode.jsについて、その基本的な使い方を学んでいきます。 <code>dotinstall</code><br>\nNode.js はイベント化された入出力を扱うUnix系プラットフォーム上のサーバーサイドJavaScript環境である（V8 JavaScriptエンジンで動作する）。Webサーバなどのスケーラブルなネットワークプログラムの記述を意図している <code>wikipedia</code><br>\nフロントエンド言語のJavascriptからの派生でサーバーサイドを扱えるようになった。実行環境。進化してる。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"express入門\" class=\"fragment\"></span><a href=\"#express%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Express入門</h2>\n\n<blockquote>\n<p>Node.js用のWebアプリケーションフレームワークであるExpressについて、基本的な使い方を学びます。 <code>dotinstall</code><br>\nExpressはそのNode.jsでの王道的な開発をスピードアップするためのフレームワークです。 <code>Qiita</code><br>\nNode.jsがフレームワークだと思ってたとか言えない。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"socketio入門\" class=\"fragment\"></span><a href=\"#socketio%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Socket.IO入門</h2>\n\n<blockquote>\n<p>WebSocket周辺の技術を便利に扱うためのライブラリ、Socket.IOについて基本的な使い方を学びます。 <code>dotinstall</code><br>\nWebSocket（ウェブソケット）は、コンピュータ・ネットワーク用の通信規格の1つである。インターネットの標準化団体であるW3CとIETFがウェブサーバーとウェブブラウザとの間の通信のために規定を予定している双方向通信用の技術規格であり、APIはW3Cが、WebSocket プロトコルはIETFが策定に関与している。プロトコルの仕様は RFC 6455。TCP上で動く。 <code>wikipedia</code><br>\nAjaxで頻繁にやりときされるよになって悲鳴をあげてるサーバーサイドの救世主(あってる?) <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"swift-3入門\" class=\"fragment\"></span><a href=\"#swift-3%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Swift 3入門</h2>\n\n<blockquote>\n<p>iOSアプリ開発で使われるプログラミング言語であるSwiftについて見ていきます。 <code>dotinstall</code><br>\nSwift（スウィフト）は、アップルのiOSおよびmacOSのためのプログラミング言語。Worldwide Developers Conference (WWDC) 2014で発表された。アップル製OS上で動作するアプリケーションの開発に従来から用いられていたObjective-CやObjective-C++、C言語と共存することが意図されている[3]。 <code>wikipedia</code><br>\niPhoneアプリ開発に使うモダンな言語。かたづけとか超厳しいけど、そのおかげでバグが減ってるっぽい。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"androidアプリ開発入門\" class=\"fragment\"></span><a href=\"#android%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Androidアプリ開発入門</h2>\n\n<blockquote>\n<p>携帯情報端末向けのOSであるAndroidを使い、アプリを作る方法について学んでいきます。 <code>dotinstall</code><br>\nAndroid (Java)java。javaってなんでもできるよね。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"basic入門\" class=\"fragment\"></span><a href=\"#basic%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>BASIC入門</h2>\n\n<blockquote>\n<p>1970年代に発売されたパソコンに搭載されていた昔なつかしのプログラミング言語です。 <code>dotinstall</code><br>\nBASIC（ベーシック）は手続き型プログラミング言語のひとつ。<br>\n名前は「beginner's all-purpose symbolic instruction code」（「初心者向け汎用記号命令コード」を意味する）の頭字語である。 <code>wikipedia</code><br>\n 英語っぽい。大文字のイメージ、後10列から25に飛ばしたり、飛んでるイメージ。  <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"c言語入門\" class=\"fragment\"></span><a href=\"#c%E8%A8%80%E8%AA%9E%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>C言語入門</h2>\n\n<blockquote>\n<p>OSを作るために開発され、多くのプログラミング言語に影響を与えているC言語の基礎について説明していきます。 <code>dotinstall</code><br>\nC言語（シーげんご）は、1972年にAT&amp;Tベル研究所のデニス・リッチーが主体となって開発したプログラミング言語である。英語圏では単に C と呼んでおり、日本でも文書や文脈によっては同様に C と呼ぶことがある。 <code>wikipedia</code><br>\n有名。大学だと一番にこれをやるキガスル。C言語のポインタ理解してるひとはいいよね〜〜って年上の方がよく言ってるイメージがある。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"c入門\" class=\"fragment\"></span><a href=\"#c%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>C#入門</h2>\n\n<blockquote>\n<p>マイクロソフトが開発したプログラミング言語であるC#について学んでいきます。 <code>dotinstall</code><br>\nC#（シーシャープ）とは、マイクロソフトが開発したマルチパラダイムプログラミング言語。強い型付け、命令型、宣言型、手続き型、関数型、ジェネリック、オブジェクト指向の要素を持つ。<br>\nマイクロソフトのソフトウェアフレームワークである.NET Frameworkとともに作られ、Ecma International[1]および国際標準化機構 (ISO)[2] によって標準化されており、日本においても日本工業規格 (JIS)[3]によって採択された。 <code>wikipedia</code><br>\nUnityとか使える。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"cobol入門\" class=\"fragment\"></span><a href=\"#cobol%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>COBOL入門</h2>\n\n<blockquote>\n<p>事務処理向けに開発されたCOBOLについて、基本的な使い方を学びます。 <code>dotinstall</code><br>\nCOBOL（コボル）は、1959年に事務処理用に開発されたプログラミング言語である。名前は「Common Business Oriented Language」（共通事務処理用言語）に由来する。 <code>wikipedia</code><br>\n他の言語と違って10進法だから銀行のシステムとかに使われてたイメージ。今は金額の誤差の許されない案件でもJavaに置き換わりつつあるような。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"go言語入門\" class=\"fragment\"></span><a href=\"#go%E8%A8%80%E8%AA%9E%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Go言語入門</h2>\n\n<blockquote>\n<p>Googleが中心となって開発しているモダンなプログラミング言語、Goについて学びます。 <code>dotinstall</code><br>\nGoはプログラミング言語のひとつ。Googleによって開発されており[4]、設計にロブ・パイク、ケン・トンプソンらが関わっている。<br>\n主な特徴として、軽量スレッディングのための機能、Pythonのような動的型付け言語のようなプログラミングの容易性、などがある。Go処理系としてはコンパイラのみが開発されている。 <code>wikipedia</code><br>\nGoogle好きならPythonとかGo言語を扱ってるといいかも。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"java-8入門\" class=\"fragment\"></span><a href=\"#java-8%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Java 8入門</h2>\n\n<blockquote>\n<p>さまざまな用途で幅広く使われているオブジェクト指向型言語、Javaについて学んでいきます。 <code>dotinstall</code><br>\nJava（ジャバ）は、狭義ではオブジェクト指向プログラミング言語Javaであり、広義ではプログラミング言語Javaのプログラムの実行環境および開発環境をいう。本稿ではプログラミング言語としての Java、および関連する技術や設計思想、およびJava言語の実行環境として見たJavaプラットフォームについて解説する。クラスライブラリなどを含めた、Javaバイトコードの実行環境と開発環境（広義のJava）については、Javaプラットフォームを参照。また、言語の文法に関してはJavaの文法を参照。 <code>wikipedia</code><br>\nJSP&amp;Survlet(スッキリJava)で作ったシステムのおかげでJavaの考え方が少しわかったきがする。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"scala入門\" class=\"fragment\"></span><a href=\"#scala%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Scala入門</h2>\n\n<blockquote>\n<p>オブジェクト指向と関数型プログラミングの性質をあわせもつScalaについて学んでいきます。 <code>dotinstall</code><br>\nScala（スカラ(skah-lah[1]）はオブジェクト指向言語と関数型言語の特徴を統合したマルチパラダイムのプログラミング言語である。名前の「Scala」は英語の「scalable language」に由来するものである。 <code>wikipedia</code><br>\nJava仮想マシンで動くって。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"kotlin入門\" class=\"fragment\"></span><a href=\"#kotlin%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Kotlin入門</h2>\n\n<blockquote>\n<p>Android開発で人気の、Javaをより安全かつ簡潔に書くことができるKotlinについて見ていきます。 <code>dotinstall</code><br>\nKotlin（ことりん、コトリン）は、ジェットブレインズ社のアンドリー・ブレスラフ、ドミトリー・ジェメロフが開発した、静的型付けのオブジェクト指向プログラミング言語である。 <code>wikipedia</code><br>\n名前がかわいくて気になっているけどまだ動画を見れていない。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"awk入門\" class=\"fragment\"></span><a href=\"#awk%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>AWK入門</h2>\n\n<blockquote>\n<p>効率的にテキスト処理を行うことができるAWKについて、その使い方を学びます。 <code>dotinstall</code><br>\nAWK（オーク）は、UNIX 上で開発されたプログラミング言語で、デフォルトでは改行でレコードが区切られ、各レコードのフィールドは空白類（スペースの他、タブなど）で区切られているようなテキストファイルを扱えるが、カスタマイズも可能であり、また文字列と数値を扱うプログラミングも可能である。 <code>wikipedia</code><br>\nこう、なんか、こういう技術も知っとかないととは思っても、rubyでコード書いちゃうんだよな。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"lua入門\" class=\"fragment\"></span><a href=\"#lua%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Lua入門</h2>\n\n<blockquote>\n<p>軽量かつ高速で、組み込みが容易なスクリプト言語、Luaについて解説していきます。 <code>dotinstall</code><br>\nLua（ルア）は、リオデジャネイロ・カトリカ大学の、主としてDepartment of Computer Science（コンピュータ科学科）and・or Computer Graphics Technology Group (Tecgraf) に属する、Roberto Ierusalimschy, Waldemar Celes, Luiz Henrique de Figueiredo らによって設計開発されたスクリプト言語およびその処理系の実装である。<br>\n手続き型言語として、また、プロトタイプベースのオブジェクト指向言語としても利用する事が出来、関数型言語、データ駆動型としての要素も併せ持っている。<br>\nLuaという名前は、ポルトガル語の月に由来する。 <code>wikipedia</code><br>\n変数に型のないスクリプト言語では最速の言語・処理系であるとされており、rubyはわかるけど、pythonより早いってすごいな。Luaは、C言語のホストプログラムに組み込まれるって。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"markdown記法入門\" class=\"fragment\"></span><a href=\"#markdown%E8%A8%98%E6%B3%95%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Markdown記法入門</h2>\n\n<blockquote>\n<p>読み書きしやすいテキストを構造化された文書に変換するためのフォーマットであるMarkdown記法について学びます。 <code>dotinstall</code><br>\nMarkdown（マークダウン）は、文書を記述するための軽量マークアップ言語のひとつである。本来はプレーンテキスト形式で手軽に書いた文書からHTMLを生成するために開発されたものである。しかし、現在ではHTMLのほかパワーポイント形式やLATEX形式のファイルへ変換するソフトウェア（コンバータ）も開発されている。各コンバータの開発者によって多様な拡張が施されるため、各種の方言が存在する。 <code>wikipedia</code><br>\nめっちゃ大好き。文章を書きたくなる！ <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"perl入門\" class=\"fragment\"></span><a href=\"#perl%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Perl入門</h2>\n\n<blockquote>\n<p>テキスト処理から大規模なシステム開発まで対応できるPerlについて、その基礎を学びます。 <code>dotinstall</code><br>\nPerl（パール）とは、ラリー・ウォールによって開発されたプログラミング言語である。実用性と多様性を重視しており、C言語やsed、awk、シェルスクリプトなど他のプログラミング言語の優れた機能を取り入れている。ウェブ・アプリケーション、システム管理、テキスト処理などのプログラムを書くのに広く用いられている。<br>\n言語処理系としてのperlはフリーソフトウェアである。Artistic LicenseおよびGPLのもとで配布されており、誰でもどちらかのライセンスを選択して利用することができる。UNIXやWindowsなど多くのプラットフォーム上で動作する。 <code>wikipedia</code><br>\n正規表現とかテキストいじるのに強いイメージ <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"processing入門\" class=\"fragment\"></span><a href=\"#processing%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Processing入門</h2>\n\n<blockquote>\n<p>デザイナーやアーティスト向けのプログラミング言語であるProcessingについて基本的な使い方を学びます。 <code>dotinstall</code><br>\nProcessing（プロセシング）は、キャセイ・レアス（英語版）（Casey Reas）とベンジャミン・フライ（英語版）（Benjamin Fry）によるオープンソースプロジェクトであり、かつてはMITメディアラボで開発されていた。電子アートとビジュアルデザインのためのプログラミング言語であり、統合開発環境である。アーティストによるコンテンツ制作作業のために、詳細な設定を行う関数を排除している。 視覚的なフィードバックが即座に得られるため、初心者がプログラミングを学習するのに適しており、電子スケッチブックの基盤としても利用できる。Java を単純化し、グラフィック機能に特化した言語といえる。 <code>wikipedia</code><br>\nJava、そしてIDE、そして初心者向け、グラフィカル、、気になる <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"p5js入門\" class=\"fragment\"></span><a href=\"#p5js%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>p5.js入門</h2>\n\n<blockquote>\n<p>ビジュアルコーディングツールであるProcessingをJavaScriptに移植したp5.jsについて学んでいきます。 <code>dotinstall</code><br>\n... <code>wikipedia</code><br>\njavascriptなのでJavaとかの環境がいらないので導入は楽かも <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"python-3入門\" class=\"fragment\"></span><a href=\"#python-3%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Python 3入門</h2>\n\n<blockquote>\n<p>データ解析や機械学習などにも利用される、シンプルなオブジェクト指向型言語であるPythonについて見ていきます。 <code>dotinstall</code><br>\nPython（パイソン）は、汎用のプログラミング言語である。コードがシンプルで扱いやすく設計され、C言語などに比べて、さまざまなプログラムを分かりやすく、少ないコード行数で書けるといった特徴がある。[12][13]。 <code>wikipedia</code><br>\n便利。計算とか。データサイエンティストとか。Djangoじゃんご、Tornado、IoTデバイスへのアクセスとかもC経由Pythonでかけたり。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"r言語入門\" class=\"fragment\"></span><a href=\"#r%E8%A8%80%E8%AA%9E%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>R言語入門</h2>\n\n<blockquote>\n<p>統計解析用のプログラミング言語であるR言語について、基本的な使い方を見ていきます。 <code>dotinstall</code><br>\nR言語（あーるげんご）はオープンソース・フリーソフトウェアの統計解析向けのプログラミング言語及びその開発実行環境である。<br>\nR言語はニュージーランドのオークランド大学のRoss IhakaとRobert Clifford Gentlemanにより作られた。現在ではR Development Core Team（S言語開発者であるJohn M. Chambersも参画している[1]。）によりメンテナンスと拡張がなされている。<br>\nR言語のソースコードは主にC言語、FORTRAN、そしてRによって開発された。<br>\nなお、R言語の仕様を実装した処理系の呼称名はプロジェクトを支援するフリーソフトウェア財団によれば『GNU R』である[2]が、他の実装形態が存在しないために日本語での慣用的呼称に倣って、当記事では、仕様・実装を纏めて適宜にR言語や単にR等と呼ぶ。 <code>wikipedia</code><br>\n大学とかの学術機関でよく使われているイメージある。Pythonとかあんまり聞いたことなかったけどRはよくデータ解析の話題になって、使い方わかんねえ、、っていつもみんなで言い合ってた印象。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"smalltalk入門\" class=\"fragment\"></span><a href=\"#smalltalk%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Smalltalk入門</h2>\n\n<blockquote>\n<p>純粋オブジェクト指向言語として他言語に大きな影響を与えたSmalltalkについて解説していきます。 <code>dotinstall</code><br>\nSmalltalk（スモールトーク）は、Simula のオブジェクト（およびクラス）、LISPの徹底した動的性、LOGO のタートル操作や描画機能に、アラン・ケイの「メッセージング」というアイデアを組み合わせて作られたクラスベースの純粋オブジェクト指向プログラミング言語、および、それによって記述構築された統合化プログラミング環境の呼称。<br>\nSmalltalk で一語であり、「Small Talk」「SmallTalk」などは誤りである。 <code>wikipedia</code><br>\nLispという文字が見えたので気になった。勉強しよう。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"typescript入門\" class=\"fragment\"></span><a href=\"#typescript%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>TypeScript入門</h2>\n\n<blockquote>\n<p>JavaScriptの構文を拡張し、大規模開発にも使えるようにしたプログラミング言語、TypeScriptについて見ていきます。 <code>dotinstall</code><br>\nTypeScript はマイクロソフトによって開発され、メンテナンスされているフリーでオープンソースのプログラミング言語である。TypeScript は JavaScript に対して、省略も可能な静的型付けとクラスベースオブジェクト指向を加えた厳密なスーパーセットとなっている。C# のリードアーキテクトであり、DelphiとTurbo Pascalの開発者でもあるアンダース・ヘルスバーグが TypeScript の開発に関わっている。TypeScriptはクライアントサイド、あるいはサーバサイド(Node.js）で実行されるJavaScriptアプリケーションの開発に利用できる。 <code>wikipedia</code><br>\njs <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"pascal入門\" class=\"fragment\"></span><a href=\"#pascal%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Pascal入門</h2>\n\n<blockquote>\n<p>教育用プログラミング言語として開発されたPascalについて基本的な使い方を見ていきます。 <code>dotinstall</code><br>\nPascal（パスカル）は、構造化された初期の代表的なプログラミング言語。<br>\nPascal は、1970年にスイスのチューリッヒ工科大学のニクラウス・ヴィルトが教育用プログラミング言語として開発し、ALGOL の影響を受けた簡素で厳密な構造化言語仕様を持つ。教育目的で広まり、実用的にも初期の TeX や Macintosh の オペレーティングシステム、アプリケーションの記述も Pascal である。<br>\nドナルド・クヌースの TeX プログラムは文芸的プログラミングシステムのWEBで書かれ、そこから文書と Pascal プログラムを生成する。現在でもパーソナルコンピュータ上の処理系が多数あり、多くの他のプログラミング言語、およびハードウェア記述言語の源泉になっている。名前は、世界で最初の機械式計算機を発明したブレーズ・パスカルの名前に因んだものである[1]。 <code>wikipedia</code><br>\n教育用 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"ada入門\" class=\"fragment\"></span><a href=\"#ada%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Ada入門</h2>\n\n<blockquote>\n<p>米国の国防総省が中心となって作ったプログラミング言語、Adaについて見ていきます。 <code>dotinstall</code><br>\nAda（エイダ）は、強力な言語機能を豊富に持ち、高度な型の体系をもつ、プログラミング言語の一つである。構文はAlgol系である。<br>\n史上初のプログラマとされるエイダ・ラブレスの名前にちなんでAdaと命名されているため、ADAと表記するのは誤り。<br>\nフリーのコンパイラとしては、GNATなどがある。<br>\nボーイング777や、F-22戦闘機の制御ソフトウェアはAdaによって書かれている。 <code>wikipedia</code><br>\nボーイング777!!!!!!!かっけえこの言語。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"mongodb入門\" class=\"fragment\"></span><a href=\"#mongodb%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>MongoDB入門</h2>\n\n<blockquote>\n<p>ドキュメント指向データベースであるMongoDBについてその使い方を見ていきます。 <code>dotinstall</code><br>\nMongoDBは、オープンソースのドキュメント指向データベースである。C++言語で記述されており、開発とサポートはMongoDB Inc.によって行なわれている。[2] <code>wikipedia</code><br>\nNoSQL。 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"mysql入門\" class=\"fragment\"></span><a href=\"#mysql%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>MySQL入門</h2>\n\n<blockquote>\n<p>もっとも人気の高いデータベース管理システムのうちの一つであるMySQLについて、その使い方の基礎を学びます。 <code>dotinstall</code><br>\nMySQL（まい・えすきゅーえる）は、オープンソースで公開されている関係データベース管理システム (RDBMS) の一つである。 <code>wikipedia</code><br>\n一番人気 <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"postgresql入門\" class=\"fragment\"></span><a href=\"#postgresql%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>PostgreSQL入門</h2>\n\n<blockquote>\n<p>オープンソースで高機能なデータベースシステムであるPostgreSQLについて、その基本的な使い方を学んでいきます。 <code>dotinstall</code><br>\nPostgreSQL（ぽすとぐれすきゅーえる: 発音例）はオープンソースのオブジェクト関係データベース管理システム (ORDBMS) である。その名称は Ingres の後継を意味する「Post-Ingres」に由来している。「Postgres」や「ポスグレ」と呼ばれることも多い。 <code>wikipedia</code><br>\n型変換のチェックが厳しいイメージ <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"redis入門\" class=\"fragment\"></span><a href=\"#redis%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>Redis入門</h2>\n\n<blockquote>\n<p>データ構造サーバーとも呼ばれるインメモリデータベースのRedisについて説明していきます。 <code>dotinstall</code><br>\nRedisとは「remote dictionary server」から名前が付けられたオープンソースのkey-valueデータストアです。 MemcacheDB等のKVSとの最大の違いは、格納するバリューがデータ構造というところです。 <code>ameblo</code><br>\nつまり解説は　<a href=\"http://qiita.com/search?q=Redis%E3%80%80%E3%81%A7%E3%81%8A%E9%A1%98%E3%81%84%E3%81%97%E3%81%BE%E3%81%99%E3%80%82%E3%82%8F%E3%81%8B%E3%82%93%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%80%82\" class=\"autolink\">http://qiita.com/search?q=Redis　でお願いします。わかんなかった。</a> <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"sqlite入門\" class=\"fragment\"></span><a href=\"#sqlite%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>SQLite入門</h2>\n\n<blockquote>\n<p>スマートフォンやブラウザなどで採用されている、軽量データベースのSQLiteについて学んでいきます。 <code>dotinstall</code><br>\n <code>wikipedia</code><br>\nこの前show databases;ってやって怒られた。exit?.exit! <code>me</code></p>\n</blockquote>\n\n<h2>\n<span id=\"angularjs入門\" class=\"fragment\"></span><a href=\"#angularjs%E5%85%A5%E9%96%80\"><i class=\"fa fa-link\"></i></a>AngularJS入門</h2>\n\n<blockquote>\n<p>JavaScriptのMVCフレームワークであるAngularJSについてその使い方の基礎を解説していきます。 <code>dotinstall</code><br>\nAngularJS（アンギュラージェイエス）、または Angular は、Googleと個人や企業のコミュニティによって開発されている、完全にJavaScriptで書かれたオープンソースのフロントエンドWebアプリケーションフレームワークである。MIT Licenseでライセンスされたフリーソフトウェアである。シングルページアプリケーションの開発において直面する多くの問題に取り組んでいる。JavaScriptコンポーネントは、クロスプラットフォームなモバイルアプリ開発用フレームワークであるApache Cordovaを補完する。クライアントサイド用のMVCおよびMVVMアーキテクチャを、リッチインターネットアプリケーションで一般的に用いられるコンポーネント群とともに提供することにより、そのようなアプリの開発とテストを簡単にすることを目的としている。<br>\nAngularJSはシングルページアプリケーション（英語版） (SPA) の開発が可能なフレームワークで、一つのフレームワーク内で全ての機能が完結するフルスタックフレームワークであることが特徴として挙げられる。[1] <code>wikipedia</code><br>\nGoogle. JSがかなり進化してる。 <code>me</code></p>\n</blockquote>\n\n<hr>\n\n<h1>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h1>\n\n<p>ほらあなたもドットインストールが見たくなってきた！<br>\nれっつごー！</p>\n\n<p>.</p>\n","body":"# 最初に\n* 最近ドットインストールのマイナーな動画を見るのにはまっています。\n* 聞いたことあるけどどんな技術だっけ\n* そんなレッスンを私的にまとめました\n* 全部は載せてません(phpとかjsとかいっぱいあったりするから)\n* 蛇足解説とかいれます\n* `dotinstall` `wikipedia` `me`と引用元はいれます\n\n#### 個人的におすすめ\n* jekyll -> Markdown記法でのブログ構築などが楽\n* Atom -> Dotinstall拡張があって動画見ながらコーディングできるってよ\n\n## HTML入門\n> ホームページやウェブサービスの画面を作る際に必要な、構造的な文書を書く方法について学びます。 `dotinstall`\n> ウェブ上の文書を記述するためのマークアップ言語である。文章の中に記述することでさまざまな機能を記述設定することができる。 `wikipedia`\n> いわゆるホームページの文章の中がこれです！ `me`\n\n## CSS入門\n> ホームページの見た目を制御することができるCSSについて基本的な使い方を学んでいきます。 `dotinstall`\n> HTML、XMLの表示レイアウトなどの修飾を指定するのための仕様。 `wikipedia`\n> HPの色などのスタイルを決める部分。この部分は大きい文字でとか目立たせたいから赤色とか設定する。 `me`\n\n## CSS3入門\n> ウェブページの見た目を規定するCSSの最新バージョンであるCSS3について学んでいきます。 `dotinstall`\n> HTML や XML の要素をどのように修飾（表示）するかを指示する、W3Cによる仕様の一つ。 `wikipedia`\n> cssの進化版。できることが増えた。HTML5+CSS3ができたらホームページは作れる！ `me`\n\n## JavaScript入門\n> 主にブラウザに実装されているJavaScriptについて、基本的な使い方を学んでいきます。 `dotinstall`\n> JavaScriptとは、プログラミング言語のひとつである。実行環境が主にウェブブラウザに実装され、動的なウェブサイト構築や、リッチインターネットアプリケーションなど高度なユーザインタフェースの開発に用いられる。 `wikipedia`\n> HPのクリックしたら画面の色が変わったりとか、メニューが飛び出てきたとか、そういう動きをつけるのに便利！ `me`\n\n## jQuery入門\n> JavaScriptをより簡単に扱うためのライブラリであるjQueryについて、その基本的な使い方を学びます。 `dotinstall`\n> ウェブブラウザ用のJavaScriptコードをより容易に記述できるようにするために設計された軽量なJavaScriptライブラリである。 `wikipedia`\n> javascriptよりコードを書く量が減って便利。すごく。 `me`\n\n### ここまで私見\nHTML5 + CSS3 + JavaScript(jQuery)ができたらフロントエンドエンジニアにレベルアップ。フロントはだいたいなんでもできる。その先はphpも覚えてバックエンドも少しかじるか、JavaScript系(react, Angular.js, Node.js)と発展系はたくさんあるので勉強にことかかない。HTMLとCSSとレスポンシブデザイン(現在パソコンとスマホのアクセス数が同じくらいになってるので、モバイルファースト、はやり)を極めてもいい。全サイトの25%を占めるとかいう噂のWordPressができるようになってもいい。勉強の毎日。\n\n\n## Bootstrap 3.0入門\n> モダンなサイトが簡単に作れるCSSフレームワーク、Bootstrapについて基本的な使い方を見ていきます。 `dotinstall`\n>  ウェブサイトやWebアプリケーションを作成するフロントエンドWebアプリケーションフレームワークである。 `wikipedia`\n> cssとか書かなくても、クラスを'btn'ってやったりすると、あら不思議、きれいなほんとと色とスタイルに整えてくれる！(難点はbootstrapを使うとみんな同じデザインっぽくみえる。短期間でぱぱっとサイト作りたいときとかよい。) `me`\n\n## Flexbox入門\n> 複雑なレイアウトをシンプルに記述できるCSSFlexibleBoxLayoutについて見ていきます。 `dotinstall`\n> なかった。。。 `wikipedia`\n> レスポンシブとの親和性も高いということもあって、早めに使いこなせるようになっておくといいでしょう！ `lig`\n> ボックスがBootstrapのカラムに似た印象を感じた。固定幅(200px)と可変幅(auto, flex: 1;)のボックスが横並びになるのいい！これ知らなかったからwebkitのcalcで(100%-200px)とか書いてた。World Wide Web Consortium (W3C) がだしてるっぽい、ようするにWeb標準? `me`\n\n### ここまで私見\nレスポンシブデザインにする技術は少しずつ楽になってきてるのかな？\nFlexboxなんてSCSSみたいなもんだと思ってました。\n\n## Cloud9入門\n> ブラウザ上の統合開発環境であるCloud9について基本的な使い方を見ていきます。 `dotinstall`\n>  ... `wikipedia`\n> これも便利。開発環境を自分のMacにいれなくていい。Webで完結する。気に入らなければレポジトリを削除とか。うん。Railsチュートリアルで使われてるやつですね！html, node.js, php+apache, python, Django, c++, wordpress, ruby on rails, blank, Harvard's CS50 いっぱい動く`me`\n\n\n## さくらのVPS入門\n> さくらインターネット株式会社が提供する「さくらのVPS」の設定方法について解説していきます。 `dotinstall`\n> さくらのVPS（仮想専用サーバー）です、最近だとDocker用のもある。たのしそう。 `me`\n\n## Amazon Web Services入門\n> Amazonが提供する各種クラウドサービスについてその使い方を説明していきます。 `dotinstall`\n> Amazon.comにより提供されているクラウドコンピューティングサービス（ウェブサービス）である。 `wikipedia`\n> 言わずと知れたAmazon系、アマゾンが営業利益の半分を叩き出すほど`techcrunch` の人気のwebまわりのなんでも置けるところ。 `me`\n\n## Heroku入門\n> 代表的なPaaSであるHerokuについて、その基本的な使い方を学びます。 `dotinstall`\n> 初期はRubyによるウェブアプリケーションフレームワークRuby on Railsのみのサポートであったが、Java、Node.js、Scala、Clojure、Python、PHPなど複数のプログラミング言語をサポートするようになった。 `wikipedia`\n> Railsを本番サーバーにいれる前にぽいっていれてるイメージあったけど、、なんならヘロクに置きっぱのhtmlがまだ動いてるし、トラフィック少ないなら放置でもいいのかも(だめかな) `me`\n\n### ここまで私見\nCloud9使えばほんとにローカルを汚さずにいろいろできるから便利だし、Herokuも基本無料で使えるし、このあたりのクラウド系のサービスは要チェックです。\n\n## PHP入門\n> 高度なウェブアプリケーションを作ることができるPHPについて学んでいきます。 `dotinstall`\n> 動的にHTMLデータを生成することによって、動的なウェブページを実現することを主な目的としたプログラミング言語、 `wikipedia`\n> webサイトで一番再発実績があるのはphpってphpレシピに書いてたきがする。Java&SurvletとかRailsとかで書くよりもシンプルで規約すくなくて書きやすい気がする。JavaみたいにフォワードとかJavaBeansObjectとかにしなくてなんとなくぽいってデータを渡せるイメージ。その分F5攻撃とか、アクセスルートのトークンチェックとかいろいろ開発のやり方とかあるから、勉強していくと素敵。 `me`\n\n## CakePHP3入門\n> PHPのWebアプリケーションフレームワークであるCakePHPについて学んでいきます。 `dotinstall`\n> PHPで書かれたオープンソースのWebアプリケーションフレームワークである。先行するRuby on Railsの概念の多くを取り入れており、Rails流の高速開発とPHPの機動性を兼ね備えたフレームワークと言われている。 `wikipedia`\n> ケーキの管理画面のイメージ。Googleトレンドでみると、cakephpより9倍ららべる(次の項目)のが人気。日本だとCakeのが3倍人気！！まだ使われてサイトが多いっぽいと予想。 `me`\n\n## Laravel5入門\n> PHPのWebアプリケーションフレームワークであるLaravelについて学んでいきます。 `dotinstall`\n> 無料・オープンソースのPHPで書かれたWebアプリケーションフレームワークである。 `wikipedia`\n> 2013年phpの人気フレームワーク1位(25.85%)、次に人気なのはPhalcon(16.73%) `me`\n\n## Ruby入門\n> オブジェクト指向スクリプト言語で定評のあるRubyの基礎を学んでいきます。 `dotinstall`\n> まつもとゆきひろ（通称 Matz）により開発されたオブジェクト指向スクリプト言語であり、スクリプト言語が用いられてきた領域でのオブジェクト指向プログラミングを実現する。 また日本で開発されたプログラミング言語としては初めて国際電気標準会議で国際規格に認証された事例となった。 `wikipedia`\n> 私もよく使う言語。書きやすい、たのしい。あと1年後には、rubyからデータサイエンス系のライブラリ(Python)が扱えるようになるというカンファレンスからの噂？ `me`\n\n## RSpec入門\n> BDDのためのテストフレームワークであるRSpecについて、その使い方を学んでいきます。 `dotinstall`\n> ビヘイビア駆動開発 (振舞駆動開発; behavior driven development; BDD)とは、プログラム開発手法の一種で、テスト駆動開発(TDD)から派生した物である。 `wikipedia`\n> BDDの方のフレームワーク。使ったことない。railsチュートリアルのTDDに苦しめられた。。 `me`\n\n## Active Record入門\n> RubyonRailsの一部として開発されているORマッパーであるActiveRecordについて見ていきます。 `dotinstall`\n> Active Recordはデータベースからデータを読み出すためのアプローチである。 `wikipedia`\n> DBアクセスはSQL書くっていうより、オブジェクトから操作できる。 `me`\n\n## Ruby on Rails 4入門\n> 代表的なWebアプリケーションフレームワークであるRubyonRailsについて、その概念と使い方を説明していきます。 `dotinstall`\n> Ruby on Rails（ルビーオンレイルズ）は、オープンソースのWebアプリケーションフレームワークである。RoRまたは単にRailsと呼ばれる。その名にも示されているようにRubyで書かれている。またModel View Controller（MVC）アーキテクチャに基づいて構築されている。 `wikipedia`\n> むつかしい。ruby系のwebアプリケーションを作るなら。 `me`\n\n## Sinatra入門\n> Rubyで軽量アプリケーションを作成する際に便利なフレームワーク、Sinatraについて学んでいきます。 `dotinstall`\n> Rubyで作成されたオープンソースのWebアプリケーションフレームワークである。2007年に公開された。Model View Controller（MVC）には基づかない設計で作成されており、小さく、柔軟性があるプログラミングが可能となるよう意識されている。 `wikipedia`\n> rails使わないけどrubyのフレームワークだよ！AppleとかGitHubとかHerokuとかが使ってるよ！ `me`\n\n## Node.js入門\n> 大量のアクセスを高速にさばくことができるNode.jsについて、その基本的な使い方を学んでいきます。 `dotinstall`\n> Node.js はイベント化された入出力を扱うUnix系プラットフォーム上のサーバーサイドJavaScript環境である（V8 JavaScriptエンジンで動作する）。Webサーバなどのスケーラブルなネットワークプログラムの記述を意図している `wikipedia`\n> フロントエンド言語のJavascriptからの派生でサーバーサイドを扱えるようになった。実行環境。進化してる。 `me`\n\n## Express入門\n> Node.js用のWebアプリケーションフレームワークであるExpressについて、基本的な使い方を学びます。 `dotinstall`\n> ExpressはそのNode.jsでの王道的な開発をスピードアップするためのフレームワークです。 `Qiita`\n> Node.jsがフレームワークだと思ってたとか言えない。 `me`\n\n## Socket.IO入門\n> WebSocket周辺の技術を便利に扱うためのライブラリ、Socket.IOについて基本的な使い方を学びます。 `dotinstall`\n> WebSocket（ウェブソケット）は、コンピュータ・ネットワーク用の通信規格の1つである。インターネットの標準化団体であるW3CとIETFがウェブサーバーとウェブブラウザとの間の通信のために規定を予定している双方向通信用の技術規格であり、APIはW3Cが、WebSocket プロトコルはIETFが策定に関与している。プロトコルの仕様は RFC 6455。TCP上で動く。 `wikipedia`\n> Ajaxで頻繁にやりときされるよになって悲鳴をあげてるサーバーサイドの救世主(あってる?) `me`\n\n## Swift 3入門\n> iOSアプリ開発で使われるプログラミング言語であるSwiftについて見ていきます。 `dotinstall`\n> Swift（スウィフト）は、アップルのiOSおよびmacOSのためのプログラミング言語。Worldwide Developers Conference (WWDC) 2014で発表された。アップル製OS上で動作するアプリケーションの開発に従来から用いられていたObjective-CやObjective-C++、C言語と共存することが意図されている[3]。 `wikipedia`\n> iPhoneアプリ開発に使うモダンな言語。かたづけとか超厳しいけど、そのおかげでバグが減ってるっぽい。 `me`\n\n## Androidアプリ開発入門\n> 携帯情報端末向けのOSであるAndroidを使い、アプリを作る方法について学んでいきます。 `dotinstall`\n> Android (Java)java。javaってなんでもできるよね。 `me`\n\n## BASIC入門\n> 1970年代に発売されたパソコンに搭載されていた昔なつかしのプログラミング言語です。 `dotinstall`\n> BASIC（ベーシック）は手続き型プログラミング言語のひとつ。\n名前は「beginner's all-purpose symbolic instruction code」（「初心者向け汎用記号命令コード」を意味する）の頭字語である。 `wikipedia`\n>  英語っぽい。大文字のイメージ、後10列から25に飛ばしたり、飛んでるイメージ。  `me`\n\n## C言語入門\n> OSを作るために開発され、多くのプログラミング言語に影響を与えているC言語の基礎について説明していきます。 `dotinstall`\n> C言語（シーげんご）は、1972年にAT&Tベル研究所のデニス・リッチーが主体となって開発したプログラミング言語である。英語圏では単に C と呼んでおり、日本でも文書や文脈によっては同様に C と呼ぶことがある。 `wikipedia`\n> 有名。大学だと一番にこれをやるキガスル。C言語のポインタ理解してるひとはいいよね〜〜って年上の方がよく言ってるイメージがある。 `me`\n\n## C#入門\n> マイクロソフトが開発したプログラミング言語であるC#について学んでいきます。 `dotinstall`\n> C#（シーシャープ）とは、マイクロソフトが開発したマルチパラダイムプログラミング言語。強い型付け、命令型、宣言型、手続き型、関数型、ジェネリック、オブジェクト指向の要素を持つ。\nマイクロソフトのソフトウェアフレームワークである.NET Frameworkとともに作られ、Ecma International[1]および国際標準化機構 (ISO)[2] によって標準化されており、日本においても日本工業規格 (JIS)[3]によって採択された。 `wikipedia`\n> Unityとか使える。 `me`\n\n## COBOL入門\n> 事務処理向けに開発されたCOBOLについて、基本的な使い方を学びます。 `dotinstall`\n> COBOL（コボル）は、1959年に事務処理用に開発されたプログラミング言語である。名前は「Common Business Oriented Language」（共通事務処理用言語）に由来する。 `wikipedia`\n> 他の言語と違って10進法だから銀行のシステムとかに使われてたイメージ。今は金額の誤差の許されない案件でもJavaに置き換わりつつあるような。 `me`\n\n## Go言語入門\n> Googleが中心となって開発しているモダンなプログラミング言語、Goについて学びます。 `dotinstall`\n> Goはプログラミング言語のひとつ。Googleによって開発されており[4]、設計にロブ・パイク、ケン・トンプソンらが関わっている。\n主な特徴として、軽量スレッディングのための機能、Pythonのような動的型付け言語のようなプログラミングの容易性、などがある。Go処理系としてはコンパイラのみが開発されている。 `wikipedia`\n> Google好きならPythonとかGo言語を扱ってるといいかも。 `me`\n\n## Java 8入門\n> さまざまな用途で幅広く使われているオブジェクト指向型言語、Javaについて学んでいきます。 `dotinstall`\n> Java（ジャバ）は、狭義ではオブジェクト指向プログラミング言語Javaであり、広義ではプログラミング言語Javaのプログラムの実行環境および開発環境をいう。本稿ではプログラミング言語としての Java、および関連する技術や設計思想、およびJava言語の実行環境として見たJavaプラットフォームについて解説する。クラスライブラリなどを含めた、Javaバイトコードの実行環境と開発環境（広義のJava）については、Javaプラットフォームを参照。また、言語の文法に関してはJavaの文法を参照。 `wikipedia`\n> JSP&Survlet(スッキリJava)で作ったシステムのおかげでJavaの考え方が少しわかったきがする。 `me`\n\n## Scala入門\n> オブジェクト指向と関数型プログラミングの性質をあわせもつScalaについて学んでいきます。 `dotinstall`\n> Scala（スカラ(skah-lah[1]）はオブジェクト指向言語と関数型言語の特徴を統合したマルチパラダイムのプログラミング言語である。名前の「Scala」は英語の「scalable language」に由来するものである。 `wikipedia`\n> Java仮想マシンで動くって。 `me`\n\n## Kotlin入門\n> Android開発で人気の、Javaをより安全かつ簡潔に書くことができるKotlinについて見ていきます。 `dotinstall`\n> Kotlin（ことりん、コトリン）は、ジェットブレインズ社のアンドリー・ブレスラフ、ドミトリー・ジェメロフが開発した、静的型付けのオブジェクト指向プログラミング言語である。 `wikipedia`\n> 名前がかわいくて気になっているけどまだ動画を見れていない。 `me`\n\n## AWK入門\n> 効率的にテキスト処理を行うことができるAWKについて、その使い方を学びます。 `dotinstall`\n> AWK（オーク）は、UNIX 上で開発されたプログラミング言語で、デフォルトでは改行でレコードが区切られ、各レコードのフィールドは空白類（スペースの他、タブなど）で区切られているようなテキストファイルを扱えるが、カスタマイズも可能であり、また文字列と数値を扱うプログラミングも可能である。 `wikipedia`\n> こう、なんか、こういう技術も知っとかないととは思っても、rubyでコード書いちゃうんだよな。 `me`\n\n## Lua入門\n> 軽量かつ高速で、組み込みが容易なスクリプト言語、Luaについて解説していきます。 `dotinstall`\n> Lua（ルア）は、リオデジャネイロ・カトリカ大学の、主としてDepartment of Computer Science（コンピュータ科学科）and・or Computer Graphics Technology Group (Tecgraf) に属する、Roberto Ierusalimschy, Waldemar Celes, Luiz Henrique de Figueiredo らによって設計開発されたスクリプト言語およびその処理系の実装である。\n手続き型言語として、また、プロトタイプベースのオブジェクト指向言語としても利用する事が出来、関数型言語、データ駆動型としての要素も併せ持っている。\nLuaという名前は、ポルトガル語の月に由来する。 `wikipedia`\n> 変数に型のないスクリプト言語では最速の言語・処理系であるとされており、rubyはわかるけど、pythonより早いってすごいな。Luaは、C言語のホストプログラムに組み込まれるって。 `me`\n\n## Markdown記法入門\n> 読み書きしやすいテキストを構造化された文書に変換するためのフォーマットであるMarkdown記法について学びます。 `dotinstall`\n> Markdown（マークダウン）は、文書を記述するための軽量マークアップ言語のひとつである。本来はプレーンテキスト形式で手軽に書いた文書からHTMLを生成するために開発されたものである。しかし、現在ではHTMLのほかパワーポイント形式やLATEX形式のファイルへ変換するソフトウェア（コンバータ）も開発されている。各コンバータの開発者によって多様な拡張が施されるため、各種の方言が存在する。 `wikipedia`\n> めっちゃ大好き。文章を書きたくなる！ `me`\n\n## Perl入門\n> テキスト処理から大規模なシステム開発まで対応できるPerlについて、その基礎を学びます。 `dotinstall`\n> Perl（パール）とは、ラリー・ウォールによって開発されたプログラミング言語である。実用性と多様性を重視しており、C言語やsed、awk、シェルスクリプトなど他のプログラミング言語の優れた機能を取り入れている。ウェブ・アプリケーション、システム管理、テキスト処理などのプログラムを書くのに広く用いられている。\n言語処理系としてのperlはフリーソフトウェアである。Artistic LicenseおよびGPLのもとで配布されており、誰でもどちらかのライセンスを選択して利用することができる。UNIXやWindowsなど多くのプラットフォーム上で動作する。 `wikipedia`\n> 正規表現とかテキストいじるのに強いイメージ `me`\n\n## Processing入門\n> デザイナーやアーティスト向けのプログラミング言語であるProcessingについて基本的な使い方を学びます。 `dotinstall`\n> Processing（プロセシング）は、キャセイ・レアス（英語版）（Casey Reas）とベンジャミン・フライ（英語版）（Benjamin Fry）によるオープンソースプロジェクトであり、かつてはMITメディアラボで開発されていた。電子アートとビジュアルデザインのためのプログラミング言語であり、統合開発環境である。アーティストによるコンテンツ制作作業のために、詳細な設定を行う関数を排除している。 視覚的なフィードバックが即座に得られるため、初心者がプログラミングを学習するのに適しており、電子スケッチブックの基盤としても利用できる。Java を単純化し、グラフィック機能に特化した言語といえる。 `wikipedia`\n> Java、そしてIDE、そして初心者向け、グラフィカル、、気になる `me`\n\n## p5.js入門\n> ビジュアルコーディングツールであるProcessingをJavaScriptに移植したp5.jsについて学んでいきます。 `dotinstall`\n> ... `wikipedia`\n> javascriptなのでJavaとかの環境がいらないので導入は楽かも `me`\n\n## Python 3入門\n> データ解析や機械学習などにも利用される、シンプルなオブジェクト指向型言語であるPythonについて見ていきます。 `dotinstall`\n> Python（パイソン）は、汎用のプログラミング言語である。コードがシンプルで扱いやすく設計され、C言語などに比べて、さまざまなプログラムを分かりやすく、少ないコード行数で書けるといった特徴がある。[12][13]。 `wikipedia`\n> 便利。計算とか。データサイエンティストとか。Djangoじゃんご、Tornado、IoTデバイスへのアクセスとかもC経由Pythonでかけたり。 `me`\n\n## R言語入門\n> 統計解析用のプログラミング言語であるR言語について、基本的な使い方を見ていきます。 `dotinstall`\n> R言語（あーるげんご）はオープンソース・フリーソフトウェアの統計解析向けのプログラミング言語及びその開発実行環境である。\nR言語はニュージーランドのオークランド大学のRoss IhakaとRobert Clifford Gentlemanにより作られた。現在ではR Development Core Team（S言語開発者であるJohn M. Chambersも参画している[1]。）によりメンテナンスと拡張がなされている。\nR言語のソースコードは主にC言語、FORTRAN、そしてRによって開発された。\nなお、R言語の仕様を実装した処理系の呼称名はプロジェクトを支援するフリーソフトウェア財団によれば『GNU R』である[2]が、他の実装形態が存在しないために日本語での慣用的呼称に倣って、当記事では、仕様・実装を纏めて適宜にR言語や単にR等と呼ぶ。 `wikipedia`\n> 大学とかの学術機関でよく使われているイメージある。Pythonとかあんまり聞いたことなかったけどRはよくデータ解析の話題になって、使い方わかんねえ、、っていつもみんなで言い合ってた印象。 `me`\n\n## Smalltalk入門\n> 純粋オブジェクト指向言語として他言語に大きな影響を与えたSmalltalkについて解説していきます。 `dotinstall`\n> Smalltalk（スモールトーク）は、Simula のオブジェクト（およびクラス）、LISPの徹底した動的性、LOGO のタートル操作や描画機能に、アラン・ケイの「メッセージング」というアイデアを組み合わせて作られたクラスベースの純粋オブジェクト指向プログラミング言語、および、それによって記述構築された統合化プログラミング環境の呼称。\nSmalltalk で一語であり、「Small Talk」「SmallTalk」などは誤りである。 `wikipedia`\n> Lispという文字が見えたので気になった。勉強しよう。 `me`\n\n## TypeScript入門\n> JavaScriptの構文を拡張し、大規模開発にも使えるようにしたプログラミング言語、TypeScriptについて見ていきます。 `dotinstall`\n> TypeScript はマイクロソフトによって開発され、メンテナンスされているフリーでオープンソースのプログラミング言語である。TypeScript は JavaScript に対して、省略も可能な静的型付けとクラスベースオブジェクト指向を加えた厳密なスーパーセットとなっている。C# のリードアーキテクトであり、DelphiとTurbo Pascalの開発者でもあるアンダース・ヘルスバーグが TypeScript の開発に関わっている。TypeScriptはクライアントサイド、あるいはサーバサイド(Node.js）で実行されるJavaScriptアプリケーションの開発に利用できる。 `wikipedia`\n> js `me`\n\n## Pascal入門\n> 教育用プログラミング言語として開発されたPascalについて基本的な使い方を見ていきます。 `dotinstall`\n> Pascal（パスカル）は、構造化された初期の代表的なプログラミング言語。\nPascal は、1970年にスイスのチューリッヒ工科大学のニクラウス・ヴィルトが教育用プログラミング言語として開発し、ALGOL の影響を受けた簡素で厳密な構造化言語仕様を持つ。教育目的で広まり、実用的にも初期の TeX や Macintosh の オペレーティングシステム、アプリケーションの記述も Pascal である。\nドナルド・クヌースの TeX プログラムは文芸的プログラミングシステムのWEBで書かれ、そこから文書と Pascal プログラムを生成する。現在でもパーソナルコンピュータ上の処理系が多数あり、多くの他のプログラミング言語、およびハードウェア記述言語の源泉になっている。名前は、世界で最初の機械式計算機を発明したブレーズ・パスカルの名前に因んだものである[1]。 `wikipedia`\n> 教育用 `me`\n\n## Ada入門\n> 米国の国防総省が中心となって作ったプログラミング言語、Adaについて見ていきます。 `dotinstall`\n> Ada（エイダ）は、強力な言語機能を豊富に持ち、高度な型の体系をもつ、プログラミング言語の一つである。構文はAlgol系である。\n史上初のプログラマとされるエイダ・ラブレスの名前にちなんでAdaと命名されているため、ADAと表記するのは誤り。\nフリーのコンパイラとしては、GNATなどがある。\nボーイング777や、F-22戦闘機の制御ソフトウェアはAdaによって書かれている。 `wikipedia`\n> ボーイング777!!!!!!!かっけえこの言語。 `me`\n\n## MongoDB入門\n> ドキュメント指向データベースであるMongoDBについてその使い方を見ていきます。 `dotinstall`\n> MongoDBは、オープンソースのドキュメント指向データベースである。C++言語で記述されており、開発とサポートはMongoDB Inc.によって行なわれている。[2] `wikipedia`\n> NoSQL。 `me`\n\n## MySQL入門\n> もっとも人気の高いデータベース管理システムのうちの一つであるMySQLについて、その使い方の基礎を学びます。 `dotinstall`\n> MySQL（まい・えすきゅーえる）は、オープンソースで公開されている関係データベース管理システム (RDBMS) の一つである。 `wikipedia`\n> 一番人気 `me`\n\n## PostgreSQL入門\n> オープンソースで高機能なデータベースシステムであるPostgreSQLについて、その基本的な使い方を学んでいきます。 `dotinstall`\n> PostgreSQL（ぽすとぐれすきゅーえる: 発音例）はオープンソースのオブジェクト関係データベース管理システム (ORDBMS) である。その名称は Ingres の後継を意味する「Post-Ingres」に由来している。「Postgres」や「ポスグレ」と呼ばれることも多い。 `wikipedia`\n> 型変換のチェックが厳しいイメージ `me`\n\n## Redis入門\n> データ構造サーバーとも呼ばれるインメモリデータベースのRedisについて説明していきます。 `dotinstall`\n> Redisとは「remote dictionary server」から名前が付けられたオープンソースのkey-valueデータストアです。 MemcacheDB等のKVSとの最大の違いは、格納するバリューがデータ構造というところです。 `ameblo`\n> つまり解説は　http://qiita.com/search?q=Redis　でお願いします。わかんなかった。 `me`\n\n## SQLite入門\n> スマートフォンやブラウザなどで採用されている、軽量データベースのSQLiteについて学んでいきます。 `dotinstall`\n>  `wikipedia`\n> この前show databases;ってやって怒られた。exit?.exit! `me`\n\n## AngularJS入門\n> JavaScriptのMVCフレームワークであるAngularJSについてその使い方の基礎を解説していきます。 `dotinstall`\n> AngularJS（アンギュラージェイエス）、または Angular は、Googleと個人や企業のコミュニティによって開発されている、完全にJavaScriptで書かれたオープンソースのフロントエンドWebアプリケーションフレームワークである。MIT Licenseでライセンスされたフリーソフトウェアである。シングルページアプリケーションの開発において直面する多くの問題に取り組んでいる。JavaScriptコンポーネントは、クロスプラットフォームなモバイルアプリ開発用フレームワークであるApache Cordovaを補完する。クライアントサイド用のMVCおよびMVVMアーキテクチャを、リッチインターネットアプリケーションで一般的に用いられるコンポーネント群とともに提供することにより、そのようなアプリの開発とテストを簡単にすることを目的としている。\nAngularJSはシングルページアプリケーション（英語版） (SPA) の開発が可能なフレームワークで、一つのフレームワーク内で全ての機能が完結するフルスタックフレームワークであることが特徴として挙げられる。[1] `wikipedia`\n> Google. JSがかなり進化してる。 `me`\n\n\n**************************\n\n# 最後に\nほらあなたもドットインストールが見たくなってきた！\nれっつごー！\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2017-03-01T01:58:54+09:00","group":null,"id":"431a12c305e6b44a7653","likes_count":9,"private":false,"reactions_count":0,"stocks_count":12,"tags":[{"name":"Ruby","versions":[]},{"name":"PHP","versions":[]},{"name":"HTML","versions":[]},{"name":"CSS","versions":[]},{"name":"JavaScript","versions":[]}],"title":"dotinstall動画の一覧から流行りの技術を読み解く","updated_at":"2018-08-27T12:01:14+09:00","url":"https://qiita.com/ykhirao/items/431a12c305e6b44a7653","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>自分が1年くらい独学で勉強して、2017年1月にエンジニアに転職したので、当時苦労した点などを思い出しつつ、このタイミングでまとめられたらいいと思っています。<br>\n何か間違いとか異論ありましたらコメント欄でお願いします。</p>\n\n<h1>\n<span id=\"-記事について\" class=\"fragment\"></span><a href=\"#-%E8%A8%98%E4%BA%8B%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"><i class=\"fa fa-link\"></i></a><i></i> 記事について</h1>\n\n<h2>\n<span id=\"やりたいこと\" class=\"fragment\"></span><a href=\"#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8\"><i class=\"fa fa-link\"></i></a>やりたいこと</h2>\n\n<h3>\n<span id=\"一緒にpaizaioを使いrubyで頭の体操をしましょう\" class=\"fragment\"></span><a href=\"#%E4%B8%80%E7%B7%92%E3%81%ABpaizaio%E3%82%92%E4%BD%BF%E3%81%84ruby%E3%81%A7%E9%A0%AD%E3%81%AE%E4%BD%93%E6%93%8D%E3%82%92%E3%81%97%E3%81%BE%E3%81%97%E3%82%87%E3%81%86\"><i class=\"fa fa-link\"></i></a><strong>一緒にpaiza.IOを使いRubyで頭の体操をしましょう!!</strong>\n</h3>\n\n<p>paiza.IO: 言語ごとに環境構築しなくていいオンラインサービスなので、今回はこれを使います。<br>\nRuby: 今回はプログラミング言語のRubyを使います。<br>\n頭の体操: 数独とかクイズとか好きな人は、アルゴリズムの問題サイトを解くのすごく達成感あると思います！！</p>\n\n<h2>\n<span id=\"記事の対象者\" class=\"fragment\"></span><a href=\"#%E8%A8%98%E4%BA%8B%E3%81%AE%E5%AF%BE%E8%B1%A1%E8%80%85\"><i class=\"fa fa-link\"></i></a>記事の対象者</h2>\n\n<ul>\n<li>プログラミングを習い初めたけど、何から始めよう。</li>\n<li>ドットインストールくらいはみたよ</li>\n<li>アルゴリズムの問題解きたい !!</li>\n<li>標準入力ってなに ??</li>\n<li>どんな言語選べば良いのかな。環境構築大変そう。</li>\n<li>Paiza, CodeIQ, yukicoderなどのサイトを使ってみたい。</li>\n</ul>\n\n<h2>\n<span id=\"記事での勉強法おすすめ\" class=\"fragment\"></span><a href=\"#%E8%A8%98%E4%BA%8B%E3%81%A7%E3%81%AE%E5%8B%89%E5%BC%B7%E6%B3%95%E3%81%8A%E3%81%99%E3%81%99%E3%82%81\"><i class=\"fa fa-link\"></i></a>記事での勉強法おすすめ</h2>\n\n<p>アルゴリズムの問題を解きまくろう</p>\n\n<h2>\n<span id=\"記事を読み終えると\" class=\"fragment\"></span><a href=\"#%E8%A8%98%E4%BA%8B%E3%82%92%E8%AA%AD%E3%81%BF%E7%B5%82%E3%81%88%E3%82%8B%E3%81%A8\"><i class=\"fa fa-link\"></i></a>記事を読み終えると</h2>\n\n<p>[ 標準入力 ]が使えるようになる！</p>\n\n<p>アルゴリズムの問題サイトで、簡単な問題を解くことができるようになります！！<br>\n最後までお付き合いください。</p>\n\n<h1>\n<span id=\"paizaio\" class=\"fragment\"></span><a href=\"#paizaio\"><i class=\"fa fa-link\"></i></a>paiza.IO</h1>\n\n<h3>\n<span id=\"paizaioはこちら\" class=\"fragment\"></span><a href=\"#paizaio%E3%81%AF%E3%81%93%E3%81%A1%E3%82%89\"><i class=\"fa fa-link\"></i></a>paiza.IOは<a href=\"https://paiza.io/projects/new\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a>。</h3>\n\n<p>コードを書いたらそのまま実行できるオンラインサービスで、かなり便利です。<br>\n<a href=\"https://paiza.io/help\" rel=\"nofollow noopener\" target=\"_blank\">help</a>によると対応言語はこちら。<br>\n[ C, C++, C#, Java, Python2, Python3, Ruby, Perl, PHP, JavaScript, Objective-C, Scala, Swift, Go, Haskell, CoffeeScript, Bash, Erlang, R, COBOL, VB, F#, Clojure, D, Elixir, MySQL ]<br>\n使い方はこちら<a href=\"http://qiita.com/saltheads/items/ecb2292c456738d3e118\" id=\"reference-a6669ec1813428a2ca05\">paiza.IO の使い方</a>にまとまってましたので参考にされるといいかと思います。私が扱うのは標準入力の機能付近です。</p>\n\n<h2>\n<span id=\"簡単な文字の入力と出力はpaizaioが便利\" class=\"fragment\"></span><a href=\"#%E7%B0%A1%E5%8D%98%E3%81%AA%E6%96%87%E5%AD%97%E3%81%AE%E5%85%A5%E5%8A%9B%E3%81%A8%E5%87%BA%E5%8A%9B%E3%81%AFpaizaio%E3%81%8C%E4%BE%BF%E5%88%A9\"><i class=\"fa fa-link\"></i></a>簡単な文字の入力と出力はpaiza.IOが便利</h2>\n\n<p>上記の<a href=\"https://paiza.io/help\" rel=\"nofollow noopener\" target=\"_blank\">help</a>から対応言語をコピーしてきたらこちら</p>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">help.txt</span></div>\n<div class=\"highlight\"><pre><code>C   clang 3.8 / LLVM 3.8 (C99)  2   512\nC++ clang 3.8 / LLVM 3.8 / libc++ (C++14)   2   512\nC#  mono-4.2.1 (C#6, CLI4.5)    2   512\nJava    java 1.8.0  2   512\nPython2 python 2.7.12   2   512\nPython3 python 3.5.2    2   512\n(以下省略)\n</code></pre></div>\n</div>\n\n<p>こういう簡単なテキストの処理がpaiza.IOでは便利だと思ってます。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/d4c42680e92dcd87cb2d4ca259d077cfe683f3d6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f36333935616362382d326432302d613930382d616135362d3137376236376565376431322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"543\" alt=\"スクリーンショット 2017-02-24 12.14.45.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6395acb8-2d20-a908-aa56-177b67ee7d12.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=458acb87b558ff7c6a5f841ef150bd02\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6395acb8-2d20-a908-aa56-177b67ee7d12.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F6395acb8-2d20-a908-aa56-177b67ee7d12.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6a7927090359e5bab3abe5c08ebfb4a1 1x\" loading=\"lazy\"></a><br>\n<a href=\"https://paiza.io/help\" rel=\"nofollow noopener\" target=\"_blank\">help</a>の対応言語一覧からのコピーを上の画像の「入力」という部分に貼り付け、rubyコードを書き実行すると「出力」に結果がでます。</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">ruby.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"p\">[]</span> <span class=\"c1\"># 配列の初期化</span>\n<span class=\"k\">while</span> <span class=\"p\">(</span><span class=\"nb\">gets</span><span class=\"p\">)</span> <span class=\"c1\"># 標準入力があるかぎり実行</span>\n    <span class=\"n\">arr</span> <span class=\"o\">&lt;&lt;</span> <span class=\"vg\">$_</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">]</span> \n    <span class=\"c1\"># $_に標準入力が入る</span>\n    <span class=\"c1\"># split(\" \")で半角スペースで区切り、配列にする</span>\n    <span class=\"c1\"># 配列の一番目をarrに入れている</span>\n<span class=\"k\">end</span>\n<span class=\"nb\">p</span> <span class=\"n\">arr</span>\n<span class=\"c1\"># p arr の出力結果がこちら</span>\n<span class=\"p\">[</span><span class=\"s2\">\"C\"</span><span class=\"p\">,</span> <span class=\"s2\">\"C++\"</span><span class=\"p\">,</span> <span class=\"s2\">\"C#\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Java\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Python2\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Python3\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Ruby\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Perl\"</span><span class=\"p\">,</span> <span class=\"s2\">\"PHP\"</span><span class=\"p\">,</span> \n<span class=\"s2\">\"JavaScript\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Objective-C\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Scala\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Swift\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Go\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Haskell\"</span><span class=\"p\">,</span> <span class=\"s2\">\"CoffeeScript\"</span><span class=\"p\">,</span> \n<span class=\"s2\">\"Bash\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Erlang\"</span><span class=\"p\">,</span> <span class=\"s2\">\"R\"</span><span class=\"p\">,</span> <span class=\"s2\">\"COBOL\"</span><span class=\"p\">,</span> <span class=\"s2\">\"VB\"</span><span class=\"p\">,</span> <span class=\"s2\">\"F#\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Clojure\"</span><span class=\"p\">,</span> <span class=\"s2\">\"D\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Elixir\"</span><span class=\"p\">,</span> <span class=\"s2\">\"MySQL\"</span><span class=\"p\">]</span>\n</code></pre></div>\n</div>\n\n<p>こんな感じで、簡単なテキスト処理をしたいというときにはかなり使ってます。<br>\nコードは非公開設定もできます。</p>\n\n<p>このpaiza.IOを使ってアルゴリズムの問題とか、初心者の時自分がつまずいた点を以下に書いていきたいと思います。</p>\n\n<h1>\n<span id=\"標準入力を使ってみよう\" class=\"fragment\"></span><a href=\"#%E6%A8%99%E6%BA%96%E5%85%A5%E5%8A%9B%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"><i class=\"fa fa-link\"></i></a>標準入力を使ってみよう</h1>\n\n<h2>\n<span id=\"今後の書き方のまとめ\" class=\"fragment\"></span><a href=\"#%E4%BB%8A%E5%BE%8C%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>今後の書き方のまとめ</h2>\n\n<p><a href=\"https://camo.qiitausercontent.com/647b7d7423ca1f5efcf17c4959465a02bda0b096/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f38323236666638362d383831342d636262652d313636652d6363383031626539353735352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"569\" alt=\"スクリーンショット 2017-02-24 13.35.10.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F8226ff86-8814-cbbe-166e-cc801be95755.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f89cc8efbcc73098fd3eab4001a48ddc\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/8226ff86-8814-cbbe-166e-cc801be95755.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F8226ff86-8814-cbbe-166e-cc801be95755.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=788fe24d8b209954cd9c126ee3e1e288 1x\" loading=\"lazy\"></a></p>\n\n<p>言語は左上の[Ruby]と選んでください。</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"c1\"># Main.rbのここにコード書いていきます。</span>\n<span class=\"c1\"># 隣にファイル追加できたりしますが一旦は使わない方向で！</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>実行 =&gt; ファイル実行。アカウントログインしてる人だと成功するとデータ保存される！</li>\n<li>出力 =&gt; pとかputsとかprintとかの出力結果</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code># こんな形で入力は[ 入力.txt ]と書く場合があると思いますので、入力欄に入れてください！\n</code></pre></div>\n</div>\n\n<ul>\n<li>入力 =&gt; ここが噂の標準入力</li>\n<li>実行時エラー =&gt; エラーが出た場合は画面がオレンジっぽいの出るので、ここを見ましょう！</li>\n</ul>\n\n<h1>\n<span id=\"さて本題標準入力を使ったデータ操作を見ていきましょう\" class=\"fragment\"></span><a href=\"#%E3%81%95%E3%81%A6%E6%9C%AC%E9%A1%8C%E6%A8%99%E6%BA%96%E5%85%A5%E5%8A%9B%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E6%93%8D%E4%BD%9C%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%84%E3%81%8D%E3%81%BE%E3%81%97%E3%82%87%E3%81%86\"><i class=\"fa fa-link\"></i></a>さて本題、標準入力を使ったデータ操作を見ていきましょう！</h1>\n\n<blockquote>\n<p>Q. こんな感じで問題だしていくのでその操作のサンプルを書いていきます！</p>\n</blockquote>\n\n<p>rubyの[p]というのは出力ですが、文字列ならの5なら[ \"5\" ]と数値の5なら[ 5 ]と出力してくれるので、判断に使ってください！</p>\n\n<h2>\n<span id=\"数字の扱い\" class=\"fragment\"></span><a href=\"#%E6%95%B0%E5%AD%97%E3%81%AE%E6%89%B1%E3%81%84\"><i class=\"fa fa-link\"></i></a>数字の扱い</h2>\n\n<blockquote>\n<p>Q. 数字が与えられるのでそれを5倍して出力しなさい</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>4\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">i</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span>\n<span class=\"nb\">p</span> <span class=\"n\">i</span> <span class=\"c1\"># =&gt; \"4\" 文字列の4が出力されます。</span>\n<span class=\"nb\">p</span> <span class=\"n\">i</span> <span class=\"o\">*</span> <span class=\"mi\">5</span> <span class=\"c1\"># =&gt; \"44444\" 文字列が5回繰り返して出力されます</span>\n<span class=\"nb\">p</span> <span class=\"n\">i</span><span class=\"p\">.</span><span class=\"nf\">to_i</span> <span class=\"c1\"># =&gt; 4 数値の4が出力されました。</span>\n<span class=\"nb\">p</span> <span class=\"n\">i</span><span class=\"p\">.</span><span class=\"nf\">to_i</span> <span class=\"o\">*</span> <span class=\"mi\">5</span> <span class=\"c1\"># =&gt; 20 数値の20が出力</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>p 文字列か数値かをわかりやすく出力してくれる</li>\n<li>gets 標準入力から一列取得してくる</li>\n<li>iという変数にgetsを代入</li>\n<li>.to_i　というメソッドで数値への変換を行っている</li>\n<li>[ * ]これはかけるという意味で、文字列数値どちらでも使えます。</li>\n</ul>\n\n<p>どんどんいきますよ〜〜〜〜</p>\n\n<hr>\n\n<blockquote>\n<p>Q. 数字が3行で与えられるのですべてを足して出力せよ</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>7\n13\n5\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">to_i</span> <span class=\"c1\"># sumには7が足されます</span>\n<span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">to_i</span> <span class=\"c1\"># sumには13が足されます</span>\n<span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">to_i</span> <span class=\"c1\"># sumには5が足されます</span>\n<span class=\"nb\">puts</span> <span class=\"n\">sum</span> <span class=\"c1\"># =&gt; 25が出力されました！</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>puts 文字列でも数値でも\"\"なしで出力されます</li>\n<li>3回同じ操作をするのはコードが冗長なので、同じ結果が得られる別の書き方にかえます</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"mi\">3</span><span class=\"p\">.</span><span class=\"nf\">times</span> <span class=\"k\">do</span>\n    <span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">to_i</span>\n<span class=\"k\">end</span>\n<span class=\"nb\">puts</span> <span class=\"n\">sum</span> <span class=\"c1\"># =&gt; 25が出力されました！</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>3.times do end =&gt;　3回実行せよって命令です。</li>\n<li>さきほどと同じように7,13,5がどんどん足されていきます。</li>\n</ul>\n\n<hr>\n\n<blockquote>\n<p>n個の数値をかけ合わせなさい<br>\n一行目にnを、残りのn行に数値を入れるとする</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>4 # ここに書いてある数値の分だけ、掛け算するよ！ \n1\n2\n3\n4\n</code></pre></div>\n</div>\n\n<p>1 * 2 * 3 * 4の出力がみたいってこと！</p>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">num</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">to_i</span> <span class=\"c1\"># 最初の4が入る</span>\n<span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">1</span> <span class=\"c1\"># 掛け算するので最初は0にしちゃだめ</span>\n<span class=\"n\">num</span><span class=\"p\">.</span><span class=\"nf\">times</span> <span class=\"k\">do</span> <span class=\"c1\"># numの数(4)回実行されるよ</span>\n    <span class=\"n\">sum</span> <span class=\"o\">*=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">to_i</span> <span class=\"c1\"># 1~4がどんどん掛け算されていく</span>\n<span class=\"k\">end</span>\n<span class=\"nb\">puts</span> <span class=\"n\">sum</span> <span class=\"c1\"># =&gt; 24が出力されました！</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>num.times do のnumは変数でもOKです！今回は4回実行されました。</li>\n</ul>\n\n<p>次いくよ〜〜</p>\n\n<hr>\n\n<h2>\n<span id=\"配列の操作\" class=\"fragment\"></span><a href=\"#%E9%85%8D%E5%88%97%E3%81%AE%E6%93%8D%E4%BD%9C\"><i class=\"fa fa-link\"></i></a>配列の操作</h2>\n\n<blockquote>\n<p>[n m]と入力があるので、n*mを出力しなさい！</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>4 6\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code>\n<span class=\"n\">input</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span>\n<span class=\"nb\">p</span> <span class=\"n\">input</span> <span class=\"c1\"># =&gt; [\"4 6\"]</span>\n<span class=\"nb\">p</span> <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; [\"4\", \"6\"]</span>\n<span class=\"cm\">=begin\n[\"4\", \"6\"]は配列になっていて\n0番目の要素に\"4\"が\n1番目の要素に\"6\"が入っています。\n=end</span>\n<span class=\"nb\">p</span> <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"c1\"># =&gt; \"4\"</span>\n<span class=\"nb\">p</span> <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"c1\"># =&gt; \"6\"</span>\n<span class=\"nb\">p</span> <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nf\">to_i</span> <span class=\"c1\"># =&gt; 4</span>\n<span class=\"nb\">p</span> <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)[</span><span class=\"mi\">1</span><span class=\"p\">].</span><span class=\"nf\">to_i</span> <span class=\"c1\"># =&gt; 6</span>\n<span class=\"nb\">puts</span> <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nf\">to_i</span> <span class=\"o\">*</span> <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)[</span><span class=\"mi\">1</span><span class=\"p\">].</span><span class=\"nf\">to_i</span> <span class=\"c1\"># =&gt; 24</span>\n\n</code></pre></div>\n</div>\n\n<ul>\n<li>rubyのコメントは#(一行コメント)</li>\n<li>=beginから=endまで(複数行コメント)</li>\n<li>splitは分割して配列にしてくれるメソッド</li>\n<li>今回はsplit(\"半角スペース\")で[4 6]を分割</li>\n<li>もうちょっときれいに書くと</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">input</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)</span> <span class=\"c1\"># 入力をすぐに配列に分割</span>\n<span class=\"n\">num1</span> <span class=\"o\">=</span> <span class=\"n\">input</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nf\">to_i</span> <span class=\"c1\"># 配列の0番目を数値に</span>\n<span class=\"n\">num2</span> <span class=\"o\">=</span> <span class=\"n\">input</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">].</span><span class=\"nf\">to_i</span> <span class=\"c1\"># 配列の1番目を数値に</span>\n<span class=\"nb\">puts</span> <span class=\"n\">num1</span> <span class=\"o\">*</span> <span class=\"n\">num2</span> <span class=\"c1\"># 数値の掛け算</span>\n</code></pre></div>\n</div>\n\n<p>みたいな感じでしょうか。次行きます〜〜〜</p>\n\n<hr>\n\n<blockquote>\n<p>半角スペース区切りであたえられる5つの数字[n m l s t]を足しなさい。</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>2 3 6 14 6\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">input</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)</span> <span class=\"c1\"># 半角スペース区切りで配列にする</span>\n<span class=\"nb\">p</span> <span class=\"n\">input</span> <span class=\"c1\"># =&gt; [\"2\", \"3\", \"6\", \"14\", \"6\"] </span>\n<span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">map!</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span> <span class=\"c1\"># 配列の中をすべて数字に変えるメソッド</span>\n<span class=\"nb\">p</span> <span class=\"n\">input</span> <span class=\"c1\"># =&gt; [2, 3, 6, 14, 6]</span>\n\n<span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"c1\"># inputの中身を一個一個取り出すメソッド</span>\n    <span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"n\">item</span>\n<span class=\"k\">end</span>\n\n<span class=\"nb\">puts</span> <span class=\"n\">sum</span> <span class=\"c1\"># 31</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>mapメソッドの解説</li>\n<li>（mapは難しいので私はなんとなく使ってた。使いたい度にGoogleで調べてたから覚えなくてもいいかも）</li>\n<li>まずは破壊的メソッド(!!!!!)と非破壊の違い</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">map.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">\"2\"</span><span class=\"p\">,</span> <span class=\"s2\">\"3\"</span><span class=\"p\">]</span>\n<span class=\"nb\">p</span> <span class=\"n\">arr</span><span class=\"p\">.</span><span class=\"nf\">map!</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span> <span class=\"c1\"># [2, 3] !つけるとarrの配列を置き換えるよ</span>\n<span class=\"nb\">p</span> <span class=\"n\">arr</span> <span class=\"c1\"># [2, 3]</span>\n<span class=\"nb\">p</span> <span class=\"n\">arr</span><span class=\"p\">.</span><span class=\"nf\">map</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_s</span><span class=\"p\">}</span> <span class=\"c1\"># to_sで文字列に変換　[\"2\", \"3\"]</span>\n<span class=\"nb\">p</span> <span class=\"n\">arr</span> <span class=\"c1\"># [2, 3] 上で!つけてないので、あれ文字列から数値に戻りました。</span>\n\n<span class=\"n\">arr2</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">\"4\"</span><span class=\"p\">,</span> <span class=\"s2\">\"5\"</span><span class=\"p\">]</span>\n<span class=\"n\">arr2</span><span class=\"p\">.</span><span class=\"nf\">map!</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span> <span class=\"c1\"># こうやって!つけるか</span>\n<span class=\"nb\">p</span> <span class=\"n\">arr2</span> <span class=\"c1\"># [4, 5]</span>\n<span class=\"n\">arr3</span> <span class=\"o\">=</span> <span class=\"n\">arr2</span><span class=\"p\">.</span><span class=\"nf\">map</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span> <span class=\"c1\"># 別の配列に入れてあげないと駄目</span>\n<span class=\"nb\">p</span> <span class=\"n\">arr3</span> <span class=\"c1\"># [4, 5]</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>|item|とはなんぞや</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">map.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">\"2\"</span><span class=\"p\">,</span> <span class=\"s2\">\"3\"</span><span class=\"p\">]</span>\n<span class=\"n\">arr</span><span class=\"p\">.</span><span class=\"nf\">map!</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span>\n<span class=\"cm\">=begin\n|item|の文字はiでもnumでもｓｔｒでもtmpでもなんでもいい\n配列arrにはいってる文字を全てitemにいれて処理してる感じ。\n=end</span>\n\n<span class=\"c1\"># イメージこんな感じ</span>\n<span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">\"2\"</span><span class=\"p\">,</span> <span class=\"s2\">\"3\"</span><span class=\"p\">]</span>\n<span class=\"n\">item</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"c1\"># itemに最初の文字\"2\"を代入</span>\n<span class=\"n\">arr</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span> <span class=\"c1\"># arrの0番目に数値2を代入</span>\n<span class=\"nb\">p</span> <span class=\"n\">arr</span> <span class=\"c1\"># [2, \"3\"]</span>\n<span class=\"n\">item</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"c1\"># itemに次の文字\"3\"を代入</span>\n<span class=\"n\">arr</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span> <span class=\"c1\"># arrの1番目に数値3を代入</span>\n<span class=\"nb\">p</span> <span class=\"n\">arr</span> <span class=\"c1\"># [2, 3]</span>\n<span class=\"c1\"># 無事すべて数字になりました〜〜！！</span>\n\n</code></pre></div>\n</div>\n\n<ul>\n<li>次はeach doメソッド</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">]</span>\n<span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"n\">arr</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"c1\"># arrの中身を一個itemに入れてる感じ</span>\n    <span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"n\">item</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># イメージ</span>\n<span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"n\">item</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"c1\"># 2</span>\n<span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"n\">item</span> <span class=\"c1\"># 0 + 2</span>\n<span class=\"n\">item</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"c1\"># 3</span>\n<span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"n\">item</span> <span class=\"c1\"># 2 + 3 = 5</span>\n<span class=\"n\">item</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"c1\"># 6</span>\n<span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"n\">item</span> <span class=\"c1\"># 5 + 6 == 11</span>\n<span class=\"nb\">puts</span> <span class=\"n\">sum</span> <span class=\"c1\"># =&gt; 11</span>\n<span class=\"c1\"># こんな感じです！</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>each doは配列の一つひとつにアクセスするのに便利！</li>\n</ul>\n\n<hr>\n\n<blockquote>\n<p>半角スペース区切りであたえられる5つの数字[n m l s t]を足しなさい。</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>2 3 6 14 6\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">input</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)</span>\n<span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">map!</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span>\n\n<span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span>\n    <span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"n\">item</span>\n<span class=\"k\">end</span>\n\n<span class=\"nb\">puts</span> <span class=\"n\">sum</span> <span class=\"c1\"># 31</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>です！</li>\n<li>これをメソッドにしときます</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>2 3 6 14 6\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nf\">my_gets</span>\n    <span class=\"n\">input</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)</span>\n    <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">map!</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span>\n    <span class=\"k\">return</span> <span class=\"n\">input</span>\n<span class=\"k\">end</span>\n<span class=\"nb\">p</span> <span class=\"n\">my_gets</span> <span class=\"c1\"># [2, 3, 6, 14, 6] 数字にしてくれました！</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>こんな感じでよく使う操作とかはメソッドにして、一番上に書いて、その後呼び出してあげると便利です。</li>\n<li>returnは書かなくてもいいです。（最後に評価された値が返り値になります）</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Returnの他の書き方(最初はreturn書くのがわかりやすいよ).rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nf\">my_gets</span>\n    <span class=\"n\">input</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)</span>\n    <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">map!</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span>\n    <span class=\"n\">input</span> <span class=\"c1\"># 明示的に書いてあげるとわかりやすい</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">my_gets2</span>\n    <span class=\"n\">input</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)</span>\n    <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">map</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span> <span class=\"c1\"># なんならこれでも同じ値になる</span>\n<span class=\"k\">end</span>\n\n</code></pre></div>\n</div>\n\n<ul>\n<li>ついでに配列を渡すと合計値が返ってくるメソッド</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nf\">sum_arr</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span>\n    <span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n    <span class=\"n\">arr</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span>\n        <span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"n\">item</span>\n    <span class=\"k\">end</span>\n    <span class=\"k\">return</span> <span class=\"n\">sum</span>\n<span class=\"k\">end</span>\n\n<span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]</span>\n<span class=\"nb\">p</span> <span class=\"n\">sum_arr</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"c1\"># 9</span>\n\n</code></pre></div>\n</div>\n\n<hr>\n\n<blockquote>\n<p>半角スペース区切りであたえられる5つの数字[n m l s t]を足しなさい。<br>\n入力は3行あるよ！</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>2 3 6 14 6\n4 1 14 4 4\n8 4 61 11 2\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"mi\">3</span><span class=\"p\">.</span><span class=\"nf\">times</span> <span class=\"k\">do</span>\n    <span class=\"n\">input</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)</span>\n    <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">map!</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span>\n    <span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n    <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span>\n        <span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"n\">item</span>\n    <span class=\"k\">end</span>\n    <span class=\"nb\">puts</span> <span class=\"n\">sum</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">出力.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"mi\">31</span>\n<span class=\"mi\">27</span>\n<span class=\"mi\">86</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>さっきのやつを三回繰り返したらできあがる簡単なもの。</li>\n<li>でもこれをメソッドを使って整理しとくのがおすすめ</li>\n<li>中の処理がなにやってるのかわかりにくくなって</li>\n<li>2週間後思い出せなくなったり</li>\n<li>「コードの再利用がしやすくなるよ」</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">def</span> <span class=\"nf\">sum_arr</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span>\n    <span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n    <span class=\"n\">arr</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span>\n        <span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"n\">item</span>\n    <span class=\"k\">end</span>\n    <span class=\"k\">return</span> <span class=\"n\">sum</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">my_gets</span>\n    <span class=\"n\">input</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)</span>\n    <span class=\"n\">input</span><span class=\"p\">.</span><span class=\"nf\">map</span><span class=\"p\">{</span><span class=\"o\">|</span><span class=\"n\">item</span><span class=\"o\">|</span> <span class=\"n\">item</span><span class=\"p\">.</span><span class=\"nf\">to_i</span><span class=\"p\">}</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># メインの処理はここから</span>\n<span class=\"mi\">3</span><span class=\"p\">.</span><span class=\"nf\">times</span> <span class=\"k\">do</span> <span class=\"c1\"># </span>\n    <span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"n\">my_gets</span> <span class=\"c1\"># 数値型の配列を標準入力から持ってきて</span>\n    <span class=\"nb\">puts</span> <span class=\"n\">sum_arr</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"c1\"># それを全て足し合わせるメソッドに入れて出力するだけ</span>\n<span class=\"k\">end</span>\n<span class=\"c1\"># ここまで</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>こんな感じでコードの見通しがよくなります！</li>\n</ul>\n\n<hr>\n\n<blockquote>\n<p>とりあえず、、いっぱい行渡すから全部たせよ…！</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>4\n2\n3\n5\n6\n13\n52\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"k\">while</span><span class=\"p\">(</span><span class=\"nb\">gets</span><span class=\"p\">)</span> <span class=\"c1\"># 標準入力がある間実行しなさい</span>\n    <span class=\"n\">sum</span> <span class=\"o\">+=</span> <span class=\"vg\">$_</span><span class=\"p\">.</span><span class=\"nf\">to_i</span> <span class=\"c1\"># getsで入力された値は実は$_に入ってます。</span>\n<span class=\"k\">end</span>\n<span class=\"nb\">puts</span> <span class=\"n\">sum</span> <span class=\"c1\"># 85</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>while(gets)ってすばらしい！</li>\n</ul>\n\n<hr>\n\n<blockquote>\n<p>その他</p>\n</blockquote>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>あいうえお\nあいうえお\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nb\">p</span> <span class=\"nb\">gets</span> <span class=\"c1\"># \"あいうえお\\n\"</span>\n<span class=\"nb\">p</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">chomp</span> <span class=\"c1\"># \"あいうえお\"</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>chompは一番うしろの「改行(\\n)」を取り除いてくれたりします</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">Main.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">while</span><span class=\"p\">(</span><span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">chomp</span><span class=\"p\">)</span>\n    <span class=\"nb\">p</span> <span class=\"vg\">$_</span>\n<span class=\"k\">end</span>\n<span class=\"c1\"># こんなことやろうとすると、nil(文字が入ってない時)にはつかえねーよ！ってエラーでるので注意！undefined method `chomp' for nil:NilClass (NoMethodError)</span>\n</code></pre></div>\n</div>\n\n<hr>\n\n<p>もうこのコードもわかるようになりましたか？</p>\n\n<div class=\"code-frame\" data-lang=\"text\">\n<div class=\"code-lang\"><span class=\"bold\">入力.txt</span></div>\n<div class=\"highlight\"><pre><code>C   clang 3.8 / LLVM 3.8 (C99)  2   512\nC++ clang 3.8 / LLVM 3.8 / libc++ (C++14)   2   512\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"ruby\">\n<div class=\"code-lang\"><span class=\"bold\">ruby.rb</span></div>\n<div class=\"highlight\"><pre><code><span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"p\">[]</span> <span class=\"c1\"># 配列の初期化</span>\n<span class=\"k\">while</span> <span class=\"p\">(</span><span class=\"nb\">gets</span><span class=\"p\">)</span> <span class=\"c1\"># 標準入力があるかぎり実行</span>\n    <span class=\"n\">arr</span> <span class=\"o\">&lt;&lt;</span> <span class=\"vg\">$_</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">]</span> \n    <span class=\"c1\"># 配列arrの一番最後に&lt;&lt;を使って、に目をarrに入れている</span>\n<span class=\"k\">end</span>\n<span class=\"nb\">p</span> <span class=\"n\">arr</span> <span class=\"c1\"># [\"C\", \"C++\"]</span>\n</code></pre></div>\n</div>\n\n<ul>\n<li>$_.split(\" \")[0]には [C]とか[C++]とか一番左の文字列が入ります</li>\n<li>その文字列を&lt;&lt;メソッドを使って配列arrに挿入していって</li>\n<li>最後に出力してます</li>\n</ul>\n\n<p>こんなところでしょうか。<br>\n<a href=\"https://paiza.jp/guide/samplecode.html\" rel=\"nofollow noopener\" target=\"_blank\">各言語による標準入力一覧 by paiza</a>で自分の使いたい言語調べてみると面白いですよ！rubyとかpython書くコードすくねえ。。みたいな感想いだきました。</p>\n\n<h1>\n<span id=\"いろんなサイト\" class=\"fragment\"></span><a href=\"#%E3%81%84%E3%82%8D%E3%82%93%E3%81%AA%E3%82%B5%E3%82%A4%E3%83%88\"><i class=\"fa fa-link\"></i></a>いろんなサイト</h1>\n\n<h2>\n<span id=\"プログラミング言語の選び方\" class=\"fragment\"></span><a href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9E%E3%81%AE%E9%81%B8%E3%81%B3%E6%96%B9\"><i class=\"fa fa-link\"></i></a>プログラミング言語の選び方</h2>\n\n<blockquote>\n<p>人気言語のまとめは、こちらの記事 <a href=\"https://blog.codecamp.jp/programming_language_2015\" rel=\"nofollow noopener\" target=\"_blank\">これからの時代はプログラミングって聞くけどどの言語がいいの？</a>が参考になると思います。いろんな集計媒体ごとに人気の言語は違うのがよくわかるかと思います。</p>\n\n<p>また、How To Become A Hackerの<a href=\"http://cruel.org/freeware/hacker.html\" rel=\"nofollow noopener\" target=\"_blank\">日本語訳</a>も参考になると思います。</p>\n</blockquote>\n\n<p>初心者の方は、取得の敷居が低い言語(PythonとかRuby?)から初めてみたらいいんじゃないかなとか思ったらい。</p>\n\n<h2>\n<span id=\"アルゴリズムサイトのまとめ\" class=\"fragment\"></span><a href=\"#%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>アルゴリズムサイトのまとめ</h2>\n\n<h3>\n<span id=\"プログラミングコンテストの解説\" class=\"fragment\"></span><a href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%82%B3%E3%83%B3%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E8%A7%A3%E8%AA%AC\"><i class=\"fa fa-link\"></i></a>プログラミングコンテストの解説</h3>\n\n<blockquote>\n<p>どのプログラミングコンテストに挑戦しよう??と思ったら<a href=\"http://cocodrips.hateblo.jp/entry/2015/10/11/114212\" rel=\"nofollow noopener\" target=\"_blank\">強くなるためのプログラミング -様々なプログラミングコンテストとそのはじめ方-</a>こちらが参考になります。プログラミングコンテストには、サーバーサイド系、セキュリティ系、データマイニング、AI、アルゴリズムとたくさんあって、各コンテストをマトリックスにまとめられてすごく参考になりました。</p>\n</blockquote>\n\n<h3>\n<span id=\"オンラインジャッジ系のサイト一覧\" class=\"fragment\"></span><a href=\"#%E3%82%AA%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%B3%E3%82%B8%E3%83%A3%E3%83%83%E3%82%B8%E7%B3%BB%E3%81%AE%E3%82%B5%E3%82%A4%E3%83%88%E4%B8%80%E8%A6%A7\"><i class=\"fa fa-link\"></i></a>オンラインジャッジ系のサイト一覧</h3>\n\n<blockquote>\n<p>こちらが<a href=\"http://qiita.com/shibacho/items/20f6eee42083c620b556\" id=\"reference-0488521054dd780878ca\">言語の習得やアルゴリズムの学習に最適 オンラインジャッジサイト一覧</a>でまとめられてます。とりあえずストックとかブックマークしておくと、便利です。</p>\n</blockquote>\n\n<h3>\n<span id=\"-ワタシ的なアルゴリズムサイトのおすすめ\" class=\"fragment\"></span><a href=\"#-%E3%83%AF%E3%82%BF%E3%82%B7%E7%9A%84%E3%81%AA%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AE%E3%81%8A%E3%81%99%E3%81%99%E3%82%81\"><i class=\"fa fa-link\"></i></a><i></i> ワタシ的なアルゴリズムサイトのおすすめ</h3>\n\n<p>個人的には断然Paizaをおすすめします。理由は問題のレベルにバラツキがすくないこと、それと数学苦手でも解けるということ、です。問題を解く快感にはまってBランクの問題まで全部解いてます。Aとかは半分くらい。</p>\n\n<h2>\n<span id=\"アルゴリズムの可視化\" class=\"fragment\"></span><a href=\"#%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%81%AE%E5%8F%AF%E8%A6%96%E5%8C%96\"><i class=\"fa fa-link\"></i></a>アルゴリズムの可視化</h2>\n\n<blockquote>\n<p>海外のサイトですが、アルゴリズムの可視化されてるのでかなりおもしろいずっと眺めてられます。<br>\n<a href=\"https://visualgo.net/sorting\" rel=\"nofollow noopener\" target=\"_blank\">visualgo</a><br>\n適当に触るとソートとかのアルゴリズムが動き出しますが、英語でわからないという方はこちら<a href=\"http://news.livedoor.com/article/detail/9160957/\" rel=\"nofollow noopener\" target=\"_blank\">アルゴリズムとプログラミングをビジュアルで一挙に理解できる「VisuAlgo」</a>を参考にされるといいかと思います。</p>\n</blockquote>\n\n<h2>\n<span id=\"font-awesome\" class=\"fragment\"></span><a href=\"#font-awesome\"><i class=\"fa fa-link\"></i></a>font awesome</h2>\n\n<p><i></i><br>\nこんな感じの絵文字みたいなのをQiitaで使えるのでぜひ！</p>\n\n<h1>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h1>\n\n<p>切に願うことは[標準入力ってなに…]みたいな本当ささいなことでことでつまづく人を減らしていきたい。そんな思いがあります。</p>\n\n<p>コーディングが上達するきっかけは人それぞれだとは思いますが、私はアルゴリズムの問題解きながら、言語の文法を覚えていきました。数独とか、問題解くことが好きな方ってはまると思うんですよ、アルゴリズム。電車で、数独解いてる方みると、ほらアルゴリズムの世界に足を踏み入れてよ、みたいな感情がわいたりします(ちょっと誇張)</p>\n\n<p>この世界に一歩踏み出した方、いっぱいエラーだしてください。google検索してみてください。少しでもこのページが参考になると嬉しいです。</p>\n\n<p>.</p>\n","body":"# はじめに\n\n自分が1年くらい独学で勉強して、2017年1月にエンジニアに転職したので、当時苦労した点などを思い出しつつ、このタイミングでまとめられたらいいと思っています。\n何か間違いとか異論ありましたらコメント欄でお願いします。\n\n# <i class=\"fa fa-cubes\" style=\"font-size:1em;\"></i> 記事について\n## やりたいこと\n### **一緒にpaiza.IOを使いRubyで頭の体操をしましょう!!**\npaiza.IO: 言語ごとに環境構築しなくていいオンラインサービスなので、今回はこれを使います。\nRuby: 今回はプログラミング言語のRubyを使います。\n頭の体操: 数独とかクイズとか好きな人は、アルゴリズムの問題サイトを解くのすごく達成感あると思います！！\n\n## 記事の対象者\n- プログラミングを習い初めたけど、何から始めよう。\n- ドットインストールくらいはみたよ\n- アルゴリズムの問題解きたい !!\n- 標準入力ってなに ??\n- どんな言語選べば良いのかな。環境構築大変そう。\n- Paiza, CodeIQ, yukicoderなどのサイトを使ってみたい。\n\n## 記事での勉強法おすすめ\nアルゴリズムの問題を解きまくろう\n\n## 記事を読み終えると\n[ 標準入力 ]が使えるようになる！\n\nアルゴリズムの問題サイトで、簡単な問題を解くことができるようになります！！\n最後までお付き合いください。\n\n\n\n# paiza.IO\n### paiza.IOは[こちら](https://paiza.io/projects/new)。\nコードを書いたらそのまま実行できるオンラインサービスで、かなり便利です。\n[help](https://paiza.io/help)によると対応言語はこちら。\n[ C, C++, C#, Java, Python2, Python3, Ruby, Perl, PHP, JavaScript, Objective-C, Scala, Swift, Go, Haskell, CoffeeScript, Bash, Erlang, R, COBOL, VB, F#, Clojure, D, Elixir, MySQL ]\n使い方はこちら[paiza.IO の使い方](http://qiita.com/saltheads/items/ecb2292c456738d3e118)にまとまってましたので参考にされるといいかと思います。私が扱うのは標準入力の機能付近です。\n\n## 簡単な文字の入力と出力はpaiza.IOが便利\n\n上記の[help](https://paiza.io/help)から対応言語をコピーしてきたらこちら\n\n```help.txt\nC\tclang 3.8 / LLVM 3.8 (C99)\t2\t512\nC++\tclang 3.8 / LLVM 3.8 / libc++ (C++14)\t2\t512\nC#\tmono-4.2.1 (C#6, CLI4.5)\t2\t512\nJava\tjava 1.8.0\t2\t512\nPython2\tpython 2.7.12\t2\t512\nPython3\tpython 3.5.2\t2\t512\n(以下省略)\n```\nこういう簡単なテキストの処理がpaiza.IOでは便利だと思ってます。\n\n<img width=\"543\" alt=\"スクリーンショット 2017-02-24 12.14.45.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/6395acb8-2d20-a908-aa56-177b67ee7d12.png\">\n[help](https://paiza.io/help)の対応言語一覧からのコピーを上の画像の「入力」という部分に貼り付け、rubyコードを書き実行すると「出力」に結果がでます。\n\n```ruby.rb\narr = [] # 配列の初期化\nwhile (gets) # 標準入力があるかぎり実行\n    arr << $_.split(\" \")[0] \n    # $_に標準入力が入る\n    # split(\" \")で半角スペースで区切り、配列にする\n    # 配列の一番目をarrに入れている\nend\np arr\n# p arr の出力結果がこちら\n[\"C\", \"C++\", \"C#\", \"Java\", \"Python2\", \"Python3\", \"Ruby\", \"Perl\", \"PHP\", \n\"JavaScript\", \"Objective-C\", \"Scala\", \"Swift\", \"Go\", \"Haskell\", \"CoffeeScript\", \n\"Bash\", \"Erlang\", \"R\", \"COBOL\", \"VB\", \"F#\", \"Clojure\", \"D\", \"Elixir\", \"MySQL\"]\n```\nこんな感じで、簡単なテキスト処理をしたいというときにはかなり使ってます。\nコードは非公開設定もできます。\n\nこのpaiza.IOを使ってアルゴリズムの問題とか、初心者の時自分がつまずいた点を以下に書いていきたいと思います。\n\n\n# 標準入力を使ってみよう\n\n## 今後の書き方のまとめ\n<img width=\"569\" alt=\"スクリーンショット 2017-02-24 13.35.10.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/8226ff86-8814-cbbe-166e-cc801be95755.png\">\n \n言語は左上の[Ruby]と選んでください。\n\n```Main.rb\n# Main.rbのここにコード書いていきます。\n# 隣にファイル追加できたりしますが一旦は使わない方向で！\n```\n* 実行 => ファイル実行。アカウントログインしてる人だと成功するとデータ保存される！\n* 出力 => pとかputsとかprintとかの出力結果\n\n```入力.txt\n# こんな形で入力は[ 入力.txt ]と書く場合があると思いますので、入力欄に入れてください！\n```\n* 入力 => ここが噂の標準入力\n* 実行時エラー => エラーが出た場合は画面がオレンジっぽいの出るので、ここを見ましょう！\n\n\n# さて本題、標準入力を使ったデータ操作を見ていきましょう！\n> Q. こんな感じで問題だしていくのでその操作のサンプルを書いていきます！\n\nrubyの[p]というのは出力ですが、文字列ならの5なら[ \"5\" ]と数値の5なら[ 5 ]と出力してくれるので、判断に使ってください！\n\n## 数字の扱い\n\n> Q. 数字が与えられるのでそれを5倍して出力しなさい\n\n```入力.txt\n4\n```\n\n```Main.rb\ni = gets\np i # => \"4\" 文字列の4が出力されます。\np i * 5 # => \"44444\" 文字列が5回繰り返して出力されます\np i.to_i # => 4 数値の4が出力されました。\np i.to_i * 5 # => 20 数値の20が出力\n```\n* p 文字列か数値かをわかりやすく出力してくれる\n* gets 標準入力から一列取得してくる\n* iという変数にgetsを代入\n* .to_i　というメソッドで数値への変換を行っている\n* [ * ]これはかけるという意味で、文字列数値どちらでも使えます。\n\nどんどんいきますよ〜〜〜〜\n\n***\n\n> Q. 数字が3行で与えられるのですべてを足して出力せよ\n\n```入力.txt\n7\n13\n5\n```\n\n```Main.rb\nsum = 0\nsum += gets.to_i # sumには7が足されます\nsum += gets.to_i # sumには13が足されます\nsum += gets.to_i # sumには5が足されます\nputs sum # => 25が出力されました！\n```\n* puts 文字列でも数値でも\"\"なしで出力されます\n* 3回同じ操作をするのはコードが冗長なので、同じ結果が得られる別の書き方にかえます\n\n```Main.rb\nsum = 0\n3.times do\n    sum += gets.to_i\nend\nputs sum # => 25が出力されました！\n```\n* 3.times do end =>　3回実行せよって命令です。\n* さきほどと同じように7,13,5がどんどん足されていきます。\n\n***\n\n> n個の数値をかけ合わせなさい\n> 一行目にnを、残りのn行に数値を入れるとする\n\n```入力.txt\n4 # ここに書いてある数値の分だけ、掛け算するよ！ \n1\n2\n3\n4\n```\n\n1 * 2 * 3 * 4の出力がみたいってこと！\n\n```Main.rb\nnum = gets.to_i # 最初の4が入る\nsum = 1 # 掛け算するので最初は0にしちゃだめ\nnum.times do # numの数(4)回実行されるよ\n    sum *= gets.to_i # 1~4がどんどん掛け算されていく\nend\nputs sum # => 24が出力されました！\n```\n* num.times do のnumは変数でもOKです！今回は4回実行されました。\n\n次いくよ〜〜\n\n*** \n\n## 配列の操作\n\n> [n m]と入力があるので、n*mを出力しなさい！\n\n```入力.txt\n4 6\n```\n\n```Main.rb\n\ninput = gets\np input # => [\"4 6\"]\np input.split(\" \") # => [\"4\", \"6\"]\n=begin\n[\"4\", \"6\"]は配列になっていて\n0番目の要素に\"4\"が\n1番目の要素に\"6\"が入っています。\n=end\np input.split(\" \")[0] # => \"4\"\np input.split(\" \")[1] # => \"6\"\np input.split(\" \")[0].to_i # => 4\np input.split(\" \")[1].to_i # => 6\nputs input.split(\" \")[0].to_i * input.split(\" \")[1].to_i # => 24\n\n```\n* rubyのコメントは#(一行コメント)\n* =beginから=endまで(複数行コメント)\n* splitは分割して配列にしてくれるメソッド\n* 今回はsplit(\"半角スペース\")で[4 6]を分割\n* もうちょっときれいに書くと\n\n```Main.rb\ninput = gets.split(\" \") # 入力をすぐに配列に分割\nnum1 = input[0].to_i # 配列の0番目を数値に\nnum2 = input[1].to_i # 配列の1番目を数値に\nputs num1 * num2 # 数値の掛け算\n```\n\nみたいな感じでしょうか。次行きます〜〜〜\n\n***\n\n> 半角スペース区切りであたえられる5つの数字[n m l s t]を足しなさい。\n\n```入力.txt\n2 3 6 14 6\n```\n\n```Main.rb\ninput = gets.split(\" \") # 半角スペース区切りで配列にする\np input # => [\"2\", \"3\", \"6\", \"14\", \"6\"] \ninput.map!{|item| item.to_i} # 配列の中をすべて数字に変えるメソッド\np input # => [2, 3, 6, 14, 6]\n\nsum = 0\ninput.each do |item| # inputの中身を一個一個取り出すメソッド\n    sum += item\nend\n\nputs sum # 31\n```\n* mapメソッドの解説\n* （mapは難しいので私はなんとなく使ってた。使いたい度にGoogleで調べてたから覚えなくてもいいかも）\n* まずは破壊的メソッド(!!!!!)と非破壊の違い\n\n```map.rb\narr = [\"2\", \"3\"]\np arr.map!{|item| item.to_i} # [2, 3] !つけるとarrの配列を置き換えるよ\np arr # [2, 3]\np arr.map{|item| item.to_s} # to_sで文字列に変換　[\"2\", \"3\"]\np arr # [2, 3] 上で!つけてないので、あれ文字列から数値に戻りました。\n\narr2 = [\"4\", \"5\"]\narr2.map!{|item| item.to_i} # こうやって!つけるか\np arr2 # [4, 5]\narr3 = arr2.map{|item| item.to_i} # 別の配列に入れてあげないと駄目\np arr3 # [4, 5]\n```\n* |item|とはなんぞや\n\n```map.rb\narr = [\"2\", \"3\"]\narr.map!{|item| item.to_i}\n=begin\n|item|の文字はiでもnumでもｓｔｒでもtmpでもなんでもいい\n配列arrにはいってる文字を全てitemにいれて処理してる感じ。\n=end\n\n# イメージこんな感じ\narr = [\"2\", \"3\"]\nitem = arr[0] # itemに最初の文字\"2\"を代入\narr[0] = item.to_i # arrの0番目に数値2を代入\np arr # [2, \"3\"]\nitem = arr[1] # itemに次の文字\"3\"を代入\narr[1] = item.to_i # arrの1番目に数値3を代入\np arr # [2, 3]\n# 無事すべて数字になりました〜〜！！\n\n```\n\n* 次はeach doメソッド\n\n```Main.rb\narr = [2, 3, 6]\nsum = 0\narr.each do |item| # arrの中身を一個itemに入れてる感じ\n    sum += item\nend\n\n# イメージ\nsum = 0\nitem = arr[0] # 2\nsum += item # 0 + 2\nitem = arr[1] # 3\nsum += item # 2 + 3 = 5\nitem = arr[2] # 6\nsum += item # 5 + 6 == 11\nputs sum # => 11\n# こんな感じです！\n```\n* each doは配列の一つひとつにアクセスするのに便利！\n\n***\n\n> 半角スペース区切りであたえられる5つの数字[n m l s t]を足しなさい。\n\n```入力.txt\n2 3 6 14 6\n```\n\n```Main.rb\ninput = gets.split(\" \")\ninput.map!{|item| item.to_i}\n\nsum = 0\ninput.each do |item|\n    sum += item\nend\n\nputs sum # 31\n```\n* です！\n* これをメソッドにしときます\n\n```入力.txt\n2 3 6 14 6\n```\n\n```Main.rb\ndef my_gets\n    input = gets.split(\" \")\n    input.map!{|item| item.to_i}\n    return input\nend\np my_gets # [2, 3, 6, 14, 6] 数字にしてくれました！\n```\n* こんな感じでよく使う操作とかはメソッドにして、一番上に書いて、その後呼び出してあげると便利です。\n* returnは書かなくてもいいです。（最後に評価された値が返り値になります）\n\n```Returnの他の書き方(最初はreturn書くのがわかりやすいよ).rb\ndef my_gets\n    input = gets.split(\" \")\n    input.map!{|item| item.to_i}\n    input # 明示的に書いてあげるとわかりやすい\nend\n\ndef my_gets2\n    input = gets.split(\" \")\n    input.map{|item| item.to_i} # なんならこれでも同じ値になる\nend\n\n```\n* ついでに配列を渡すと合計値が返ってくるメソッド\n\n```Main.rb\ndef sum_arr(arr)\n    sum = 0\n    arr.each do |item|\n        sum += item\n    end\n    return sum\nend\n\narr = [1, 3, 5]\np sum_arr(arr) # 9\n\n```\n\n***\n\n> 半角スペース区切りであたえられる5つの数字[n m l s t]を足しなさい。\n> 入力は3行あるよ！\n\n```入力.txt\n2 3 6 14 6\n4 1 14 4 4\n8 4 61 11 2\n```\n\n```Main.rb\n3.times do\n    input = gets.split(\" \")\n    input.map!{|item| item.to_i}\n    sum = 0\n    input.each do |item|\n        sum += item\n    end\n    puts sum\nend\n```\n\n```出力.rb\n31\n27\n86\n```\n* さっきのやつを三回繰り返したらできあがる簡単なもの。\n* でもこれをメソッドを使って整理しとくのがおすすめ\n* 中の処理がなにやってるのかわかりにくくなって\n* 2週間後思い出せなくなったり\n* 「コードの再利用がしやすくなるよ」\n\n```Main.rb\ndef sum_arr(arr)\n    sum = 0\n    arr.each do |item|\n        sum += item\n    end\n    return sum\nend\n\ndef my_gets\n    input = gets.split(\" \")\n    input.map{|item| item.to_i}\nend\n\n# メインの処理はここから\n3.times do # \n    arr = my_gets # 数値型の配列を標準入力から持ってきて\n    puts sum_arr(arr) # それを全て足し合わせるメソッドに入れて出力するだけ\nend\n# ここまで\n```\n* こんな感じでコードの見通しがよくなります！\n\n***\n\n> とりあえず、、いっぱい行渡すから全部たせよ…！\n\n```入力.txt\n4\n2\n3\n5\n6\n13\n52\n```\n\n```Main.rb\nsum = 0\nwhile(gets) # 標準入力がある間実行しなさい\n    sum += $_.to_i # getsで入力された値は実は$_に入ってます。\nend\nputs sum # 85\n```\n* while(gets)ってすばらしい！\n\n*** \n\n> その他\n\n```入力.txt\nあいうえお\nあいうえお\n```\n\n```Main.rb\np gets # \"あいうえお\\n\"\np gets.chomp # \"あいうえお\"\n```\n* chompは一番うしろの「改行(\\n)」を取り除いてくれたりします\n\n```Main.rb\nwhile(gets.chomp)\n    p $_\nend\n# こんなことやろうとすると、nil(文字が入ってない時)にはつかえねーよ！ってエラーでるので注意！undefined method `chomp' for nil:NilClass (NoMethodError)\n```\n\n***\n\nもうこのコードもわかるようになりましたか？\n\n```入力.txt\nC\tclang 3.8 / LLVM 3.8 (C99)\t2\t512\nC++\tclang 3.8 / LLVM 3.8 / libc++ (C++14)\t2\t512\n```\n\n```ruby.rb\narr = [] # 配列の初期化\nwhile (gets) # 標準入力があるかぎり実行\n    arr << $_.split(\" \")[0] \n    # 配列arrの一番最後に<<を使って、に目をarrに入れている\nend\np arr # [\"C\", \"C++\"]\n```\n\n* $_.split(\" \")[0]には [C]とか[C++]とか一番左の文字列が入ります\n* その文字列を<<メソッドを使って配列arrに挿入していって\n* 最後に出力してます\n\n\n\nこんなところでしょうか。\n[各言語による標準入力一覧 by paiza](https://paiza.jp/guide/samplecode.html)で自分の使いたい言語調べてみると面白いですよ！rubyとかpython書くコードすくねえ。。みたいな感想いだきました。\n\n\n\n# いろんなサイト\n\n## プログラミング言語の選び方\n> 人気言語のまとめは、こちらの記事 [これからの時代はプログラミングって聞くけどどの言語がいいの？](https://blog.codecamp.jp/programming_language_2015)が参考になると思います。いろんな集計媒体ごとに人気の言語は違うのがよくわかるかと思います。\n\n> また、How To Become A Hackerの[日本語訳](http://cruel.org/freeware/hacker.html)も参考になると思います。\n\n初心者の方は、取得の敷居が低い言語(PythonとかRuby?)から初めてみたらいいんじゃないかなとか思ったらい。\n\n## アルゴリズムサイトのまとめ\n\n### プログラミングコンテストの解説\n> どのプログラミングコンテストに挑戦しよう??と思ったら[強くなるためのプログラミング -様々なプログラミングコンテストとそのはじめ方-](http://cocodrips.hateblo.jp/entry/2015/10/11/114212)こちらが参考になります。プログラミングコンテストには、サーバーサイド系、セキュリティ系、データマイニング、AI、アルゴリズムとたくさんあって、各コンテストをマトリックスにまとめられてすごく参考になりました。\n\n### オンラインジャッジ系のサイト一覧\n> こちらが[言語の習得やアルゴリズムの学習に最適 オンラインジャッジサイト一覧](http://qiita.com/shibacho/items/20f6eee42083c620b556)でまとめられてます。とりあえずストックとかブックマークしておくと、便利です。\n\n### <i class=\"fa fa-comment-o\" aria-hidden=\"true\"></i> ワタシ的なアルゴリズムサイトのおすすめ\n個人的には断然Paizaをおすすめします。理由は問題のレベルにバラツキがすくないこと、それと数学苦手でも解けるということ、です。問題を解く快感にはまってBランクの問題まで全部解いてます。Aとかは半分くらい。\n\n## アルゴリズムの可視化\n> 海外のサイトですが、アルゴリズムの可視化されてるのでかなりおもしろいずっと眺めてられます。\n[visualgo](https://visualgo.net/sorting)\n適当に触るとソートとかのアルゴリズムが動き出しますが、英語でわからないという方はこちら[アルゴリズムとプログラミングをビジュアルで一挙に理解できる「VisuAlgo」](http://news.livedoor.com/article/detail/9160957/)を参考にされるといいかと思います。\n\n## font awesome\n<i class=\"fa fa-cubes\" style=\"font-size:1em;\"></i>\nこんな感じの絵文字みたいなのをQiitaで使えるのでぜひ！\n\n# 最後に\n切に願うことは[標準入力ってなに…]みたいな本当ささいなことでことでつまづく人を減らしていきたい。そんな思いがあります。\n\nコーディングが上達するきっかけは人それぞれだとは思いますが、私はアルゴリズムの問題解きながら、言語の文法を覚えていきました。数独とか、問題解くことが好きな方ってはまると思うんですよ、アルゴリズム。電車で、数独解いてる方みると、ほらアルゴリズムの世界に足を踏み入れてよ、みたいな感情がわいたりします(ちょっと誇張)\n\nこの世界に一歩踏み出した方、いっぱいエラーだしてください。google検索してみてください。少しでもこのページが参考になると嬉しいです。\n\n\n\n\n.\n","coediting":false,"comments_count":0,"created_at":"2017-02-25T16:39:12+09:00","group":null,"id":"7b7ee34941d62226c581","likes_count":45,"private":false,"reactions_count":0,"stocks_count":51,"tags":[{"name":"Ruby","versions":[]},{"name":"アルゴリズム","versions":[]}],"title":"[ paiza.IOを使った ] 標準入力入門とアルゴリズム入門(Ruby)","updated_at":"2018-02-27T11:51:29+09:00","url":"https://qiita.com/ykhirao/items/7b7ee34941d62226c581","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h2>\n<span id=\"201912-追記\" class=\"fragment\"></span><a href=\"#201912-%E8%BF%BD%E8%A8%98\"><i class=\"fa fa-link\"></i></a>2019/12 追記</h2>\n\n<p><a href=\"https://qiita.com/ta9star/items/da9af53c4bf542d3ae7a\" id=\"reference-cdbca421ec3c74585d6e\">LTのスライド作成に時間をかけたくない</a><br>\nでリンクをいただいたので調べると、すごくよい機能があるみたいです。！！</p>\n\n<p><a href=\"https://marketplace.visualstudio.com/items?itemName=marp-team.marp-vscode\" rel=\"nofollow noopener\" target=\"_blank\">Marp for VSCode</a>というのがあるみたいで、VSCodeを使っている人はこれでいいのではないでしょうか。</p>\n\n<h2>\n<span id=\"201808-追記\" class=\"fragment\"></span><a href=\"#201808-%E8%BF%BD%E8%A8%98\"><i class=\"fa fa-link\"></i></a>2018/08 追記</h2>\n\n<p>未だにいいねされるので（2017年初期作成）、<br>\n最近の勉強会でよく使われているスライド作成ツールはマークダウンではありませんが<br>\n<a href=\"https://slides.com/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://slides.com/</a> 圧倒的にこれだと思います。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/294160fec109310534727a30dd6927f6508f2219/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f34393566326334352d363265392d366139302d373266342d6333313631336661636263302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F495f2c45-62e9-6a90-72f4-c31613facbc0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9ece351b9356f11a092150d510e44bd8\" alt=\"Screenshot from 2018-10-25 12-35-55.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/495f2c45-62e9-6a90-72f4-c31613facbc0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F495f2c45-62e9-6a90-72f4-c31613facbc0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3d03854bc79cf14fdaf6fca6f1a5b214 1x\" loading=\"lazy\"></a></p>\n\n<p>Web上で簡単にスライド作れる系のやつです。</p>\n\n<h1>\n<span id=\"markdown記法でスライドを作ろう\" class=\"fragment\"></span><a href=\"#markdown%E8%A8%98%E6%B3%95%E3%81%A7%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86\"><i class=\"fa fa-link\"></i></a>Markdown記法でスライドを作ろう！</h1>\n\n<h2>\n<span id=\"内容\" class=\"fragment\"></span><a href=\"#%E5%86%85%E5%AE%B9\"><i class=\"fa fa-link\"></i></a>内容</h2>\n\n<ul>\n<li>簡単な発表に使えるツールのまとめ</li>\n<li>Markdown記法 + スライド作成！</li>\n</ul>\n\n<h2>\n<span id=\"心の声思ってないですよ\" class=\"fragment\"></span><a href=\"#%E5%BF%83%E3%81%AE%E5%A3%B0%E6%80%9D%E3%81%A3%E3%81%A6%E3%81%AA%E3%81%84%E3%81%A7%E3%81%99%E3%82%88\"><i class=\"fa fa-link\"></i></a>心の声(思ってないですよ！)</h2>\n\n<ul>\n<li>最近Markdown記法使いすぎて、PPTの作成めんどくさい</li>\n<li>PPTを作らずboostnoteでの発表を本気で考えた</li>\n<li>忙しくて…レイアウトにこだわりたくない…簡単な発表にしたいけどどうすればいいの</li>\n<li>自己紹介発表めんどう…</li>\n</ul>\n\n<h2>\n<span id=\"試したツール一覧\" class=\"fragment\"></span><a href=\"#%E8%A9%A6%E3%81%97%E3%81%9F%E3%83%84%E3%83%BC%E3%83%AB%E4%B8%80%E8%A6%A7\"><i class=\"fa fa-link\"></i></a>試したツール一覧</h2>\n\n<ul>\n<li>reveal.js</li>\n<li>remark.js</li>\n<li>Marp</li>\n<li>Swipe</li>\n<li>Qiita</li>\n</ul>\n\n<h2>\n<span id=\"ツールごとのイメージ\" class=\"fragment\"></span><a href=\"#%E3%83%84%E3%83%BC%E3%83%AB%E3%81%94%E3%81%A8%E3%81%AE%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"><i class=\"fa fa-link\"></i></a>ツールごとのイメージ</h2>\n\n<p>こんな感じのマークダウンを書いた結果がこちら。</p>\n\n<div class=\"code-frame\" data-lang=\"gcc-machine-description\">\n<div class=\"code-lang\"><span class=\"bold\">sample.md</span></div>\n<div class=\"highlight\"><pre><code>[Title]\n===\n###### Created by Yuki ( [@ykhirao](http://qiita.com/ykhirao) )\n</code></pre></div>\n</div>\n\n<ul>\n<li><p>reveal.js<br>\n<a href=\"https://camo.qiitausercontent.com/c8b7ddc413accbc07d254eb03d8d6d94a5d6b553/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f30303936373962322d663731362d313933342d646336622d6638343932353031656361392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1124\" alt=\"スクリーンショット 2017-02-24 15.42.13.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F009679b2-f716-1934-dc6b-f8492501eca9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6a9a719a5b7da3bc591600f962d7b031\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/009679b2-f716-1934-dc6b-f8492501eca9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F009679b2-f716-1934-dc6b-f8492501eca9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=196be78c7d51cc5185f62578d20ee448 1x\" loading=\"lazy\"></a></p></li>\n<li><p>remark.js<br>\n<a href=\"https://camo.qiitausercontent.com/ff3b1caf5c5ad592abb08b2718bfc525452dce5e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f66616562643964392d326561622d373637342d316534322d3964633936333735616562662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"697\" alt=\"スクリーンショット 2017-02-24 15.42.20.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Ffaebd9d9-2eab-7674-1e42-9dc96375aebf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ea300528143b1adf7bdabbc078ab4234\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/faebd9d9-2eab-7674-1e42-9dc96375aebf.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Ffaebd9d9-2eab-7674-1e42-9dc96375aebf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f2b2eb0fd38d15f515c8ef8fe22ca701 1x\" loading=\"lazy\"></a></p></li>\n<li><p>Marp<br>\n<a href=\"https://camo.qiitausercontent.com/ec5e4e9728de29fda1baab00cbeeab9217cacd81/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f38316339643966382d633866352d393261312d353063352d3631383435363434323333332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"985\" alt=\"スクリーンショット 2017-02-24 15.42.25.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F81c9d9f8-c8f5-92a1-50c5-618456442333.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cfbf17999e6291b38107097411a9f68f\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/81c9d9f8-c8f5-92a1-50c5-618456442333.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F81c9d9f8-c8f5-92a1-50c5-618456442333.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2ad78e8601d5f6b738bc970564eb9ee6 1x\" loading=\"lazy\"></a></p></li>\n<li><p>Swipe<br>\n<a href=\"https://camo.qiitausercontent.com/1212ca5e8b2c77c5366578f5eb86010e41c5e29f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f39363636393039352d656631302d393330622d353434642d3666633235383032323462642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1092\" alt=\"スクリーンショット 2017-02-24 15.42.33.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F96669095-ef10-930b-544d-6fc2580224bd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7c2309311c6476c414c9a1d45c7c0ce1\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/96669095-ef10-930b-544d-6fc2580224bd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F96669095-ef10-930b-544d-6fc2580224bd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0b56697dca4d58790dc079fbe8a78f52 1x\" loading=\"lazy\"></a></p></li>\n<li><p>Qiita<br>\n<a href=\"https://camo.qiitausercontent.com/0c2ccdc659c80a722f767cd8648a8911463755d3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f63333531383766622d336337332d333638342d313462652d3839363135393563393966392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"709\" alt=\"スクリーンショット 2017-02-24 15.42.40.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc35187fb-3c73-3684-14be-8961595c99f9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7cf079dd84a7e24c606c92f1c0b3db84\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/c35187fb-3c73-3684-14be-8961595c99f9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fc35187fb-3c73-3684-14be-8961595c99f9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9180ab0dd13f40af8fdefe0e0c4a9161 1x\" loading=\"lazy\"></a></p></li>\n</ul>\n\n<h3>\n<span id=\"次のサンプル\" class=\"fragment\"></span><a href=\"#%E6%AC%A1%E3%81%AE%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB\"><i class=\"fa fa-link\"></i></a>次のサンプル</h3>\n\n<p>次はこんな感じのマークダウンを書きました。</p>\n\n<div class=\"code-frame\" data-lang=\"gcc-machine-description\">\n<div class=\"code-lang\"><span class=\"bold\">sample.md</span></div>\n<div class=\"highlight\"><pre><code># How to write (1)\n\n# # h1 test テスト\n## ## h2 test テスト\n### ### h3 test テスト\n#### #### h4 test テスト\n</code></pre></div>\n</div>\n\n<ul>\n<li><p>reveal.js<br>\n<a href=\"https://camo.qiitausercontent.com/f4da89848ba4c3c33c30f663445a22ff6abcc70d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f32656561633430642d353165382d633237342d306536642d3339333866626630653738352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1131\" alt=\"スクリーンショット 2017-02-24 15.48.47.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F2eeac40d-51e8-c274-0e6d-3938fbf0e785.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=74fcb089652e7aa3eb8a791a00ea4014\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/2eeac40d-51e8-c274-0e6d-3938fbf0e785.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F2eeac40d-51e8-c274-0e6d-3938fbf0e785.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d4de648d26d5452713f8b458c34c919b 1x\" loading=\"lazy\"></a></p></li>\n<li><p>remark.js<br>\n<a href=\"https://camo.qiitausercontent.com/52dece487f26fddb77759583a27cc29ccee4fcda/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f30356565363238632d393566342d653036612d333862622d6230626136613038633837662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"709\" alt=\"スクリーンショット 2017-02-24 15.48.53.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F05ee628c-95f4-e06a-38bb-b0ba6a08c87f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3f743f93b2acdcbce2aff06bb3c8afa2\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/05ee628c-95f4-e06a-38bb-b0ba6a08c87f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F05ee628c-95f4-e06a-38bb-b0ba6a08c87f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=02e125a0ebf8ecc82404406c97ac70ed 1x\" loading=\"lazy\"></a></p></li>\n<li><p>Marp<br>\n<a href=\"https://camo.qiitausercontent.com/758ea8ed9f08969d43b4d8072d632b078b1e3d84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f30346666633263352d613639302d303963332d616538372d6265306336653030383036312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1005\" alt=\"スクリーンショット 2017-02-24 15.48.58.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F04ffc2c5-a690-09c3-ae87-be0c6e008061.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9362fc0690d9fb1d4e45323cb91d5920\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/04ffc2c5-a690-09c3-ae87-be0c6e008061.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F04ffc2c5-a690-09c3-ae87-be0c6e008061.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a3ab9a78e9993deb9624da67b471d7e1 1x\" loading=\"lazy\"></a></p></li>\n<li><p>Swipe<br>\n<a href=\"https://camo.qiitausercontent.com/a3998ac57069a1675de832950847bdee0724b5f9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f64383230366163342d333530362d653266652d626533612d3836303530306139363934612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"1127\" alt=\"スクリーンショット 2017-02-24 15.49.03.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fd8206ac4-3506-e2fe-be3a-860500a9694a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b23e9a992a759898cfb9f731fa87287a\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/d8206ac4-3506-e2fe-be3a-860500a9694a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2Fd8206ac4-3506-e2fe-be3a-860500a9694a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7fbf0464e385db2fc879eda2cb4b320e 1x\" loading=\"lazy\"></a></p></li>\n<li><p>Qiita<br>\n<a href=\"https://camo.qiitausercontent.com/484703922e0fea0abf650bc2b745b1fb6ec3cf90/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3131323932392f38306634623064342d613931302d636530652d633665352d3461653632386233383539652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img width=\"722\" alt=\"スクリーンショット 2017-02-24 15.49.07.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F80f4b0d4-a910-ce0e-c6e5-4ae628b3859e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=07addfa5c493a234e8680c24a57b86d9\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/80f4b0d4-a910-ce0e-c6e5-4ae628b3859e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F112929%2F80f4b0d4-a910-ce0e-c6e5-4ae628b3859e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=72fc9875c7c79c4f38dac5aca5aec247 1x\" loading=\"lazy\"></a></p></li>\n</ul>\n\n<h3>\n<span id=\"その他ちょっと長めのmdファイルの結果のスライド\" class=\"fragment\"></span><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E9%95%B7%E3%82%81%E3%81%AEmd%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E7%B5%90%E6%9E%9C%E3%81%AE%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89\"><i class=\"fa fa-link\"></i></a>その他ちょっと長めのmdファイルの結果のスライド</h3>\n\n<p><a href=\"https://github.com/ykhirao/SlideByMarkdown/blob/gh-pages/main_contents.txt\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a>のMarkDown記法で書いたファイルを微調整しつつ作ったスライド一覧がこちら！<br>\nどれもほとんどプレーンMarkDownですが、<br>\nCSSとかいじらなくても、ある程度整えてくれるものが多いです！</p>\n\n<p>reveal.jsは<a href=\"https://ykhirao.github.io/qiita/slide_markdown/reveal_js/index.html\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a><br>\nremark.jsは<a href=\"https://ykhirao.github.io/qiita/slide_markdown/remark_js/remark_js.pdf\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a>(pdf)<br>\nMarpは<a href=\"https://ykhirao.github.io/qiita/slide_markdown/Marp/marp.pdf\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a>(pdf)<br>\nSwipeは<a href=\"https://swipe.to/6287cw\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a><br>\nQiitaは<a href=\"http://qiita.com/ykhirao/private/4596e88cf22fa6e04790\">こちら</a></p>\n\n<h1>\n<span id=\"ツール詳細\" class=\"fragment\"></span><a href=\"#%E3%83%84%E3%83%BC%E3%83%AB%E8%A9%B3%E7%B4%B0\"><i class=\"fa fa-link\"></i></a>ツール詳細</h1>\n\n<h2>\n<span id=\"revealjs\" class=\"fragment\"></span><a href=\"#revealjs\"><i class=\"fa fa-link\"></i></a>reveal.js</h2>\n\n<p><a href=\"https://github.com/hakimel/reveal.js/\" rel=\"nofollow noopener\" target=\"_blank\">GitHub</a>からファイルをダウンロードしてきて、<code>index.html</code>に直接テキストを書いていく方式です。<br>\n何も変更加えなくても、かなり動きがかっこいいです！<br>\nスライドは水平方向だけじゃなくて垂直方向にも動いたりして、かっこいい。<br>\n[ --- ] この文字列が次のページ,<br>\n[ &lt;&lt;&lt; ] こ文字列で垂直下ページへの区切りという設定追加は2行</p>\n\n<h2>\n<span id=\"remarkjs\" class=\"fragment\"></span><a href=\"#remarkjs\"><i class=\"fa fa-link\"></i></a>remark.js</h2>\n\n<p>上記と同じく<a href=\"https://github.com/gnab/remark\" rel=\"nofollow noopener\" target=\"_blank\">GitHub</a>からダウンロードしてきて、htmlファイルをいじる感じです。ほんと何もしなくてもMDファイルだけに集中すればいい感じです。改ページは[ --- ]<br>\nローカルだとうまくいってるのですが、<a href=\"https://ykhirao.github.io/SlideByMarkdown/remark_js/\" rel=\"nofollow noopener\" target=\"_blank\">GitHubページ</a>だとうまくいかないので、PDFでの公開です。情報求む。</p>\n\n<h2>\n<span id=\"marp\" class=\"fragment\"></span><a href=\"#marp\"><i class=\"fa fa-link\"></i></a>Marp</h2>\n\n<p><a href=\"https://yhatt.github.io/marp/\" rel=\"nofollow noopener\" target=\"_blank\">こちら</a>からダウンロードできる。<br>\nElectronで作られた、デスクトップアプリケーション。普通に使いやすい。<br>\n#に色ついたり、上下の余白とかが一番使いやすかった。</p>\n\n<h2>\n<span id=\"swipe\" class=\"fragment\"></span><a href=\"#swipe\"><i class=\"fa fa-link\"></i></a>Swipe</h2>\n\n<p>Webで完結できるMD記法のスライド。<br>\n一度作成すると、ファイルがスライドごとに分割されてpdf化とmdファイルの取得ができない(?)ので、mdファイルの編集と保存管理はローカルでやるほうがいいかも。</p>\n\n<h2>\n<span id=\"qiitaスライド\" class=\"fragment\"></span><a href=\"#qiita%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89\"><i class=\"fa fa-link\"></i></a>Qiitaスライド</h2>\n\n<p>おなじみキータのスライドモード。限定共有にしてプレゼンすればいいと思った。<br>\n使いやすいけど、全画面とプレビュー画面の差が大きい。</p>\n\n<h1>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h1>\n\n<p>Marpが一番使いやすかったのと、reveal.jsがかっこよかったのでこの２つはおすすめ。<br>\nもちろん自分の用途にあったものをお使いください！</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\"></th>\n<th style=\"text-align: center\">reveal.js</th>\n<th style=\"text-align: center\">remark.js</th>\n<th style=\"text-align: center\">Marp</th>\n<th style=\"text-align: center\">Swipe</th>\n<th style=\"text-align: center\">Qiita</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">改ページ</td>\n<td style=\"text-align: center\">設定</td>\n<td style=\"text-align: center\">---</td>\n<td style=\"text-align: center\">--- ***</td>\n<td style=\"text-align: center\">***</td>\n<td style=\"text-align: center\">***</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">下線<code>&lt;hr&gt;</code>\n</td>\n<td style=\"text-align: center\">***</td>\n<td style=\"text-align: center\">***</td>\n<td style=\"text-align: center\">?</td>\n<td style=\"text-align: center\">---</td>\n<td style=\"text-align: center\">---</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">縦スクロール</td>\n<td style=\"text-align: center\">不可</td>\n<td style=\"text-align: center\">不可</td>\n<td style=\"text-align: center\">不可</td>\n<td style=\"text-align: center\">可</td>\n<td style=\"text-align: center\">可</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">独断と偏見のおすすめ</td>\n<td style=\"text-align: center\">*****</td>\n<td style=\"text-align: center\">****</td>\n<td style=\"text-align: center\">*****</td>\n<td style=\"text-align: center\">***</td>\n<td style=\"text-align: center\">***</td>\n</tr>\n</tbody>\n</table>\n\n<ul>\n<li>縦スクロールは、はみ出した部分が見れるか見れないか</li>\n<li>操作感は若干違いあるので、一番気に入ったのを使ってください！</li>\n</ul>\n\n<h1>\n<span id=\"githubでwebページ公開しよう\" class=\"fragment\"></span><a href=\"#github%E3%81%A7web%E3%83%9A%E3%83%BC%E3%82%B8%E5%85%AC%E9%96%8B%E3%81%97%E3%82%88%E3%81%86\"><i class=\"fa fa-link\"></i></a>GitHubでwebページ公開しよう</h1>\n\n<p>皆様ご存知の通り、<br>\nGitHubの[ Master ]ブランチから [ gh-pages ]というブランチを切ったら、<br>\nhttps://[アカウント名].github.io/[リポジトリ名]/<br>\nで静的なWEBページ公開できるのでおすすめです！<br>\n上記URLだと、[リポジトリ名]直下のindex.htmlが読み込まれます！</p>\n\n<h1>\n<span id=\"最後に\" class=\"fragment\"></span><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"><i class=\"fa fa-link\"></i></a>最後に</h1>\n\n<ul>\n<li>Markdownに慣れてるなら、簡単にそれっぽいスライド作れるようになったキガスル</li>\n<li>1日でまとめた結果で間違ってる可能性高いので、何か誤情報あれば教えてください！</li>\n</ul>\n","body":"\n## 2019/12 追記\n[LTのスライド作成に時間をかけたくない](https://qiita.com/ta9star/items/da9af53c4bf542d3ae7a)\nでリンクをいただいたので調べると、すごくよい機能があるみたいです。！！\n\n[Marp for VSCode](https://marketplace.visualstudio.com/items?itemName=marp-team.marp-vscode)というのがあるみたいで、VSCodeを使っている人はこれでいいのではないでしょうか。\n\n\n## 2018/08 追記\n\n未だにいいねされるので（2017年初期作成）、\n最近の勉強会でよく使われているスライド作成ツールはマークダウンではありませんが\nhttps://slides.com/ 圧倒的にこれだと思います。\n\n![Screenshot from 2018-10-25 12-35-55.png](https://qiita-image-store.s3.amazonaws.com/0/112929/495f2c45-62e9-6a90-72f4-c31613facbc0.png)\n\nWeb上で簡単にスライド作れる系のやつです。\n\n# Markdown記法でスライドを作ろう！\n\n## 内容\n+ 簡単な発表に使えるツールのまとめ\n+ Markdown記法 + スライド作成！\n\n## 心の声(思ってないですよ！)\n* 最近Markdown記法使いすぎて、PPTの作成めんどくさい\n* PPTを作らずboostnoteでの発表を本気で考えた\n* 忙しくて…レイアウトにこだわりたくない…簡単な発表にしたいけどどうすればいいの\n* 自己紹介発表めんどう…\n\n## 試したツール一覧\n\n* reveal.js\n* remark.js\n* Marp\n* Swipe\n* Qiita\n\n## ツールごとのイメージ\n\nこんな感じのマークダウンを書いた結果がこちら。\n\n```sample.md\n[Title]\n===\n###### Created by Yuki ( [@ykhirao](http://qiita.com/ykhirao) )\n```\n\n* reveal.js\n<img width=\"1124\" alt=\"スクリーンショット 2017-02-24 15.42.13.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/009679b2-f716-1934-dc6b-f8492501eca9.png\">\n\n* remark.js\n<img width=\"697\" alt=\"スクリーンショット 2017-02-24 15.42.20.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/faebd9d9-2eab-7674-1e42-9dc96375aebf.png\">\n\n* Marp\n<img width=\"985\" alt=\"スクリーンショット 2017-02-24 15.42.25.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/81c9d9f8-c8f5-92a1-50c5-618456442333.png\">\n\n* Swipe\n<img width=\"1092\" alt=\"スクリーンショット 2017-02-24 15.42.33.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/96669095-ef10-930b-544d-6fc2580224bd.png\">\n\n* Qiita\n<img width=\"709\" alt=\"スクリーンショット 2017-02-24 15.42.40.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/c35187fb-3c73-3684-14be-8961595c99f9.png\">\n\n### 次のサンプル\n\n次はこんな感じのマークダウンを書きました。\n\n```sample.md\n# How to write (1)\n\n# # h1 test テスト\n## ## h2 test テスト\n### ### h3 test テスト\n#### #### h4 test テスト\n```\n\n* reveal.js\n<img width=\"1131\" alt=\"スクリーンショット 2017-02-24 15.48.47.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/2eeac40d-51e8-c274-0e6d-3938fbf0e785.png\">\n\n\n* remark.js\n<img width=\"709\" alt=\"スクリーンショット 2017-02-24 15.48.53.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/05ee628c-95f4-e06a-38bb-b0ba6a08c87f.png\">\n\n\n* Marp\n<img width=\"1005\" alt=\"スクリーンショット 2017-02-24 15.48.58.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/04ffc2c5-a690-09c3-ae87-be0c6e008061.png\">\n\n\n* Swipe\n<img width=\"1127\" alt=\"スクリーンショット 2017-02-24 15.49.03.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/d8206ac4-3506-e2fe-be3a-860500a9694a.png\">\n\n\n* Qiita\n<img width=\"722\" alt=\"スクリーンショット 2017-02-24 15.49.07.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112929/80f4b0d4-a910-ce0e-c6e5-4ae628b3859e.png\">\n\n\n\n### その他ちょっと長めのmdファイルの結果のスライド\n[こちら](https://github.com/ykhirao/SlideByMarkdown/blob/gh-pages/main_contents.txt)のMarkDown記法で書いたファイルを微調整しつつ作ったスライド一覧がこちら！\nどれもほとんどプレーンMarkDownですが、\nCSSとかいじらなくても、ある程度整えてくれるものが多いです！\n\nreveal.jsは[こちら](https://ykhirao.github.io/qiita/slide_markdown/reveal_js/index.html)\nremark.jsは[こちら](https://ykhirao.github.io/qiita/slide_markdown/remark_js/remark_js.pdf)(pdf)\nMarpは[こちら](https://ykhirao.github.io/qiita/slide_markdown/Marp/marp.pdf)(pdf)\nSwipeは[こちら](https://swipe.to/6287cw)\nQiitaは[こちら](http://qiita.com/ykhirao/private/4596e88cf22fa6e04790)\n\n\n\n# ツール詳細\n\n## reveal.js\n\n[GitHub](https://github.com/hakimel/reveal.js/)からファイルをダウンロードしてきて、`index.html`に直接テキストを書いていく方式です。\n何も変更加えなくても、かなり動きがかっこいいです！\nスライドは水平方向だけじゃなくて垂直方向にも動いたりして、かっこいい。\n[ --- ] この文字列が次のページ,\n[ <<< ] こ文字列で垂直下ページへの区切りという設定追加は2行\n\n## remark.js\n上記と同じく[GitHub](https://github.com/gnab/remark)からダウンロードしてきて、htmlファイルをいじる感じです。ほんと何もしなくてもMDファイルだけに集中すればいい感じです。改ページは[ --- ]\nローカルだとうまくいってるのですが、[GitHubページ](https://ykhirao.github.io/SlideByMarkdown/remark_js/)だとうまくいかないので、PDFでの公開です。情報求む。\n\n## Marp\n[こちら](https://yhatt.github.io/marp/)からダウンロードできる。\nElectronで作られた、デスクトップアプリケーション。普通に使いやすい。\n\\#に色ついたり、上下の余白とかが一番使いやすかった。\n\n## Swipe\nWebで完結できるMD記法のスライド。\n一度作成すると、ファイルがスライドごとに分割されてpdf化とmdファイルの取得ができない(?)ので、mdファイルの編集と保存管理はローカルでやるほうがいいかも。\n\n## Qiitaスライド\nおなじみキータのスライドモード。限定共有にしてプレゼンすればいいと思った。\n使いやすいけど、全画面とプレビュー画面の差が大きい。\n\n# まとめ\nMarpが一番使いやすかったのと、reveal.jsがかっこよかったのでこの２つはおすすめ。\nもちろん自分の用途にあったものをお使いください！\n\n|  | reveal.js | remark.js | Marp | Swipe | Qiita |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|  改ページ | 設定  | ---  | --- \\***  | \\***  |  \\*** |\n| 下線`<hr>`  | \\***  |  \\*** | ?  | ---  | ---  |\n| 縦スクロール  | 不可  | 不可  | 不可  |  可 | 可  |\n| 独断と偏見のおすすめ  | \\*****  | \\****  | \\*****  |  \\*** | \\***  |\n\n* 縦スクロールは、はみ出した部分が見れるか見れないか\n* 操作感は若干違いあるので、一番気に入ったのを使ってください！\n\n# GitHubでwebページ公開しよう\n\n皆様ご存知の通り、\nGitHubの[ Master ]ブランチから [ gh-pages ]というブランチを切ったら、\nhttps://[アカウント名].github.io/[リポジトリ名]/\nで静的なWEBページ公開できるのでおすすめです！\n上記URLだと、[リポジトリ名]直下のindex.htmlが読み込まれます！\n\n# 最後に\n* Markdownに慣れてるなら、簡単にそれっぽいスライド作れるようになったキガスル\n* 1日でまとめた結果で間違ってる可能性高いので、何か誤情報あれば教えてください！\n\n\n\n\n\n\n\n\n\n\n\n","coediting":false,"comments_count":2,"created_at":"2017-02-23T18:46:05+09:00","group":null,"id":"74a23f812dd5d22b3b88","likes_count":332,"private":false,"reactions_count":0,"stocks_count":302,"tags":[{"name":"Qiita","versions":[]},{"name":"Markdown","versions":[]},{"name":"qiitaSlide","versions":[]}],"title":"[ Markdownでスライド作成 ] 5種類くらいツールを試してみた結果","updated_at":"2019-12-25T14:59:38+09:00","url":"https://qiita.com/ykhirao/items/74a23f812dd5d22b3b88","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false},{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>昨日[170216]の業務ではまった点をまとめます。試行錯誤しながら長めになるので気長にみてください。クリックした行番号をjQuery取得したいだけのQiitaです！</p>\n\n<h2>\n<span id=\"内容キーワード\" class=\"fragment\"></span><a href=\"#%E5%86%85%E5%AE%B9%E3%82%AD%E3%83%BC%E3%83%AF%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>内容・キーワード</h2>\n\n<ul>\n<li>列番号を取得する</li>\n<li>親要素取得について</li>\n<li>jQuery</li>\n<li>初心者向け、というか私がJS/jQueryの初心者</li>\n</ul>\n\n<h2>\n<span id=\"やりたかったこと\" class=\"fragment\"></span><a href=\"#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\"><i class=\"fa fa-link\"></i></a>やりたかったこと</h2>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">User ID</th>\n<th style=\"text-align: center\">Name</th>\n<th style=\"text-align: center\">Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">2</td>\n<td style=\"text-align: center\">Takahashi <i></i>\n</td>\n<td style=\"text-align: center\">test</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">4</td>\n<td style=\"text-align: center\">Yamada</td>\n<td style=\"text-align: center\">test2</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">5</td>\n<td style=\"text-align: center\">Sato</td>\n<td style=\"text-align: center\">test3</td>\n</tr>\n</tbody>\n</table>\n\n<p>こちらのTableの[Takahashi]をクリックして、jQueryで列番号[0]を取得して</p>\n\n<div class=\"code-frame\" data-lang=\"php\">\n<div class=\"code-lang\"><span class=\"bold\">test.php</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">Array</span>\n<span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"k\">Array</span>\n        <span class=\"p\">(</span>\n            <span class=\"p\">[</span><span class=\"s1\">'趣味'</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"読書\"</span>\n            <span class=\"p\">[</span><span class=\"s2\">\"特技\"</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"ruby\"</span>\n            <span class=\"p\">[</span><span class=\"s2\">\"名前\"</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"Takahashi\"</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"k\">Array</span>\n        <span class=\"p\">(</span>\n            <span class=\"p\">(</span><span class=\"n\">略</span><span class=\"p\">)</span>\n        <span class=\"p\">)</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n</div>\n\n<p>この<code>test.php</code>のArray[0]を取得して、次のテーブルを作りたいと</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\"></th>\n<th style=\"text-align: center\">Takahashi</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">趣味</td>\n<td style=\"text-align: center\">読書</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">特技</td>\n<td style=\"text-align: center\">ruby</td>\n</tr>\n</tbody>\n</table>\n\n<p>そんなことがしたかったです！</p>\n\n<h1>\n<span id=\"解法1-列全体をクリック可能にする\" class=\"fragment\"></span><a href=\"#%E8%A7%A3%E6%B3%951-%E5%88%97%E5%85%A8%E4%BD%93%E3%82%92%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF%E5%8F%AF%E8%83%BD%E3%81%AB%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>解法1 列全体をクリック可能にする</h1>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">User ID</th>\n<th style=\"text-align: center\">Name</th>\n<th style=\"text-align: center\">Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">2 <i></i>\n</td>\n<td style=\"text-align: center\">Takahashi <i></i>\n</td>\n<td style=\"text-align: center\">test <i></i>\n</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">4</td>\n<td style=\"text-align: center\">Yamada</td>\n<td style=\"text-align: center\">test2</td>\n</tr>\n</tbody>\n</table>\n\n<p>列番号0と表示してくれるかな?</p>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">table.html</span></div>\n<div class=\"highlight\"><pre><code>\n/* ただのテーブル */\n<span class=\"nt\">&lt;table&gt;</span>\n  <span class=\"nt\">&lt;thead&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;th&gt;</span>User ID<span class=\"nt\">&lt;/th&gt;&lt;th&gt;</span>Name<span class=\"nt\">&lt;/th&gt;&lt;th&gt;</span>Comment<span class=\"nt\">&lt;/th&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n  <span class=\"nt\">&lt;/thead&gt;</span>\n  <span class=\"nt\">&lt;tbody&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>2<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"names\"</span><span class=\"nt\">&gt;</span>Takahashi<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>test<span class=\"nt\">&lt;/td&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>4<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"names\"</span><span class=\"nt\">&gt;</span>Yamada<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>test2<span class=\"nt\">&lt;/td&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n  <span class=\"nt\">&lt;/tbody&gt;</span>\n<span class=\"nt\">&lt;/table&gt;</span>\n\n/* ここからjQuery */\n\n<span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">\"http://code.jquery.com/jquery.min.js\"</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n<span class=\"nt\">&lt;script&gt;</span>\n<span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n\n<span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody tr</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">click</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(){</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody tr</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">index</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">));</span>\n<span class=\"p\">});</span>\n\n<span class=\"p\">})();</span>\n<span class=\"nt\">&lt;/script&gt;</span>\n</code></pre></div>\n</div>\n\n<p>次の部分を簡単に解説すると</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">script.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody tr</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">index</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">);</span>\n</code></pre></div>\n</div>\n\n<p><code>this</code>には今回クリックした列がすべて入っています。console.logするとこんな感じ。<code>&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;&lt;td class=\"names\"&gt;Takahashi&lt;/td&gt;&lt;td&gt;test&lt;/td&gt;&lt;/tr&gt;</code><br>\n<code>$(\"tbody tr\")</code>は　<code>tbody</code>直下の<code>tr</code>です。<br>\n<code>index()</code>が<code>this</code>がいる列のインデックス番号を返してくれます。<br>\nこれで無事取得できました〜〜。<br>\n一番情報ページが多くて簡単でした！</p>\n\n<h1>\n<span id=\"解法2-nameだけクリック可能にする\" class=\"fragment\"></span><a href=\"#%E8%A7%A3%E6%B3%952-name%E3%81%A0%E3%81%91%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF%E5%8F%AF%E8%83%BD%E3%81%AB%E3%81%99%E3%82%8B\"><i class=\"fa fa-link\"></i></a>解法2 Nameだけクリック可能にする</h1>\n\n<p>Nameにはクラスnamesをつけています。</p>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">User ID</th>\n<th style=\"text-align: center\">Name</th>\n<th style=\"text-align: center\">Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">2</td>\n<td style=\"text-align: center\">Takahashi</td>\n<td style=\"text-align: center\">test</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">4</td>\n<td style=\"text-align: center\">Yamada <i></i>\n</td>\n<td style=\"text-align: center\">test2</td>\n</tr>\n</tbody>\n</table>\n\n<p>ここ押すと列番号1を取得したい。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">script.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody .names</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">click</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(){</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">);</span> <span class=\"c1\">// &lt;td class=\"names\"&gt;Takahashi&lt;/td&gt;</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">tr</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">).</span><span class=\"nx\">parent</span><span class=\"p\">();</span> <span class=\"c1\">// [td]の親の[tr]を取得</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">index</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody tr</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">index</span><span class=\"p\">(</span><span class=\"nx\">tr</span><span class=\"p\">);</span> <span class=\"c1\">// このtrは何番目?</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">index</span><span class=\"p\">);</span>\n<span class=\"p\">});</span>\n</code></pre></div>\n</div>\n\n<p>table構成は変えてないのでjQueryの部分だけです。<br>\n<code>this</code>じゃなくて<code>$(this)</code>ですよ〜。ここめっちゃハマりました。<br>\n<del>詳しい解説は先輩方がコメント欄でしてくれると信じているので</del><br>\nとりあえずconsole.logしてみると</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">script.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">);</span> <span class=\"c1\">// &lt;td class=\"names\"&gt;Takahashi&lt;/td&gt;</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">parent</span><span class=\"p\">());</span> <span class=\"c1\">// エラー</span>\n<span class=\"c1\">// Uncaught TypeError: parent is not a function at HTMLTableCellElement</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">));</span> <span class=\"c1\">// [td.names, context: td.names]</span>\n<span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">).</span><span class=\"nx\">parent</span><span class=\"p\">());</span> <span class=\"c1\">// 0</span>\n\n</code></pre></div>\n</div>\n\n<p>thisのparent()はタイプエラーでて、$(this)でそれっぽいオブジェクトにしてからparent()使えってことでしょうか。</p>\n\n<h1>\n<span id=\"解法3-ソート付いても大丈夫\" class=\"fragment\"></span><a href=\"#%E8%A7%A3%E6%B3%953-%E3%82%BD%E3%83%BC%E3%83%88%E4%BB%98%E3%81%84%E3%81%A6%E3%82%82%E5%A4%A7%E4%B8%88%E5%A4%AB\"><i class=\"fa fa-link\"></i></a>解法3 ソート付いても大丈夫！！！</h1>\n\n<p>痛恨のミスをしていました。<br>\nソートを可能にしていたことをすっかり忘れていました。はい。</p>\n\n<div class=\"code-frame\" data-lang=\"php\">\n<div class=\"code-lang\"><span class=\"bold\">test.php</span></div>\n<div class=\"highlight\"><pre><code><span class=\"k\">Array</span>\n<span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"k\">Array</span>\n        <span class=\"p\">(</span>\n            <span class=\"p\">[</span><span class=\"s1\">'趣味'</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"読書\"</span>\n            <span class=\"p\">[</span><span class=\"s2\">\"特技\"</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"ruby\"</span>\n            <span class=\"p\">[</span><span class=\"s2\">\"名前\"</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"Takahashi\"</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">=&gt;</span> <span class=\"k\">Array</span>\n        <span class=\"p\">(</span>\n            <span class=\"p\">(</span><span class=\"n\">略</span><span class=\"p\">)</span>\n        <span class=\"p\">)</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n</div>\n\n<p>ソートした後は、行のindexとarrayのindexが対応してなかったです！！<br>\n別人のデータ取ってきてました。</p>\n\n<div class=\"code-frame\" data-lang=\"php\">\n<div class=\"code-lang\"><span class=\"bold\">test.php</span></div>\n<div class=\"highlight\"><pre><code>/* phpのforeachの途中 */\n<span class=\"cp\">&lt;?php</span> <span class=\"k\">isset</span><span class=\"p\">(</span><span class=\"nv\">$index</span><span class=\"p\">)</span> <span class=\"o\">?</span> <span class=\"nv\">$index</span> <span class=\"o\">+=</span> <span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"nv\">$index</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"cp\">?&gt;</span>\n<span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"names\"</span> <span class=\"na\">id=</span><span class=\"s\">\"</span><span class=\"cp\">&lt;?php</span> <span class=\"k\">echo</span> <span class=\"nv\">$index</span><span class=\"p\">;</span> <span class=\"cp\">?&gt;</span><span class=\"s\">\"</span><span class=\"nt\">&gt;</span>Takahashi<span class=\"nt\">&lt;/td&gt;</span>\n</code></pre></div>\n</div>\n\n<p>こんな感じのphpでid生成して対応しました。<br>\nTableはこんな感じ。</p>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">index.html</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nt\">&lt;table&gt;</span>\n  <span class=\"nt\">&lt;thead&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;th&gt;</span>User ID<span class=\"nt\">&lt;/th&gt;&lt;th&gt;</span>Name<span class=\"nt\">&lt;/th&gt;&lt;th&gt;</span>Comment<span class=\"nt\">&lt;/th&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n  <span class=\"nt\">&lt;/thead&gt;</span>\n  <span class=\"nt\">&lt;tbody&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>2<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"names\"</span> <span class=\"na\">id=</span><span class=\"s\">\"0\"</span><span class=\"nt\">&gt;</span>Takahashi<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>test<span class=\"nt\">&lt;/td&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n    <span class=\"nt\">&lt;tr&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>4<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"names\"</span> <span class=\"na\">id=</span><span class=\"s\">\"1\"</span><span class=\"nt\">&gt;</span>Yamada<span class=\"nt\">&lt;/td&gt;</span>\n      <span class=\"nt\">&lt;td&gt;</span>test2<span class=\"nt\">&lt;/td&gt;</span>\n    <span class=\"nt\">&lt;/tr&gt;</span>\n  <span class=\"nt\">&lt;/tbody&gt;</span>\n<span class=\"nt\">&lt;/table&gt;</span>\n</code></pre></div>\n</div>\n\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center\">User ID <i></i>\n</th>\n<th style=\"text-align: center\">Name <i></i>\n</th>\n<th style=\"text-align: center\">Comment <i></i>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center\">2</td>\n<td style=\"text-align: center\">Takahashi <i></i>\n</td>\n<td style=\"text-align: center\">test</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">4</td>\n<td style=\"text-align: center\">Yamada</td>\n<td style=\"text-align: center\">test2</td>\n</tr>\n</tbody>\n</table>\n\n<p>なので今回はクラスnamesをクリックしたら、そのtdのidを列番号の代わりに取得するということにた。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">script.js</span></div>\n<div class=\"highlight\"><pre><code><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">tbody .names</span><span class=\"dl\">\"</span><span class=\"p\">).</span><span class=\"nx\">click</span><span class=\"p\">(</span><span class=\"kd\">function</span><span class=\"p\">(){</span>\n  <span class=\"kd\">var</span> <span class=\"nx\">index</span> <span class=\"o\">=</span> <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">).</span><span class=\"nx\">attr</span><span class=\"p\">(</span><span class=\"dl\">\"</span><span class=\"s2\">id</span><span class=\"dl\">\"</span><span class=\"p\">);</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">index</span><span class=\"p\">);</span>\n<span class=\"p\">});</span>\n</code></pre></div>\n</div>\n\n<p>こんな感じでIDの値を取得できます！</p>\n\n<h1>\n<span id=\"おわりに\" class=\"fragment\"></span><a href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"><i class=\"fa fa-link\"></i></a>おわりに</h1>\n\n<p>jQueryエラーとかなり向き合い、苦戦しました。<br>\nはじめての記事なので何かあったらコメントください！<br>\n長文読んでいただきありがとうございました！</p>\n\n<p>.</p>\n","body":"# はじめに\n昨日[170216]の業務ではまった点をまとめます。試行錯誤しながら長めになるので気長にみてください。クリックした行番号をjQuery取得したいだけのQiitaです！\n\n## 内容・キーワード\n+ 列番号を取得する\n+ 親要素取得について\n+ jQuery\n+ 初心者向け、というか私がJS/jQueryの初心者\n\n## やりたかったこと\n\n| User ID | Name | Comment |\n|:-:|:-:|:-:|\n| 2  |  Takahashi <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>  |  test |\n| 4  | Yamada  |test2   |\n| 5  | Sato  |  test3 |\n\nこちらのTableの[Takahashi]をクリックして、jQueryで列番号[0]を取得して\n\n```test.php\nArray\n(\n    [0] => Array\n        (\n            ['趣味'] => \"読書\"\n            [\"特技\"] => \"ruby\"\n            [\"名前\"] => \"Takahashi\"\n        )\n    [1] => Array\n        (\n            (略)\n        )\n)\n```\nこの`test.php`のArray[0]を取得して、次のテーブルを作りたいと\n\n|  | Takahashi |\n|:-:|:-:|\n| 趣味  | 読書  |\n| 特技  |  ruby |\n\nそんなことがしたかったです！\n\n# 解法1 列全体をクリック可能にする\n\n| User ID | Name | Comment |\n|:-:|:-:|:-:|\n| 2 <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>  |  Takahashi <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>  |  test <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i> |\n| 4   |  Yamada   |  test2  |\n列番号0と表示してくれるかな?\n\n```table.html\n\n/* ただのテーブル */\n<table>\n  <thead>\n    <tr>\n      <th>User ID</th><th>Name</th><th>Comment</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>2</td>\n      <td class=\"names\">Takahashi</td>\n      <td>test</td>\n    </tr>\n    <tr>\n      <td>4</td>\n      <td class=\"names\">Yamada</td>\n      <td>test2</td>\n    </tr>\n  </tbody>\n</table>\n\n/* ここからjQuery */\n\n<script src=\"http://code.jquery.com/jquery.min.js\"></script>\n<script>\n(function() {\n\n$(\"tbody tr\").click(function(){\n  console.log($(\"tbody tr\").index(this));\n});\n\n})();\n</script>\n```\n次の部分を簡単に解説すると\n\n```script.js\n$(\"tbody tr\").index(this);\n```\n`this`には今回クリックした列がすべて入っています。console.logするとこんな感じ。`<tr><td>2</td><td class=\"names\">Takahashi</td><td>test</td></tr>`\n`$(\"tbody tr\")`は　`tbody`直下の`tr`です。\n`index()`が`this`がいる列のインデックス番号を返してくれます。\nこれで無事取得できました〜〜。\n一番情報ページが多くて簡単でした！\n\n# 解法2 Nameだけクリック可能にする\n\nNameにはクラスnamesをつけています。\n\n| User ID | Name | Comment |\n|:-:|:-:|:-:|\n| 2   |  Takahashi   |  test  |\n| 4   |  Yamada <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>  |  test2  |\nここ押すと列番号1を取得したい。\n\n\n```script.js\n$(\"tbody .names\").click(function(){\n  console.log(this); // <td class=\"names\">Takahashi</td>\n  var tr = $(this).parent(); // [td]の親の[tr]を取得\n  var index = $(\"tbody tr\").index(tr); // このtrは何番目?\n  console.log(index);\n});\n```\n\ntable構成は変えてないのでjQueryの部分だけです。\n`this`じゃなくて`$(this)`ですよ〜。ここめっちゃハマりました。\n~~詳しい解説は先輩方がコメント欄でしてくれると信じているので~~\nとりあえずconsole.logしてみると\n\n```script.js\nconsole.log(this); // <td class=\"names\">Takahashi</td>\nconsole.log(this.parent()); // エラー\n// Uncaught TypeError: parent is not a function at HTMLTableCellElement\nconsole.log($(this)); // [td.names, context: td.names]\nconsole.log($(this).parent()); // 0\n\n```\nthisのparent()はタイプエラーでて、$(this)でそれっぽいオブジェクトにしてからparent()使えってことでしょうか。\n\n# 解法3 ソート付いても大丈夫！！！\n\n痛恨のミスをしていました。\nソートを可能にしていたことをすっかり忘れていました。はい。\n\n```test.php\nArray\n(\n    [0] => Array\n        (\n            ['趣味'] => \"読書\"\n            [\"特技\"] => \"ruby\"\n            [\"名前\"] => \"Takahashi\"\n        )\n    [1] => Array\n        (\n            (略)\n        )\n)\n```\nソートした後は、行のindexとarrayのindexが対応してなかったです！！\n別人のデータ取ってきてました。\n\n\n```test.php\n/* phpのforeachの途中 */\n<?php isset($index) ? $index += 1 : $index = 0; ?>\n<td class=\"names\" id=\"<?php echo $index; ?>\">Takahashi</td>\n```\nこんな感じのphpでid生成して対応しました。\nTableはこんな感じ。\n\n```index.html\n<table>\n  <thead>\n    <tr>\n      <th>User ID</th><th>Name</th><th>Comment</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>2</td>\n      <td class=\"names\" id=\"0\">Takahashi</td>\n      <td>test</td>\n    </tr>\n    <tr>\n      <td>4</td>\n      <td class=\"names\" id=\"1\">Yamada</td>\n      <td>test2</td>\n    </tr>\n  </tbody>\n</table>\n```\n\n| User ID <i class=\"fa fa-sort\" aria-hidden=\"true\"></i>| Name <i class=\"fa fa-sort\" aria-hidden=\"true\"></i>| Comment <i class=\"fa fa-sort\" aria-hidden=\"true\"></i>|\n|:-:|:-:|:-:|\n| 2   |  Takahashi <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>  |  test  |\n| 4   |  Yamada   |  test2  |\n\nなので今回はクラスnamesをクリックしたら、そのtdのidを列番号の代わりに取得するということにた。\n\n```script.js\n$(\"tbody .names\").click(function(){\n  var index = $(this).attr(\"id\");\n  console.log(index);\n});\n```\nこんな感じでIDの値を取得できます！\n\n# おわりに\njQueryエラーとかなり向き合い、苦戦しました。\nはじめての記事なので何かあったらコメントください！\n長文読んでいただきありがとうございました！\n\n.\n","coediting":false,"comments_count":0,"created_at":"2017-02-16T02:47:56+09:00","group":null,"id":"59419d0286fe94ee546b","likes_count":6,"private":false,"reactions_count":0,"stocks_count":7,"tags":[{"name":"PHP","versions":[]},{"name":"HTML","versions":[]},{"name":"JavaScript","versions":[]},{"name":"jQuery","versions":[]}],"title":"jQueryでの列番号取得に関して","updated_at":"2018-02-27T11:51:11+09:00","url":"https://qiita.com/ykhirao/items/59419d0286fe94ee546b","user":{"description":"Web Developer From 2016.\r\nPHP/Laravel && React/TypeScript/Node.js\r\n\r\n業務委託の依頼とかはWantedlyとかからでお願いします！","facebook_id":"","followees_count":39,"followers_count":99,"github_login_name":"ykhirao","id":"ykhirao","items_count":73,"linkedin_id":"","location":"Tokyo, Japan","name":"yk","organization":"","permanent_id":112929,"profile_image_url":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/112929/profile-images/1639030792","team_only":false,"twitter_screen_name":"ykhirao","website_url":"https://www.wantedly.com/id/ykhirao"},"page_views_count":null,"team_membership":null,"organization_url_name":null,"slide":false}]},"path":"posts"}
